{"version":3,"sources":["../static/js/main.f6d9a343.js","../webpack/bootstrap d09f4c6d6942c2c29e78","../node_modules/react/index.js","../node_modules/webpack/buildin/global.js","../node_modules/object-assign/index.js","../node_modules/react-scripts/node_modules/promise/lib/core.js","../node_modules/fbjs/lib/invariant.js","../node_modules/fbjs/lib/emptyObject.js","../node_modules/fbjs/lib/emptyFunction.js","../node_modules/firebase/app/index.js","../node_modules/process/browser.js","../node_modules/@firebase/app/dist/index.esm.js","../node_modules/@firebase/util/dist/index.cjs.js","../node_modules/tslib/tslib.es6.js","../node_modules/react-scripts/config/polyfills.js","../node_modules/react-scripts/node_modules/promise/lib/rejection-tracking.js","../node_modules/asap/browser-raw.js","../node_modules/react-scripts/node_modules/promise/lib/es6-extensions.js","../node_modules/react-scripts/node_modules/whatwg-fetch/fetch.js","index.js","../node_modules/react/cjs/react.production.min.js","../node_modules/react-dom/index.js","../node_modules/react-dom/cjs/react-dom.production.min.js","../node_modules/fbjs/lib/ExecutionEnvironment.js","../node_modules/fbjs/lib/getActiveElement.js","../node_modules/fbjs/lib/shallowEqual.js","../node_modules/fbjs/lib/containsNode.js","../node_modules/fbjs/lib/isTextNode.js","../node_modules/fbjs/lib/isNode.js","App.js","Main.js","Sidebar.js","quill.svg","new.png","new-hover.png","NoteList.js","NoteForm.js","rebase.js","../node_modules/re-base/index.js","../node_modules/re-base/dist/bundle.js","../node_modules/@firebase/polyfill/dist/index.esm.js","../node_modules/timers-browserify/main.js","../node_modules/setimmediate/setImmediate.js","../node_modules/whatwg-fetch/fetch.js","../node_modules/firebase/database/index.js","../node_modules/@firebase/database/dist/index.cjs.js","../node_modules/@firebase/logger/dist/index.esm.js","registerServiceWorker.js"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","i","l","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","g","this","Function","eval","e","window","toObject","val","undefined","TypeError","getOwnPropertySymbols","propIsEnumerable","propertyIsEnumerable","assign","test1","String","getOwnPropertyNames","test2","fromCharCode","map","join","test3","split","forEach","letter","keys","err","target","source","from","symbols","to","arguments","length","key","noop","getThen","obj","then","ex","LAST_ERROR","IS_ERROR","tryCallOne","fn","a","tryCallTwo","b","Promise","_75","_83","_18","_38","doResolve","safeThen","self","onFulfilled","onRejected","constructor","resolve","reject","res","handle","Handler","deferred","_47","push","handleResolved","asap","cb","promise","ret","newValue","finale","bind","_71","done","value","reason","_44","invariant","condition","format","f","validateFormat","error","Error","args","argIndex","replace","framesToPop","emptyObject","makeEmptyFunction","arg","emptyFunction","thatReturns","thatReturnsFalse","thatReturnsTrue","thatReturnsNull","thatReturnsThis","thatReturnsArgument","default","defaultSetTimout","defaultClearTimeout","runTimeout","fun","cachedSetTimeout","setTimeout","runClearTimeout","marker","cachedClearTimeout","clearTimeout","cleanUpNextTick","draining","currentQueue","queue","concat","queueIndex","drainQueue","timeout","len","run","Item","array","process","nextTick","Array","apply","title","browser","env","argv","version","versions","on","addListener","once","off","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","listeners","binding","cwd","chdir","dir","umask","__webpack_exports__","createFirebaseNamespace","removeApp","callAppHooks","apps_","app","DEFAULT_ENTRY_NAME","contains","initializeApp","options","rawConfig","config","FirebaseAppImpl","namespace","getApps","registerService","createService","serviceProperties","appHook","allowMultipleInstances","factories","appHooks","serviceNamespace","appArg","__WEBPACK_IMPORTED_MODULE_0__firebase_util__","_i","_getService","extendNamespace","props","eventName","serviceName","factoryName","useAsService","useService","apps","SDK_VERSION","INTERNAL","createSubscribe","ErrorFactory","deepExtend","code","appErrors","create","firebase","tokenListeners","firebase_","isDeleted_","services_","name_","_automaticDataCollectionEnabled","automaticDataCollectionEnabled","options_","getUid","getToken","addAuthTokenListener","callback","removeAuthTokenListener","filter","listener","checkDestroyed_","set","delete","_this","services","serviceKey","instanceKey","all","service","instanceIdentifier","instanceSpecifier","extendApp","console","log","errors","no-app","bad-app-name","duplicate-app","app-deleted","duplicate-service","sa-not-supported","invalid-app-argument","deepCopy","Date","dateValue","getTime","prop","patchProperty","patchCapture","captureFake","result","captureStackTrace","jsonEval","str","JSON","parse","stringify","data","executor","onNoObservers","proxy","ObserverProxy","subscribe","async","onError","catch","implementsAnyMethods","methods","methods_1","method","errorPrefix","fnName","argumentNumber","optional","argName","validateNamespace","validateCallback","validateContextObject","context","tslib_1","CONSTANTS","NODE_CLIENT","NODE_ADMIN","assert","assertion","message","assertionError","stringToByteArray","out","charCodeAt","byteArrayToString","bytes","pos","c1","c2","c3","c4","u","base64","byteToCharMap_","charToByteMap_","byteToCharMapWebSafe_","charToByteMapWebSafe_","ENCODED_VALS_BASE","ENCODED_VALS","ENCODED_VALS_WEBSAFE","HAS_NATIVE_SUPPORT","atob","encodeByteArray","input","opt_webSafe","isArray","init_","byteToCharMap","output","byte1","haveByte2","byte2","haveByte3","byte3","outByte1","outByte2","outByte3","outByte4","encodeString","btoa","decodeString","decodeStringToByteArray","charToByteMap","charAt","haveByte4","byte4","base64Encode","utf8Bytes","base64Decode","Deferred","wrapCallback","getUA","navigator","isMobileCordova","test","isReactNative","isNodeSdk","ERROR_NAME","FirebaseError","err_1","stack","pattern","template","fullCode","match","toString","slice","decode","token","header","claims","signature","parts","isValidTimestamp","validSince","validUntil","now","Math","floor","issuedAtTime","isValidFormat","decoded","isAdmin","safeGet","extend","objTo","objFrom","clone","isNonNullObject","isEmpty","getCount","rv","opt_obj","findKey","opt_this","findValue","getAnyKey","getValues","every","querystring","querystringParams","params","arrayVal","encodeURIComponent","querystringDecode","Hash","blockSize","Sha1","_super","chain_","buf_","W_","pad_","inbuf_","total_","reset","__extends","compress_","buf","opt_offset","W","t","k","update","opt_length","lengthMinusBlock","inbuf","digest","totalBits","j","observers","unsubscribes","observerCount","task","finalized","next","forEachObserver","observer","close","complete","nextOrObserver","unsub","unsubscribeOne","finalError","sendOne","validateArgCount","minCount","maxCount","argCount","argError","stringToByteArray$1","high","stringLength","__","extendStatics","__rest","indexOf","__decorate","decorators","desc","r","getOwnPropertyDescriptor","Reflect","decorate","__param","paramIndex","decorator","__metadata","metadataKey","metadataValue","metadata","__awaiter","thisArg","_arguments","P","generator","fulfilled","step","rejected","__generator","body","verb","v","op","_","y","label","ops","pop","trys","sent","throw","return","Symbol","iterator","__exportStar","__values","__read","ar","__spread","__await","__asyncGenerator","q","resume","settle","fulfill","shift","asyncIterator","__asyncDelegator","__asyncValues","__makeTemplateObject","cooked","raw","__importStar","mod","__importDefault","__assign","setPrototypeOf","__proto__","enable","disable","enabled","onUnhandled","id","allRejections","matchWhitelist","rejections","whitelist","DEFAULT_WHITELIST","displayId","logged","logError","onHandled","warn","_56","line","list","some","cls","ReferenceError","RangeError","global","rawAsap","requestFlush","flushing","flush","index","currentIndex","capacity","scan","newLength","makeRequestCallFromTimer","handleTimer","timeoutHandle","clearInterval","intervalHandle","setInterval","scope","BrowserMutationObserver","MutationObserver","WebKitMutationObserver","toggle","node","document","createTextNode","observe","characterData","valuePromise","TRUE","FALSE","NULL","UNDEFINED","ZERO","EMPTYSTRING","arr","remaining","race","values","normalizeName","toLowerCase","normalizeValue","iteratorFor","items","support","iterable","Headers","headers","append","consumed","bodyUsed","fileReaderReady","reader","onload","onerror","readBlobAsArrayBuffer","blob","FileReader","readAsArrayBuffer","readBlobAsText","readAsText","readArrayBufferAsText","view","Uint8Array","chars","bufferClone","byteLength","buffer","Body","_initBody","_bodyInit","_bodyText","Blob","isPrototypeOf","_bodyBlob","formData","FormData","_bodyFormData","searchParams","URLSearchParams","arrayBuffer","isDataView","_bodyArrayBuffer","ArrayBuffer","isArrayBufferView","type","text","json","normalizeMethod","upcased","toUpperCase","Request","url","credentials","mode","referrer","form","trim","decodeURIComponent","parseHeaders","rawHeaders","Response","bodyInit","status","ok","statusText","fetch","viewClasses","DataView","isView","oldValue","has","entries","response","redirectStatuses","redirect","location","init","request","xhr","XMLHttpRequest","getAllResponseHeaders","responseURL","responseText","ontimeout","open","withCredentials","responseType","setRequestHeader","send","polyfill","__WEBPACK_IMPORTED_MODULE_0_react__","__WEBPACK_IMPORTED_MODULE_0_react___default","__WEBPACK_IMPORTED_MODULE_1_react_dom__","__WEBPACK_IMPORTED_MODULE_1_react_dom___default","__WEBPACK_IMPORTED_MODULE_2__index_css__","__WEBPACK_IMPORTED_MODULE_3__App__","__WEBPACK_IMPORTED_MODULE_4__registerServiceWorker__","render","createElement","getElementById","D","F","refs","updater","E","G","H","M","h","ref","K","L","children","defaultProps","$$typeof","_owner","J","current","N","escape","=",":","Q","keyPrefix","func","count","R","S","T","C","U","V","O","for","w","x","z","A","B","isMounted","enqueueForceUpdate","enqueueReplaceState","enqueueSetState","isReactComponent","setState","forceUpdate","I","isPureReactComponent","__self","__source","X","Children","toArray","only","createRef","Component","PureComponent","createContext","_calculateChangedBits","_defaultValue","_currentValue","_currentValue2","_changedBits","_changedBits2","Provider","Consumer","_context","forwardRef","Fragment","StrictMode","unstable_AsyncMode","unstable_Profiler","cloneElement","createFactory","isValidElement","__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED","ReactCurrentOwner","Y","Z","checkDCE","__REACT_DEVTOOLS_GLOBAL_HOOK__","aa","ia","_hasCaughtError","_caughtError","ka","_hasRethrowError","_rethrowError","na","la","ma","oa","extractEvents","eventTypes","pa","phasedRegistrationNames","qa","registrationName","ra","sa","dependencies","ta","ua","za","currentTarget","ya","invokeGuardedCallbackAndCatchFirstError","Aa","Ba","Da","_dispatchListeners","_dispatchInstances","isPropagationStopped","isPersistent","release","Ea","Fa","Ha","stateNode","wa","disabled","Ia","Ca","rethrowCaughtError","Ja","Na","parentNode","tag","Oa","Pa","Ma","Ra","Sa","dispatchConfig","Ta","_targetInst","Ua","Va","Xa","Ya","Za","alternate","ab","eb","bb","db","lb","kb","canUseDOM","documentElement","mb","_fallbackText","_startText","nb","_root","nativeEvent","Interface","isDefaultPrevented","defaultPrevented","returnValue","rb","eventPool","sb","destructor","qb","getPooled","Db","vb","keyCode","Eb","detail","Gb","which","Cb","Ab","Hb","Fb","wb","ctrlKey","altKey","metaKey","char","zb","Nb","xa","Jb","restoreControlledState","Ob","Lb","Mb","Pb","Qb","Sb","Tb","Ub","Wb","Vb","Yb","nodeName","Xb","Zb","correspondingUseElement","nodeType","$b","setAttribute","ac","bc","getValue","setValue","stopTracking","_valueTracker","cc","dc","checked","sc","rc","tc","displayName","oc","nc","hc","gc","jc","pendingProps","mc","ic","qc","pc","vc","_debugOwner","_debugSource","fileName","lineNumber","zc","yc","xc","wc","Ac","acceptsBooleans","Bc","isNaN","attributeName","attributeNamespace","mustUseProperty","propertyName","Dc","Ec","removeAttribute","setAttributeNS","Fc","defaultChecked","defaultValue","_wrapperState","initialChecked","Gc","Hc","initialValue","controlled","Ic","Jc","Kc","Lc","ownerDocument","activeElement","Nc","Mc","change","Qc","Rc","Sc","Uc","Oc","detachEvent","Vc","Pc","Wc","attachEvent","Xc","Yc","Zc","cd","getModifierState","bd","dd","effectTag","jd","kd","child","sibling","ld","md","qd","charCode","Bd","bubbled","captured","isInteractive","zd","Ad","Fd","targetInst","ancestors","containerInfo","topLevelType","Id","Gd","Dd","Jd","Kd","addEventListener","Ld","Ed","Qd","Pd","Od","Nd","Rd","firstChild","Sd","textContent","offset","nextSibling","Td","contentEditable","$d","Zd","Wd","da","start","selectionStart","end","selectionEnd","getSelection","anchorNode","anchorOffset","focusNode","focusOffset","Yd","ea","Vd","select","Xd","te","ca","ue","ve","selected","defaultSelected","we","wasMultiple","multiple","xe","dangerouslySetInnerHTML","ye","ze","Ae","Ce","De","Ge","lastChild","nodeValue","Je","style","He","setProperty","Le","Ke","Me","is","Oe","blur","focus","jb","Pe","Be","html","innerHTML","removeChild","createElementNS","Qe","Re","Ne","__html","Fe","onClick","onclick","Se","Te","Ue","Ve","Ze","autoFocus","$e","df","ef","hf","gf","ff","lf","mf","kf","jf","nf","contextTypes","ha","__reactInternalMemoizedUnmaskedChildContext","__reactInternalMemoizedMaskedChildContext","childContextTypes","of","pf","qf","rf","getChildContext","sf","__reactInternalMemoizedMergedChildContext","tf","uf","memoizedState","updateQueue","memoizedProps","lastEffect","firstEffect","nextEffect","expirationTime","vf","wf","xf","yf","zf","pendingChildren","implementation","Af","earliestPendingTime","latestPendingTime","earliestSuspendedTime","latestSuspendedTime","latestPingedTime","pendingCommitExpirationTime","finishedWork","pendingContext","hydrate","remainingExpirationTime","firstBatch","nextScheduledRoot","Df","Ef","isDisabled","supportsFiber","inject","Bf","onCommitFiberRoot","Cf","onCommitFiberUnmount","Ff","Gf","If","baseState","firstUpdate","lastUpdate","firstCapturedUpdate","lastCapturedUpdate","firstCapturedEffect","lastCapturedEffect","Jf","Kf","payload","Lf","Mf","Nf","Of","Pf","Hf","Qf","Rf","Sf","Tf","Xf","Wf","Vf","Uf","Yf","cg","Zf","dg","bg","ag","$f","namespaceURI","tagName","eg","fg","hg","mg","shouldComponentUpdate","ng","state","componentWillReceiveProps","UNSAFE_componentWillReceiveProps","lg","og","getDerivedStateFromProps","getSnapshotBeforeUpdate","UNSAFE_componentWillMount","componentWillMount","componentDidMount","qg","_stringRef","rg","sg","Map","fc","pg","kc","Hd","yg","zg","Ag","xg","wg","vg","Bg","Cg","Dg","Eg","ug","tg","Fg","Gg","ec","Hg","Ig","Jg","Kg","_reactInternalFiber","UNSAFE_componentWillUpdate","componentWillUpdate","componentDidUpdate","element","hidden","unstable_observedBits","Lg","Sg","Pg","Qg","appendChild","Rg","Tg","suppressReactErrorLogging","Ug","Vg","Wg","componentWillUnmount","Xg","Yg","Zg","insertBefore","$g","ah","bh","ch","componentDidCatch","dh","Set","add","componentStack","eh","fh","rh","mh","nh","oh","qh","sh","th","uh","lh","hh","vh","ih","wh","xh","ph","getDerivedStateFromCatch","kg","yh","ig","jh","jg","kh","zh","Ah","Bh","Ch","af","gh","Dh","Eh","Ph","Gh","cf","Hh","bf","Qh","Fh","Mh","Rh","Sh","Th","Uh","Lh","Ih","Vh","Wh","Nh","_onComplete","Jh","Kh","Xh","_expirationTime","_defer","Xe","rangeCount","Wa","Ye","focusedElem","selectionRange","ja","hi","__reactInternalSnapshotBeforeUpdate","fa","min","createRange","setStart","removeAllRanges","addRange","setEnd","left","scrollLeft","top","scrollTop","gg","lc","ba","ri","si","Mg","Ng","ti","uc","Og","ui","timeRemaining","Oh","Yh","Zh","$h","ai","bi","ci","di","ei","fi","findFiberByHostInstance","findHostInstanceByFiber","ii","ji","_callbacks","_next","_hasChildren","_didComplete","_children","ki","_didCommit","_onCommit","li","_internalRoot","mi","ni","hasAttribute","oi","_reactRootContainer","legacy_renderSubtreeIntoContainer","pi","invokeGuardedCallback","hasCaughtError","clearCaughtError","va","plugins","eventNameDispatchConfigs","registrationNameModules","registrationNameDependencies","possibleRegistrationNames","injectEventPluginOrder","injectEventPluginsByName","Ga","Ka","injection","getListener","runEventsInBatch","runExtractedEventsInBatch","La","random","Qa","precacheFiberNode","getClosestInstanceFromNode","getInstanceFromNode","getNodeFromInstance","getFiberCurrentPropsFromNode","updateFiberProps","$a","accumulateTwoPhaseDispatches","accumulateTwoPhaseDispatchesSkipTarget","accumulateEnterLeaveDispatches","accumulateDirectDispatches","animationend","animationiteration","animationstart","transitionend","animation","transition","fb","gb","hb","ib","ob","pb","eventPhase","bubbles","cancelable","timeStamp","isTrusted","preventDefault","stopPropagation","cancelBubble","persist","tb","ub","xb","documentMode","yb","Bb","beforeInput","compositionEnd","compositionStart","compositionUpdate","Ib","Kb","injectFiberControlledHostComponent","Rb","enqueueStateRestore","needsStateRestore","restoreStateIfNeeded","color","date","datetime","datetime-local","email","month","number","password","range","search","tel","time","week","Cc","tabIndex","Tc","$c","_isInputEventSupported","ad","Alt","Control","Meta","Shift","ed","screenX","screenY","clientX","clientY","pageX","pageY","shiftKey","button","buttons","relatedTarget","fromElement","srcElement","toElement","fd","pointerId","width","height","pressure","tiltX","tiltY","pointerType","isPrimary","gd","mouseEnter","mouseLeave","pointerEnter","pointerLeave","hd","defaultView","parentWindow","nd","animationName","elapsedTime","pseudoElement","od","clipboardData","pd","rd","Esc","Spacebar","Left","Up","Right","Down","Del","Win","Menu","Apps","Scroll","MozPrintableKey","sd","8","9","12","13","16","17","18","19","20","27","32","33","34","35","36","37","38","39","40","45","46","112","113","114","115","116","117","118","119","120","121","122","123","144","145","224","td","repeat","locale","ud","dataTransfer","vd","touches","targetTouches","changedTouches","wd","xd","deltaX","wheelDeltaX","deltaY","wheelDeltaY","wheelDelta","deltaZ","deltaMode","yd","Cd","isInteractiveTopLevelEventType","Md","_enabled","setEnabled","isEnabled","trapBubbledEvent","trapCapturedEvent","dispatchEvent","Ud","ae","onSelect","SimpleEventPlugin","EnterLeaveEventPlugin","ChangeEventPlugin","SelectEventPlugin","BeforeInputEventPlugin","be","performance","ce","de","ee","fe","ge","he","ie","je","ke","le","me","ne","didTimeout","oe","pe","timeoutTime","scheduledCallback","callbackId","requestAnimationFrame","qe","postMessage","re","se","Infinity","mathml","svg","Ee","MSApp","execUnsafeLocalFunction","animationIterationCount","borderImageOutset","borderImageSlice","borderImageWidth","boxFlex","boxFlexGroup","boxOrdinalGroup","columnCount","columns","flex","flexGrow","flexPositive","flexShrink","flexNegative","flexOrder","gridRow","gridRowEnd","gridRowSpan","gridRowStart","gridColumn","gridColumnEnd","gridColumnSpan","gridColumnStart","fontWeight","lineClamp","lineHeight","opacity","order","orphans","tabSize","widows","zIndex","zoom","fillOpacity","floodOpacity","stopOpacity","strokeDasharray","strokeDashoffset","strokeMiterlimit","strokeOpacity","strokeWidth","Ie","substring","menuitem","area","base","br","col","embed","hr","img","keygen","link","meta","param","track","wbr","We","setInitialProperties","diffProperties","updateProperties","diffHydratedProperties","diffHydratedText","warnForUnmatchedText","warnForDeletedHydratableElement","warnForDeletedHydratableText","warnForInsertedHydratedElement","warnForInsertedHydratedText","querySelectorAll","gi","updateContainerAtExpirationTime","createContainer","updateContainer","flushRoot","requestWork","computeUniqueAsyncExpiration","batchedUpdates","unbatchedUpdates","deferredUpdates","syncUpdates","interactiveUpdates","flushInteractiveUpdates","flushControlled","flushSync","getPublicRootInstance","findHostInstance","findHostInstanceWithNoPortals","injectIntoDevTools","commit","unmount","createBatch","qi","createPortal","findDOMNode","unstable_renderSubtreeIntoContainer","unmountComponentAtNode","unstable_createPortal","unstable_batchedUpdates","unstable_deferredUpdates","unstable_flushControlled","EventPluginHub","EventPluginRegistry","EventPropagators","ReactControlledComponent","ReactDOMComponentTree","ReactDOMEventListener","unstable_createRoot","bundleType","rendererPackageName","vi","wi","ExecutionEnvironment","canUseWorkers","Worker","canUseEventListeners","canUseViewport","screen","isInWorker","getActiveElement","doc","shallowEqual","objA","objB","keysA","keysB","containsNode","outerNode","innerNode","isTextNode","compareDocumentPosition","isNode","Node","_classCallCheck","instance","Constructor","_possibleConstructorReturn","_inherits","subClass","superClass","writable","__WEBPACK_IMPORTED_MODULE_1__App_css__","__WEBPACK_IMPORTED_MODULE_2__Main__","_createClass","defineProperties","descriptor","protoProps","staticProps","App","_Component","getPrototypeOf","className","_toConsumableArray","arr2","__WEBPACK_IMPORTED_MODULE_1__Sidebar__","__WEBPACK_IMPORTED_MODULE_2__NoteList__","__WEBPACK_IMPORTED_MODULE_3__NoteForm__","__WEBPACK_IMPORTED_MODULE_4__rebase__","counter","Main","_React$Component","saveNote","note","tempArr","findIndex","currentNote","setCurrentNote","blankNote","resetNote","deleteNote","splice","syncState","asArray","__WEBPACK_IMPORTED_MODULE_1__quill_svg__","__WEBPACK_IMPORTED_MODULE_1__quill_svg___default","__WEBPACK_IMPORTED_MODULE_2__new_png__","__WEBPACK_IMPORTED_MODULE_2__new_png___default","__WEBPACK_IMPORTED_MODULE_3__new_hover_png__","__WEBPACK_IMPORTED_MODULE_3__new_hover_png___default","Sidebar","_ref","src","alt","ev","href","NoteList","NoteForm","handleChanges","temp","placeholder","onChange","__WEBPACK_IMPORTED_MODULE_0_re_base__","__WEBPACK_IMPORTED_MODULE_0_re_base___default","__WEBPACK_IMPORTED_MODULE_1_firebase_app__","__WEBPACK_IMPORTED_MODULE_1_firebase_app___default","__WEBPACK_IMPORTED_MODULE_2_firebase_database__","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","database","createClass","root","factory","__WEBPACK_EXTERNAL_MODULE_6__","loaded","_interopRequireDefault","_validators","_push2","_push3","_fetch2","_fetch3","_post2","_post3","_sync2","_sync3","_bind2","_bind3","_update2","_update3","_reset2","_reset3","_removeBinding2","_removeBinding3","_remove2","_remove3","_fsSync2","_fsSync3","_fsRemoveBinding2","_fsRemoveBinding3","_fsBind2","_fsBind3","_fsGet2","_fsGet3","_fsRemoveDoc2","_fsRemoveDoc3","_fsAddToCollection2","_fsAddToCollection3","_fsRemoveFromCollection2","_fsRemoveFromCollection3","_fsUpdateDoc2","_fsUpdateDoc3","_fsReset2","_fsReset3","syncs","WeakMap","rebase","initializedApp","listenTo","endpoint","bindToState","post","removeBinding","remove","bindDoc","path","bindCollection","syncDoc","listenToDoc","listenToCollection","addToCollection","updateDoc","removeDoc","removeFromCollection","_validateDatabase","_defineProperty","_fsCreateRef","_fsSetUnmountHandler","_setData","_handleError","_createNestedObject","_setUnmountHandler","_addFirestoreListener","_addListener","_fsUpdateSyncState","_updateSyncState","_firebaseRefsMixin","_addSync","_hasOwnNestedProperty","_getSegmentCount","_getNestedObject","_isNestedPath","_isObject","_isValid","_toArray","_fsPrepareData","_prepareData","_throwError","_setState","_returnRef","_addFirestoreQuery","_addQueries","_createHash","_typeof","snapshot","childSnapshot","lastKey","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","sync","existingSyncs","msg","newState","queries","needArgs","limitToFirst","limitToLast","orderByChild","startAt","endAt","equalTo","query","invoker","hash","onFailure","removeListeners","handleError","keepKeys","reduce","acc","curr","item","boundOnFailure","prevState","reactSetState","called","onSnapshot","_newState2","_newState3","currentState","_newState4","_newState5","isCollection","exists","withRefs","withIds","collection","empty","pathOrRef","segmentCount","_removeBinding","_ref2","currentSyncs","idx","_fsRemoveBinding","unsubscribe","_validateCollectionPath","_validateDocumentPath","_validateEndpoint","optionValidators","_utils","_app","_app2","notObject","makeError","validQueries","actual","firestore","_firebase$firestore","DocumentReference","CollectionReference","errorMsg","defaultError","_push","_fetch","_post","_sync","updateFirebase","stateKey","syncsToCall","syncedKeys","nested","syncedKey","datum","find","_bind","_update","_reset","_fsSync","_fsBind","_fsGet","_fsRemoveDoc","_fsAddToCollection","_fsRemoveFromCollection","batch","_fsUpdateDoc","_fsReset","setImmediate","_state","_handled","_value","_deferreds","_immediateFn","_unhandledRejectionFn","createCommonjsModule","__WEBPACK_IMPORTED_MODULE_0_whatwg_fetch__","setTimeoutFunc","prom","globalNS","_global","__g","_core","core","__e","it","_anObject","_fails","exec","_descriptors","_domCreate","_ie8DomDefine","_toPrimitive","valueOf","dP","Attributes","_objectDp","_propertyDesc","bitmap","_hide","_has","px","_uid","_redefine","SRC","$toString","TPL","inspectSource","safe","isFunction","_aFunction","_ctx","that","$export","own","exp","IS_FORCED","IS_GLOBAL","IS_STATIC","IS_PROTO","IS_BIND","expProto","_export","_cof","_iobject","_defined","_toObject","ceil","_toInteger","_toLength","_isArray","store","_shared","_wks","USE_SYMBOL","SPECIES","_arraySpeciesConstructor","original","_arraySpeciesCreate","_arrayMethods","TYPE","$create","IS_MAP","IS_FILTER","IS_SOME","IS_EVERY","IS_FIND_INDEX","NO_HOLES","$this","callbackfn","UNSCOPABLES","ArrayProto","_addToUnscopables","$find","forced","$find$1","forced$1","MATCH","_isRegexp","isRegExp","_stringContext","searchString","NAME","MATCH$1","$startsWith","KEY","startsWith","Timeout","clearFn","_id","_clearFn","unref","enroll","msecs","_idleTimeoutId","_idleTimeout","unenroll","_unrefActive","active","_onTimeout","clearImmediate","tasksByHandle","nextHandle","registerImmediate","runIfPresent","currentlyRunningATask","attachTo","importScripts","postMessageIsAsynchronous","oldOnMessage","onmessage","messagePrefix","onGlobalMessage","event","MessageChannel","channel","port1","port2","script","onreadystatechange","decodePath","pathString","pathStringDecoded","pieces","piece","decodeQuery","queryString","results","_a","segment","kv","NAME_ONLY_COMPARATOR","right","nameCompare","NAME_COMPARATOR","nodeFromJSON$1","priority","ChildrenNode","EMPTY_NODE","util","LeafNode","USE_HINZE","node_1","jsonObj_1","childData","childNode","isLeafNode","updateImmediateChild","updatePriority","children_1","childrenHavePriority_1","hinzeJsonObj_1","getPriority","NamedNode","childSet","buildChildSet","namedNode","sortedChildSet","PRIORITY_INDEX","getCompare","IndexMap",".priority","Default","registerDatabase","unused","RepoManager","getInstance","databaseFromApp","Reference","Query","Database","enableLogging","ServerValue","TEST_ACCESS","__EMPTY_NODE","MAX_NODE","__childrenNodeConstructor","nodeFromJSON","MAX_NODE$1","_defaultIndexMap","logger","DOMStorageWrapper","domStorage_","prefix_","removeItem","prefixedName_","setItem","storedVal","getItem","MemoryStorage","cache_","isInMemoryStorage","createStoragefor","domStorageName","domStorage","PersistentStorage","SessionStorage","logClient","Logger","LUIDGenerator","sha1","sha1Bytes","buildLogMessage_","var_args","logger$1","firstLog_","logger_","persistent","logLevel","LogLevel","VERBOSE","logWrapper","prefix","fatal","warnIfPageIsSecure","protocol","isInvalidJSONNumber","Number","POSITIVE_INFINITY","NEGATIVE_INFINITY","executeWhenDOMReady","readyState","called_1","wrappedFn_1","MIN_NAME","MAX_NAME","aAsInt","tryParseInt","bAsInt","stringCompare","requireKey","ObjectToUniqueKey","sort","splitStringBySize","segsize","dataSegs","each","doubleToIEEE754String","ln","bits","abs","pow","LN2","round","reverse","hexByteString","hexByte","parseInt","substr","isChromeExtensionContentScript","isWindowsStoreApp","Windows","UI","errorForServerCode","INTEGER_REGEXP_","RegExp","intVal","exceptionGuard","beingCrawled","setTimeoutNonBlocking","Path","pathOrString","pieceNum","pieces_","copyTo","pieceNum_","getFront","getLength","popFront","getBack","toUrlEncodedString","begin","parent","childPathObj","childPieces","relativePath","outerPath","innerPath","outer","inner","comparePaths","leftKeys","rightKeys","cmp","equals","other","ValidationPath","errorPrefix_","parts_","byteLength_","max","checkValid_","last","MAX_PATH_LENGTH_BYTES","MAX_PATH_DEPTH","toErrorString","LONG_POLLING","RepoInfo","host","secure","webSocketOnly","persistenceKey","domain","internalHost","needsQueryParam","isCustomHost","isCacheableHost","isDemoHost","updateHost","newHost","connectionURL","connURL","pairs","toURLString","parseRepoInfo","dataURL","parsedUrl","parseURL","subdomain","scheme","repoInfo","port","colonInd","slashInd","questionMarkInd","queryParams","INVALID_KEY_REGEX_","INVALID_PATH_REGEX_","isValidKey","isValidPathString","isValidRootPathString","isValidPriority","validateFirebaseDataArg","validateFirebaseData","path_","hasDotValue_1","hasActualChild_1","validateFirebaseMergePaths","mergePaths","curPath","prevPath","validateFirebaseMergeDataArg","validatePriority","validateEventType","eventType","validateKey","validatePathString","validateRootPathString","validateWritablePath","validateUrl","validateBoolean","bool","OnDisconnect","repo_","cancel","onComplete","onDisconnectCancel","onDisconnectSet","setWithPriority","onDisconnectSetWithPriority","objectToMerge","newObjectToMerge","onDisconnectUpdate","TransactionResult","committed","toJSON","nextPushId","PUSH_CHARS","lastPushTime","lastRandChars","duplicateTime","timeStampChars","Wrap","Index","compare","indexedValueChanged","oldNode","newNode","oldWrapped","newWrapped","minPost","MIN","KeyIndex","isDefinedOn","maxPost","makePost","indexValue","KEY_INDEX","priorityHashText","validatePriorityNode","priorityNode","value_","priorityNode_","lazyHash_","newPriorityNode","getImmediateChild","childName","getChild","hasChild","getPredecessorChildName","newChildNode","updateChild","front","numChildren","forEachChild","action","exportFormat",".value","toHash","compareTo","compareToLeafNode_","otherLeaf","otherLeafType","thisLeafType","otherIndex","VALUE_TYPE_ORDER","thisIndex","withIndex","isIndexed","PriorityIndex","aPriority","bPriority","indexCmp","SortedMapIterator","startKey","comparator","isReverse_","resultGenerator_","nodeStack_","getNext","hasNext","peek","LLRBNode","RED","SortedMap","copy","inorderTraversal","reverseTraversal","min_","minKey","maxKey","insert","fixUp_","removeMin_","isRed_","moveRedLeft_","smallest","rotateRight_","moveRedRight_","rotateLeft_","colorFlip_","nl","nr","checkMaxDepth_","blackDepth","check_","BLACK","LLRBEmptyNode","comparator_","root_","getPredecessorKey","rightParent","getIterator","resultGenerator","getIteratorFrom","getReverseIteratorFrom","getReverseIterator","LOG_2","Base12Num","num","current_","mask","bits_","nextBitIsOne","childList","keyFn","mapSortFn","buildBalancedTree","low","middle","base12","buildPennant","chunkSize","childTree","attachPennant","pennant","isOne","fallbackObject","indexes_","indexSet_","indexKey","sortedMap","hasIndex","indexDefinition","addIndex","existingChildren","sawIndexedValue","iter","newIndex","indexName","newIndexSet","newIndexes","addToIndexes","indexedChildren","existingSnap","newChildren","removeFromIndexes","children_","indexMap_","newIndexMap","newPriority","newImmediateChild","numKeys","allIntegerKeys","toHash_1","childHash","resolveIndex_","predecessor","getFirstChildName","getFirstChild","getLastChildName","getLastChild","wrappedNode","startPost","endPost","MAX_NODE$2","otherChildrenNode","thisIter","otherIter","thisCurrent","otherCurrent","MaxNode","MAX","__referenceConstructor","OperationType","ValueIndex","valueNode","VALUE_INDEX","PathIndex","indexPath_","extractChild","snap","aChild","bChild","DataSnapshot","node_","ref_","index_","exportVal","childPathString","childPath","childRef","hasChildren","getKey","getRef","DataEvent","eventRegistration","prevName","getPath","getParent","getEventType","getEventRunner","CancelEvent","ValueEventRegistration","callback_","cancelCallback_","context_","respondsTo","createEvent","getQueryParams","getIndex","snapshotNode","eventData","ctx","cancelCB_1","cb_1","createCancelEvent","matches","hasAnyCallback","ChildEventRegistration","callbacks_","eventToCheck","cancelCB_2","cb_2","otherCount","otherKey","thisKey","repo","queryParams_","orderByCalled_","validateQueryEndpoints_","startNode","endNode","hasStart","getIndexStartValue","hasEnd","getIndexEndValue","tooManyArgsError","wrongArgTypeError","getIndexStartName","getIndexEndName","validateLimit_","hasLimit","hasAnchoredLimit","validateNoPreviousOrderByCall_","cancelCallbackOrContext","getCancelAndContextArgs_","onValueEvent","callbacks","onChildEvent","cancelCallback","container","addEventCallbackForQuery","removeEventCallbackForQuery","userCallback","cancelOrContext","firstCall","onceCallback","limit","parsedPath","newParams","orderBy","orderByKey","orderByPriority","orderByValue","queryObject","getQueryObject","queryIdentifier","isEqual","sameRepo","samePath","sameQueryIdentifier","CountedSet","clear","SparseSnapshotTree","childKey","remember","forget","self_1","tree","forEachTree","prefixPath","generateWithValues","resolveDeferredValue","serverValues","resolveDeferredValueTree","resolvedTree","resolveDeferredValueSnapshot","rawPri","leafNode","childrenNode","emptyChildrenSingleton","__referenceConstructor$1","OperationSource","fromUser","fromServer","queryId","tagged","User","Server","forServerTaggedQuery","AckUserWrite","affectedTree","revert","ACK_USER_WRITE","operationForChild","subtree","Empty","EmptyChildren","ImmutableTree","fromObject","childSnap","findRootMostMatchingPathAndValue","predicate","childExistingPathAndValue","findRootMostValueAndPath","toSet","newChild","setTree","newTree","fold","fold_","pathSoFar","accum","findOnPath","findOnPath_","pathToFollow","nextChild","foreachOnPath","foreachOnPath_","currentRelativePath","foreach","foreach_","foreachChild","ListenComplete","LISTEN_COMPLETE","Overwrite","OVERWRITE","Merge","MERGE","CacheNode","fullyInitialized_","filtered_","isFullyInitialized","isFiltered","isCompleteForPath","isCompleteForChild","getNode","ViewCache","eventCache_","serverCache_","updateEventSnap","eventSnap","filtered","updateServerSnap","serverSnap","getEventCache","getCompleteEventSnap","getServerCache","getCompleteServerSnap","Change","oldSnap","valueChange","VALUE","childAddedChange","CHILD_ADDED","childRemovedChange","CHILD_REMOVED","childChangedChange","newSnapshot","oldSnapshot","CHILD_CHANGED","childMovedChange","CHILD_MOVED","IndexedFilter","affectedPath","optChangeAccumulator","oldChild","trackChildChange","updateFullNode","newSnap","filtersNodes","getIndexedFilter","ChildChangeAccumulator","changeMap_","oldChange","oldType","getChanges","NoCompleteChildSource_","getCompleteChild","getChildAfterChild","NO_COMPLETE_CHILD_SOURCE","WriteTreeCompleteChildSource","writes_","viewCache_","optCompleteServerCache_","serverNode","calcCompleteChild","completeServerData","nodes","calcIndexedSlice","ProcessorResult","viewCache","changes","ViewProcessor","filter_","assertIndexed","applyOperation","oldViewCache","operation","writesCache","completeCache","newViewCache","filterServerNode","accumulator","overwrite","applyUserOverwrite_","applyServerOverwrite_","merge","applyUserMerge_","applyServerMerge_","ackUserWrite","revertUserWrite_","ackUserWrite_","listenComplete_","maybeAddValueEvent_","isLeafOrEmpty","oldCompleteSnap","generateEventCacheAfterServerEvent_","changePath","oldEventSnap","shadowingWrite","newEventCache","serverCache","completeChildren","completeEventChildren","calcCompleteEventChildren","completeNode","calcCompleteEventCache","oldEventNode","updatedPriority","calcEventCacheAfterServerOverwrite","childChangePath","newEventChild","eventChildUpdate","changedSnap","newServerCache","oldServerSnap","serverFilter","newServerNode","newEventSnap","cacheHasChild_","changedChildren","curViewCache","writePath","applyMerge_","viewMergeTree","serverChild","childMergeTree","isUnknownDeepMerge","ackPath","changedChildren_1","changedChildren_2","mergePath","serverCachePath","oldServerNode","completeServerCache","oldEventCache","serverChildren","EventGenerator","query_","generateEventsForChanges","eventCache","eventRegistrations","events","moves","generateEventsForType_","registrations","filteredChanges","compareChanges_","materializedChange","materializeSingleChange_","registration","aWrapped","bWrapped","View","initialViewCache","eventRegistrations_","indexFilter","getNodeFilter","processor_","initialServerCache","initialEventCache","eventGenerator_","getQuery","getCompleteServerCache","cache","loadsAllData","addEventRegistration","removeEventRegistration","cancelError","cancelEvents","path_1","maybeEvent","existing","generateEventsForChanges_","getInitialEvents","initialChanges","SyncPoint","views_","optCompleteServerCache","events_1","serverCacheComplete","eventCacheComplete","removed","hadCompleteView","hasCompleteView","viewQueryId","getQueryViews","viewForQuery","getCompleteView","viewExistsForQuery","CompoundWrite","writeTree_","addWrite","rootmost","rootMostPath","addWrites","updates","newWrite","removeWrite","hasCompleteWrite","getCompleteNode","getCompleteChildren","childCompoundWrite","shadowingNode","applySubtreeWrite_","writeTree","priorityWrite_1","WriteTree","visibleWrites_","allWrites_","lastWriteId_","childWrites","WriteTreeRef","addOverwrite","writeId","visible","addMerge","getWrite","record","writeToRemove","removedWriteWasVisible","removedWriteOverlapsWithOtherWrites","currentWrite","recordContainsPath_","resetTree_","getCompleteWriteData","treePath","writeIdsToExclude","includeHiddenWrites","write","mergeAtPath","layerTree_","layeredCache","subMerge","completeServerChildren","topLevelSet","merge_1","existingEventSnap","existingServerSnap","childMerge","toIterate","writeRecord","DefaultFilter_","writes","treeRoot","compoundWrite","deepNode","treePath_","existingServerCache","SyncTree","listenProvider_","syncPointTree_","pendingWriteTree_","tagToQueryMap_","queryToTagMap_","applyUserOverwrite","newData","applyOperationToSyncPoints_","applyUserMerge","changeTree","affectedTree_1","applyServerOverwrite","applyServerMerge","applyListenComplete","applyTaggedQueryOverwrite","queryKey","queryKeyForTag_","parseQueryKey_","queryPath","applyTaggedOperation_","applyTaggedQueryMerge","applyTaggedListenComplete","foundAncestorDefaultView","pathToSyncPoint","sp","syncPoint","childSyncPoint","viewAlreadyExists","makeQueryKey_","getNextQueryTag_","setupListener_","maybeSyncPoint","removedAndEvents","removingDefault","covered","parentSyncPoint","newViews","collectDistinctViewsForSubTree_","newQuery","createListenerForView_","startListening","queryForListening_","tagForQuery_","hashFn","stopListening","queryToRemove","tagToRemove","removeTags_","maybeChildSyncPoint","childMap","views_1","childViews","removedQuery","removedQueryKey","removedQueryTag","isDefault","queriesToStop","queries_1","childQueries","queryToStop","error$$1","splitIndex","nextQueryTag_","applyOperationHelper_","syncPointTree","applyOperationDescendantsHelper_","childOperation","childServerCache","childWritesCache","SnapshotHolder","rootNode_","updateSnapshot","newSnapshotNode","AuthTokenProvider","app_","forceRefresh","addTokenChangeListener","removeTokenChangeListener","notifyForInvalidToken","errorMessage","StatsCollection","counters_","incrementCounter","amount","StatsManager","getCollection","hashString","collections_","getOrCreateReporter","creatorFunction","reporters_","StatsListener","collection_","last_","newStats","delta","stat","FIRST_STATS_MIN_TIME","FIRST_STATS_MAX_TIME","StatsReporter","server_","statsToReport_","statsListener_","reportStats_","includeStat","stats","reportedStats","haveStatsToReport","reportStats","EventQueue","eventLists_","recursionDepth_","queueEvents","eventDataList","currList","eventPath","EventList","raiseEventsAtPath","raiseQueuedEventsMatchingPredicate_","raiseEventsForChangedPath","changedPath","sentAll","eventList","raise","events_","eventFn","EventEmitter","allowedEvents_","listeners_","trigger","validateEventType_","getInitialEvent","et","VisibilityMonitor","visibilityChange","visible_","OnlineMonitor","online_","currentlyOnline","PacketReceiver","onMessage_","pendingResponses","currentResponseNum","closeAfterResponse","onClose","closeAfter","responseNum","handleResponse","requestNum","this_1","toProcess","FIREBASE_LONGPOLL_COMMAND_CB_NAME","FIREBASE_LONGPOLL_DATA_CB_NAME","BrowserPollConnection","connId","transportSessionId","lastSessionId","bytesSent","bytesReceived","everConnected_","log_","stats_","urlFn","onMessage","onDisconnect","curSegmentNum","onDisconnect_","myPacketOrderer","isClosed_","connectTimeoutTimer_","onClosed_","scriptTagHolder","FirebaseIFrameScriptHolder","command","arg1","arg2","incrementIncomingBytes_","sendNewPolls","pN","urlParams","uniqueCallbackIdentifier","connectURL","addTag","startLongPoll","addDisconnectPingFrame","forceAllow","forceAllow_","forceDisallow","forceDisallow_","isAvailable","markConnectionHealthy","shutdown_","myDisconnFrame","dataStr","base64data","MAX_URL_DATA_SIZE","enqueueSegment","pw","display","commandCB","onMessageCB","outstandingRequests","pendingSegs","currentSerial","myIFrame","createIFrame_","iframeContents","iframe","contentWindow","contentDocument","alive","myID","myPW","theURL","nodeRestRequest","newRequest_","curDataString","theSeg","seg","ts","addLongPollTag_","segnum","totalsegs","serial","doNewRequest","keepaliveTimeout","readyStateCB","loadCB","doNodeLongPoll","newScript_1","rstate","WebSocketImpl","MozWebSocket","WebSocket","WebSocketConnection","keepaliveTimer","frames","totalFrames","connectionURL_","device","User-Agent","platform","NODE_ENV","PUBLIC_URL","origin","mySock","onopen","onclose","handleIncomingFrame","isOldAndroid","userAgent","oldAndroidRegex","oldAndroidMatch","parseFloat","previouslyFailed","appendFrame_","fullMess","jsonMess","handleNewFrameCount_","frameCount","extractFrameCount_","mess","resetKeepAlive","remainingData","sendString_","responsesRequiredToBeHealthy","healthyTimeout","TransportManager","initTransports_","isWebSocketsAvailable","isSkipPollConnection","transports_","transports_1","ALL_TRANSPORTS","transport","initialTransport","upgradeTransport","Connection","repoInfo_","onReady_","onKill_","connectionCount","pendingDataMessages","state_","transportManager_","start_","conn","conn_","nextTransportId_","primaryResponsesRequired_","onMessageReceived","connReceiver_","onConnectionLost","disconnReceiver_","tx_","rx_","secondaryConn_","isHealthy_","healthyTimeout_ms","healthyTimeout_","everConnected","onConnectionLost_","onSecondaryConnectionLost_","onPrimaryMessageReceived_","onSecondaryMessageReceived_","sendRequest","dataMsg","sendData_","tryCleanupConnection","onSecondaryControl_","controlData","cmd","upgradeIfSecondaryHealthy_","secondaryResponsesRequired_","parsedData","layer","proceedWithUpgrade_","onControl_","onDataMessage_","onPrimaryResponse_","onHandshake_","onConnectionShutdown_","onReset_","sendPingOnPrimaryIfNecessary_","handshake","timestamp","sessionId","onConnectionEstablished_","tryStartUpgrade_","startUpgrade_","closeConnections_","ServerActions","put","refreshAuthToken","onDisconnectPut","onDisconnectMerge","RECONNECT_MIN_DELAY","RECONNECT_MAX_DELAY_DEFAULT","PersistentConnection","onDataUpdate_","onConnectStatus_","onServerInfoUpdate_","authTokenProvider_","authOverride_","nextPersistentConnectionId_","interruptReasons_","listens_","outstandingPuts_","outstandingPutCount_","onDisconnectRequestQueue_","connected_","reconnectDelay_","maxReconnectDelay_","securityDebugCallback_","establishConnectionTimer_","requestCBHash_","requestNumber_","realtime_","authToken_","forceTokenRefresh_","invalidAuthTokenCount_","firstConnection_","lastConnectionAttemptTime_","lastConnectionEstablishedTime_","scheduleConnect_","onVisible_","onOnline_","onResponse","curReqNum","listen","currentHashFn","listenSpec","sendListen_","req","warnOnListenWarnings_","removeListen_","warnings","indexSpec","indexPath","tryAuth","reduceReconnectDelayIfAdminCredential_","credential","token_1","authMethod","requestData","cred","onAuthRevoked_","unlisten","sendUnlisten_","queryObj","sendOnDisconnect_","putInternal","sendPut_","queued","errorReason","reqNum","onDataPush_","onListenRevoked_","onSecurityDebugPacket_","handleTimestamp_","sendConnectStats_","restoreState_","establishConnection_","online","onRealtimeDisconnect_","cancelSentTransactions_","shouldReconnect_","timeSinceLastConnectSucceeded","timeSinceLastConnectAttempt","reconnectDelay","onDataMessage_1","onReady_1","onDisconnect_1","connId_1","nextConnectionId_","lastSessionId_1","canceled_1","connection_1","closeFn_1","sendRequestFn","accessToken","interrupt","serverTimeOffset","normalizedPathString","statusCode","explanation","clientName","ReadonlyRestClient","getListenId_","listenId","thisListen","queryStringParamaters","toRestQueryStringParameters","restRequest_","status_1","queryStringParameters","authTokenData","authToken","Repo","forceRestClient","dataUpdateCount","eventQueue_","nextWriteId_","interceptServerDataCallback_","persistentConnection_","authTokenProvider","authOverride","statsReporter_","transactions_init_","infoData_","infoSyncTree_","infoEvents","updateInfo_","serverSyncTree_","serverTime","offsetNode","generateServerValues","isMerge","taggedChildren","taggedSnap","rerunTransactions_","interceptServerData_","connectStatus","runOnDisconnectEvents_","getNextWriteId_","newVal","newNodeUnresolved","success","clearEvents","callOnCompleteCallback","abortTransactions_","childrenToMerge","changedKey","changedValue","writeId_1","resolvedOnDisconnectTree","showDelta","longestName","previousValue","currentValue","statsIncrementCounter","metric","__database","RangedFilter","indexedFilter_","startPost_","getStartPost_","endPost_","getEndPost_","getStartPost","getEndPost","startName","endName","LimitedFilter","rangedFilter_","limit_","getLimit","reverse_","isViewFromLeft","fullLimitUpdateChild_","inRange","indexCompare_1","foundStartPost","changeAccumulator","indexCmp_1","newChildNamedNode","windowBoundary","oldChildSnap","compareNext","QueryParams","limitSet_","startSet_","startNameSet_","endSet_","endNameSet_","viewFrom_","indexStartValue_","indexStartName_","indexEndValue_","indexEndName_","WIRE_PROTOCOL_CONSTANTS_","VIEW_FROM_LEFT","copy_","newLimit","VIEW_FROM_RIGHT","WIRE_PROTOCOL_CONSTANTS","INDEX_START_VALUE","INDEX_START_NAME","INDEX_END_VALUE","INDEX_END_NAME","LIMIT","viewFrom","VIEW_FROM","INDEX","REST_CONSTANTS","REST_QUERY_CONSTANTS_","qs","ORDER_BY","START_AT","END_AT","LIMIT_TO_FIRST","LIMIT_TO_LAST","DEFAULT","parentPath","getRoot","databaseProp","transaction","transactionUpdate","applyLocally","promiseComplete","startTransaction","setPriority","thennablePushRef","pushRef","TransactionStatus","TreeNode","childCount","Tree","parent_","subTree","pathObj","updateParents_","forEachDescendant","includeSelf","childrenFirst","forEachAncestor","forEachImmediateDescendantWithValue","updateChild_","childEmpty","childExists","MAX_TRANSACTION_RETRIES_","transactionQueueTree_","valueCallback","watchRef","unwatcher","retryCount","abortReason","currentWriteId","currentInputSnapshot","currentOutputSnapshotRaw","currentOutputSnapshotResolved","getLatestState_","RUN","queueNode","nodeQueue","priorityForNode","sendReadyTransactions_","excludeSets","pruneCompletedTransactionsBelowNode_","buildTransactionQueue_","sendTransactionQueue_","setsToIgnore","txn","latestState","snapToSend","latestHash","SENT","dataToSend","pathToSend","COMPLETED","SENT_NEEDS_ABORT","NEEDS_ABORT","rootMostTransactionNode","getAncestorTransactionNode_","rerunTransactionQueue_","txnsToRerun","abortTransaction","currentNode","newDataNode","hasExplicitPriority","oldWriteId","newNodeResolved","lastInput","transactionNode","transactionQueue","aggregateTransactionQueuesForNode_","abortTransactionsOnNode_","lastSent","_staticInstance","repos_","useRestClient_","appName","dbUrl","createRepo","deleteRepo","appRepos","DatabaseInternals","checkDeleted_","refFromURL","apiName","parsedURL","goOffline","goOnline","TIMESTAMP",".sv","forceLongPolling","forceWebSockets","setSecurityDebugCallback","interceptServerData","freeze","DataConnection","simpleListen","echo","onEcho","RealTimeConnection","hijackHash","newHash","oldPut","opt_onComplete","opt_hash","ConnectionTarget","listens","firebaseRef","setLogLevel","level","instances","inst","defaultLogLevel","INFO","defaultLogHandler","logType","toISOString","DEBUG","info","WARN","ERROR","_logLevel","_logHandler","debug","register","URL","swUrl","isLocalhost","checkValidServiceWorker","serviceWorker","ready","registerValidSW","onupdatefound","installingWorker","installing","onstatechange","controller","unregister","reload","Boolean","hostname"],"mappings":"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","file":"static/js/main.f6d9a343.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"/noteHerder/\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 12);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nif (true) {\n  module.exports = __webpack_require__(19);\n} else {\n  module.exports = require('./cjs/react.development.js');\n}\n\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports) {\n\nvar g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || Function(\"return this\")() || (1,eval)(\"this\");\n} catch(e) {\n\t// This works if the window reference is available\n\tif(typeof window === \"object\")\n\t\tg = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/*\nobject-assign\n(c) Sindre Sorhus\n@license MIT\n*/\n\n\n/* eslint-disable no-unused-vars */\nvar getOwnPropertySymbols = Object.getOwnPropertySymbols;\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\nfunction toObject(val) {\n\tif (val === null || val === undefined) {\n\t\tthrow new TypeError('Object.assign cannot be called with null or undefined');\n\t}\n\n\treturn Object(val);\n}\n\nfunction shouldUseNative() {\n\ttry {\n\t\tif (!Object.assign) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Detect buggy property enumeration order in older V8 versions.\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=4118\n\t\tvar test1 = new String('abc');  // eslint-disable-line no-new-wrappers\n\t\ttest1[5] = 'de';\n\t\tif (Object.getOwnPropertyNames(test1)[0] === '5') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test2 = {};\n\t\tfor (var i = 0; i < 10; i++) {\n\t\t\ttest2['_' + String.fromCharCode(i)] = i;\n\t\t}\n\t\tvar order2 = Object.getOwnPropertyNames(test2).map(function (n) {\n\t\t\treturn test2[n];\n\t\t});\n\t\tif (order2.join('') !== '0123456789') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test3 = {};\n\t\t'abcdefghijklmnopqrst'.split('').forEach(function (letter) {\n\t\t\ttest3[letter] = letter;\n\t\t});\n\t\tif (Object.keys(Object.assign({}, test3)).join('') !==\n\t\t\t\t'abcdefghijklmnopqrst') {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t} catch (err) {\n\t\t// We don't expect any of the above to throw, but better to be safe.\n\t\treturn false;\n\t}\n}\n\nmodule.exports = shouldUseNative() ? Object.assign : function (target, source) {\n\tvar from;\n\tvar to = toObject(target);\n\tvar symbols;\n\n\tfor (var s = 1; s < arguments.length; s++) {\n\t\tfrom = Object(arguments[s]);\n\n\t\tfor (var key in from) {\n\t\t\tif (hasOwnProperty.call(from, key)) {\n\t\t\t\tto[key] = from[key];\n\t\t\t}\n\t\t}\n\n\t\tif (getOwnPropertySymbols) {\n\t\t\tsymbols = getOwnPropertySymbols(from);\n\t\t\tfor (var i = 0; i < symbols.length; i++) {\n\t\t\t\tif (propIsEnumerable.call(from, symbols[i])) {\n\t\t\t\t\tto[symbols[i]] = from[symbols[i]];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn to;\n};\n\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar asap = __webpack_require__(15);\n\nfunction noop() {}\n\n// States:\n//\n// 0 - pending\n// 1 - fulfilled with _value\n// 2 - rejected with _value\n// 3 - adopted the state of another promise, _value\n//\n// once the state is no longer pending (0) it is immutable\n\n// All `_` prefixed properties will be reduced to `_{random number}`\n// at build time to obfuscate them and discourage their use.\n// We don't use symbols or Object.defineProperty to fully hide them\n// because the performance isn't good enough.\n\n\n// to avoid using try/catch inside critical functions, we\n// extract them to here.\nvar LAST_ERROR = null;\nvar IS_ERROR = {};\nfunction getThen(obj) {\n  try {\n    return obj.then;\n  } catch (ex) {\n    LAST_ERROR = ex;\n    return IS_ERROR;\n  }\n}\n\nfunction tryCallOne(fn, a) {\n  try {\n    return fn(a);\n  } catch (ex) {\n    LAST_ERROR = ex;\n    return IS_ERROR;\n  }\n}\nfunction tryCallTwo(fn, a, b) {\n  try {\n    fn(a, b);\n  } catch (ex) {\n    LAST_ERROR = ex;\n    return IS_ERROR;\n  }\n}\n\nmodule.exports = Promise;\n\nfunction Promise(fn) {\n  if (typeof this !== 'object') {\n    throw new TypeError('Promises must be constructed via new');\n  }\n  if (typeof fn !== 'function') {\n    throw new TypeError('Promise constructor\\'s argument is not a function');\n  }\n  this._75 = 0;\n  this._83 = 0;\n  this._18 = null;\n  this._38 = null;\n  if (fn === noop) return;\n  doResolve(fn, this);\n}\nPromise._47 = null;\nPromise._71 = null;\nPromise._44 = noop;\n\nPromise.prototype.then = function(onFulfilled, onRejected) {\n  if (this.constructor !== Promise) {\n    return safeThen(this, onFulfilled, onRejected);\n  }\n  var res = new Promise(noop);\n  handle(this, new Handler(onFulfilled, onRejected, res));\n  return res;\n};\n\nfunction safeThen(self, onFulfilled, onRejected) {\n  return new self.constructor(function (resolve, reject) {\n    var res = new Promise(noop);\n    res.then(resolve, reject);\n    handle(self, new Handler(onFulfilled, onRejected, res));\n  });\n}\nfunction handle(self, deferred) {\n  while (self._83 === 3) {\n    self = self._18;\n  }\n  if (Promise._47) {\n    Promise._47(self);\n  }\n  if (self._83 === 0) {\n    if (self._75 === 0) {\n      self._75 = 1;\n      self._38 = deferred;\n      return;\n    }\n    if (self._75 === 1) {\n      self._75 = 2;\n      self._38 = [self._38, deferred];\n      return;\n    }\n    self._38.push(deferred);\n    return;\n  }\n  handleResolved(self, deferred);\n}\n\nfunction handleResolved(self, deferred) {\n  asap(function() {\n    var cb = self._83 === 1 ? deferred.onFulfilled : deferred.onRejected;\n    if (cb === null) {\n      if (self._83 === 1) {\n        resolve(deferred.promise, self._18);\n      } else {\n        reject(deferred.promise, self._18);\n      }\n      return;\n    }\n    var ret = tryCallOne(cb, self._18);\n    if (ret === IS_ERROR) {\n      reject(deferred.promise, LAST_ERROR);\n    } else {\n      resolve(deferred.promise, ret);\n    }\n  });\n}\nfunction resolve(self, newValue) {\n  // Promise Resolution Procedure: https://github.com/promises-aplus/promises-spec#the-promise-resolution-procedure\n  if (newValue === self) {\n    return reject(\n      self,\n      new TypeError('A promise cannot be resolved with itself.')\n    );\n  }\n  if (\n    newValue &&\n    (typeof newValue === 'object' || typeof newValue === 'function')\n  ) {\n    var then = getThen(newValue);\n    if (then === IS_ERROR) {\n      return reject(self, LAST_ERROR);\n    }\n    if (\n      then === self.then &&\n      newValue instanceof Promise\n    ) {\n      self._83 = 3;\n      self._18 = newValue;\n      finale(self);\n      return;\n    } else if (typeof then === 'function') {\n      doResolve(then.bind(newValue), self);\n      return;\n    }\n  }\n  self._83 = 1;\n  self._18 = newValue;\n  finale(self);\n}\n\nfunction reject(self, newValue) {\n  self._83 = 2;\n  self._18 = newValue;\n  if (Promise._71) {\n    Promise._71(self, newValue);\n  }\n  finale(self);\n}\nfunction finale(self) {\n  if (self._75 === 1) {\n    handle(self, self._38);\n    self._38 = null;\n  }\n  if (self._75 === 2) {\n    for (var i = 0; i < self._38.length; i++) {\n      handle(self, self._38[i]);\n    }\n    self._38 = null;\n  }\n}\n\nfunction Handler(onFulfilled, onRejected, promise){\n  this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;\n  this.onRejected = typeof onRejected === 'function' ? onRejected : null;\n  this.promise = promise;\n}\n\n/**\n * Take a potentially misbehaving resolver function and make sure\n * onFulfilled and onRejected are only called once.\n *\n * Makes no guarantees about asynchrony.\n */\nfunction doResolve(fn, promise) {\n  var done = false;\n  var res = tryCallTwo(fn, function (value) {\n    if (done) return;\n    done = true;\n    resolve(promise, value);\n  }, function (reason) {\n    if (done) return;\n    done = true;\n    reject(promise, reason);\n  });\n  if (!done && res === IS_ERROR) {\n    done = true;\n    reject(promise, LAST_ERROR);\n  }\n}\n\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\n\n\n\n/**\n * Use invariant() to assert state which your program assumes to be true.\n *\n * Provide sprintf-style format (only %s is supported) and arguments\n * to provide information about what broke and what you were\n * expecting.\n *\n * The invariant message will be stripped in production, but the invariant\n * will remain to ensure logic does not differ in production.\n */\n\nvar validateFormat = function validateFormat(format) {};\n\nif (false) {\n  validateFormat = function validateFormat(format) {\n    if (format === undefined) {\n      throw new Error('invariant requires an error message argument');\n    }\n  };\n}\n\nfunction invariant(condition, format, a, b, c, d, e, f) {\n  validateFormat(format);\n\n  if (!condition) {\n    var error;\n    if (format === undefined) {\n      error = new Error('Minified exception occurred; use the non-minified dev environment ' + 'for the full error message and additional helpful warnings.');\n    } else {\n      var args = [a, b, c, d, e, f];\n      var argIndex = 0;\n      error = new Error(format.replace(/%s/g, function () {\n        return args[argIndex++];\n      }));\n      error.name = 'Invariant Violation';\n    }\n\n    error.framesToPop = 1; // we don't care about invariant's own frame\n    throw error;\n  }\n}\n\nmodule.exports = invariant;\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\n\n\n\nvar emptyObject = {};\n\nif (false) {\n  Object.freeze(emptyObject);\n}\n\nmodule.exports = emptyObject;\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * \n */\n\nfunction makeEmptyFunction(arg) {\n  return function () {\n    return arg;\n  };\n}\n\n/**\n * This function accepts and discards inputs; it has no side effects. This is\n * primarily useful idiomatically for overridable function endpoints which\n * always need to be callable, since JS lacks a null-call idiom ala Cocoa.\n */\nvar emptyFunction = function emptyFunction() {};\n\nemptyFunction.thatReturns = makeEmptyFunction;\nemptyFunction.thatReturnsFalse = makeEmptyFunction(false);\nemptyFunction.thatReturnsTrue = makeEmptyFunction(true);\nemptyFunction.thatReturnsNull = makeEmptyFunction(null);\nemptyFunction.thatReturnsThis = function () {\n  return this;\n};\nemptyFunction.thatReturnsArgument = function (arg) {\n  return arg;\n};\n\nmodule.exports = emptyFunction;\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/**\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n__webpack_require__(41);\nmodule.exports = __webpack_require__(9).default;\n\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports) {\n\n// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n\n\n/***/ }),\n/* 9 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"firebase\", function() { return firebase; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__firebase_util__ = __webpack_require__(10);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__firebase_util___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__firebase_util__);\n\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nvar contains = function (obj, key) {\r\n    return Object.prototype.hasOwnProperty.call(obj, key);\r\n};\r\nvar DEFAULT_ENTRY_NAME = '[DEFAULT]';\r\n// An array to capture listeners before the true auth functions\r\n// exist\r\nvar tokenListeners = [];\r\n/**\r\n * Global context object for a collection of services using\r\n * a shared authentication state.\r\n */\r\nvar FirebaseAppImpl = /** @class */ (function () {\r\n    function FirebaseAppImpl(options, config, firebase_) {\r\n        this.firebase_ = firebase_;\r\n        this.isDeleted_ = false;\r\n        this.services_ = {};\r\n        this.name_ = config.name;\r\n        this._automaticDataCollectionEnabled =\r\n            config.automaticDataCollectionEnabled || false;\r\n        this.options_ = Object(__WEBPACK_IMPORTED_MODULE_0__firebase_util__[\"deepCopy\"])(options);\r\n        this.INTERNAL = {\r\n            getUid: function () { return null; },\r\n            getToken: function () { return Promise.resolve(null); },\r\n            addAuthTokenListener: function (callback) {\r\n                tokenListeners.push(callback);\r\n                // Make sure callback is called, asynchronously, in the absence of the auth module\r\n                setTimeout(function () { return callback(null); }, 0);\r\n            },\r\n            removeAuthTokenListener: function (callback) {\r\n                tokenListeners = tokenListeners.filter(function (listener) { return listener !== callback; });\r\n            }\r\n        };\r\n    }\r\n    Object.defineProperty(FirebaseAppImpl.prototype, \"automaticDataCollectionEnabled\", {\r\n        get: function () {\r\n            this.checkDestroyed_();\r\n            return this._automaticDataCollectionEnabled;\r\n        },\r\n        set: function (val) {\r\n            this.checkDestroyed_();\r\n            this._automaticDataCollectionEnabled = val;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(FirebaseAppImpl.prototype, \"name\", {\r\n        get: function () {\r\n            this.checkDestroyed_();\r\n            return this.name_;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(FirebaseAppImpl.prototype, \"options\", {\r\n        get: function () {\r\n            this.checkDestroyed_();\r\n            return this.options_;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    FirebaseAppImpl.prototype.delete = function () {\r\n        var _this = this;\r\n        return new Promise(function (resolve) {\r\n            _this.checkDestroyed_();\r\n            resolve();\r\n        })\r\n            .then(function () {\r\n            _this.firebase_.INTERNAL.removeApp(_this.name_);\r\n            var services = [];\r\n            Object.keys(_this.services_).forEach(function (serviceKey) {\r\n                Object.keys(_this.services_[serviceKey]).forEach(function (instanceKey) {\r\n                    services.push(_this.services_[serviceKey][instanceKey]);\r\n                });\r\n            });\r\n            return Promise.all(services.map(function (service) {\r\n                return service.INTERNAL.delete();\r\n            }));\r\n        })\r\n            .then(function () {\r\n            _this.isDeleted_ = true;\r\n            _this.services_ = {};\r\n        });\r\n    };\r\n    /**\r\n     * Return a service instance associated with this app (creating it\r\n     * on demand), identified by the passed instanceIdentifier.\r\n     *\r\n     * NOTE: Currently storage is the only one that is leveraging this\r\n     * functionality. They invoke it by calling:\r\n     *\r\n     * ```javascript\r\n     * firebase.app().storage('STORAGE BUCKET ID')\r\n     * ```\r\n     *\r\n     * The service name is passed to this already\r\n     * @internal\r\n     */\r\n    FirebaseAppImpl.prototype._getService = function (name, instanceIdentifier) {\r\n        if (instanceIdentifier === void 0) { instanceIdentifier = DEFAULT_ENTRY_NAME; }\r\n        this.checkDestroyed_();\r\n        if (!this.services_[name]) {\r\n            this.services_[name] = {};\r\n        }\r\n        if (!this.services_[name][instanceIdentifier]) {\r\n            /**\r\n             * If a custom instance has been defined (i.e. not '[DEFAULT]')\r\n             * then we will pass that instance on, otherwise we pass `null`\r\n             */\r\n            var instanceSpecifier = instanceIdentifier !== DEFAULT_ENTRY_NAME\r\n                ? instanceIdentifier\r\n                : undefined;\r\n            var service = this.firebase_.INTERNAL.factories[name](this, this.extendApp.bind(this), instanceSpecifier);\r\n            this.services_[name][instanceIdentifier] = service;\r\n        }\r\n        return this.services_[name][instanceIdentifier];\r\n    };\r\n    /**\r\n     * Callback function used to extend an App instance at the time\r\n     * of service instance creation.\r\n     */\r\n    FirebaseAppImpl.prototype.extendApp = function (props) {\r\n        var _this = this;\r\n        // Copy the object onto the FirebaseAppImpl prototype\r\n        Object(__WEBPACK_IMPORTED_MODULE_0__firebase_util__[\"deepExtend\"])(this, props);\r\n        /**\r\n         * If the app has overwritten the addAuthTokenListener stub, forward\r\n         * the active token listeners on to the true fxn.\r\n         *\r\n         * TODO: This function is required due to our current module\r\n         * structure. Once we are able to rely strictly upon a single module\r\n         * implementation, this code should be refactored and Auth should\r\n         * provide these stubs and the upgrade logic\r\n         */\r\n        if (props.INTERNAL && props.INTERNAL.addAuthTokenListener) {\r\n            tokenListeners.forEach(function (listener) {\r\n                _this.INTERNAL.addAuthTokenListener(listener);\r\n            });\r\n            tokenListeners = [];\r\n        }\r\n    };\r\n    /**\r\n     * This function will throw an Error if the App has already been deleted -\r\n     * use before performing API actions on the App.\r\n     */\r\n    FirebaseAppImpl.prototype.checkDestroyed_ = function () {\r\n        if (this.isDeleted_) {\r\n            error('app-deleted', { name: this.name_ });\r\n        }\r\n    };\r\n    return FirebaseAppImpl;\r\n}());\r\n// Prevent dead-code elimination of these methods w/o invalid property\r\n// copying.\r\n(FirebaseAppImpl.prototype.name && FirebaseAppImpl.prototype.options) ||\r\n    FirebaseAppImpl.prototype.delete ||\r\n    console.log('dc');\r\n/**\r\n * Return a firebase namespace object.\r\n *\r\n * In production, this will be called exactly once and the result\r\n * assigned to the 'firebase' global.  It may be called multiple times\r\n * in unit tests.\r\n */\r\nfunction createFirebaseNamespace() {\r\n    var apps_ = {};\r\n    var factories = {};\r\n    var appHooks = {};\r\n    // A namespace is a plain JavaScript Object.\r\n    var namespace = {\r\n        // Hack to prevent Babel from modifying the object returned\r\n        // as the firebase namespace.\r\n        __esModule: true,\r\n        initializeApp: initializeApp,\r\n        app: app,\r\n        apps: null,\r\n        Promise: Promise,\r\n        SDK_VERSION: '4.13.0',\r\n        INTERNAL: {\r\n            registerService: registerService,\r\n            createFirebaseNamespace: createFirebaseNamespace,\r\n            extendNamespace: extendNamespace,\r\n            createSubscribe: __WEBPACK_IMPORTED_MODULE_0__firebase_util__[\"createSubscribe\"],\r\n            ErrorFactory: __WEBPACK_IMPORTED_MODULE_0__firebase_util__[\"ErrorFactory\"],\r\n            removeApp: removeApp,\r\n            factories: factories,\r\n            useAsService: useAsService,\r\n            Promise: Promise,\r\n            deepExtend: __WEBPACK_IMPORTED_MODULE_0__firebase_util__[\"deepExtend\"]\r\n        }\r\n    };\r\n    // Inject a circular default export to allow Babel users who were previously\r\n    // using:\r\n    //\r\n    //   import firebase from 'firebase';\r\n    //   which becomes: var firebase = require('firebase').default;\r\n    //\r\n    // instead of\r\n    //\r\n    //   import * as firebase from 'firebase';\r\n    //   which becomes: var firebase = require('firebase');\r\n    Object(__WEBPACK_IMPORTED_MODULE_0__firebase_util__[\"patchProperty\"])(namespace, 'default', namespace);\r\n    // firebase.apps is a read-only getter.\r\n    Object.defineProperty(namespace, 'apps', {\r\n        get: getApps\r\n    });\r\n    /**\r\n     * Called by App.delete() - but before any services associated with the App\r\n     * are deleted.\r\n     */\r\n    function removeApp(name) {\r\n        var app = apps_[name];\r\n        callAppHooks(app, 'delete');\r\n        delete apps_[name];\r\n    }\r\n    /**\r\n     * Get the App object for a given name (or DEFAULT).\r\n     */\r\n    function app(name) {\r\n        name = name || DEFAULT_ENTRY_NAME;\r\n        if (!contains(apps_, name)) {\r\n            error('no-app', { name: name });\r\n        }\r\n        return apps_[name];\r\n    }\r\n    Object(__WEBPACK_IMPORTED_MODULE_0__firebase_util__[\"patchProperty\"])(app, 'App', FirebaseAppImpl);\r\n    function initializeApp(options, rawConfig) {\r\n        if (rawConfig === void 0) { rawConfig = {}; }\r\n        if (typeof rawConfig !== 'object' || rawConfig === null) {\r\n            var name_1 = rawConfig;\r\n            rawConfig = { name: name_1 };\r\n        }\r\n        var config = rawConfig;\r\n        if (config.name === undefined) {\r\n            config.name = DEFAULT_ENTRY_NAME;\r\n        }\r\n        var name = config.name;\r\n        if (typeof name !== 'string' || !name) {\r\n            error('bad-app-name', { name: name + '' });\r\n        }\r\n        if (contains(apps_, name)) {\r\n            error('duplicate-app', { name: name });\r\n        }\r\n        var app = new FirebaseAppImpl(options, config, namespace);\r\n        apps_[name] = app;\r\n        callAppHooks(app, 'create');\r\n        return app;\r\n    }\r\n    /*\r\n     * Return an array of all the non-deleted FirebaseApps.\r\n     */\r\n    function getApps() {\r\n        // Make a copy so caller cannot mutate the apps list.\r\n        return Object.keys(apps_).map(function (name) { return apps_[name]; });\r\n    }\r\n    /*\r\n     * Register a Firebase Service.\r\n     *\r\n     * firebase.INTERNAL.registerService()\r\n     *\r\n     * TODO: Implement serviceProperties.\r\n     */\r\n    function registerService(name, createService, serviceProperties, appHook, allowMultipleInstances) {\r\n        // Cannot re-register a service that already exists\r\n        if (factories[name]) {\r\n            error('duplicate-service', { name: name });\r\n        }\r\n        // Capture the service factory for later service instantiation\r\n        factories[name] = createService;\r\n        // Capture the appHook, if passed\r\n        if (appHook) {\r\n            appHooks[name] = appHook;\r\n            // Run the **new** app hook on all existing apps\r\n            getApps().forEach(function (app) {\r\n                appHook('create', app);\r\n            });\r\n        }\r\n        // The Service namespace is an accessor function ...\r\n        var serviceNamespace = function (appArg) {\r\n            if (appArg === void 0) { appArg = app(); }\r\n            if (typeof appArg[name] !== 'function') {\r\n                // Invalid argument.\r\n                // This happens in the following case: firebase.storage('gs:/')\r\n                error('invalid-app-argument', { name: name });\r\n            }\r\n            // Forward service instance lookup to the FirebaseApp.\r\n            return appArg[name]();\r\n        };\r\n        // ... and a container for service-level properties.\r\n        if (serviceProperties !== undefined) {\r\n            Object(__WEBPACK_IMPORTED_MODULE_0__firebase_util__[\"deepExtend\"])(serviceNamespace, serviceProperties);\r\n        }\r\n        // Monkey-patch the serviceNamespace onto the firebase namespace\r\n        namespace[name] = serviceNamespace;\r\n        // Patch the FirebaseAppImpl prototype\r\n        FirebaseAppImpl.prototype[name] = function () {\r\n            var args = [];\r\n            for (var _i = 0; _i < arguments.length; _i++) {\r\n                args[_i] = arguments[_i];\r\n            }\r\n            var serviceFxn = this._getService.bind(this, name);\r\n            return serviceFxn.apply(this, allowMultipleInstances ? args : []);\r\n        };\r\n        return serviceNamespace;\r\n    }\r\n    /**\r\n     * Patch the top-level firebase namespace with additional properties.\r\n     *\r\n     * firebase.INTERNAL.extendNamespace()\r\n     */\r\n    function extendNamespace(props) {\r\n        Object(__WEBPACK_IMPORTED_MODULE_0__firebase_util__[\"deepExtend\"])(namespace, props);\r\n    }\r\n    function callAppHooks(app, eventName) {\r\n        Object.keys(factories).forEach(function (serviceName) {\r\n            // Ignore virtual services\r\n            var factoryName = useAsService(app, serviceName);\r\n            if (factoryName === null) {\r\n                return;\r\n            }\r\n            if (appHooks[factoryName]) {\r\n                appHooks[factoryName](eventName, app);\r\n            }\r\n        });\r\n    }\r\n    // Map the requested service to a registered service name\r\n    // (used to map auth to serverAuth service when needed).\r\n    function useAsService(app, name) {\r\n        if (name === 'serverAuth') {\r\n            return null;\r\n        }\r\n        var useService = name;\r\n        var options = app.options;\r\n        return useService;\r\n    }\r\n    return namespace;\r\n}\r\nfunction error(code, args) {\r\n    throw appErrors.create(code, args);\r\n}\r\n// TypeScript does not support non-string indexes!\r\n// let errors: {[code: AppError: string} = {\r\nvar errors = {\r\n    'no-app': \"No Firebase App '{$name}' has been created - \" +\r\n        'call Firebase App.initializeApp()',\r\n    'bad-app-name': \"Illegal App name: '{$name}\",\r\n    'duplicate-app': \"Firebase App named '{$name}' already exists\",\r\n    'app-deleted': \"Firebase App named '{$name}' already deleted\",\r\n    'duplicate-service': \"Firebase service named '{$name}' already registered\",\r\n    'sa-not-supported': 'Initializing the Firebase SDK with a service ' +\r\n        'account is only allowed in a Node.js environment. On client ' +\r\n        'devices, you should instead initialize the SDK with an api key and ' +\r\n        'auth domain',\r\n    'invalid-app-argument': 'firebase.{$name}() takes either no argument or a ' +\r\n        'Firebase App instance.'\r\n};\r\nvar appErrors = new __WEBPACK_IMPORTED_MODULE_0__firebase_util__[\"ErrorFactory\"]('app', 'Firebase', errors);\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nvar firebase = createFirebaseNamespace();\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (firebase);\n\n\n\n/***/ }),\n/* 10 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\nvar tslib_1 = __webpack_require__(11);\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * @fileoverview Firebase constants.  Some of these (@defines) can be overridden at compile-time.\r\n */\r\nvar CONSTANTS = {\r\n    /**\r\n     * @define {boolean} Whether this is the client Node.js SDK.\r\n     */\r\n    NODE_CLIENT: false,\r\n    /**\r\n     * @define {boolean} Whether this is the Admin Node.js SDK.\r\n     */\r\n    NODE_ADMIN: false,\r\n    /**\r\n     * Firebase SDK Version\r\n     */\r\n    SDK_VERSION: '${JSCORE_VERSION}'\r\n};\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Throws an error if the provided assertion is falsy\r\n * @param {*} assertion The assertion to be tested for falsiness\r\n * @param {!string} message The message to display if the check fails\r\n */\r\nvar assert = function (assertion, message) {\r\n    if (!assertion) {\r\n        throw assertionError(message);\r\n    }\r\n};\r\n/**\r\n * Returns an Error object suitable for throwing.\r\n * @param {string} message\r\n * @return {!Error}\r\n */\r\nvar assertionError = function (message) {\r\n    return new Error('Firebase Database (' +\r\n        CONSTANTS.SDK_VERSION +\r\n        ') INTERNAL ASSERT FAILED: ' +\r\n        message);\r\n};\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nvar stringToByteArray = function (str) {\r\n    // TODO(user): Use native implementations if/when available\r\n    var out = [], p = 0;\r\n    for (var i = 0; i < str.length; i++) {\r\n        var c = str.charCodeAt(i);\r\n        if (c < 128) {\r\n            out[p++] = c;\r\n        }\r\n        else if (c < 2048) {\r\n            out[p++] = (c >> 6) | 192;\r\n            out[p++] = (c & 63) | 128;\r\n        }\r\n        else if ((c & 0xfc00) == 0xd800 &&\r\n            i + 1 < str.length &&\r\n            (str.charCodeAt(i + 1) & 0xfc00) == 0xdc00) {\r\n            // Surrogate Pair\r\n            c = 0x10000 + ((c & 0x03ff) << 10) + (str.charCodeAt(++i) & 0x03ff);\r\n            out[p++] = (c >> 18) | 240;\r\n            out[p++] = ((c >> 12) & 63) | 128;\r\n            out[p++] = ((c >> 6) & 63) | 128;\r\n            out[p++] = (c & 63) | 128;\r\n        }\r\n        else {\r\n            out[p++] = (c >> 12) | 224;\r\n            out[p++] = ((c >> 6) & 63) | 128;\r\n            out[p++] = (c & 63) | 128;\r\n        }\r\n    }\r\n    return out;\r\n};\r\n/**\r\n * Turns an array of numbers into the string given by the concatenation of the\r\n * characters to which the numbers correspond.\r\n * @param {Array<number>} bytes Array of numbers representing characters.\r\n * @return {string} Stringification of the array.\r\n */\r\nvar byteArrayToString = function (bytes) {\r\n    // TODO(user): Use native implementations if/when available\r\n    var out = [], pos = 0, c = 0;\r\n    while (pos < bytes.length) {\r\n        var c1 = bytes[pos++];\r\n        if (c1 < 128) {\r\n            out[c++] = String.fromCharCode(c1);\r\n        }\r\n        else if (c1 > 191 && c1 < 224) {\r\n            var c2 = bytes[pos++];\r\n            out[c++] = String.fromCharCode(((c1 & 31) << 6) | (c2 & 63));\r\n        }\r\n        else if (c1 > 239 && c1 < 365) {\r\n            // Surrogate Pair\r\n            var c2 = bytes[pos++];\r\n            var c3 = bytes[pos++];\r\n            var c4 = bytes[pos++];\r\n            var u = (((c1 & 7) << 18) | ((c2 & 63) << 12) | ((c3 & 63) << 6) | (c4 & 63)) -\r\n                0x10000;\r\n            out[c++] = String.fromCharCode(0xd800 + (u >> 10));\r\n            out[c++] = String.fromCharCode(0xdc00 + (u & 1023));\r\n        }\r\n        else {\r\n            var c2 = bytes[pos++];\r\n            var c3 = bytes[pos++];\r\n            out[c++] = String.fromCharCode(((c1 & 15) << 12) | ((c2 & 63) << 6) | (c3 & 63));\r\n        }\r\n    }\r\n    return out.join('');\r\n};\r\n// Static lookup maps, lazily populated by init_()\r\nvar base64 = {\r\n    /**\r\n     * Maps bytes to characters.\r\n     * @type {Object}\r\n     * @private\r\n     */\r\n    byteToCharMap_: null,\r\n    /**\r\n     * Maps characters to bytes.\r\n     * @type {Object}\r\n     * @private\r\n     */\r\n    charToByteMap_: null,\r\n    /**\r\n     * Maps bytes to websafe characters.\r\n     * @type {Object}\r\n     * @private\r\n     */\r\n    byteToCharMapWebSafe_: null,\r\n    /**\r\n     * Maps websafe characters to bytes.\r\n     * @type {Object}\r\n     * @private\r\n     */\r\n    charToByteMapWebSafe_: null,\r\n    /**\r\n     * Our default alphabet, shared between\r\n     * ENCODED_VALS and ENCODED_VALS_WEBSAFE\r\n     * @type {string}\r\n     */\r\n    ENCODED_VALS_BASE: 'ABCDEFGHIJKLMNOPQRSTUVWXYZ' + 'abcdefghijklmnopqrstuvwxyz' + '0123456789',\r\n    /**\r\n     * Our default alphabet. Value 64 (=) is special; it means \"nothing.\"\r\n     * @type {string}\r\n     */\r\n    get ENCODED_VALS() {\r\n        return this.ENCODED_VALS_BASE + '+/=';\r\n    },\r\n    /**\r\n     * Our websafe alphabet.\r\n     * @type {string}\r\n     */\r\n    get ENCODED_VALS_WEBSAFE() {\r\n        return this.ENCODED_VALS_BASE + '-_.';\r\n    },\r\n    /**\r\n     * Whether this browser supports the atob and btoa functions. This extension\r\n     * started at Mozilla but is now implemented by many browsers. We use the\r\n     * ASSUME_* variables to avoid pulling in the full useragent detection library\r\n     * but still allowing the standard per-browser compilations.\r\n     *\r\n     * @type {boolean}\r\n     */\r\n    HAS_NATIVE_SUPPORT: typeof atob === 'function',\r\n    /**\r\n     * Base64-encode an array of bytes.\r\n     *\r\n     * @param {Array<number>|Uint8Array} input An array of bytes (numbers with\r\n     *     value in [0, 255]) to encode.\r\n     * @param {boolean=} opt_webSafe Boolean indicating we should use the\r\n     *     alternative alphabet.\r\n     * @return {string} The base64 encoded string.\r\n     */\r\n    encodeByteArray: function (input, opt_webSafe) {\r\n        if (!Array.isArray(input)) {\r\n            throw Error('encodeByteArray takes an array as a parameter');\r\n        }\r\n        this.init_();\r\n        var byteToCharMap = opt_webSafe\r\n            ? this.byteToCharMapWebSafe_\r\n            : this.byteToCharMap_;\r\n        var output = [];\r\n        for (var i = 0; i < input.length; i += 3) {\r\n            var byte1 = input[i];\r\n            var haveByte2 = i + 1 < input.length;\r\n            var byte2 = haveByte2 ? input[i + 1] : 0;\r\n            var haveByte3 = i + 2 < input.length;\r\n            var byte3 = haveByte3 ? input[i + 2] : 0;\r\n            var outByte1 = byte1 >> 2;\r\n            var outByte2 = ((byte1 & 0x03) << 4) | (byte2 >> 4);\r\n            var outByte3 = ((byte2 & 0x0f) << 2) | (byte3 >> 6);\r\n            var outByte4 = byte3 & 0x3f;\r\n            if (!haveByte3) {\r\n                outByte4 = 64;\r\n                if (!haveByte2) {\r\n                    outByte3 = 64;\r\n                }\r\n            }\r\n            output.push(byteToCharMap[outByte1], byteToCharMap[outByte2], byteToCharMap[outByte3], byteToCharMap[outByte4]);\r\n        }\r\n        return output.join('');\r\n    },\r\n    /**\r\n     * Base64-encode a string.\r\n     *\r\n     * @param {string} input A string to encode.\r\n     * @param {boolean=} opt_webSafe If true, we should use the\r\n     *     alternative alphabet.\r\n     * @return {string} The base64 encoded string.\r\n     */\r\n    encodeString: function (input, opt_webSafe) {\r\n        // Shortcut for Mozilla browsers that implement\r\n        // a native base64 encoder in the form of \"btoa/atob\"\r\n        if (this.HAS_NATIVE_SUPPORT && !opt_webSafe) {\r\n            return btoa(input);\r\n        }\r\n        return this.encodeByteArray(stringToByteArray(input), opt_webSafe);\r\n    },\r\n    /**\r\n     * Base64-decode a string.\r\n     *\r\n     * @param {string} input to decode.\r\n     * @param {boolean=} opt_webSafe True if we should use the\r\n     *     alternative alphabet.\r\n     * @return {string} string representing the decoded value.\r\n     */\r\n    decodeString: function (input, opt_webSafe) {\r\n        // Shortcut for Mozilla browsers that implement\r\n        // a native base64 encoder in the form of \"btoa/atob\"\r\n        if (this.HAS_NATIVE_SUPPORT && !opt_webSafe) {\r\n            return atob(input);\r\n        }\r\n        return byteArrayToString(this.decodeStringToByteArray(input, opt_webSafe));\r\n    },\r\n    /**\r\n     * Base64-decode a string.\r\n     *\r\n     * In base-64 decoding, groups of four characters are converted into three\r\n     * bytes.  If the encoder did not apply padding, the input length may not\r\n     * be a multiple of 4.\r\n     *\r\n     * In this case, the last group will have fewer than 4 characters, and\r\n     * padding will be inferred.  If the group has one or two characters, it decodes\r\n     * to one byte.  If the group has three characters, it decodes to two bytes.\r\n     *\r\n     * @param {string} input Input to decode.\r\n     * @param {boolean=} opt_webSafe True if we should use the web-safe alphabet.\r\n     * @return {!Array<number>} bytes representing the decoded value.\r\n     */\r\n    decodeStringToByteArray: function (input, opt_webSafe) {\r\n        this.init_();\r\n        var charToByteMap = opt_webSafe\r\n            ? this.charToByteMapWebSafe_\r\n            : this.charToByteMap_;\r\n        var output = [];\r\n        for (var i = 0; i < input.length;) {\r\n            var byte1 = charToByteMap[input.charAt(i++)];\r\n            var haveByte2 = i < input.length;\r\n            var byte2 = haveByte2 ? charToByteMap[input.charAt(i)] : 0;\r\n            ++i;\r\n            var haveByte3 = i < input.length;\r\n            var byte3 = haveByte3 ? charToByteMap[input.charAt(i)] : 64;\r\n            ++i;\r\n            var haveByte4 = i < input.length;\r\n            var byte4 = haveByte4 ? charToByteMap[input.charAt(i)] : 64;\r\n            ++i;\r\n            if (byte1 == null || byte2 == null || byte3 == null || byte4 == null) {\r\n                throw Error();\r\n            }\r\n            var outByte1 = (byte1 << 2) | (byte2 >> 4);\r\n            output.push(outByte1);\r\n            if (byte3 != 64) {\r\n                var outByte2 = ((byte2 << 4) & 0xf0) | (byte3 >> 2);\r\n                output.push(outByte2);\r\n                if (byte4 != 64) {\r\n                    var outByte3 = ((byte3 << 6) & 0xc0) | byte4;\r\n                    output.push(outByte3);\r\n                }\r\n            }\r\n        }\r\n        return output;\r\n    },\r\n    /**\r\n     * Lazy static initialization function. Called before\r\n     * accessing any of the static map variables.\r\n     * @private\r\n     */\r\n    init_: function () {\r\n        if (!this.byteToCharMap_) {\r\n            this.byteToCharMap_ = {};\r\n            this.charToByteMap_ = {};\r\n            this.byteToCharMapWebSafe_ = {};\r\n            this.charToByteMapWebSafe_ = {};\r\n            // We want quick mappings back and forth, so we precompute two maps.\r\n            for (var i = 0; i < this.ENCODED_VALS.length; i++) {\r\n                this.byteToCharMap_[i] = this.ENCODED_VALS.charAt(i);\r\n                this.charToByteMap_[this.byteToCharMap_[i]] = i;\r\n                this.byteToCharMapWebSafe_[i] = this.ENCODED_VALS_WEBSAFE.charAt(i);\r\n                this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]] = i;\r\n                // Be forgiving when decoding and correctly decode both encodings.\r\n                if (i >= this.ENCODED_VALS_BASE.length) {\r\n                    this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)] = i;\r\n                    this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)] = i;\r\n                }\r\n            }\r\n        }\r\n    }\r\n};\r\n/**\r\n * URL-safe base64 encoding\r\n * @param {!string} str\r\n * @return {!string}\r\n */\r\nvar base64Encode = function (str) {\r\n    var utf8Bytes = stringToByteArray(str);\r\n    return base64.encodeByteArray(utf8Bytes, true);\r\n};\r\n/**\r\n * URL-safe base64 decoding\r\n *\r\n * NOTE: DO NOT use the global atob() function - it does NOT support the\r\n * base64Url variant encoding.\r\n *\r\n * @param {string} str To be decoded\r\n * @return {?string} Decoded result, if possible\r\n */\r\nvar base64Decode = function (str) {\r\n    try {\r\n        return base64.decodeString(str, true);\r\n    }\r\n    catch (e) {\r\n        console.error('base64Decode failed: ', e);\r\n    }\r\n    return null;\r\n};\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Do a deep-copy of basic JavaScript Objects or Arrays.\r\n */\r\nfunction deepCopy(value) {\r\n    return deepExtend(undefined, value);\r\n}\r\n/**\r\n * Copy properties from source to target (recursively allows extension\r\n * of Objects and Arrays).  Scalar values in the target are over-written.\r\n * If target is undefined, an object of the appropriate type will be created\r\n * (and returned).\r\n *\r\n * We recursively copy all child properties of plain Objects in the source- so\r\n * that namespace- like dictionaries are merged.\r\n *\r\n * Note that the target can be a function, in which case the properties in\r\n * the source Object are copied onto it as static properties of the Function.\r\n */\r\nfunction deepExtend(target, source) {\r\n    if (!(source instanceof Object)) {\r\n        return source;\r\n    }\r\n    switch (source.constructor) {\r\n        case Date:\r\n            // Treat Dates like scalars; if the target date object had any child\r\n            // properties - they will be lost!\r\n            var dateValue = source;\r\n            return new Date(dateValue.getTime());\r\n        case Object:\r\n            if (target === undefined) {\r\n                target = {};\r\n            }\r\n            break;\r\n        case Array:\r\n            // Always copy the array source and overwrite the target.\r\n            target = [];\r\n            break;\r\n        default:\r\n            // Not a plain Object - treat it as a scalar.\r\n            return source;\r\n    }\r\n    for (var prop in source) {\r\n        if (!source.hasOwnProperty(prop)) {\r\n            continue;\r\n        }\r\n        target[prop] = deepExtend(target[prop], source[prop]);\r\n    }\r\n    return target;\r\n}\r\n// TODO: Really needed (for JSCompiler type checking)?\r\nfunction patchProperty(obj, prop, value) {\r\n    obj[prop] = value;\r\n}\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nvar Deferred = /** @class */ (function () {\r\n    function Deferred() {\r\n        var _this = this;\r\n        this.promise = new Promise(function (resolve, reject) {\r\n            _this.resolve = resolve;\r\n            _this.reject = reject;\r\n        });\r\n    }\r\n    /**\r\n     * Our API internals are not promiseified and cannot because our callback APIs have subtle expectations around\r\n     * invoking promises inline, which Promises are forbidden to do. This method accepts an optional node-style callback\r\n     * and returns a node-style callback which will resolve or reject the Deferred's promise.\r\n     * @param {((?function(?(Error)): (?|undefined))| (?function(?(Error),?=): (?|undefined)))=} callback\r\n     * @return {!function(?(Error), ?=)}\r\n     */\r\n    Deferred.prototype.wrapCallback = function (callback) {\r\n        var _this = this;\r\n        return function (error, value) {\r\n            if (error) {\r\n                _this.reject(error);\r\n            }\r\n            else {\r\n                _this.resolve(value);\r\n            }\r\n            if (typeof callback === 'function') {\r\n                // Attaching noop handler just in case developer wasn't expecting\r\n                // promises\r\n                _this.promise.catch(function () { });\r\n                // Some of our callbacks don't expect a value and our own tests\r\n                // assert that the parameter length is 1\r\n                if (callback.length === 1) {\r\n                    callback(error);\r\n                }\r\n                else {\r\n                    callback(error, value);\r\n                }\r\n            }\r\n        };\r\n    };\r\n    return Deferred;\r\n}());\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Returns navigator.userAgent string or '' if it's not defined.\r\n * @return {string} user agent string\r\n */\r\nvar getUA = function () {\r\n    if (typeof navigator !== 'undefined' &&\r\n        typeof navigator['userAgent'] === 'string') {\r\n        return navigator['userAgent'];\r\n    }\r\n    else {\r\n        return '';\r\n    }\r\n};\r\n/**\r\n * Detect Cordova / PhoneGap / Ionic frameworks on a mobile device.\r\n *\r\n * Deliberately does not rely on checking `file://` URLs (as this fails PhoneGap in the Ripple emulator) nor\r\n * Cordova `onDeviceReady`, which would normally wait for a callback.\r\n *\r\n * @return {boolean} isMobileCordova\r\n */\r\nvar isMobileCordova = function () {\r\n    return (typeof window !== 'undefined' &&\r\n        !!(window['cordova'] || window['phonegap'] || window['PhoneGap']) &&\r\n        /ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(getUA()));\r\n};\r\n/**\r\n * Detect React Native.\r\n *\r\n * @return {boolean} True if ReactNative environment is detected.\r\n */\r\nvar isReactNative = function () {\r\n    return (typeof navigator === 'object' && navigator['product'] === 'ReactNative');\r\n};\r\n/**\r\n * Detect Node.js.\r\n *\r\n * @return {boolean} True if Node.js environment is detected.\r\n */\r\nvar isNodeSdk = function () {\r\n    return CONSTANTS.NODE_CLIENT === true || CONSTANTS.NODE_ADMIN === true;\r\n};\n\nvar ERROR_NAME = 'FirebaseError';\r\nvar captureStackTrace = Error\r\n    .captureStackTrace;\r\n// Export for faking in tests\r\nfunction patchCapture(captureFake) {\r\n    var result = captureStackTrace;\r\n    captureStackTrace = captureFake;\r\n    return result;\r\n}\r\nvar FirebaseError = /** @class */ (function () {\r\n    function FirebaseError(code, message) {\r\n        this.code = code;\r\n        this.message = message;\r\n        // We want the stack value, if implemented by Error\r\n        if (captureStackTrace) {\r\n            // Patches this.stack, omitted calls above ErrorFactory#create\r\n            captureStackTrace(this, ErrorFactory.prototype.create);\r\n        }\r\n        else {\r\n            var err_1 = Error.apply(this, arguments);\r\n            this.name = ERROR_NAME;\r\n            // Make non-enumerable getter for the property.\r\n            Object.defineProperty(this, 'stack', {\r\n                get: function () {\r\n                    return err_1.stack;\r\n                }\r\n            });\r\n        }\r\n    }\r\n    return FirebaseError;\r\n}());\r\n// Back-door inheritance\r\nFirebaseError.prototype = Object.create(Error.prototype);\r\nFirebaseError.prototype.constructor = FirebaseError;\r\nFirebaseError.prototype.name = ERROR_NAME;\r\nvar ErrorFactory = /** @class */ (function () {\r\n    function ErrorFactory(service, serviceName, errors) {\r\n        this.service = service;\r\n        this.serviceName = serviceName;\r\n        this.errors = errors;\r\n        // Matches {$name}, by default.\r\n        this.pattern = /\\{\\$([^}]+)}/g;\r\n        // empty\r\n    }\r\n    ErrorFactory.prototype.create = function (code, data) {\r\n        if (data === undefined) {\r\n            data = {};\r\n        }\r\n        var template = this.errors[code];\r\n        var fullCode = this.service + '/' + code;\r\n        var message;\r\n        if (template === undefined) {\r\n            message = 'Error';\r\n        }\r\n        else {\r\n            message = template.replace(this.pattern, function (match, key) {\r\n                var value = data[key];\r\n                return value !== undefined ? value.toString() : '<' + key + '?>';\r\n            });\r\n        }\r\n        // Service: Error message (service/code).\r\n        message = this.serviceName + ': ' + message + ' (' + fullCode + ').';\r\n        var err = new FirebaseError(fullCode, message);\r\n        // Populate the Error object with message parts for programmatic\r\n        // accesses (e.g., e.file).\r\n        for (var prop in data) {\r\n            if (!data.hasOwnProperty(prop) || prop.slice(-1) === '_') {\r\n                continue;\r\n            }\r\n            err[prop] = data[prop];\r\n        }\r\n        return err;\r\n    };\r\n    return ErrorFactory;\r\n}());\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Evaluates a JSON string into a javascript object.\r\n *\r\n * @param {string} str A string containing JSON.\r\n * @return {*} The javascript object representing the specified JSON.\r\n */\r\nfunction jsonEval(str) {\r\n    return JSON.parse(str);\r\n}\r\n/**\r\n * Returns JSON representing a javascript object.\r\n * @param {*} data Javascript object to be stringified.\r\n * @return {string} The JSON contents of the object.\r\n */\r\nfunction stringify(data) {\r\n    return JSON.stringify(data);\r\n}\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Decodes a Firebase auth. token into constituent parts.\r\n *\r\n * Notes:\r\n * - May return with invalid / incomplete claims if there's no native base64 decoding support.\r\n * - Doesn't check if the token is actually valid.\r\n *\r\n * @param {?string} token\r\n * @return {{header: *, claims: *, data: *, signature: string}}\r\n */\r\nvar decode = function (token) {\r\n    var header = {}, claims = {}, data = {}, signature = '';\r\n    try {\r\n        var parts = token.split('.');\r\n        header = jsonEval(base64Decode(parts[0]) || '');\r\n        claims = jsonEval(base64Decode(parts[1]) || '');\r\n        signature = parts[2];\r\n        data = claims['d'] || {};\r\n        delete claims['d'];\r\n    }\r\n    catch (e) { }\r\n    return {\r\n        header: header,\r\n        claims: claims,\r\n        data: data,\r\n        signature: signature\r\n    };\r\n};\r\n/**\r\n * Decodes a Firebase auth. token and checks the validity of its time-based claims. Will return true if the\r\n * token is within the time window authorized by the 'nbf' (not-before) and 'iat' (issued-at) claims.\r\n *\r\n * Notes:\r\n * - May return a false negative if there's no native base64 decoding support.\r\n * - Doesn't check if the token is actually valid.\r\n *\r\n * @param {?string} token\r\n * @return {boolean}\r\n */\r\nvar isValidTimestamp = function (token) {\r\n    var claims = decode(token).claims, now = Math.floor(new Date().getTime() / 1000), validSince, validUntil;\r\n    if (typeof claims === 'object') {\r\n        if (claims.hasOwnProperty('nbf')) {\r\n            validSince = claims['nbf'];\r\n        }\r\n        else if (claims.hasOwnProperty('iat')) {\r\n            validSince = claims['iat'];\r\n        }\r\n        if (claims.hasOwnProperty('exp')) {\r\n            validUntil = claims['exp'];\r\n        }\r\n        else {\r\n            // token will expire after 24h by default\r\n            validUntil = validSince + 86400;\r\n        }\r\n    }\r\n    return (now && validSince && validUntil && now >= validSince && now <= validUntil);\r\n};\r\n/**\r\n * Decodes a Firebase auth. token and returns its issued at time if valid, null otherwise.\r\n *\r\n * Notes:\r\n * - May return null if there's no native base64 decoding support.\r\n * - Doesn't check if the token is actually valid.\r\n *\r\n * @param {?string} token\r\n * @return {?number}\r\n */\r\nvar issuedAtTime = function (token) {\r\n    var claims = decode(token).claims;\r\n    if (typeof claims === 'object' && claims.hasOwnProperty('iat')) {\r\n        return claims['iat'];\r\n    }\r\n    return null;\r\n};\r\n/**\r\n * Decodes a Firebase auth. token and checks the validity of its format. Expects a valid issued-at time and non-empty\r\n * signature.\r\n *\r\n * Notes:\r\n * - May return a false negative if there's no native base64 decoding support.\r\n * - Doesn't check if the token is actually valid.\r\n *\r\n * @param {?string} token\r\n * @return {boolean}\r\n */\r\nvar isValidFormat = function (token) {\r\n    var decoded = decode(token), claims = decoded.claims;\r\n    return (!!decoded.signature &&\r\n        !!claims &&\r\n        typeof claims === 'object' &&\r\n        claims.hasOwnProperty('iat'));\r\n};\r\n/**\r\n * Attempts to peer into an auth token and determine if it's an admin auth token by looking at the claims portion.\r\n *\r\n * Notes:\r\n * - May return a false negative if there's no native base64 decoding support.\r\n * - Doesn't check if the token is actually valid.\r\n *\r\n * @param {?string} token\r\n * @return {boolean}\r\n */\r\nvar isAdmin = function (token) {\r\n    var claims = decode(token).claims;\r\n    return typeof claims === 'object' && claims['admin'] === true;\r\n};\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n// See http://www.devthought.com/2012/01/18/an-object-is-not-a-hash/\r\nvar contains = function (obj, key) {\r\n    return Object.prototype.hasOwnProperty.call(obj, key);\r\n};\r\nvar safeGet = function (obj, key) {\r\n    if (Object.prototype.hasOwnProperty.call(obj, key))\r\n        return obj[key];\r\n    // else return undefined.\r\n};\r\n/**\r\n * Enumerates the keys/values in an object, excluding keys defined on the prototype.\r\n *\r\n * @param {?Object.<K,V>} obj Object to enumerate.\r\n * @param {!function(K, V)} fn Function to call for each key and value.\r\n * @template K,V\r\n */\r\nvar forEach = function (obj, fn) {\r\n    for (var key in obj) {\r\n        if (Object.prototype.hasOwnProperty.call(obj, key)) {\r\n            fn(key, obj[key]);\r\n        }\r\n    }\r\n};\r\n/**\r\n * Copies all the (own) properties from one object to another.\r\n * @param {!Object} objTo\r\n * @param {!Object} objFrom\r\n * @return {!Object} objTo\r\n */\r\nvar extend = function (objTo, objFrom) {\r\n    forEach(objFrom, function (key, value) {\r\n        objTo[key] = value;\r\n    });\r\n    return objTo;\r\n};\r\n/**\r\n * Returns a clone of the specified object.\r\n * @param {!Object} obj\r\n * @return {!Object} cloned obj.\r\n */\r\nvar clone = function (obj) {\r\n    return extend({}, obj);\r\n};\r\n/**\r\n * Returns true if obj has typeof \"object\" and is not null.  Unlike goog.isObject(), does not return true\r\n * for functions.\r\n *\r\n * @param obj {*} A potential object.\r\n * @returns {boolean} True if it's an object.\r\n */\r\nvar isNonNullObject = function (obj) {\r\n    return typeof obj === 'object' && obj !== null;\r\n};\r\nvar isEmpty = function (obj) {\r\n    for (var key in obj) {\r\n        return false;\r\n    }\r\n    return true;\r\n};\r\nvar getCount = function (obj) {\r\n    var rv = 0;\r\n    for (var key in obj) {\r\n        rv++;\r\n    }\r\n    return rv;\r\n};\r\nvar map = function (obj, f, opt_obj) {\r\n    var res = {};\r\n    for (var key in obj) {\r\n        res[key] = f.call(opt_obj, obj[key], key, obj);\r\n    }\r\n    return res;\r\n};\r\nvar findKey = function (obj, fn, opt_this) {\r\n    for (var key in obj) {\r\n        if (fn.call(opt_this, obj[key], key, obj)) {\r\n            return key;\r\n        }\r\n    }\r\n    return undefined;\r\n};\r\nvar findValue = function (obj, fn, opt_this) {\r\n    var key = findKey(obj, fn, opt_this);\r\n    return key && obj[key];\r\n};\r\nvar getAnyKey = function (obj) {\r\n    for (var key in obj) {\r\n        return key;\r\n    }\r\n};\r\nvar getValues = function (obj) {\r\n    var res = [];\r\n    var i = 0;\r\n    for (var key in obj) {\r\n        res[i++] = obj[key];\r\n    }\r\n    return res;\r\n};\r\n/**\r\n * Tests whether every key/value pair in an object pass the test implemented\r\n * by the provided function\r\n *\r\n * @param {?Object.<K,V>} obj Object to test.\r\n * @param {!function(K, V)} fn Function to call for each key and value.\r\n * @template K,V\r\n */\r\nvar every = function (obj, fn) {\r\n    for (var key in obj) {\r\n        if (Object.prototype.hasOwnProperty.call(obj, key)) {\r\n            if (!fn(key, obj[key])) {\r\n                return false;\r\n            }\r\n        }\r\n    }\r\n    return true;\r\n};\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Returns a querystring-formatted string (e.g. &arg=val&arg2=val2) from a params\r\n * object (e.g. {arg: 'val', arg2: 'val2'})\r\n * Note: You must prepend it with ? when adding it to a URL.\r\n *\r\n * @param {!Object} querystringParams\r\n * @return {string}\r\n */\r\nvar querystring = function (querystringParams) {\r\n    var params = [];\r\n    forEach(querystringParams, function (key, value) {\r\n        if (Array.isArray(value)) {\r\n            value.forEach(function (arrayVal) {\r\n                params.push(encodeURIComponent(key) + '=' + encodeURIComponent(arrayVal));\r\n            });\r\n        }\r\n        else {\r\n            params.push(encodeURIComponent(key) + '=' + encodeURIComponent(value));\r\n        }\r\n    });\r\n    return params.length ? '&' + params.join('&') : '';\r\n};\r\n/**\r\n * Decodes a querystring (e.g. ?arg=val&arg2=val2) into a params object (e.g. {arg: 'val', arg2: 'val2'})\r\n *\r\n * @param {string} querystring\r\n * @return {!Object}\r\n */\r\nvar querystringDecode = function (querystring) {\r\n    var obj = {};\r\n    var tokens = querystring.replace(/^\\?/, '').split('&');\r\n    tokens.forEach(function (token) {\r\n        if (token) {\r\n            var key = token.split('=');\r\n            obj[key[0]] = key[1];\r\n        }\r\n    });\r\n    return obj;\r\n};\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n// Copyright 2011 The Closure Library Authors. All Rights Reserved.\r\n//\r\n// Licensed under the Apache License, Version 2.0 (the \"License\");\r\n// you may not use this file except in compliance with the License.\r\n// You may obtain a copy of the License at\r\n//\r\n//      http://www.apache.org/licenses/LICENSE-2.0\r\n//\r\n// Unless required by applicable law or agreed to in writing, software\r\n// distributed under the License is distributed on an \"AS-IS\" BASIS,\r\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n// See the License for the specific language governing permissions and\r\n// limitations under the License.\r\n/**\r\n * @fileoverview Abstract cryptographic hash interface.\r\n *\r\n * See Sha1 and Md5 for sample implementations.\r\n *\r\n */\r\n/**\r\n * Create a cryptographic hash instance.\r\n *\r\n * @constructor\r\n * @struct\r\n */\r\nvar Hash = /** @class */ (function () {\r\n    function Hash() {\r\n        /**\r\n         * The block size for the hasher.\r\n         * @type {number}\r\n         */\r\n        this.blockSize = -1;\r\n    }\r\n    return Hash;\r\n}());\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * @fileoverview SHA-1 cryptographic hash.\r\n * Variable names follow the notation in FIPS PUB 180-3:\r\n * http://csrc.nist.gov/publications/fips/fips180-3/fips180-3_final.pdf.\r\n *\r\n * Usage:\r\n *   var sha1 = new sha1();\r\n *   sha1.update(bytes);\r\n *   var hash = sha1.digest();\r\n *\r\n * Performance:\r\n *   Chrome 23:   ~400 Mbit/s\r\n *   Firefox 16:  ~250 Mbit/s\r\n *\r\n */\r\n/**\r\n * SHA-1 cryptographic hash constructor.\r\n *\r\n * The properties declared here are discussed in the above algorithm document.\r\n * @constructor\r\n * @extends {Hash}\r\n * @final\r\n * @struct\r\n */\r\nvar Sha1 = /** @class */ (function (_super) {\r\n    tslib_1.__extends(Sha1, _super);\r\n    function Sha1() {\r\n        var _this = _super.call(this) || this;\r\n        /**\r\n         * Holds the previous values of accumulated variables a-e in the compress_\r\n         * function.\r\n         * @type {!Array<number>}\r\n         * @private\r\n         */\r\n        _this.chain_ = [];\r\n        /**\r\n         * A buffer holding the partially computed hash result.\r\n         * @type {!Array<number>}\r\n         * @private\r\n         */\r\n        _this.buf_ = [];\r\n        /**\r\n         * An array of 80 bytes, each a part of the message to be hashed.  Referred to\r\n         * as the message schedule in the docs.\r\n         * @type {!Array<number>}\r\n         * @private\r\n         */\r\n        _this.W_ = [];\r\n        /**\r\n         * Contains data needed to pad messages less than 64 bytes.\r\n         * @type {!Array<number>}\r\n         * @private\r\n         */\r\n        _this.pad_ = [];\r\n        /**\r\n         * @private {number}\r\n         */\r\n        _this.inbuf_ = 0;\r\n        /**\r\n         * @private {number}\r\n         */\r\n        _this.total_ = 0;\r\n        _this.blockSize = 512 / 8;\r\n        _this.pad_[0] = 128;\r\n        for (var i = 1; i < _this.blockSize; ++i) {\r\n            _this.pad_[i] = 0;\r\n        }\r\n        _this.reset();\r\n        return _this;\r\n    }\r\n    Sha1.prototype.reset = function () {\r\n        this.chain_[0] = 0x67452301;\r\n        this.chain_[1] = 0xefcdab89;\r\n        this.chain_[2] = 0x98badcfe;\r\n        this.chain_[3] = 0x10325476;\r\n        this.chain_[4] = 0xc3d2e1f0;\r\n        this.inbuf_ = 0;\r\n        this.total_ = 0;\r\n    };\r\n    /**\r\n     * Internal compress helper function.\r\n     * @param {!Array<number>|!Uint8Array|string} buf Block to compress.\r\n     * @param {number=} opt_offset Offset of the block in the buffer.\r\n     * @private\r\n     */\r\n    Sha1.prototype.compress_ = function (buf, opt_offset) {\r\n        if (!opt_offset) {\r\n            opt_offset = 0;\r\n        }\r\n        var W = this.W_;\r\n        // get 16 big endian words\r\n        if (typeof buf === 'string') {\r\n            for (var i = 0; i < 16; i++) {\r\n                // TODO(user): [bug 8140122] Recent versions of Safari for Mac OS and iOS\r\n                // have a bug that turns the post-increment ++ operator into pre-increment\r\n                // during JIT compilation.  We have code that depends heavily on SHA-1 for\r\n                // correctness and which is affected by this bug, so I've removed all uses\r\n                // of post-increment ++ in which the result value is used.  We can revert\r\n                // this change once the Safari bug\r\n                // (https://bugs.webkit.org/show_bug.cgi?id=109036) has been fixed and\r\n                // most clients have been updated.\r\n                W[i] =\r\n                    (buf.charCodeAt(opt_offset) << 24) |\r\n                        (buf.charCodeAt(opt_offset + 1) << 16) |\r\n                        (buf.charCodeAt(opt_offset + 2) << 8) |\r\n                        buf.charCodeAt(opt_offset + 3);\r\n                opt_offset += 4;\r\n            }\r\n        }\r\n        else {\r\n            for (var i = 0; i < 16; i++) {\r\n                W[i] =\r\n                    (buf[opt_offset] << 24) |\r\n                        (buf[opt_offset + 1] << 16) |\r\n                        (buf[opt_offset + 2] << 8) |\r\n                        buf[opt_offset + 3];\r\n                opt_offset += 4;\r\n            }\r\n        }\r\n        // expand to 80 words\r\n        for (var i = 16; i < 80; i++) {\r\n            var t = W[i - 3] ^ W[i - 8] ^ W[i - 14] ^ W[i - 16];\r\n            W[i] = ((t << 1) | (t >>> 31)) & 0xffffffff;\r\n        }\r\n        var a = this.chain_[0];\r\n        var b = this.chain_[1];\r\n        var c = this.chain_[2];\r\n        var d = this.chain_[3];\r\n        var e = this.chain_[4];\r\n        var f, k;\r\n        // TODO(user): Try to unroll this loop to speed up the computation.\r\n        for (var i = 0; i < 80; i++) {\r\n            if (i < 40) {\r\n                if (i < 20) {\r\n                    f = d ^ (b & (c ^ d));\r\n                    k = 0x5a827999;\r\n                }\r\n                else {\r\n                    f = b ^ c ^ d;\r\n                    k = 0x6ed9eba1;\r\n                }\r\n            }\r\n            else {\r\n                if (i < 60) {\r\n                    f = (b & c) | (d & (b | c));\r\n                    k = 0x8f1bbcdc;\r\n                }\r\n                else {\r\n                    f = b ^ c ^ d;\r\n                    k = 0xca62c1d6;\r\n                }\r\n            }\r\n            var t = (((a << 5) | (a >>> 27)) + f + e + k + W[i]) & 0xffffffff;\r\n            e = d;\r\n            d = c;\r\n            c = ((b << 30) | (b >>> 2)) & 0xffffffff;\r\n            b = a;\r\n            a = t;\r\n        }\r\n        this.chain_[0] = (this.chain_[0] + a) & 0xffffffff;\r\n        this.chain_[1] = (this.chain_[1] + b) & 0xffffffff;\r\n        this.chain_[2] = (this.chain_[2] + c) & 0xffffffff;\r\n        this.chain_[3] = (this.chain_[3] + d) & 0xffffffff;\r\n        this.chain_[4] = (this.chain_[4] + e) & 0xffffffff;\r\n    };\r\n    Sha1.prototype.update = function (bytes, opt_length) {\r\n        // TODO(johnlenz): tighten the function signature and remove this check\r\n        if (bytes == null) {\r\n            return;\r\n        }\r\n        if (opt_length === undefined) {\r\n            opt_length = bytes.length;\r\n        }\r\n        var lengthMinusBlock = opt_length - this.blockSize;\r\n        var n = 0;\r\n        // Using local instead of member variables gives ~5% speedup on Firefox 16.\r\n        var buf = this.buf_;\r\n        var inbuf = this.inbuf_;\r\n        // The outer while loop should execute at most twice.\r\n        while (n < opt_length) {\r\n            // When we have no data in the block to top up, we can directly process the\r\n            // input buffer (assuming it contains sufficient data). This gives ~25%\r\n            // speedup on Chrome 23 and ~15% speedup on Firefox 16, but requires that\r\n            // the data is provided in large chunks (or in multiples of 64 bytes).\r\n            if (inbuf == 0) {\r\n                while (n <= lengthMinusBlock) {\r\n                    this.compress_(bytes, n);\r\n                    n += this.blockSize;\r\n                }\r\n            }\r\n            if (typeof bytes === 'string') {\r\n                while (n < opt_length) {\r\n                    buf[inbuf] = bytes.charCodeAt(n);\r\n                    ++inbuf;\r\n                    ++n;\r\n                    if (inbuf == this.blockSize) {\r\n                        this.compress_(buf);\r\n                        inbuf = 0;\r\n                        // Jump to the outer loop so we use the full-block optimization.\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n            else {\r\n                while (n < opt_length) {\r\n                    buf[inbuf] = bytes[n];\r\n                    ++inbuf;\r\n                    ++n;\r\n                    if (inbuf == this.blockSize) {\r\n                        this.compress_(buf);\r\n                        inbuf = 0;\r\n                        // Jump to the outer loop so we use the full-block optimization.\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        this.inbuf_ = inbuf;\r\n        this.total_ += opt_length;\r\n    };\r\n    /** @override */\r\n    Sha1.prototype.digest = function () {\r\n        var digest = [];\r\n        var totalBits = this.total_ * 8;\r\n        // Add pad 0x80 0x00*.\r\n        if (this.inbuf_ < 56) {\r\n            this.update(this.pad_, 56 - this.inbuf_);\r\n        }\r\n        else {\r\n            this.update(this.pad_, this.blockSize - (this.inbuf_ - 56));\r\n        }\r\n        // Add # bits.\r\n        for (var i = this.blockSize - 1; i >= 56; i--) {\r\n            this.buf_[i] = totalBits & 255;\r\n            totalBits /= 256; // Don't use bit-shifting here!\r\n        }\r\n        this.compress_(this.buf_);\r\n        var n = 0;\r\n        for (var i = 0; i < 5; i++) {\r\n            for (var j = 24; j >= 0; j -= 8) {\r\n                digest[n] = (this.chain_[i] >> j) & 255;\r\n                ++n;\r\n            }\r\n        }\r\n        return digest;\r\n    };\r\n    return Sha1;\r\n}(Hash));\n\n/**\r\n * Helper to make a Subscribe function (just like Promise helps make a\r\n * Thenable).\r\n *\r\n * @param executor Function which can make calls to a single Observer\r\n *     as a proxy.\r\n * @param onNoObservers Callback when count of Observers goes to zero.\r\n */\r\nfunction createSubscribe(executor, onNoObservers) {\r\n    var proxy = new ObserverProxy(executor, onNoObservers);\r\n    return proxy.subscribe.bind(proxy);\r\n}\r\n/**\r\n * Implement fan-out for any number of Observers attached via a subscribe\r\n * function.\r\n */\r\nvar ObserverProxy = /** @class */ (function () {\r\n    /**\r\n     * @param executor Function which can make calls to a single Observer\r\n     *     as a proxy.\r\n     * @param onNoObservers Callback when count of Observers goes to zero.\r\n     */\r\n    function ObserverProxy(executor, onNoObservers) {\r\n        var _this = this;\r\n        this.observers = [];\r\n        this.unsubscribes = [];\r\n        this.observerCount = 0;\r\n        // Micro-task scheduling by calling task.then().\r\n        this.task = Promise.resolve();\r\n        this.finalized = false;\r\n        this.onNoObservers = onNoObservers;\r\n        // Call the executor asynchronously so subscribers that are called\r\n        // synchronously after the creation of the subscribe function\r\n        // can still receive the very first value generated in the executor.\r\n        this.task\r\n            .then(function () {\r\n            executor(_this);\r\n        })\r\n            .catch(function (e) {\r\n            _this.error(e);\r\n        });\r\n    }\r\n    ObserverProxy.prototype.next = function (value) {\r\n        this.forEachObserver(function (observer) {\r\n            observer.next(value);\r\n        });\r\n    };\r\n    ObserverProxy.prototype.error = function (error) {\r\n        this.forEachObserver(function (observer) {\r\n            observer.error(error);\r\n        });\r\n        this.close(error);\r\n    };\r\n    ObserverProxy.prototype.complete = function () {\r\n        this.forEachObserver(function (observer) {\r\n            observer.complete();\r\n        });\r\n        this.close();\r\n    };\r\n    /**\r\n     * Subscribe function that can be used to add an Observer to the fan-out list.\r\n     *\r\n     * - We require that no event is sent to a subscriber sychronously to their\r\n     *   call to subscribe().\r\n     */\r\n    ObserverProxy.prototype.subscribe = function (nextOrObserver, error, complete) {\r\n        var _this = this;\r\n        var observer;\r\n        if (nextOrObserver === undefined &&\r\n            error === undefined &&\r\n            complete === undefined) {\r\n            throw new Error('Missing Observer.');\r\n        }\r\n        // Assemble an Observer object when passed as callback functions.\r\n        if (implementsAnyMethods(nextOrObserver, ['next', 'error', 'complete'])) {\r\n            observer = nextOrObserver;\r\n        }\r\n        else {\r\n            observer = {\r\n                next: nextOrObserver,\r\n                error: error,\r\n                complete: complete\r\n            };\r\n        }\r\n        if (observer.next === undefined) {\r\n            observer.next = noop;\r\n        }\r\n        if (observer.error === undefined) {\r\n            observer.error = noop;\r\n        }\r\n        if (observer.complete === undefined) {\r\n            observer.complete = noop;\r\n        }\r\n        var unsub = this.unsubscribeOne.bind(this, this.observers.length);\r\n        // Attempt to subscribe to a terminated Observable - we\r\n        // just respond to the Observer with the final error or complete\r\n        // event.\r\n        if (this.finalized) {\r\n            this.task.then(function () {\r\n                try {\r\n                    if (_this.finalError) {\r\n                        observer.error(_this.finalError);\r\n                    }\r\n                    else {\r\n                        observer.complete();\r\n                    }\r\n                }\r\n                catch (e) {\r\n                    // nothing\r\n                }\r\n                return;\r\n            });\r\n        }\r\n        this.observers.push(observer);\r\n        return unsub;\r\n    };\r\n    // Unsubscribe is synchronous - we guarantee that no events are sent to\r\n    // any unsubscribed Observer.\r\n    ObserverProxy.prototype.unsubscribeOne = function (i) {\r\n        if (this.observers === undefined || this.observers[i] === undefined) {\r\n            return;\r\n        }\r\n        delete this.observers[i];\r\n        this.observerCount -= 1;\r\n        if (this.observerCount === 0 && this.onNoObservers !== undefined) {\r\n            this.onNoObservers(this);\r\n        }\r\n    };\r\n    ObserverProxy.prototype.forEachObserver = function (fn) {\r\n        if (this.finalized) {\r\n            // Already closed by previous event....just eat the additional values.\r\n            return;\r\n        }\r\n        // Since sendOne calls asynchronously - there is no chance that\r\n        // this.observers will become undefined.\r\n        for (var i = 0; i < this.observers.length; i++) {\r\n            this.sendOne(i, fn);\r\n        }\r\n    };\r\n    // Call the Observer via one of it's callback function. We are careful to\r\n    // confirm that the observe has not been unsubscribed since this asynchronous\r\n    // function had been queued.\r\n    ObserverProxy.prototype.sendOne = function (i, fn) {\r\n        var _this = this;\r\n        // Execute the callback asynchronously\r\n        this.task.then(function () {\r\n            if (_this.observers !== undefined && _this.observers[i] !== undefined) {\r\n                try {\r\n                    fn(_this.observers[i]);\r\n                }\r\n                catch (e) {\r\n                    // Ignore exceptions raised in Observers or missing methods of an\r\n                    // Observer.\r\n                    // Log error to console. b/31404806\r\n                    if (typeof console !== 'undefined' && console.error) {\r\n                        console.error(e);\r\n                    }\r\n                }\r\n            }\r\n        });\r\n    };\r\n    ObserverProxy.prototype.close = function (err) {\r\n        var _this = this;\r\n        if (this.finalized) {\r\n            return;\r\n        }\r\n        this.finalized = true;\r\n        if (err !== undefined) {\r\n            this.finalError = err;\r\n        }\r\n        // Proxy is no longer needed - garbage collect references\r\n        this.task.then(function () {\r\n            _this.observers = undefined;\r\n            _this.onNoObservers = undefined;\r\n        });\r\n    };\r\n    return ObserverProxy;\r\n}());\r\n/** Turn synchronous function into one called asynchronously. */\r\nfunction async(fn, onError) {\r\n    return function () {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        Promise.resolve(true)\r\n            .then(function () {\r\n            fn.apply(void 0, args);\r\n        })\r\n            .catch(function (error) {\r\n            if (onError) {\r\n                onError(error);\r\n            }\r\n        });\r\n    };\r\n}\r\n/**\r\n * Return true if the object passed in implements any of the named methods.\r\n */\r\nfunction implementsAnyMethods(obj, methods) {\r\n    if (typeof obj !== 'object' || obj === null) {\r\n        return false;\r\n    }\r\n    for (var _i = 0, methods_1 = methods; _i < methods_1.length; _i++) {\r\n        var method = methods_1[_i];\r\n        if (method in obj && typeof obj[method] === 'function') {\r\n            return true;\r\n        }\r\n    }\r\n    return false;\r\n}\r\nfunction noop() {\r\n    // do nothing\r\n}\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Check to make sure the appropriate number of arguments are provided for a public function.\r\n * Throws an error if it fails.\r\n *\r\n * @param {!string} fnName The function name\r\n * @param {!number} minCount The minimum number of arguments to allow for the function call\r\n * @param {!number} maxCount The maximum number of argument to allow for the function call\r\n * @param {!number} argCount The actual number of arguments provided.\r\n */\r\nvar validateArgCount = function (fnName, minCount, maxCount, argCount) {\r\n    var argError;\r\n    if (argCount < minCount) {\r\n        argError = 'at least ' + minCount;\r\n    }\r\n    else if (argCount > maxCount) {\r\n        argError = maxCount === 0 ? 'none' : 'no more than ' + maxCount;\r\n    }\r\n    if (argError) {\r\n        var error = fnName +\r\n            ' failed: Was called with ' +\r\n            argCount +\r\n            (argCount === 1 ? ' argument.' : ' arguments.') +\r\n            ' Expects ' +\r\n            argError +\r\n            '.';\r\n        throw new Error(error);\r\n    }\r\n};\r\n/**\r\n * Generates a string to prefix an error message about failed argument validation\r\n *\r\n * @param {!string} fnName The function name\r\n * @param {!number} argumentNumber The index of the argument\r\n * @param {boolean} optional Whether or not the argument is optional\r\n * @return {!string} The prefix to add to the error thrown for validation.\r\n */\r\nfunction errorPrefix(fnName, argumentNumber, optional) {\r\n    var argName = '';\r\n    switch (argumentNumber) {\r\n        case 1:\r\n            argName = optional ? 'first' : 'First';\r\n            break;\r\n        case 2:\r\n            argName = optional ? 'second' : 'Second';\r\n            break;\r\n        case 3:\r\n            argName = optional ? 'third' : 'Third';\r\n            break;\r\n        case 4:\r\n            argName = optional ? 'fourth' : 'Fourth';\r\n            break;\r\n        default:\r\n            throw new Error('errorPrefix called with argumentNumber > 4.  Need to update it?');\r\n    }\r\n    var error = fnName + ' failed: ';\r\n    error += argName + ' argument ';\r\n    return error;\r\n}\r\n/**\r\n * @param {!string} fnName\r\n * @param {!number} argumentNumber\r\n * @param {!string} namespace\r\n * @param {boolean} optional\r\n */\r\nfunction validateNamespace(fnName, argumentNumber, namespace, optional) {\r\n    if (optional && !namespace)\r\n        return;\r\n    if (typeof namespace !== 'string') {\r\n        //TODO: I should do more validation here. We only allow certain chars in namespaces.\r\n        throw new Error(errorPrefix(fnName, argumentNumber, optional) +\r\n            'must be a valid firebase namespace.');\r\n    }\r\n}\r\nfunction validateCallback(fnName, argumentNumber, callback, optional) {\r\n    if (optional && !callback)\r\n        return;\r\n    if (typeof callback !== 'function')\r\n        throw new Error(errorPrefix(fnName, argumentNumber, optional) +\r\n            'must be a valid function.');\r\n}\r\nfunction validateContextObject(fnName, argumentNumber, context, optional) {\r\n    if (optional && !context)\r\n        return;\r\n    if (typeof context !== 'object' || context === null)\r\n        throw new Error(errorPrefix(fnName, argumentNumber, optional) +\r\n            'must be a valid context object.');\r\n}\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n// Code originally came from goog.crypt.stringToUtf8ByteArray, but for some reason they\r\n// automatically replaced '\\r\\n' with '\\n', and they didn't handle surrogate pairs,\r\n// so it's been modified.\r\n// Note that not all Unicode characters appear as single characters in JavaScript strings.\r\n// fromCharCode returns the UTF-16 encoding of a character - so some Unicode characters\r\n// use 2 characters in Javascript.  All 4-byte UTF-8 characters begin with a first\r\n// character in the range 0xD800 - 0xDBFF (the first character of a so-called surrogate\r\n// pair).\r\n// See http://www.ecma-international.org/ecma-262/5.1/#sec-15.1.3\r\n/**\r\n * @param {string} str\r\n * @return {Array}\r\n */\r\nvar stringToByteArray$1 = function (str) {\r\n    var out = [], p = 0;\r\n    for (var i = 0; i < str.length; i++) {\r\n        var c = str.charCodeAt(i);\r\n        // Is this the lead surrogate in a surrogate pair?\r\n        if (c >= 0xd800 && c <= 0xdbff) {\r\n            var high = c - 0xd800; // the high 10 bits.\r\n            i++;\r\n            assert(i < str.length, 'Surrogate pair missing trail surrogate.');\r\n            var low = str.charCodeAt(i) - 0xdc00; // the low 10 bits.\r\n            c = 0x10000 + (high << 10) + low;\r\n        }\r\n        if (c < 128) {\r\n            out[p++] = c;\r\n        }\r\n        else if (c < 2048) {\r\n            out[p++] = (c >> 6) | 192;\r\n            out[p++] = (c & 63) | 128;\r\n        }\r\n        else if (c < 65536) {\r\n            out[p++] = (c >> 12) | 224;\r\n            out[p++] = ((c >> 6) & 63) | 128;\r\n            out[p++] = (c & 63) | 128;\r\n        }\r\n        else {\r\n            out[p++] = (c >> 18) | 240;\r\n            out[p++] = ((c >> 12) & 63) | 128;\r\n            out[p++] = ((c >> 6) & 63) | 128;\r\n            out[p++] = (c & 63) | 128;\r\n        }\r\n    }\r\n    return out;\r\n};\r\n/**\r\n * Calculate length without actually converting; useful for doing cheaper validation.\r\n * @param {string} str\r\n * @return {number}\r\n */\r\nvar stringLength = function (str) {\r\n    var p = 0;\r\n    for (var i = 0; i < str.length; i++) {\r\n        var c = str.charCodeAt(i);\r\n        if (c < 128) {\r\n            p++;\r\n        }\r\n        else if (c < 2048) {\r\n            p += 2;\r\n        }\r\n        else if (c >= 0xd800 && c <= 0xdbff) {\r\n            // Lead surrogate of a surrogate pair.  The pair together will take 4 bytes to represent.\r\n            p += 4;\r\n            i++; // skip trail surrogate.\r\n        }\r\n        else {\r\n            p += 3;\r\n        }\r\n    }\r\n    return p;\r\n};\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\nexports.assert = assert;\nexports.assertionError = assertionError;\nexports.base64 = base64;\nexports.base64Decode = base64Decode;\nexports.base64Encode = base64Encode;\nexports.CONSTANTS = CONSTANTS;\nexports.deepCopy = deepCopy;\nexports.deepExtend = deepExtend;\nexports.patchProperty = patchProperty;\nexports.Deferred = Deferred;\nexports.getUA = getUA;\nexports.isMobileCordova = isMobileCordova;\nexports.isNodeSdk = isNodeSdk;\nexports.isReactNative = isReactNative;\nexports.ErrorFactory = ErrorFactory;\nexports.FirebaseError = FirebaseError;\nexports.patchCapture = patchCapture;\nexports.jsonEval = jsonEval;\nexports.stringify = stringify;\nexports.decode = decode;\nexports.isAdmin = isAdmin;\nexports.issuedAtTime = issuedAtTime;\nexports.isValidFormat = isValidFormat;\nexports.isValidTimestamp = isValidTimestamp;\nexports.clone = clone;\nexports.contains = contains;\nexports.every = every;\nexports.extend = extend;\nexports.findKey = findKey;\nexports.findValue = findValue;\nexports.forEach = forEach;\nexports.getAnyKey = getAnyKey;\nexports.getCount = getCount;\nexports.getValues = getValues;\nexports.isEmpty = isEmpty;\nexports.isNonNullObject = isNonNullObject;\nexports.map = map;\nexports.safeGet = safeGet;\nexports.querystring = querystring;\nexports.querystringDecode = querystringDecode;\nexports.Sha1 = Sha1;\nexports.async = async;\nexports.createSubscribe = createSubscribe;\nexports.errorPrefix = errorPrefix;\nexports.validateArgCount = validateArgCount;\nexports.validateCallback = validateCallback;\nexports.validateContextObject = validateContextObject;\nexports.validateNamespace = validateNamespace;\nexports.stringLength = stringLength;\nexports.stringToByteArray = stringToByteArray$1;\n\n\n/***/ }),\n/* 11 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony export (immutable) */ __webpack_exports__[\"__extends\"] = __extends;\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__assign\", function() { return __assign; });\n/* harmony export (immutable) */ __webpack_exports__[\"__rest\"] = __rest;\n/* harmony export (immutable) */ __webpack_exports__[\"__decorate\"] = __decorate;\n/* harmony export (immutable) */ __webpack_exports__[\"__param\"] = __param;\n/* harmony export (immutable) */ __webpack_exports__[\"__metadata\"] = __metadata;\n/* harmony export (immutable) */ __webpack_exports__[\"__awaiter\"] = __awaiter;\n/* harmony export (immutable) */ __webpack_exports__[\"__generator\"] = __generator;\n/* harmony export (immutable) */ __webpack_exports__[\"__exportStar\"] = __exportStar;\n/* harmony export (immutable) */ __webpack_exports__[\"__values\"] = __values;\n/* harmony export (immutable) */ __webpack_exports__[\"__read\"] = __read;\n/* harmony export (immutable) */ __webpack_exports__[\"__spread\"] = __spread;\n/* harmony export (immutable) */ __webpack_exports__[\"__await\"] = __await;\n/* harmony export (immutable) */ __webpack_exports__[\"__asyncGenerator\"] = __asyncGenerator;\n/* harmony export (immutable) */ __webpack_exports__[\"__asyncDelegator\"] = __asyncDelegator;\n/* harmony export (immutable) */ __webpack_exports__[\"__asyncValues\"] = __asyncValues;\n/* harmony export (immutable) */ __webpack_exports__[\"__makeTemplateObject\"] = __makeTemplateObject;\n/* harmony export (immutable) */ __webpack_exports__[\"__importStar\"] = __importStar;\n/* harmony export (immutable) */ __webpack_exports__[\"__importDefault\"] = __importDefault;\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = Object.setPrototypeOf ||\r\n    ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n    function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n\r\nfunction __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nvar __assign = Object.assign || function __assign(t) {\r\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n        s = arguments[i];\r\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n    }\r\n    return t;\r\n}\r\n\r\nfunction __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)\r\n            t[p[i]] = s[p[i]];\r\n    return t;\r\n}\r\n\r\nfunction __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nfunction __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nfunction __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nfunction __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nfunction __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = y[op[0] & 2 ? \"return\" : op[0] ? \"throw\" : \"next\"]) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [0, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nfunction __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nfunction __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nfunction __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nfunction __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nfunction __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nfunction __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r);  }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nfunction __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { if (o[n]) i[n] = function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; }; }\r\n}\r\n\r\nfunction __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator];\r\n    return m ? m.call(o) : typeof __values === \"function\" ? __values(o) : o[Symbol.iterator]();\r\n}\r\n\r\nfunction __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nfunction __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nfunction __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\n\n/***/ }),\n/* 12 */\n/***/ (function(module, exports, __webpack_require__) {\n\n__webpack_require__(13);\nmodule.exports = __webpack_require__(18);\n\n\n/***/ }),\n/* 13 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n// @remove-on-eject-begin\n/**\n * Copyright (c) 2015-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n// @remove-on-eject-end\n\n\nif (typeof Promise === 'undefined') {\n  // Rejection tracking prevents a common issue where React gets into an\n  // inconsistent state due to an error, but it gets swallowed by a Promise,\n  // and the user has no idea what causes React's erratic future behavior.\n  __webpack_require__(14).enable();\n  window.Promise = __webpack_require__(16);\n}\n\n// fetch() polyfill for making API calls.\n__webpack_require__(17);\n\n// Object.assign() is commonly used with React.\n// It will use the native implementation if it's present and isn't buggy.\nObject.assign = __webpack_require__(2);\n\n// In tests, polyfill requestAnimationFrame since jsdom doesn't provide it yet.\n// We don't polyfill it in the browser--this is user's responsibility.\nif (false) {\n  require('raf').polyfill(global);\n}\n\n\n/***/ }),\n/* 14 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar Promise = __webpack_require__(3);\n\nvar DEFAULT_WHITELIST = [\n  ReferenceError,\n  TypeError,\n  RangeError\n];\n\nvar enabled = false;\nexports.disable = disable;\nfunction disable() {\n  enabled = false;\n  Promise._47 = null;\n  Promise._71 = null;\n}\n\nexports.enable = enable;\nfunction enable(options) {\n  options = options || {};\n  if (enabled) disable();\n  enabled = true;\n  var id = 0;\n  var displayId = 0;\n  var rejections = {};\n  Promise._47 = function (promise) {\n    if (\n      promise._83 === 2 && // IS REJECTED\n      rejections[promise._56]\n    ) {\n      if (rejections[promise._56].logged) {\n        onHandled(promise._56);\n      } else {\n        clearTimeout(rejections[promise._56].timeout);\n      }\n      delete rejections[promise._56];\n    }\n  };\n  Promise._71 = function (promise, err) {\n    if (promise._75 === 0) { // not yet handled\n      promise._56 = id++;\n      rejections[promise._56] = {\n        displayId: null,\n        error: err,\n        timeout: setTimeout(\n          onUnhandled.bind(null, promise._56),\n          // For reference errors and type errors, this almost always\n          // means the programmer made a mistake, so log them after just\n          // 100ms\n          // otherwise, wait 2 seconds to see if they get handled\n          matchWhitelist(err, DEFAULT_WHITELIST)\n            ? 100\n            : 2000\n        ),\n        logged: false\n      };\n    }\n  };\n  function onUnhandled(id) {\n    if (\n      options.allRejections ||\n      matchWhitelist(\n        rejections[id].error,\n        options.whitelist || DEFAULT_WHITELIST\n      )\n    ) {\n      rejections[id].displayId = displayId++;\n      if (options.onUnhandled) {\n        rejections[id].logged = true;\n        options.onUnhandled(\n          rejections[id].displayId,\n          rejections[id].error\n        );\n      } else {\n        rejections[id].logged = true;\n        logError(\n          rejections[id].displayId,\n          rejections[id].error\n        );\n      }\n    }\n  }\n  function onHandled(id) {\n    if (rejections[id].logged) {\n      if (options.onHandled) {\n        options.onHandled(rejections[id].displayId, rejections[id].error);\n      } else if (!rejections[id].onUnhandled) {\n        console.warn(\n          'Promise Rejection Handled (id: ' + rejections[id].displayId + '):'\n        );\n        console.warn(\n          '  This means you can ignore any previous messages of the form \"Possible Unhandled Promise Rejection\" with id ' +\n          rejections[id].displayId + '.'\n        );\n      }\n    }\n  }\n}\n\nfunction logError(id, error) {\n  console.warn('Possible Unhandled Promise Rejection (id: ' + id + '):');\n  var errStr = (error && (error.stack || error)) + '';\n  errStr.split('\\n').forEach(function (line) {\n    console.warn('  ' + line);\n  });\n}\n\nfunction matchWhitelist(error, list) {\n  return list.some(function (cls) {\n    return error instanceof cls;\n  });\n}\n\n/***/ }),\n/* 15 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(global) {\n\n// Use the fastest means possible to execute a task in its own turn, with\n// priority over other events including IO, animation, reflow, and redraw\n// events in browsers.\n//\n// An exception thrown by a task will permanently interrupt the processing of\n// subsequent tasks. The higher level `asap` function ensures that if an\n// exception is thrown by a task, that the task queue will continue flushing as\n// soon as possible, but if you use `rawAsap` directly, you are responsible to\n// either ensure that no exceptions are thrown from your task, or to manually\n// call `rawAsap.requestFlush` if an exception is thrown.\nmodule.exports = rawAsap;\nfunction rawAsap(task) {\n    if (!queue.length) {\n        requestFlush();\n        flushing = true;\n    }\n    // Equivalent to push, but avoids a function call.\n    queue[queue.length] = task;\n}\n\nvar queue = [];\n// Once a flush has been requested, no further calls to `requestFlush` are\n// necessary until the next `flush` completes.\nvar flushing = false;\n// `requestFlush` is an implementation-specific method that attempts to kick\n// off a `flush` event as quickly as possible. `flush` will attempt to exhaust\n// the event queue before yielding to the browser's own event loop.\nvar requestFlush;\n// The position of the next task to execute in the task queue. This is\n// preserved between calls to `flush` so that it can be resumed if\n// a task throws an exception.\nvar index = 0;\n// If a task schedules additional tasks recursively, the task queue can grow\n// unbounded. To prevent memory exhaustion, the task queue will periodically\n// truncate already-completed tasks.\nvar capacity = 1024;\n\n// The flush function processes all tasks that have been scheduled with\n// `rawAsap` unless and until one of those tasks throws an exception.\n// If a task throws an exception, `flush` ensures that its state will remain\n// consistent and will resume where it left off when called again.\n// However, `flush` does not make any arrangements to be called again if an\n// exception is thrown.\nfunction flush() {\n    while (index < queue.length) {\n        var currentIndex = index;\n        // Advance the index before calling the task. This ensures that we will\n        // begin flushing on the next task the task throws an error.\n        index = index + 1;\n        queue[currentIndex].call();\n        // Prevent leaking memory for long chains of recursive calls to `asap`.\n        // If we call `asap` within tasks scheduled by `asap`, the queue will\n        // grow, but to avoid an O(n) walk for every task we execute, we don't\n        // shift tasks off the queue after they have been executed.\n        // Instead, we periodically shift 1024 tasks off the queue.\n        if (index > capacity) {\n            // Manually shift all values starting at the index back to the\n            // beginning of the queue.\n            for (var scan = 0, newLength = queue.length - index; scan < newLength; scan++) {\n                queue[scan] = queue[scan + index];\n            }\n            queue.length -= index;\n            index = 0;\n        }\n    }\n    queue.length = 0;\n    index = 0;\n    flushing = false;\n}\n\n// `requestFlush` is implemented using a strategy based on data collected from\n// every available SauceLabs Selenium web driver worker at time of writing.\n// https://docs.google.com/spreadsheets/d/1mG-5UYGup5qxGdEMWkhP6BWCz053NUb2E1QoUTU16uA/edit#gid=783724593\n\n// Safari 6 and 6.1 for desktop, iPad, and iPhone are the only browsers that\n// have WebKitMutationObserver but not un-prefixed MutationObserver.\n// Must use `global` or `self` instead of `window` to work in both frames and web\n// workers. `global` is a provision of Browserify, Mr, Mrs, or Mop.\n\n/* globals self */\nvar scope = typeof global !== \"undefined\" ? global : self;\nvar BrowserMutationObserver = scope.MutationObserver || scope.WebKitMutationObserver;\n\n// MutationObservers are desirable because they have high priority and work\n// reliably everywhere they are implemented.\n// They are implemented in all modern browsers.\n//\n// - Android 4-4.3\n// - Chrome 26-34\n// - Firefox 14-29\n// - Internet Explorer 11\n// - iPad Safari 6-7.1\n// - iPhone Safari 7-7.1\n// - Safari 6-7\nif (typeof BrowserMutationObserver === \"function\") {\n    requestFlush = makeRequestCallFromMutationObserver(flush);\n\n// MessageChannels are desirable because they give direct access to the HTML\n// task queue, are implemented in Internet Explorer 10, Safari 5.0-1, and Opera\n// 11-12, and in web workers in many engines.\n// Although message channels yield to any queued rendering and IO tasks, they\n// would be better than imposing the 4ms delay of timers.\n// However, they do not work reliably in Internet Explorer or Safari.\n\n// Internet Explorer 10 is the only browser that has setImmediate but does\n// not have MutationObservers.\n// Although setImmediate yields to the browser's renderer, it would be\n// preferrable to falling back to setTimeout since it does not have\n// the minimum 4ms penalty.\n// Unfortunately there appears to be a bug in Internet Explorer 10 Mobile (and\n// Desktop to a lesser extent) that renders both setImmediate and\n// MessageChannel useless for the purposes of ASAP.\n// https://github.com/kriskowal/q/issues/396\n\n// Timers are implemented universally.\n// We fall back to timers in workers in most engines, and in foreground\n// contexts in the following browsers.\n// However, note that even this simple case requires nuances to operate in a\n// broad spectrum of browsers.\n//\n// - Firefox 3-13\n// - Internet Explorer 6-9\n// - iPad Safari 4.3\n// - Lynx 2.8.7\n} else {\n    requestFlush = makeRequestCallFromTimer(flush);\n}\n\n// `requestFlush` requests that the high priority event queue be flushed as\n// soon as possible.\n// This is useful to prevent an error thrown in a task from stalling the event\n// queue if the exception handled by Node.js’s\n// `process.on(\"uncaughtException\")` or by a domain.\nrawAsap.requestFlush = requestFlush;\n\n// To request a high priority event, we induce a mutation observer by toggling\n// the text of a text node between \"1\" and \"-1\".\nfunction makeRequestCallFromMutationObserver(callback) {\n    var toggle = 1;\n    var observer = new BrowserMutationObserver(callback);\n    var node = document.createTextNode(\"\");\n    observer.observe(node, {characterData: true});\n    return function requestCall() {\n        toggle = -toggle;\n        node.data = toggle;\n    };\n}\n\n// The message channel technique was discovered by Malte Ubl and was the\n// original foundation for this library.\n// http://www.nonblocking.io/2011/06/windownexttick.html\n\n// Safari 6.0.5 (at least) intermittently fails to create message ports on a\n// page's first load. Thankfully, this version of Safari supports\n// MutationObservers, so we don't need to fall back in that case.\n\n// function makeRequestCallFromMessageChannel(callback) {\n//     var channel = new MessageChannel();\n//     channel.port1.onmessage = callback;\n//     return function requestCall() {\n//         channel.port2.postMessage(0);\n//     };\n// }\n\n// For reasons explained above, we are also unable to use `setImmediate`\n// under any circumstances.\n// Even if we were, there is another bug in Internet Explorer 10.\n// It is not sufficient to assign `setImmediate` to `requestFlush` because\n// `setImmediate` must be called *by name* and therefore must be wrapped in a\n// closure.\n// Never forget.\n\n// function makeRequestCallFromSetImmediate(callback) {\n//     return function requestCall() {\n//         setImmediate(callback);\n//     };\n// }\n\n// Safari 6.0 has a problem where timers will get lost while the user is\n// scrolling. This problem does not impact ASAP because Safari 6.0 supports\n// mutation observers, so that implementation is used instead.\n// However, if we ever elect to use timers in Safari, the prevalent work-around\n// is to add a scroll event listener that calls for a flush.\n\n// `setTimeout` does not call the passed callback if the delay is less than\n// approximately 7 in web workers in Firefox 8 through 18, and sometimes not\n// even then.\n\nfunction makeRequestCallFromTimer(callback) {\n    return function requestCall() {\n        // We dispatch a timeout with a specified delay of 0 for engines that\n        // can reliably accommodate that request. This will usually be snapped\n        // to a 4 milisecond delay, but once we're flushing, there's no delay\n        // between events.\n        var timeoutHandle = setTimeout(handleTimer, 0);\n        // However, since this timer gets frequently dropped in Firefox\n        // workers, we enlist an interval handle that will try to fire\n        // an event 20 times per second until it succeeds.\n        var intervalHandle = setInterval(handleTimer, 50);\n\n        function handleTimer() {\n            // Whichever timer succeeds will cancel both timers and\n            // execute the callback.\n            clearTimeout(timeoutHandle);\n            clearInterval(intervalHandle);\n            callback();\n        }\n    };\n}\n\n// This is for `asap.js` only.\n// Its name will be periodically randomized to break any code that depends on\n// its existence.\nrawAsap.makeRequestCallFromTimer = makeRequestCallFromTimer;\n\n// ASAP was originally a nextTick shim included in Q. This was factored out\n// into this ASAP package. It was later adapted to RSVP which made further\n// amendments. These decisions, particularly to marginalize MessageChannel and\n// to capture the MutationObserver implementation in a closure, were integrated\n// back into ASAP proper.\n// https://github.com/tildeio/rsvp.js/blob/cddf7232546a9cf858524b75cde6f9edf72620a7/lib/rsvp/asap.js\n\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(1)))\n\n/***/ }),\n/* 16 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n//This file contains the ES6 extensions to the core Promises/A+ API\n\nvar Promise = __webpack_require__(3);\n\nmodule.exports = Promise;\n\n/* Static Functions */\n\nvar TRUE = valuePromise(true);\nvar FALSE = valuePromise(false);\nvar NULL = valuePromise(null);\nvar UNDEFINED = valuePromise(undefined);\nvar ZERO = valuePromise(0);\nvar EMPTYSTRING = valuePromise('');\n\nfunction valuePromise(value) {\n  var p = new Promise(Promise._44);\n  p._83 = 1;\n  p._18 = value;\n  return p;\n}\nPromise.resolve = function (value) {\n  if (value instanceof Promise) return value;\n\n  if (value === null) return NULL;\n  if (value === undefined) return UNDEFINED;\n  if (value === true) return TRUE;\n  if (value === false) return FALSE;\n  if (value === 0) return ZERO;\n  if (value === '') return EMPTYSTRING;\n\n  if (typeof value === 'object' || typeof value === 'function') {\n    try {\n      var then = value.then;\n      if (typeof then === 'function') {\n        return new Promise(then.bind(value));\n      }\n    } catch (ex) {\n      return new Promise(function (resolve, reject) {\n        reject(ex);\n      });\n    }\n  }\n  return valuePromise(value);\n};\n\nPromise.all = function (arr) {\n  var args = Array.prototype.slice.call(arr);\n\n  return new Promise(function (resolve, reject) {\n    if (args.length === 0) return resolve([]);\n    var remaining = args.length;\n    function res(i, val) {\n      if (val && (typeof val === 'object' || typeof val === 'function')) {\n        if (val instanceof Promise && val.then === Promise.prototype.then) {\n          while (val._83 === 3) {\n            val = val._18;\n          }\n          if (val._83 === 1) return res(i, val._18);\n          if (val._83 === 2) reject(val._18);\n          val.then(function (val) {\n            res(i, val);\n          }, reject);\n          return;\n        } else {\n          var then = val.then;\n          if (typeof then === 'function') {\n            var p = new Promise(then.bind(val));\n            p.then(function (val) {\n              res(i, val);\n            }, reject);\n            return;\n          }\n        }\n      }\n      args[i] = val;\n      if (--remaining === 0) {\n        resolve(args);\n      }\n    }\n    for (var i = 0; i < args.length; i++) {\n      res(i, args[i]);\n    }\n  });\n};\n\nPromise.reject = function (value) {\n  return new Promise(function (resolve, reject) {\n    reject(value);\n  });\n};\n\nPromise.race = function (values) {\n  return new Promise(function (resolve, reject) {\n    values.forEach(function(value){\n      Promise.resolve(value).then(resolve, reject);\n    });\n  });\n};\n\n/* Prototype Methods */\n\nPromise.prototype['catch'] = function (onRejected) {\n  return this.then(null, onRejected);\n};\n\n\n/***/ }),\n/* 17 */\n/***/ (function(module, exports) {\n\n(function(self) {\n  'use strict';\n\n  if (self.fetch) {\n    return\n  }\n\n  var support = {\n    searchParams: 'URLSearchParams' in self,\n    iterable: 'Symbol' in self && 'iterator' in Symbol,\n    blob: 'FileReader' in self && 'Blob' in self && (function() {\n      try {\n        new Blob()\n        return true\n      } catch(e) {\n        return false\n      }\n    })(),\n    formData: 'FormData' in self,\n    arrayBuffer: 'ArrayBuffer' in self\n  }\n\n  if (support.arrayBuffer) {\n    var viewClasses = [\n      '[object Int8Array]',\n      '[object Uint8Array]',\n      '[object Uint8ClampedArray]',\n      '[object Int16Array]',\n      '[object Uint16Array]',\n      '[object Int32Array]',\n      '[object Uint32Array]',\n      '[object Float32Array]',\n      '[object Float64Array]'\n    ]\n\n    var isDataView = function(obj) {\n      return obj && DataView.prototype.isPrototypeOf(obj)\n    }\n\n    var isArrayBufferView = ArrayBuffer.isView || function(obj) {\n      return obj && viewClasses.indexOf(Object.prototype.toString.call(obj)) > -1\n    }\n  }\n\n  function normalizeName(name) {\n    if (typeof name !== 'string') {\n      name = String(name)\n    }\n    if (/[^a-z0-9\\-#$%&'*+.\\^_`|~]/i.test(name)) {\n      throw new TypeError('Invalid character in header field name')\n    }\n    return name.toLowerCase()\n  }\n\n  function normalizeValue(value) {\n    if (typeof value !== 'string') {\n      value = String(value)\n    }\n    return value\n  }\n\n  // Build a destructive iterator for the value list\n  function iteratorFor(items) {\n    var iterator = {\n      next: function() {\n        var value = items.shift()\n        return {done: value === undefined, value: value}\n      }\n    }\n\n    if (support.iterable) {\n      iterator[Symbol.iterator] = function() {\n        return iterator\n      }\n    }\n\n    return iterator\n  }\n\n  function Headers(headers) {\n    this.map = {}\n\n    if (headers instanceof Headers) {\n      headers.forEach(function(value, name) {\n        this.append(name, value)\n      }, this)\n    } else if (Array.isArray(headers)) {\n      headers.forEach(function(header) {\n        this.append(header[0], header[1])\n      }, this)\n    } else if (headers) {\n      Object.getOwnPropertyNames(headers).forEach(function(name) {\n        this.append(name, headers[name])\n      }, this)\n    }\n  }\n\n  Headers.prototype.append = function(name, value) {\n    name = normalizeName(name)\n    value = normalizeValue(value)\n    var oldValue = this.map[name]\n    this.map[name] = oldValue ? oldValue+','+value : value\n  }\n\n  Headers.prototype['delete'] = function(name) {\n    delete this.map[normalizeName(name)]\n  }\n\n  Headers.prototype.get = function(name) {\n    name = normalizeName(name)\n    return this.has(name) ? this.map[name] : null\n  }\n\n  Headers.prototype.has = function(name) {\n    return this.map.hasOwnProperty(normalizeName(name))\n  }\n\n  Headers.prototype.set = function(name, value) {\n    this.map[normalizeName(name)] = normalizeValue(value)\n  }\n\n  Headers.prototype.forEach = function(callback, thisArg) {\n    for (var name in this.map) {\n      if (this.map.hasOwnProperty(name)) {\n        callback.call(thisArg, this.map[name], name, this)\n      }\n    }\n  }\n\n  Headers.prototype.keys = function() {\n    var items = []\n    this.forEach(function(value, name) { items.push(name) })\n    return iteratorFor(items)\n  }\n\n  Headers.prototype.values = function() {\n    var items = []\n    this.forEach(function(value) { items.push(value) })\n    return iteratorFor(items)\n  }\n\n  Headers.prototype.entries = function() {\n    var items = []\n    this.forEach(function(value, name) { items.push([name, value]) })\n    return iteratorFor(items)\n  }\n\n  if (support.iterable) {\n    Headers.prototype[Symbol.iterator] = Headers.prototype.entries\n  }\n\n  function consumed(body) {\n    if (body.bodyUsed) {\n      return Promise.reject(new TypeError('Already read'))\n    }\n    body.bodyUsed = true\n  }\n\n  function fileReaderReady(reader) {\n    return new Promise(function(resolve, reject) {\n      reader.onload = function() {\n        resolve(reader.result)\n      }\n      reader.onerror = function() {\n        reject(reader.error)\n      }\n    })\n  }\n\n  function readBlobAsArrayBuffer(blob) {\n    var reader = new FileReader()\n    var promise = fileReaderReady(reader)\n    reader.readAsArrayBuffer(blob)\n    return promise\n  }\n\n  function readBlobAsText(blob) {\n    var reader = new FileReader()\n    var promise = fileReaderReady(reader)\n    reader.readAsText(blob)\n    return promise\n  }\n\n  function readArrayBufferAsText(buf) {\n    var view = new Uint8Array(buf)\n    var chars = new Array(view.length)\n\n    for (var i = 0; i < view.length; i++) {\n      chars[i] = String.fromCharCode(view[i])\n    }\n    return chars.join('')\n  }\n\n  function bufferClone(buf) {\n    if (buf.slice) {\n      return buf.slice(0)\n    } else {\n      var view = new Uint8Array(buf.byteLength)\n      view.set(new Uint8Array(buf))\n      return view.buffer\n    }\n  }\n\n  function Body() {\n    this.bodyUsed = false\n\n    this._initBody = function(body) {\n      this._bodyInit = body\n      if (!body) {\n        this._bodyText = ''\n      } else if (typeof body === 'string') {\n        this._bodyText = body\n      } else if (support.blob && Blob.prototype.isPrototypeOf(body)) {\n        this._bodyBlob = body\n      } else if (support.formData && FormData.prototype.isPrototypeOf(body)) {\n        this._bodyFormData = body\n      } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n        this._bodyText = body.toString()\n      } else if (support.arrayBuffer && support.blob && isDataView(body)) {\n        this._bodyArrayBuffer = bufferClone(body.buffer)\n        // IE 10-11 can't handle a DataView body.\n        this._bodyInit = new Blob([this._bodyArrayBuffer])\n      } else if (support.arrayBuffer && (ArrayBuffer.prototype.isPrototypeOf(body) || isArrayBufferView(body))) {\n        this._bodyArrayBuffer = bufferClone(body)\n      } else {\n        throw new Error('unsupported BodyInit type')\n      }\n\n      if (!this.headers.get('content-type')) {\n        if (typeof body === 'string') {\n          this.headers.set('content-type', 'text/plain;charset=UTF-8')\n        } else if (this._bodyBlob && this._bodyBlob.type) {\n          this.headers.set('content-type', this._bodyBlob.type)\n        } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n          this.headers.set('content-type', 'application/x-www-form-urlencoded;charset=UTF-8')\n        }\n      }\n    }\n\n    if (support.blob) {\n      this.blob = function() {\n        var rejected = consumed(this)\n        if (rejected) {\n          return rejected\n        }\n\n        if (this._bodyBlob) {\n          return Promise.resolve(this._bodyBlob)\n        } else if (this._bodyArrayBuffer) {\n          return Promise.resolve(new Blob([this._bodyArrayBuffer]))\n        } else if (this._bodyFormData) {\n          throw new Error('could not read FormData body as blob')\n        } else {\n          return Promise.resolve(new Blob([this._bodyText]))\n        }\n      }\n\n      this.arrayBuffer = function() {\n        if (this._bodyArrayBuffer) {\n          return consumed(this) || Promise.resolve(this._bodyArrayBuffer)\n        } else {\n          return this.blob().then(readBlobAsArrayBuffer)\n        }\n      }\n    }\n\n    this.text = function() {\n      var rejected = consumed(this)\n      if (rejected) {\n        return rejected\n      }\n\n      if (this._bodyBlob) {\n        return readBlobAsText(this._bodyBlob)\n      } else if (this._bodyArrayBuffer) {\n        return Promise.resolve(readArrayBufferAsText(this._bodyArrayBuffer))\n      } else if (this._bodyFormData) {\n        throw new Error('could not read FormData body as text')\n      } else {\n        return Promise.resolve(this._bodyText)\n      }\n    }\n\n    if (support.formData) {\n      this.formData = function() {\n        return this.text().then(decode)\n      }\n    }\n\n    this.json = function() {\n      return this.text().then(JSON.parse)\n    }\n\n    return this\n  }\n\n  // HTTP methods whose capitalization should be normalized\n  var methods = ['DELETE', 'GET', 'HEAD', 'OPTIONS', 'POST', 'PUT']\n\n  function normalizeMethod(method) {\n    var upcased = method.toUpperCase()\n    return (methods.indexOf(upcased) > -1) ? upcased : method\n  }\n\n  function Request(input, options) {\n    options = options || {}\n    var body = options.body\n\n    if (input instanceof Request) {\n      if (input.bodyUsed) {\n        throw new TypeError('Already read')\n      }\n      this.url = input.url\n      this.credentials = input.credentials\n      if (!options.headers) {\n        this.headers = new Headers(input.headers)\n      }\n      this.method = input.method\n      this.mode = input.mode\n      if (!body && input._bodyInit != null) {\n        body = input._bodyInit\n        input.bodyUsed = true\n      }\n    } else {\n      this.url = String(input)\n    }\n\n    this.credentials = options.credentials || this.credentials || 'omit'\n    if (options.headers || !this.headers) {\n      this.headers = new Headers(options.headers)\n    }\n    this.method = normalizeMethod(options.method || this.method || 'GET')\n    this.mode = options.mode || this.mode || null\n    this.referrer = null\n\n    if ((this.method === 'GET' || this.method === 'HEAD') && body) {\n      throw new TypeError('Body not allowed for GET or HEAD requests')\n    }\n    this._initBody(body)\n  }\n\n  Request.prototype.clone = function() {\n    return new Request(this, { body: this._bodyInit })\n  }\n\n  function decode(body) {\n    var form = new FormData()\n    body.trim().split('&').forEach(function(bytes) {\n      if (bytes) {\n        var split = bytes.split('=')\n        var name = split.shift().replace(/\\+/g, ' ')\n        var value = split.join('=').replace(/\\+/g, ' ')\n        form.append(decodeURIComponent(name), decodeURIComponent(value))\n      }\n    })\n    return form\n  }\n\n  function parseHeaders(rawHeaders) {\n    var headers = new Headers()\n    rawHeaders.split(/\\r?\\n/).forEach(function(line) {\n      var parts = line.split(':')\n      var key = parts.shift().trim()\n      if (key) {\n        var value = parts.join(':').trim()\n        headers.append(key, value)\n      }\n    })\n    return headers\n  }\n\n  Body.call(Request.prototype)\n\n  function Response(bodyInit, options) {\n    if (!options) {\n      options = {}\n    }\n\n    this.type = 'default'\n    this.status = 'status' in options ? options.status : 200\n    this.ok = this.status >= 200 && this.status < 300\n    this.statusText = 'statusText' in options ? options.statusText : 'OK'\n    this.headers = new Headers(options.headers)\n    this.url = options.url || ''\n    this._initBody(bodyInit)\n  }\n\n  Body.call(Response.prototype)\n\n  Response.prototype.clone = function() {\n    return new Response(this._bodyInit, {\n      status: this.status,\n      statusText: this.statusText,\n      headers: new Headers(this.headers),\n      url: this.url\n    })\n  }\n\n  Response.error = function() {\n    var response = new Response(null, {status: 0, statusText: ''})\n    response.type = 'error'\n    return response\n  }\n\n  var redirectStatuses = [301, 302, 303, 307, 308]\n\n  Response.redirect = function(url, status) {\n    if (redirectStatuses.indexOf(status) === -1) {\n      throw new RangeError('Invalid status code')\n    }\n\n    return new Response(null, {status: status, headers: {location: url}})\n  }\n\n  self.Headers = Headers\n  self.Request = Request\n  self.Response = Response\n\n  self.fetch = function(input, init) {\n    return new Promise(function(resolve, reject) {\n      var request = new Request(input, init)\n      var xhr = new XMLHttpRequest()\n\n      xhr.onload = function() {\n        var options = {\n          status: xhr.status,\n          statusText: xhr.statusText,\n          headers: parseHeaders(xhr.getAllResponseHeaders() || '')\n        }\n        options.url = 'responseURL' in xhr ? xhr.responseURL : options.headers.get('X-Request-URL')\n        var body = 'response' in xhr ? xhr.response : xhr.responseText\n        resolve(new Response(body, options))\n      }\n\n      xhr.onerror = function() {\n        reject(new TypeError('Network request failed'))\n      }\n\n      xhr.ontimeout = function() {\n        reject(new TypeError('Network request failed'))\n      }\n\n      xhr.open(request.method, request.url, true)\n\n      if (request.credentials === 'include') {\n        xhr.withCredentials = true\n      }\n\n      if ('responseType' in xhr && support.blob) {\n        xhr.responseType = 'blob'\n      }\n\n      request.headers.forEach(function(value, name) {\n        xhr.setRequestHeader(name, value)\n      })\n\n      xhr.send(typeof request._bodyInit === 'undefined' ? null : request._bodyInit)\n    })\n  }\n  self.fetch.polyfill = true\n})(typeof self !== 'undefined' ? self : this);\n\n\n/***/ }),\n/* 18 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_react__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_react_dom__ = __webpack_require__(20);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_react_dom___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_react_dom__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__index_css__ = __webpack_require__(28);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__index_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2__index_css__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__App__ = __webpack_require__(29);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__registerServiceWorker__ = __webpack_require__(48);\n__WEBPACK_IMPORTED_MODULE_1_react_dom___default.a.render(__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_3__App__[\"a\" /* default */],null),document.getElementById('root'));Object(__WEBPACK_IMPORTED_MODULE_4__registerServiceWorker__[\"a\" /* default */])();\n\n/***/ }),\n/* 19 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/** @license React v16.4.0\n * react.production.min.js\n *\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar k=__webpack_require__(2),n=__webpack_require__(4),p=__webpack_require__(5),q=__webpack_require__(6),r=\"function\"===typeof Symbol&&Symbol.for,t=r?Symbol.for(\"react.element\"):60103,u=r?Symbol.for(\"react.portal\"):60106,v=r?Symbol.for(\"react.fragment\"):60107,w=r?Symbol.for(\"react.strict_mode\"):60108,x=r?Symbol.for(\"react.profiler\"):60114,y=r?Symbol.for(\"react.provider\"):60109,z=r?Symbol.for(\"react.context\"):60110,A=r?Symbol.for(\"react.async_mode\"):60111,B=\nr?Symbol.for(\"react.forward_ref\"):60112;r&&Symbol.for(\"react.timeout\");var C=\"function\"===typeof Symbol&&Symbol.iterator;function D(a){for(var b=arguments.length-1,e=\"https://reactjs.org/docs/error-decoder.html?invariant=\"+a,c=0;c<b;c++)e+=\"&args[]=\"+encodeURIComponent(arguments[c+1]);n(!1,\"Minified React error #\"+a+\"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. \",e)}\nvar E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}};function F(a,b,e){this.props=a;this.context=b;this.refs=p;this.updater=e||E}F.prototype.isReactComponent={};F.prototype.setState=function(a,b){\"object\"!==typeof a&&\"function\"!==typeof a&&null!=a?D(\"85\"):void 0;this.updater.enqueueSetState(this,a,b,\"setState\")};F.prototype.forceUpdate=function(a){this.updater.enqueueForceUpdate(this,a,\"forceUpdate\")};function G(){}\nG.prototype=F.prototype;function H(a,b,e){this.props=a;this.context=b;this.refs=p;this.updater=e||E}var I=H.prototype=new G;I.constructor=H;k(I,F.prototype);I.isPureReactComponent=!0;var J={current:null},K=Object.prototype.hasOwnProperty,L={key:!0,ref:!0,__self:!0,__source:!0};\nfunction M(a,b,e){var c=void 0,d={},g=null,h=null;if(null!=b)for(c in void 0!==b.ref&&(h=b.ref),void 0!==b.key&&(g=\"\"+b.key),b)K.call(b,c)&&!L.hasOwnProperty(c)&&(d[c]=b[c]);var f=arguments.length-2;if(1===f)d.children=e;else if(1<f){for(var l=Array(f),m=0;m<f;m++)l[m]=arguments[m+2];d.children=l}if(a&&a.defaultProps)for(c in f=a.defaultProps,f)void 0===d[c]&&(d[c]=f[c]);return{$$typeof:t,type:a,key:g,ref:h,props:d,_owner:J.current}}\nfunction N(a){return\"object\"===typeof a&&null!==a&&a.$$typeof===t}function escape(a){var b={\"=\":\"=0\",\":\":\"=2\"};return\"$\"+(\"\"+a).replace(/[=:]/g,function(a){return b[a]})}var O=/\\/+/g,P=[];function Q(a,b,e,c){if(P.length){var d=P.pop();d.result=a;d.keyPrefix=b;d.func=e;d.context=c;d.count=0;return d}return{result:a,keyPrefix:b,func:e,context:c,count:0}}function R(a){a.result=null;a.keyPrefix=null;a.func=null;a.context=null;a.count=0;10>P.length&&P.push(a)}\nfunction S(a,b,e,c){var d=typeof a;if(\"undefined\"===d||\"boolean\"===d)a=null;var g=!1;if(null===a)g=!0;else switch(d){case \"string\":case \"number\":g=!0;break;case \"object\":switch(a.$$typeof){case t:case u:g=!0}}if(g)return e(c,a,\"\"===b?\".\"+T(a,0):b),1;g=0;b=\"\"===b?\".\":b+\":\";if(Array.isArray(a))for(var h=0;h<a.length;h++){d=a[h];var f=b+T(d,h);g+=S(d,f,e,c)}else if(null===a||\"undefined\"===typeof a?f=null:(f=C&&a[C]||a[\"@@iterator\"],f=\"function\"===typeof f?f:null),\"function\"===typeof f)for(a=f.call(a),\nh=0;!(d=a.next()).done;)d=d.value,f=b+T(d,h++),g+=S(d,f,e,c);else\"object\"===d&&(e=\"\"+a,D(\"31\",\"[object Object]\"===e?\"object with keys {\"+Object.keys(a).join(\", \")+\"}\":e,\"\"));return g}function T(a,b){return\"object\"===typeof a&&null!==a&&null!=a.key?escape(a.key):b.toString(36)}function U(a,b){a.func.call(a.context,b,a.count++)}\nfunction V(a,b,e){var c=a.result,d=a.keyPrefix;a=a.func.call(a.context,b,a.count++);Array.isArray(a)?W(a,c,e,q.thatReturnsArgument):null!=a&&(N(a)&&(b=d+(!a.key||b&&b.key===a.key?\"\":(\"\"+a.key).replace(O,\"$&/\")+\"/\")+e,a={$$typeof:t,type:a.type,key:b,ref:a.ref,props:a.props,_owner:a._owner}),c.push(a))}function W(a,b,e,c,d){var g=\"\";null!=e&&(g=(\"\"+e).replace(O,\"$&/\")+\"/\");b=Q(b,g,c,d);null==a||S(a,\"\",V,b);R(b)}\nvar X={Children:{map:function(a,b,e){if(null==a)return a;var c=[];W(a,c,null,b,e);return c},forEach:function(a,b,e){if(null==a)return a;b=Q(null,null,b,e);null==a||S(a,\"\",U,b);R(b)},count:function(a){return null==a?0:S(a,\"\",q.thatReturnsNull,null)},toArray:function(a){var b=[];W(a,b,null,q.thatReturnsArgument);return b},only:function(a){N(a)?void 0:D(\"143\");return a}},createRef:function(){return{current:null}},Component:F,PureComponent:H,createContext:function(a,b){void 0===b&&(b=null);a={$$typeof:z,\n_calculateChangedBits:b,_defaultValue:a,_currentValue:a,_currentValue2:a,_changedBits:0,_changedBits2:0,Provider:null,Consumer:null};a.Provider={$$typeof:y,_context:a};return a.Consumer=a},forwardRef:function(a){return{$$typeof:B,render:a}},Fragment:v,StrictMode:w,unstable_AsyncMode:A,unstable_Profiler:x,createElement:M,cloneElement:function(a,b,e){null===a||void 0===a?D(\"267\",a):void 0;var c=void 0,d=k({},a.props),g=a.key,h=a.ref,f=a._owner;if(null!=b){void 0!==b.ref&&(h=b.ref,f=J.current);void 0!==\nb.key&&(g=\"\"+b.key);var l=void 0;a.type&&a.type.defaultProps&&(l=a.type.defaultProps);for(c in b)K.call(b,c)&&!L.hasOwnProperty(c)&&(d[c]=void 0===b[c]&&void 0!==l?l[c]:b[c])}c=arguments.length-2;if(1===c)d.children=e;else if(1<c){l=Array(c);for(var m=0;m<c;m++)l[m]=arguments[m+2];d.children=l}return{$$typeof:t,type:a.type,key:g,ref:h,props:d,_owner:f}},createFactory:function(a){var b=M.bind(null,a);b.type=a;return b},isValidElement:N,version:\"16.4.0\",__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{ReactCurrentOwner:J,\nassign:k}},Y={default:X},Z=Y&&X||Y;module.exports=Z.default?Z.default:Z;\n\n\n/***/ }),\n/* 20 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nfunction checkDCE() {\n  /* global __REACT_DEVTOOLS_GLOBAL_HOOK__ */\n  if (\n    typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ === 'undefined' ||\n    typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE !== 'function'\n  ) {\n    return;\n  }\n  if (false) {\n    // This branch is unreachable because this function is only called\n    // in production, but the condition is true only in development.\n    // Therefore if the branch is still here, dead code elimination wasn't\n    // properly applied.\n    // Don't change the message. React DevTools relies on it. Also make sure\n    // this message doesn't occur elsewhere in this function, or it will cause\n    // a false positive.\n    throw new Error('^_^');\n  }\n  try {\n    // Verify that the code above has been dead code eliminated (DCE'd).\n    __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE);\n  } catch (err) {\n    // DevTools shouldn't crash React, no matter what.\n    // We should still report in case we break this code.\n    console.error(err);\n  }\n}\n\nif (true) {\n  // DCE check should happen before ReactDOM bundle executes so that\n  // DevTools can report bad minification during injection.\n  checkDCE();\n  module.exports = __webpack_require__(21);\n} else {\n  module.exports = require('./cjs/react-dom.development.js');\n}\n\n\n/***/ }),\n/* 21 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/** @license React v16.4.0\n * react-dom.production.min.js\n *\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n/*\n Modernizr 3.0.0pre (Custom Build) | MIT\n*/\nvar aa=__webpack_require__(4),ca=__webpack_require__(0),m=__webpack_require__(22),p=__webpack_require__(2),v=__webpack_require__(6),da=__webpack_require__(23),ea=__webpack_require__(24),fa=__webpack_require__(25),ha=__webpack_require__(5);\nfunction A(a){for(var b=arguments.length-1,c=\"https://reactjs.org/docs/error-decoder.html?invariant=\"+a,d=0;d<b;d++)c+=\"&args[]=\"+encodeURIComponent(arguments[d+1]);aa(!1,\"Minified React error #\"+a+\"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. \",c)}ca?void 0:A(\"227\");\nfunction ia(a,b,c,d,e,f,g,h,k){this._hasCaughtError=!1;this._caughtError=null;var n=Array.prototype.slice.call(arguments,3);try{b.apply(c,n)}catch(r){this._caughtError=r,this._hasCaughtError=!0}}\nvar B={_caughtError:null,_hasCaughtError:!1,_rethrowError:null,_hasRethrowError:!1,invokeGuardedCallback:function(a,b,c,d,e,f,g,h,k){ia.apply(B,arguments)},invokeGuardedCallbackAndCatchFirstError:function(a,b,c,d,e,f,g,h,k){B.invokeGuardedCallback.apply(this,arguments);if(B.hasCaughtError()){var n=B.clearCaughtError();B._hasRethrowError||(B._hasRethrowError=!0,B._rethrowError=n)}},rethrowCaughtError:function(){return ka.apply(B,arguments)},hasCaughtError:function(){return B._hasCaughtError},clearCaughtError:function(){if(B._hasCaughtError){var a=\nB._caughtError;B._caughtError=null;B._hasCaughtError=!1;return a}A(\"198\")}};function ka(){if(B._hasRethrowError){var a=B._rethrowError;B._rethrowError=null;B._hasRethrowError=!1;throw a;}}var la=null,ma={};\nfunction na(){if(la)for(var a in ma){var b=ma[a],c=la.indexOf(a);-1<c?void 0:A(\"96\",a);if(!oa[c]){b.extractEvents?void 0:A(\"97\",a);oa[c]=b;c=b.eventTypes;for(var d in c){var e=void 0;var f=c[d],g=b,h=d;pa.hasOwnProperty(h)?A(\"99\",h):void 0;pa[h]=f;var k=f.phasedRegistrationNames;if(k){for(e in k)k.hasOwnProperty(e)&&qa(k[e],g,h);e=!0}else f.registrationName?(qa(f.registrationName,g,h),e=!0):e=!1;e?void 0:A(\"98\",d,a)}}}}\nfunction qa(a,b,c){ra[a]?A(\"100\",a):void 0;ra[a]=b;sa[a]=b.eventTypes[c].dependencies}var oa=[],pa={},ra={},sa={};function ta(a){la?A(\"101\"):void 0;la=Array.prototype.slice.call(a);na()}function ua(a){var b=!1,c;for(c in a)if(a.hasOwnProperty(c)){var d=a[c];ma.hasOwnProperty(c)&&ma[c]===d||(ma[c]?A(\"102\",c):void 0,ma[c]=d,b=!0)}b&&na()}\nvar va={plugins:oa,eventNameDispatchConfigs:pa,registrationNameModules:ra,registrationNameDependencies:sa,possibleRegistrationNames:null,injectEventPluginOrder:ta,injectEventPluginsByName:ua},wa=null,xa=null,ya=null;function za(a,b,c,d){b=a.type||\"unknown-event\";a.currentTarget=ya(d);B.invokeGuardedCallbackAndCatchFirstError(b,c,void 0,a);a.currentTarget=null}\nfunction Aa(a,b){null==b?A(\"30\"):void 0;if(null==a)return b;if(Array.isArray(a)){if(Array.isArray(b))return a.push.apply(a,b),a;a.push(b);return a}return Array.isArray(b)?[a].concat(b):[a,b]}function Ba(a,b,c){Array.isArray(a)?a.forEach(b,c):a&&b.call(c,a)}var Ca=null;\nfunction Da(a,b){if(a){var c=a._dispatchListeners,d=a._dispatchInstances;if(Array.isArray(c))for(var e=0;e<c.length&&!a.isPropagationStopped();e++)za(a,b,c[e],d[e]);else c&&za(a,b,c,d);a._dispatchListeners=null;a._dispatchInstances=null;a.isPersistent()||a.constructor.release(a)}}function Ea(a){return Da(a,!0)}function Fa(a){return Da(a,!1)}var Ga={injectEventPluginOrder:ta,injectEventPluginsByName:ua};\nfunction Ha(a,b){var c=a.stateNode;if(!c)return null;var d=wa(c);if(!d)return null;c=d[b];a:switch(b){case \"onClick\":case \"onClickCapture\":case \"onDoubleClick\":case \"onDoubleClickCapture\":case \"onMouseDown\":case \"onMouseDownCapture\":case \"onMouseMove\":case \"onMouseMoveCapture\":case \"onMouseUp\":case \"onMouseUpCapture\":(d=!d.disabled)||(a=a.type,d=!(\"button\"===a||\"input\"===a||\"select\"===a||\"textarea\"===a));a=!d;break a;default:a=!1}if(a)return null;c&&\"function\"!==typeof c?A(\"231\",b,typeof c):void 0;\nreturn c}function Ia(a,b){null!==a&&(Ca=Aa(Ca,a));a=Ca;Ca=null;a&&(b?Ba(a,Ea):Ba(a,Fa),Ca?A(\"95\"):void 0,B.rethrowCaughtError())}function Ja(a,b,c,d){for(var e=null,f=0;f<oa.length;f++){var g=oa[f];g&&(g=g.extractEvents(a,b,c,d))&&(e=Aa(e,g))}Ia(e,!1)}var Ka={injection:Ga,getListener:Ha,runEventsInBatch:Ia,runExtractedEventsInBatch:Ja},La=Math.random().toString(36).slice(2),C=\"__reactInternalInstance$\"+La,Ma=\"__reactEventHandlers$\"+La;\nfunction Na(a){if(a[C])return a[C];for(;!a[C];)if(a.parentNode)a=a.parentNode;else return null;a=a[C];return 5===a.tag||6===a.tag?a:null}function Oa(a){if(5===a.tag||6===a.tag)return a.stateNode;A(\"33\")}function Pa(a){return a[Ma]||null}var Qa={precacheFiberNode:function(a,b){b[C]=a},getClosestInstanceFromNode:Na,getInstanceFromNode:function(a){a=a[C];return!a||5!==a.tag&&6!==a.tag?null:a},getNodeFromInstance:Oa,getFiberCurrentPropsFromNode:Pa,updateFiberProps:function(a,b){a[Ma]=b}};\nfunction F(a){do a=a.return;while(a&&5!==a.tag);return a?a:null}function Ra(a,b,c){for(var d=[];a;)d.push(a),a=F(a);for(a=d.length;0<a--;)b(d[a],\"captured\",c);for(a=0;a<d.length;a++)b(d[a],\"bubbled\",c)}function Sa(a,b,c){if(b=Ha(a,c.dispatchConfig.phasedRegistrationNames[b]))c._dispatchListeners=Aa(c._dispatchListeners,b),c._dispatchInstances=Aa(c._dispatchInstances,a)}function Ta(a){a&&a.dispatchConfig.phasedRegistrationNames&&Ra(a._targetInst,Sa,a)}\nfunction Ua(a){if(a&&a.dispatchConfig.phasedRegistrationNames){var b=a._targetInst;b=b?F(b):null;Ra(b,Sa,a)}}function Va(a,b,c){a&&c&&c.dispatchConfig.registrationName&&(b=Ha(a,c.dispatchConfig.registrationName))&&(c._dispatchListeners=Aa(c._dispatchListeners,b),c._dispatchInstances=Aa(c._dispatchInstances,a))}function Xa(a){a&&a.dispatchConfig.registrationName&&Va(a._targetInst,null,a)}function Ya(a){Ba(a,Ta)}\nfunction Za(a,b,c,d){if(c&&d)a:{var e=c;for(var f=d,g=0,h=e;h;h=F(h))g++;h=0;for(var k=f;k;k=F(k))h++;for(;0<g-h;)e=F(e),g--;for(;0<h-g;)f=F(f),h--;for(;g--;){if(e===f||e===f.alternate)break a;e=F(e);f=F(f)}e=null}else e=null;f=e;for(e=[];c&&c!==f;){g=c.alternate;if(null!==g&&g===f)break;e.push(c);c=F(c)}for(c=[];d&&d!==f;){g=d.alternate;if(null!==g&&g===f)break;c.push(d);d=F(d)}for(d=0;d<e.length;d++)Va(e[d],\"bubbled\",a);for(a=c.length;0<a--;)Va(c[a],\"captured\",b)}\nvar $a={accumulateTwoPhaseDispatches:Ya,accumulateTwoPhaseDispatchesSkipTarget:function(a){Ba(a,Ua)},accumulateEnterLeaveDispatches:Za,accumulateDirectDispatches:function(a){Ba(a,Xa)}};function ab(a,b){var c={};c[a.toLowerCase()]=b.toLowerCase();c[\"Webkit\"+a]=\"webkit\"+b;c[\"Moz\"+a]=\"moz\"+b;c[\"ms\"+a]=\"MS\"+b;c[\"O\"+a]=\"o\"+b.toLowerCase();return c}\nvar bb={animationend:ab(\"Animation\",\"AnimationEnd\"),animationiteration:ab(\"Animation\",\"AnimationIteration\"),animationstart:ab(\"Animation\",\"AnimationStart\"),transitionend:ab(\"Transition\",\"TransitionEnd\")},cb={},db={};m.canUseDOM&&(db=document.createElement(\"div\").style,\"AnimationEvent\"in window||(delete bb.animationend.animation,delete bb.animationiteration.animation,delete bb.animationstart.animation),\"TransitionEvent\"in window||delete bb.transitionend.transition);\nfunction eb(a){if(cb[a])return cb[a];if(!bb[a])return a;var b=bb[a],c;for(c in b)if(b.hasOwnProperty(c)&&c in db)return cb[a]=b[c];return a}var fb=eb(\"animationend\"),gb=eb(\"animationiteration\"),hb=eb(\"animationstart\"),ib=eb(\"transitionend\"),jb=\"abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting\".split(\" \"),kb=null;\nfunction lb(){!kb&&m.canUseDOM&&(kb=\"textContent\"in document.documentElement?\"textContent\":\"innerText\");return kb}var G={_root:null,_startText:null,_fallbackText:null};function mb(){if(G._fallbackText)return G._fallbackText;var a,b=G._startText,c=b.length,d,e=nb(),f=e.length;for(a=0;a<c&&b[a]===e[a];a++);var g=c-a;for(d=1;d<=g&&b[c-d]===e[f-d];d++);G._fallbackText=e.slice(a,1<d?1-d:void 0);return G._fallbackText}function nb(){return\"value\"in G._root?G._root.value:G._root[lb()]}\nvar ob=\"dispatchConfig _targetInst nativeEvent isDefaultPrevented isPropagationStopped _dispatchListeners _dispatchInstances\".split(\" \"),pb={type:null,target:null,currentTarget:v.thatReturnsNull,eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null};\nfunction H(a,b,c,d){this.dispatchConfig=a;this._targetInst=b;this.nativeEvent=c;a=this.constructor.Interface;for(var e in a)a.hasOwnProperty(e)&&((b=a[e])?this[e]=b(c):\"target\"===e?this.target=d:this[e]=c[e]);this.isDefaultPrevented=(null!=c.defaultPrevented?c.defaultPrevented:!1===c.returnValue)?v.thatReturnsTrue:v.thatReturnsFalse;this.isPropagationStopped=v.thatReturnsFalse;return this}\np(H.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():\"unknown\"!==typeof a.returnValue&&(a.returnValue=!1),this.isDefaultPrevented=v.thatReturnsTrue)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():\"unknown\"!==typeof a.cancelBubble&&(a.cancelBubble=!0),this.isPropagationStopped=v.thatReturnsTrue)},persist:function(){this.isPersistent=v.thatReturnsTrue},isPersistent:v.thatReturnsFalse,\ndestructor:function(){var a=this.constructor.Interface,b;for(b in a)this[b]=null;for(a=0;a<ob.length;a++)this[ob[a]]=null}});H.Interface=pb;H.extend=function(a){function b(){}function c(){return d.apply(this,arguments)}var d=this;b.prototype=d.prototype;var e=new b;p(e,c.prototype);c.prototype=e;c.prototype.constructor=c;c.Interface=p({},d.Interface,a);c.extend=d.extend;qb(c);return c};qb(H);\nfunction rb(a,b,c,d){if(this.eventPool.length){var e=this.eventPool.pop();this.call(e,a,b,c,d);return e}return new this(a,b,c,d)}function sb(a){a instanceof this?void 0:A(\"223\");a.destructor();10>this.eventPool.length&&this.eventPool.push(a)}function qb(a){a.eventPool=[];a.getPooled=rb;a.release=sb}var tb=H.extend({data:null}),ub=H.extend({data:null}),vb=[9,13,27,32],wb=m.canUseDOM&&\"CompositionEvent\"in window,xb=null;m.canUseDOM&&\"documentMode\"in document&&(xb=document.documentMode);\nvar yb=m.canUseDOM&&\"TextEvent\"in window&&!xb,zb=m.canUseDOM&&(!wb||xb&&8<xb&&11>=xb),Ab=String.fromCharCode(32),Bb={beforeInput:{phasedRegistrationNames:{bubbled:\"onBeforeInput\",captured:\"onBeforeInputCapture\"},dependencies:[\"compositionend\",\"keypress\",\"textInput\",\"paste\"]},compositionEnd:{phasedRegistrationNames:{bubbled:\"onCompositionEnd\",captured:\"onCompositionEndCapture\"},dependencies:\"blur compositionend keydown keypress keyup mousedown\".split(\" \")},compositionStart:{phasedRegistrationNames:{bubbled:\"onCompositionStart\",\ncaptured:\"onCompositionStartCapture\"},dependencies:\"blur compositionstart keydown keypress keyup mousedown\".split(\" \")},compositionUpdate:{phasedRegistrationNames:{bubbled:\"onCompositionUpdate\",captured:\"onCompositionUpdateCapture\"},dependencies:\"blur compositionupdate keydown keypress keyup mousedown\".split(\" \")}},Cb=!1;\nfunction Db(a,b){switch(a){case \"keyup\":return-1!==vb.indexOf(b.keyCode);case \"keydown\":return 229!==b.keyCode;case \"keypress\":case \"mousedown\":case \"blur\":return!0;default:return!1}}function Eb(a){a=a.detail;return\"object\"===typeof a&&\"data\"in a?a.data:null}var Fb=!1;function Gb(a,b){switch(a){case \"compositionend\":return Eb(b);case \"keypress\":if(32!==b.which)return null;Cb=!0;return Ab;case \"textInput\":return a=b.data,a===Ab&&Cb?null:a;default:return null}}\nfunction Hb(a,b){if(Fb)return\"compositionend\"===a||!wb&&Db(a,b)?(a=mb(),G._root=null,G._startText=null,G._fallbackText=null,Fb=!1,a):null;switch(a){case \"paste\":return null;case \"keypress\":if(!(b.ctrlKey||b.altKey||b.metaKey)||b.ctrlKey&&b.altKey){if(b.char&&1<b.char.length)return b.char;if(b.which)return String.fromCharCode(b.which)}return null;case \"compositionend\":return zb?null:b.data;default:return null}}\nvar Ib={eventTypes:Bb,extractEvents:function(a,b,c,d){var e=void 0;var f=void 0;if(wb)b:{switch(a){case \"compositionstart\":e=Bb.compositionStart;break b;case \"compositionend\":e=Bb.compositionEnd;break b;case \"compositionupdate\":e=Bb.compositionUpdate;break b}e=void 0}else Fb?Db(a,c)&&(e=Bb.compositionEnd):\"keydown\"===a&&229===c.keyCode&&(e=Bb.compositionStart);e?(zb&&(Fb||e!==Bb.compositionStart?e===Bb.compositionEnd&&Fb&&(f=mb()):(G._root=d,G._startText=nb(),Fb=!0)),e=tb.getPooled(e,b,c,d),f?e.data=\nf:(f=Eb(c),null!==f&&(e.data=f)),Ya(e),f=e):f=null;(a=yb?Gb(a,c):Hb(a,c))?(b=ub.getPooled(Bb.beforeInput,b,c,d),b.data=a,Ya(b)):b=null;return null===f?b:null===b?f:[f,b]}},Jb=null,Kb={injectFiberControlledHostComponent:function(a){Jb=a}},Lb=null,Mb=null;function Nb(a){if(a=xa(a)){Jb&&\"function\"===typeof Jb.restoreControlledState?void 0:A(\"194\");var b=wa(a.stateNode);Jb.restoreControlledState(a.stateNode,a.type,b)}}function Ob(a){Lb?Mb?Mb.push(a):Mb=[a]:Lb=a}\nfunction Pb(){return null!==Lb||null!==Mb}function Qb(){if(Lb){var a=Lb,b=Mb;Mb=Lb=null;Nb(a);if(b)for(a=0;a<b.length;a++)Nb(b[a])}}var Rb={injection:Kb,enqueueStateRestore:Ob,needsStateRestore:Pb,restoreStateIfNeeded:Qb};function Sb(a,b){return a(b)}function Tb(a,b,c){return a(b,c)}function Ub(){}var Vb=!1;function Wb(a,b){if(Vb)return a(b);Vb=!0;try{return Sb(a,b)}finally{Vb=!1,Pb()&&(Ub(),Qb())}}\nvar Xb={color:!0,date:!0,datetime:!0,\"datetime-local\":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Yb(a){var b=a&&a.nodeName&&a.nodeName.toLowerCase();return\"input\"===b?!!Xb[a.type]:\"textarea\"===b?!0:!1}function Zb(a){a=a.target||window;a.correspondingUseElement&&(a=a.correspondingUseElement);return 3===a.nodeType?a.parentNode:a}\nfunction $b(a,b){if(!m.canUseDOM||b&&!(\"addEventListener\"in document))return!1;a=\"on\"+a;b=a in document;b||(b=document.createElement(\"div\"),b.setAttribute(a,\"return;\"),b=\"function\"===typeof b[a]);return b}function ac(a){var b=a.type;return(a=a.nodeName)&&\"input\"===a.toLowerCase()&&(\"checkbox\"===b||\"radio\"===b)}\nfunction bc(a){var b=ac(a)?\"checked\":\"value\",c=Object.getOwnPropertyDescriptor(a.constructor.prototype,b),d=\"\"+a[b];if(!a.hasOwnProperty(b)&&\"undefined\"!==typeof c&&\"function\"===typeof c.get&&\"function\"===typeof c.set){var e=c.get,f=c.set;Object.defineProperty(a,b,{configurable:!0,get:function(){return e.call(this)},set:function(a){d=\"\"+a;f.call(this,a)}});Object.defineProperty(a,b,{enumerable:c.enumerable});return{getValue:function(){return d},setValue:function(a){d=\"\"+a},stopTracking:function(){a._valueTracker=\nnull;delete a[b]}}}}function cc(a){a._valueTracker||(a._valueTracker=bc(a))}function dc(a){if(!a)return!1;var b=a._valueTracker;if(!b)return!0;var c=b.getValue();var d=\"\";a&&(d=ac(a)?a.checked?\"true\":\"false\":a.value);a=d;return a!==c?(b.setValue(a),!0):!1}\nvar ec=ca.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,I=\"function\"===typeof Symbol&&Symbol.for,fc=I?Symbol.for(\"react.element\"):60103,gc=I?Symbol.for(\"react.portal\"):60106,hc=I?Symbol.for(\"react.fragment\"):60107,ic=I?Symbol.for(\"react.strict_mode\"):60108,jc=I?Symbol.for(\"react.profiler\"):60114,mc=I?Symbol.for(\"react.provider\"):60109,nc=I?Symbol.for(\"react.context\"):60110,oc=I?Symbol.for(\"react.async_mode\"):60111,pc=I?Symbol.for(\"react.forward_ref\"):60112,qc=I?Symbol.for(\"react.timeout\"):\n60113,rc=\"function\"===typeof Symbol&&Symbol.iterator;function sc(a){if(null===a||\"undefined\"===typeof a)return null;a=rc&&a[rc]||a[\"@@iterator\"];return\"function\"===typeof a?a:null}\nfunction tc(a){var b=a.type;if(\"function\"===typeof b)return b.displayName||b.name;if(\"string\"===typeof b)return b;switch(b){case oc:return\"AsyncMode\";case nc:return\"Context.Consumer\";case hc:return\"ReactFragment\";case gc:return\"ReactPortal\";case jc:return\"Profiler(\"+a.pendingProps.id+\")\";case mc:return\"Context.Provider\";case ic:return\"StrictMode\";case qc:return\"Timeout\"}if(\"object\"===typeof b&&null!==b)switch(b.$$typeof){case pc:return a=b.render.displayName||b.render.name||\"\",\"\"!==a?\"ForwardRef(\"+\na+\")\":\"ForwardRef\"}return null}function vc(a){var b=\"\";do{a:switch(a.tag){case 0:case 1:case 2:case 5:var c=a._debugOwner,d=a._debugSource;var e=tc(a);var f=null;c&&(f=tc(c));c=d;e=\"\\n    in \"+(e||\"Unknown\")+(c?\" (at \"+c.fileName.replace(/^.*[\\\\\\/]/,\"\")+\":\"+c.lineNumber+\")\":f?\" (created by \"+f+\")\":\"\");break a;default:e=\"\"}b+=e;a=a.return}while(a);return b}\nvar wc=/^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$/,xc={},yc={};function zc(a){if(yc.hasOwnProperty(a))return!0;if(xc.hasOwnProperty(a))return!1;if(wc.test(a))return yc[a]=!0;xc[a]=!0;return!1}\nfunction Ac(a,b,c,d){if(null!==c&&0===c.type)return!1;switch(typeof b){case \"function\":case \"symbol\":return!0;case \"boolean\":if(d)return!1;if(null!==c)return!c.acceptsBooleans;a=a.toLowerCase().slice(0,5);return\"data-\"!==a&&\"aria-\"!==a;default:return!1}}function Bc(a,b,c,d){if(null===b||\"undefined\"===typeof b||Ac(a,b,c,d))return!0;if(d)return!1;if(null!==c)switch(c.type){case 3:return!b;case 4:return!1===b;case 5:return isNaN(b);case 6:return isNaN(b)||1>b}return!1}\nfunction J(a,b,c,d,e){this.acceptsBooleans=2===b||3===b||4===b;this.attributeName=d;this.attributeNamespace=e;this.mustUseProperty=c;this.propertyName=a;this.type=b}var K={};\"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style\".split(\" \").forEach(function(a){K[a]=new J(a,0,!1,a,null)});\n[[\"acceptCharset\",\"accept-charset\"],[\"className\",\"class\"],[\"htmlFor\",\"for\"],[\"httpEquiv\",\"http-equiv\"]].forEach(function(a){var b=a[0];K[b]=new J(b,1,!1,a[1],null)});[\"contentEditable\",\"draggable\",\"spellCheck\",\"value\"].forEach(function(a){K[a]=new J(a,2,!1,a.toLowerCase(),null)});[\"autoReverse\",\"externalResourcesRequired\",\"preserveAlpha\"].forEach(function(a){K[a]=new J(a,2,!1,a,null)});\n\"allowFullScreen async autoFocus autoPlay controls default defer disabled formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope\".split(\" \").forEach(function(a){K[a]=new J(a,3,!1,a.toLowerCase(),null)});[\"checked\",\"multiple\",\"muted\",\"selected\"].forEach(function(a){K[a]=new J(a,3,!0,a.toLowerCase(),null)});[\"capture\",\"download\"].forEach(function(a){K[a]=new J(a,4,!1,a.toLowerCase(),null)});\n[\"cols\",\"rows\",\"size\",\"span\"].forEach(function(a){K[a]=new J(a,6,!1,a.toLowerCase(),null)});[\"rowSpan\",\"start\"].forEach(function(a){K[a]=new J(a,5,!1,a.toLowerCase(),null)});var Cc=/[\\-:]([a-z])/g;function Dc(a){return a[1].toUpperCase()}\n\"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height\".split(\" \").forEach(function(a){var b=a.replace(Cc,\nDc);K[b]=new J(b,1,!1,a,null)});\"xlink:actuate xlink:arcrole xlink:href xlink:role xlink:show xlink:title xlink:type\".split(\" \").forEach(function(a){var b=a.replace(Cc,Dc);K[b]=new J(b,1,!1,a,\"http://www.w3.org/1999/xlink\")});[\"xml:base\",\"xml:lang\",\"xml:space\"].forEach(function(a){var b=a.replace(Cc,Dc);K[b]=new J(b,1,!1,a,\"http://www.w3.org/XML/1998/namespace\")});K.tabIndex=new J(\"tabIndex\",1,!1,\"tabindex\",null);\nfunction Ec(a,b,c,d){var e=K.hasOwnProperty(b)?K[b]:null;var f=null!==e?0===e.type:d?!1:!(2<b.length)||\"o\"!==b[0]&&\"O\"!==b[0]||\"n\"!==b[1]&&\"N\"!==b[1]?!1:!0;f||(Bc(b,c,e,d)&&(c=null),d||null===e?zc(b)&&(null===c?a.removeAttribute(b):a.setAttribute(b,\"\"+c)):e.mustUseProperty?a[e.propertyName]=null===c?3===e.type?!1:\"\":c:(b=e.attributeName,d=e.attributeNamespace,null===c?a.removeAttribute(b):(e=e.type,c=3===e||4===e&&!0===c?\"\":\"\"+c,d?a.setAttributeNS(d,b,c):a.setAttribute(b,c))))}\nfunction Fc(a,b){var c=b.checked;return p({},b,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=c?c:a._wrapperState.initialChecked})}function Gc(a,b){var c=null==b.defaultValue?\"\":b.defaultValue,d=null!=b.checked?b.checked:b.defaultChecked;c=Hc(null!=b.value?b.value:c);a._wrapperState={initialChecked:d,initialValue:c,controlled:\"checkbox\"===b.type||\"radio\"===b.type?null!=b.checked:null!=b.value}}function Ic(a,b){b=b.checked;null!=b&&Ec(a,\"checked\",b,!1)}\nfunction Jc(a,b){Ic(a,b);var c=Hc(b.value);if(null!=c)if(\"number\"===b.type){if(0===c&&\"\"===a.value||a.value!=c)a.value=\"\"+c}else a.value!==\"\"+c&&(a.value=\"\"+c);b.hasOwnProperty(\"value\")?Kc(a,b.type,c):b.hasOwnProperty(\"defaultValue\")&&Kc(a,b.type,Hc(b.defaultValue));null==b.checked&&null!=b.defaultChecked&&(a.defaultChecked=!!b.defaultChecked)}\nfunction Lc(a,b){if(b.hasOwnProperty(\"value\")||b.hasOwnProperty(\"defaultValue\"))\"\"===a.value&&(a.value=\"\"+a._wrapperState.initialValue),a.defaultValue=\"\"+a._wrapperState.initialValue;b=a.name;\"\"!==b&&(a.name=\"\");a.defaultChecked=!a.defaultChecked;a.defaultChecked=!a.defaultChecked;\"\"!==b&&(a.name=b)}function Kc(a,b,c){if(\"number\"!==b||a.ownerDocument.activeElement!==a)null==c?a.defaultValue=\"\"+a._wrapperState.initialValue:a.defaultValue!==\"\"+c&&(a.defaultValue=\"\"+c)}\nfunction Hc(a){switch(typeof a){case \"boolean\":case \"number\":case \"object\":case \"string\":case \"undefined\":return a;default:return\"\"}}var Mc={change:{phasedRegistrationNames:{bubbled:\"onChange\",captured:\"onChangeCapture\"},dependencies:\"blur change click focus input keydown keyup selectionchange\".split(\" \")}};function Nc(a,b,c){a=H.getPooled(Mc.change,a,b,c);a.type=\"change\";Ob(c);Ya(a);return a}var Oc=null,Pc=null;function Qc(a){Ia(a,!1)}function Rc(a){var b=Oa(a);if(dc(b))return a}\nfunction Sc(a,b){if(\"change\"===a)return b}var Tc=!1;m.canUseDOM&&(Tc=$b(\"input\")&&(!document.documentMode||9<document.documentMode));function Uc(){Oc&&(Oc.detachEvent(\"onpropertychange\",Vc),Pc=Oc=null)}function Vc(a){\"value\"===a.propertyName&&Rc(Pc)&&(a=Nc(Pc,a,Zb(a)),Wb(Qc,a))}function Wc(a,b,c){\"focus\"===a?(Uc(),Oc=b,Pc=c,Oc.attachEvent(\"onpropertychange\",Vc)):\"blur\"===a&&Uc()}function Xc(a){if(\"selectionchange\"===a||\"keyup\"===a||\"keydown\"===a)return Rc(Pc)}\nfunction Yc(a,b){if(\"click\"===a)return Rc(b)}function Zc(a,b){if(\"input\"===a||\"change\"===a)return Rc(b)}\nvar $c={eventTypes:Mc,_isInputEventSupported:Tc,extractEvents:function(a,b,c,d){var e=b?Oa(b):window,f=void 0,g=void 0,h=e.nodeName&&e.nodeName.toLowerCase();\"select\"===h||\"input\"===h&&\"file\"===e.type?f=Sc:Yb(e)?Tc?f=Zc:(f=Xc,g=Wc):(h=e.nodeName)&&\"input\"===h.toLowerCase()&&(\"checkbox\"===e.type||\"radio\"===e.type)&&(f=Yc);if(f&&(f=f(a,b)))return Nc(f,c,d);g&&g(a,e,b);\"blur\"===a&&null!=b&&(a=b._wrapperState||e._wrapperState)&&a.controlled&&\"number\"===e.type&&Kc(e,\"number\",e.value)}},ad=H.extend({view:null,\ndetail:null}),bd={Alt:\"altKey\",Control:\"ctrlKey\",Meta:\"metaKey\",Shift:\"shiftKey\"};function cd(a){var b=this.nativeEvent;return b.getModifierState?b.getModifierState(a):(a=bd[a])?!!b[a]:!1}function dd(){return cd}\nvar ed=ad.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:dd,button:null,buttons:null,relatedTarget:function(a){return a.relatedTarget||(a.fromElement===a.srcElement?a.toElement:a.fromElement)}}),fd=ed.extend({pointerId:null,width:null,height:null,pressure:null,tiltX:null,tiltY:null,pointerType:null,isPrimary:null}),gd={mouseEnter:{registrationName:\"onMouseEnter\",dependencies:[\"mouseout\",\"mouseover\"]},\nmouseLeave:{registrationName:\"onMouseLeave\",dependencies:[\"mouseout\",\"mouseover\"]},pointerEnter:{registrationName:\"onPointerEnter\",dependencies:[\"pointerout\",\"pointerover\"]},pointerLeave:{registrationName:\"onPointerLeave\",dependencies:[\"pointerout\",\"pointerover\"]}},hd={eventTypes:gd,extractEvents:function(a,b,c,d){var e=\"mouseover\"===a||\"pointerover\"===a,f=\"mouseout\"===a||\"pointerout\"===a;if(e&&(c.relatedTarget||c.fromElement)||!f&&!e)return null;e=d.window===d?d:(e=d.ownerDocument)?e.defaultView||\ne.parentWindow:window;f?(f=b,b=(b=c.relatedTarget||c.toElement)?Na(b):null):f=null;if(f===b)return null;var g=void 0,h=void 0,k=void 0,n=void 0;if(\"mouseout\"===a||\"mouseover\"===a)g=ed,h=gd.mouseLeave,k=gd.mouseEnter,n=\"mouse\";else if(\"pointerout\"===a||\"pointerover\"===a)g=fd,h=gd.pointerLeave,k=gd.pointerEnter,n=\"pointer\";a=null==f?e:Oa(f);e=null==b?e:Oa(b);h=g.getPooled(h,f,c,d);h.type=n+\"leave\";h.target=a;h.relatedTarget=e;c=g.getPooled(k,b,c,d);c.type=n+\"enter\";c.target=e;c.relatedTarget=a;Za(h,\nc,f,b);return[h,c]}};function id(a){var b=a;if(a.alternate)for(;b.return;)b=b.return;else{if(0!==(b.effectTag&2))return 1;for(;b.return;)if(b=b.return,0!==(b.effectTag&2))return 1}return 3===b.tag?2:3}function jd(a){2!==id(a)?A(\"188\"):void 0}\nfunction kd(a){var b=a.alternate;if(!b)return b=id(a),3===b?A(\"188\"):void 0,1===b?null:a;for(var c=a,d=b;;){var e=c.return,f=e?e.alternate:null;if(!e||!f)break;if(e.child===f.child){for(var g=e.child;g;){if(g===c)return jd(e),a;if(g===d)return jd(e),b;g=g.sibling}A(\"188\")}if(c.return!==d.return)c=e,d=f;else{g=!1;for(var h=e.child;h;){if(h===c){g=!0;c=e;d=f;break}if(h===d){g=!0;d=e;c=f;break}h=h.sibling}if(!g){for(h=f.child;h;){if(h===c){g=!0;c=f;d=e;break}if(h===d){g=!0;d=f;c=e;break}h=h.sibling}g?\nvoid 0:A(\"189\")}}c.alternate!==d?A(\"190\"):void 0}3!==c.tag?A(\"188\"):void 0;return c.stateNode.current===c?a:b}function ld(a){a=kd(a);if(!a)return null;for(var b=a;;){if(5===b.tag||6===b.tag)return b;if(b.child)b.child.return=b,b=b.child;else{if(b===a)break;for(;!b.sibling;){if(!b.return||b.return===a)return null;b=b.return}b.sibling.return=b.return;b=b.sibling}}return null}\nfunction md(a){a=kd(a);if(!a)return null;for(var b=a;;){if(5===b.tag||6===b.tag)return b;if(b.child&&4!==b.tag)b.child.return=b,b=b.child;else{if(b===a)break;for(;!b.sibling;){if(!b.return||b.return===a)return null;b=b.return}b.sibling.return=b.return;b=b.sibling}}return null}var nd=H.extend({animationName:null,elapsedTime:null,pseudoElement:null}),od=H.extend({clipboardData:function(a){return\"clipboardData\"in a?a.clipboardData:window.clipboardData}}),pd=ad.extend({relatedTarget:null});\nfunction qd(a){var b=a.keyCode;\"charCode\"in a?(a=a.charCode,0===a&&13===b&&(a=13)):a=b;10===a&&(a=13);return 32<=a||13===a?a:0}\nvar rd={Esc:\"Escape\",Spacebar:\" \",Left:\"ArrowLeft\",Up:\"ArrowUp\",Right:\"ArrowRight\",Down:\"ArrowDown\",Del:\"Delete\",Win:\"OS\",Menu:\"ContextMenu\",Apps:\"ContextMenu\",Scroll:\"ScrollLock\",MozPrintableKey:\"Unidentified\"},sd={8:\"Backspace\",9:\"Tab\",12:\"Clear\",13:\"Enter\",16:\"Shift\",17:\"Control\",18:\"Alt\",19:\"Pause\",20:\"CapsLock\",27:\"Escape\",32:\" \",33:\"PageUp\",34:\"PageDown\",35:\"End\",36:\"Home\",37:\"ArrowLeft\",38:\"ArrowUp\",39:\"ArrowRight\",40:\"ArrowDown\",45:\"Insert\",46:\"Delete\",112:\"F1\",113:\"F2\",114:\"F3\",115:\"F4\",\n116:\"F5\",117:\"F6\",118:\"F7\",119:\"F8\",120:\"F9\",121:\"F10\",122:\"F11\",123:\"F12\",144:\"NumLock\",145:\"ScrollLock\",224:\"Meta\"},td=ad.extend({key:function(a){if(a.key){var b=rd[a.key]||a.key;if(\"Unidentified\"!==b)return b}return\"keypress\"===a.type?(a=qd(a),13===a?\"Enter\":String.fromCharCode(a)):\"keydown\"===a.type||\"keyup\"===a.type?sd[a.keyCode]||\"Unidentified\":\"\"},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:dd,charCode:function(a){return\"keypress\"===\na.type?qd(a):0},keyCode:function(a){return\"keydown\"===a.type||\"keyup\"===a.type?a.keyCode:0},which:function(a){return\"keypress\"===a.type?qd(a):\"keydown\"===a.type||\"keyup\"===a.type?a.keyCode:0}}),ud=ed.extend({dataTransfer:null}),vd=ad.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:dd}),wd=H.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),xd=ed.extend({deltaX:function(a){return\"deltaX\"in a?a.deltaX:\"wheelDeltaX\"in\na?-a.wheelDeltaX:0},deltaY:function(a){return\"deltaY\"in a?a.deltaY:\"wheelDeltaY\"in a?-a.wheelDeltaY:\"wheelDelta\"in a?-a.wheelDelta:0},deltaZ:null,deltaMode:null}),yd=[[\"abort\",\"abort\"],[fb,\"animationEnd\"],[gb,\"animationIteration\"],[hb,\"animationStart\"],[\"canplay\",\"canPlay\"],[\"canplaythrough\",\"canPlayThrough\"],[\"drag\",\"drag\"],[\"dragenter\",\"dragEnter\"],[\"dragexit\",\"dragExit\"],[\"dragleave\",\"dragLeave\"],[\"dragover\",\"dragOver\"],[\"durationchange\",\"durationChange\"],[\"emptied\",\"emptied\"],[\"encrypted\",\"encrypted\"],\n[\"ended\",\"ended\"],[\"error\",\"error\"],[\"gotpointercapture\",\"gotPointerCapture\"],[\"load\",\"load\"],[\"loadeddata\",\"loadedData\"],[\"loadedmetadata\",\"loadedMetadata\"],[\"loadstart\",\"loadStart\"],[\"lostpointercapture\",\"lostPointerCapture\"],[\"mousemove\",\"mouseMove\"],[\"mouseout\",\"mouseOut\"],[\"mouseover\",\"mouseOver\"],[\"playing\",\"playing\"],[\"pointermove\",\"pointerMove\"],[\"pointerout\",\"pointerOut\"],[\"pointerover\",\"pointerOver\"],[\"progress\",\"progress\"],[\"scroll\",\"scroll\"],[\"seeking\",\"seeking\"],[\"stalled\",\"stalled\"],\n[\"suspend\",\"suspend\"],[\"timeupdate\",\"timeUpdate\"],[\"toggle\",\"toggle\"],[\"touchmove\",\"touchMove\"],[ib,\"transitionEnd\"],[\"waiting\",\"waiting\"],[\"wheel\",\"wheel\"]],zd={},Ad={};function Bd(a,b){var c=a[0];a=a[1];var d=\"on\"+(a[0].toUpperCase()+a.slice(1));b={phasedRegistrationNames:{bubbled:d,captured:d+\"Capture\"},dependencies:[c],isInteractive:b};zd[a]=b;Ad[c]=b}\n[[\"blur\",\"blur\"],[\"cancel\",\"cancel\"],[\"click\",\"click\"],[\"close\",\"close\"],[\"contextmenu\",\"contextMenu\"],[\"copy\",\"copy\"],[\"cut\",\"cut\"],[\"dblclick\",\"doubleClick\"],[\"dragend\",\"dragEnd\"],[\"dragstart\",\"dragStart\"],[\"drop\",\"drop\"],[\"focus\",\"focus\"],[\"input\",\"input\"],[\"invalid\",\"invalid\"],[\"keydown\",\"keyDown\"],[\"keypress\",\"keyPress\"],[\"keyup\",\"keyUp\"],[\"mousedown\",\"mouseDown\"],[\"mouseup\",\"mouseUp\"],[\"paste\",\"paste\"],[\"pause\",\"pause\"],[\"play\",\"play\"],[\"pointercancel\",\"pointerCancel\"],[\"pointerdown\",\"pointerDown\"],\n[\"pointerup\",\"pointerUp\"],[\"ratechange\",\"rateChange\"],[\"reset\",\"reset\"],[\"seeked\",\"seeked\"],[\"submit\",\"submit\"],[\"touchcancel\",\"touchCancel\"],[\"touchend\",\"touchEnd\"],[\"touchstart\",\"touchStart\"],[\"volumechange\",\"volumeChange\"]].forEach(function(a){Bd(a,!0)});yd.forEach(function(a){Bd(a,!1)});\nvar Cd={eventTypes:zd,isInteractiveTopLevelEventType:function(a){a=Ad[a];return void 0!==a&&!0===a.isInteractive},extractEvents:function(a,b,c,d){var e=Ad[a];if(!e)return null;switch(a){case \"keypress\":if(0===qd(c))return null;case \"keydown\":case \"keyup\":a=td;break;case \"blur\":case \"focus\":a=pd;break;case \"click\":if(2===c.button)return null;case \"dblclick\":case \"mousedown\":case \"mousemove\":case \"mouseup\":case \"mouseout\":case \"mouseover\":case \"contextmenu\":a=ed;break;case \"drag\":case \"dragend\":case \"dragenter\":case \"dragexit\":case \"dragleave\":case \"dragover\":case \"dragstart\":case \"drop\":a=\nud;break;case \"touchcancel\":case \"touchend\":case \"touchmove\":case \"touchstart\":a=vd;break;case fb:case gb:case hb:a=nd;break;case ib:a=wd;break;case \"scroll\":a=ad;break;case \"wheel\":a=xd;break;case \"copy\":case \"cut\":case \"paste\":a=od;break;case \"gotpointercapture\":case \"lostpointercapture\":case \"pointercancel\":case \"pointerdown\":case \"pointermove\":case \"pointerout\":case \"pointerover\":case \"pointerup\":a=fd;break;default:a=H}b=a.getPooled(e,b,c,d);Ya(b);return b}},Dd=Cd.isInteractiveTopLevelEventType,\nEd=[];function Fd(a){var b=a.targetInst;do{if(!b){a.ancestors.push(b);break}var c;for(c=b;c.return;)c=c.return;c=3!==c.tag?null:c.stateNode.containerInfo;if(!c)break;a.ancestors.push(b);b=Na(c)}while(b);for(c=0;c<a.ancestors.length;c++)b=a.ancestors[c],Ja(a.topLevelType,b,a.nativeEvent,Zb(a.nativeEvent))}var Gd=!0;function Id(a){Gd=!!a}function L(a,b){if(!b)return null;var c=(Dd(a)?Jd:Kd).bind(null,a);b.addEventListener(a,c,!1)}\nfunction Ld(a,b){if(!b)return null;var c=(Dd(a)?Jd:Kd).bind(null,a);b.addEventListener(a,c,!0)}function Jd(a,b){Tb(Kd,a,b)}function Kd(a,b){if(Gd){var c=Zb(b);c=Na(c);null===c||\"number\"!==typeof c.tag||2===id(c)||(c=null);if(Ed.length){var d=Ed.pop();d.topLevelType=a;d.nativeEvent=b;d.targetInst=c;a=d}else a={topLevelType:a,nativeEvent:b,targetInst:c,ancestors:[]};try{Wb(Fd,a)}finally{a.topLevelType=null,a.nativeEvent=null,a.targetInst=null,a.ancestors.length=0,10>Ed.length&&Ed.push(a)}}}\nvar Md={get _enabled(){return Gd},setEnabled:Id,isEnabled:function(){return Gd},trapBubbledEvent:L,trapCapturedEvent:Ld,dispatchEvent:Kd},Nd={},Od=0,Pd=\"_reactListenersID\"+(\"\"+Math.random()).slice(2);function Qd(a){Object.prototype.hasOwnProperty.call(a,Pd)||(a[Pd]=Od++,Nd[a[Pd]]={});return Nd[a[Pd]]}function Rd(a){for(;a&&a.firstChild;)a=a.firstChild;return a}\nfunction Sd(a,b){var c=Rd(a);a=0;for(var d;c;){if(3===c.nodeType){d=a+c.textContent.length;if(a<=b&&d>=b)return{node:c,offset:b-a};a=d}a:{for(;c;){if(c.nextSibling){c=c.nextSibling;break a}c=c.parentNode}c=void 0}c=Rd(c)}}function Td(a){var b=a&&a.nodeName&&a.nodeName.toLowerCase();return b&&(\"input\"===b&&\"text\"===a.type||\"textarea\"===b||\"true\"===a.contentEditable)}\nvar Ud=m.canUseDOM&&\"documentMode\"in document&&11>=document.documentMode,Vd={select:{phasedRegistrationNames:{bubbled:\"onSelect\",captured:\"onSelectCapture\"},dependencies:\"blur contextmenu focus keydown keyup mousedown mouseup selectionchange\".split(\" \")}},Wd=null,Xd=null,Yd=null,Zd=!1;\nfunction $d(a,b){if(Zd||null==Wd||Wd!==da())return null;var c=Wd;\"selectionStart\"in c&&Td(c)?c={start:c.selectionStart,end:c.selectionEnd}:window.getSelection?(c=window.getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}):c=void 0;return Yd&&ea(Yd,c)?null:(Yd=c,a=H.getPooled(Vd.select,Xd,a,b),a.type=\"select\",a.target=Wd,Ya(a),a)}\nvar ae={eventTypes:Vd,extractEvents:function(a,b,c,d){var e=d.window===d?d.document:9===d.nodeType?d:d.ownerDocument,f;if(!(f=!e)){a:{e=Qd(e);f=sa.onSelect;for(var g=0;g<f.length;g++){var h=f[g];if(!e.hasOwnProperty(h)||!e[h]){e=!1;break a}}e=!0}f=!e}if(f)return null;e=b?Oa(b):window;switch(a){case \"focus\":if(Yb(e)||\"true\"===e.contentEditable)Wd=e,Xd=b,Yd=null;break;case \"blur\":Yd=Xd=Wd=null;break;case \"mousedown\":Zd=!0;break;case \"contextmenu\":case \"mouseup\":return Zd=!1,$d(c,d);case \"selectionchange\":if(Ud)break;\ncase \"keydown\":case \"keyup\":return $d(c,d)}return null}};Ga.injectEventPluginOrder(\"ResponderEventPlugin SimpleEventPlugin TapEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin\".split(\" \"));wa=Qa.getFiberCurrentPropsFromNode;xa=Qa.getInstanceFromNode;ya=Qa.getNodeFromInstance;Ga.injectEventPluginsByName({SimpleEventPlugin:Cd,EnterLeaveEventPlugin:hd,ChangeEventPlugin:$c,SelectEventPlugin:ae,BeforeInputEventPlugin:Ib});var be=void 0;\nbe=\"object\"===typeof performance&&\"function\"===typeof performance.now?function(){return performance.now()}:function(){return Date.now()};var ce=void 0,de=void 0;\nif(m.canUseDOM){var ee=[],fe=0,ge={},he=-1,ie=!1,je=!1,ke=0,le=33,me=33,ne={didTimeout:!1,timeRemaining:function(){var a=ke-be();return 0<a?a:0}},oe=function(a,b){if(ge[b])try{a(ne)}finally{delete ge[b]}},pe=\"__reactIdleCallback$\"+Math.random().toString(36).slice(2);window.addEventListener(\"message\",function(a){if(a.source===window&&a.data===pe&&(ie=!1,0!==ee.length)){if(0!==ee.length&&(a=be(),!(-1===he||he>a))){he=-1;ne.didTimeout=!0;for(var b=0,c=ee.length;b<c;b++){var d=ee[b],e=d.timeoutTime;-1!==\ne&&e<=a?oe(d.scheduledCallback,d.callbackId):-1!==e&&(-1===he||e<he)&&(he=e)}}for(a=be();0<ke-a&&0<ee.length;)a=ee.shift(),ne.didTimeout=!1,oe(a.scheduledCallback,a.callbackId),a=be();0<ee.length&&!je&&(je=!0,requestAnimationFrame(qe))}},!1);var qe=function(a){je=!1;var b=a-ke+me;b<me&&le<me?(8>b&&(b=8),me=b<le?le:b):le=b;ke=a+me;ie||(ie=!0,window.postMessage(pe,\"*\"))};ce=function(a,b){var c=-1;null!=b&&\"number\"===typeof b.timeout&&(c=be()+b.timeout);if(-1===he||-1!==c&&c<he)he=c;fe++;b=fe;ee.push({scheduledCallback:a,\ncallbackId:b,timeoutTime:c});ge[b]=!0;je||(je=!0,requestAnimationFrame(qe));return b};de=function(a){delete ge[a]}}else{var re=0,se={};ce=function(a){var b=re++,c=setTimeout(function(){a({timeRemaining:function(){return Infinity},didTimeout:!1})});se[b]=c;return b};de=function(a){var b=se[a];delete se[a];clearTimeout(b)}}function te(a){var b=\"\";ca.Children.forEach(a,function(a){null==a||\"string\"!==typeof a&&\"number\"!==typeof a||(b+=a)});return b}\nfunction ue(a,b){a=p({children:void 0},b);if(b=te(b.children))a.children=b;return a}function ve(a,b,c,d){a=a.options;if(b){b={};for(var e=0;e<c.length;e++)b[\"$\"+c[e]]=!0;for(c=0;c<a.length;c++)e=b.hasOwnProperty(\"$\"+a[c].value),a[c].selected!==e&&(a[c].selected=e),e&&d&&(a[c].defaultSelected=!0)}else{c=\"\"+c;b=null;for(e=0;e<a.length;e++){if(a[e].value===c){a[e].selected=!0;d&&(a[e].defaultSelected=!0);return}null!==b||a[e].disabled||(b=a[e])}null!==b&&(b.selected=!0)}}\nfunction we(a,b){var c=b.value;a._wrapperState={initialValue:null!=c?c:b.defaultValue,wasMultiple:!!b.multiple}}function xe(a,b){null!=b.dangerouslySetInnerHTML?A(\"91\"):void 0;return p({},b,{value:void 0,defaultValue:void 0,children:\"\"+a._wrapperState.initialValue})}function ye(a,b){var c=b.value;null==c&&(c=b.defaultValue,b=b.children,null!=b&&(null!=c?A(\"92\"):void 0,Array.isArray(b)&&(1>=b.length?void 0:A(\"93\"),b=b[0]),c=\"\"+b),null==c&&(c=\"\"));a._wrapperState={initialValue:\"\"+c}}\nfunction ze(a,b){var c=b.value;null!=c&&(c=\"\"+c,c!==a.value&&(a.value=c),null==b.defaultValue&&(a.defaultValue=c));null!=b.defaultValue&&(a.defaultValue=b.defaultValue)}function Ae(a){var b=a.textContent;b===a._wrapperState.initialValue&&(a.value=b)}var Be={html:\"http://www.w3.org/1999/xhtml\",mathml:\"http://www.w3.org/1998/Math/MathML\",svg:\"http://www.w3.org/2000/svg\"};\nfunction Ce(a){switch(a){case \"svg\":return\"http://www.w3.org/2000/svg\";case \"math\":return\"http://www.w3.org/1998/Math/MathML\";default:return\"http://www.w3.org/1999/xhtml\"}}function De(a,b){return null==a||\"http://www.w3.org/1999/xhtml\"===a?Ce(b):\"http://www.w3.org/2000/svg\"===a&&\"foreignObject\"===b?\"http://www.w3.org/1999/xhtml\":a}\nvar Ee=void 0,Fe=function(a){return\"undefined\"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(b,c,d,e){MSApp.execUnsafeLocalFunction(function(){return a(b,c,d,e)})}:a}(function(a,b){if(a.namespaceURI!==Be.svg||\"innerHTML\"in a)a.innerHTML=b;else{Ee=Ee||document.createElement(\"div\");Ee.innerHTML=\"<svg>\"+b+\"</svg>\";for(b=Ee.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;b.firstChild;)a.appendChild(b.firstChild)}});\nfunction Ge(a,b){if(b){var c=a.firstChild;if(c&&c===a.lastChild&&3===c.nodeType){c.nodeValue=b;return}}a.textContent=b}\nvar He={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,\nstopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ie=[\"Webkit\",\"ms\",\"Moz\",\"O\"];Object.keys(He).forEach(function(a){Ie.forEach(function(b){b=b+a.charAt(0).toUpperCase()+a.substring(1);He[b]=He[a]})});\nfunction Je(a,b){a=a.style;for(var c in b)if(b.hasOwnProperty(c)){var d=0===c.indexOf(\"--\");var e=c;var f=b[c];e=null==f||\"boolean\"===typeof f||\"\"===f?\"\":d||\"number\"!==typeof f||0===f||He.hasOwnProperty(e)&&He[e]?(\"\"+f).trim():f+\"px\";\"float\"===c&&(c=\"cssFloat\");d?a.setProperty(c,e):a[c]=e}}var Ke=p({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});\nfunction Le(a,b,c){b&&(Ke[a]&&(null!=b.children||null!=b.dangerouslySetInnerHTML?A(\"137\",a,c()):void 0),null!=b.dangerouslySetInnerHTML&&(null!=b.children?A(\"60\"):void 0,\"object\"===typeof b.dangerouslySetInnerHTML&&\"__html\"in b.dangerouslySetInnerHTML?void 0:A(\"61\")),null!=b.style&&\"object\"!==typeof b.style?A(\"62\",c()):void 0)}\nfunction Me(a,b){if(-1===a.indexOf(\"-\"))return\"string\"===typeof b.is;switch(a){case \"annotation-xml\":case \"color-profile\":case \"font-face\":case \"font-face-src\":case \"font-face-uri\":case \"font-face-format\":case \"font-face-name\":case \"missing-glyph\":return!1;default:return!0}}var Ne=v.thatReturns(\"\");\nfunction Oe(a,b){a=9===a.nodeType||11===a.nodeType?a:a.ownerDocument;var c=Qd(a);b=sa[b];for(var d=0;d<b.length;d++){var e=b[d];if(!c.hasOwnProperty(e)||!c[e]){switch(e){case \"scroll\":Ld(\"scroll\",a);break;case \"focus\":case \"blur\":Ld(\"focus\",a);Ld(\"blur\",a);c.blur=!0;c.focus=!0;break;case \"cancel\":case \"close\":$b(e,!0)&&Ld(e,a);break;case \"invalid\":case \"submit\":case \"reset\":break;default:-1===jb.indexOf(e)&&L(e,a)}c[e]=!0}}}\nfunction Pe(a,b,c,d){c=9===c.nodeType?c:c.ownerDocument;d===Be.html&&(d=Ce(a));d===Be.html?\"script\"===a?(a=c.createElement(\"div\"),a.innerHTML=\"<script>\\x3c/script>\",a=a.removeChild(a.firstChild)):a=\"string\"===typeof b.is?c.createElement(a,{is:b.is}):c.createElement(a):a=c.createElementNS(d,a);return a}function Qe(a,b){return(9===b.nodeType?b:b.ownerDocument).createTextNode(a)}\nfunction Re(a,b,c,d){var e=Me(b,c);switch(b){case \"iframe\":case \"object\":L(\"load\",a);var f=c;break;case \"video\":case \"audio\":for(f=0;f<jb.length;f++)L(jb[f],a);f=c;break;case \"source\":L(\"error\",a);f=c;break;case \"img\":case \"image\":case \"link\":L(\"error\",a);L(\"load\",a);f=c;break;case \"form\":L(\"reset\",a);L(\"submit\",a);f=c;break;case \"details\":L(\"toggle\",a);f=c;break;case \"input\":Gc(a,c);f=Fc(a,c);L(\"invalid\",a);Oe(d,\"onChange\");break;case \"option\":f=ue(a,c);break;case \"select\":we(a,c);f=p({},c,{value:void 0});\nL(\"invalid\",a);Oe(d,\"onChange\");break;case \"textarea\":ye(a,c);f=xe(a,c);L(\"invalid\",a);Oe(d,\"onChange\");break;default:f=c}Le(b,f,Ne);var g=f,h;for(h in g)if(g.hasOwnProperty(h)){var k=g[h];\"style\"===h?Je(a,k,Ne):\"dangerouslySetInnerHTML\"===h?(k=k?k.__html:void 0,null!=k&&Fe(a,k)):\"children\"===h?\"string\"===typeof k?(\"textarea\"!==b||\"\"!==k)&&Ge(a,k):\"number\"===typeof k&&Ge(a,\"\"+k):\"suppressContentEditableWarning\"!==h&&\"suppressHydrationWarning\"!==h&&\"autoFocus\"!==h&&(ra.hasOwnProperty(h)?null!=k&&Oe(d,\nh):null!=k&&Ec(a,h,k,e))}switch(b){case \"input\":cc(a);Lc(a,c);break;case \"textarea\":cc(a);Ae(a,c);break;case \"option\":null!=c.value&&a.setAttribute(\"value\",c.value);break;case \"select\":a.multiple=!!c.multiple;b=c.value;null!=b?ve(a,!!c.multiple,b,!1):null!=c.defaultValue&&ve(a,!!c.multiple,c.defaultValue,!0);break;default:\"function\"===typeof f.onClick&&(a.onclick=v)}}\nfunction Se(a,b,c,d,e){var f=null;switch(b){case \"input\":c=Fc(a,c);d=Fc(a,d);f=[];break;case \"option\":c=ue(a,c);d=ue(a,d);f=[];break;case \"select\":c=p({},c,{value:void 0});d=p({},d,{value:void 0});f=[];break;case \"textarea\":c=xe(a,c);d=xe(a,d);f=[];break;default:\"function\"!==typeof c.onClick&&\"function\"===typeof d.onClick&&(a.onclick=v)}Le(b,d,Ne);b=a=void 0;var g=null;for(a in c)if(!d.hasOwnProperty(a)&&c.hasOwnProperty(a)&&null!=c[a])if(\"style\"===a){var h=c[a];for(b in h)h.hasOwnProperty(b)&&(g||\n(g={}),g[b]=\"\")}else\"dangerouslySetInnerHTML\"!==a&&\"children\"!==a&&\"suppressContentEditableWarning\"!==a&&\"suppressHydrationWarning\"!==a&&\"autoFocus\"!==a&&(ra.hasOwnProperty(a)?f||(f=[]):(f=f||[]).push(a,null));for(a in d){var k=d[a];h=null!=c?c[a]:void 0;if(d.hasOwnProperty(a)&&k!==h&&(null!=k||null!=h))if(\"style\"===a)if(h){for(b in h)!h.hasOwnProperty(b)||k&&k.hasOwnProperty(b)||(g||(g={}),g[b]=\"\");for(b in k)k.hasOwnProperty(b)&&h[b]!==k[b]&&(g||(g={}),g[b]=k[b])}else g||(f||(f=[]),f.push(a,g)),\ng=k;else\"dangerouslySetInnerHTML\"===a?(k=k?k.__html:void 0,h=h?h.__html:void 0,null!=k&&h!==k&&(f=f||[]).push(a,\"\"+k)):\"children\"===a?h===k||\"string\"!==typeof k&&\"number\"!==typeof k||(f=f||[]).push(a,\"\"+k):\"suppressContentEditableWarning\"!==a&&\"suppressHydrationWarning\"!==a&&(ra.hasOwnProperty(a)?(null!=k&&Oe(e,a),f||h===k||(f=[])):(f=f||[]).push(a,k))}g&&(f=f||[]).push(\"style\",g);return f}\nfunction Te(a,b,c,d,e){\"input\"===c&&\"radio\"===e.type&&null!=e.name&&Ic(a,e);Me(c,d);d=Me(c,e);for(var f=0;f<b.length;f+=2){var g=b[f],h=b[f+1];\"style\"===g?Je(a,h,Ne):\"dangerouslySetInnerHTML\"===g?Fe(a,h):\"children\"===g?Ge(a,h):Ec(a,g,h,d)}switch(c){case \"input\":Jc(a,e);break;case \"textarea\":ze(a,e);break;case \"select\":a._wrapperState.initialValue=void 0,b=a._wrapperState.wasMultiple,a._wrapperState.wasMultiple=!!e.multiple,c=e.value,null!=c?ve(a,!!e.multiple,c,!1):b!==!!e.multiple&&(null!=e.defaultValue?\nve(a,!!e.multiple,e.defaultValue,!0):ve(a,!!e.multiple,e.multiple?[]:\"\",!1))}}\nfunction Ue(a,b,c,d,e){switch(b){case \"iframe\":case \"object\":L(\"load\",a);break;case \"video\":case \"audio\":for(d=0;d<jb.length;d++)L(jb[d],a);break;case \"source\":L(\"error\",a);break;case \"img\":case \"image\":case \"link\":L(\"error\",a);L(\"load\",a);break;case \"form\":L(\"reset\",a);L(\"submit\",a);break;case \"details\":L(\"toggle\",a);break;case \"input\":Gc(a,c);L(\"invalid\",a);Oe(e,\"onChange\");break;case \"select\":we(a,c);L(\"invalid\",a);Oe(e,\"onChange\");break;case \"textarea\":ye(a,c),L(\"invalid\",a),Oe(e,\"onChange\")}Le(b,\nc,Ne);d=null;for(var f in c)if(c.hasOwnProperty(f)){var g=c[f];\"children\"===f?\"string\"===typeof g?a.textContent!==g&&(d=[\"children\",g]):\"number\"===typeof g&&a.textContent!==\"\"+g&&(d=[\"children\",\"\"+g]):ra.hasOwnProperty(f)&&null!=g&&Oe(e,f)}switch(b){case \"input\":cc(a);Lc(a,c);break;case \"textarea\":cc(a);Ae(a,c);break;case \"select\":case \"option\":break;default:\"function\"===typeof c.onClick&&(a.onclick=v)}return d}function Ve(a,b){return a.nodeValue!==b}\nvar We={createElement:Pe,createTextNode:Qe,setInitialProperties:Re,diffProperties:Se,updateProperties:Te,diffHydratedProperties:Ue,diffHydratedText:Ve,warnForUnmatchedText:function(){},warnForDeletedHydratableElement:function(){},warnForDeletedHydratableText:function(){},warnForInsertedHydratedElement:function(){},warnForInsertedHydratedText:function(){},restoreControlledState:function(a,b,c){switch(b){case \"input\":Jc(a,c);b=c.name;if(\"radio\"===c.type&&null!=b){for(c=a;c.parentNode;)c=c.parentNode;\nc=c.querySelectorAll(\"input[name=\"+JSON.stringify(\"\"+b)+'][type=\"radio\"]');for(b=0;b<c.length;b++){var d=c[b];if(d!==a&&d.form===a.form){var e=Pa(d);e?void 0:A(\"90\");dc(d);Jc(d,e)}}}break;case \"textarea\":ze(a,c);break;case \"select\":b=c.value,null!=b&&ve(a,!!c.multiple,b,!1)}}},Xe=null,Ye=null;function Ze(a,b){switch(a){case \"button\":case \"input\":case \"select\":case \"textarea\":return!!b.autoFocus}return!1}\nfunction $e(a,b){return\"textarea\"===a||\"string\"===typeof b.children||\"number\"===typeof b.children||\"object\"===typeof b.dangerouslySetInnerHTML&&null!==b.dangerouslySetInnerHTML&&\"string\"===typeof b.dangerouslySetInnerHTML.__html}var af=be,bf=ce,cf=de;function df(a){for(a=a.nextSibling;a&&1!==a.nodeType&&3!==a.nodeType;)a=a.nextSibling;return a}function ef(a){for(a=a.firstChild;a&&1!==a.nodeType&&3!==a.nodeType;)a=a.nextSibling;return a}new Set;var ff=[],gf=-1;function hf(a){return{current:a}}\nfunction M(a){0>gf||(a.current=ff[gf],ff[gf]=null,gf--)}function N(a,b){gf++;ff[gf]=a.current;a.current=b}var jf=hf(ha),O=hf(!1),kf=ha;function lf(a){return mf(a)?kf:jf.current}\nfunction nf(a,b){var c=a.type.contextTypes;if(!c)return ha;var d=a.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===b)return d.__reactInternalMemoizedMaskedChildContext;var e={},f;for(f in c)e[f]=b[f];d&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=b,a.__reactInternalMemoizedMaskedChildContext=e);return e}function mf(a){return 2===a.tag&&null!=a.type.childContextTypes}function of(a){mf(a)&&(M(O,a),M(jf,a))}function pf(a){M(O,a);M(jf,a)}\nfunction qf(a,b,c){jf.current!==ha?A(\"168\"):void 0;N(jf,b,a);N(O,c,a)}function rf(a,b){var c=a.stateNode,d=a.type.childContextTypes;if(\"function\"!==typeof c.getChildContext)return b;c=c.getChildContext();for(var e in c)e in d?void 0:A(\"108\",tc(a)||\"Unknown\",e);return p({},b,c)}function sf(a){if(!mf(a))return!1;var b=a.stateNode;b=b&&b.__reactInternalMemoizedMergedChildContext||ha;kf=jf.current;N(jf,b,a);N(O,O.current,a);return!0}\nfunction tf(a,b){var c=a.stateNode;c?void 0:A(\"169\");if(b){var d=rf(a,kf);c.__reactInternalMemoizedMergedChildContext=d;M(O,a);M(jf,a);N(jf,d,a)}else M(O,a);N(O,b,a)}\nfunction uf(a,b,c,d){this.tag=a;this.key=c;this.sibling=this.child=this.return=this.stateNode=this.type=null;this.index=0;this.ref=null;this.pendingProps=b;this.memoizedState=this.updateQueue=this.memoizedProps=null;this.mode=d;this.effectTag=0;this.lastEffect=this.firstEffect=this.nextEffect=null;this.expirationTime=0;this.alternate=null}\nfunction vf(a,b,c){var d=a.alternate;null===d?(d=new uf(a.tag,b,a.key,a.mode),d.type=a.type,d.stateNode=a.stateNode,d.alternate=a,a.alternate=d):(d.pendingProps=b,d.effectTag=0,d.nextEffect=null,d.firstEffect=null,d.lastEffect=null);d.expirationTime=c;d.child=a.child;d.memoizedProps=a.memoizedProps;d.memoizedState=a.memoizedState;d.updateQueue=a.updateQueue;d.sibling=a.sibling;d.index=a.index;d.ref=a.ref;return d}\nfunction wf(a,b,c){var d=a.type,e=a.key;a=a.props;if(\"function\"===typeof d)var f=d.prototype&&d.prototype.isReactComponent?2:0;else if(\"string\"===typeof d)f=5;else switch(d){case hc:return xf(a.children,b,c,e);case oc:f=11;b|=3;break;case ic:f=11;b|=2;break;case jc:return d=new uf(15,a,e,b|4),d.type=jc,d.expirationTime=c,d;case qc:f=16;b|=2;break;default:a:{switch(\"object\"===typeof d&&null!==d?d.$$typeof:null){case mc:f=13;break a;case nc:f=12;break a;case pc:f=14;break a;default:A(\"130\",null==d?\nd:typeof d,\"\")}f=void 0}}b=new uf(f,a,e,b);b.type=d;b.expirationTime=c;return b}function xf(a,b,c,d){a=new uf(10,a,d,b);a.expirationTime=c;return a}function yf(a,b,c){a=new uf(6,a,null,b);a.expirationTime=c;return a}function zf(a,b,c){b=new uf(4,null!==a.children?a.children:[],a.key,b);b.expirationTime=c;b.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation};return b}\nfunction Af(a,b,c){b=new uf(3,null,null,b?3:0);a={current:b,containerInfo:a,pendingChildren:null,earliestPendingTime:0,latestPendingTime:0,earliestSuspendedTime:0,latestSuspendedTime:0,latestPingedTime:0,pendingCommitExpirationTime:0,finishedWork:null,context:null,pendingContext:null,hydrate:c,remainingExpirationTime:0,firstBatch:null,nextScheduledRoot:null};return b.stateNode=a}var Bf=null,Cf=null;function Df(a){return function(b){try{return a(b)}catch(c){}}}\nfunction Ef(a){if(\"undefined\"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var b=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(b.isDisabled||!b.supportsFiber)return!0;try{var c=b.inject(a);Bf=Df(function(a){return b.onCommitFiberRoot(c,a)});Cf=Df(function(a){return b.onCommitFiberUnmount(c,a)})}catch(d){}return!0}function Ff(a){\"function\"===typeof Bf&&Bf(a)}function Gf(a){\"function\"===typeof Cf&&Cf(a)}var Hf=!1;\nfunction If(a){return{expirationTime:0,baseState:a,firstUpdate:null,lastUpdate:null,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function Jf(a){return{expirationTime:a.expirationTime,baseState:a.baseState,firstUpdate:a.firstUpdate,lastUpdate:a.lastUpdate,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}\nfunction Kf(a){return{expirationTime:a,tag:0,payload:null,callback:null,next:null,nextEffect:null}}function Lf(a,b,c){null===a.lastUpdate?a.firstUpdate=a.lastUpdate=b:(a.lastUpdate.next=b,a.lastUpdate=b);if(0===a.expirationTime||a.expirationTime>c)a.expirationTime=c}\nfunction Mf(a,b,c){var d=a.alternate;if(null===d){var e=a.updateQueue;var f=null;null===e&&(e=a.updateQueue=If(a.memoizedState))}else e=a.updateQueue,f=d.updateQueue,null===e?null===f?(e=a.updateQueue=If(a.memoizedState),f=d.updateQueue=If(d.memoizedState)):e=a.updateQueue=Jf(f):null===f&&(f=d.updateQueue=Jf(e));null===f||e===f?Lf(e,b,c):null===e.lastUpdate||null===f.lastUpdate?(Lf(e,b,c),Lf(f,b,c)):(Lf(e,b,c),f.lastUpdate=b)}\nfunction Nf(a,b,c){var d=a.updateQueue;d=null===d?a.updateQueue=If(a.memoizedState):Of(a,d);null===d.lastCapturedUpdate?d.firstCapturedUpdate=d.lastCapturedUpdate=b:(d.lastCapturedUpdate.next=b,d.lastCapturedUpdate=b);if(0===d.expirationTime||d.expirationTime>c)d.expirationTime=c}function Of(a,b){var c=a.alternate;null!==c&&b===c.updateQueue&&(b=a.updateQueue=Jf(b));return b}\nfunction Pf(a,b,c,d,e,f){switch(c.tag){case 1:return a=c.payload,\"function\"===typeof a?a.call(f,d,e):a;case 3:a.effectTag=a.effectTag&-1025|64;case 0:a=c.payload;e=\"function\"===typeof a?a.call(f,d,e):a;if(null===e||void 0===e)break;return p({},d,e);case 2:Hf=!0}return d}\nfunction Qf(a,b,c,d,e){Hf=!1;if(!(0===b.expirationTime||b.expirationTime>e)){b=Of(a,b);for(var f=b.baseState,g=null,h=0,k=b.firstUpdate,n=f;null!==k;){var r=k.expirationTime;if(r>e){if(null===g&&(g=k,f=n),0===h||h>r)h=r}else n=Pf(a,b,k,n,c,d),null!==k.callback&&(a.effectTag|=32,k.nextEffect=null,null===b.lastEffect?b.firstEffect=b.lastEffect=k:(b.lastEffect.nextEffect=k,b.lastEffect=k));k=k.next}r=null;for(k=b.firstCapturedUpdate;null!==k;){var w=k.expirationTime;if(w>e){if(null===r&&(r=k,null===\ng&&(f=n)),0===h||h>w)h=w}else n=Pf(a,b,k,n,c,d),null!==k.callback&&(a.effectTag|=32,k.nextEffect=null,null===b.lastCapturedEffect?b.firstCapturedEffect=b.lastCapturedEffect=k:(b.lastCapturedEffect.nextEffect=k,b.lastCapturedEffect=k));k=k.next}null===g&&(b.lastUpdate=null);null===r?b.lastCapturedUpdate=null:a.effectTag|=32;null===g&&null===r&&(f=n);b.baseState=f;b.firstUpdate=g;b.firstCapturedUpdate=r;b.expirationTime=h;a.memoizedState=n}}\nfunction Rf(a,b){\"function\"!==typeof a?A(\"191\",a):void 0;a.call(b)}\nfunction Sf(a,b,c){null!==b.firstCapturedUpdate&&(null!==b.lastUpdate&&(b.lastUpdate.next=b.firstCapturedUpdate,b.lastUpdate=b.lastCapturedUpdate),b.firstCapturedUpdate=b.lastCapturedUpdate=null);a=b.firstEffect;for(b.firstEffect=b.lastEffect=null;null!==a;){var d=a.callback;null!==d&&(a.callback=null,Rf(d,c));a=a.nextEffect}a=b.firstCapturedEffect;for(b.firstCapturedEffect=b.lastCapturedEffect=null;null!==a;)b=a.callback,null!==b&&(a.callback=null,Rf(b,c)),a=a.nextEffect}\nfunction Tf(a,b){return{value:a,source:b,stack:vc(b)}}var Uf=hf(null),Vf=hf(null),Wf=hf(0);function Xf(a){var b=a.type._context;N(Wf,b._changedBits,a);N(Vf,b._currentValue,a);N(Uf,a,a);b._currentValue=a.pendingProps.value;b._changedBits=a.stateNode}function Yf(a){var b=Wf.current,c=Vf.current;M(Uf,a);M(Vf,a);M(Wf,a);a=a.type._context;a._currentValue=c;a._changedBits=b}var Zf={},$f=hf(Zf),ag=hf(Zf),bg=hf(Zf);function cg(a){a===Zf?A(\"174\"):void 0;return a}\nfunction dg(a,b){N(bg,b,a);N(ag,a,a);N($f,Zf,a);var c=b.nodeType;switch(c){case 9:case 11:b=(b=b.documentElement)?b.namespaceURI:De(null,\"\");break;default:c=8===c?b.parentNode:b,b=c.namespaceURI||null,c=c.tagName,b=De(b,c)}M($f,a);N($f,b,a)}function eg(a){M($f,a);M(ag,a);M(bg,a)}function fg(a){ag.current===a&&(M($f,a),M(ag,a))}function hg(a,b,c){var d=a.memoizedState;b=b(c,d);d=null===b||void 0===b?d:p({},d,b);a.memoizedState=d;a=a.updateQueue;null!==a&&0===a.expirationTime&&(a.baseState=d)}\nvar lg={isMounted:function(a){return(a=a._reactInternalFiber)?2===id(a):!1},enqueueSetState:function(a,b,c){a=a._reactInternalFiber;var d=ig();d=jg(d,a);var e=Kf(d);e.payload=b;void 0!==c&&null!==c&&(e.callback=c);Mf(a,e,d);kg(a,d)},enqueueReplaceState:function(a,b,c){a=a._reactInternalFiber;var d=ig();d=jg(d,a);var e=Kf(d);e.tag=1;e.payload=b;void 0!==c&&null!==c&&(e.callback=c);Mf(a,e,d);kg(a,d)},enqueueForceUpdate:function(a,b){a=a._reactInternalFiber;var c=ig();c=jg(c,a);var d=Kf(c);d.tag=2;void 0!==\nb&&null!==b&&(d.callback=b);Mf(a,d,c);kg(a,c)}};function mg(a,b,c,d,e,f){var g=a.stateNode;a=a.type;return\"function\"===typeof g.shouldComponentUpdate?g.shouldComponentUpdate(c,e,f):a.prototype&&a.prototype.isPureReactComponent?!ea(b,c)||!ea(d,e):!0}\nfunction ng(a,b,c,d){a=b.state;\"function\"===typeof b.componentWillReceiveProps&&b.componentWillReceiveProps(c,d);\"function\"===typeof b.UNSAFE_componentWillReceiveProps&&b.UNSAFE_componentWillReceiveProps(c,d);b.state!==a&&lg.enqueueReplaceState(b,b.state,null)}\nfunction og(a,b){var c=a.type,d=a.stateNode,e=a.pendingProps,f=lf(a);d.props=e;d.state=a.memoizedState;d.refs=ha;d.context=nf(a,f);f=a.updateQueue;null!==f&&(Qf(a,f,e,d,b),d.state=a.memoizedState);f=a.type.getDerivedStateFromProps;\"function\"===typeof f&&(hg(a,f,e),d.state=a.memoizedState);\"function\"===typeof c.getDerivedStateFromProps||\"function\"===typeof d.getSnapshotBeforeUpdate||\"function\"!==typeof d.UNSAFE_componentWillMount&&\"function\"!==typeof d.componentWillMount||(c=d.state,\"function\"===typeof d.componentWillMount&&\nd.componentWillMount(),\"function\"===typeof d.UNSAFE_componentWillMount&&d.UNSAFE_componentWillMount(),c!==d.state&&lg.enqueueReplaceState(d,d.state,null),f=a.updateQueue,null!==f&&(Qf(a,f,e,d,b),d.state=a.memoizedState));\"function\"===typeof d.componentDidMount&&(a.effectTag|=4)}var pg=Array.isArray;\nfunction qg(a,b,c){a=c.ref;if(null!==a&&\"function\"!==typeof a&&\"object\"!==typeof a){if(c._owner){c=c._owner;var d=void 0;c&&(2!==c.tag?A(\"110\"):void 0,d=c.stateNode);d?void 0:A(\"147\",a);var e=\"\"+a;if(null!==b&&null!==b.ref&&\"function\"===typeof b.ref&&b.ref._stringRef===e)return b.ref;b=function(a){var b=d.refs===ha?d.refs={}:d.refs;null===a?delete b[e]:b[e]=a};b._stringRef=e;return b}\"string\"!==typeof a?A(\"148\"):void 0;c._owner?void 0:A(\"254\",a)}return a}\nfunction rg(a,b){\"textarea\"!==a.type&&A(\"31\",\"[object Object]\"===Object.prototype.toString.call(b)?\"object with keys {\"+Object.keys(b).join(\", \")+\"}\":b,\"\")}\nfunction sg(a){function b(b,c){if(a){var d=b.lastEffect;null!==d?(d.nextEffect=c,b.lastEffect=c):b.firstEffect=b.lastEffect=c;c.nextEffect=null;c.effectTag=8}}function c(c,d){if(!a)return null;for(;null!==d;)b(c,d),d=d.sibling;return null}function d(a,b){for(a=new Map;null!==b;)null!==b.key?a.set(b.key,b):a.set(b.index,b),b=b.sibling;return a}function e(a,b,c){a=vf(a,b,c);a.index=0;a.sibling=null;return a}function f(b,c,d){b.index=d;if(!a)return c;d=b.alternate;if(null!==d)return d=d.index,d<c?(b.effectTag=\n2,c):d;b.effectTag=2;return c}function g(b){a&&null===b.alternate&&(b.effectTag=2);return b}function h(a,b,c,d){if(null===b||6!==b.tag)return b=yf(c,a.mode,d),b.return=a,b;b=e(b,c,d);b.return=a;return b}function k(a,b,c,d){if(null!==b&&b.type===c.type)return d=e(b,c.props,d),d.ref=qg(a,b,c),d.return=a,d;d=wf(c,a.mode,d);d.ref=qg(a,b,c);d.return=a;return d}function n(a,b,c,d){if(null===b||4!==b.tag||b.stateNode.containerInfo!==c.containerInfo||b.stateNode.implementation!==c.implementation)return b=\nzf(c,a.mode,d),b.return=a,b;b=e(b,c.children||[],d);b.return=a;return b}function r(a,b,c,d,f){if(null===b||10!==b.tag)return b=xf(c,a.mode,d,f),b.return=a,b;b=e(b,c,d);b.return=a;return b}function w(a,b,c){if(\"string\"===typeof b||\"number\"===typeof b)return b=yf(\"\"+b,a.mode,c),b.return=a,b;if(\"object\"===typeof b&&null!==b){switch(b.$$typeof){case fc:return c=wf(b,a.mode,c),c.ref=qg(a,null,b),c.return=a,c;case gc:return b=zf(b,a.mode,c),b.return=a,b}if(pg(b)||sc(b))return b=xf(b,a.mode,c,null),b.return=\na,b;rg(a,b)}return null}function P(a,b,c,d){var e=null!==b?b.key:null;if(\"string\"===typeof c||\"number\"===typeof c)return null!==e?null:h(a,b,\"\"+c,d);if(\"object\"===typeof c&&null!==c){switch(c.$$typeof){case fc:return c.key===e?c.type===hc?r(a,b,c.props.children,d,e):k(a,b,c,d):null;case gc:return c.key===e?n(a,b,c,d):null}if(pg(c)||sc(c))return null!==e?null:r(a,b,c,d,null);rg(a,c)}return null}function kc(a,b,c,d,e){if(\"string\"===typeof d||\"number\"===typeof d)return a=a.get(c)||null,h(b,a,\"\"+d,e);\nif(\"object\"===typeof d&&null!==d){switch(d.$$typeof){case fc:return a=a.get(null===d.key?c:d.key)||null,d.type===hc?r(b,a,d.props.children,e,d.key):k(b,a,d,e);case gc:return a=a.get(null===d.key?c:d.key)||null,n(b,a,d,e)}if(pg(d)||sc(d))return a=a.get(c)||null,r(b,a,d,e,null);rg(b,d)}return null}function Hd(e,g,h,k){for(var u=null,x=null,t=g,q=g=0,n=null;null!==t&&q<h.length;q++){t.index>q?(n=t,t=null):n=t.sibling;var l=P(e,t,h[q],k);if(null===l){null===t&&(t=n);break}a&&t&&null===l.alternate&&b(e,\nt);g=f(l,g,q);null===x?u=l:x.sibling=l;x=l;t=n}if(q===h.length)return c(e,t),u;if(null===t){for(;q<h.length;q++)if(t=w(e,h[q],k))g=f(t,g,q),null===x?u=t:x.sibling=t,x=t;return u}for(t=d(e,t);q<h.length;q++)if(n=kc(t,e,q,h[q],k))a&&null!==n.alternate&&t.delete(null===n.key?q:n.key),g=f(n,g,q),null===x?u=n:x.sibling=n,x=n;a&&t.forEach(function(a){return b(e,a)});return u}function E(e,g,h,k){var t=sc(h);\"function\"!==typeof t?A(\"150\"):void 0;h=t.call(h);null==h?A(\"151\"):void 0;for(var u=t=null,n=g,x=\ng=0,y=null,l=h.next();null!==n&&!l.done;x++,l=h.next()){n.index>x?(y=n,n=null):y=n.sibling;var r=P(e,n,l.value,k);if(null===r){n||(n=y);break}a&&n&&null===r.alternate&&b(e,n);g=f(r,g,x);null===u?t=r:u.sibling=r;u=r;n=y}if(l.done)return c(e,n),t;if(null===n){for(;!l.done;x++,l=h.next())l=w(e,l.value,k),null!==l&&(g=f(l,g,x),null===u?t=l:u.sibling=l,u=l);return t}for(n=d(e,n);!l.done;x++,l=h.next())l=kc(n,e,x,l.value,k),null!==l&&(a&&null!==l.alternate&&n.delete(null===l.key?x:l.key),g=f(l,g,x),null===\nu?t=l:u.sibling=l,u=l);a&&n.forEach(function(a){return b(e,a)});return t}return function(a,d,f,h){\"object\"===typeof f&&null!==f&&f.type===hc&&null===f.key&&(f=f.props.children);var k=\"object\"===typeof f&&null!==f;if(k)switch(f.$$typeof){case fc:a:{var n=f.key;for(k=d;null!==k;){if(k.key===n)if(10===k.tag?f.type===hc:k.type===f.type){c(a,k.sibling);d=e(k,f.type===hc?f.props.children:f.props,h);d.ref=qg(a,k,f);d.return=a;a=d;break a}else{c(a,k);break}else b(a,k);k=k.sibling}f.type===hc?(d=xf(f.props.children,\na.mode,h,f.key),d.return=a,a=d):(h=wf(f,a.mode,h),h.ref=qg(a,d,f),h.return=a,a=h)}return g(a);case gc:a:{for(k=f.key;null!==d;){if(d.key===k)if(4===d.tag&&d.stateNode.containerInfo===f.containerInfo&&d.stateNode.implementation===f.implementation){c(a,d.sibling);d=e(d,f.children||[],h);d.return=a;a=d;break a}else{c(a,d);break}else b(a,d);d=d.sibling}d=zf(f,a.mode,h);d.return=a;a=d}return g(a)}if(\"string\"===typeof f||\"number\"===typeof f)return f=\"\"+f,null!==d&&6===d.tag?(c(a,d.sibling),d=e(d,f,h),d.return=\na,a=d):(c(a,d),d=yf(f,a.mode,h),d.return=a,a=d),g(a);if(pg(f))return Hd(a,d,f,h);if(sc(f))return E(a,d,f,h);k&&rg(a,f);if(\"undefined\"===typeof f)switch(a.tag){case 2:case 1:h=a.type,A(\"152\",h.displayName||h.name||\"Component\")}return c(a,d)}}var tg=sg(!0),ug=sg(!1),vg=null,wg=null,xg=!1;function yg(a,b){var c=new uf(5,null,null,0);c.type=\"DELETED\";c.stateNode=b;c.return=a;c.effectTag=8;null!==a.lastEffect?(a.lastEffect.nextEffect=c,a.lastEffect=c):a.firstEffect=a.lastEffect=c}\nfunction zg(a,b){switch(a.tag){case 5:var c=a.type;b=1!==b.nodeType||c.toLowerCase()!==b.nodeName.toLowerCase()?null:b;return null!==b?(a.stateNode=b,!0):!1;case 6:return b=\"\"===a.pendingProps||3!==b.nodeType?null:b,null!==b?(a.stateNode=b,!0):!1;default:return!1}}function Ag(a){if(xg){var b=wg;if(b){var c=b;if(!zg(a,b)){b=df(c);if(!b||!zg(a,b)){a.effectTag|=2;xg=!1;vg=a;return}yg(vg,c)}vg=a;wg=ef(b)}else a.effectTag|=2,xg=!1,vg=a}}\nfunction Bg(a){for(a=a.return;null!==a&&5!==a.tag&&3!==a.tag;)a=a.return;vg=a}function Cg(a){if(a!==vg)return!1;if(!xg)return Bg(a),xg=!0,!1;var b=a.type;if(5!==a.tag||\"head\"!==b&&\"body\"!==b&&!$e(b,a.memoizedProps))for(b=wg;b;)yg(a,b),b=df(b);Bg(a);wg=vg?df(a.stateNode):null;return!0}function Dg(){wg=vg=null;xg=!1}function Q(a,b,c){Eg(a,b,c,b.expirationTime)}function Eg(a,b,c,d){b.child=null===a?ug(b,null,c,d):tg(b,a.child,c,d)}\nfunction Fg(a,b){var c=b.ref;if(null===a&&null!==c||null!==a&&a.ref!==c)b.effectTag|=128}function Gg(a,b,c,d,e){Fg(a,b);var f=0!==(b.effectTag&64);if(!c&&!f)return d&&tf(b,!1),R(a,b);c=b.stateNode;ec.current=b;var g=f?null:c.render();b.effectTag|=1;f&&(Eg(a,b,null,e),b.child=null);Eg(a,b,g,e);b.memoizedState=c.state;b.memoizedProps=c.props;d&&tf(b,!0);return b.child}\nfunction Hg(a){var b=a.stateNode;b.pendingContext?qf(a,b.pendingContext,b.pendingContext!==b.context):b.context&&qf(a,b.context,!1);dg(a,b.containerInfo)}\nfunction Ig(a,b,c,d){var e=a.child;null!==e&&(e.return=a);for(;null!==e;){switch(e.tag){case 12:var f=e.stateNode|0;if(e.type===b&&0!==(f&c)){for(f=e;null!==f;){var g=f.alternate;if(0===f.expirationTime||f.expirationTime>d)f.expirationTime=d,null!==g&&(0===g.expirationTime||g.expirationTime>d)&&(g.expirationTime=d);else if(null!==g&&(0===g.expirationTime||g.expirationTime>d))g.expirationTime=d;else break;f=f.return}f=null}else f=e.child;break;case 13:f=e.type===a.type?null:e.child;break;default:f=\ne.child}if(null!==f)f.return=e;else for(f=e;null!==f;){if(f===a){f=null;break}e=f.sibling;if(null!==e){e.return=f.return;f=e;break}f=f.return}e=f}}\nfunction Jg(a,b,c){var d=b.type._context,e=b.pendingProps,f=b.memoizedProps,g=!0;if(O.current)g=!1;else if(f===e)return b.stateNode=0,Xf(b),R(a,b);var h=e.value;b.memoizedProps=e;if(null===f)h=1073741823;else if(f.value===e.value){if(f.children===e.children&&g)return b.stateNode=0,Xf(b),R(a,b);h=0}else{var k=f.value;if(k===h&&(0!==k||1/k===1/h)||k!==k&&h!==h){if(f.children===e.children&&g)return b.stateNode=0,Xf(b),R(a,b);h=0}else if(h=\"function\"===typeof d._calculateChangedBits?d._calculateChangedBits(k,\nh):1073741823,h|=0,0===h){if(f.children===e.children&&g)return b.stateNode=0,Xf(b),R(a,b)}else Ig(b,d,h,c)}b.stateNode=h;Xf(b);Q(a,b,e.children);return b.child}function R(a,b){null!==a&&b.child!==a.child?A(\"153\"):void 0;if(null!==b.child){a=b.child;var c=vf(a,a.pendingProps,a.expirationTime);b.child=c;for(c.return=b;null!==a.sibling;)a=a.sibling,c=c.sibling=vf(a,a.pendingProps,a.expirationTime),c.return=b;c.sibling=null}return b.child}\nfunction Kg(a,b,c){if(0===b.expirationTime||b.expirationTime>c){switch(b.tag){case 3:Hg(b);break;case 2:sf(b);break;case 4:dg(b,b.stateNode.containerInfo);break;case 13:Xf(b)}return null}switch(b.tag){case 0:null!==a?A(\"155\"):void 0;var d=b.type,e=b.pendingProps,f=lf(b);f=nf(b,f);d=d(e,f);b.effectTag|=1;\"object\"===typeof d&&null!==d&&\"function\"===typeof d.render&&void 0===d.$$typeof?(f=b.type,b.tag=2,b.memoizedState=null!==d.state&&void 0!==d.state?d.state:null,f=f.getDerivedStateFromProps,\"function\"===\ntypeof f&&hg(b,f,e),e=sf(b),d.updater=lg,b.stateNode=d,d._reactInternalFiber=b,og(b,c),a=Gg(a,b,!0,e,c)):(b.tag=1,Q(a,b,d),b.memoizedProps=e,a=b.child);return a;case 1:return e=b.type,c=b.pendingProps,O.current||b.memoizedProps!==c?(d=lf(b),d=nf(b,d),e=e(c,d),b.effectTag|=1,Q(a,b,e),b.memoizedProps=c,a=b.child):a=R(a,b),a;case 2:e=sf(b);if(null===a)if(null===b.stateNode){var g=b.pendingProps,h=b.type;d=lf(b);var k=2===b.tag&&null!=b.type.contextTypes;f=k?nf(b,d):ha;g=new h(g,f);b.memoizedState=null!==\ng.state&&void 0!==g.state?g.state:null;g.updater=lg;b.stateNode=g;g._reactInternalFiber=b;k&&(k=b.stateNode,k.__reactInternalMemoizedUnmaskedChildContext=d,k.__reactInternalMemoizedMaskedChildContext=f);og(b,c);d=!0}else{h=b.type;d=b.stateNode;k=b.memoizedProps;f=b.pendingProps;d.props=k;var n=d.context;g=lf(b);g=nf(b,g);var r=h.getDerivedStateFromProps;(h=\"function\"===typeof r||\"function\"===typeof d.getSnapshotBeforeUpdate)||\"function\"!==typeof d.UNSAFE_componentWillReceiveProps&&\"function\"!==typeof d.componentWillReceiveProps||\n(k!==f||n!==g)&&ng(b,d,f,g);Hf=!1;var w=b.memoizedState;n=d.state=w;var P=b.updateQueue;null!==P&&(Qf(b,P,f,d,c),n=b.memoizedState);k!==f||w!==n||O.current||Hf?(\"function\"===typeof r&&(hg(b,r,f),n=b.memoizedState),(k=Hf||mg(b,k,f,w,n,g))?(h||\"function\"!==typeof d.UNSAFE_componentWillMount&&\"function\"!==typeof d.componentWillMount||(\"function\"===typeof d.componentWillMount&&d.componentWillMount(),\"function\"===typeof d.UNSAFE_componentWillMount&&d.UNSAFE_componentWillMount()),\"function\"===typeof d.componentDidMount&&\n(b.effectTag|=4)):(\"function\"===typeof d.componentDidMount&&(b.effectTag|=4),b.memoizedProps=f,b.memoizedState=n),d.props=f,d.state=n,d.context=g,d=k):(\"function\"===typeof d.componentDidMount&&(b.effectTag|=4),d=!1)}else h=b.type,d=b.stateNode,f=b.memoizedProps,k=b.pendingProps,d.props=f,n=d.context,g=lf(b),g=nf(b,g),r=h.getDerivedStateFromProps,(h=\"function\"===typeof r||\"function\"===typeof d.getSnapshotBeforeUpdate)||\"function\"!==typeof d.UNSAFE_componentWillReceiveProps&&\"function\"!==typeof d.componentWillReceiveProps||\n(f!==k||n!==g)&&ng(b,d,k,g),Hf=!1,n=b.memoizedState,w=d.state=n,P=b.updateQueue,null!==P&&(Qf(b,P,k,d,c),w=b.memoizedState),f!==k||n!==w||O.current||Hf?(\"function\"===typeof r&&(hg(b,r,k),w=b.memoizedState),(r=Hf||mg(b,f,k,n,w,g))?(h||\"function\"!==typeof d.UNSAFE_componentWillUpdate&&\"function\"!==typeof d.componentWillUpdate||(\"function\"===typeof d.componentWillUpdate&&d.componentWillUpdate(k,w,g),\"function\"===typeof d.UNSAFE_componentWillUpdate&&d.UNSAFE_componentWillUpdate(k,w,g)),\"function\"===typeof d.componentDidUpdate&&\n(b.effectTag|=4),\"function\"===typeof d.getSnapshotBeforeUpdate&&(b.effectTag|=256)):(\"function\"!==typeof d.componentDidUpdate||f===a.memoizedProps&&n===a.memoizedState||(b.effectTag|=4),\"function\"!==typeof d.getSnapshotBeforeUpdate||f===a.memoizedProps&&n===a.memoizedState||(b.effectTag|=256),b.memoizedProps=k,b.memoizedState=w),d.props=k,d.state=w,d.context=g,d=r):(\"function\"!==typeof d.componentDidUpdate||f===a.memoizedProps&&n===a.memoizedState||(b.effectTag|=4),\"function\"!==typeof d.getSnapshotBeforeUpdate||\nf===a.memoizedProps&&n===a.memoizedState||(b.effectTag|=256),d=!1);return Gg(a,b,d,e,c);case 3:Hg(b);e=b.updateQueue;if(null!==e)if(d=b.memoizedState,d=null!==d?d.element:null,Qf(b,e,b.pendingProps,null,c),e=b.memoizedState.element,e===d)Dg(),a=R(a,b);else{d=b.stateNode;if(d=(null===a||null===a.child)&&d.hydrate)wg=ef(b.stateNode.containerInfo),vg=b,d=xg=!0;d?(b.effectTag|=2,b.child=ug(b,null,e,c)):(Dg(),Q(a,b,e));a=b.child}else Dg(),a=R(a,b);return a;case 5:a:{cg(bg.current);e=cg($f.current);d=De(e,\nb.type);e!==d&&(N(ag,b,b),N($f,d,b));null===a&&Ag(b);e=b.type;k=b.memoizedProps;d=b.pendingProps;f=null!==a?a.memoizedProps:null;if(!O.current&&k===d){if(k=b.mode&1&&!!d.hidden)b.expirationTime=1073741823;if(!k||1073741823!==c){a=R(a,b);break a}}k=d.children;$e(e,d)?k=null:f&&$e(e,f)&&(b.effectTag|=16);Fg(a,b);1073741823!==c&&b.mode&1&&d.hidden?(b.expirationTime=1073741823,b.memoizedProps=d,a=null):(Q(a,b,k),b.memoizedProps=d,a=b.child)}return a;case 6:return null===a&&Ag(b),b.memoizedProps=b.pendingProps,\nnull;case 16:return null;case 4:return dg(b,b.stateNode.containerInfo),e=b.pendingProps,O.current||b.memoizedProps!==e?(null===a?b.child=tg(b,null,e,c):Q(a,b,e),b.memoizedProps=e,a=b.child):a=R(a,b),a;case 14:return e=b.type.render,c=b.pendingProps,d=b.ref,O.current||b.memoizedProps!==c||d!==(null!==a?a.ref:null)?(e=e(c,d),Q(a,b,e),b.memoizedProps=c,a=b.child):a=R(a,b),a;case 10:return c=b.pendingProps,O.current||b.memoizedProps!==c?(Q(a,b,c),b.memoizedProps=c,a=b.child):a=R(a,b),a;case 11:return c=\nb.pendingProps.children,O.current||null!==c&&b.memoizedProps!==c?(Q(a,b,c),b.memoizedProps=c,a=b.child):a=R(a,b),a;case 15:return c=b.pendingProps,b.memoizedProps===c?a=R(a,b):(Q(a,b,c.children),b.memoizedProps=c,a=b.child),a;case 13:return Jg(a,b,c);case 12:a:if(d=b.type,f=b.pendingProps,k=b.memoizedProps,e=d._currentValue,g=d._changedBits,O.current||0!==g||k!==f){b.memoizedProps=f;h=f.unstable_observedBits;if(void 0===h||null===h)h=1073741823;b.stateNode=h;if(0!==(g&h))Ig(b,d,g,c);else if(k===f){a=\nR(a,b);break a}c=f.children;c=c(e);b.effectTag|=1;Q(a,b,c);a=b.child}else a=R(a,b);return a;default:A(\"156\")}}function Lg(a){a.effectTag|=4}var Pg=void 0,Qg=void 0,Rg=void 0;Pg=function(){};Qg=function(a,b,c){(b.updateQueue=c)&&Lg(b)};Rg=function(a,b,c,d){c!==d&&Lg(b)};\nfunction Sg(a,b){var c=b.pendingProps;switch(b.tag){case 1:return null;case 2:return of(b),null;case 3:eg(b);pf(b);var d=b.stateNode;d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null);if(null===a||null===a.child)Cg(b),b.effectTag&=-3;Pg(b);return null;case 5:fg(b);d=cg(bg.current);var e=b.type;if(null!==a&&null!=b.stateNode){var f=a.memoizedProps,g=b.stateNode,h=cg($f.current);g=Se(g,e,f,c,d);Qg(a,b,g,e,f,c,d,h);a.ref!==b.ref&&(b.effectTag|=128)}else{if(!c)return null===b.stateNode?\nA(\"166\"):void 0,null;a=cg($f.current);if(Cg(b))c=b.stateNode,e=b.type,f=b.memoizedProps,c[C]=b,c[Ma]=f,d=Ue(c,e,f,a,d),b.updateQueue=d,null!==d&&Lg(b);else{a=Pe(e,c,d,a);a[C]=b;a[Ma]=c;a:for(f=b.child;null!==f;){if(5===f.tag||6===f.tag)a.appendChild(f.stateNode);else if(4!==f.tag&&null!==f.child){f.child.return=f;f=f.child;continue}if(f===b)break;for(;null===f.sibling;){if(null===f.return||f.return===b)break a;f=f.return}f.sibling.return=f.return;f=f.sibling}Re(a,e,c,d);Ze(e,c)&&Lg(b);b.stateNode=\na}null!==b.ref&&(b.effectTag|=128)}return null;case 6:if(a&&null!=b.stateNode)Rg(a,b,a.memoizedProps,c);else{if(\"string\"!==typeof c)return null===b.stateNode?A(\"166\"):void 0,null;d=cg(bg.current);cg($f.current);Cg(b)?(d=b.stateNode,c=b.memoizedProps,d[C]=b,Ve(d,c)&&Lg(b)):(d=Qe(c,d),d[C]=b,b.stateNode=d)}return null;case 14:return null;case 16:return null;case 10:return null;case 11:return null;case 15:return null;case 4:return eg(b),Pg(b),null;case 13:return Yf(b),null;case 12:return null;case 0:A(\"167\");\ndefault:A(\"156\")}}function Tg(a,b){var c=b.source;null===b.stack&&null!==c&&vc(c);null!==c&&tc(c);b=b.value;null!==a&&2===a.tag&&tc(a);try{b&&b.suppressReactErrorLogging||console.error(b)}catch(d){d&&d.suppressReactErrorLogging||console.error(d)}}function Ug(a){var b=a.ref;if(null!==b)if(\"function\"===typeof b)try{b(null)}catch(c){Vg(a,c)}else b.current=null}\nfunction Wg(a){\"function\"===typeof Gf&&Gf(a);switch(a.tag){case 2:Ug(a);var b=a.stateNode;if(\"function\"===typeof b.componentWillUnmount)try{b.props=a.memoizedProps,b.state=a.memoizedState,b.componentWillUnmount()}catch(c){Vg(a,c)}break;case 5:Ug(a);break;case 4:Xg(a)}}function Yg(a){return 5===a.tag||3===a.tag||4===a.tag}\nfunction Zg(a){a:{for(var b=a.return;null!==b;){if(Yg(b)){var c=b;break a}b=b.return}A(\"160\");c=void 0}var d=b=void 0;switch(c.tag){case 5:b=c.stateNode;d=!1;break;case 3:b=c.stateNode.containerInfo;d=!0;break;case 4:b=c.stateNode.containerInfo;d=!0;break;default:A(\"161\")}c.effectTag&16&&(Ge(b,\"\"),c.effectTag&=-17);a:b:for(c=a;;){for(;null===c.sibling;){if(null===c.return||Yg(c.return)){c=null;break a}c=c.return}c.sibling.return=c.return;for(c=c.sibling;5!==c.tag&&6!==c.tag;){if(c.effectTag&2)continue b;\nif(null===c.child||4===c.tag)continue b;else c.child.return=c,c=c.child}if(!(c.effectTag&2)){c=c.stateNode;break a}}for(var e=a;;){if(5===e.tag||6===e.tag)if(c)if(d){var f=b,g=e.stateNode,h=c;8===f.nodeType?f.parentNode.insertBefore(g,h):f.insertBefore(g,h)}else b.insertBefore(e.stateNode,c);else d?(f=b,g=e.stateNode,8===f.nodeType?f.parentNode.insertBefore(g,f):f.appendChild(g)):b.appendChild(e.stateNode);else if(4!==e.tag&&null!==e.child){e.child.return=e;e=e.child;continue}if(e===a)break;for(;null===\ne.sibling;){if(null===e.return||e.return===a)return;e=e.return}e.sibling.return=e.return;e=e.sibling}}\nfunction Xg(a){for(var b=a,c=!1,d=void 0,e=void 0;;){if(!c){c=b.return;a:for(;;){null===c?A(\"160\"):void 0;switch(c.tag){case 5:d=c.stateNode;e=!1;break a;case 3:d=c.stateNode.containerInfo;e=!0;break a;case 4:d=c.stateNode.containerInfo;e=!0;break a}c=c.return}c=!0}if(5===b.tag||6===b.tag){a:for(var f=b,g=f;;)if(Wg(g),null!==g.child&&4!==g.tag)g.child.return=g,g=g.child;else{if(g===f)break;for(;null===g.sibling;){if(null===g.return||g.return===f)break a;g=g.return}g.sibling.return=g.return;g=g.sibling}e?\n(f=d,g=b.stateNode,8===f.nodeType?f.parentNode.removeChild(g):f.removeChild(g)):d.removeChild(b.stateNode)}else if(4===b.tag?d=b.stateNode.containerInfo:Wg(b),null!==b.child){b.child.return=b;b=b.child;continue}if(b===a)break;for(;null===b.sibling;){if(null===b.return||b.return===a)return;b=b.return;4===b.tag&&(c=!1)}b.sibling.return=b.return;b=b.sibling}}\nfunction $g(a,b){switch(b.tag){case 2:break;case 5:var c=b.stateNode;if(null!=c){var d=b.memoizedProps;a=null!==a?a.memoizedProps:d;var e=b.type,f=b.updateQueue;b.updateQueue=null;null!==f&&(c[Ma]=d,Te(c,f,e,a,d))}break;case 6:null===b.stateNode?A(\"162\"):void 0;b.stateNode.nodeValue=b.memoizedProps;break;case 3:break;case 15:break;case 16:break;default:A(\"163\")}}function ah(a,b,c){c=Kf(c);c.tag=3;c.payload={element:null};var d=b.value;c.callback=function(){bh(d);Tg(a,b)};return c}\nfunction ch(a,b,c){c=Kf(c);c.tag=3;var d=a.stateNode;null!==d&&\"function\"===typeof d.componentDidCatch&&(c.callback=function(){null===dh?dh=new Set([this]):dh.add(this);var c=b.value,d=b.stack;Tg(a,b);this.componentDidCatch(c,{componentStack:null!==d?d:\"\"})});return c}\nfunction eh(a,b,c,d,e,f){c.effectTag|=512;c.firstEffect=c.lastEffect=null;d=Tf(d,c);a=b;do{switch(a.tag){case 3:a.effectTag|=1024;d=ah(a,d,f);Nf(a,d,f);return;case 2:if(b=d,c=a.stateNode,0===(a.effectTag&64)&&null!==c&&\"function\"===typeof c.componentDidCatch&&(null===dh||!dh.has(c))){a.effectTag|=1024;d=ch(a,b,f);Nf(a,d,f);return}}a=a.return}while(null!==a)}\nfunction fh(a){switch(a.tag){case 2:of(a);var b=a.effectTag;return b&1024?(a.effectTag=b&-1025|64,a):null;case 3:return eg(a),pf(a),b=a.effectTag,b&1024?(a.effectTag=b&-1025|64,a):null;case 5:return fg(a),null;case 16:return b=a.effectTag,b&1024?(a.effectTag=b&-1025|64,a):null;case 4:return eg(a),null;case 13:return Yf(a),null;default:return null}}var gh=af(),hh=2,ih=gh,jh=0,kh=0,lh=!1,S=null,mh=null,T=0,nh=-1,oh=!1,U=null,ph=!1,qh=!1,dh=null;\nfunction rh(){if(null!==S)for(var a=S.return;null!==a;){var b=a;switch(b.tag){case 2:of(b);break;case 3:eg(b);pf(b);break;case 5:fg(b);break;case 4:eg(b);break;case 13:Yf(b)}a=a.return}mh=null;T=0;nh=-1;oh=!1;S=null;qh=!1}\nfunction sh(a){for(;;){var b=a.alternate,c=a.return,d=a.sibling;if(0===(a.effectTag&512)){b=Sg(b,a,T);var e=a;if(1073741823===T||1073741823!==e.expirationTime){var f=0;switch(e.tag){case 3:case 2:var g=e.updateQueue;null!==g&&(f=g.expirationTime)}for(g=e.child;null!==g;)0!==g.expirationTime&&(0===f||f>g.expirationTime)&&(f=g.expirationTime),g=g.sibling;e.expirationTime=f}if(null!==b)return b;null!==c&&0===(c.effectTag&512)&&(null===c.firstEffect&&(c.firstEffect=a.firstEffect),null!==a.lastEffect&&\n(null!==c.lastEffect&&(c.lastEffect.nextEffect=a.firstEffect),c.lastEffect=a.lastEffect),1<a.effectTag&&(null!==c.lastEffect?c.lastEffect.nextEffect=a:c.firstEffect=a,c.lastEffect=a));if(null!==d)return d;if(null!==c)a=c;else{qh=!0;break}}else{a=fh(a,oh,T);if(null!==a)return a.effectTag&=511,a;null!==c&&(c.firstEffect=c.lastEffect=null,c.effectTag|=512);if(null!==d)return d;if(null!==c)a=c;else break}}return null}\nfunction th(a){var b=Kg(a.alternate,a,T);null===b&&(b=sh(a));ec.current=null;return b}\nfunction uh(a,b,c){lh?A(\"243\"):void 0;lh=!0;if(b!==T||a!==mh||null===S)rh(),mh=a,T=b,nh=-1,S=vf(mh.current,null,T),a.pendingCommitExpirationTime=0;var d=!1;oh=!c||T<=hh;do{try{if(c)for(;null!==S&&!vh();)S=th(S);else for(;null!==S;)S=th(S)}catch(f){if(null===S)d=!0,bh(f);else{null===S?A(\"271\"):void 0;c=S;var e=c.return;if(null===e){d=!0;bh(f);break}eh(a,e,c,f,oh,T,ih);S=sh(c)}}break}while(1);lh=!1;if(d)return null;if(null===S){if(qh)return a.pendingCommitExpirationTime=b,a.current.alternate;oh?A(\"262\"):\nvoid 0;0<=nh&&setTimeout(function(){var b=a.current.expirationTime;0!==b&&(0===a.remainingExpirationTime||a.remainingExpirationTime<b)&&wh(a,b)},nh);xh(a.current.expirationTime)}return null}\nfunction Vg(a,b){var c;a:{lh&&!ph?A(\"263\"):void 0;for(c=a.return;null!==c;){switch(c.tag){case 2:var d=c.stateNode;if(\"function\"===typeof c.type.getDerivedStateFromCatch||\"function\"===typeof d.componentDidCatch&&(null===dh||!dh.has(d))){a=Tf(b,a);a=ch(c,a,1);Mf(c,a,1);kg(c,1);c=void 0;break a}break;case 3:a=Tf(b,a);a=ah(c,a,1);Mf(c,a,1);kg(c,1);c=void 0;break a}c=c.return}3===a.tag&&(c=Tf(b,a),c=ah(a,c,1),Mf(a,c,1),kg(a,1));c=void 0}return c}\nfunction yh(){var a=2+25*(((ig()-2+500)/25|0)+1);a<=jh&&(a=jh+1);return jh=a}function jg(a,b){a=0!==kh?kh:lh?ph?1:T:b.mode&1?zh?2+10*(((a-2+15)/10|0)+1):2+25*(((a-2+500)/25|0)+1):1;zh&&(0===Ah||a>Ah)&&(Ah=a);return a}\nfunction kg(a,b){for(;null!==a;){if(0===a.expirationTime||a.expirationTime>b)a.expirationTime=b;null!==a.alternate&&(0===a.alternate.expirationTime||a.alternate.expirationTime>b)&&(a.alternate.expirationTime=b);if(null===a.return)if(3===a.tag){var c=a.stateNode;!lh&&0!==T&&b<T&&rh();var d=c.current.expirationTime;lh&&!ph&&mh===c||wh(c,d);Bh>Ch&&A(\"185\")}else break;a=a.return}}function ig(){ih=af()-gh;return hh=(ih/10|0)+2}\nfunction Dh(a){var b=kh;kh=2+25*(((ig()-2+500)/25|0)+1);try{return a()}finally{kh=b}}function Eh(a,b,c,d,e){var f=kh;kh=1;try{return a(b,c,d,e)}finally{kh=f}}var Fh=null,V=null,Gh=0,Hh=-1,W=!1,X=null,Y=0,Ah=0,Ih=!1,Jh=!1,Kh=null,Lh=null,Z=!1,Mh=!1,zh=!1,Nh=null,Ch=1E3,Bh=0,Oh=1;function Ph(a){if(0!==Gh){if(a>Gh)return;cf(Hh)}var b=af()-gh;Gh=a;Hh=bf(Qh,{timeout:10*(a-2)-b})}\nfunction wh(a,b){if(null===a.nextScheduledRoot)a.remainingExpirationTime=b,null===V?(Fh=V=a,a.nextScheduledRoot=a):(V=V.nextScheduledRoot=a,V.nextScheduledRoot=Fh);else{var c=a.remainingExpirationTime;if(0===c||b<c)a.remainingExpirationTime=b}W||(Z?Mh&&(X=a,Y=1,Rh(a,1,!1)):1===b?Sh():Ph(b))}\nfunction Th(){var a=0,b=null;if(null!==V)for(var c=V,d=Fh;null!==d;){var e=d.remainingExpirationTime;if(0===e){null===c||null===V?A(\"244\"):void 0;if(d===d.nextScheduledRoot){Fh=V=d.nextScheduledRoot=null;break}else if(d===Fh)Fh=e=d.nextScheduledRoot,V.nextScheduledRoot=e,d.nextScheduledRoot=null;else if(d===V){V=c;V.nextScheduledRoot=Fh;d.nextScheduledRoot=null;break}else c.nextScheduledRoot=d.nextScheduledRoot,d.nextScheduledRoot=null;d=c.nextScheduledRoot}else{if(0===a||e<a)a=e,b=d;if(d===V)break;\nc=d;d=d.nextScheduledRoot}}c=X;null!==c&&c===b&&1===a?Bh++:Bh=0;X=b;Y=a}function Qh(a){Uh(0,!0,a)}function Sh(){Uh(1,!1,null)}function Uh(a,b,c){Lh=c;Th();if(b)for(;null!==X&&0!==Y&&(0===a||a>=Y)&&(!Ih||ig()>=Y);)ig(),Rh(X,Y,!Ih),Th();else for(;null!==X&&0!==Y&&(0===a||a>=Y);)Rh(X,Y,!1),Th();null!==Lh&&(Gh=0,Hh=-1);0!==Y&&Ph(Y);Lh=null;Ih=!1;Vh()}function Wh(a,b){W?A(\"253\"):void 0;X=a;Y=b;Rh(a,b,!1);Sh();Vh()}\nfunction Vh(){Bh=0;if(null!==Nh){var a=Nh;Nh=null;for(var b=0;b<a.length;b++){var c=a[b];try{c._onComplete()}catch(d){Jh||(Jh=!0,Kh=d)}}}if(Jh)throw a=Kh,Kh=null,Jh=!1,a;}function Rh(a,b,c){W?A(\"245\"):void 0;W=!0;c?(c=a.finishedWork,null!==c?Xh(a,c,b):(a.finishedWork=null,c=uh(a,b,!0),null!==c&&(vh()?a.finishedWork=c:Xh(a,c,b)))):(c=a.finishedWork,null!==c?Xh(a,c,b):(a.finishedWork=null,c=uh(a,b,!1),null!==c&&Xh(a,c,b)));W=!1}\nfunction Xh(a,b,c){var d=a.firstBatch;if(null!==d&&d._expirationTime<=c&&(null===Nh?Nh=[d]:Nh.push(d),d._defer)){a.finishedWork=b;a.remainingExpirationTime=0;return}a.finishedWork=null;ph=lh=!0;c=b.stateNode;c.current===b?A(\"177\"):void 0;d=c.pendingCommitExpirationTime;0===d?A(\"261\"):void 0;c.pendingCommitExpirationTime=0;ig();ec.current=null;if(1<b.effectTag)if(null!==b.lastEffect){b.lastEffect.nextEffect=b;var e=b.firstEffect}else e=b;else e=b.firstEffect;Xe=Gd;var f=da();if(Td(f)){if(\"selectionStart\"in\nf)var g={start:f.selectionStart,end:f.selectionEnd};else a:{var h=window.getSelection&&window.getSelection();if(h&&0!==h.rangeCount){g=h.anchorNode;var k=h.anchorOffset,n=h.focusNode;h=h.focusOffset;try{g.nodeType,n.nodeType}catch(Wa){g=null;break a}var r=0,w=-1,P=-1,kc=0,Hd=0,E=f,t=null;b:for(;;){for(var x;;){E!==g||0!==k&&3!==E.nodeType||(w=r+k);E!==n||0!==h&&3!==E.nodeType||(P=r+h);3===E.nodeType&&(r+=E.nodeValue.length);if(null===(x=E.firstChild))break;t=E;E=x}for(;;){if(E===f)break b;t===g&&\n++kc===k&&(w=r);t===n&&++Hd===h&&(P=r);if(null!==(x=E.nextSibling))break;E=t;t=E.parentNode}E=x}g=-1===w||-1===P?null:{start:w,end:P}}else g=null}g=g||{start:0,end:0}}else g=null;Ye={focusedElem:f,selectionRange:g};Id(!1);for(U=e;null!==U;){f=!1;g=void 0;try{for(;null!==U;){if(U.effectTag&256){var u=U.alternate;k=U;switch(k.tag){case 2:if(k.effectTag&256&&null!==u){var y=u.memoizedProps,D=u.memoizedState,ja=k.stateNode;ja.props=k.memoizedProps;ja.state=k.memoizedState;var hi=ja.getSnapshotBeforeUpdate(y,\nD);ja.__reactInternalSnapshotBeforeUpdate=hi}break;case 3:case 5:case 6:case 4:break;default:A(\"163\")}}U=U.nextEffect}}catch(Wa){f=!0,g=Wa}f&&(null===U?A(\"178\"):void 0,Vg(U,g),null!==U&&(U=U.nextEffect))}for(U=e;null!==U;){u=!1;y=void 0;try{for(;null!==U;){var q=U.effectTag;q&16&&Ge(U.stateNode,\"\");if(q&128){var z=U.alternate;if(null!==z){var l=z.ref;null!==l&&(\"function\"===typeof l?l(null):l.current=null)}}switch(q&14){case 2:Zg(U);U.effectTag&=-3;break;case 6:Zg(U);U.effectTag&=-3;$g(U.alternate,\nU);break;case 4:$g(U.alternate,U);break;case 8:D=U,Xg(D),D.return=null,D.child=null,D.alternate&&(D.alternate.child=null,D.alternate.return=null)}U=U.nextEffect}}catch(Wa){u=!0,y=Wa}u&&(null===U?A(\"178\"):void 0,Vg(U,y),null!==U&&(U=U.nextEffect))}l=Ye;z=da();q=l.focusedElem;u=l.selectionRange;if(z!==q&&fa(document.documentElement,q)){Td(q)&&(z=u.start,l=u.end,void 0===l&&(l=z),\"selectionStart\"in q?(q.selectionStart=z,q.selectionEnd=Math.min(l,q.value.length)):window.getSelection&&(z=window.getSelection(),\ny=q[lb()].length,l=Math.min(u.start,y),u=void 0===u.end?l:Math.min(u.end,y),!z.extend&&l>u&&(y=u,u=l,l=y),y=Sd(q,l),D=Sd(q,u),y&&D&&(1!==z.rangeCount||z.anchorNode!==y.node||z.anchorOffset!==y.offset||z.focusNode!==D.node||z.focusOffset!==D.offset)&&(ja=document.createRange(),ja.setStart(y.node,y.offset),z.removeAllRanges(),l>u?(z.addRange(ja),z.extend(D.node,D.offset)):(ja.setEnd(D.node,D.offset),z.addRange(ja)))));z=[];for(l=q;l=l.parentNode;)1===l.nodeType&&z.push({element:l,left:l.scrollLeft,\ntop:l.scrollTop});q.focus();for(q=0;q<z.length;q++)l=z[q],l.element.scrollLeft=l.left,l.element.scrollTop=l.top}Ye=null;Id(Xe);Xe=null;c.current=b;for(U=e;null!==U;){e=!1;q=void 0;try{for(z=d;null!==U;){var gg=U.effectTag;if(gg&36){var lc=U.alternate;l=U;u=z;switch(l.tag){case 2:var ba=l.stateNode;if(l.effectTag&4)if(null===lc)ba.props=l.memoizedProps,ba.state=l.memoizedState,ba.componentDidMount();else{var ri=lc.memoizedProps,si=lc.memoizedState;ba.props=l.memoizedProps;ba.state=l.memoizedState;\nba.componentDidUpdate(ri,si,ba.__reactInternalSnapshotBeforeUpdate)}var Mg=l.updateQueue;null!==Mg&&(ba.props=l.memoizedProps,ba.state=l.memoizedState,Sf(l,Mg,ba,u));break;case 3:var Ng=l.updateQueue;if(null!==Ng){y=null;if(null!==l.child)switch(l.child.tag){case 5:y=l.child.stateNode;break;case 2:y=l.child.stateNode}Sf(l,Ng,y,u)}break;case 5:var ti=l.stateNode;null===lc&&l.effectTag&4&&Ze(l.type,l.memoizedProps)&&ti.focus();break;case 6:break;case 4:break;case 15:break;case 16:break;default:A(\"163\")}}if(gg&\n128){l=void 0;var uc=U.ref;if(null!==uc){var Og=U.stateNode;switch(U.tag){case 5:l=Og;break;default:l=Og}\"function\"===typeof uc?uc(l):uc.current=l}}var ui=U.nextEffect;U.nextEffect=null;U=ui}}catch(Wa){e=!0,q=Wa}e&&(null===U?A(\"178\"):void 0,Vg(U,q),null!==U&&(U=U.nextEffect))}lh=ph=!1;\"function\"===typeof Ff&&Ff(b.stateNode);b=c.current.expirationTime;0===b&&(dh=null);a.remainingExpirationTime=b}function vh(){return null===Lh||Lh.timeRemaining()>Oh?!1:Ih=!0}\nfunction bh(a){null===X?A(\"246\"):void 0;X.remainingExpirationTime=0;Jh||(Jh=!0,Kh=a)}function xh(a){null===X?A(\"246\"):void 0;X.remainingExpirationTime=a}function Yh(a,b){var c=Z;Z=!0;try{return a(b)}finally{(Z=c)||W||Sh()}}function Zh(a,b){if(Z&&!Mh){Mh=!0;try{return a(b)}finally{Mh=!1}}return a(b)}function $h(a,b){W?A(\"187\"):void 0;var c=Z;Z=!0;try{return Eh(a,b)}finally{Z=c,Sh()}}function ai(a){var b=Z;Z=!0;try{Eh(a)}finally{(Z=b)||W||Uh(1,!1,null)}}\nfunction bi(a,b,c,d,e){var f=b.current;if(c){c=c._reactInternalFiber;var g;b:{2===id(c)&&2===c.tag?void 0:A(\"170\");for(g=c;3!==g.tag;){if(mf(g)){g=g.stateNode.__reactInternalMemoizedMergedChildContext;break b}(g=g.return)?void 0:A(\"171\")}g=g.stateNode.context}c=mf(c)?rf(c,g):g}else c=ha;null===b.context?b.context=c:b.pendingContext=c;b=e;e=Kf(d);e.payload={element:a};b=void 0===b?null:b;null!==b&&(e.callback=b);Mf(f,e,d);kg(f,d);return d}\nfunction ci(a){var b=a._reactInternalFiber;void 0===b&&(\"function\"===typeof a.render?A(\"188\"):A(\"268\",Object.keys(a)));a=ld(b);return null===a?null:a.stateNode}function di(a,b,c,d){var e=b.current,f=ig();e=jg(f,e);return bi(a,b,c,e,d)}function ei(a){a=a.current;if(!a.child)return null;switch(a.child.tag){case 5:return a.child.stateNode;default:return a.child.stateNode}}\nfunction fi(a){var b=a.findFiberByHostInstance;return Ef(p({},a,{findHostInstanceByFiber:function(a){a=ld(a);return null===a?null:a.stateNode},findFiberByHostInstance:function(a){return b?b(a):null}}))}\nvar gi={updateContainerAtExpirationTime:bi,createContainer:function(a,b,c){return Af(a,b,c)},updateContainer:di,flushRoot:Wh,requestWork:wh,computeUniqueAsyncExpiration:yh,batchedUpdates:Yh,unbatchedUpdates:Zh,deferredUpdates:Dh,syncUpdates:Eh,interactiveUpdates:function(a,b,c){if(zh)return a(b,c);Z||W||0===Ah||(Uh(Ah,!1,null),Ah=0);var d=zh,e=Z;Z=zh=!0;try{return a(b,c)}finally{zh=d,(Z=e)||W||Sh()}},flushInteractiveUpdates:function(){W||0===Ah||(Uh(Ah,!1,null),Ah=0)},flushControlled:ai,flushSync:$h,\ngetPublicRootInstance:ei,findHostInstance:ci,findHostInstanceWithNoPortals:function(a){a=md(a);return null===a?null:a.stateNode},injectIntoDevTools:fi};function ii(a,b,c){var d=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:gc,key:null==d?null:\"\"+d,children:a,containerInfo:b,implementation:c}}Kb.injectFiberControlledHostComponent(We);\nfunction ji(a){this._expirationTime=yh();this._root=a;this._callbacks=this._next=null;this._hasChildren=this._didComplete=!1;this._children=null;this._defer=!0}ji.prototype.render=function(a){this._defer?void 0:A(\"250\");this._hasChildren=!0;this._children=a;var b=this._root._internalRoot,c=this._expirationTime,d=new ki;bi(a,b,null,c,d._onCommit);return d};ji.prototype.then=function(a){if(this._didComplete)a();else{var b=this._callbacks;null===b&&(b=this._callbacks=[]);b.push(a)}};\nji.prototype.commit=function(){var a=this._root._internalRoot,b=a.firstBatch;this._defer&&null!==b?void 0:A(\"251\");if(this._hasChildren){var c=this._expirationTime;if(b!==this){this._hasChildren&&(c=this._expirationTime=b._expirationTime,this.render(this._children));for(var d=null,e=b;e!==this;)d=e,e=e._next;null===d?A(\"251\"):void 0;d._next=e._next;this._next=b;a.firstBatch=this}this._defer=!1;Wh(a,c);b=this._next;this._next=null;b=a.firstBatch=b;null!==b&&b._hasChildren&&b.render(b._children)}else this._next=\nnull,this._defer=!1};ji.prototype._onComplete=function(){if(!this._didComplete){this._didComplete=!0;var a=this._callbacks;if(null!==a)for(var b=0;b<a.length;b++)(0,a[b])()}};function ki(){this._callbacks=null;this._didCommit=!1;this._onCommit=this._onCommit.bind(this)}ki.prototype.then=function(a){if(this._didCommit)a();else{var b=this._callbacks;null===b&&(b=this._callbacks=[]);b.push(a)}};\nki.prototype._onCommit=function(){if(!this._didCommit){this._didCommit=!0;var a=this._callbacks;if(null!==a)for(var b=0;b<a.length;b++){var c=a[b];\"function\"!==typeof c?A(\"191\",c):void 0;c()}}};function li(a,b,c){this._internalRoot=Af(a,b,c)}li.prototype.render=function(a,b){var c=this._internalRoot,d=new ki;b=void 0===b?null:b;null!==b&&d.then(b);di(a,c,null,d._onCommit);return d};\nli.prototype.unmount=function(a){var b=this._internalRoot,c=new ki;a=void 0===a?null:a;null!==a&&c.then(a);di(null,b,null,c._onCommit);return c};li.prototype.legacy_renderSubtreeIntoContainer=function(a,b,c){var d=this._internalRoot,e=new ki;c=void 0===c?null:c;null!==c&&e.then(c);di(b,d,a,e._onCommit);return e};\nli.prototype.createBatch=function(){var a=new ji(this),b=a._expirationTime,c=this._internalRoot,d=c.firstBatch;if(null===d)c.firstBatch=a,a._next=null;else{for(c=null;null!==d&&d._expirationTime<=b;)c=d,d=d._next;a._next=d;null!==c&&(c._next=a)}return a};function mi(a){return!(!a||1!==a.nodeType&&9!==a.nodeType&&11!==a.nodeType&&(8!==a.nodeType||\" react-mount-point-unstable \"!==a.nodeValue))}Sb=gi.batchedUpdates;Tb=gi.interactiveUpdates;Ub=gi.flushInteractiveUpdates;\nfunction ni(a,b){b||(b=a?9===a.nodeType?a.documentElement:a.firstChild:null,b=!(!b||1!==b.nodeType||!b.hasAttribute(\"data-reactroot\")));if(!b)for(var c;c=a.lastChild;)a.removeChild(c);return new li(a,!1,b)}\nfunction oi(a,b,c,d,e){mi(c)?void 0:A(\"200\");var f=c._reactRootContainer;if(f){if(\"function\"===typeof e){var g=e;e=function(){var a=ei(f._internalRoot);g.call(a)}}null!=a?f.legacy_renderSubtreeIntoContainer(a,b,e):f.render(b,e)}else{f=c._reactRootContainer=ni(c,d);if(\"function\"===typeof e){var h=e;e=function(){var a=ei(f._internalRoot);h.call(a)}}Zh(function(){null!=a?f.legacy_renderSubtreeIntoContainer(a,b,e):f.render(b,e)})}return ei(f._internalRoot)}\nfunction pi(a,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;mi(b)?void 0:A(\"200\");return ii(a,b,null,c)}\nvar qi={createPortal:pi,findDOMNode:function(a){return null==a?null:1===a.nodeType?a:ci(a)},hydrate:function(a,b,c){return oi(null,a,b,!0,c)},render:function(a,b,c){return oi(null,a,b,!1,c)},unstable_renderSubtreeIntoContainer:function(a,b,c,d){null==a||void 0===a._reactInternalFiber?A(\"38\"):void 0;return oi(a,b,c,!1,d)},unmountComponentAtNode:function(a){mi(a)?void 0:A(\"40\");return a._reactRootContainer?(Zh(function(){oi(null,null,a,!1,function(){a._reactRootContainer=null})}),!0):!1},unstable_createPortal:function(){return pi.apply(void 0,\narguments)},unstable_batchedUpdates:Yh,unstable_deferredUpdates:Dh,flushSync:$h,unstable_flushControlled:ai,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{EventPluginHub:Ka,EventPluginRegistry:va,EventPropagators:$a,ReactControlledComponent:Rb,ReactDOMComponentTree:Qa,ReactDOMEventListener:Md},unstable_createRoot:function(a,b){return new li(a,!0,null!=b&&!0===b.hydrate)}};fi({findFiberByHostInstance:Na,bundleType:0,version:\"16.4.0\",rendererPackageName:\"react-dom\"});\nvar vi={default:qi},wi=vi&&qi||vi;module.exports=wi.default?wi.default:wi;\n\n\n/***/ }),\n/* 22 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\n\n\n\nvar canUseDOM = !!(typeof window !== 'undefined' && window.document && window.document.createElement);\n\n/**\n * Simple, lightweight module assisting with the detection and context of\n * Worker. Helps avoid circular dependencies and allows code to reason about\n * whether or not they are in a Worker, even if they never include the main\n * `ReactWorker` dependency.\n */\nvar ExecutionEnvironment = {\n\n  canUseDOM: canUseDOM,\n\n  canUseWorkers: typeof Worker !== 'undefined',\n\n  canUseEventListeners: canUseDOM && !!(window.addEventListener || window.attachEvent),\n\n  canUseViewport: canUseDOM && !!window.screen,\n\n  isInWorker: !canUseDOM // For now, this is true - might change in the future.\n\n};\n\nmodule.exports = ExecutionEnvironment;\n\n/***/ }),\n/* 23 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @typechecks\n */\n\n/* eslint-disable fb-www/typeof-undefined */\n\n/**\n * Same as document.activeElement but wraps in a try-catch block. In IE it is\n * not safe to call document.activeElement if there is nothing focused.\n *\n * The activeElement will be null only if the document or document body is not\n * yet defined.\n *\n * @param {?DOMDocument} doc Defaults to current document.\n * @return {?DOMElement}\n */\nfunction getActiveElement(doc) /*?DOMElement*/{\n  doc = doc || (typeof document !== 'undefined' ? document : undefined);\n  if (typeof doc === 'undefined') {\n    return null;\n  }\n  try {\n    return doc.activeElement || doc.body;\n  } catch (e) {\n    return doc.body;\n  }\n}\n\nmodule.exports = getActiveElement;\n\n/***/ }),\n/* 24 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @typechecks\n * \n */\n\n/*eslint-disable no-self-compare */\n\n\n\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\n\n/**\n * inlined Object.is polyfill to avoid requiring consumers ship their own\n * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/is\n */\nfunction is(x, y) {\n  // SameValue algorithm\n  if (x === y) {\n    // Steps 1-5, 7-10\n    // Steps 6.b-6.e: +0 != -0\n    // Added the nonzero y check to make Flow happy, but it is redundant\n    return x !== 0 || y !== 0 || 1 / x === 1 / y;\n  } else {\n    // Step 6.a: NaN == NaN\n    return x !== x && y !== y;\n  }\n}\n\n/**\n * Performs equality by iterating through keys on an object and returning false\n * when any key has values which are not strictly equal between the arguments.\n * Returns true when the values of all keys are strictly equal.\n */\nfunction shallowEqual(objA, objB) {\n  if (is(objA, objB)) {\n    return true;\n  }\n\n  if (typeof objA !== 'object' || objA === null || typeof objB !== 'object' || objB === null) {\n    return false;\n  }\n\n  var keysA = Object.keys(objA);\n  var keysB = Object.keys(objB);\n\n  if (keysA.length !== keysB.length) {\n    return false;\n  }\n\n  // Test for A's keys different from B.\n  for (var i = 0; i < keysA.length; i++) {\n    if (!hasOwnProperty.call(objB, keysA[i]) || !is(objA[keysA[i]], objB[keysA[i]])) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nmodule.exports = shallowEqual;\n\n/***/ }),\n/* 25 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * \n */\n\nvar isTextNode = __webpack_require__(26);\n\n/*eslint-disable no-bitwise */\n\n/**\n * Checks if a given DOM node contains or is another DOM node.\n */\nfunction containsNode(outerNode, innerNode) {\n  if (!outerNode || !innerNode) {\n    return false;\n  } else if (outerNode === innerNode) {\n    return true;\n  } else if (isTextNode(outerNode)) {\n    return false;\n  } else if (isTextNode(innerNode)) {\n    return containsNode(outerNode, innerNode.parentNode);\n  } else if ('contains' in outerNode) {\n    return outerNode.contains(innerNode);\n  } else if (outerNode.compareDocumentPosition) {\n    return !!(outerNode.compareDocumentPosition(innerNode) & 16);\n  } else {\n    return false;\n  }\n}\n\nmodule.exports = containsNode;\n\n/***/ }),\n/* 26 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @typechecks\n */\n\nvar isNode = __webpack_require__(27);\n\n/**\n * @param {*} object The object to check.\n * @return {boolean} Whether or not the object is a DOM text node.\n */\nfunction isTextNode(object) {\n  return isNode(object) && object.nodeType == 3;\n}\n\nmodule.exports = isTextNode;\n\n/***/ }),\n/* 27 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @typechecks\n */\n\n/**\n * @param {*} object The object to check.\n * @return {boolean} Whether or not the object is a DOM node.\n */\nfunction isNode(object) {\n  var doc = object ? object.ownerDocument || object : document;\n  var defaultView = doc.defaultView || window;\n  return !!(object && (typeof defaultView.Node === 'function' ? object instanceof defaultView.Node : typeof object === 'object' && typeof object.nodeType === 'number' && typeof object.nodeName === 'string'));\n}\n\nmodule.exports = isNode;\n\n/***/ }),\n/* 28 */\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n/* 29 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_react__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__App_css__ = __webpack_require__(30);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__App_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__App_css__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__Main__ = __webpack_require__(31);\nvar _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if(\"value\"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");}return call&&(typeof call===\"object\"||typeof call===\"function\")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!==\"function\"&&superClass!==null){throw new TypeError(\"Super expression must either be null or a function, not \"+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var App=function(_Component){_inherits(App,_Component);function App(){_classCallCheck(this,App);return _possibleConstructorReturn(this,(App.__proto__||Object.getPrototypeOf(App)).apply(this,arguments));}_createClass(App,[{key:'render',value:function render(){return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('div',{className:'App'},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_2__Main__[\"a\" /* default */],null));}}]);return App;}(__WEBPACK_IMPORTED_MODULE_0_react__[\"Component\"]);/* harmony default export */ __webpack_exports__[\"a\"] = (App);\n\n/***/ }),\n/* 30 */\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n/* 31 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_react__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__Sidebar__ = __webpack_require__(32);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__NoteList__ = __webpack_require__(36);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__NoteForm__ = __webpack_require__(37);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__rebase__ = __webpack_require__(38);\nvar _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if(\"value\"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++){arr2[i]=arr[i];}return arr2;}else{return Array.from(arr);}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");}return call&&(typeof call===\"object\"||typeof call===\"function\")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!==\"function\"&&superClass!==null){throw new TypeError(\"Super expression must either be null or a function, not \"+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var counter=0;var Main=function(_React$Component){_inherits(Main,_React$Component);function Main(props){_classCallCheck(this,Main);var _this=_possibleConstructorReturn(this,(Main.__proto__||Object.getPrototypeOf(Main)).call(this,props));_this.saveNote=function(note){var tempArr=[].concat(_toConsumableArray(_this.state.arr));var index=tempArr.findIndex(function(x){return note.id===x.id;});if(index===-1){note.id=counter++;tempArr.push(note);}else{tempArr[index]=note;}_this.setState({arr:tempArr});_this.setState({currentNote:note});//localStorage.setItem('array', JSON.stringify(this.state.arr));\n};_this.setCurrentNote=function(data){// let temp= Object.assign({}, this.state.arr)\n// temp.title=data.title\n// temp.body=data.body\n// this.setState(\n//     {\n//         arr:temp\n//     }\n// )\n// this.setState(\n//     {\n//         arr:{title:data.title , body:data.body}\n//     }\n// )\n//this.setState({arr:data})\n//console.log(data)\n_this.setState({currentNote:data});};_this.blankNote=function(){return{title:'',body:''};};_this.resetNote=function(){return _this.setCurrentNote(_this.blankNote());};_this.deleteNote=function(currentNote){var tempArr=[].concat(_toConsumableArray(_this.state.arr));var index=tempArr.indexOf(currentNote);console.log(index);if(index===-1){return;}tempArr.splice(index,1);_this.setState({arr:tempArr,currentNote:_this.blankNote()});//localStorage.setItem('array', JSON.stringify(this.state.arr));\n};_this.state={//arr: this.blankNote()\n// arr: JSON.parse(localStorage.getItem('array')),\narr:[],currentNote:_this.blankNote()};return _this;}_createClass(Main,[{key:'componentWillMount',value:function componentWillMount(){//console.log(this.state.arr)\n__WEBPACK_IMPORTED_MODULE_4__rebase__[\"a\" /* default */].syncState('arr',{context:this,state:'arr',asArray:true});}},{key:'render',value:function render(){return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('div',{className:'Main'},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_1__Sidebar__[\"a\" /* default */],{resetNote:this.resetNote}),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_2__NoteList__[\"a\" /* default */],{setCurrentNote:this.setCurrentNote,arr:this.state.arr}),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_3__NoteForm__[\"a\" /* default */],{currentNote:this.state.currentNote,saveNote:this.saveNote,deleteNote:this.deleteNote}));}}]);return Main;}(__WEBPACK_IMPORTED_MODULE_0_react___default.a.Component);// const style ={\n// display: 'flex',\n// height: '100vh',\n// alignItems: 'strech'\n// }\n// class Main extends React.Component{\n//     render(){\n//         return(\n//             <div className=\"Main\">\n//                 MAIN!\n//                 </div>\n//         )\n//     }\n// }\n/* harmony default export */ __webpack_exports__[\"a\"] = (Main);\n\n/***/ }),\n/* 32 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_react__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__quill_svg__ = __webpack_require__(33);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__quill_svg___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__quill_svg__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__new_png__ = __webpack_require__(34);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__new_png___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2__new_png__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__new_hover_png__ = __webpack_require__(35);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__new_hover_png___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3__new_hover_png__);\n// import './Sidebar.css'\nvar Sidebar=function Sidebar(_ref){var resetNote=_ref.resetNote;return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('nav',{className:'Sidebar'},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('div',{className:'logo'},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('img',{src:__WEBPACK_IMPORTED_MODULE_1__quill_svg___default.a,alt:'Noteherder'})),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('a',{onClick:function onClick(ev){ev.preventDefault();resetNote();},className:'new-note',href:'/notes'},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('img',{src:__WEBPACK_IMPORTED_MODULE_3__new_hover_png___default.a,alt:'New note'}),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('img',{className:'outline',src:__WEBPACK_IMPORTED_MODULE_2__new_png___default.a,alt:'New note'})),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('div',{className:'SignOut'},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('button',null,__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('i',{className:'fa fa-sign-out'}))));};// const styles = {\n//     sidebar:{\n//         width:'6rem',\n//         backgroundColor:'#f3f3f3',\n//         padding:'0.5rem 0',\n//         display:'flex',\n//         flexDirection:'column',\n//         alignItems:'center'\n//     },\n//     logo:{\n//     }\n// }\n/* harmony default export */ __webpack_exports__[\"a\"] = (Sidebar);\n\n/***/ }),\n/* 33 */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"static/media/quill.d2ea47fa.svg\";\n\n/***/ }),\n/* 34 */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"static/media/new.2718a414.png\";\n\n/***/ }),\n/* 35 */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"static/media/new-hover.751b2c31.png\";\n\n/***/ }),\n/* 36 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_react__);\n// import './NoteList.css'\nvar NoteList=function NoteList(props){// constructor(props){\n//   super(props)\n//   this.state={\n//     note:[\n//       {title:'Kohlrabi welsh', body:'Veggies es bonus vobis, proinde vos postulo essum magis kohlrabi welsh onion daikon amaranth tatsoi tomatillo melon azuki bean garlic.'},\n//       {title:'Dandelion cucumber', body:'Gumbo beet greens corn soko endive gumbo gourd. Parsley shallot courgette tatsoi pea sprouts fava bean collard greens dandelion okra wakame tomato. Dandelion cucumber earthnut pea peanut soko zucchini.'},\n//       {title:'Prairie turnip',body:'Nori grape silver beet broccoli kombu beet greens fava bean potato quandong celery. Bunya nuts black-eyed pea prairie turnip leek lentil turnip greens parsnip.'}\n//     ]\n//   }\n// }\n// const temp = [...props.arr];\nreturn __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('div',{className:'NoteList'},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('h3',null,'Notes'),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('ul',{id:'notes'},console.log(props.arr),props.arr.map(function(n){return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('a',{onClick:function onClick(){props.setCurrentNote(n);},key:props.arr.indexOf(n)},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('li',null,__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('div',{className:'note'},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('div',{className:'note-title'},n.title),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('div',{className:'note-body'},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('p',null,n.body)))));})));};/* harmony default export */ __webpack_exports__[\"a\"] = (NoteList);\n\n/***/ }),\n/* 37 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_react__);\n// import './NoteForm.css'\n// const NoteForm = () => {\n//     return(\n//         <div className=\"NoteForm\">\n//           <div className=\"form-actions\">\n//             <button type=\"button\">\n//               <i className=\"fa fa-trash-o\"></i>\n//             </button>\n//           </div>\n//           <form>\n//             <p>\n//               <input\n//                 type=\"text\"\n//                 name=\"title\"\n//                 placeholder=\"Title your note\"\n//               />\n//             </p>\n//             <textarea name=\"body\"></textarea>\n//           </form>\n//         </div>\n//     )\n// }\nvar NoteForm=function NoteForm(_ref){var currentNote=_ref.currentNote,saveNote=_ref.saveNote,deleteNote=_ref.deleteNote;var handleChanges=function handleChanges(ev){var temp=Object.assign({},currentNote);temp[ev.target.name]=ev.target.value;saveNote(temp);};return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"div\",{className:\"NoteForm\"},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"div\",{className:\"form-actions\"},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"button\",{type:\"button\",onClick:function onClick(){return deleteNote(currentNote);}},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"i\",{className:\"fa fa-trash-o\"}))),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"form\",null,__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"p\",null,__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"input\",{type:\"text\",name:\"title\",placeholder:\"Title Your Note\",value:currentNote.title,onChange:function onChange(ev){return handleChanges(ev);}})),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"textarea\",{name:\"body\",value:currentNote.body,onChange:function onChange(ev){return handleChanges(ev);}})));};/* harmony default export */ __webpack_exports__[\"a\"] = (NoteForm);\n\n/***/ }),\n/* 38 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_re_base__ = __webpack_require__(39);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_re_base___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_re_base__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_firebase_app__ = __webpack_require__(7);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_firebase_app___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_firebase_app__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_firebase_database__ = __webpack_require__(45);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_firebase_database___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_firebase_database__);\nvar app=__WEBPACK_IMPORTED_MODULE_1_firebase_app___default.a.initializeApp({apiKey:\"AIzaSyDxePri8QOUvm2hMbGCKjLeyG7rI-q90UI\",authDomain:\"noteherder-dd790.firebaseapp.com\",databaseURL:\"https://noteherder-dd790.firebaseio.com\",projectId:\"noteherder-dd790\",storageBucket:\"noteherder-dd790.appspot.com\",messagingSenderId:\"875679986580\"});var db=__WEBPACK_IMPORTED_MODULE_1_firebase_app___default.a.database(app);var base=__WEBPACK_IMPORTED_MODULE_0_re_base___default.a.createClass(db);/* harmony default export */ __webpack_exports__[\"a\"] = (base);\n\n/***/ }),\n/* 39 */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__(40);\n\n\n\n/***/ }),\n/* 40 */\n/***/ (function(module, exports, __webpack_require__) {\n\n(function webpackUniversalModuleDefinition(root, factory) {\n\tif(true)\n\t\tmodule.exports = factory(__webpack_require__(7));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"firebase/app\"], factory);\n\telse {\n\t\tvar a = typeof exports === 'object' ? factory(require(\"firebase/app\")) : factory(root[\"firebase/app\"]);\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(this, function(__WEBPACK_EXTERNAL_MODULE_6__) {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n\n\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__(1);\n\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\n\tvar _utils = __webpack_require__(2);\n\n\tvar _validators = __webpack_require__(5);\n\n\tvar _push2 = __webpack_require__(7);\n\n\tvar _push3 = _interopRequireDefault(_push2);\n\n\tvar _fetch2 = __webpack_require__(8);\n\n\tvar _fetch3 = _interopRequireDefault(_fetch2);\n\n\tvar _post2 = __webpack_require__(9);\n\n\tvar _post3 = _interopRequireDefault(_post2);\n\n\tvar _sync2 = __webpack_require__(10);\n\n\tvar _sync3 = _interopRequireDefault(_sync2);\n\n\tvar _bind2 = __webpack_require__(11);\n\n\tvar _bind3 = _interopRequireDefault(_bind2);\n\n\tvar _update2 = __webpack_require__(12);\n\n\tvar _update3 = _interopRequireDefault(_update2);\n\n\tvar _reset2 = __webpack_require__(13);\n\n\tvar _reset3 = _interopRequireDefault(_reset2);\n\n\tvar _removeBinding2 = __webpack_require__(3);\n\n\tvar _removeBinding3 = _interopRequireDefault(_removeBinding2);\n\n\tvar _remove2 = __webpack_require__(14);\n\n\tvar _remove3 = _interopRequireDefault(_remove2);\n\n\tvar _fsSync2 = __webpack_require__(15);\n\n\tvar _fsSync3 = _interopRequireDefault(_fsSync2);\n\n\tvar _fsRemoveBinding2 = __webpack_require__(4);\n\n\tvar _fsRemoveBinding3 = _interopRequireDefault(_fsRemoveBinding2);\n\n\tvar _fsBind2 = __webpack_require__(16);\n\n\tvar _fsBind3 = _interopRequireDefault(_fsBind2);\n\n\tvar _fsGet2 = __webpack_require__(17);\n\n\tvar _fsGet3 = _interopRequireDefault(_fsGet2);\n\n\tvar _fsRemoveDoc2 = __webpack_require__(18);\n\n\tvar _fsRemoveDoc3 = _interopRequireDefault(_fsRemoveDoc2);\n\n\tvar _fsAddToCollection2 = __webpack_require__(19);\n\n\tvar _fsAddToCollection3 = _interopRequireDefault(_fsAddToCollection2);\n\n\tvar _fsRemoveFromCollection2 = __webpack_require__(20);\n\n\tvar _fsRemoveFromCollection3 = _interopRequireDefault(_fsRemoveFromCollection2);\n\n\tvar _fsUpdateDoc2 = __webpack_require__(21);\n\n\tvar _fsUpdateDoc3 = _interopRequireDefault(_fsUpdateDoc2);\n\n\tvar _fsReset2 = __webpack_require__(22);\n\n\tvar _fsReset3 = _interopRequireDefault(_fsReset2);\n\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n\t//database\n\t//helpers\n\tmodule.exports = function () {\n\t  function init(db) {\n\t    return function () {\n\t      var refs = new Map();\n\t      var listeners = new Map();\n\t      var syncs = new WeakMap();\n\n\t      if (typeof db.ref === 'function') {\n\t        var rebase = {\n\t          initializedApp: db.app,\n\t          listenTo: function listenTo(endpoint, options) {\n\t            return _bind3.default.call(this, endpoint, options, 'listenTo', {\n\t              db: db,\n\t              refs: refs,\n\t              listeners: listeners,\n\t              syncs: syncs\n\t            });\n\t          },\n\t          bindToState: function bindToState(endpoint, options) {\n\t            return _bind3.default.call(this, endpoint, options, 'bindToState', {\n\t              db: db,\n\t              refs: refs,\n\t              listeners: listeners\n\t            });\n\t          },\n\t          syncState: function syncState(endpoint, options) {\n\t            return _sync3.default.call(this, endpoint, options, {\n\t              db: db,\n\t              refs: refs,\n\t              listeners: listeners,\n\t              syncs: syncs\n\t            });\n\t          },\n\t          fetch: function fetch(endpoint, options) {\n\t            return (0, _fetch3.default)(endpoint, options, db);\n\t          },\n\t          post: function post(endpoint, options) {\n\t            return (0, _post3.default)(endpoint, options, db);\n\t          },\n\t          update: function update(endpoint, options) {\n\t            return (0, _update3.default)(endpoint, options, { db: db });\n\t          },\n\t          push: function push(endpoint, options) {\n\t            return (0, _push3.default)(endpoint, options, db);\n\t          },\n\t          removeBinding: function removeBinding(binding) {\n\t            (0, _removeBinding3.default)(binding, {\n\t              refs: refs,\n\t              listeners: listeners,\n\t              syncs: syncs\n\t            });\n\t          },\n\t          remove: function remove(endpoint, fn) {\n\t            return (0, _remove3.default)(endpoint, db, fn);\n\t          },\n\t          reset: function reset() {\n\t            return (0, _reset3.default)({\n\t              refs: refs,\n\t              listeners: listeners,\n\t              syncs: syncs\n\t            });\n\t          }\n\t        };\n\t      } else {\n\t        var rebase = {\n\t          initializedApp: db.app,\n\t          bindDoc: function bindDoc(path, options) {\n\t            return _fsBind3.default.call(this, path, options, 'bindDoc', {\n\t              db: db,\n\t              refs: refs,\n\t              listeners: listeners\n\t            });\n\t          },\n\t          bindCollection: function bindCollection(path, options) {\n\t            return _fsBind3.default.call(this, path, options, 'bindCollection', {\n\t              db: db,\n\t              refs: refs,\n\t              listeners: listeners\n\t            });\n\t          },\n\t          syncDoc: function syncDoc(doc, options) {\n\t            return _fsSync3.default.call(this, doc, options, {\n\t              db: db,\n\t              refs: refs,\n\t              listeners: listeners,\n\t              syncs: syncs\n\t            });\n\t          },\n\t          listenToDoc: function listenToDoc(doc, options) {\n\t            return _fsBind3.default.call(this, doc, options, 'listenToDoc', {\n\t              db: db,\n\t              refs: refs,\n\t              listeners: listeners\n\t            });\n\t          },\n\t          listenToCollection: function listenToCollection(path, options) {\n\t            return _fsBind3.default.call(this, path, options, 'listenToCollection', {\n\t              db: db,\n\t              refs: refs,\n\t              listeners: listeners\n\t            });\n\t          },\n\t          addToCollection: function addToCollection(path, doc, key) {\n\t            return _fsAddToCollection3.default.call(this, path, doc, db, key);\n\t          },\n\t          updateDoc: function updateDoc(path, doc, options) {\n\t            return _fsUpdateDoc3.default.call(this, path, doc, db);\n\t          },\n\t          get: function get(path, options) {\n\t            return _fsGet3.default.call(this, path, options, db);\n\t          },\n\t          removeDoc: function removeDoc(path) {\n\t            return (0, _fsRemoveDoc3.default)(path, db);\n\t          },\n\t          removeFromCollection: function removeFromCollection(path, options) {\n\t            return (0, _fsRemoveFromCollection3.default)(path, db, options);\n\t          },\n\t          removeBinding: function removeBinding(binding) {\n\t            (0, _fsRemoveBinding3.default)(binding, {\n\t              refs: refs,\n\t              listeners: listeners,\n\t              syncs: syncs\n\t            });\n\t          },\n\t          reset: function reset() {\n\t            return (0, _fsReset3.default)({\n\t              refs: refs,\n\t              listeners: listeners,\n\t              syncs: syncs\n\t            });\n\t          }\n\t        };\n\t      }\n\t      return rebase;\n\t    }();\n\t  }\n\n\t  return {\n\t    createClass: function createClass(db) {\n\t      (0, _validators._validateDatabase)(db);\n\t      return init(db);\n\t    }\n\t  };\n\t}();\n\n\t//firestore\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports._fsCreateRef = exports._fsSetUnmountHandler = exports._setData = exports._handleError = exports._createNestedObject = exports._setUnmountHandler = exports._addFirestoreListener = exports._addListener = exports._fsUpdateSyncState = exports._updateSyncState = exports._firebaseRefsMixin = exports._addSync = exports._hasOwnNestedProperty = exports._getSegmentCount = exports._getNestedObject = exports._isNestedPath = exports._isObject = exports._isValid = exports._toArray = exports._fsPrepareData = exports._prepareData = exports._throwError = exports._setState = exports._returnRef = exports._addFirestoreQuery = exports._addQueries = exports._createHash = undefined;\n\n\tvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n\tvar _removeBinding2 = __webpack_require__(3);\n\n\tvar _removeBinding3 = _interopRequireDefault(_removeBinding2);\n\n\tvar _fsRemoveBinding2 = __webpack_require__(4);\n\n\tvar _fsRemoveBinding3 = _interopRequireDefault(_fsRemoveBinding2);\n\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n\tfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n\tvar _isObject = function _isObject(obj) {\n\t  return Object.prototype.toString.call(obj) === '[object Object]' ? true : false;\n\t};\n\n\tvar _toArray = function _toArray(snapshot) {\n\t  var arr = [];\n\t  snapshot.forEach(function (childSnapshot) {\n\t    var val = childSnapshot.val();\n\t    if (_isObject(val)) {\n\t      val.key = childSnapshot.key;\n\t    }\n\t    arr.push(val);\n\t  });\n\t  return arr;\n\t};\n\n\tvar _isValid = function _isValid(value) {\n\t  return typeof value === 'string' || typeof value === 'number' || typeof value === 'boolean' || (typeof value === 'undefined' ? 'undefined' : _typeof(value)) === 'object' ? true : false;\n\t};\n\n\tvar _isNestedPath = function _isNestedPath(path) {\n\t  return path.split('.').length > 1 ? true : false;\n\t};\n\n\tvar _createNestedObject = function _createNestedObject(path, value) {\n\t  var obj = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n\t  var keys = path.split('.');\n\t  var lastKey = value === undefined ? false : keys.pop();\n\t  var root = obj;\n\n\t  var _iteratorNormalCompletion = true;\n\t  var _didIteratorError = false;\n\t  var _iteratorError = undefined;\n\n\t  try {\n\t    for (var _iterator = keys[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n\t      var key = _step.value;\n\n\t      obj = obj[key] = obj[key] || {};\n\t    }\n\t  } catch (err) {\n\t    _didIteratorError = true;\n\t    _iteratorError = err;\n\t  } finally {\n\t    try {\n\t      if (!_iteratorNormalCompletion && _iterator.return) {\n\t        _iterator.return();\n\t      }\n\t    } finally {\n\t      if (_didIteratorError) {\n\t        throw _iteratorError;\n\t      }\n\t    }\n\t  }\n\n\t  if (lastKey) obj[lastKey] = value;\n\n\t  return root;\n\t};\n\n\tvar _getNestedObject = function _getNestedObject(obj, path) {\n\t  if (_isNestedPath(path) === false) return;\n\n\t  var keys = path.split('.');\n\t  var _iteratorNormalCompletion2 = true;\n\t  var _didIteratorError2 = false;\n\t  var _iteratorError2 = undefined;\n\n\t  try {\n\t    for (var _iterator2 = keys[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n\t      var key = _step2.value;\n\n\t      if (!obj || (typeof obj === 'undefined' ? 'undefined' : _typeof(obj)) !== 'object') return;\n\t      obj = obj[key];\n\t    }\n\t  } catch (err) {\n\t    _didIteratorError2 = true;\n\t    _iteratorError2 = err;\n\t  } finally {\n\t    try {\n\t      if (!_iteratorNormalCompletion2 && _iterator2.return) {\n\t        _iterator2.return();\n\t      }\n\t    } finally {\n\t      if (_didIteratorError2) {\n\t        throw _iteratorError2;\n\t      }\n\t    }\n\t  }\n\n\t  return obj;\n\t};\n\n\tvar _hasOwnNestedProperty = function _hasOwnNestedProperty(obj, path) {\n\t  return _getNestedObject(obj, path) === undefined ? false : true;\n\t};\n\n\tvar _prepareData = function _prepareData(snapshot) {\n\t  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\t  var defaultValue = options.defaultValue,\n\t      asArray = options.asArray;\n\n\t  var data = snapshot.val();\n\t  if (data === null && _isValid(defaultValue)) return defaultValue;\n\t  if (asArray === true) return _toArray(snapshot);\n\t  return data === null ? {} : data;\n\t};\n\n\tvar _addSync = function _addSync(context, sync, syncs) {\n\t  var existingSyncs = syncs.get(context) || [];\n\t  existingSyncs.push(sync);\n\t  syncs.set(context, existingSyncs);\n\t};\n\n\tvar _throwError = function _throwError(msg, code) {\n\t  var err = new Error('REBASE: ' + msg);\n\t  err.code = code;\n\t  throw err;\n\t};\n\n\tvar _setState = function _setState(newState) {\n\t  this.setState(newState);\n\t};\n\n\tvar _returnRef = function _returnRef(endpoint, method, id, context) {\n\t  return { endpoint: endpoint, method: method, id: id, context: context };\n\t};\n\n\tvar _addQueries = function _addQueries(ref, queries) {\n\t  var needArgs = {\n\t    limitToFirst: true,\n\t    limitToLast: true,\n\t    orderByChild: true,\n\t    startAt: true,\n\t    endAt: true,\n\t    equalTo: true\n\t  };\n\n\t  for (var key in queries) {\n\t    /* istanbul ignore else */\n\t    if (queries.hasOwnProperty(key)) {\n\t      if (needArgs[key]) {\n\t        ref = ref[key](queries[key]);\n\t      } else {\n\t        ref = ref[key]();\n\t      }\n\t    }\n\t  }\n\t  return ref;\n\t};\n\n\tvar _addFirestoreQuery = function _addFirestoreQuery(ref, query) {\n\t  if (query) {\n\t    return query(ref);\n\t  }\n\t  return ref;\n\t};\n\n\tvar _createHash = function _createHash(endpoint, invoker) {\n\t  var hash = 0;\n\t  var str = endpoint + invoker + Math.random();\n\t  for (var i = 0; i < str.length; i++) {\n\t    var char = str.charCodeAt(i);\n\t    hash = (hash << 5) - hash + char;\n\t    hash = hash & hash;\n\t  }\n\t  return hash;\n\t};\n\n\tvar _firebaseRefsMixin = function _firebaseRefsMixin(id, ref, refs) {\n\t  refs.set(id, ref);\n\t};\n\n\tvar _handleError = function _handleError(onFailure, err) {\n\t  if (err && typeof onFailure === 'function') {\n\t    onFailure(err);\n\t  }\n\t};\n\n\tvar _setUnmountHandler = function _setUnmountHandler(context, id, refs, listeners, syncs) {\n\t  var removeListeners = function removeListeners() {\n\t    (0, _removeBinding3.default)({ context: context, id: id }, { refs: refs, listeners: listeners, syncs: syncs });\n\t  };\n\t  if (typeof context.componentWillUnmount === 'function') {\n\t    var unmount = context.componentWillUnmount;\n\t  }\n\t  context.componentWillUnmount = function () {\n\t    removeListeners();\n\t    if (unmount) unmount.call(context);\n\t  };\n\t};\n\n\tvar _fsSetUnmountHandler = function _fsSetUnmountHandler(context, id, refs, listeners, syncs) {\n\t  var removeListeners = function removeListeners() {\n\t    (0, _fsRemoveBinding3.default)({ context: context, id: id }, { refs: refs, listeners: listeners, syncs: syncs });\n\t  };\n\t  if (typeof context.componentWillUnmount === 'function') {\n\t    var unmount = context.componentWillUnmount;\n\t  }\n\t  context.componentWillUnmount = function () {\n\t    removeListeners();\n\t    if (unmount) unmount.call(context);\n\t  };\n\t};\n\n\tvar _setData = function _setData(ref, data, handleError, keepKeys) {\n\t  if (Array.isArray(data) && keepKeys) {\n\t    var shouldConvertToObject = data.reduce(function (acc, curr) {\n\t      return acc ? acc : _isObject(curr) && curr.hasOwnProperty('key');\n\t    }, false);\n\t    if (shouldConvertToObject) {\n\t      data = data.reduce(function (acc, item) {\n\t        acc[item.key] = item;\n\t        return acc;\n\t      }, {});\n\t    }\n\t  }\n\t  ref.set(data, handleError);\n\t};\n\n\tvar _updateSyncState = function _updateSyncState(ref, onFailure, keepKeys, data) {\n\t  if (_isObject(data)) {\n\t    for (var prop in data) {\n\t      //allow timestamps to be set\n\t      if (prop !== '.sv') {\n\t        _updateSyncState(ref.child(prop), onFailure, keepKeys, data[prop]);\n\t      } else {\n\t        _setData(ref, data, _handleError.bind(null, onFailure), keepKeys);\n\t      }\n\t    }\n\t  } else {\n\t    _setData(ref, data, _handleError.bind(null, onFailure), keepKeys);\n\t  }\n\t};\n\n\tvar _fsUpdateSyncState = function _fsUpdateSyncState(ref, data) {\n\t  ref.set(data);\n\t};\n\n\tvar _addListener = function _addListener(id, invoker, options, ref, listeners) {\n\t  ref = _addQueries(ref, options.queries);\n\t  var boundOnFailure = typeof options.onFailure === 'function' ? options.onFailure.bind(options.context) : null;\n\t  listeners.set(id, ref.on('value', function (snapshot) {\n\t    var data = _prepareData(snapshot, options);\n\t    if (invoker === 'listenTo') {\n\t      options.then.call(options.context, data);\n\t    } else {\n\t      var newState = _defineProperty({}, options.state, data);\n\t      if (_isNestedPath(options.state)) {\n\t        var root = options.state.split('.')[0];\n\t        // Merge the previous state with the new one\n\t        var prevState = _defineProperty({}, root, options.context.state[root]);\n\t        newState = _createNestedObject(options.state, data, prevState);\n\t      }\n\t      if (invoker === 'syncState') {\n\t        options.reactSetState.call(options.context, newState);\n\t        if (options.then && options.then.called === false) {\n\t          options.then.call(options.context);\n\t          options.then.called = true;\n\t        }\n\t      } else if (invoker === 'bindToState') {\n\t        _setState.call(options.context, newState);\n\t        if (options.then && options.then.called === false) {\n\t          options.then.call(options.context);\n\t          options.then.called = true;\n\t        }\n\t      }\n\t    }\n\t  }, boundOnFailure));\n\t};\n\n\tvar _addFirestoreListener = function _addFirestoreListener(id, invoker, options, ref, listeners) {\n\t  ref = _addFirestoreQuery(ref, options.query);\n\t  var boundOnFailure = typeof options.onFailure === 'function' ? options.onFailure.bind(options.context) : undefined;\n\t  listeners.set(id, ref.onSnapshot(function (snapshot) {\n\t    if (invoker.match(/^listenTo/)) {\n\t      if (invoker === 'listenToDoc') {\n\t        var newState = _fsPrepareData(snapshot, options);\n\t        return options.then.call(options.context, newState);\n\t      }\n\t      if (invoker === 'listenToCollection') {\n\t        var _newState2 = _fsPrepareData(snapshot, options, true);\n\t        return options.then.call(options.context, _newState2);\n\t      }\n\t    } else {\n\t      if (invoker === 'syncDoc') {\n\t        var _newState3 = _fsPrepareData(snapshot, options);\n\t        options.reactSetState.call(options.context, function (currentState) {\n\t          return Object.assign(currentState, _newState3);\n\t        });\n\t      } else if (invoker === 'bindDoc') {\n\t        var _newState4 = _fsPrepareData(snapshot, options);\n\t        _setState.call(options.context, function (currentState) {\n\t          return Object.assign(currentState, _newState4);\n\t        });\n\t      } else if (invoker === 'bindCollection') {\n\t        var _newState5 = _fsPrepareData(snapshot, options, true);\n\t        _setState.call(options.context, function (currentState) {\n\t          return Object.assign(currentState, _newState5);\n\t        });\n\t      }\n\t      if (options.then && options.then.called === false) {\n\t        options.then.call(options.context);\n\t        options.then.called = true;\n\t      }\n\t    }\n\t  }, boundOnFailure));\n\t};\n\n\tvar _getSegmentCount = function _getSegmentCount(path) {\n\t  return path.match(/^\\//) ? path.split('/').slice(1).length : path.split('/').length;\n\t};\n\n\tvar _fsPrepareData = function _fsPrepareData(snapshot, options) {\n\t  var isCollection = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n\n\t  var meta = {};\n\t  if (!isCollection) {\n\t    var data = {};\n\t    if (snapshot.exists) {\n\t      if (options.withRefs) meta.ref = snapshot.ref;\n\t      if (options.withIds) meta.id = snapshot.id;\n\t      data = snapshot.data();\n\t    } else {\n\t      data = {};\n\t    }\n\t    return options.state ? _defineProperty({}, options.state, Object.assign({}, data, meta)) : Object.assign({}, data, meta);\n\t  }\n\t  var collection = [];\n\t  if (!snapshot.empty) {\n\t    snapshot.forEach(function (doc) {\n\t      if (options.withRefs) meta.ref = doc.ref;\n\t      if (options.withIds) meta.id = doc.id;\n\t      collection.push(Object.assign({}, doc.data(), meta));\n\t    });\n\t  }\n\t  return options.state ? _defineProperty({}, options.state, collection) : collection;\n\t};\n\n\tvar _fsCreateRef = function _fsCreateRef(pathOrRef, db) {\n\t  if ((typeof pathOrRef === 'undefined' ? 'undefined' : _typeof(pathOrRef)) === 'object') {\n\t    return pathOrRef;\n\t  }\n\t  var segmentCount = _getSegmentCount(pathOrRef);\n\t  var ref;\n\t  if (segmentCount % 2 === 0) {\n\t    ref = db.doc(pathOrRef);\n\t  } else {\n\t    ref = db.collection(pathOrRef);\n\t  }\n\t  return ref;\n\t};\n\n\texports._createHash = _createHash;\n\texports._addQueries = _addQueries;\n\texports._addFirestoreQuery = _addFirestoreQuery;\n\texports._returnRef = _returnRef;\n\texports._setState = _setState;\n\texports._throwError = _throwError;\n\texports._prepareData = _prepareData;\n\texports._fsPrepareData = _fsPrepareData;\n\texports._toArray = _toArray;\n\texports._isValid = _isValid;\n\texports._isObject = _isObject;\n\texports._isNestedPath = _isNestedPath;\n\texports._getNestedObject = _getNestedObject;\n\texports._getSegmentCount = _getSegmentCount;\n\texports._hasOwnNestedProperty = _hasOwnNestedProperty;\n\texports._addSync = _addSync;\n\texports._firebaseRefsMixin = _firebaseRefsMixin;\n\texports._updateSyncState = _updateSyncState;\n\texports._fsUpdateSyncState = _fsUpdateSyncState;\n\texports._addListener = _addListener;\n\texports._addFirestoreListener = _addFirestoreListener;\n\texports._setUnmountHandler = _setUnmountHandler;\n\texports._createNestedObject = _createNestedObject;\n\texports._handleError = _handleError;\n\texports._setData = _setData;\n\texports._fsSetUnmountHandler = _fsSetUnmountHandler;\n\texports._fsCreateRef = _fsCreateRef;\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = _removeBinding;\n\n\tvar _utils = __webpack_require__(2);\n\n\tfunction _removeBinding(_ref, _ref2) {\n\t  var id = _ref.id,\n\t      context = _ref.context;\n\t  var refs = _ref2.refs,\n\t      listeners = _ref2.listeners,\n\t      syncs = _ref2.syncs;\n\n\t  var ref = refs.get(id);\n\t  var listener = listeners.get(id);\n\t  if (typeof ref !== 'undefined') {\n\t    ref.off('value', listener);\n\t    refs.delete(id);\n\t    listeners.delete(id);\n\t    if (syncs) {\n\t      var currentSyncs = syncs.get(context);\n\t      if (currentSyncs && currentSyncs.length > 0) {\n\t        var idx = currentSyncs.findIndex(function (item, index) {\n\t          return item.id === id;\n\t        });\n\t        /*istanbul ignore else */\n\t        if (idx !== -1) {\n\t          currentSyncs.splice(idx, 1);\n\t          syncs.set(context, currentSyncs);\n\t        }\n\t      }\n\t    }\n\t  }\n\t}\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = _fsRemoveBinding;\n\tfunction _fsRemoveBinding(_ref, _ref2) {\n\t  var id = _ref.id,\n\t      context = _ref.context;\n\t  var refs = _ref2.refs,\n\t      listeners = _ref2.listeners,\n\t      syncs = _ref2.syncs;\n\n\t  var unsubscribe = listeners.get(id);\n\t  if (typeof unsubscribe === 'function') {\n\t    unsubscribe();\n\t    refs.delete(id);\n\t    listeners.delete(id);\n\t    if (syncs) {\n\t      var currentSyncs = syncs.get(context);\n\t      if (currentSyncs && currentSyncs.length > 0) {\n\t        var idx = currentSyncs.findIndex(function (item, index) {\n\t          return item.id === id;\n\t        });\n\t        /*istanbul ignore else */\n\t        if (idx !== -1) {\n\t          currentSyncs.splice(idx, 1);\n\t          syncs.set(context, currentSyncs);\n\t        }\n\t      }\n\t    }\n\t  }\n\t}\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports._validateCollectionPath = exports._validateDocumentPath = exports._validateEndpoint = exports._validateDatabase = exports.optionValidators = undefined;\n\n\tvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n\tvar _utils = __webpack_require__(2);\n\n\tvar _app = __webpack_require__(6);\n\n\tvar _app2 = _interopRequireDefault(_app);\n\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n\tvar optionValidators = {\n\t  notObject: function notObject(options) {\n\t    if (!(0, _utils._isObject)(options)) {\n\t      (0, _utils._throwError)('The options argument must be an object. Instead, got ' + options, 'INVALID_OPTIONS');\n\t    }\n\t  },\n\t  context: function context(options) {\n\t    this.notObject(options);\n\t    if (!options.context || !(0, _utils._isObject)(options.context)) {\n\t      this.makeError('context', 'object', options.context);\n\t    }\n\t  },\n\t  state: function state(options) {\n\t    this.notObject(options);\n\t    if (!options.state || typeof options.state !== 'string') {\n\t      this.makeError('state', 'string', options.state);\n\t    }\n\t  },\n\t  then: function then(options) {\n\t    this.notObject(options);\n\t    if (typeof options.then === 'undefined' || typeof options.then !== 'function') {\n\t      this.makeError('then', 'function', options.then);\n\t    }\n\t  },\n\t  data: function data(options) {\n\t    this.notObject(options);\n\t    if (typeof options.data === 'undefined') {\n\t      this.makeError('data', 'ANY', options.data);\n\t    }\n\t  },\n\t  query: function query(options) {\n\t    this.notObject(options);\n\t    var validQueries = ['limitToFirst', 'limitToLast', 'orderByChild', 'orderByValue', 'orderByKey', 'orderByPriority', 'startAt', 'endAt', 'equalTo'];\n\t    var queries = options.queries;\n\t    for (var key in queries) {\n\t      if (queries.hasOwnProperty(key) && validQueries.indexOf(key) === -1) {\n\t        (0, _utils._throwError)('The query field must contain valid Firebase queries.  Expected one of [' + validQueries.join(', ') + ']. Instead, got ' + key, 'INVALID_OPTIONS');\n\t      }\n\t    }\n\t  },\n\t  defaultValue: function defaultValue(options) {\n\t    this.notObject(options);\n\t    if (options.hasOwnProperty('defaultValue')) {\n\t      if (!(0, _utils._isValid)(options.defaultValue)) {\n\t        (0, _utils._throwError)('The typeof defaultValue must be one of string, number, boolean, object.', 'INVALID_OPTIONS');\n\t      }\n\t    }\n\t  },\n\t  makeError: function makeError(prop, type, actual) {\n\t    (0, _utils._throwError)('The options argument must contain a ' + prop + ' property of type ' + type + '. Instead, got ' + actual, 'INVALID_OPTIONS');\n\t  }\n\t};\n\n\tvar _validateEndpoint = function _validateEndpoint(endpoint) {\n\t  if (_app2.default.firestore) {\n\t    var _firebase$firestore = _app2.default.firestore,\n\t        DocumentReference = _firebase$firestore.DocumentReference,\n\t        CollectionReference = _firebase$firestore.CollectionReference;\n\n\t    if ((typeof endpoint === 'undefined' ? 'undefined' : _typeof(endpoint)) === 'object') {\n\t      if (endpoint instanceof DocumentReference || endpoint instanceof CollectionReference) {\n\t        return;\n\t      }\n\t    }\n\t  }\n\t  var defaultError = 'The Firebase endpoint you are trying to listen to';\n\t  var errorMsg;\n\t  if (typeof endpoint !== 'string') {\n\t    errorMsg = defaultError + ' must be a string. Instead, got ' + endpoint;\n\t  } else if (endpoint.length === 0) {\n\t    errorMsg = defaultError + ' must be a non-empty string. Instead, got ' + endpoint;\n\t  } else if (endpoint.length > 768) {\n\t    errorMsg = defaultError + ' is too long to be stored in Firebase. It must be less than 768 characters.';\n\t  } else if (/^$|[\\[\\]\\#\\$]|.{1}[\\.]/.test(endpoint)) {\n\t    errorMsg = defaultError + ' in invalid. Paths must be non-empty strings and can\\'t contain \".\", \"#\", \"$\", \"[\", or \"]\".';\n\t  }\n\n\t  if (typeof errorMsg !== 'undefined') {\n\t    (0, _utils._throwError)(errorMsg, 'INVALID_ENDPOINT');\n\t  }\n\t};\n\n\tvar _validateDatabase = function _validateDatabase(db) {\n\t  var defaultError = 'Rebase.createClass failed.';\n\t  var errorMsg;\n\t  if ((typeof db === 'undefined' ? 'undefined' : _typeof(db)) !== 'object' || !db.ref && !db.collection) {\n\t    errorMsg = defaultError + ' Expected an initialized firebase or firestore database object.';\n\t  }\n\t  if (typeof errorMsg !== 'undefined') {\n\t    (0, _utils._throwError)(errorMsg, 'INVALID_CONFIG');\n\t  }\n\t};\n\n\tvar _validateDocumentPath = function _validateDocumentPath(path) {\n\t  var DocumentReference = _app2.default.firestore.DocumentReference;\n\n\t  if ((typeof path === 'undefined' ? 'undefined' : _typeof(path)) === 'object' && path instanceof DocumentReference) return;\n\t  var defaultError = 'Invalid document path or reference.';\n\t  if (typeof path !== 'string') (0, _utils._throwError)(defaultError, 'INVALID_ENDPOINT');\n\t  var segmentCount = (0, _utils._getSegmentCount)(path);\n\t  if (segmentCount % 2 !== 0) (0, _utils._throwError)(defaultError, 'INVALID_ENDPOINT');\n\t};\n\n\tvar _validateCollectionPath = function _validateCollectionPath(path) {\n\t  var CollectionReference = _app2.default.firestore.CollectionReference;\n\n\t  if ((typeof path === 'undefined' ? 'undefined' : _typeof(path)) === 'object' && path instanceof CollectionReference) return;\n\t  var defaultError = 'Invalid collection path or reference.';\n\t  if (typeof path !== 'string') (0, _utils._throwError)(defaultError, 'INVALID_ENDPOINT');\n\t  var segmentCount = (0, _utils._getSegmentCount)(path);\n\t  if (segmentCount % 2 === 0) (0, _utils._throwError)(defaultError, 'INVALID_ENDPOINT');\n\t};\n\n\texports.optionValidators = optionValidators;\n\texports._validateDatabase = _validateDatabase;\n\texports._validateEndpoint = _validateEndpoint;\n\texports._validateDocumentPath = _validateDocumentPath;\n\texports._validateCollectionPath = _validateCollectionPath;\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_6__;\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = _push;\n\n\tvar _validators = __webpack_require__(5);\n\n\tfunction _push(endpoint, options, db) {\n\t  (0, _validators._validateEndpoint)(endpoint);\n\t  _validators.optionValidators.data(options);\n\t  var ref = db.ref(endpoint);\n\t  var returnEndpoint;\n\t  if (options.then) {\n\t    returnEndpoint = ref.push(options.data, options.then);\n\t  } else {\n\t    returnEndpoint = ref.push(options.data);\n\t  }\n\t  return returnEndpoint;\n\t}\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = _fetch;\n\n\tvar _validators = __webpack_require__(5);\n\n\tvar _utils = __webpack_require__(2);\n\n\tfunction _fetch(endpoint, options, db) {\n\t  (0, _validators._validateEndpoint)(endpoint);\n\t  _validators.optionValidators.defaultValue(options);\n\t  options.queries && _validators.optionValidators.query(options);\n\t  var ref = db.ref(endpoint);\n\t  ref = (0, _utils._addQueries)(ref, options.queries);\n\t  return ref.once('value').then(function (snapshot) {\n\t    var data = (0, _utils._prepareData)(snapshot, options);\n\t    if (options.then) {\n\t      options.then.call(options.context, data);\n\t    }\n\t    return data;\n\t  }).catch(function (err) {\n\t    //call onFailure callback if it exists otherwise rethrow error\n\t    if (options.onFailure && typeof options.onFailure === 'function') {\n\t      options.onFailure.call(options.context, err);\n\t    } else {\n\t      throw err;\n\t    }\n\t  });\n\t}\n\n/***/ }),\n/* 9 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = _post;\n\n\tvar _validators = __webpack_require__(5);\n\n\tfunction _post(endpoint, options, db) {\n\t  (0, _validators._validateEndpoint)(endpoint);\n\t  _validators.optionValidators.data(options);\n\t  var ref = db.ref(endpoint);\n\t  if (options.then) {\n\t    return ref.set(options.data, options.then);\n\t  } else {\n\t    return ref.set(options.data);\n\t  }\n\t}\n\n/***/ }),\n/* 10 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = _sync;\n\n\tvar _validators = __webpack_require__(5);\n\n\tvar _utils = __webpack_require__(2);\n\n\tfunction _sync(endpoint, options, state) {\n\t  (0, _validators._validateEndpoint)(endpoint);\n\t  _validators.optionValidators.context(options);\n\t  _validators.optionValidators.state(options);\n\t  _validators.optionValidators.defaultValue(options);\n\t  options.queries && _validators.optionValidators.query(options);\n\t  options.then && (options.then.called = false);\n\t  options.onFailure = options.onFailure ? options.onFailure.bind(options.context) : null;\n\t  options.keepKeys = options.keepKeys && options.asArray;\n\n\t  //store reference to react's setState\n\t  if (_sync.called !== true) {\n\t    _sync.reactSetState = options.context.setState;\n\t    _sync.called = true;\n\t  }\n\t  options.reactSetState = _sync.reactSetState;\n\n\t  var ref = state.db.ref(endpoint);\n\t  var id = (0, _utils._createHash)(endpoint, 'syncState');\n\t  (0, _utils._firebaseRefsMixin)(id, ref, state.refs);\n\t  (0, _utils._addListener)(id, 'syncState', options, ref, state.listeners);\n\t  (0, _utils._setUnmountHandler)(options.context, id, state.refs, state.listeners, state.syncs);\n\t  var sync = {\n\t    id: id,\n\t    updateFirebase: _utils._updateSyncState.bind(null, ref, options.onFailure, options.keepKeys),\n\t    stateKey: options.state\n\t  };\n\t  (0, _utils._addSync)(options.context, sync, state.syncs);\n\n\t  options.context.setState = function (data, cb) {\n\t    //if setState is a function, call it first before syncing to fb\n\t    if (typeof data === 'function') {\n\t      return _sync.reactSetState.call(options.context, data, function () {\n\t        if (cb) cb.call(options.context);\n\t        return options.context.setState.call(options.context, options.context.state);\n\t      });\n\t    }\n\t    //if callback is supplied, call setState first before syncing to fb\n\t    if (typeof cb === 'function') {\n\t      return _sync.reactSetState.call(options.context, data, function () {\n\t        cb();\n\t        return options.context.setState.call(options.context, data);\n\t      });\n\t    }\n\t    var syncsToCall = state.syncs.get(this);\n\t    //if sync does not exist, call original Component.setState\n\t    if (!syncsToCall || syncsToCall.length === 0) {\n\t      return _sync.reactSetState.call(this, data, cb);\n\t    }\n\t    var syncedKeys = syncsToCall.map(function (sync) {\n\t      return {\n\t        key: sync.stateKey,\n\t        update: sync.updateFirebase,\n\t        nested: (0, _utils._isNestedPath)(sync.stateKey)\n\t      };\n\t    });\n\t    syncedKeys.forEach(function (syncedKey) {\n\t      if (syncedKey.nested === true) {\n\t        if ((0, _utils._hasOwnNestedProperty)(data, syncedKey.key)) {\n\t          var datum = (0, _utils._getNestedObject)(data, syncedKey.key);\n\t          syncedKey.update(datum);\n\t        }\n\t      } else if (data.hasOwnProperty(syncedKey.key)) {\n\t        syncedKey.update(data[syncedKey.key]);\n\t      }\n\t    });\n\t    var allKeys = Object.keys(data);\n\t    allKeys.forEach(function (key) {\n\t      var absent = !syncedKeys.find(function (syncedKey) {\n\t        var k = syncedKey.key;\n\t        if (syncedKey.nested === true) {\n\t          // Check with the root\n\t          k = syncedKey.key.split('.')[0];\n\t        }\n\t        return k === key;\n\t      });\n\n\t      if (absent) {\n\t        var update = {};\n\t        update[key] = data[key];\n\t        _sync.reactSetState.call(options.context, update, cb);\n\t      }\n\t    });\n\t  };\n\t  return (0, _utils._returnRef)(endpoint, 'syncState', id, options.context);\n\t}\n\n/***/ }),\n/* 11 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = _bind;\n\n\tvar _validators = __webpack_require__(5);\n\n\tvar _utils = __webpack_require__(2);\n\n\tfunction _bind(endpoint, options, invoker, state) {\n\t  (0, _validators._validateEndpoint)(endpoint);\n\t  _validators.optionValidators.context(options);\n\t  _validators.optionValidators.defaultValue(options);\n\t  invoker === 'listenTo' && _validators.optionValidators.then(options);\n\t  invoker === 'bindToState' && _validators.optionValidators.state(options);\n\t  options.queries && _validators.optionValidators.query(options);\n\t  options.then && (options.then.called = false);\n\n\t  var id = (0, _utils._createHash)(endpoint, invoker);\n\t  var ref = state.db.ref(endpoint);\n\t  (0, _utils._firebaseRefsMixin)(id, ref, state.refs);\n\t  (0, _utils._addListener)(id, invoker, options, ref, state.listeners);\n\t  (0, _utils._setUnmountHandler)(options.context, id, state.refs, state.listeners, state.syncs);\n\t  return (0, _utils._returnRef)(endpoint, invoker, id, options.context);\n\t}\n\n/***/ }),\n/* 12 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = _update;\n\n\tvar _validators = __webpack_require__(5);\n\n\tfunction _update(endpoint, options, state) {\n\t  (0, _validators._validateEndpoint)(endpoint);\n\t  _validators.optionValidators.data(options);\n\t  var ref = state.db.ref(endpoint);\n\t  if (options.then) {\n\t    return ref.update(options.data, options.then);\n\t  } else {\n\t    return ref.update(options.data);\n\t  }\n\t}\n\n/***/ }),\n/* 13 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = _reset;\n\tfunction _reset(state) {\n\t  state.refs.forEach(function (ref, id) {\n\t    ref.off('value', state.listeners.get(id));\n\t  });\n\t  state.listeners = new Map();\n\t  state.refs = new Map();\n\t  state.syncs = new WeakMap();\n\t  return null;\n\t}\n\n/***/ }),\n/* 14 */\n/***/ (function(module, exports) {\n\n\t\"use strict\";\n\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\n\texports.default = function (endpoint, db, fn) {\n\t  return db.ref().child(endpoint).remove(fn);\n\t};\n\n/***/ }),\n/* 15 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = _fsSync;\n\n\tvar _validators = __webpack_require__(5);\n\n\tvar _utils = __webpack_require__(2);\n\n\tfunction _fsSync(document, options, state) {\n\t  //validate arguments\n\t  (0, _validators._validateDocumentPath)(document);\n\t  _validators.optionValidators.context(options);\n\t  _validators.optionValidators.state(options);\n\t  options.then && (options.then.called = false);\n\t  //store reference to react's setState\n\t  if (_fsSync.called !== true) {\n\t    _fsSync.reactSetState = options.context.setState;\n\t    _fsSync.called = true;\n\t  }\n\t  options.reactSetState = _fsSync.reactSetState;\n\n\t  var id = (0, _utils._createHash)(document, 'syncDoc');\n\t  var ref = (0, _utils._fsCreateRef)(document, state.db);\n\t  (0, _utils._firebaseRefsMixin)(id, ref, state.refs);\n\t  (0, _utils._addFirestoreListener)(id, 'syncDoc', options, ref, state.listeners);\n\t  (0, _utils._fsSetUnmountHandler)(options.context, id, state.refs, state.listeners, state.syncs);\n\t  var sync = {\n\t    id: id,\n\t    updateFirebase: _utils._fsUpdateSyncState.bind(null, ref),\n\t    stateKey: options.state\n\t  };\n\t  (0, _utils._addSync)(options.context, sync, state.syncs);\n\t  options.context.setState = function (data, cb) {\n\t    //if setState is a function, call it first before syncing to fb\n\t    if (typeof data === 'function') {\n\t      return _fsSync.reactSetState.call(options.context, data, function () {\n\t        if (cb) cb.call(options.context);\n\t        return options.context.setState.call(options.context, options.context.state);\n\t      });\n\t    }\n\t    //if callback is supplied, call setState first before syncing to fb\n\t    if (typeof cb === 'function') {\n\t      return _fsSync.reactSetState.call(options.context, data, function () {\n\t        cb();\n\t        return options.context.setState.call(options.context, data);\n\t      });\n\t    }\n\t    var syncsToCall = state.syncs.get(this);\n\t    //if sync does not exist, call original Component.setState\n\t    if (!syncsToCall || syncsToCall.length === 0) {\n\t      return _fsSync.reactSetState.call(this, data, cb);\n\t    }\n\t    //send the update of synced keys to firestore\n\t    var syncedKeys = syncsToCall.map(function (sync) {\n\t      return {\n\t        key: sync.stateKey,\n\t        update: sync.updateFirebase\n\t      };\n\t    });\n\t    syncedKeys.forEach(function (syncedKey) {\n\t      if (data[syncedKey.key]) {\n\t        syncedKey.update(data[syncedKey.key]);\n\t      }\n\t    });\n\t    //send the update of all other keys through setState\n\t    var allKeys = Object.keys(data);\n\t    allKeys.forEach(function (key) {\n\t      var absent = !syncedKeys.find(function (syncedKey) {\n\t        return syncedKey.key === key;\n\t      });\n\t      if (absent) {\n\t        var update = {};\n\t        update[key] = data[key];\n\t        _fsSync.reactSetState.call(options.context, function (currentState) {\n\t          return Object.assign(currentState, update);\n\t        }, cb);\n\t      }\n\t    });\n\t  };\n\t  return (0, _utils._returnRef)(document, 'syncDoc', id, options.context);\n\t}\n\n/***/ }),\n/* 16 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = _fsBind;\n\n\tvar _validators = __webpack_require__(5);\n\n\tvar _utils = __webpack_require__(2);\n\n\tfunction _fsBind(path, options, invoker, state) {\n\t  _validators.optionValidators.context(options);\n\t  options.then && (options.then.called = false);\n\t  if (invoker === 'bindDoc') {\n\t    (0, _validators._validateDocumentPath)(path);\n\t  }\n\t  if (invoker === 'bindCollection') {\n\t    _validators.optionValidators.state(options);\n\t    (0, _validators._validateCollectionPath)(path);\n\t  }\n\t  if (invoker === 'listenToDoc') {\n\t    (0, _validators._validateDocumentPath)(path);\n\t    _validators.optionValidators.then(options);\n\t  }\n\t  if (invoker === 'listenToCollection') {\n\t    (0, _validators._validateCollectionPath)(path);\n\t    _validators.optionValidators.then(options);\n\t  }\n\t  var ref = (0, _utils._fsCreateRef)(path, state.db);\n\t  var id = (0, _utils._createHash)(path, invoker);\n\t  (0, _utils._firebaseRefsMixin)(id, ref, state.refs);\n\t  (0, _utils._addFirestoreListener)(id, invoker, options, ref, state.listeners);\n\t  (0, _utils._fsSetUnmountHandler)(options.context, id, state.refs, state.listeners, state.syncs);\n\t  return (0, _utils._returnRef)(path, invoker, id, options.context);\n\t}\n\n/***/ }),\n/* 17 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = _fsGet;\n\n\tvar _utils = __webpack_require__(2);\n\n\tvar _validators = __webpack_require__(5);\n\n\tfunction _fsGet(endpoint) {\n\t  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\t  var db = arguments[2];\n\n\t  (0, _validators._validateEndpoint)(endpoint);\n\t  var ref = (0, _utils._fsCreateRef)(endpoint, db);\n\t  //check if ref is a collection\n\t  var isCollection = !!ref.add;\n\t  ref = (0, _utils._addFirestoreQuery)(ref, options.query);\n\t  return ref.get().then(function (snapshot) {\n\t    if (isCollection && !snapshot.empty || !isCollection && snapshot.exists) {\n\t      return (0, _utils._fsPrepareData)(snapshot, options, isCollection);\n\t    } else {\n\t      return Promise.reject(new Error('No Result'));\n\t    }\n\t  });\n\t}\n\n/***/ }),\n/* 18 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = _fsRemoveDoc;\n\n\tvar _utils = __webpack_require__(2);\n\n\tfunction _fsRemoveDoc(path, db) {\n\t  var ref = (0, _utils._fsCreateRef)(path, db);\n\t  return ref.delete();\n\t}\n\n/***/ }),\n/* 19 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = _fsAddToCollection;\n\n\tvar _validators = __webpack_require__(5);\n\n\tvar _utils = __webpack_require__(2);\n\n\tfunction _fsAddToCollection(path, doc, db, key) {\n\t  (0, _validators._validateCollectionPath)(path);\n\t  var ref = (0, _utils._fsCreateRef)(path, db);\n\t  if (key) {\n\t    return ref.doc(key).set(doc);\n\t  }\n\t  return ref.add(doc);\n\t}\n\n/***/ }),\n/* 20 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = _fsRemoveFromCollection;\n\n\tvar _validators = __webpack_require__(5);\n\n\tvar _utils = __webpack_require__(2);\n\n\tfunction _fsRemoveFromCollection(path, db) {\n\t  var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n\t  (0, _validators._validateCollectionPath)(path);\n\t  var ref = (0, _utils._fsCreateRef)(path, db);\n\t  ref = (0, _utils._addFirestoreQuery)(ref, options.query);\n\t  return ref.get().then(function (snapshot) {\n\t    if (!snapshot.empty) {\n\t      var batch = db.batch();\n\t      snapshot.forEach(function (doc) {\n\t        batch.delete(doc.ref);\n\t      });\n\t      return batch.commit();\n\t    }\n\t  });\n\t}\n\n/***/ }),\n/* 21 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = _fsUpdateDoc;\n\n\tvar _validators = __webpack_require__(5);\n\n\tvar _utils = __webpack_require__(2);\n\n\tfunction _fsUpdateDoc(document, data, db) {\n\t  (0, _validators._validateDocumentPath)(document);\n\t  var ref = (0, _utils._fsCreateRef)(document, db);\n\t  return ref.update(data);\n\t}\n\n/***/ }),\n/* 22 */\n/***/ (function(module, exports) {\n\n\t\"use strict\";\n\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = _fsReset;\n\tfunction _fsReset(state) {\n\t  state.listeners.forEach(function (unsubscribe, id) {\n\t    unsubscribe();\n\t  });\n\t  state.listeners = new Map();\n\t  state.refs = new Map();\n\t  state.syncs = new WeakMap();\n\t  return null;\n\t}\n\n/***/ })\n/******/ ])\n});\n;\n\n/***/ }),\n/* 41 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* WEBPACK VAR INJECTION */(function(setImmediate, global) {/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_whatwg_fetch__ = __webpack_require__(44);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_whatwg_fetch___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_whatwg_fetch__);\n\n\n// Store setTimeout reference so promise-polyfill will be unaffected by\n// other code modifying setTimeout (like sinon.useFakeTimers())\nvar setTimeoutFunc = setTimeout;\n\nfunction noop() {}\n\n// Polyfill for Function.prototype.bind\nfunction bind(fn, thisArg) {\n  return function() {\n    fn.apply(thisArg, arguments);\n  };\n}\n\nfunction Promise(fn) {\n  if (!(this instanceof Promise))\n    throw new TypeError('Promises must be constructed via new');\n  if (typeof fn !== 'function') throw new TypeError('not a function');\n  this._state = 0;\n  this._handled = false;\n  this._value = undefined;\n  this._deferreds = [];\n\n  doResolve(fn, this);\n}\n\nfunction handle(self, deferred) {\n  while (self._state === 3) {\n    self = self._value;\n  }\n  if (self._state === 0) {\n    self._deferreds.push(deferred);\n    return;\n  }\n  self._handled = true;\n  Promise._immediateFn(function() {\n    var cb = self._state === 1 ? deferred.onFulfilled : deferred.onRejected;\n    if (cb === null) {\n      (self._state === 1 ? resolve : reject)(deferred.promise, self._value);\n      return;\n    }\n    var ret;\n    try {\n      ret = cb(self._value);\n    } catch (e) {\n      reject(deferred.promise, e);\n      return;\n    }\n    resolve(deferred.promise, ret);\n  });\n}\n\nfunction resolve(self, newValue) {\n  try {\n    // Promise Resolution Procedure: https://github.com/promises-aplus/promises-spec#the-promise-resolution-procedure\n    if (newValue === self)\n      throw new TypeError('A promise cannot be resolved with itself.');\n    if (\n      newValue &&\n      (typeof newValue === 'object' || typeof newValue === 'function')\n    ) {\n      var then = newValue.then;\n      if (newValue instanceof Promise) {\n        self._state = 3;\n        self._value = newValue;\n        finale(self);\n        return;\n      } else if (typeof then === 'function') {\n        doResolve(bind(then, newValue), self);\n        return;\n      }\n    }\n    self._state = 1;\n    self._value = newValue;\n    finale(self);\n  } catch (e) {\n    reject(self, e);\n  }\n}\n\nfunction reject(self, newValue) {\n  self._state = 2;\n  self._value = newValue;\n  finale(self);\n}\n\nfunction finale(self) {\n  if (self._state === 2 && self._deferreds.length === 0) {\n    Promise._immediateFn(function() {\n      if (!self._handled) {\n        Promise._unhandledRejectionFn(self._value);\n      }\n    });\n  }\n\n  for (var i = 0, len = self._deferreds.length; i < len; i++) {\n    handle(self, self._deferreds[i]);\n  }\n  self._deferreds = null;\n}\n\nfunction Handler(onFulfilled, onRejected, promise) {\n  this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;\n  this.onRejected = typeof onRejected === 'function' ? onRejected : null;\n  this.promise = promise;\n}\n\n/**\n * Take a potentially misbehaving resolver function and make sure\n * onFulfilled and onRejected are only called once.\n *\n * Makes no guarantees about asynchrony.\n */\nfunction doResolve(fn, self) {\n  var done = false;\n  try {\n    fn(\n      function(value) {\n        if (done) return;\n        done = true;\n        resolve(self, value);\n      },\n      function(reason) {\n        if (done) return;\n        done = true;\n        reject(self, reason);\n      }\n    );\n  } catch (ex) {\n    if (done) return;\n    done = true;\n    reject(self, ex);\n  }\n}\n\nPromise.prototype['catch'] = function(onRejected) {\n  return this.then(null, onRejected);\n};\n\nPromise.prototype.then = function(onFulfilled, onRejected) {\n  var prom = new this.constructor(noop);\n\n  handle(this, new Handler(onFulfilled, onRejected, prom));\n  return prom;\n};\n\nPromise.prototype['finally'] = function(callback) {\n  var constructor = this.constructor;\n  return this.then(\n    function(value) {\n      return constructor.resolve(callback()).then(function() {\n        return value;\n      });\n    },\n    function(reason) {\n      return constructor.resolve(callback()).then(function() {\n        return constructor.reject(reason);\n      });\n    }\n  );\n};\n\nPromise.all = function(arr) {\n  return new Promise(function(resolve, reject) {\n    if (!arr || typeof arr.length === 'undefined')\n      throw new TypeError('Promise.all accepts an array');\n    var args = Array.prototype.slice.call(arr);\n    if (args.length === 0) return resolve([]);\n    var remaining = args.length;\n\n    function res(i, val) {\n      try {\n        if (val && (typeof val === 'object' || typeof val === 'function')) {\n          var then = val.then;\n          if (typeof then === 'function') {\n            then.call(\n              val,\n              function(val) {\n                res(i, val);\n              },\n              reject\n            );\n            return;\n          }\n        }\n        args[i] = val;\n        if (--remaining === 0) {\n          resolve(args);\n        }\n      } catch (ex) {\n        reject(ex);\n      }\n    }\n\n    for (var i = 0; i < args.length; i++) {\n      res(i, args[i]);\n    }\n  });\n};\n\nPromise.resolve = function(value) {\n  if (value && typeof value === 'object' && value.constructor === Promise) {\n    return value;\n  }\n\n  return new Promise(function(resolve) {\n    resolve(value);\n  });\n};\n\nPromise.reject = function(value) {\n  return new Promise(function(resolve, reject) {\n    reject(value);\n  });\n};\n\nPromise.race = function(values) {\n  return new Promise(function(resolve, reject) {\n    for (var i = 0, len = values.length; i < len; i++) {\n      values[i].then(resolve, reject);\n    }\n  });\n};\n\n// Use polyfill for setImmediate for performance gains\nPromise._immediateFn =\n  (typeof setImmediate === 'function' &&\n    function(fn) {\n      setImmediate(fn);\n    }) ||\n  function(fn) {\n    setTimeoutFunc(fn, 0);\n  };\n\nPromise._unhandledRejectionFn = function _unhandledRejectionFn(err) {\n  if (typeof console !== 'undefined' && console) {\n    console.warn('Possible Unhandled Promise Rejection:', err); // eslint-disable-line no-console\n  }\n};\n\nvar globalNS = (function() {\n  // the only reliable means to get the global object is\n  // `Function('return this')()`\n  // However, this causes CSP violations in Chrome apps.\n  if (typeof self !== 'undefined') {\n    return self;\n  }\n  if (typeof window !== 'undefined') {\n    return window;\n  }\n  if (typeof global !== 'undefined') {\n    return global;\n  }\n  throw new Error('unable to locate global object');\n})();\n\nif (!globalNS.Promise) {\n  globalNS.Promise = Promise;\n}\n\nfunction createCommonjsModule(fn, module) {\n\treturn module = { exports: {} }, fn(module, module.exports), module.exports;\n}\n\nvar _global = createCommonjsModule(function (module) {\n// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\nvar global = module.exports = typeof window != 'undefined' && window.Math == Math\n  ? window : typeof self != 'undefined' && self.Math == Math ? self\n  // eslint-disable-next-line no-new-func\n  : Function('return this')();\nif (typeof __g == 'number') __g = global; // eslint-disable-line no-undef\n});\n\nvar _core = createCommonjsModule(function (module) {\nvar core = module.exports = { version: '2.5.5' };\nif (typeof __e == 'number') __e = core; // eslint-disable-line no-undef\n});\nvar _core_1 = _core.version;\n\nvar _isObject = function (it) {\n  return typeof it === 'object' ? it !== null : typeof it === 'function';\n};\n\nvar _anObject = function (it) {\n  if (!_isObject(it)) throw TypeError(it + ' is not an object!');\n  return it;\n};\n\nvar _fails = function (exec) {\n  try {\n    return !!exec();\n  } catch (e) {\n    return true;\n  }\n};\n\n// Thank's IE8 for his funny defineProperty\nvar _descriptors = !_fails(function () {\n  return Object.defineProperty({}, 'a', { get: function () { return 7; } }).a != 7;\n});\n\nvar document = _global.document;\n// typeof document.createElement is 'object' in old IE\nvar is = _isObject(document) && _isObject(document.createElement);\nvar _domCreate = function (it) {\n  return is ? document.createElement(it) : {};\n};\n\nvar _ie8DomDefine = !_descriptors && !_fails(function () {\n  return Object.defineProperty(_domCreate('div'), 'a', { get: function () { return 7; } }).a != 7;\n});\n\n// 7.1.1 ToPrimitive(input [, PreferredType])\n\n// instead of the ES6 spec version, we didn't implement @@toPrimitive case\n// and the second argument - flag - preferred type is a string\nvar _toPrimitive = function (it, S) {\n  if (!_isObject(it)) return it;\n  var fn, val;\n  if (S && typeof (fn = it.toString) == 'function' && !_isObject(val = fn.call(it))) return val;\n  if (typeof (fn = it.valueOf) == 'function' && !_isObject(val = fn.call(it))) return val;\n  if (!S && typeof (fn = it.toString) == 'function' && !_isObject(val = fn.call(it))) return val;\n  throw TypeError(\"Can't convert object to primitive value\");\n};\n\nvar dP = Object.defineProperty;\n\nvar f = _descriptors ? Object.defineProperty : function defineProperty(O, P, Attributes) {\n  _anObject(O);\n  P = _toPrimitive(P, true);\n  _anObject(Attributes);\n  if (_ie8DomDefine) try {\n    return dP(O, P, Attributes);\n  } catch (e) { /* empty */ }\n  if ('get' in Attributes || 'set' in Attributes) throw TypeError('Accessors not supported!');\n  if ('value' in Attributes) O[P] = Attributes.value;\n  return O;\n};\n\nvar _objectDp = {\n\tf: f\n};\n\nvar _propertyDesc = function (bitmap, value) {\n  return {\n    enumerable: !(bitmap & 1),\n    configurable: !(bitmap & 2),\n    writable: !(bitmap & 4),\n    value: value\n  };\n};\n\nvar _hide = _descriptors ? function (object, key, value) {\n  return _objectDp.f(object, key, _propertyDesc(1, value));\n} : function (object, key, value) {\n  object[key] = value;\n  return object;\n};\n\nvar hasOwnProperty = {}.hasOwnProperty;\nvar _has = function (it, key) {\n  return hasOwnProperty.call(it, key);\n};\n\nvar id = 0;\nvar px = Math.random();\nvar _uid = function (key) {\n  return 'Symbol('.concat(key === undefined ? '' : key, ')_', (++id + px).toString(36));\n};\n\nvar _redefine = createCommonjsModule(function (module) {\nvar SRC = _uid('src');\nvar TO_STRING = 'toString';\nvar $toString = Function[TO_STRING];\nvar TPL = ('' + $toString).split(TO_STRING);\n\n_core.inspectSource = function (it) {\n  return $toString.call(it);\n};\n\n(module.exports = function (O, key, val, safe) {\n  var isFunction = typeof val == 'function';\n  if (isFunction) _has(val, 'name') || _hide(val, 'name', key);\n  if (O[key] === val) return;\n  if (isFunction) _has(val, SRC) || _hide(val, SRC, O[key] ? '' + O[key] : TPL.join(String(key)));\n  if (O === _global) {\n    O[key] = val;\n  } else if (!safe) {\n    delete O[key];\n    _hide(O, key, val);\n  } else if (O[key]) {\n    O[key] = val;\n  } else {\n    _hide(O, key, val);\n  }\n// add fake Function#toString for correct work wrapped methods / constructors with methods like LoDash isNative\n})(Function.prototype, TO_STRING, function toString() {\n  return typeof this == 'function' && this[SRC] || $toString.call(this);\n});\n});\n\nvar _aFunction = function (it) {\n  if (typeof it != 'function') throw TypeError(it + ' is not a function!');\n  return it;\n};\n\n// optional / simple context binding\n\nvar _ctx = function (fn, that, length) {\n  _aFunction(fn);\n  if (that === undefined) return fn;\n  switch (length) {\n    case 1: return function (a) {\n      return fn.call(that, a);\n    };\n    case 2: return function (a, b) {\n      return fn.call(that, a, b);\n    };\n    case 3: return function (a, b, c) {\n      return fn.call(that, a, b, c);\n    };\n  }\n  return function (/* ...args */) {\n    return fn.apply(that, arguments);\n  };\n};\n\nvar PROTOTYPE = 'prototype';\n\nvar $export = function (type, name, source) {\n  var IS_FORCED = type & $export.F;\n  var IS_GLOBAL = type & $export.G;\n  var IS_STATIC = type & $export.S;\n  var IS_PROTO = type & $export.P;\n  var IS_BIND = type & $export.B;\n  var target = IS_GLOBAL ? _global : IS_STATIC ? _global[name] || (_global[name] = {}) : (_global[name] || {})[PROTOTYPE];\n  var exports = IS_GLOBAL ? _core : _core[name] || (_core[name] = {});\n  var expProto = exports[PROTOTYPE] || (exports[PROTOTYPE] = {});\n  var key, own, out, exp;\n  if (IS_GLOBAL) source = name;\n  for (key in source) {\n    // contains in native\n    own = !IS_FORCED && target && target[key] !== undefined;\n    // export native or passed\n    out = (own ? target : source)[key];\n    // bind timers to global for call from export context\n    exp = IS_BIND && own ? _ctx(out, _global) : IS_PROTO && typeof out == 'function' ? _ctx(Function.call, out) : out;\n    // extend global\n    if (target) _redefine(target, key, out, type & $export.U);\n    // export\n    if (exports[key] != out) _hide(exports, key, exp);\n    if (IS_PROTO && expProto[key] != out) expProto[key] = out;\n  }\n};\n_global.core = _core;\n// type bitmap\n$export.F = 1;   // forced\n$export.G = 2;   // global\n$export.S = 4;   // static\n$export.P = 8;   // proto\n$export.B = 16;  // bind\n$export.W = 32;  // wrap\n$export.U = 64;  // safe\n$export.R = 128; // real proto method for `library`\nvar _export = $export;\n\nvar toString = {}.toString;\n\nvar _cof = function (it) {\n  return toString.call(it).slice(8, -1);\n};\n\n// fallback for non-array-like ES3 and non-enumerable old V8 strings\n\n// eslint-disable-next-line no-prototype-builtins\nvar _iobject = Object('z').propertyIsEnumerable(0) ? Object : function (it) {\n  return _cof(it) == 'String' ? it.split('') : Object(it);\n};\n\n// 7.2.1 RequireObjectCoercible(argument)\nvar _defined = function (it) {\n  if (it == undefined) throw TypeError(\"Can't call method on  \" + it);\n  return it;\n};\n\n// 7.1.13 ToObject(argument)\n\nvar _toObject = function (it) {\n  return Object(_defined(it));\n};\n\n// 7.1.4 ToInteger\nvar ceil = Math.ceil;\nvar floor = Math.floor;\nvar _toInteger = function (it) {\n  return isNaN(it = +it) ? 0 : (it > 0 ? floor : ceil)(it);\n};\n\n// 7.1.15 ToLength\n\nvar min = Math.min;\nvar _toLength = function (it) {\n  return it > 0 ? min(_toInteger(it), 0x1fffffffffffff) : 0; // pow(2, 53) - 1 == 9007199254740991\n};\n\n// 7.2.2 IsArray(argument)\n\nvar _isArray = Array.isArray || function isArray(arg) {\n  return _cof(arg) == 'Array';\n};\n\nvar SHARED = '__core-js_shared__';\nvar store = _global[SHARED] || (_global[SHARED] = {});\nvar _shared = function (key) {\n  return store[key] || (store[key] = {});\n};\n\nvar _wks = createCommonjsModule(function (module) {\nvar store = _shared('wks');\n\nvar Symbol = _global.Symbol;\nvar USE_SYMBOL = typeof Symbol == 'function';\n\nvar $exports = module.exports = function (name) {\n  return store[name] || (store[name] =\n    USE_SYMBOL && Symbol[name] || (USE_SYMBOL ? Symbol : _uid)('Symbol.' + name));\n};\n\n$exports.store = store;\n});\n\nvar SPECIES = _wks('species');\n\nvar _arraySpeciesConstructor = function (original) {\n  var C;\n  if (_isArray(original)) {\n    C = original.constructor;\n    // cross-realm fallback\n    if (typeof C == 'function' && (C === Array || _isArray(C.prototype))) C = undefined;\n    if (_isObject(C)) {\n      C = C[SPECIES];\n      if (C === null) C = undefined;\n    }\n  } return C === undefined ? Array : C;\n};\n\n// 9.4.2.3 ArraySpeciesCreate(originalArray, length)\n\n\nvar _arraySpeciesCreate = function (original, length) {\n  return new (_arraySpeciesConstructor(original))(length);\n};\n\n// 0 -> Array#forEach\n// 1 -> Array#map\n// 2 -> Array#filter\n// 3 -> Array#some\n// 4 -> Array#every\n// 5 -> Array#find\n// 6 -> Array#findIndex\n\n\n\n\n\nvar _arrayMethods = function (TYPE, $create) {\n  var IS_MAP = TYPE == 1;\n  var IS_FILTER = TYPE == 2;\n  var IS_SOME = TYPE == 3;\n  var IS_EVERY = TYPE == 4;\n  var IS_FIND_INDEX = TYPE == 6;\n  var NO_HOLES = TYPE == 5 || IS_FIND_INDEX;\n  var create = $create || _arraySpeciesCreate;\n  return function ($this, callbackfn, that) {\n    var O = _toObject($this);\n    var self = _iobject(O);\n    var f = _ctx(callbackfn, that, 3);\n    var length = _toLength(self.length);\n    var index = 0;\n    var result = IS_MAP ? create($this, length) : IS_FILTER ? create($this, 0) : undefined;\n    var val, res;\n    for (;length > index; index++) if (NO_HOLES || index in self) {\n      val = self[index];\n      res = f(val, index, O);\n      if (TYPE) {\n        if (IS_MAP) result[index] = res;   // map\n        else if (res) switch (TYPE) {\n          case 3: return true;             // some\n          case 5: return val;              // find\n          case 6: return index;            // findIndex\n          case 2: result.push(val);        // filter\n        } else if (IS_EVERY) return false; // every\n      }\n    }\n    return IS_FIND_INDEX ? -1 : IS_SOME || IS_EVERY ? IS_EVERY : result;\n  };\n};\n\n// 22.1.3.31 Array.prototype[@@unscopables]\nvar UNSCOPABLES = _wks('unscopables');\nvar ArrayProto = Array.prototype;\nif (ArrayProto[UNSCOPABLES] == undefined) _hide(ArrayProto, UNSCOPABLES, {});\nvar _addToUnscopables = function (key) {\n  ArrayProto[UNSCOPABLES][key] = true;\n};\n\n// 22.1.3.8 Array.prototype.find(predicate, thisArg = undefined)\n\nvar $find = _arrayMethods(5);\nvar KEY = 'find';\nvar forced = true;\n// Shouldn't skip holes\nif (KEY in []) Array(1)[KEY](function () { forced = false; });\n_export(_export.P + _export.F * forced, 'Array', {\n  find: function find(callbackfn /* , that = undefined */) {\n    return $find(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n_addToUnscopables(KEY);\n\nvar find = _core.Array.find;\n\n// 22.1.3.9 Array.prototype.findIndex(predicate, thisArg = undefined)\n\nvar $find$1 = _arrayMethods(6);\nvar KEY$1 = 'findIndex';\nvar forced$1 = true;\n// Shouldn't skip holes\nif (KEY$1 in []) Array(1)[KEY$1](function () { forced$1 = false; });\n_export(_export.P + _export.F * forced$1, 'Array', {\n  findIndex: function findIndex(callbackfn /* , that = undefined */) {\n    return $find$1(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n_addToUnscopables(KEY$1);\n\nvar findIndex = _core.Array.findIndex;\n\n// 7.2.8 IsRegExp(argument)\n\n\nvar MATCH = _wks('match');\nvar _isRegexp = function (it) {\n  var isRegExp;\n  return _isObject(it) && ((isRegExp = it[MATCH]) !== undefined ? !!isRegExp : _cof(it) == 'RegExp');\n};\n\n// helper for String#{startsWith, endsWith, includes}\n\n\n\nvar _stringContext = function (that, searchString, NAME) {\n  if (_isRegexp(searchString)) throw TypeError('String#' + NAME + \" doesn't accept regex!\");\n  return String(_defined(that));\n};\n\nvar MATCH$1 = _wks('match');\nvar _failsIsRegexp = function (KEY) {\n  var re = /./;\n  try {\n    '/./'[KEY](re);\n  } catch (e) {\n    try {\n      re[MATCH$1] = false;\n      return !'/./'[KEY](re);\n    } catch (f) { /* empty */ }\n  } return true;\n};\n\nvar STARTS_WITH = 'startsWith';\nvar $startsWith = ''[STARTS_WITH];\n\n_export(_export.P + _export.F * _failsIsRegexp(STARTS_WITH), 'String', {\n  startsWith: function startsWith(searchString /* , position = 0 */) {\n    var that = _stringContext(this, searchString, STARTS_WITH);\n    var index = _toLength(Math.min(arguments.length > 1 ? arguments[1] : undefined, that.length));\n    var search = String(searchString);\n    return $startsWith\n      ? $startsWith.call(that, search, index)\n      : that.slice(index, index + search.length) === search;\n  }\n});\n\nvar startsWith = _core.String.startsWith;\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n/* WEBPACK VAR INJECTION */}.call(__webpack_exports__, __webpack_require__(42).setImmediate, __webpack_require__(1)))\n\n/***/ }),\n/* 42 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/* WEBPACK VAR INJECTION */(function(global) {var scope = (typeof global !== \"undefined\" && global) ||\n            (typeof self !== \"undefined\" && self) ||\n            window;\nvar apply = Function.prototype.apply;\n\n// DOM APIs, for completeness\n\nexports.setTimeout = function() {\n  return new Timeout(apply.call(setTimeout, scope, arguments), clearTimeout);\n};\nexports.setInterval = function() {\n  return new Timeout(apply.call(setInterval, scope, arguments), clearInterval);\n};\nexports.clearTimeout =\nexports.clearInterval = function(timeout) {\n  if (timeout) {\n    timeout.close();\n  }\n};\n\nfunction Timeout(id, clearFn) {\n  this._id = id;\n  this._clearFn = clearFn;\n}\nTimeout.prototype.unref = Timeout.prototype.ref = function() {};\nTimeout.prototype.close = function() {\n  this._clearFn.call(scope, this._id);\n};\n\n// Does not start the time, just sets up the members needed.\nexports.enroll = function(item, msecs) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = msecs;\n};\n\nexports.unenroll = function(item) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = -1;\n};\n\nexports._unrefActive = exports.active = function(item) {\n  clearTimeout(item._idleTimeoutId);\n\n  var msecs = item._idleTimeout;\n  if (msecs >= 0) {\n    item._idleTimeoutId = setTimeout(function onTimeout() {\n      if (item._onTimeout)\n        item._onTimeout();\n    }, msecs);\n  }\n};\n\n// setimmediate attaches itself to the global object\n__webpack_require__(43);\n// On some exotic environments, it's not clear which object `setimmediate` was\n// able to install onto.  Search each possibility in the same order as the\n// `setimmediate` library.\nexports.setImmediate = (typeof self !== \"undefined\" && self.setImmediate) ||\n                       (typeof global !== \"undefined\" && global.setImmediate) ||\n                       (this && this.setImmediate);\nexports.clearImmediate = (typeof self !== \"undefined\" && self.clearImmediate) ||\n                         (typeof global !== \"undefined\" && global.clearImmediate) ||\n                         (this && this.clearImmediate);\n\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(1)))\n\n/***/ }),\n/* 43 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/* WEBPACK VAR INJECTION */(function(global, process) {(function (global, undefined) {\n    \"use strict\";\n\n    if (global.setImmediate) {\n        return;\n    }\n\n    var nextHandle = 1; // Spec says greater than zero\n    var tasksByHandle = {};\n    var currentlyRunningATask = false;\n    var doc = global.document;\n    var registerImmediate;\n\n    function setImmediate(callback) {\n      // Callback can either be a function or a string\n      if (typeof callback !== \"function\") {\n        callback = new Function(\"\" + callback);\n      }\n      // Copy function arguments\n      var args = new Array(arguments.length - 1);\n      for (var i = 0; i < args.length; i++) {\n          args[i] = arguments[i + 1];\n      }\n      // Store and register the task\n      var task = { callback: callback, args: args };\n      tasksByHandle[nextHandle] = task;\n      registerImmediate(nextHandle);\n      return nextHandle++;\n    }\n\n    function clearImmediate(handle) {\n        delete tasksByHandle[handle];\n    }\n\n    function run(task) {\n        var callback = task.callback;\n        var args = task.args;\n        switch (args.length) {\n        case 0:\n            callback();\n            break;\n        case 1:\n            callback(args[0]);\n            break;\n        case 2:\n            callback(args[0], args[1]);\n            break;\n        case 3:\n            callback(args[0], args[1], args[2]);\n            break;\n        default:\n            callback.apply(undefined, args);\n            break;\n        }\n    }\n\n    function runIfPresent(handle) {\n        // From the spec: \"Wait until any invocations of this algorithm started before this one have completed.\"\n        // So if we're currently running a task, we'll need to delay this invocation.\n        if (currentlyRunningATask) {\n            // Delay by doing a setTimeout. setImmediate was tried instead, but in Firefox 7 it generated a\n            // \"too much recursion\" error.\n            setTimeout(runIfPresent, 0, handle);\n        } else {\n            var task = tasksByHandle[handle];\n            if (task) {\n                currentlyRunningATask = true;\n                try {\n                    run(task);\n                } finally {\n                    clearImmediate(handle);\n                    currentlyRunningATask = false;\n                }\n            }\n        }\n    }\n\n    function installNextTickImplementation() {\n        registerImmediate = function(handle) {\n            process.nextTick(function () { runIfPresent(handle); });\n        };\n    }\n\n    function canUsePostMessage() {\n        // The test against `importScripts` prevents this implementation from being installed inside a web worker,\n        // where `global.postMessage` means something completely different and can't be used for this purpose.\n        if (global.postMessage && !global.importScripts) {\n            var postMessageIsAsynchronous = true;\n            var oldOnMessage = global.onmessage;\n            global.onmessage = function() {\n                postMessageIsAsynchronous = false;\n            };\n            global.postMessage(\"\", \"*\");\n            global.onmessage = oldOnMessage;\n            return postMessageIsAsynchronous;\n        }\n    }\n\n    function installPostMessageImplementation() {\n        // Installs an event handler on `global` for the `message` event: see\n        // * https://developer.mozilla.org/en/DOM/window.postMessage\n        // * http://www.whatwg.org/specs/web-apps/current-work/multipage/comms.html#crossDocumentMessages\n\n        var messagePrefix = \"setImmediate$\" + Math.random() + \"$\";\n        var onGlobalMessage = function(event) {\n            if (event.source === global &&\n                typeof event.data === \"string\" &&\n                event.data.indexOf(messagePrefix) === 0) {\n                runIfPresent(+event.data.slice(messagePrefix.length));\n            }\n        };\n\n        if (global.addEventListener) {\n            global.addEventListener(\"message\", onGlobalMessage, false);\n        } else {\n            global.attachEvent(\"onmessage\", onGlobalMessage);\n        }\n\n        registerImmediate = function(handle) {\n            global.postMessage(messagePrefix + handle, \"*\");\n        };\n    }\n\n    function installMessageChannelImplementation() {\n        var channel = new MessageChannel();\n        channel.port1.onmessage = function(event) {\n            var handle = event.data;\n            runIfPresent(handle);\n        };\n\n        registerImmediate = function(handle) {\n            channel.port2.postMessage(handle);\n        };\n    }\n\n    function installReadyStateChangeImplementation() {\n        var html = doc.documentElement;\n        registerImmediate = function(handle) {\n            // Create a <script> element; its readystatechange event will be fired asynchronously once it is inserted\n            // into the document. Do so, thus queuing up the task. Remember to clean up once it's been called.\n            var script = doc.createElement(\"script\");\n            script.onreadystatechange = function () {\n                runIfPresent(handle);\n                script.onreadystatechange = null;\n                html.removeChild(script);\n                script = null;\n            };\n            html.appendChild(script);\n        };\n    }\n\n    function installSetTimeoutImplementation() {\n        registerImmediate = function(handle) {\n            setTimeout(runIfPresent, 0, handle);\n        };\n    }\n\n    // If supported, we should attach to the prototype of global, since that is where setTimeout et al. live.\n    var attachTo = Object.getPrototypeOf && Object.getPrototypeOf(global);\n    attachTo = attachTo && attachTo.setTimeout ? attachTo : global;\n\n    // Don't get fooled by e.g. browserify environments.\n    if ({}.toString.call(global.process) === \"[object process]\") {\n        // For Node.js before 0.9\n        installNextTickImplementation();\n\n    } else if (canUsePostMessage()) {\n        // For non-IE10 modern browsers\n        installPostMessageImplementation();\n\n    } else if (global.MessageChannel) {\n        // For web workers, where supported\n        installMessageChannelImplementation();\n\n    } else if (doc && \"onreadystatechange\" in doc.createElement(\"script\")) {\n        // For IE 6–8\n        installReadyStateChangeImplementation();\n\n    } else {\n        // For older browsers\n        installSetTimeoutImplementation();\n    }\n\n    attachTo.setImmediate = setImmediate;\n    attachTo.clearImmediate = clearImmediate;\n}(typeof self === \"undefined\" ? typeof global === \"undefined\" ? this : global : self));\n\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(1), __webpack_require__(8)))\n\n/***/ }),\n/* 44 */\n/***/ (function(module, exports) {\n\n(function(self) {\n  'use strict';\n\n  if (self.fetch) {\n    return\n  }\n\n  var support = {\n    searchParams: 'URLSearchParams' in self,\n    iterable: 'Symbol' in self && 'iterator' in Symbol,\n    blob: 'FileReader' in self && 'Blob' in self && (function() {\n      try {\n        new Blob()\n        return true\n      } catch(e) {\n        return false\n      }\n    })(),\n    formData: 'FormData' in self,\n    arrayBuffer: 'ArrayBuffer' in self\n  }\n\n  if (support.arrayBuffer) {\n    var viewClasses = [\n      '[object Int8Array]',\n      '[object Uint8Array]',\n      '[object Uint8ClampedArray]',\n      '[object Int16Array]',\n      '[object Uint16Array]',\n      '[object Int32Array]',\n      '[object Uint32Array]',\n      '[object Float32Array]',\n      '[object Float64Array]'\n    ]\n\n    var isDataView = function(obj) {\n      return obj && DataView.prototype.isPrototypeOf(obj)\n    }\n\n    var isArrayBufferView = ArrayBuffer.isView || function(obj) {\n      return obj && viewClasses.indexOf(Object.prototype.toString.call(obj)) > -1\n    }\n  }\n\n  function normalizeName(name) {\n    if (typeof name !== 'string') {\n      name = String(name)\n    }\n    if (/[^a-z0-9\\-#$%&'*+.\\^_`|~]/i.test(name)) {\n      throw new TypeError('Invalid character in header field name')\n    }\n    return name.toLowerCase()\n  }\n\n  function normalizeValue(value) {\n    if (typeof value !== 'string') {\n      value = String(value)\n    }\n    return value\n  }\n\n  // Build a destructive iterator for the value list\n  function iteratorFor(items) {\n    var iterator = {\n      next: function() {\n        var value = items.shift()\n        return {done: value === undefined, value: value}\n      }\n    }\n\n    if (support.iterable) {\n      iterator[Symbol.iterator] = function() {\n        return iterator\n      }\n    }\n\n    return iterator\n  }\n\n  function Headers(headers) {\n    this.map = {}\n\n    if (headers instanceof Headers) {\n      headers.forEach(function(value, name) {\n        this.append(name, value)\n      }, this)\n    } else if (Array.isArray(headers)) {\n      headers.forEach(function(header) {\n        this.append(header[0], header[1])\n      }, this)\n    } else if (headers) {\n      Object.getOwnPropertyNames(headers).forEach(function(name) {\n        this.append(name, headers[name])\n      }, this)\n    }\n  }\n\n  Headers.prototype.append = function(name, value) {\n    name = normalizeName(name)\n    value = normalizeValue(value)\n    var oldValue = this.map[name]\n    this.map[name] = oldValue ? oldValue+','+value : value\n  }\n\n  Headers.prototype['delete'] = function(name) {\n    delete this.map[normalizeName(name)]\n  }\n\n  Headers.prototype.get = function(name) {\n    name = normalizeName(name)\n    return this.has(name) ? this.map[name] : null\n  }\n\n  Headers.prototype.has = function(name) {\n    return this.map.hasOwnProperty(normalizeName(name))\n  }\n\n  Headers.prototype.set = function(name, value) {\n    this.map[normalizeName(name)] = normalizeValue(value)\n  }\n\n  Headers.prototype.forEach = function(callback, thisArg) {\n    for (var name in this.map) {\n      if (this.map.hasOwnProperty(name)) {\n        callback.call(thisArg, this.map[name], name, this)\n      }\n    }\n  }\n\n  Headers.prototype.keys = function() {\n    var items = []\n    this.forEach(function(value, name) { items.push(name) })\n    return iteratorFor(items)\n  }\n\n  Headers.prototype.values = function() {\n    var items = []\n    this.forEach(function(value) { items.push(value) })\n    return iteratorFor(items)\n  }\n\n  Headers.prototype.entries = function() {\n    var items = []\n    this.forEach(function(value, name) { items.push([name, value]) })\n    return iteratorFor(items)\n  }\n\n  if (support.iterable) {\n    Headers.prototype[Symbol.iterator] = Headers.prototype.entries\n  }\n\n  function consumed(body) {\n    if (body.bodyUsed) {\n      return Promise.reject(new TypeError('Already read'))\n    }\n    body.bodyUsed = true\n  }\n\n  function fileReaderReady(reader) {\n    return new Promise(function(resolve, reject) {\n      reader.onload = function() {\n        resolve(reader.result)\n      }\n      reader.onerror = function() {\n        reject(reader.error)\n      }\n    })\n  }\n\n  function readBlobAsArrayBuffer(blob) {\n    var reader = new FileReader()\n    var promise = fileReaderReady(reader)\n    reader.readAsArrayBuffer(blob)\n    return promise\n  }\n\n  function readBlobAsText(blob) {\n    var reader = new FileReader()\n    var promise = fileReaderReady(reader)\n    reader.readAsText(blob)\n    return promise\n  }\n\n  function readArrayBufferAsText(buf) {\n    var view = new Uint8Array(buf)\n    var chars = new Array(view.length)\n\n    for (var i = 0; i < view.length; i++) {\n      chars[i] = String.fromCharCode(view[i])\n    }\n    return chars.join('')\n  }\n\n  function bufferClone(buf) {\n    if (buf.slice) {\n      return buf.slice(0)\n    } else {\n      var view = new Uint8Array(buf.byteLength)\n      view.set(new Uint8Array(buf))\n      return view.buffer\n    }\n  }\n\n  function Body() {\n    this.bodyUsed = false\n\n    this._initBody = function(body) {\n      this._bodyInit = body\n      if (!body) {\n        this._bodyText = ''\n      } else if (typeof body === 'string') {\n        this._bodyText = body\n      } else if (support.blob && Blob.prototype.isPrototypeOf(body)) {\n        this._bodyBlob = body\n      } else if (support.formData && FormData.prototype.isPrototypeOf(body)) {\n        this._bodyFormData = body\n      } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n        this._bodyText = body.toString()\n      } else if (support.arrayBuffer && support.blob && isDataView(body)) {\n        this._bodyArrayBuffer = bufferClone(body.buffer)\n        // IE 10-11 can't handle a DataView body.\n        this._bodyInit = new Blob([this._bodyArrayBuffer])\n      } else if (support.arrayBuffer && (ArrayBuffer.prototype.isPrototypeOf(body) || isArrayBufferView(body))) {\n        this._bodyArrayBuffer = bufferClone(body)\n      } else {\n        throw new Error('unsupported BodyInit type')\n      }\n\n      if (!this.headers.get('content-type')) {\n        if (typeof body === 'string') {\n          this.headers.set('content-type', 'text/plain;charset=UTF-8')\n        } else if (this._bodyBlob && this._bodyBlob.type) {\n          this.headers.set('content-type', this._bodyBlob.type)\n        } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n          this.headers.set('content-type', 'application/x-www-form-urlencoded;charset=UTF-8')\n        }\n      }\n    }\n\n    if (support.blob) {\n      this.blob = function() {\n        var rejected = consumed(this)\n        if (rejected) {\n          return rejected\n        }\n\n        if (this._bodyBlob) {\n          return Promise.resolve(this._bodyBlob)\n        } else if (this._bodyArrayBuffer) {\n          return Promise.resolve(new Blob([this._bodyArrayBuffer]))\n        } else if (this._bodyFormData) {\n          throw new Error('could not read FormData body as blob')\n        } else {\n          return Promise.resolve(new Blob([this._bodyText]))\n        }\n      }\n\n      this.arrayBuffer = function() {\n        if (this._bodyArrayBuffer) {\n          return consumed(this) || Promise.resolve(this._bodyArrayBuffer)\n        } else {\n          return this.blob().then(readBlobAsArrayBuffer)\n        }\n      }\n    }\n\n    this.text = function() {\n      var rejected = consumed(this)\n      if (rejected) {\n        return rejected\n      }\n\n      if (this._bodyBlob) {\n        return readBlobAsText(this._bodyBlob)\n      } else if (this._bodyArrayBuffer) {\n        return Promise.resolve(readArrayBufferAsText(this._bodyArrayBuffer))\n      } else if (this._bodyFormData) {\n        throw new Error('could not read FormData body as text')\n      } else {\n        return Promise.resolve(this._bodyText)\n      }\n    }\n\n    if (support.formData) {\n      this.formData = function() {\n        return this.text().then(decode)\n      }\n    }\n\n    this.json = function() {\n      return this.text().then(JSON.parse)\n    }\n\n    return this\n  }\n\n  // HTTP methods whose capitalization should be normalized\n  var methods = ['DELETE', 'GET', 'HEAD', 'OPTIONS', 'POST', 'PUT']\n\n  function normalizeMethod(method) {\n    var upcased = method.toUpperCase()\n    return (methods.indexOf(upcased) > -1) ? upcased : method\n  }\n\n  function Request(input, options) {\n    options = options || {}\n    var body = options.body\n\n    if (input instanceof Request) {\n      if (input.bodyUsed) {\n        throw new TypeError('Already read')\n      }\n      this.url = input.url\n      this.credentials = input.credentials\n      if (!options.headers) {\n        this.headers = new Headers(input.headers)\n      }\n      this.method = input.method\n      this.mode = input.mode\n      if (!body && input._bodyInit != null) {\n        body = input._bodyInit\n        input.bodyUsed = true\n      }\n    } else {\n      this.url = String(input)\n    }\n\n    this.credentials = options.credentials || this.credentials || 'omit'\n    if (options.headers || !this.headers) {\n      this.headers = new Headers(options.headers)\n    }\n    this.method = normalizeMethod(options.method || this.method || 'GET')\n    this.mode = options.mode || this.mode || null\n    this.referrer = null\n\n    if ((this.method === 'GET' || this.method === 'HEAD') && body) {\n      throw new TypeError('Body not allowed for GET or HEAD requests')\n    }\n    this._initBody(body)\n  }\n\n  Request.prototype.clone = function() {\n    return new Request(this, { body: this._bodyInit })\n  }\n\n  function decode(body) {\n    var form = new FormData()\n    body.trim().split('&').forEach(function(bytes) {\n      if (bytes) {\n        var split = bytes.split('=')\n        var name = split.shift().replace(/\\+/g, ' ')\n        var value = split.join('=').replace(/\\+/g, ' ')\n        form.append(decodeURIComponent(name), decodeURIComponent(value))\n      }\n    })\n    return form\n  }\n\n  function parseHeaders(rawHeaders) {\n    var headers = new Headers()\n    // Replace instances of \\r\\n and \\n followed by at least one space or horizontal tab with a space\n    // https://tools.ietf.org/html/rfc7230#section-3.2\n    var preProcessedHeaders = rawHeaders.replace(/\\r?\\n[\\t ]+/g, ' ')\n    preProcessedHeaders.split(/\\r?\\n/).forEach(function(line) {\n      var parts = line.split(':')\n      var key = parts.shift().trim()\n      if (key) {\n        var value = parts.join(':').trim()\n        headers.append(key, value)\n      }\n    })\n    return headers\n  }\n\n  Body.call(Request.prototype)\n\n  function Response(bodyInit, options) {\n    if (!options) {\n      options = {}\n    }\n\n    this.type = 'default'\n    this.status = options.status === undefined ? 200 : options.status\n    this.ok = this.status >= 200 && this.status < 300\n    this.statusText = 'statusText' in options ? options.statusText : 'OK'\n    this.headers = new Headers(options.headers)\n    this.url = options.url || ''\n    this._initBody(bodyInit)\n  }\n\n  Body.call(Response.prototype)\n\n  Response.prototype.clone = function() {\n    return new Response(this._bodyInit, {\n      status: this.status,\n      statusText: this.statusText,\n      headers: new Headers(this.headers),\n      url: this.url\n    })\n  }\n\n  Response.error = function() {\n    var response = new Response(null, {status: 0, statusText: ''})\n    response.type = 'error'\n    return response\n  }\n\n  var redirectStatuses = [301, 302, 303, 307, 308]\n\n  Response.redirect = function(url, status) {\n    if (redirectStatuses.indexOf(status) === -1) {\n      throw new RangeError('Invalid status code')\n    }\n\n    return new Response(null, {status: status, headers: {location: url}})\n  }\n\n  self.Headers = Headers\n  self.Request = Request\n  self.Response = Response\n\n  self.fetch = function(input, init) {\n    return new Promise(function(resolve, reject) {\n      var request = new Request(input, init)\n      var xhr = new XMLHttpRequest()\n\n      xhr.onload = function() {\n        var options = {\n          status: xhr.status,\n          statusText: xhr.statusText,\n          headers: parseHeaders(xhr.getAllResponseHeaders() || '')\n        }\n        options.url = 'responseURL' in xhr ? xhr.responseURL : options.headers.get('X-Request-URL')\n        var body = 'response' in xhr ? xhr.response : xhr.responseText\n        resolve(new Response(body, options))\n      }\n\n      xhr.onerror = function() {\n        reject(new TypeError('Network request failed'))\n      }\n\n      xhr.ontimeout = function() {\n        reject(new TypeError('Network request failed'))\n      }\n\n      xhr.open(request.method, request.url, true)\n\n      if (request.credentials === 'include') {\n        xhr.withCredentials = true\n      } else if (request.credentials === 'omit') {\n        xhr.withCredentials = false\n      }\n\n      if ('responseType' in xhr && support.blob) {\n        xhr.responseType = 'blob'\n      }\n\n      request.headers.forEach(function(value, name) {\n        xhr.setRequestHeader(name, value)\n      })\n\n      xhr.send(typeof request._bodyInit === 'undefined' ? null : request._bodyInit)\n    })\n  }\n  self.fetch.polyfill = true\n})(typeof self !== 'undefined' ? self : this);\n\n\n/***/ }),\n/* 45 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/**\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nmodule.exports = __webpack_require__(46);\n\n\n/***/ }),\n/* 46 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(process) {\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\nfunction _interopDefault (ex) { return (ex && (typeof ex === 'object') && 'default' in ex) ? ex['default'] : ex; }\n\nvar util = __webpack_require__(10);\nvar logger = __webpack_require__(47);\nvar tslib_1 = __webpack_require__(11);\nvar firebase = _interopDefault(__webpack_require__(9));\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Wraps a DOM Storage object and:\r\n * - automatically encode objects as JSON strings before storing them to allow us to store arbitrary types.\r\n * - prefixes names with \"firebase:\" to avoid collisions with app data.\r\n *\r\n * We automatically (see storage.js) create two such wrappers, one for sessionStorage,\r\n * and one for localStorage.\r\n *\r\n * @constructor\r\n */\r\nvar DOMStorageWrapper = /** @class */ (function () {\r\n    /**\r\n     * @param {Storage} domStorage_ The underlying storage object (e.g. localStorage or sessionStorage)\r\n     */\r\n    function DOMStorageWrapper(domStorage_) {\r\n        this.domStorage_ = domStorage_;\r\n        // Use a prefix to avoid collisions with other stuff saved by the app.\r\n        this.prefix_ = 'firebase:';\r\n    }\r\n    /**\r\n     * @param {string} key The key to save the value under\r\n     * @param {?Object} value The value being stored, or null to remove the key.\r\n     */\r\n    DOMStorageWrapper.prototype.set = function (key, value) {\r\n        if (value == null) {\r\n            this.domStorage_.removeItem(this.prefixedName_(key));\r\n        }\r\n        else {\r\n            this.domStorage_.setItem(this.prefixedName_(key), util.stringify(value));\r\n        }\r\n    };\r\n    /**\r\n     * @param {string} key\r\n     * @return {*} The value that was stored under this key, or null\r\n     */\r\n    DOMStorageWrapper.prototype.get = function (key) {\r\n        var storedVal = this.domStorage_.getItem(this.prefixedName_(key));\r\n        if (storedVal == null) {\r\n            return null;\r\n        }\r\n        else {\r\n            return util.jsonEval(storedVal);\r\n        }\r\n    };\r\n    /**\r\n     * @param {string} key\r\n     */\r\n    DOMStorageWrapper.prototype.remove = function (key) {\r\n        this.domStorage_.removeItem(this.prefixedName_(key));\r\n    };\r\n    /**\r\n     * @param {string} name\r\n     * @return {string}\r\n     */\r\n    DOMStorageWrapper.prototype.prefixedName_ = function (name) {\r\n        return this.prefix_ + name;\r\n    };\r\n    DOMStorageWrapper.prototype.toString = function () {\r\n        return this.domStorage_.toString();\r\n    };\r\n    return DOMStorageWrapper;\r\n}());\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * An in-memory storage implementation that matches the API of DOMStorageWrapper\r\n * (TODO: create interface for both to implement).\r\n *\r\n * @constructor\r\n */\r\nvar MemoryStorage = /** @class */ (function () {\r\n    function MemoryStorage() {\r\n        this.cache_ = {};\r\n        this.isInMemoryStorage = true;\r\n    }\r\n    MemoryStorage.prototype.set = function (key, value) {\r\n        if (value == null) {\r\n            delete this.cache_[key];\r\n        }\r\n        else {\r\n            this.cache_[key] = value;\r\n        }\r\n    };\r\n    MemoryStorage.prototype.get = function (key) {\r\n        if (util.contains(this.cache_, key)) {\r\n            return this.cache_[key];\r\n        }\r\n        return null;\r\n    };\r\n    MemoryStorage.prototype.remove = function (key) {\r\n        delete this.cache_[key];\r\n    };\r\n    return MemoryStorage;\r\n}());\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Helper to create a DOMStorageWrapper or else fall back to MemoryStorage.\r\n * TODO: Once MemoryStorage and DOMStorageWrapper have a shared interface this method annotation should change\r\n * to reflect this type\r\n *\r\n * @param {string} domStorageName Name of the underlying storage object\r\n *   (e.g. 'localStorage' or 'sessionStorage').\r\n * @return {?} Turning off type information until a common interface is defined.\r\n */\r\nvar createStoragefor = function (domStorageName) {\r\n    try {\r\n        // NOTE: just accessing \"localStorage\" or \"window['localStorage']\" may throw a security exception,\r\n        // so it must be inside the try/catch.\r\n        if (typeof window !== 'undefined' &&\r\n            typeof window[domStorageName] !== 'undefined') {\r\n            // Need to test cache. Just because it's here doesn't mean it works\r\n            var domStorage = window[domStorageName];\r\n            domStorage.setItem('firebase:sentinel', 'cache');\r\n            domStorage.removeItem('firebase:sentinel');\r\n            return new DOMStorageWrapper(domStorage);\r\n        }\r\n    }\r\n    catch (e) { }\r\n    // Failed to create wrapper.  Just return in-memory storage.\r\n    // TODO: log?\r\n    return new MemoryStorage();\r\n};\r\n/** A storage object that lasts across sessions */\r\nvar PersistentStorage = createStoragefor('localStorage');\r\n/** A storage object that only lasts one session */\r\nvar SessionStorage = createStoragefor('sessionStorage');\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nvar logClient = new logger.Logger('@firebase/database');\r\n/**\r\n * Returns a locally-unique ID (generated by just incrementing up from 0 each time its called).\r\n * @type {function(): number} Generated ID.\r\n */\r\nvar LUIDGenerator = (function () {\r\n    var id = 1;\r\n    return function () {\r\n        return id++;\r\n    };\r\n})();\r\n/**\r\n * Sha1 hash of the input string\r\n * @param {!string} str The string to hash\r\n * @return {!string} The resulting hash\r\n */\r\nvar sha1 = function (str) {\r\n    var utf8Bytes = util.stringToByteArray(str);\r\n    var sha1 = new util.Sha1();\r\n    sha1.update(utf8Bytes);\r\n    var sha1Bytes = sha1.digest();\r\n    return util.base64.encodeByteArray(sha1Bytes);\r\n};\r\n/**\r\n * @param {...*} var_args\r\n * @return {string}\r\n * @private\r\n */\r\nvar buildLogMessage_ = function () {\r\n    var var_args = [];\r\n    for (var _i = 0; _i < arguments.length; _i++) {\r\n        var_args[_i] = arguments[_i];\r\n    }\r\n    var message = '';\r\n    for (var i = 0; i < var_args.length; i++) {\r\n        if (Array.isArray(var_args[i]) ||\r\n            (var_args[i] &&\r\n                typeof var_args[i] === 'object' &&\r\n                typeof var_args[i].length === 'number')) {\r\n            message += buildLogMessage_.apply(null, var_args[i]);\r\n        }\r\n        else if (typeof var_args[i] === 'object') {\r\n            message += util.stringify(var_args[i]);\r\n        }\r\n        else {\r\n            message += var_args[i];\r\n        }\r\n        message += ' ';\r\n    }\r\n    return message;\r\n};\r\n/**\r\n * Use this for all debug messages in Firebase.\r\n * @type {?function(string)}\r\n */\r\nvar logger$1 = null;\r\n/**\r\n * Flag to check for log availability on first log message\r\n * @type {boolean}\r\n * @private\r\n */\r\nvar firstLog_ = true;\r\n/**\r\n * The implementation of Firebase.enableLogging (defined here to break dependencies)\r\n * @param {boolean|?function(string)} logger_ A flag to turn on logging, or a custom logger\r\n * @param {boolean=} persistent Whether or not to persist logging settings across refreshes\r\n */\r\nvar enableLogging = function (logger_, persistent) {\r\n    util.assert(!persistent || (logger_ === true || logger_ === false), \"Can't turn on custom loggers persistently.\");\r\n    if (logger_ === true) {\r\n        logClient.logLevel = logger.LogLevel.VERBOSE;\r\n        logger$1 = logClient.log.bind(logClient);\r\n        if (persistent)\r\n            SessionStorage.set('logging_enabled', true);\r\n    }\r\n    else if (typeof logger_ === 'function') {\r\n        logger$1 = logger_;\r\n    }\r\n    else {\r\n        logger$1 = null;\r\n        SessionStorage.remove('logging_enabled');\r\n    }\r\n};\r\n/**\r\n *\r\n * @param {...(string|Arguments)} var_args\r\n */\r\nvar log = function () {\r\n    var var_args = [];\r\n    for (var _i = 0; _i < arguments.length; _i++) {\r\n        var_args[_i] = arguments[_i];\r\n    }\r\n    if (firstLog_ === true) {\r\n        firstLog_ = false;\r\n        if (logger$1 === null && SessionStorage.get('logging_enabled') === true)\r\n            enableLogging(true);\r\n    }\r\n    if (logger$1) {\r\n        var message = buildLogMessage_.apply(null, var_args);\r\n        logger$1(message);\r\n    }\r\n};\r\n/**\r\n * @param {!string} prefix\r\n * @return {function(...[*])}\r\n */\r\nvar logWrapper = function (prefix) {\r\n    return function () {\r\n        var var_args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            var_args[_i] = arguments[_i];\r\n        }\r\n        log.apply(void 0, [prefix].concat(var_args));\r\n    };\r\n};\r\n/**\r\n * @param {...string} var_args\r\n */\r\nvar error = function () {\r\n    var var_args = [];\r\n    for (var _i = 0; _i < arguments.length; _i++) {\r\n        var_args[_i] = arguments[_i];\r\n    }\r\n    var message = 'FIREBASE INTERNAL ERROR: ' + buildLogMessage_.apply(void 0, var_args);\r\n    logClient.error(message);\r\n};\r\n/**\r\n * @param {...string} var_args\r\n */\r\nvar fatal = function () {\r\n    var var_args = [];\r\n    for (var _i = 0; _i < arguments.length; _i++) {\r\n        var_args[_i] = arguments[_i];\r\n    }\r\n    var message = \"FIREBASE FATAL ERROR: \" + buildLogMessage_.apply(void 0, var_args);\r\n    logClient.error(message);\r\n    throw new Error(message);\r\n};\r\n/**\r\n * @param {...*} var_args\r\n */\r\nvar warn = function () {\r\n    var var_args = [];\r\n    for (var _i = 0; _i < arguments.length; _i++) {\r\n        var_args[_i] = arguments[_i];\r\n    }\r\n    var message = 'FIREBASE WARNING: ' + buildLogMessage_.apply(void 0, var_args);\r\n    logClient.warn(message);\r\n};\r\n/**\r\n * Logs a warning if the containing page uses https. Called when a call to new Firebase\r\n * does not use https.\r\n */\r\nvar warnIfPageIsSecure = function () {\r\n    // Be very careful accessing browser globals. Who knows what may or may not exist.\r\n    if (typeof window !== 'undefined' &&\r\n        window.location &&\r\n        window.location.protocol &&\r\n        window.location.protocol.indexOf('https:') !== -1) {\r\n        warn('Insecure Firebase access from a secure page. ' +\r\n            'Please use https in calls to new Firebase().');\r\n    }\r\n};\r\n/**\r\n * Returns true if data is NaN, or +/- Infinity.\r\n * @param {*} data\r\n * @return {boolean}\r\n */\r\nvar isInvalidJSONNumber = function (data) {\r\n    return (typeof data === 'number' &&\r\n        (data != data || // NaN\r\n            data == Number.POSITIVE_INFINITY ||\r\n            data == Number.NEGATIVE_INFINITY));\r\n};\r\n/**\r\n * @param {function()} fn\r\n */\r\nvar executeWhenDOMReady = function (fn) {\r\n    if (util.isNodeSdk() || document.readyState === 'complete') {\r\n        fn();\r\n    }\r\n    else {\r\n        // Modeled after jQuery. Try DOMContentLoaded and onreadystatechange (which\r\n        // fire before onload), but fall back to onload.\r\n        var called_1 = false;\r\n        var wrappedFn_1 = function () {\r\n            if (!document.body) {\r\n                setTimeout(wrappedFn_1, Math.floor(10));\r\n                return;\r\n            }\r\n            if (!called_1) {\r\n                called_1 = true;\r\n                fn();\r\n            }\r\n        };\r\n        if (document.addEventListener) {\r\n            document.addEventListener('DOMContentLoaded', wrappedFn_1, false);\r\n            // fallback to onload.\r\n            window.addEventListener('load', wrappedFn_1, false);\r\n        }\r\n        else if (document.attachEvent) {\r\n            // IE.\r\n            document.attachEvent('onreadystatechange', function () {\r\n                if (document.readyState === 'complete')\r\n                    wrappedFn_1();\r\n            });\r\n            // fallback to onload.\r\n            window.attachEvent('onload', wrappedFn_1);\r\n            // jQuery has an extra hack for IE that we could employ (based on\r\n            // http://javascript.nwbox.com/IEContentLoaded/) But it looks really old.\r\n            // I'm hoping we don't need it.\r\n        }\r\n    }\r\n};\r\n/**\r\n * Minimum key name. Invalid for actual data, used as a marker to sort before any valid names\r\n * @type {!string}\r\n */\r\nvar MIN_NAME = '[MIN_NAME]';\r\n/**\r\n * Maximum key name. Invalid for actual data, used as a marker to sort above any valid names\r\n * @type {!string}\r\n */\r\nvar MAX_NAME = '[MAX_NAME]';\r\n/**\r\n * Compares valid Firebase key names, plus min and max name\r\n * @param {!string} a\r\n * @param {!string} b\r\n * @return {!number}\r\n */\r\nvar nameCompare = function (a, b) {\r\n    if (a === b) {\r\n        return 0;\r\n    }\r\n    else if (a === MIN_NAME || b === MAX_NAME) {\r\n        return -1;\r\n    }\r\n    else if (b === MIN_NAME || a === MAX_NAME) {\r\n        return 1;\r\n    }\r\n    else {\r\n        var aAsInt = tryParseInt(a), bAsInt = tryParseInt(b);\r\n        if (aAsInt !== null) {\r\n            if (bAsInt !== null) {\r\n                return aAsInt - bAsInt == 0 ? a.length - b.length : aAsInt - bAsInt;\r\n            }\r\n            else {\r\n                return -1;\r\n            }\r\n        }\r\n        else if (bAsInt !== null) {\r\n            return 1;\r\n        }\r\n        else {\r\n            return a < b ? -1 : 1;\r\n        }\r\n    }\r\n};\r\n/**\r\n * @param {!string} a\r\n * @param {!string} b\r\n * @return {!number} comparison result.\r\n */\r\nvar stringCompare = function (a, b) {\r\n    if (a === b) {\r\n        return 0;\r\n    }\r\n    else if (a < b) {\r\n        return -1;\r\n    }\r\n    else {\r\n        return 1;\r\n    }\r\n};\r\n/**\r\n * @param {string} key\r\n * @param {Object} obj\r\n * @return {*}\r\n */\r\nvar requireKey = function (key, obj) {\r\n    if (obj && key in obj) {\r\n        return obj[key];\r\n    }\r\n    else {\r\n        throw new Error('Missing required key (' + key + ') in object: ' + util.stringify(obj));\r\n    }\r\n};\r\n/**\r\n * @param {*} obj\r\n * @return {string}\r\n */\r\nvar ObjectToUniqueKey = function (obj) {\r\n    if (typeof obj !== 'object' || obj === null)\r\n        return util.stringify(obj);\r\n    var keys = [];\r\n    for (var k in obj) {\r\n        keys.push(k);\r\n    }\r\n    // Export as json, but with the keys sorted.\r\n    keys.sort();\r\n    var key = '{';\r\n    for (var i = 0; i < keys.length; i++) {\r\n        if (i !== 0)\r\n            key += ',';\r\n        key += util.stringify(keys[i]);\r\n        key += ':';\r\n        key += ObjectToUniqueKey(obj[keys[i]]);\r\n    }\r\n    key += '}';\r\n    return key;\r\n};\r\n/**\r\n * Splits a string into a number of smaller segments of maximum size\r\n * @param {!string} str The string\r\n * @param {!number} segsize The maximum number of chars in the string.\r\n * @return {Array.<string>} The string, split into appropriately-sized chunks\r\n */\r\nvar splitStringBySize = function (str, segsize) {\r\n    var len = str.length;\r\n    if (len <= segsize) {\r\n        return [str];\r\n    }\r\n    var dataSegs = [];\r\n    for (var c = 0; c < len; c += segsize) {\r\n        if (c + segsize > len) {\r\n            dataSegs.push(str.substring(c, len));\r\n        }\r\n        else {\r\n            dataSegs.push(str.substring(c, c + segsize));\r\n        }\r\n    }\r\n    return dataSegs;\r\n};\r\n/**\r\n * Apply a function to each (key, value) pair in an object or\r\n * apply a function to each (index, value) pair in an array\r\n * @param {!(Object|Array)} obj The object or array to iterate over\r\n * @param {function(?, ?)} fn The function to apply\r\n */\r\nvar each = function (obj, fn) {\r\n    if (Array.isArray(obj)) {\r\n        for (var i = 0; i < obj.length; ++i) {\r\n            fn(i, obj[i]);\r\n        }\r\n    }\r\n    else {\r\n        /**\r\n         * in the conversion of code we removed the goog.object.forEach\r\n         * function which did a value,key callback. We standardized on\r\n         * a single impl that does a key, value callback. So we invert\r\n         * to not have to touch the `each` code points\r\n         */\r\n        util.forEach(obj, function (key, val) { return fn(val, key); });\r\n    }\r\n};\r\n/**\r\n * Borrowed from http://hg.secondlife.com/llsd/src/tip/js/typedarray.js (MIT License)\r\n * I made one modification at the end and removed the NaN / Infinity\r\n * handling (since it seemed broken [caused an overflow] and we don't need it).  See MJL comments.\r\n * @param {!number} v A double\r\n * @return {string}\r\n */\r\nvar doubleToIEEE754String = function (v) {\r\n    util.assert(!isInvalidJSONNumber(v), 'Invalid JSON number'); // MJL\r\n    var ebits = 11, fbits = 52;\r\n    var bias = (1 << (ebits - 1)) - 1, s, e, f, ln, i, bits, str;\r\n    // Compute sign, exponent, fraction\r\n    // Skip NaN / Infinity handling --MJL.\r\n    if (v === 0) {\r\n        e = 0;\r\n        f = 0;\r\n        s = 1 / v === -Infinity ? 1 : 0;\r\n    }\r\n    else {\r\n        s = v < 0;\r\n        v = Math.abs(v);\r\n        if (v >= Math.pow(2, 1 - bias)) {\r\n            // Normalized\r\n            ln = Math.min(Math.floor(Math.log(v) / Math.LN2), bias);\r\n            e = ln + bias;\r\n            f = Math.round(v * Math.pow(2, fbits - ln) - Math.pow(2, fbits));\r\n        }\r\n        else {\r\n            // Denormalized\r\n            e = 0;\r\n            f = Math.round(v / Math.pow(2, 1 - bias - fbits));\r\n        }\r\n    }\r\n    // Pack sign, exponent, fraction\r\n    bits = [];\r\n    for (i = fbits; i; i -= 1) {\r\n        bits.push(f % 2 ? 1 : 0);\r\n        f = Math.floor(f / 2);\r\n    }\r\n    for (i = ebits; i; i -= 1) {\r\n        bits.push(e % 2 ? 1 : 0);\r\n        e = Math.floor(e / 2);\r\n    }\r\n    bits.push(s ? 1 : 0);\r\n    bits.reverse();\r\n    str = bits.join('');\r\n    // Return the data as a hex string. --MJL\r\n    var hexByteString = '';\r\n    for (i = 0; i < 64; i += 8) {\r\n        var hexByte = parseInt(str.substr(i, 8), 2).toString(16);\r\n        if (hexByte.length === 1)\r\n            hexByte = '0' + hexByte;\r\n        hexByteString = hexByteString + hexByte;\r\n    }\r\n    return hexByteString.toLowerCase();\r\n};\r\n/**\r\n * Used to detect if we're in a Chrome content script (which executes in an\r\n * isolated environment where long-polling doesn't work).\r\n * @return {boolean}\r\n */\r\nvar isChromeExtensionContentScript = function () {\r\n    return !!(typeof window === 'object' &&\r\n        window['chrome'] &&\r\n        window['chrome']['extension'] &&\r\n        !/^chrome/.test(window.location.href));\r\n};\r\n/**\r\n * Used to detect if we're in a Windows 8 Store app.\r\n * @return {boolean}\r\n */\r\nvar isWindowsStoreApp = function () {\r\n    // Check for the presence of a couple WinRT globals\r\n    return typeof Windows === 'object' && typeof Windows.UI === 'object';\r\n};\r\n/**\r\n * Converts a server error code to a Javascript Error\r\n * @param {!string} code\r\n * @param {!Query} query\r\n * @return {Error}\r\n */\r\nvar errorForServerCode = function (code, query) {\r\n    var reason = 'Unknown Error';\r\n    if (code === 'too_big') {\r\n        reason =\r\n            'The data requested exceeds the maximum size ' +\r\n                'that can be accessed with a single request.';\r\n    }\r\n    else if (code == 'permission_denied') {\r\n        reason = \"Client doesn't have permission to access the desired data.\";\r\n    }\r\n    else if (code == 'unavailable') {\r\n        reason = 'The service is unavailable';\r\n    }\r\n    var error = new Error(code + ' at ' + query.path.toString() + ': ' + reason);\r\n    error.code = code.toUpperCase();\r\n    return error;\r\n};\r\n/**\r\n * Used to test for integer-looking strings\r\n * @type {RegExp}\r\n * @private\r\n */\r\nvar INTEGER_REGEXP_ = new RegExp('^-?\\\\d{1,10}$');\r\n/**\r\n * If the string contains a 32-bit integer, return it.  Else return null.\r\n * @param {!string} str\r\n * @return {?number}\r\n */\r\nvar tryParseInt = function (str) {\r\n    if (INTEGER_REGEXP_.test(str)) {\r\n        var intVal = Number(str);\r\n        if (intVal >= -2147483648 && intVal <= 2147483647) {\r\n            return intVal;\r\n        }\r\n    }\r\n    return null;\r\n};\r\n/**\r\n * Helper to run some code but catch any exceptions and re-throw them later.\r\n * Useful for preventing user callbacks from breaking internal code.\r\n *\r\n * Re-throwing the exception from a setTimeout is a little evil, but it's very\r\n * convenient (we don't have to try to figure out when is a safe point to\r\n * re-throw it), and the behavior seems reasonable:\r\n *\r\n * * If you aren't pausing on exceptions, you get an error in the console with\r\n *   the correct stack trace.\r\n * * If you're pausing on all exceptions, the debugger will pause on your\r\n *   exception and then again when we rethrow it.\r\n * * If you're only pausing on uncaught exceptions, the debugger will only pause\r\n *   on us re-throwing it.\r\n *\r\n * @param {!function()} fn The code to guard.\r\n */\r\nvar exceptionGuard = function (fn) {\r\n    try {\r\n        fn();\r\n    }\r\n    catch (e) {\r\n        // Re-throw exception when it's safe.\r\n        setTimeout(function () {\r\n            // It used to be that \"throw e\" would result in a good console error with\r\n            // relevant context, but as of Chrome 39, you just get the firebase.js\r\n            // file/line number where we re-throw it, which is useless. So we log\r\n            // e.stack explicitly.\r\n            var stack = e.stack || '';\r\n            warn('Exception was thrown by user callback.', stack);\r\n            throw e;\r\n        }, Math.floor(0));\r\n    }\r\n};\r\n/**\r\n * @return {boolean} true if we think we're currently being crawled.\r\n */\r\nvar beingCrawled = function () {\r\n    var userAgent = (typeof window === 'object' &&\r\n        window['navigator'] &&\r\n        window['navigator']['userAgent']) ||\r\n        '';\r\n    // For now we whitelist the most popular crawlers.  We should refine this to be the set of crawlers we\r\n    // believe to support JavaScript/AJAX rendering.\r\n    // NOTE: Google Webmaster Tools doesn't really belong, but their \"This is how a visitor to your website\r\n    // would have seen the page\" is flaky if we don't treat it as a crawler.\r\n    return (userAgent.search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i) >= 0);\r\n};\r\n/**\r\n * Same as setTimeout() except on Node.JS it will /not/ prevent the process from exiting.\r\n *\r\n * It is removed with clearTimeout() as normal.\r\n *\r\n * @param {Function} fn Function to run.\r\n * @param {number} time Milliseconds to wait before running.\r\n * @return {number|Object} The setTimeout() return value.\r\n */\r\nvar setTimeoutNonBlocking = function (fn, time) {\r\n    var timeout = setTimeout(fn, time);\r\n    if (typeof timeout === 'object' && timeout['unref']) {\r\n        timeout['unref']();\r\n    }\r\n    return timeout;\r\n};\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * An immutable object representing a parsed path.  It's immutable so that you\r\n * can pass them around to other functions without worrying about them changing\r\n * it.\r\n */\r\nvar Path = /** @class */ (function () {\r\n    /**\r\n     * @param {string|Array.<string>} pathOrString Path string to parse,\r\n     *      or another path, or the raw tokens array\r\n     * @param {number=} pieceNum\r\n     */\r\n    function Path(pathOrString, pieceNum) {\r\n        if (pieceNum === void 0) {\r\n            this.pieces_ = pathOrString.split('/');\r\n            // Remove empty pieces.\r\n            var copyTo = 0;\r\n            for (var i = 0; i < this.pieces_.length; i++) {\r\n                if (this.pieces_[i].length > 0) {\r\n                    this.pieces_[copyTo] = this.pieces_[i];\r\n                    copyTo++;\r\n                }\r\n            }\r\n            this.pieces_.length = copyTo;\r\n            this.pieceNum_ = 0;\r\n        }\r\n        else {\r\n            this.pieces_ = pathOrString;\r\n            this.pieceNum_ = pieceNum;\r\n        }\r\n    }\r\n    Object.defineProperty(Path, \"Empty\", {\r\n        /**\r\n         * Singleton to represent an empty path\r\n         *\r\n         * @const\r\n         */\r\n        get: function () {\r\n            return new Path('');\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Path.prototype.getFront = function () {\r\n        if (this.pieceNum_ >= this.pieces_.length)\r\n            return null;\r\n        return this.pieces_[this.pieceNum_];\r\n    };\r\n    /**\r\n     * @return {number} The number of segments in this path\r\n     */\r\n    Path.prototype.getLength = function () {\r\n        return this.pieces_.length - this.pieceNum_;\r\n    };\r\n    /**\r\n     * @return {!Path}\r\n     */\r\n    Path.prototype.popFront = function () {\r\n        var pieceNum = this.pieceNum_;\r\n        if (pieceNum < this.pieces_.length) {\r\n            pieceNum++;\r\n        }\r\n        return new Path(this.pieces_, pieceNum);\r\n    };\r\n    /**\r\n     * @return {?string}\r\n     */\r\n    Path.prototype.getBack = function () {\r\n        if (this.pieceNum_ < this.pieces_.length)\r\n            return this.pieces_[this.pieces_.length - 1];\r\n        return null;\r\n    };\r\n    Path.prototype.toString = function () {\r\n        var pathString = '';\r\n        for (var i = this.pieceNum_; i < this.pieces_.length; i++) {\r\n            if (this.pieces_[i] !== '')\r\n                pathString += '/' + this.pieces_[i];\r\n        }\r\n        return pathString || '/';\r\n    };\r\n    Path.prototype.toUrlEncodedString = function () {\r\n        var pathString = '';\r\n        for (var i = this.pieceNum_; i < this.pieces_.length; i++) {\r\n            if (this.pieces_[i] !== '')\r\n                pathString += '/' + encodeURIComponent(String(this.pieces_[i]));\r\n        }\r\n        return pathString || '/';\r\n    };\r\n    /**\r\n     * Shallow copy of the parts of the path.\r\n     *\r\n     * @param {number=} begin\r\n     * @return {!Array<string>}\r\n     */\r\n    Path.prototype.slice = function (begin) {\r\n        if (begin === void 0) { begin = 0; }\r\n        return this.pieces_.slice(this.pieceNum_ + begin);\r\n    };\r\n    /**\r\n     * @return {?Path}\r\n     */\r\n    Path.prototype.parent = function () {\r\n        if (this.pieceNum_ >= this.pieces_.length)\r\n            return null;\r\n        var pieces = [];\r\n        for (var i = this.pieceNum_; i < this.pieces_.length - 1; i++)\r\n            pieces.push(this.pieces_[i]);\r\n        return new Path(pieces, 0);\r\n    };\r\n    /**\r\n     * @param {string|!Path} childPathObj\r\n     * @return {!Path}\r\n     */\r\n    Path.prototype.child = function (childPathObj) {\r\n        var pieces = [];\r\n        for (var i = this.pieceNum_; i < this.pieces_.length; i++)\r\n            pieces.push(this.pieces_[i]);\r\n        if (childPathObj instanceof Path) {\r\n            for (var i = childPathObj.pieceNum_; i < childPathObj.pieces_.length; i++) {\r\n                pieces.push(childPathObj.pieces_[i]);\r\n            }\r\n        }\r\n        else {\r\n            var childPieces = childPathObj.split('/');\r\n            for (var i = 0; i < childPieces.length; i++) {\r\n                if (childPieces[i].length > 0)\r\n                    pieces.push(childPieces[i]);\r\n            }\r\n        }\r\n        return new Path(pieces, 0);\r\n    };\r\n    /**\r\n     * @return {boolean} True if there are no segments in this path\r\n     */\r\n    Path.prototype.isEmpty = function () {\r\n        return this.pieceNum_ >= this.pieces_.length;\r\n    };\r\n    /**\r\n     * @param {!Path} outerPath\r\n     * @param {!Path} innerPath\r\n     * @return {!Path} The path from outerPath to innerPath\r\n     */\r\n    Path.relativePath = function (outerPath, innerPath) {\r\n        var outer = outerPath.getFront(), inner = innerPath.getFront();\r\n        if (outer === null) {\r\n            return innerPath;\r\n        }\r\n        else if (outer === inner) {\r\n            return Path.relativePath(outerPath.popFront(), innerPath.popFront());\r\n        }\r\n        else {\r\n            throw new Error('INTERNAL ERROR: innerPath (' +\r\n                innerPath +\r\n                ') is not within ' +\r\n                'outerPath (' +\r\n                outerPath +\r\n                ')');\r\n        }\r\n    };\r\n    /**\r\n     * @param {!Path} left\r\n     * @param {!Path} right\r\n     * @return {number} -1, 0, 1 if left is less, equal, or greater than the right.\r\n     */\r\n    Path.comparePaths = function (left, right) {\r\n        var leftKeys = left.slice();\r\n        var rightKeys = right.slice();\r\n        for (var i = 0; i < leftKeys.length && i < rightKeys.length; i++) {\r\n            var cmp = nameCompare(leftKeys[i], rightKeys[i]);\r\n            if (cmp !== 0)\r\n                return cmp;\r\n        }\r\n        if (leftKeys.length === rightKeys.length)\r\n            return 0;\r\n        return leftKeys.length < rightKeys.length ? -1 : 1;\r\n    };\r\n    /**\r\n     *\r\n     * @param {Path} other\r\n     * @return {boolean} true if paths are the same.\r\n     */\r\n    Path.prototype.equals = function (other) {\r\n        if (this.getLength() !== other.getLength()) {\r\n            return false;\r\n        }\r\n        for (var i = this.pieceNum_, j = other.pieceNum_; i <= this.pieces_.length; i++, j++) {\r\n            if (this.pieces_[i] !== other.pieces_[j]) {\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    };\r\n    /**\r\n     *\r\n     * @param {!Path} other\r\n     * @return {boolean} True if this path is a parent (or the same as) other\r\n     */\r\n    Path.prototype.contains = function (other) {\r\n        var i = this.pieceNum_;\r\n        var j = other.pieceNum_;\r\n        if (this.getLength() > other.getLength()) {\r\n            return false;\r\n        }\r\n        while (i < this.pieces_.length) {\r\n            if (this.pieces_[i] !== other.pieces_[j]) {\r\n                return false;\r\n            }\r\n            ++i;\r\n            ++j;\r\n        }\r\n        return true;\r\n    };\r\n    return Path;\r\n}()); // end Path\r\n/**\r\n * Dynamic (mutable) path used to count path lengths.\r\n *\r\n * This class is used to efficiently check paths for valid\r\n * length (in UTF8 bytes) and depth (used in path validation).\r\n *\r\n * Throws Error exception if path is ever invalid.\r\n *\r\n * The definition of a path always begins with '/'.\r\n */\r\nvar ValidationPath = /** @class */ (function () {\r\n    /**\r\n     * @param {!Path} path Initial Path.\r\n     * @param {string} errorPrefix_ Prefix for any error messages.\r\n     */\r\n    function ValidationPath(path, errorPrefix_) {\r\n        this.errorPrefix_ = errorPrefix_;\r\n        /** @type {!Array<string>} */\r\n        this.parts_ = path.slice();\r\n        /** @type {number} Initialize to number of '/' chars needed in path. */\r\n        this.byteLength_ = Math.max(1, this.parts_.length);\r\n        for (var i = 0; i < this.parts_.length; i++) {\r\n            this.byteLength_ += util.stringLength(this.parts_[i]);\r\n        }\r\n        this.checkValid_();\r\n    }\r\n    Object.defineProperty(ValidationPath, \"MAX_PATH_DEPTH\", {\r\n        /** @const {number} Maximum key depth. */\r\n        get: function () {\r\n            return 32;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ValidationPath, \"MAX_PATH_LENGTH_BYTES\", {\r\n        /** @const {number} Maximum number of (UTF8) bytes in a Firebase path. */\r\n        get: function () {\r\n            return 768;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /** @param {string} child */\r\n    ValidationPath.prototype.push = function (child) {\r\n        // Count the needed '/'\r\n        if (this.parts_.length > 0) {\r\n            this.byteLength_ += 1;\r\n        }\r\n        this.parts_.push(child);\r\n        this.byteLength_ += util.stringLength(child);\r\n        this.checkValid_();\r\n    };\r\n    ValidationPath.prototype.pop = function () {\r\n        var last = this.parts_.pop();\r\n        this.byteLength_ -= util.stringLength(last);\r\n        // Un-count the previous '/'\r\n        if (this.parts_.length > 0) {\r\n            this.byteLength_ -= 1;\r\n        }\r\n    };\r\n    ValidationPath.prototype.checkValid_ = function () {\r\n        if (this.byteLength_ > ValidationPath.MAX_PATH_LENGTH_BYTES) {\r\n            throw new Error(this.errorPrefix_ +\r\n                'has a key path longer than ' +\r\n                ValidationPath.MAX_PATH_LENGTH_BYTES +\r\n                ' bytes (' +\r\n                this.byteLength_ +\r\n                ').');\r\n        }\r\n        if (this.parts_.length > ValidationPath.MAX_PATH_DEPTH) {\r\n            throw new Error(this.errorPrefix_ +\r\n                'path specified exceeds the maximum depth that can be written (' +\r\n                ValidationPath.MAX_PATH_DEPTH +\r\n                ') or object contains a cycle ' +\r\n                this.toErrorString());\r\n        }\r\n    };\r\n    /**\r\n     * String for use in error messages - uses '.' notation for path.\r\n     *\r\n     * @return {string}\r\n     */\r\n    ValidationPath.prototype.toErrorString = function () {\r\n        if (this.parts_.length == 0) {\r\n            return '';\r\n        }\r\n        return \"in property '\" + this.parts_.join('.') + \"'\";\r\n    };\r\n    return ValidationPath;\r\n}());\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nvar PROTOCOL_VERSION = '5';\r\nvar VERSION_PARAM = 'v';\r\nvar TRANSPORT_SESSION_PARAM = 's';\r\nvar REFERER_PARAM = 'r';\r\nvar FORGE_REF = 'f';\r\nvar FORGE_DOMAIN = 'firebaseio.com';\r\nvar LAST_SESSION_PARAM = 'ls';\r\nvar WEBSOCKET = 'websocket';\r\nvar LONG_POLLING = 'long_polling';\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * A class that holds metadata about a Repo object\r\n *\r\n * @constructor\r\n */\r\nvar RepoInfo = /** @class */ (function () {\r\n    /**\r\n     * @param {string} host Hostname portion of the url for the repo\r\n     * @param {boolean} secure Whether or not this repo is accessed over ssl\r\n     * @param {string} namespace The namespace represented by the repo\r\n     * @param {boolean} webSocketOnly Whether to prefer websockets over all other transports (used by Nest).\r\n     * @param {string=} persistenceKey Override the default session persistence storage key\r\n     */\r\n    function RepoInfo(host, secure, namespace, webSocketOnly, persistenceKey) {\r\n        if (persistenceKey === void 0) { persistenceKey = ''; }\r\n        this.secure = secure;\r\n        this.namespace = namespace;\r\n        this.webSocketOnly = webSocketOnly;\r\n        this.persistenceKey = persistenceKey;\r\n        this.host = host.toLowerCase();\r\n        this.domain = this.host.substr(this.host.indexOf('.') + 1);\r\n        this.internalHost = PersistentStorage.get('host:' + host) || this.host;\r\n    }\r\n    RepoInfo.prototype.needsQueryParam = function () {\r\n        return this.host !== this.internalHost || this.isCustomHost();\r\n    };\r\n    RepoInfo.prototype.isCacheableHost = function () {\r\n        return this.internalHost.substr(0, 2) === 's-';\r\n    };\r\n    RepoInfo.prototype.isDemoHost = function () {\r\n        return this.domain === 'firebaseio-demo.com';\r\n    };\r\n    RepoInfo.prototype.isCustomHost = function () {\r\n        return (this.domain !== 'firebaseio.com' && this.domain !== 'firebaseio-demo.com');\r\n    };\r\n    RepoInfo.prototype.updateHost = function (newHost) {\r\n        if (newHost !== this.internalHost) {\r\n            this.internalHost = newHost;\r\n            if (this.isCacheableHost()) {\r\n                PersistentStorage.set('host:' + this.host, this.internalHost);\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * Returns the websocket URL for this repo\r\n     * @param {string} type of connection\r\n     * @param {Object} params list\r\n     * @return {string} The URL for this repo\r\n     */\r\n    RepoInfo.prototype.connectionURL = function (type, params) {\r\n        util.assert(typeof type === 'string', 'typeof type must == string');\r\n        util.assert(typeof params === 'object', 'typeof params must == object');\r\n        var connURL;\r\n        if (type === WEBSOCKET) {\r\n            connURL =\r\n                (this.secure ? 'wss://' : 'ws://') + this.internalHost + '/.ws?';\r\n        }\r\n        else if (type === LONG_POLLING) {\r\n            connURL =\r\n                (this.secure ? 'https://' : 'http://') + this.internalHost + '/.lp?';\r\n        }\r\n        else {\r\n            throw new Error('Unknown connection type: ' + type);\r\n        }\r\n        if (this.needsQueryParam()) {\r\n            params['ns'] = this.namespace;\r\n        }\r\n        var pairs = [];\r\n        util.forEach(params, function (key, value) {\r\n            pairs.push(key + '=' + value);\r\n        });\r\n        return connURL + pairs.join('&');\r\n    };\r\n    /** @return {string} */\r\n    RepoInfo.prototype.toString = function () {\r\n        var str = this.toURLString();\r\n        if (this.persistenceKey) {\r\n            str += '<' + this.persistenceKey + '>';\r\n        }\r\n        return str;\r\n    };\r\n    /** @return {string} */\r\n    RepoInfo.prototype.toURLString = function () {\r\n        return (this.secure ? 'https://' : 'http://') + this.host;\r\n    };\r\n    return RepoInfo;\r\n}());\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * @param {!string} pathString\r\n * @return {string}\r\n */\r\nfunction decodePath(pathString) {\r\n    var pathStringDecoded = '';\r\n    var pieces = pathString.split('/');\r\n    for (var i = 0; i < pieces.length; i++) {\r\n        if (pieces[i].length > 0) {\r\n            var piece = pieces[i];\r\n            try {\r\n                piece = decodeURIComponent(piece.replace(/\\+/g, ' '));\r\n            }\r\n            catch (e) { }\r\n            pathStringDecoded += '/' + piece;\r\n        }\r\n    }\r\n    return pathStringDecoded;\r\n}\r\n/**\r\n * @param {!string} queryString\r\n * @return {!{[key:string]:string}} key value hash\r\n */\r\nfunction decodeQuery(queryString) {\r\n    var results = {};\r\n    if (queryString.startsWith('?')) {\r\n        queryString = queryString.substring(1);\r\n    }\r\n    for (var _i = 0, _a = queryString.split('&'); _i < _a.length; _i++) {\r\n        var segment = _a[_i];\r\n        if (segment.length === 0) {\r\n            continue;\r\n        }\r\n        var kv = segment.split('=');\r\n        if (kv.length === 2) {\r\n            results[decodeURIComponent(kv[0])] = decodeURIComponent(kv[1]);\r\n        }\r\n        else {\r\n            warn(\"Invalid query segment '\" + segment + \"' in query '\" + queryString + \"'\");\r\n        }\r\n    }\r\n    return results;\r\n}\r\n/**\r\n *\r\n * @param {!string} dataURL\r\n * @return {{repoInfo: !RepoInfo, path: !Path}}\r\n */\r\nvar parseRepoInfo = function (dataURL) {\r\n    var parsedUrl = parseURL(dataURL), namespace = parsedUrl.subdomain;\r\n    if (parsedUrl.domain === 'firebase') {\r\n        fatal(parsedUrl.host +\r\n            ' is no longer supported. ' +\r\n            'Please use <YOUR FIREBASE>.firebaseio.com instead');\r\n    }\r\n    // Catch common error of uninitialized namespace value.\r\n    if ((!namespace || namespace == 'undefined') &&\r\n        parsedUrl.domain !== 'localhost') {\r\n        fatal('Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com');\r\n    }\r\n    if (!parsedUrl.secure) {\r\n        warnIfPageIsSecure();\r\n    }\r\n    var webSocketOnly = parsedUrl.scheme === 'ws' || parsedUrl.scheme === 'wss';\r\n    return {\r\n        repoInfo: new RepoInfo(parsedUrl.host, parsedUrl.secure, namespace, webSocketOnly),\r\n        path: new Path(parsedUrl.pathString)\r\n    };\r\n};\r\n/**\r\n *\r\n * @param {!string} dataURL\r\n * @return {{host: string, port: number, domain: string, subdomain: string, secure: boolean, scheme: string, pathString: string}}\r\n */\r\nvar parseURL = function (dataURL) {\r\n    // Default to empty strings in the event of a malformed string.\r\n    var host = '', domain = '', subdomain = '', pathString = '';\r\n    // Always default to SSL, unless otherwise specified.\r\n    var secure = true, scheme = 'https', port = 443;\r\n    // Don't do any validation here. The caller is responsible for validating the result of parsing.\r\n    if (typeof dataURL === 'string') {\r\n        // Parse scheme.\r\n        var colonInd = dataURL.indexOf('//');\r\n        if (colonInd >= 0) {\r\n            scheme = dataURL.substring(0, colonInd - 1);\r\n            dataURL = dataURL.substring(colonInd + 2);\r\n        }\r\n        // Parse host, path, and query string.\r\n        var slashInd = dataURL.indexOf('/');\r\n        if (slashInd === -1) {\r\n            slashInd = dataURL.length;\r\n        }\r\n        var questionMarkInd = dataURL.indexOf('?');\r\n        if (questionMarkInd === -1) {\r\n            questionMarkInd = dataURL.length;\r\n        }\r\n        host = dataURL.substring(0, Math.min(slashInd, questionMarkInd));\r\n        if (slashInd < questionMarkInd) {\r\n            // For pathString, questionMarkInd will always come after slashInd\r\n            pathString = decodePath(dataURL.substring(slashInd, questionMarkInd));\r\n        }\r\n        var queryParams = decodeQuery(dataURL.substring(Math.min(dataURL.length, questionMarkInd)));\r\n        // If we have a port, use scheme for determining if it's secure.\r\n        colonInd = host.indexOf(':');\r\n        if (colonInd >= 0) {\r\n            secure = scheme === 'https' || scheme === 'wss';\r\n            port = parseInt(host.substring(colonInd + 1), 10);\r\n        }\r\n        else {\r\n            colonInd = dataURL.length;\r\n        }\r\n        var parts = host.split('.');\r\n        if (parts.length === 3) {\r\n            // Normalize namespaces to lowercase to share storage / connection.\r\n            domain = parts[1];\r\n            subdomain = parts[0].toLowerCase();\r\n        }\r\n        else if (parts.length === 2) {\r\n            domain = parts[0];\r\n        }\r\n        else if (parts[0].slice(0, colonInd).toLowerCase() === 'localhost') {\r\n            domain = 'localhost';\r\n        }\r\n        // Support `ns` query param if subdomain not already set\r\n        if (subdomain === '' && 'ns' in queryParams) {\r\n            subdomain = queryParams['ns'];\r\n        }\r\n    }\r\n    return {\r\n        host: host,\r\n        port: port,\r\n        domain: domain,\r\n        subdomain: subdomain,\r\n        secure: secure,\r\n        scheme: scheme,\r\n        pathString: pathString\r\n    };\r\n};\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * True for invalid Firebase keys\r\n * @type {RegExp}\r\n * @private\r\n */\r\nvar INVALID_KEY_REGEX_ = /[\\[\\].#$\\/\\u0000-\\u001F\\u007F]/;\r\n/**\r\n * True for invalid Firebase paths.\r\n * Allows '/' in paths.\r\n * @type {RegExp}\r\n * @private\r\n */\r\nvar INVALID_PATH_REGEX_ = /[\\[\\].#$\\u0000-\\u001F\\u007F]/;\r\n/**\r\n * Maximum number of characters to allow in leaf value\r\n * @type {number}\r\n * @private\r\n */\r\nvar MAX_LEAF_SIZE_ = 10 * 1024 * 1024;\r\n/**\r\n * @param {*} key\r\n * @return {boolean}\r\n */\r\nvar isValidKey = function (key) {\r\n    return (typeof key === 'string' && key.length !== 0 && !INVALID_KEY_REGEX_.test(key));\r\n};\r\n/**\r\n * @param {string} pathString\r\n * @return {boolean}\r\n */\r\nvar isValidPathString = function (pathString) {\r\n    return (typeof pathString === 'string' &&\r\n        pathString.length !== 0 &&\r\n        !INVALID_PATH_REGEX_.test(pathString));\r\n};\r\n/**\r\n * @param {string} pathString\r\n * @return {boolean}\r\n */\r\nvar isValidRootPathString = function (pathString) {\r\n    if (pathString) {\r\n        // Allow '/.info/' at the beginning.\r\n        pathString = pathString.replace(/^\\/*\\.info(\\/|$)/, '/');\r\n    }\r\n    return isValidPathString(pathString);\r\n};\r\n/**\r\n * @param {*} priority\r\n * @return {boolean}\r\n */\r\nvar isValidPriority = function (priority) {\r\n    return (priority === null ||\r\n        typeof priority === 'string' ||\r\n        (typeof priority === 'number' && !isInvalidJSONNumber(priority)) ||\r\n        (priority && typeof priority === 'object' && util.contains(priority, '.sv')));\r\n};\r\n/**\r\n * Pre-validate a datum passed as an argument to Firebase function.\r\n *\r\n * @param {string} fnName\r\n * @param {number} argumentNumber\r\n * @param {*} data\r\n * @param {!Path} path\r\n * @param {boolean} optional\r\n */\r\nvar validateFirebaseDataArg = function (fnName, argumentNumber, data, path, optional) {\r\n    if (optional && data === undefined)\r\n        return;\r\n    validateFirebaseData(util.errorPrefix(fnName, argumentNumber, optional), data, path);\r\n};\r\n/**\r\n * Validate a data object client-side before sending to server.\r\n *\r\n * @param {string} errorPrefix\r\n * @param {*} data\r\n * @param {!Path|!ValidationPath} path_\r\n */\r\nvar validateFirebaseData = function (errorPrefix, data, path_) {\r\n    var path = path_ instanceof Path ? new ValidationPath(path_, errorPrefix) : path_;\r\n    if (data === undefined) {\r\n        throw new Error(errorPrefix + 'contains undefined ' + path.toErrorString());\r\n    }\r\n    if (typeof data === 'function') {\r\n        throw new Error(errorPrefix +\r\n            'contains a function ' +\r\n            path.toErrorString() +\r\n            ' with contents = ' +\r\n            data.toString());\r\n    }\r\n    if (isInvalidJSONNumber(data)) {\r\n        throw new Error(errorPrefix + 'contains ' + data.toString() + ' ' + path.toErrorString());\r\n    }\r\n    // Check max leaf size, but try to avoid the utf8 conversion if we can.\r\n    if (typeof data === 'string' &&\r\n        data.length > MAX_LEAF_SIZE_ / 3 &&\r\n        util.stringLength(data) > MAX_LEAF_SIZE_) {\r\n        throw new Error(errorPrefix +\r\n            'contains a string greater than ' +\r\n            MAX_LEAF_SIZE_ +\r\n            ' utf8 bytes ' +\r\n            path.toErrorString() +\r\n            \" ('\" +\r\n            data.substring(0, 50) +\r\n            \"...')\");\r\n    }\r\n    // TODO = Perf = Consider combining the recursive validation of keys into NodeFromJSON\r\n    // to save extra walking of large objects.\r\n    if (data && typeof data === 'object') {\r\n        var hasDotValue_1 = false, hasActualChild_1 = false;\r\n        util.forEach(data, function (key, value) {\r\n            if (key === '.value') {\r\n                hasDotValue_1 = true;\r\n            }\r\n            else if (key !== '.priority' && key !== '.sv') {\r\n                hasActualChild_1 = true;\r\n                if (!isValidKey(key)) {\r\n                    throw new Error(errorPrefix +\r\n                        ' contains an invalid key (' +\r\n                        key +\r\n                        ') ' +\r\n                        path.toErrorString() +\r\n                        '.  Keys must be non-empty strings ' +\r\n                        'and can\\'t contain \".\", \"#\", \"$\", \"/\", \"[\", or \"]\"');\r\n                }\r\n            }\r\n            path.push(key);\r\n            validateFirebaseData(errorPrefix, value, path);\r\n            path.pop();\r\n        });\r\n        if (hasDotValue_1 && hasActualChild_1) {\r\n            throw new Error(errorPrefix +\r\n                ' contains \".value\" child ' +\r\n                path.toErrorString() +\r\n                ' in addition to actual children.');\r\n        }\r\n    }\r\n};\r\n/**\r\n * Pre-validate paths passed in the firebase function.\r\n *\r\n * @param {string} errorPrefix\r\n * @param {Array<!Path>} mergePaths\r\n */\r\nvar validateFirebaseMergePaths = function (errorPrefix, mergePaths) {\r\n    var i, curPath;\r\n    for (i = 0; i < mergePaths.length; i++) {\r\n        curPath = mergePaths[i];\r\n        var keys = curPath.slice();\r\n        for (var j = 0; j < keys.length; j++) {\r\n            if (keys[j] === '.priority' && j === keys.length - 1) {\r\n                // .priority is OK\r\n            }\r\n            else if (!isValidKey(keys[j])) {\r\n                throw new Error(errorPrefix +\r\n                    'contains an invalid key (' +\r\n                    keys[j] +\r\n                    ') in path ' +\r\n                    curPath.toString() +\r\n                    '. Keys must be non-empty strings ' +\r\n                    'and can\\'t contain \".\", \"#\", \"$\", \"/\", \"[\", or \"]\"');\r\n            }\r\n        }\r\n    }\r\n    // Check that update keys are not descendants of each other.\r\n    // We rely on the property that sorting guarantees that ancestors come\r\n    // right before descendants.\r\n    mergePaths.sort(Path.comparePaths);\r\n    var prevPath = null;\r\n    for (i = 0; i < mergePaths.length; i++) {\r\n        curPath = mergePaths[i];\r\n        if (prevPath !== null && prevPath.contains(curPath)) {\r\n            throw new Error(errorPrefix +\r\n                'contains a path ' +\r\n                prevPath.toString() +\r\n                ' that is ancestor of another path ' +\r\n                curPath.toString());\r\n        }\r\n        prevPath = curPath;\r\n    }\r\n};\r\n/**\r\n * pre-validate an object passed as an argument to firebase function (\r\n * must be an object - e.g. for firebase.update()).\r\n *\r\n * @param {string} fnName\r\n * @param {number} argumentNumber\r\n * @param {*} data\r\n * @param {!Path} path\r\n * @param {boolean} optional\r\n */\r\nvar validateFirebaseMergeDataArg = function (fnName, argumentNumber, data, path, optional) {\r\n    if (optional && data === undefined)\r\n        return;\r\n    var errorPrefix = util.errorPrefix(fnName, argumentNumber, optional);\r\n    if (!(data && typeof data === 'object') || Array.isArray(data)) {\r\n        throw new Error(errorPrefix + ' must be an object containing the children to replace.');\r\n    }\r\n    var mergePaths = [];\r\n    util.forEach(data, function (key, value) {\r\n        var curPath = new Path(key);\r\n        validateFirebaseData(errorPrefix, value, path.child(curPath));\r\n        if (curPath.getBack() === '.priority') {\r\n            if (!isValidPriority(value)) {\r\n                throw new Error(errorPrefix +\r\n                    \"contains an invalid value for '\" +\r\n                    curPath.toString() +\r\n                    \"', which must be a valid \" +\r\n                    'Firebase priority (a string, finite number, server value, or null).');\r\n            }\r\n        }\r\n        mergePaths.push(curPath);\r\n    });\r\n    validateFirebaseMergePaths(errorPrefix, mergePaths);\r\n};\r\nvar validatePriority = function (fnName, argumentNumber, priority, optional) {\r\n    if (optional && priority === undefined)\r\n        return;\r\n    if (isInvalidJSONNumber(priority))\r\n        throw new Error(util.errorPrefix(fnName, argumentNumber, optional) +\r\n            'is ' +\r\n            priority.toString() +\r\n            ', but must be a valid Firebase priority (a string, finite number, ' +\r\n            'server value, or null).');\r\n    // Special case to allow importing data with a .sv.\r\n    if (!isValidPriority(priority))\r\n        throw new Error(util.errorPrefix(fnName, argumentNumber, optional) +\r\n            'must be a valid Firebase priority ' +\r\n            '(a string, finite number, server value, or null).');\r\n};\r\nvar validateEventType = function (fnName, argumentNumber, eventType, optional) {\r\n    if (optional && eventType === undefined)\r\n        return;\r\n    switch (eventType) {\r\n        case 'value':\r\n        case 'child_added':\r\n        case 'child_removed':\r\n        case 'child_changed':\r\n        case 'child_moved':\r\n            break;\r\n        default:\r\n            throw new Error(util.errorPrefix(fnName, argumentNumber, optional) +\r\n                'must be a valid event type = \"value\", \"child_added\", \"child_removed\", ' +\r\n                '\"child_changed\", or \"child_moved\".');\r\n    }\r\n};\r\nvar validateKey = function (fnName, argumentNumber, key, optional) {\r\n    if (optional && key === undefined)\r\n        return;\r\n    if (!isValidKey(key))\r\n        throw new Error(util.errorPrefix(fnName, argumentNumber, optional) +\r\n            'was an invalid key = \"' +\r\n            key +\r\n            '\".  Firebase keys must be non-empty strings and ' +\r\n            'can\\'t contain \".\", \"#\", \"$\", \"/\", \"[\", or \"]\").');\r\n};\r\nvar validatePathString = function (fnName, argumentNumber, pathString, optional) {\r\n    if (optional && pathString === undefined)\r\n        return;\r\n    if (!isValidPathString(pathString))\r\n        throw new Error(util.errorPrefix(fnName, argumentNumber, optional) +\r\n            'was an invalid path = \"' +\r\n            pathString +\r\n            '\". Paths must be non-empty strings and ' +\r\n            'can\\'t contain \".\", \"#\", \"$\", \"[\", or \"]\"');\r\n};\r\nvar validateRootPathString = function (fnName, argumentNumber, pathString, optional) {\r\n    if (pathString) {\r\n        // Allow '/.info/' at the beginning.\r\n        pathString = pathString.replace(/^\\/*\\.info(\\/|$)/, '/');\r\n    }\r\n    validatePathString(fnName, argumentNumber, pathString, optional);\r\n};\r\nvar validateWritablePath = function (fnName, path) {\r\n    if (path.getFront() === '.info') {\r\n        throw new Error(fnName + \" failed = Can't modify data under /.info/\");\r\n    }\r\n};\r\nvar validateUrl = function (fnName, argumentNumber, parsedUrl) {\r\n    // TODO = Validate server better.\r\n    var pathString = parsedUrl.path.toString();\r\n    if (!(typeof parsedUrl.repoInfo.host === 'string') ||\r\n        parsedUrl.repoInfo.host.length === 0 ||\r\n        (!isValidKey(parsedUrl.repoInfo.namespace) &&\r\n            parsedUrl.repoInfo.host.split(':')[0] !== 'localhost') ||\r\n        (pathString.length !== 0 && !isValidRootPathString(pathString))) {\r\n        throw new Error(util.errorPrefix(fnName, argumentNumber, false) +\r\n            'must be a valid firebase URL and ' +\r\n            'the path can\\'t contain \".\", \"#\", \"$\", \"[\", or \"]\".');\r\n    }\r\n};\r\nvar validateBoolean = function (fnName, argumentNumber, bool, optional) {\r\n    if (optional && bool === undefined)\r\n        return;\r\n    if (typeof bool !== 'boolean')\r\n        throw new Error(util.errorPrefix(fnName, argumentNumber, optional) + 'must be a boolean.');\r\n};\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * @constructor\r\n */\r\nvar OnDisconnect = /** @class */ (function () {\r\n    /**\r\n     * @param {!Repo} repo_\r\n     * @param {!Path} path_\r\n     */\r\n    function OnDisconnect(repo_, path_) {\r\n        this.repo_ = repo_;\r\n        this.path_ = path_;\r\n    }\r\n    /**\r\n     * @param {function(?Error)=} onComplete\r\n     * @return {!firebase.Promise}\r\n     */\r\n    OnDisconnect.prototype.cancel = function (onComplete) {\r\n        util.validateArgCount('OnDisconnect.cancel', 0, 1, arguments.length);\r\n        util.validateCallback('OnDisconnect.cancel', 1, onComplete, true);\r\n        var deferred = new util.Deferred();\r\n        this.repo_.onDisconnectCancel(this.path_, deferred.wrapCallback(onComplete));\r\n        return deferred.promise;\r\n    };\r\n    /**\r\n     * @param {function(?Error)=} onComplete\r\n     * @return {!firebase.Promise}\r\n     */\r\n    OnDisconnect.prototype.remove = function (onComplete) {\r\n        util.validateArgCount('OnDisconnect.remove', 0, 1, arguments.length);\r\n        validateWritablePath('OnDisconnect.remove', this.path_);\r\n        util.validateCallback('OnDisconnect.remove', 1, onComplete, true);\r\n        var deferred = new util.Deferred();\r\n        this.repo_.onDisconnectSet(this.path_, null, deferred.wrapCallback(onComplete));\r\n        return deferred.promise;\r\n    };\r\n    /**\r\n     * @param {*} value\r\n     * @param {function(?Error)=} onComplete\r\n     * @return {!firebase.Promise}\r\n     */\r\n    OnDisconnect.prototype.set = function (value, onComplete) {\r\n        util.validateArgCount('OnDisconnect.set', 1, 2, arguments.length);\r\n        validateWritablePath('OnDisconnect.set', this.path_);\r\n        validateFirebaseDataArg('OnDisconnect.set', 1, value, this.path_, false);\r\n        util.validateCallback('OnDisconnect.set', 2, onComplete, true);\r\n        var deferred = new util.Deferred();\r\n        this.repo_.onDisconnectSet(this.path_, value, deferred.wrapCallback(onComplete));\r\n        return deferred.promise;\r\n    };\r\n    /**\r\n     * @param {*} value\r\n     * @param {number|string|null} priority\r\n     * @param {function(?Error)=} onComplete\r\n     * @return {!firebase.Promise}\r\n     */\r\n    OnDisconnect.prototype.setWithPriority = function (value, priority, onComplete) {\r\n        util.validateArgCount('OnDisconnect.setWithPriority', 2, 3, arguments.length);\r\n        validateWritablePath('OnDisconnect.setWithPriority', this.path_);\r\n        validateFirebaseDataArg('OnDisconnect.setWithPriority', 1, value, this.path_, false);\r\n        validatePriority('OnDisconnect.setWithPriority', 2, priority, false);\r\n        util.validateCallback('OnDisconnect.setWithPriority', 3, onComplete, true);\r\n        var deferred = new util.Deferred();\r\n        this.repo_.onDisconnectSetWithPriority(this.path_, value, priority, deferred.wrapCallback(onComplete));\r\n        return deferred.promise;\r\n    };\r\n    /**\r\n     * @param {!Object} objectToMerge\r\n     * @param {function(?Error)=} onComplete\r\n     * @return {!firebase.Promise}\r\n     */\r\n    OnDisconnect.prototype.update = function (objectToMerge, onComplete) {\r\n        util.validateArgCount('OnDisconnect.update', 1, 2, arguments.length);\r\n        validateWritablePath('OnDisconnect.update', this.path_);\r\n        if (Array.isArray(objectToMerge)) {\r\n            var newObjectToMerge = {};\r\n            for (var i = 0; i < objectToMerge.length; ++i) {\r\n                newObjectToMerge['' + i] = objectToMerge[i];\r\n            }\r\n            objectToMerge = newObjectToMerge;\r\n            warn('Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the ' +\r\n                'existing data, or an Object with integer keys if you really do want to only update some of the children.');\r\n        }\r\n        validateFirebaseMergeDataArg('OnDisconnect.update', 1, objectToMerge, this.path_, false);\r\n        util.validateCallback('OnDisconnect.update', 2, onComplete, true);\r\n        var deferred = new util.Deferred();\r\n        this.repo_.onDisconnectUpdate(this.path_, objectToMerge, deferred.wrapCallback(onComplete));\r\n        return deferred.promise;\r\n    };\r\n    return OnDisconnect;\r\n}());\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nvar TransactionResult = /** @class */ (function () {\r\n    /**\r\n     * A type for the resolve value of Firebase.transaction.\r\n     * @constructor\r\n     * @dict\r\n     * @param {boolean} committed\r\n     * @param {DataSnapshot} snapshot\r\n     */\r\n    function TransactionResult(committed, snapshot) {\r\n        this.committed = committed;\r\n        this.snapshot = snapshot;\r\n    }\r\n    // Do not create public documentation. This is intended to make JSON serialization work but is otherwise unnecessary\r\n    // for end-users\r\n    TransactionResult.prototype.toJSON = function () {\r\n        util.validateArgCount('TransactionResult.toJSON', 0, 1, arguments.length);\r\n        return { committed: this.committed, snapshot: this.snapshot.toJSON() };\r\n    };\r\n    return TransactionResult;\r\n}());\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Fancy ID generator that creates 20-character string identifiers with the\r\n * following properties:\r\n *\r\n * 1. They're based on timestamp so that they sort *after* any existing ids.\r\n * 2. They contain 72-bits of random data after the timestamp so that IDs won't\r\n *    collide with other clients' IDs.\r\n * 3. They sort *lexicographically* (so the timestamp is converted to characters\r\n *    that will sort properly).\r\n * 4. They're monotonically increasing. Even if you generate more than one in\r\n *    the same timestamp, the latter ones will sort after the former ones. We do\r\n *    this by using the previous random bits but \"incrementing\" them by 1 (only\r\n *    in the case of a timestamp collision).\r\n */\r\nvar nextPushId = (function () {\r\n    // Modeled after base64 web-safe chars, but ordered by ASCII.\r\n    var PUSH_CHARS = '-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz';\r\n    // Timestamp of last push, used to prevent local collisions if you push twice\r\n    // in one ms.\r\n    var lastPushTime = 0;\r\n    // We generate 72-bits of randomness which get turned into 12 characters and\r\n    // appended to the timestamp to prevent collisions with other clients. We\r\n    // store the last characters we generated because in the event of a collision,\r\n    // we'll use those same characters except \"incremented\" by one.\r\n    var lastRandChars = [];\r\n    return function (now) {\r\n        var duplicateTime = now === lastPushTime;\r\n        lastPushTime = now;\r\n        var i;\r\n        var timeStampChars = new Array(8);\r\n        for (i = 7; i >= 0; i--) {\r\n            timeStampChars[i] = PUSH_CHARS.charAt(now % 64);\r\n            // NOTE: Can't use << here because javascript will convert to int and lose\r\n            // the upper bits.\r\n            now = Math.floor(now / 64);\r\n        }\r\n        util.assert(now === 0, 'Cannot push at time == 0');\r\n        var id = timeStampChars.join('');\r\n        if (!duplicateTime) {\r\n            for (i = 0; i < 12; i++) {\r\n                lastRandChars[i] = Math.floor(Math.random() * 64);\r\n            }\r\n        }\r\n        else {\r\n            // If the timestamp hasn't changed since last push, use the same random\r\n            // number, except incremented by 1.\r\n            for (i = 11; i >= 0 && lastRandChars[i] === 63; i--) {\r\n                lastRandChars[i] = 0;\r\n            }\r\n            lastRandChars[i]++;\r\n        }\r\n        for (i = 0; i < 12; i++) {\r\n            id += PUSH_CHARS.charAt(lastRandChars[i]);\r\n        }\r\n        util.assert(id.length === 20, 'nextPushId: Length should be 20.');\r\n        return id;\r\n    };\r\n})();\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n *\r\n * @param {!string} name\r\n * @param {!Node} node\r\n * @constructor\r\n * @struct\r\n */\r\nvar NamedNode = /** @class */ (function () {\r\n    function NamedNode(name, node) {\r\n        this.name = name;\r\n        this.node = node;\r\n    }\r\n    /**\r\n     *\r\n     * @param {!string} name\r\n     * @param {!Node} node\r\n     * @return {NamedNode}\r\n     */\r\n    NamedNode.Wrap = function (name, node) {\r\n        return new NamedNode(name, node);\r\n    };\r\n    return NamedNode;\r\n}());\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n *\r\n * @constructor\r\n */\r\nvar Index = /** @class */ (function () {\r\n    function Index() {\r\n    }\r\n    /**\r\n     * @return {function(!NamedNode, !NamedNode):number} A standalone comparison function for\r\n     * this index\r\n     */\r\n    Index.prototype.getCompare = function () {\r\n        return this.compare.bind(this);\r\n    };\r\n    /**\r\n     * Given a before and after value for a node, determine if the indexed value has changed. Even if they are different,\r\n     * it's possible that the changes are isolated to parts of the snapshot that are not indexed.\r\n     *\r\n     * @param {!Node} oldNode\r\n     * @param {!Node} newNode\r\n     * @return {boolean} True if the portion of the snapshot being indexed changed between oldNode and newNode\r\n     */\r\n    Index.prototype.indexedValueChanged = function (oldNode, newNode) {\r\n        var oldWrapped = new NamedNode(MIN_NAME, oldNode);\r\n        var newWrapped = new NamedNode(MIN_NAME, newNode);\r\n        return this.compare(oldWrapped, newWrapped) !== 0;\r\n    };\r\n    /**\r\n     * @return {!NamedNode} a node wrapper that will sort equal to or less than\r\n     * any other node wrapper, using this index\r\n     */\r\n    Index.prototype.minPost = function () {\r\n        return NamedNode.MIN;\r\n    };\r\n    return Index;\r\n}());\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nvar __EMPTY_NODE;\r\nvar KeyIndex = /** @class */ (function (_super) {\r\n    tslib_1.__extends(KeyIndex, _super);\r\n    function KeyIndex() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    Object.defineProperty(KeyIndex, \"__EMPTY_NODE\", {\r\n        get: function () {\r\n            return __EMPTY_NODE;\r\n        },\r\n        set: function (val) {\r\n            __EMPTY_NODE = val;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    KeyIndex.prototype.compare = function (a, b) {\r\n        return nameCompare(a.name, b.name);\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    KeyIndex.prototype.isDefinedOn = function (node) {\r\n        // We could probably return true here (since every node has a key), but it's never called\r\n        // so just leaving unimplemented for now.\r\n        throw util.assertionError('KeyIndex.isDefinedOn not expected to be called.');\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    KeyIndex.prototype.indexedValueChanged = function (oldNode, newNode) {\r\n        return false; // The key for a node never changes.\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    KeyIndex.prototype.minPost = function () {\r\n        return NamedNode.MIN;\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    KeyIndex.prototype.maxPost = function () {\r\n        // TODO: This should really be created once and cached in a static property, but\r\n        // NamedNode isn't defined yet, so I can't use it in a static.  Bleh.\r\n        return new NamedNode(MAX_NAME, __EMPTY_NODE);\r\n    };\r\n    /**\r\n     * @param {*} indexValue\r\n     * @param {string} name\r\n     * @return {!NamedNode}\r\n     */\r\n    KeyIndex.prototype.makePost = function (indexValue, name) {\r\n        util.assert(typeof indexValue === 'string', 'KeyIndex indexValue must always be a string.');\r\n        // We just use empty node, but it'll never be compared, since our comparator only looks at name.\r\n        return new NamedNode(indexValue, __EMPTY_NODE);\r\n    };\r\n    /**\r\n     * @return {!string} String representation for inclusion in a query spec\r\n     */\r\n    KeyIndex.prototype.toString = function () {\r\n        return '.key';\r\n    };\r\n    return KeyIndex;\r\n}(Index));\r\nvar KEY_INDEX = new KeyIndex();\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nvar MAX_NODE;\r\nfunction setMaxNode(val) {\r\n    MAX_NODE = val;\r\n}\r\n/**\r\n * @param {(!string|!number)} priority\r\n * @return {!string}\r\n */\r\nvar priorityHashText = function (priority) {\r\n    if (typeof priority === 'number')\r\n        return 'number:' + doubleToIEEE754String(priority);\r\n    else\r\n        return 'string:' + priority;\r\n};\r\n/**\r\n * Validates that a priority snapshot Node is valid.\r\n *\r\n * @param {!Node} priorityNode\r\n */\r\nvar validatePriorityNode = function (priorityNode) {\r\n    if (priorityNode.isLeafNode()) {\r\n        var val = priorityNode.val();\r\n        util.assert(typeof val === 'string' ||\r\n            typeof val === 'number' ||\r\n            (typeof val === 'object' && util.contains(val, '.sv')), 'Priority must be a string or number.');\r\n    }\r\n    else {\r\n        util.assert(priorityNode === MAX_NODE || priorityNode.isEmpty(), 'priority of unexpected type.');\r\n    }\r\n    // Don't call getPriority() on MAX_NODE to avoid hitting assertion.\r\n    util.assert(priorityNode === MAX_NODE || priorityNode.getPriority().isEmpty(), \"Priority nodes can't have a priority of their own.\");\r\n};\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nvar __childrenNodeConstructor;\r\n/**\r\n * LeafNode is a class for storing leaf nodes in a DataSnapshot.  It\r\n * implements Node and stores the value of the node (a string,\r\n * number, or boolean) accessible via getValue().\r\n */\r\nvar LeafNode = /** @class */ (function () {\r\n    /**\r\n     * @implements {Node}\r\n     * @param {!(string|number|boolean|Object)} value_ The value to store in this leaf node.\r\n     *                                         The object type is possible in the event of a deferred value\r\n     * @param {!Node=} priorityNode_ The priority of this node.\r\n     */\r\n    function LeafNode(value_, priorityNode_) {\r\n        if (priorityNode_ === void 0) { priorityNode_ = LeafNode.__childrenNodeConstructor.EMPTY_NODE; }\r\n        this.value_ = value_;\r\n        this.priorityNode_ = priorityNode_;\r\n        this.lazyHash_ = null;\r\n        util.assert(this.value_ !== undefined && this.value_ !== null, \"LeafNode shouldn't be created with null/undefined value.\");\r\n        validatePriorityNode(this.priorityNode_);\r\n    }\r\n    Object.defineProperty(LeafNode, \"__childrenNodeConstructor\", {\r\n        get: function () {\r\n            return __childrenNodeConstructor;\r\n        },\r\n        set: function (val) {\r\n            __childrenNodeConstructor = val;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /** @inheritDoc */\r\n    LeafNode.prototype.isLeafNode = function () {\r\n        return true;\r\n    };\r\n    /** @inheritDoc */\r\n    LeafNode.prototype.getPriority = function () {\r\n        return this.priorityNode_;\r\n    };\r\n    /** @inheritDoc */\r\n    LeafNode.prototype.updatePriority = function (newPriorityNode) {\r\n        return new LeafNode(this.value_, newPriorityNode);\r\n    };\r\n    /** @inheritDoc */\r\n    LeafNode.prototype.getImmediateChild = function (childName) {\r\n        // Hack to treat priority as a regular child\r\n        if (childName === '.priority') {\r\n            return this.priorityNode_;\r\n        }\r\n        else {\r\n            return LeafNode.__childrenNodeConstructor.EMPTY_NODE;\r\n        }\r\n    };\r\n    /** @inheritDoc */\r\n    LeafNode.prototype.getChild = function (path) {\r\n        if (path.isEmpty()) {\r\n            return this;\r\n        }\r\n        else if (path.getFront() === '.priority') {\r\n            return this.priorityNode_;\r\n        }\r\n        else {\r\n            return LeafNode.__childrenNodeConstructor.EMPTY_NODE;\r\n        }\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    LeafNode.prototype.hasChild = function () {\r\n        return false;\r\n    };\r\n    /** @inheritDoc */\r\n    LeafNode.prototype.getPredecessorChildName = function (childName, childNode) {\r\n        return null;\r\n    };\r\n    /** @inheritDoc */\r\n    LeafNode.prototype.updateImmediateChild = function (childName, newChildNode) {\r\n        if (childName === '.priority') {\r\n            return this.updatePriority(newChildNode);\r\n        }\r\n        else if (newChildNode.isEmpty() && childName !== '.priority') {\r\n            return this;\r\n        }\r\n        else {\r\n            return LeafNode.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(childName, newChildNode).updatePriority(this.priorityNode_);\r\n        }\r\n    };\r\n    /** @inheritDoc */\r\n    LeafNode.prototype.updateChild = function (path, newChildNode) {\r\n        var front = path.getFront();\r\n        if (front === null) {\r\n            return newChildNode;\r\n        }\r\n        else if (newChildNode.isEmpty() && front !== '.priority') {\r\n            return this;\r\n        }\r\n        else {\r\n            util.assert(front !== '.priority' || path.getLength() === 1, '.priority must be the last token in a path');\r\n            return this.updateImmediateChild(front, LeafNode.__childrenNodeConstructor.EMPTY_NODE.updateChild(path.popFront(), newChildNode));\r\n        }\r\n    };\r\n    /** @inheritDoc */\r\n    LeafNode.prototype.isEmpty = function () {\r\n        return false;\r\n    };\r\n    /** @inheritDoc */\r\n    LeafNode.prototype.numChildren = function () {\r\n        return 0;\r\n    };\r\n    /** @inheritDoc */\r\n    LeafNode.prototype.forEachChild = function (index, action) {\r\n        return false;\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    LeafNode.prototype.val = function (exportFormat) {\r\n        if (exportFormat && !this.getPriority().isEmpty())\r\n            return {\r\n                '.value': this.getValue(),\r\n                '.priority': this.getPriority().val()\r\n            };\r\n        else\r\n            return this.getValue();\r\n    };\r\n    /** @inheritDoc */\r\n    LeafNode.prototype.hash = function () {\r\n        if (this.lazyHash_ === null) {\r\n            var toHash = '';\r\n            if (!this.priorityNode_.isEmpty())\r\n                toHash +=\r\n                    'priority:' +\r\n                        priorityHashText(this.priorityNode_.val()) +\r\n                        ':';\r\n            var type = typeof this.value_;\r\n            toHash += type + ':';\r\n            if (type === 'number') {\r\n                toHash += doubleToIEEE754String(this.value_);\r\n            }\r\n            else {\r\n                toHash += this.value_;\r\n            }\r\n            this.lazyHash_ = sha1(toHash);\r\n        }\r\n        return this.lazyHash_;\r\n    };\r\n    /**\r\n     * Returns the value of the leaf node.\r\n     * @return {Object|string|number|boolean} The value of the node.\r\n     */\r\n    LeafNode.prototype.getValue = function () {\r\n        return this.value_;\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    LeafNode.prototype.compareTo = function (other) {\r\n        if (other === LeafNode.__childrenNodeConstructor.EMPTY_NODE) {\r\n            return 1;\r\n        }\r\n        else if (other instanceof LeafNode.__childrenNodeConstructor) {\r\n            return -1;\r\n        }\r\n        else {\r\n            util.assert(other.isLeafNode(), 'Unknown node type');\r\n            return this.compareToLeafNode_(other);\r\n        }\r\n    };\r\n    /**\r\n     * Comparison specifically for two leaf nodes\r\n     * @param {!LeafNode} otherLeaf\r\n     * @return {!number}\r\n     * @private\r\n     */\r\n    LeafNode.prototype.compareToLeafNode_ = function (otherLeaf) {\r\n        var otherLeafType = typeof otherLeaf.value_;\r\n        var thisLeafType = typeof this.value_;\r\n        var otherIndex = LeafNode.VALUE_TYPE_ORDER.indexOf(otherLeafType);\r\n        var thisIndex = LeafNode.VALUE_TYPE_ORDER.indexOf(thisLeafType);\r\n        util.assert(otherIndex >= 0, 'Unknown leaf type: ' + otherLeafType);\r\n        util.assert(thisIndex >= 0, 'Unknown leaf type: ' + thisLeafType);\r\n        if (otherIndex === thisIndex) {\r\n            // Same type, compare values\r\n            if (thisLeafType === 'object') {\r\n                // Deferred value nodes are all equal, but we should also never get to this point...\r\n                return 0;\r\n            }\r\n            else {\r\n                // Note that this works because true > false, all others are number or string comparisons\r\n                if (this.value_ < otherLeaf.value_) {\r\n                    return -1;\r\n                }\r\n                else if (this.value_ === otherLeaf.value_) {\r\n                    return 0;\r\n                }\r\n                else {\r\n                    return 1;\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            return thisIndex - otherIndex;\r\n        }\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    LeafNode.prototype.withIndex = function () {\r\n        return this;\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    LeafNode.prototype.isIndexed = function () {\r\n        return true;\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    LeafNode.prototype.equals = function (other) {\r\n        /**\r\n         * @inheritDoc\r\n         */\r\n        if (other === this) {\r\n            return true;\r\n        }\r\n        else if (other.isLeafNode()) {\r\n            var otherLeaf = other;\r\n            return (this.value_ === otherLeaf.value_ &&\r\n                this.priorityNode_.equals(otherLeaf.priorityNode_));\r\n        }\r\n        else {\r\n            return false;\r\n        }\r\n    };\r\n    /**\r\n     * The sort order for comparing leaf nodes of different types. If two leaf nodes have\r\n     * the same type, the comparison falls back to their value\r\n     * @type {Array.<!string>}\r\n     * @const\r\n     */\r\n    LeafNode.VALUE_TYPE_ORDER = ['object', 'boolean', 'number', 'string'];\r\n    return LeafNode;\r\n}());\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nvar nodeFromJSON;\r\nvar MAX_NODE$1;\r\nfunction setNodeFromJSON(val) {\r\n    nodeFromJSON = val;\r\n}\r\nfunction setMaxNode$1(val) {\r\n    MAX_NODE$1 = val;\r\n}\r\n/**\r\n * @constructor\r\n * @extends {Index}\r\n * @private\r\n */\r\nvar PriorityIndex = /** @class */ (function (_super) {\r\n    tslib_1.__extends(PriorityIndex, _super);\r\n    function PriorityIndex() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    PriorityIndex.prototype.compare = function (a, b) {\r\n        var aPriority = a.node.getPriority();\r\n        var bPriority = b.node.getPriority();\r\n        var indexCmp = aPriority.compareTo(bPriority);\r\n        if (indexCmp === 0) {\r\n            return nameCompare(a.name, b.name);\r\n        }\r\n        else {\r\n            return indexCmp;\r\n        }\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    PriorityIndex.prototype.isDefinedOn = function (node) {\r\n        return !node.getPriority().isEmpty();\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    PriorityIndex.prototype.indexedValueChanged = function (oldNode, newNode) {\r\n        return !oldNode.getPriority().equals(newNode.getPriority());\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    PriorityIndex.prototype.minPost = function () {\r\n        return NamedNode.MIN;\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    PriorityIndex.prototype.maxPost = function () {\r\n        return new NamedNode(MAX_NAME, new LeafNode('[PRIORITY-POST]', MAX_NODE$1));\r\n    };\r\n    /**\r\n     * @param {*} indexValue\r\n     * @param {string} name\r\n     * @return {!NamedNode}\r\n     */\r\n    PriorityIndex.prototype.makePost = function (indexValue, name) {\r\n        var priorityNode = nodeFromJSON(indexValue);\r\n        return new NamedNode(name, new LeafNode('[PRIORITY-POST]', priorityNode));\r\n    };\r\n    /**\r\n     * @return {!string} String representation for inclusion in a query spec\r\n     */\r\n    PriorityIndex.prototype.toString = function () {\r\n        return '.priority';\r\n    };\r\n    return PriorityIndex;\r\n}(Index));\r\nvar PRIORITY_INDEX = new PriorityIndex();\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * An iterator over an LLRBNode.\r\n */\r\nvar SortedMapIterator = /** @class */ (function () {\r\n    /**\r\n     * @template K, V, T\r\n     * @param {LLRBNode|LLRBEmptyNode} node Node to iterate.\r\n     * @param {?K} startKey\r\n     * @param {function(K, K): number} comparator\r\n     * @param {boolean} isReverse_ Whether or not to iterate in reverse\r\n     * @param {(function(K, V):T)=} resultGenerator_\r\n     */\r\n    function SortedMapIterator(node, startKey, comparator, isReverse_, resultGenerator_) {\r\n        if (resultGenerator_ === void 0) { resultGenerator_ = null; }\r\n        this.isReverse_ = isReverse_;\r\n        this.resultGenerator_ = resultGenerator_;\r\n        /** @private\r\n         * @type {Array.<!LLRBNode>}\r\n         */\r\n        this.nodeStack_ = [];\r\n        var cmp = 1;\r\n        while (!node.isEmpty()) {\r\n            node = node;\r\n            cmp = startKey ? comparator(node.key, startKey) : 1;\r\n            // flip the comparison if we're going in reverse\r\n            if (isReverse_)\r\n                cmp *= -1;\r\n            if (cmp < 0) {\r\n                // This node is less than our start key. ignore it\r\n                if (this.isReverse_) {\r\n                    node = node.left;\r\n                }\r\n                else {\r\n                    node = node.right;\r\n                }\r\n            }\r\n            else if (cmp === 0) {\r\n                // This node is exactly equal to our start key. Push it on the stack, but stop iterating;\r\n                this.nodeStack_.push(node);\r\n                break;\r\n            }\r\n            else {\r\n                // This node is greater than our start key, add it to the stack and move to the next one\r\n                this.nodeStack_.push(node);\r\n                if (this.isReverse_) {\r\n                    node = node.right;\r\n                }\r\n                else {\r\n                    node = node.left;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    SortedMapIterator.prototype.getNext = function () {\r\n        if (this.nodeStack_.length === 0)\r\n            return null;\r\n        var node = this.nodeStack_.pop();\r\n        var result;\r\n        if (this.resultGenerator_)\r\n            result = this.resultGenerator_(node.key, node.value);\r\n        else\r\n            result = { key: node.key, value: node.value };\r\n        if (this.isReverse_) {\r\n            node = node.left;\r\n            while (!node.isEmpty()) {\r\n                this.nodeStack_.push(node);\r\n                node = node.right;\r\n            }\r\n        }\r\n        else {\r\n            node = node.right;\r\n            while (!node.isEmpty()) {\r\n                this.nodeStack_.push(node);\r\n                node = node.left;\r\n            }\r\n        }\r\n        return result;\r\n    };\r\n    SortedMapIterator.prototype.hasNext = function () {\r\n        return this.nodeStack_.length > 0;\r\n    };\r\n    SortedMapIterator.prototype.peek = function () {\r\n        if (this.nodeStack_.length === 0)\r\n            return null;\r\n        var node = this.nodeStack_[this.nodeStack_.length - 1];\r\n        if (this.resultGenerator_) {\r\n            return this.resultGenerator_(node.key, node.value);\r\n        }\r\n        else {\r\n            return { key: node.key, value: node.value };\r\n        }\r\n    };\r\n    return SortedMapIterator;\r\n}());\r\n/**\r\n * Represents a node in a Left-leaning Red-Black tree.\r\n */\r\nvar LLRBNode = /** @class */ (function () {\r\n    /**\r\n     * @template K, V\r\n     * @param {!K} key Key associated with this node.\r\n     * @param {!V} value Value associated with this node.\r\n     * @param {?boolean} color Whether this node is red.\r\n     * @param {?(LLRBNode|LLRBEmptyNode)=} left Left child.\r\n     * @param {?(LLRBNode|LLRBEmptyNode)=} right Right child.\r\n     */\r\n    function LLRBNode(key, value, color, left, right) {\r\n        this.key = key;\r\n        this.value = value;\r\n        this.color = color != null ? color : LLRBNode.RED;\r\n        this.left =\r\n            left != null ? left : SortedMap.EMPTY_NODE;\r\n        this.right =\r\n            right != null ? right : SortedMap.EMPTY_NODE;\r\n    }\r\n    /**\r\n     * Returns a copy of the current node, optionally replacing pieces of it.\r\n     *\r\n     * @param {?K} key New key for the node, or null.\r\n     * @param {?V} value New value for the node, or null.\r\n     * @param {?boolean} color New color for the node, or null.\r\n     * @param {?LLRBNode|LLRBEmptyNode} left New left child for the node, or null.\r\n     * @param {?LLRBNode|LLRBEmptyNode} right New right child for the node, or null.\r\n     * @return {!LLRBNode} The node copy.\r\n     */\r\n    LLRBNode.prototype.copy = function (key, value, color, left, right) {\r\n        return new LLRBNode(key != null ? key : this.key, value != null ? value : this.value, color != null ? color : this.color, left != null ? left : this.left, right != null ? right : this.right);\r\n    };\r\n    /**\r\n     * @return {number} The total number of nodes in the tree.\r\n     */\r\n    LLRBNode.prototype.count = function () {\r\n        return this.left.count() + 1 + this.right.count();\r\n    };\r\n    /**\r\n     * @return {boolean} True if the tree is empty.\r\n     */\r\n    LLRBNode.prototype.isEmpty = function () {\r\n        return false;\r\n    };\r\n    /**\r\n     * Traverses the tree in key order and calls the specified action function\r\n     * for each node.\r\n     *\r\n     * @param {function(!K, !V):*} action Callback function to be called for each\r\n     *   node.  If it returns true, traversal is aborted.\r\n     * @return {*} The first truthy value returned by action, or the last falsey\r\n     *   value returned by action\r\n     */\r\n    LLRBNode.prototype.inorderTraversal = function (action) {\r\n        return (this.left.inorderTraversal(action) ||\r\n            action(this.key, this.value) ||\r\n            this.right.inorderTraversal(action));\r\n    };\r\n    /**\r\n     * Traverses the tree in reverse key order and calls the specified action function\r\n     * for each node.\r\n     *\r\n     * @param {function(!Object, !Object)} action Callback function to be called for each\r\n     * node.  If it returns true, traversal is aborted.\r\n     * @return {*} True if traversal was aborted.\r\n     */\r\n    LLRBNode.prototype.reverseTraversal = function (action) {\r\n        return (this.right.reverseTraversal(action) ||\r\n            action(this.key, this.value) ||\r\n            this.left.reverseTraversal(action));\r\n    };\r\n    /**\r\n     * @return {!Object} The minimum node in the tree.\r\n     * @private\r\n     */\r\n    LLRBNode.prototype.min_ = function () {\r\n        if (this.left.isEmpty()) {\r\n            return this;\r\n        }\r\n        else {\r\n            return this.left.min_();\r\n        }\r\n    };\r\n    /**\r\n     * @return {!K} The maximum key in the tree.\r\n     */\r\n    LLRBNode.prototype.minKey = function () {\r\n        return this.min_().key;\r\n    };\r\n    /**\r\n     * @return {!K} The maximum key in the tree.\r\n     */\r\n    LLRBNode.prototype.maxKey = function () {\r\n        if (this.right.isEmpty()) {\r\n            return this.key;\r\n        }\r\n        else {\r\n            return this.right.maxKey();\r\n        }\r\n    };\r\n    /**\r\n     *\r\n     * @param {!Object} key Key to insert.\r\n     * @param {!Object} value Value to insert.\r\n     * @param {Comparator} comparator Comparator.\r\n     * @return {!LLRBNode} New tree, with the key/value added.\r\n     */\r\n    LLRBNode.prototype.insert = function (key, value, comparator) {\r\n        var cmp, n;\r\n        n = this;\r\n        cmp = comparator(key, n.key);\r\n        if (cmp < 0) {\r\n            n = n.copy(null, null, null, n.left.insert(key, value, comparator), null);\r\n        }\r\n        else if (cmp === 0) {\r\n            n = n.copy(null, value, null, null, null);\r\n        }\r\n        else {\r\n            n = n.copy(null, null, null, null, n.right.insert(key, value, comparator));\r\n        }\r\n        return n.fixUp_();\r\n    };\r\n    /**\r\n     * @private\r\n     * @return {!LLRBNode|LLRBEmptyNode} New tree, with the minimum key removed.\r\n     */\r\n    LLRBNode.prototype.removeMin_ = function () {\r\n        if (this.left.isEmpty()) {\r\n            return SortedMap.EMPTY_NODE;\r\n        }\r\n        var n = this;\r\n        if (!n.left.isRed_() && !n.left.left.isRed_())\r\n            n = n.moveRedLeft_();\r\n        n = n.copy(null, null, null, n.left.removeMin_(), null);\r\n        return n.fixUp_();\r\n    };\r\n    /**\r\n     * @param {!Object} key The key of the item to remove.\r\n     * @param {Comparator} comparator Comparator.\r\n     * @return {!LLRBNode|LLRBEmptyNode} New tree, with the specified item removed.\r\n     */\r\n    LLRBNode.prototype.remove = function (key, comparator) {\r\n        var n, smallest;\r\n        n = this;\r\n        if (comparator(key, n.key) < 0) {\r\n            if (!n.left.isEmpty() && !n.left.isRed_() && !n.left.left.isRed_()) {\r\n                n = n.moveRedLeft_();\r\n            }\r\n            n = n.copy(null, null, null, n.left.remove(key, comparator), null);\r\n        }\r\n        else {\r\n            if (n.left.isRed_())\r\n                n = n.rotateRight_();\r\n            if (!n.right.isEmpty() && !n.right.isRed_() && !n.right.left.isRed_()) {\r\n                n = n.moveRedRight_();\r\n            }\r\n            if (comparator(key, n.key) === 0) {\r\n                if (n.right.isEmpty()) {\r\n                    return SortedMap.EMPTY_NODE;\r\n                }\r\n                else {\r\n                    smallest = n.right.min_();\r\n                    n = n.copy(smallest.key, smallest.value, null, null, n.right.removeMin_());\r\n                }\r\n            }\r\n            n = n.copy(null, null, null, null, n.right.remove(key, comparator));\r\n        }\r\n        return n.fixUp_();\r\n    };\r\n    /**\r\n     * @private\r\n     * @return {boolean} Whether this is a RED node.\r\n     */\r\n    LLRBNode.prototype.isRed_ = function () {\r\n        return this.color;\r\n    };\r\n    /**\r\n     * @private\r\n     * @return {!LLRBNode} New tree after performing any needed rotations.\r\n     */\r\n    LLRBNode.prototype.fixUp_ = function () {\r\n        var n = this;\r\n        if (n.right.isRed_() && !n.left.isRed_())\r\n            n = n.rotateLeft_();\r\n        if (n.left.isRed_() && n.left.left.isRed_())\r\n            n = n.rotateRight_();\r\n        if (n.left.isRed_() && n.right.isRed_())\r\n            n = n.colorFlip_();\r\n        return n;\r\n    };\r\n    /**\r\n     * @private\r\n     * @return {!LLRBNode} New tree, after moveRedLeft.\r\n     */\r\n    LLRBNode.prototype.moveRedLeft_ = function () {\r\n        var n = this.colorFlip_();\r\n        if (n.right.left.isRed_()) {\r\n            n = n.copy(null, null, null, null, n.right.rotateRight_());\r\n            n = n.rotateLeft_();\r\n            n = n.colorFlip_();\r\n        }\r\n        return n;\r\n    };\r\n    /**\r\n     * @private\r\n     * @return {!LLRBNode} New tree, after moveRedRight.\r\n     */\r\n    LLRBNode.prototype.moveRedRight_ = function () {\r\n        var n = this.colorFlip_();\r\n        if (n.left.left.isRed_()) {\r\n            n = n.rotateRight_();\r\n            n = n.colorFlip_();\r\n        }\r\n        return n;\r\n    };\r\n    /**\r\n     * @private\r\n     * @return {!LLRBNode} New tree, after rotateLeft.\r\n     */\r\n    LLRBNode.prototype.rotateLeft_ = function () {\r\n        var nl = this.copy(null, null, LLRBNode.RED, null, this.right.left);\r\n        return this.right.copy(null, null, this.color, nl, null);\r\n    };\r\n    /**\r\n     * @private\r\n     * @return {!LLRBNode} New tree, after rotateRight.\r\n     */\r\n    LLRBNode.prototype.rotateRight_ = function () {\r\n        var nr = this.copy(null, null, LLRBNode.RED, this.left.right, null);\r\n        return this.left.copy(null, null, this.color, null, nr);\r\n    };\r\n    /**\r\n     * @private\r\n     * @return {!LLRBNode} New tree, after colorFlip.\r\n     */\r\n    LLRBNode.prototype.colorFlip_ = function () {\r\n        var left = this.left.copy(null, null, !this.left.color, null, null);\r\n        var right = this.right.copy(null, null, !this.right.color, null, null);\r\n        return this.copy(null, null, !this.color, left, right);\r\n    };\r\n    /**\r\n     * For testing.\r\n     *\r\n     * @private\r\n     * @return {boolean} True if all is well.\r\n     */\r\n    LLRBNode.prototype.checkMaxDepth_ = function () {\r\n        var blackDepth = this.check_();\r\n        return Math.pow(2.0, blackDepth) <= this.count() + 1;\r\n    };\r\n    /**\r\n     * @private\r\n     * @return {number} Not sure what this returns exactly. :-).\r\n     */\r\n    LLRBNode.prototype.check_ = function () {\r\n        var blackDepth;\r\n        if (this.isRed_() && this.left.isRed_()) {\r\n            throw new Error('Red node has red child(' + this.key + ',' + this.value + ')');\r\n        }\r\n        if (this.right.isRed_()) {\r\n            throw new Error('Right child of (' + this.key + ',' + this.value + ') is red');\r\n        }\r\n        blackDepth = this.left.check_();\r\n        if (blackDepth !== this.right.check_()) {\r\n            throw new Error('Black depths differ');\r\n        }\r\n        else {\r\n            return blackDepth + (this.isRed_() ? 0 : 1);\r\n        }\r\n    };\r\n    LLRBNode.RED = true;\r\n    LLRBNode.BLACK = false;\r\n    return LLRBNode;\r\n}());\r\n/**\r\n * Represents an empty node (a leaf node in the Red-Black Tree).\r\n */\r\nvar LLRBEmptyNode = /** @class */ (function () {\r\n    function LLRBEmptyNode() {\r\n    }\r\n    /**\r\n     * Returns a copy of the current node.\r\n     *\r\n     * @return {!LLRBEmptyNode} The node copy.\r\n     */\r\n    LLRBEmptyNode.prototype.copy = function (key, value, color, left, right) {\r\n        return this;\r\n    };\r\n    /**\r\n     * Returns a copy of the tree, with the specified key/value added.\r\n     *\r\n     * @param {!K} key Key to be added.\r\n     * @param {!V} value Value to be added.\r\n     * @param {Comparator} comparator Comparator.\r\n     * @return {!LLRBNode} New tree, with item added.\r\n     */\r\n    LLRBEmptyNode.prototype.insert = function (key, value, comparator) {\r\n        return new LLRBNode(key, value, null);\r\n    };\r\n    /**\r\n     * Returns a copy of the tree, with the specified key removed.\r\n     *\r\n     * @param {!K} key The key to remove.\r\n     * @param {Comparator} comparator Comparator.\r\n     * @return {!LLRBEmptyNode} New tree, with item removed.\r\n     */\r\n    LLRBEmptyNode.prototype.remove = function (key, comparator) {\r\n        return this;\r\n    };\r\n    /**\r\n     * @return {number} The total number of nodes in the tree.\r\n     */\r\n    LLRBEmptyNode.prototype.count = function () {\r\n        return 0;\r\n    };\r\n    /**\r\n     * @return {boolean} True if the tree is empty.\r\n     */\r\n    LLRBEmptyNode.prototype.isEmpty = function () {\r\n        return true;\r\n    };\r\n    /**\r\n     * Traverses the tree in key order and calls the specified action function\r\n     * for each node.\r\n     *\r\n     * @param {function(!K, !V):*} action Callback function to be called for each\r\n     * node.  If it returns true, traversal is aborted.\r\n     * @return {boolean} True if traversal was aborted.\r\n     */\r\n    LLRBEmptyNode.prototype.inorderTraversal = function (action) {\r\n        return false;\r\n    };\r\n    /**\r\n     * Traverses the tree in reverse key order and calls the specified action function\r\n     * for each node.\r\n     *\r\n     * @param {function(!K, !V)} action Callback function to be called for each\r\n     * node.  If it returns true, traversal is aborted.\r\n     * @return {boolean} True if traversal was aborted.\r\n     */\r\n    LLRBEmptyNode.prototype.reverseTraversal = function (action) {\r\n        return false;\r\n    };\r\n    /**\r\n     * @return {null}\r\n     */\r\n    LLRBEmptyNode.prototype.minKey = function () {\r\n        return null;\r\n    };\r\n    /**\r\n     * @return {null}\r\n     */\r\n    LLRBEmptyNode.prototype.maxKey = function () {\r\n        return null;\r\n    };\r\n    /**\r\n     * @private\r\n     * @return {number} Not sure what this returns exactly. :-).\r\n     */\r\n    LLRBEmptyNode.prototype.check_ = function () {\r\n        return 0;\r\n    };\r\n    /**\r\n     * @private\r\n     * @return {boolean} Whether this node is red.\r\n     */\r\n    LLRBEmptyNode.prototype.isRed_ = function () {\r\n        return false;\r\n    };\r\n    return LLRBEmptyNode;\r\n}());\r\n/**\r\n * An immutable sorted map implementation, based on a Left-leaning Red-Black\r\n * tree.\r\n */\r\nvar SortedMap = /** @class */ (function () {\r\n    /**\r\n     * @template K, V\r\n     * @param {function(K, K):number} comparator_ Key comparator.\r\n     * @param {LLRBNode=} root_ (Optional) Root node for the map.\r\n     */\r\n    function SortedMap(comparator_, root_) {\r\n        if (root_ === void 0) { root_ = SortedMap.EMPTY_NODE; }\r\n        this.comparator_ = comparator_;\r\n        this.root_ = root_;\r\n    }\r\n    /**\r\n     * Returns a copy of the map, with the specified key/value added or replaced.\r\n     * (TODO: We should perhaps rename this method to 'put')\r\n     *\r\n     * @param {!K} key Key to be added.\r\n     * @param {!V} value Value to be added.\r\n     * @return {!SortedMap.<K, V>} New map, with item added.\r\n     */\r\n    SortedMap.prototype.insert = function (key, value) {\r\n        return new SortedMap(this.comparator_, this.root_\r\n            .insert(key, value, this.comparator_)\r\n            .copy(null, null, LLRBNode.BLACK, null, null));\r\n    };\r\n    /**\r\n     * Returns a copy of the map, with the specified key removed.\r\n     *\r\n     * @param {!K} key The key to remove.\r\n     * @return {!SortedMap.<K, V>} New map, with item removed.\r\n     */\r\n    SortedMap.prototype.remove = function (key) {\r\n        return new SortedMap(this.comparator_, this.root_\r\n            .remove(key, this.comparator_)\r\n            .copy(null, null, LLRBNode.BLACK, null, null));\r\n    };\r\n    /**\r\n     * Returns the value of the node with the given key, or null.\r\n     *\r\n     * @param {!K} key The key to look up.\r\n     * @return {?V} The value of the node with the given key, or null if the\r\n     * key doesn't exist.\r\n     */\r\n    SortedMap.prototype.get = function (key) {\r\n        var cmp;\r\n        var node = this.root_;\r\n        while (!node.isEmpty()) {\r\n            cmp = this.comparator_(key, node.key);\r\n            if (cmp === 0) {\r\n                return node.value;\r\n            }\r\n            else if (cmp < 0) {\r\n                node = node.left;\r\n            }\r\n            else if (cmp > 0) {\r\n                node = node.right;\r\n            }\r\n        }\r\n        return null;\r\n    };\r\n    /**\r\n     * Returns the key of the item *before* the specified key, or null if key is the first item.\r\n     * @param {K} key The key to find the predecessor of\r\n     * @return {?K} The predecessor key.\r\n     */\r\n    SortedMap.prototype.getPredecessorKey = function (key) {\r\n        var cmp, node = this.root_, rightParent = null;\r\n        while (!node.isEmpty()) {\r\n            cmp = this.comparator_(key, node.key);\r\n            if (cmp === 0) {\r\n                if (!node.left.isEmpty()) {\r\n                    node = node.left;\r\n                    while (!node.right.isEmpty())\r\n                        node = node.right;\r\n                    return node.key;\r\n                }\r\n                else if (rightParent) {\r\n                    return rightParent.key;\r\n                }\r\n                else {\r\n                    return null; // first item.\r\n                }\r\n            }\r\n            else if (cmp < 0) {\r\n                node = node.left;\r\n            }\r\n            else if (cmp > 0) {\r\n                rightParent = node;\r\n                node = node.right;\r\n            }\r\n        }\r\n        throw new Error('Attempted to find predecessor key for a nonexistent key.  What gives?');\r\n    };\r\n    /**\r\n     * @return {boolean} True if the map is empty.\r\n     */\r\n    SortedMap.prototype.isEmpty = function () {\r\n        return this.root_.isEmpty();\r\n    };\r\n    /**\r\n     * @return {number} The total number of nodes in the map.\r\n     */\r\n    SortedMap.prototype.count = function () {\r\n        return this.root_.count();\r\n    };\r\n    /**\r\n     * @return {?K} The minimum key in the map.\r\n     */\r\n    SortedMap.prototype.minKey = function () {\r\n        return this.root_.minKey();\r\n    };\r\n    /**\r\n     * @return {?K} The maximum key in the map.\r\n     */\r\n    SortedMap.prototype.maxKey = function () {\r\n        return this.root_.maxKey();\r\n    };\r\n    /**\r\n     * Traverses the map in key order and calls the specified action function\r\n     * for each key/value pair.\r\n     *\r\n     * @param {function(!K, !V):*} action Callback function to be called\r\n     * for each key/value pair.  If action returns true, traversal is aborted.\r\n     * @return {*} The first truthy value returned by action, or the last falsey\r\n     *   value returned by action\r\n     */\r\n    SortedMap.prototype.inorderTraversal = function (action) {\r\n        return this.root_.inorderTraversal(action);\r\n    };\r\n    /**\r\n     * Traverses the map in reverse key order and calls the specified action function\r\n     * for each key/value pair.\r\n     *\r\n     * @param {function(!Object, !Object)} action Callback function to be called\r\n     * for each key/value pair.  If action returns true, traversal is aborted.\r\n     * @return {*} True if the traversal was aborted.\r\n     */\r\n    SortedMap.prototype.reverseTraversal = function (action) {\r\n        return this.root_.reverseTraversal(action);\r\n    };\r\n    /**\r\n     * Returns an iterator over the SortedMap.\r\n     * @template T\r\n     * @param {(function(K, V):T)=} resultGenerator\r\n     * @return {SortedMapIterator.<K, V, T>} The iterator.\r\n     */\r\n    SortedMap.prototype.getIterator = function (resultGenerator) {\r\n        return new SortedMapIterator(this.root_, null, this.comparator_, false, resultGenerator);\r\n    };\r\n    SortedMap.prototype.getIteratorFrom = function (key, resultGenerator) {\r\n        return new SortedMapIterator(this.root_, key, this.comparator_, false, resultGenerator);\r\n    };\r\n    SortedMap.prototype.getReverseIteratorFrom = function (key, resultGenerator) {\r\n        return new SortedMapIterator(this.root_, key, this.comparator_, true, resultGenerator);\r\n    };\r\n    SortedMap.prototype.getReverseIterator = function (resultGenerator) {\r\n        return new SortedMapIterator(this.root_, null, this.comparator_, true, resultGenerator);\r\n    };\r\n    /**\r\n     * Always use the same empty node, to reduce memory.\r\n     * @const\r\n     */\r\n    SortedMap.EMPTY_NODE = new LLRBEmptyNode();\r\n    return SortedMap;\r\n}());\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nvar LOG_2 = Math.log(2);\r\n/**\r\n * @constructor\r\n */\r\nvar Base12Num = /** @class */ (function () {\r\n    /**\r\n     * @param {number} length\r\n     */\r\n    function Base12Num(length) {\r\n        var logBase2 = function (num) {\r\n            return parseInt((Math.log(num) / LOG_2), 10);\r\n        };\r\n        var bitMask = function (bits) { return parseInt(Array(bits + 1).join('1'), 2); };\r\n        this.count = logBase2(length + 1);\r\n        this.current_ = this.count - 1;\r\n        var mask = bitMask(this.count);\r\n        this.bits_ = (length + 1) & mask;\r\n    }\r\n    /**\r\n     * @return {boolean}\r\n     */\r\n    Base12Num.prototype.nextBitIsOne = function () {\r\n        //noinspection JSBitwiseOperatorUsage\r\n        var result = !(this.bits_ & (0x1 << this.current_));\r\n        this.current_--;\r\n        return result;\r\n    };\r\n    return Base12Num;\r\n}());\r\n/**\r\n * Takes a list of child nodes and constructs a SortedSet using the given comparison\r\n * function\r\n *\r\n * Uses the algorithm described in the paper linked here:\r\n * http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.46.1458\r\n *\r\n * @template K, V\r\n * @param {Array.<!NamedNode>} childList Unsorted list of children\r\n * @param {function(!NamedNode, !NamedNode):number} cmp The comparison method to be used\r\n * @param {(function(NamedNode):K)=} keyFn An optional function to extract K from a node wrapper, if K's\r\n *                                                        type is not NamedNode\r\n * @param {(function(K, K):number)=} mapSortFn An optional override for comparator used by the generated sorted map\r\n * @return {SortedMap.<K, V>}\r\n */\r\nvar buildChildSet = function (childList, cmp, keyFn, mapSortFn) {\r\n    childList.sort(cmp);\r\n    var buildBalancedTree = function (low, high) {\r\n        var length = high - low;\r\n        var namedNode;\r\n        var key;\r\n        if (length == 0) {\r\n            return null;\r\n        }\r\n        else if (length == 1) {\r\n            namedNode = childList[low];\r\n            key = keyFn ? keyFn(namedNode) : namedNode;\r\n            return new LLRBNode(key, namedNode.node, LLRBNode.BLACK, null, null);\r\n        }\r\n        else {\r\n            var middle = parseInt((length / 2), 10) + low;\r\n            var left = buildBalancedTree(low, middle);\r\n            var right = buildBalancedTree(middle + 1, high);\r\n            namedNode = childList[middle];\r\n            key = keyFn ? keyFn(namedNode) : namedNode;\r\n            return new LLRBNode(key, namedNode.node, LLRBNode.BLACK, left, right);\r\n        }\r\n    };\r\n    var buildFrom12Array = function (base12) {\r\n        var node = null;\r\n        var root = null;\r\n        var index = childList.length;\r\n        var buildPennant = function (chunkSize, color) {\r\n            var low = index - chunkSize;\r\n            var high = index;\r\n            index -= chunkSize;\r\n            var childTree = buildBalancedTree(low + 1, high);\r\n            var namedNode = childList[low];\r\n            var key = keyFn ? keyFn(namedNode) : namedNode;\r\n            attachPennant(new LLRBNode(key, namedNode.node, color, null, childTree));\r\n        };\r\n        var attachPennant = function (pennant) {\r\n            if (node) {\r\n                node.left = pennant;\r\n                node = pennant;\r\n            }\r\n            else {\r\n                root = pennant;\r\n                node = pennant;\r\n            }\r\n        };\r\n        for (var i = 0; i < base12.count; ++i) {\r\n            var isOne = base12.nextBitIsOne();\r\n            // The number of nodes taken in each slice is 2^(arr.length - (i + 1))\r\n            var chunkSize = Math.pow(2, base12.count - (i + 1));\r\n            if (isOne) {\r\n                buildPennant(chunkSize, LLRBNode.BLACK);\r\n            }\r\n            else {\r\n                // current == 2\r\n                buildPennant(chunkSize, LLRBNode.BLACK);\r\n                buildPennant(chunkSize, LLRBNode.RED);\r\n            }\r\n        }\r\n        return root;\r\n    };\r\n    var base12 = new Base12Num(childList.length);\r\n    var root = buildFrom12Array(base12);\r\n    return new SortedMap(mapSortFn || cmp, root);\r\n};\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nvar _defaultIndexMap;\r\nvar fallbackObject = {};\r\n/**\r\n *\r\n * @param {Object.<string, FallbackType|SortedMap.<NamedNode, Node>>} indexes\r\n * @param {Object.<string, Index>} indexSet\r\n * @constructor\r\n */\r\nvar IndexMap = /** @class */ (function () {\r\n    function IndexMap(indexes_, indexSet_) {\r\n        this.indexes_ = indexes_;\r\n        this.indexSet_ = indexSet_;\r\n    }\r\n    Object.defineProperty(IndexMap, \"Default\", {\r\n        /**\r\n         * The default IndexMap for nodes without a priority\r\n         * @type {!IndexMap}\r\n         * @const\r\n         */\r\n        get: function () {\r\n            util.assert(fallbackObject && PRIORITY_INDEX, 'ChildrenNode.ts has not been loaded');\r\n            _defaultIndexMap =\r\n                _defaultIndexMap ||\r\n                    new IndexMap({ '.priority': fallbackObject }, { '.priority': PRIORITY_INDEX });\r\n            return _defaultIndexMap;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     *\r\n     * @param {!string} indexKey\r\n     * @return {?SortedMap.<NamedNode, Node>}\r\n     */\r\n    IndexMap.prototype.get = function (indexKey) {\r\n        var sortedMap = util.safeGet(this.indexes_, indexKey);\r\n        if (!sortedMap)\r\n            throw new Error('No index defined for ' + indexKey);\r\n        if (sortedMap === fallbackObject) {\r\n            // The index exists, but it falls back to just name comparison. Return null so that the calling code uses the\r\n            // regular child map\r\n            return null;\r\n        }\r\n        else {\r\n            return sortedMap;\r\n        }\r\n    };\r\n    /**\r\n     * @param {!Index} indexDefinition\r\n     * @return {boolean}\r\n     */\r\n    IndexMap.prototype.hasIndex = function (indexDefinition) {\r\n        return util.contains(this.indexSet_, indexDefinition.toString());\r\n    };\r\n    /**\r\n     * @param {!Index} indexDefinition\r\n     * @param {!SortedMap.<string, !Node>} existingChildren\r\n     * @return {!IndexMap}\r\n     */\r\n    IndexMap.prototype.addIndex = function (indexDefinition, existingChildren) {\r\n        util.assert(indexDefinition !== KEY_INDEX, \"KeyIndex always exists and isn't meant to be added to the IndexMap.\");\r\n        var childList = [];\r\n        var sawIndexedValue = false;\r\n        var iter = existingChildren.getIterator(NamedNode.Wrap);\r\n        var next = iter.getNext();\r\n        while (next) {\r\n            sawIndexedValue =\r\n                sawIndexedValue || indexDefinition.isDefinedOn(next.node);\r\n            childList.push(next);\r\n            next = iter.getNext();\r\n        }\r\n        var newIndex;\r\n        if (sawIndexedValue) {\r\n            newIndex = buildChildSet(childList, indexDefinition.getCompare());\r\n        }\r\n        else {\r\n            newIndex = fallbackObject;\r\n        }\r\n        var indexName = indexDefinition.toString();\r\n        var newIndexSet = util.clone(this.indexSet_);\r\n        newIndexSet[indexName] = indexDefinition;\r\n        var newIndexes = util.clone(this.indexes_);\r\n        newIndexes[indexName] = newIndex;\r\n        return new IndexMap(newIndexes, newIndexSet);\r\n    };\r\n    /**\r\n     * Ensure that this node is properly tracked in any indexes that we're maintaining\r\n     * @param {!NamedNode} namedNode\r\n     * @param {!SortedMap.<string, !Node>} existingChildren\r\n     * @return {!IndexMap}\r\n     */\r\n    IndexMap.prototype.addToIndexes = function (namedNode, existingChildren) {\r\n        var _this = this;\r\n        var newIndexes = util.map(this.indexes_, function (indexedChildren, indexName) {\r\n            var index = util.safeGet(_this.indexSet_, indexName);\r\n            util.assert(index, 'Missing index implementation for ' + indexName);\r\n            if (indexedChildren === fallbackObject) {\r\n                // Check to see if we need to index everything\r\n                if (index.isDefinedOn(namedNode.node)) {\r\n                    // We need to build this index\r\n                    var childList = [];\r\n                    var iter = existingChildren.getIterator(NamedNode.Wrap);\r\n                    var next = iter.getNext();\r\n                    while (next) {\r\n                        if (next.name != namedNode.name) {\r\n                            childList.push(next);\r\n                        }\r\n                        next = iter.getNext();\r\n                    }\r\n                    childList.push(namedNode);\r\n                    return buildChildSet(childList, index.getCompare());\r\n                }\r\n                else {\r\n                    // No change, this remains a fallback\r\n                    return fallbackObject;\r\n                }\r\n            }\r\n            else {\r\n                var existingSnap = existingChildren.get(namedNode.name);\r\n                var newChildren = indexedChildren;\r\n                if (existingSnap) {\r\n                    newChildren = newChildren.remove(new NamedNode(namedNode.name, existingSnap));\r\n                }\r\n                return newChildren.insert(namedNode, namedNode.node);\r\n            }\r\n        });\r\n        return new IndexMap(newIndexes, this.indexSet_);\r\n    };\r\n    /**\r\n     * Create a new IndexMap instance with the given value removed\r\n     * @param {!NamedNode} namedNode\r\n     * @param {!SortedMap.<string, !Node>} existingChildren\r\n     * @return {!IndexMap}\r\n     */\r\n    IndexMap.prototype.removeFromIndexes = function (namedNode, existingChildren) {\r\n        var newIndexes = util.map(this.indexes_, function (indexedChildren) {\r\n            if (indexedChildren === fallbackObject) {\r\n                // This is the fallback. Just return it, nothing to do in this case\r\n                return indexedChildren;\r\n            }\r\n            else {\r\n                var existingSnap = existingChildren.get(namedNode.name);\r\n                if (existingSnap) {\r\n                    return indexedChildren.remove(new NamedNode(namedNode.name, existingSnap));\r\n                }\r\n                else {\r\n                    // No record of this child\r\n                    return indexedChildren;\r\n                }\r\n            }\r\n        });\r\n        return new IndexMap(newIndexes, this.indexSet_);\r\n    };\r\n    return IndexMap;\r\n}());\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nfunction NAME_ONLY_COMPARATOR(left, right) {\r\n    return nameCompare(left.name, right.name);\r\n}\r\nfunction NAME_COMPARATOR(left, right) {\r\n    return nameCompare(left, right);\r\n}\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n// TODO: For memory savings, don't store priorityNode_ if it's empty.\r\nvar EMPTY_NODE;\r\n/**\r\n * ChildrenNode is a class for storing internal nodes in a DataSnapshot\r\n * (i.e. nodes with children).  It implements Node and stores the\r\n * list of children in the children property, sorted by child name.\r\n *\r\n * @constructor\r\n * @implements {Node}\r\n */\r\nvar ChildrenNode = /** @class */ (function () {\r\n    /**\r\n     *\r\n     * @param {!SortedMap.<string, !Node>} children_ List of children\r\n     * of this node..\r\n     * @param {?Node} priorityNode_ The priority of this node (as a snapshot node).\r\n     * @param {!IndexMap} indexMap_\r\n     */\r\n    function ChildrenNode(children_, priorityNode_, indexMap_) {\r\n        this.children_ = children_;\r\n        this.priorityNode_ = priorityNode_;\r\n        this.indexMap_ = indexMap_;\r\n        this.lazyHash_ = null;\r\n        /**\r\n         * Note: The only reason we allow null priority is for EMPTY_NODE, since we can't use\r\n         * EMPTY_NODE as the priority of EMPTY_NODE.  We might want to consider making EMPTY_NODE its own\r\n         * class instead of an empty ChildrenNode.\r\n         */\r\n        if (this.priorityNode_) {\r\n            validatePriorityNode(this.priorityNode_);\r\n        }\r\n        if (this.children_.isEmpty()) {\r\n            util.assert(!this.priorityNode_ || this.priorityNode_.isEmpty(), 'An empty node cannot have a priority');\r\n        }\r\n    }\r\n    Object.defineProperty(ChildrenNode, \"EMPTY_NODE\", {\r\n        get: function () {\r\n            return (EMPTY_NODE ||\r\n                (EMPTY_NODE = new ChildrenNode(new SortedMap(NAME_COMPARATOR), null, IndexMap.Default)));\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /** @inheritDoc */\r\n    ChildrenNode.prototype.isLeafNode = function () {\r\n        return false;\r\n    };\r\n    /** @inheritDoc */\r\n    ChildrenNode.prototype.getPriority = function () {\r\n        return this.priorityNode_ || EMPTY_NODE;\r\n    };\r\n    /** @inheritDoc */\r\n    ChildrenNode.prototype.updatePriority = function (newPriorityNode) {\r\n        if (this.children_.isEmpty()) {\r\n            // Don't allow priorities on empty nodes\r\n            return this;\r\n        }\r\n        else {\r\n            return new ChildrenNode(this.children_, newPriorityNode, this.indexMap_);\r\n        }\r\n    };\r\n    /** @inheritDoc */\r\n    ChildrenNode.prototype.getImmediateChild = function (childName) {\r\n        // Hack to treat priority as a regular child\r\n        if (childName === '.priority') {\r\n            return this.getPriority();\r\n        }\r\n        else {\r\n            var child = this.children_.get(childName);\r\n            return child === null ? EMPTY_NODE : child;\r\n        }\r\n    };\r\n    /** @inheritDoc */\r\n    ChildrenNode.prototype.getChild = function (path) {\r\n        var front = path.getFront();\r\n        if (front === null)\r\n            return this;\r\n        return this.getImmediateChild(front).getChild(path.popFront());\r\n    };\r\n    /** @inheritDoc */\r\n    ChildrenNode.prototype.hasChild = function (childName) {\r\n        return this.children_.get(childName) !== null;\r\n    };\r\n    /** @inheritDoc */\r\n    ChildrenNode.prototype.updateImmediateChild = function (childName, newChildNode) {\r\n        util.assert(newChildNode, 'We should always be passing snapshot nodes');\r\n        if (childName === '.priority') {\r\n            return this.updatePriority(newChildNode);\r\n        }\r\n        else {\r\n            var namedNode = new NamedNode(childName, newChildNode);\r\n            var newChildren = void 0, newIndexMap = void 0, newPriority = void 0;\r\n            if (newChildNode.isEmpty()) {\r\n                newChildren = this.children_.remove(childName);\r\n                newIndexMap = this.indexMap_.removeFromIndexes(namedNode, this.children_);\r\n            }\r\n            else {\r\n                newChildren = this.children_.insert(childName, newChildNode);\r\n                newIndexMap = this.indexMap_.addToIndexes(namedNode, this.children_);\r\n            }\r\n            newPriority = newChildren.isEmpty() ? EMPTY_NODE : this.priorityNode_;\r\n            return new ChildrenNode(newChildren, newPriority, newIndexMap);\r\n        }\r\n    };\r\n    /** @inheritDoc */\r\n    ChildrenNode.prototype.updateChild = function (path, newChildNode) {\r\n        var front = path.getFront();\r\n        if (front === null) {\r\n            return newChildNode;\r\n        }\r\n        else {\r\n            util.assert(path.getFront() !== '.priority' || path.getLength() === 1, '.priority must be the last token in a path');\r\n            var newImmediateChild = this.getImmediateChild(front).updateChild(path.popFront(), newChildNode);\r\n            return this.updateImmediateChild(front, newImmediateChild);\r\n        }\r\n    };\r\n    /** @inheritDoc */\r\n    ChildrenNode.prototype.isEmpty = function () {\r\n        return this.children_.isEmpty();\r\n    };\r\n    /** @inheritDoc */\r\n    ChildrenNode.prototype.numChildren = function () {\r\n        return this.children_.count();\r\n    };\r\n    /** @inheritDoc */\r\n    ChildrenNode.prototype.val = function (exportFormat) {\r\n        if (this.isEmpty())\r\n            return null;\r\n        var obj = {};\r\n        var numKeys = 0, maxKey = 0, allIntegerKeys = true;\r\n        this.forEachChild(PRIORITY_INDEX, function (key, childNode) {\r\n            obj[key] = childNode.val(exportFormat);\r\n            numKeys++;\r\n            if (allIntegerKeys && ChildrenNode.INTEGER_REGEXP_.test(key)) {\r\n                maxKey = Math.max(maxKey, Number(key));\r\n            }\r\n            else {\r\n                allIntegerKeys = false;\r\n            }\r\n        });\r\n        if (!exportFormat && allIntegerKeys && maxKey < 2 * numKeys) {\r\n            // convert to array.\r\n            var array = [];\r\n            for (var key in obj)\r\n                array[key] = obj[key];\r\n            return array;\r\n        }\r\n        else {\r\n            if (exportFormat && !this.getPriority().isEmpty()) {\r\n                obj['.priority'] = this.getPriority().val();\r\n            }\r\n            return obj;\r\n        }\r\n    };\r\n    /** @inheritDoc */\r\n    ChildrenNode.prototype.hash = function () {\r\n        if (this.lazyHash_ === null) {\r\n            var toHash_1 = '';\r\n            if (!this.getPriority().isEmpty())\r\n                toHash_1 +=\r\n                    'priority:' +\r\n                        priorityHashText(this.getPriority().val()) +\r\n                        ':';\r\n            this.forEachChild(PRIORITY_INDEX, function (key, childNode) {\r\n                var childHash = childNode.hash();\r\n                if (childHash !== '')\r\n                    toHash_1 += ':' + key + ':' + childHash;\r\n            });\r\n            this.lazyHash_ = toHash_1 === '' ? '' : sha1(toHash_1);\r\n        }\r\n        return this.lazyHash_;\r\n    };\r\n    /** @inheritDoc */\r\n    ChildrenNode.prototype.getPredecessorChildName = function (childName, childNode, index) {\r\n        var idx = this.resolveIndex_(index);\r\n        if (idx) {\r\n            var predecessor = idx.getPredecessorKey(new NamedNode(childName, childNode));\r\n            return predecessor ? predecessor.name : null;\r\n        }\r\n        else {\r\n            return this.children_.getPredecessorKey(childName);\r\n        }\r\n    };\r\n    /**\r\n     * @param {!Index} indexDefinition\r\n     * @return {?string}\r\n     */\r\n    ChildrenNode.prototype.getFirstChildName = function (indexDefinition) {\r\n        var idx = this.resolveIndex_(indexDefinition);\r\n        if (idx) {\r\n            var minKey = idx.minKey();\r\n            return minKey && minKey.name;\r\n        }\r\n        else {\r\n            return this.children_.minKey();\r\n        }\r\n    };\r\n    /**\r\n     * @param {!Index} indexDefinition\r\n     * @return {?NamedNode}\r\n     */\r\n    ChildrenNode.prototype.getFirstChild = function (indexDefinition) {\r\n        var minKey = this.getFirstChildName(indexDefinition);\r\n        if (minKey) {\r\n            return new NamedNode(minKey, this.children_.get(minKey));\r\n        }\r\n        else {\r\n            return null;\r\n        }\r\n    };\r\n    /**\r\n     * Given an index, return the key name of the largest value we have, according to that index\r\n     * @param {!Index} indexDefinition\r\n     * @return {?string}\r\n     */\r\n    ChildrenNode.prototype.getLastChildName = function (indexDefinition) {\r\n        var idx = this.resolveIndex_(indexDefinition);\r\n        if (idx) {\r\n            var maxKey = idx.maxKey();\r\n            return maxKey && maxKey.name;\r\n        }\r\n        else {\r\n            return this.children_.maxKey();\r\n        }\r\n    };\r\n    /**\r\n     * @param {!Index} indexDefinition\r\n     * @return {?NamedNode}\r\n     */\r\n    ChildrenNode.prototype.getLastChild = function (indexDefinition) {\r\n        var maxKey = this.getLastChildName(indexDefinition);\r\n        if (maxKey) {\r\n            return new NamedNode(maxKey, this.children_.get(maxKey));\r\n        }\r\n        else {\r\n            return null;\r\n        }\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    ChildrenNode.prototype.forEachChild = function (index, action) {\r\n        var idx = this.resolveIndex_(index);\r\n        if (idx) {\r\n            return idx.inorderTraversal(function (wrappedNode) {\r\n                return action(wrappedNode.name, wrappedNode.node);\r\n            });\r\n        }\r\n        else {\r\n            return this.children_.inorderTraversal(action);\r\n        }\r\n    };\r\n    /**\r\n     * @param {!Index} indexDefinition\r\n     * @return {SortedMapIterator}\r\n     */\r\n    ChildrenNode.prototype.getIterator = function (indexDefinition) {\r\n        return this.getIteratorFrom(indexDefinition.minPost(), indexDefinition);\r\n    };\r\n    /**\r\n     *\r\n     * @param {!NamedNode} startPost\r\n     * @param {!Index} indexDefinition\r\n     * @return {!SortedMapIterator}\r\n     */\r\n    ChildrenNode.prototype.getIteratorFrom = function (startPost, indexDefinition) {\r\n        var idx = this.resolveIndex_(indexDefinition);\r\n        if (idx) {\r\n            return idx.getIteratorFrom(startPost, function (key) { return key; });\r\n        }\r\n        else {\r\n            var iterator = this.children_.getIteratorFrom(startPost.name, NamedNode.Wrap);\r\n            var next = iterator.peek();\r\n            while (next != null && indexDefinition.compare(next, startPost) < 0) {\r\n                iterator.getNext();\r\n                next = iterator.peek();\r\n            }\r\n            return iterator;\r\n        }\r\n    };\r\n    /**\r\n     * @param {!Index} indexDefinition\r\n     * @return {!SortedMapIterator}\r\n     */\r\n    ChildrenNode.prototype.getReverseIterator = function (indexDefinition) {\r\n        return this.getReverseIteratorFrom(indexDefinition.maxPost(), indexDefinition);\r\n    };\r\n    /**\r\n     * @param {!NamedNode} endPost\r\n     * @param {!Index} indexDefinition\r\n     * @return {!SortedMapIterator}\r\n     */\r\n    ChildrenNode.prototype.getReverseIteratorFrom = function (endPost, indexDefinition) {\r\n        var idx = this.resolveIndex_(indexDefinition);\r\n        if (idx) {\r\n            return idx.getReverseIteratorFrom(endPost, function (key) {\r\n                return key;\r\n            });\r\n        }\r\n        else {\r\n            var iterator = this.children_.getReverseIteratorFrom(endPost.name, NamedNode.Wrap);\r\n            var next = iterator.peek();\r\n            while (next != null && indexDefinition.compare(next, endPost) > 0) {\r\n                iterator.getNext();\r\n                next = iterator.peek();\r\n            }\r\n            return iterator;\r\n        }\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    ChildrenNode.prototype.compareTo = function (other) {\r\n        if (this.isEmpty()) {\r\n            if (other.isEmpty()) {\r\n                return 0;\r\n            }\r\n            else {\r\n                return -1;\r\n            }\r\n        }\r\n        else if (other.isLeafNode() || other.isEmpty()) {\r\n            return 1;\r\n        }\r\n        else if (other === MAX_NODE$2) {\r\n            return -1;\r\n        }\r\n        else {\r\n            // Must be another node with children.\r\n            return 0;\r\n        }\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    ChildrenNode.prototype.withIndex = function (indexDefinition) {\r\n        if (indexDefinition === KEY_INDEX ||\r\n            this.indexMap_.hasIndex(indexDefinition)) {\r\n            return this;\r\n        }\r\n        else {\r\n            var newIndexMap = this.indexMap_.addIndex(indexDefinition, this.children_);\r\n            return new ChildrenNode(this.children_, this.priorityNode_, newIndexMap);\r\n        }\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    ChildrenNode.prototype.isIndexed = function (index) {\r\n        return index === KEY_INDEX || this.indexMap_.hasIndex(index);\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    ChildrenNode.prototype.equals = function (other) {\r\n        if (other === this) {\r\n            return true;\r\n        }\r\n        else if (other.isLeafNode()) {\r\n            return false;\r\n        }\r\n        else {\r\n            var otherChildrenNode = other;\r\n            if (!this.getPriority().equals(otherChildrenNode.getPriority())) {\r\n                return false;\r\n            }\r\n            else if (this.children_.count() === otherChildrenNode.children_.count()) {\r\n                var thisIter = this.getIterator(PRIORITY_INDEX);\r\n                var otherIter = otherChildrenNode.getIterator(PRIORITY_INDEX);\r\n                var thisCurrent = thisIter.getNext();\r\n                var otherCurrent = otherIter.getNext();\r\n                while (thisCurrent && otherCurrent) {\r\n                    if (thisCurrent.name !== otherCurrent.name ||\r\n                        !thisCurrent.node.equals(otherCurrent.node)) {\r\n                        return false;\r\n                    }\r\n                    thisCurrent = thisIter.getNext();\r\n                    otherCurrent = otherIter.getNext();\r\n                }\r\n                return thisCurrent === null && otherCurrent === null;\r\n            }\r\n            else {\r\n                return false;\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * Returns a SortedMap ordered by index, or null if the default (by-key) ordering can be used\r\n     * instead.\r\n     *\r\n     * @private\r\n     * @param {!Index} indexDefinition\r\n     * @return {?SortedMap.<NamedNode, Node>}\r\n     */\r\n    ChildrenNode.prototype.resolveIndex_ = function (indexDefinition) {\r\n        if (indexDefinition === KEY_INDEX) {\r\n            return null;\r\n        }\r\n        else {\r\n            return this.indexMap_.get(indexDefinition.toString());\r\n        }\r\n    };\r\n    /**\r\n     * @private\r\n     * @type {RegExp}\r\n     */\r\n    ChildrenNode.INTEGER_REGEXP_ = /^(0|[1-9]\\d*)$/;\r\n    return ChildrenNode;\r\n}());\r\n/**\r\n * @constructor\r\n * @extends {ChildrenNode}\r\n * @private\r\n */\r\nvar MaxNode = /** @class */ (function (_super) {\r\n    tslib_1.__extends(MaxNode, _super);\r\n    function MaxNode() {\r\n        return _super.call(this, new SortedMap(NAME_COMPARATOR), ChildrenNode.EMPTY_NODE, IndexMap.Default) || this;\r\n    }\r\n    MaxNode.prototype.compareTo = function (other) {\r\n        if (other === this) {\r\n            return 0;\r\n        }\r\n        else {\r\n            return 1;\r\n        }\r\n    };\r\n    MaxNode.prototype.equals = function (other) {\r\n        // Not that we every compare it, but MAX_NODE is only ever equal to itself\r\n        return other === this;\r\n    };\r\n    MaxNode.prototype.getPriority = function () {\r\n        return this;\r\n    };\r\n    MaxNode.prototype.getImmediateChild = function (childName) {\r\n        return ChildrenNode.EMPTY_NODE;\r\n    };\r\n    MaxNode.prototype.isEmpty = function () {\r\n        return false;\r\n    };\r\n    return MaxNode;\r\n}(ChildrenNode));\r\n/**\r\n * Marker that will sort higher than any other snapshot.\r\n * @type {!MAX_NODE}\r\n * @const\r\n */\r\nvar MAX_NODE$2 = new MaxNode();\r\nObject.defineProperties(NamedNode, {\r\n    MIN: {\r\n        value: new NamedNode(MIN_NAME, ChildrenNode.EMPTY_NODE)\r\n    },\r\n    MAX: {\r\n        value: new NamedNode(MAX_NAME, MAX_NODE$2)\r\n    }\r\n});\r\n/**\r\n * Reference Extensions\r\n */\r\nKeyIndex.__EMPTY_NODE = ChildrenNode.EMPTY_NODE;\r\nLeafNode.__childrenNodeConstructor = ChildrenNode;\r\nsetMaxNode(MAX_NODE$2);\r\nsetMaxNode$1(MAX_NODE$2);\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nvar USE_HINZE = true;\r\n/**\r\n * Constructs a snapshot node representing the passed JSON and returns it.\r\n * @param {*} json JSON to create a node for.\r\n * @param {?string|?number=} priority Optional priority to use.  This will be ignored if the\r\n * passed JSON contains a .priority property.\r\n * @return {!Node}\r\n */\r\nfunction nodeFromJSON$1(json, priority) {\r\n    if (priority === void 0) { priority = null; }\r\n    if (json === null) {\r\n        return ChildrenNode.EMPTY_NODE;\r\n    }\r\n    if (typeof json === 'object' && '.priority' in json) {\r\n        priority = json['.priority'];\r\n    }\r\n    util.assert(priority === null ||\r\n        typeof priority === 'string' ||\r\n        typeof priority === 'number' ||\r\n        (typeof priority === 'object' && '.sv' in priority), 'Invalid priority type found: ' + typeof priority);\r\n    if (typeof json === 'object' && '.value' in json && json['.value'] !== null) {\r\n        json = json['.value'];\r\n    }\r\n    // Valid leaf nodes include non-objects or server-value wrapper objects\r\n    if (typeof json !== 'object' || '.sv' in json) {\r\n        var jsonLeaf = json;\r\n        return new LeafNode(jsonLeaf, nodeFromJSON$1(priority));\r\n    }\r\n    if (!(json instanceof Array) && USE_HINZE) {\r\n        var children_1 = [];\r\n        var childrenHavePriority_1 = false;\r\n        var hinzeJsonObj_1 = json;\r\n        util.forEach(hinzeJsonObj_1, function (key, child) {\r\n            if (typeof key !== 'string' || key.substring(0, 1) !== '.') {\r\n                // Ignore metadata nodes\r\n                var childNode = nodeFromJSON$1(hinzeJsonObj_1[key]);\r\n                if (!childNode.isEmpty()) {\r\n                    childrenHavePriority_1 =\r\n                        childrenHavePriority_1 || !childNode.getPriority().isEmpty();\r\n                    children_1.push(new NamedNode(key, childNode));\r\n                }\r\n            }\r\n        });\r\n        if (children_1.length == 0) {\r\n            return ChildrenNode.EMPTY_NODE;\r\n        }\r\n        var childSet = buildChildSet(children_1, NAME_ONLY_COMPARATOR, function (namedNode) { return namedNode.name; }, NAME_COMPARATOR);\r\n        if (childrenHavePriority_1) {\r\n            var sortedChildSet = buildChildSet(children_1, PRIORITY_INDEX.getCompare());\r\n            return new ChildrenNode(childSet, nodeFromJSON$1(priority), new IndexMap({ '.priority': sortedChildSet }, { '.priority': PRIORITY_INDEX }));\r\n        }\r\n        else {\r\n            return new ChildrenNode(childSet, nodeFromJSON$1(priority), IndexMap.Default);\r\n        }\r\n    }\r\n    else {\r\n        var node_1 = ChildrenNode.EMPTY_NODE;\r\n        var jsonObj_1 = json;\r\n        util.forEach(jsonObj_1, function (key, childData) {\r\n            if (util.contains(jsonObj_1, key)) {\r\n                if (key.substring(0, 1) !== '.') {\r\n                    // ignore metadata nodes.\r\n                    var childNode = nodeFromJSON$1(childData);\r\n                    if (childNode.isLeafNode() || !childNode.isEmpty())\r\n                        node_1 = node_1.updateImmediateChild(key, childNode);\r\n                }\r\n            }\r\n        });\r\n        return node_1.updatePriority(nodeFromJSON$1(priority));\r\n    }\r\n}\r\nsetNodeFromJSON(nodeFromJSON$1);\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * @constructor\r\n * @extends {Index}\r\n * @private\r\n */\r\nvar ValueIndex = /** @class */ (function (_super) {\r\n    tslib_1.__extends(ValueIndex, _super);\r\n    function ValueIndex() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    ValueIndex.prototype.compare = function (a, b) {\r\n        var indexCmp = a.node.compareTo(b.node);\r\n        if (indexCmp === 0) {\r\n            return nameCompare(a.name, b.name);\r\n        }\r\n        else {\r\n            return indexCmp;\r\n        }\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    ValueIndex.prototype.isDefinedOn = function (node) {\r\n        return true;\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    ValueIndex.prototype.indexedValueChanged = function (oldNode, newNode) {\r\n        return !oldNode.equals(newNode);\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    ValueIndex.prototype.minPost = function () {\r\n        return NamedNode.MIN;\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    ValueIndex.prototype.maxPost = function () {\r\n        return NamedNode.MAX;\r\n    };\r\n    /**\r\n     * @param {*} indexValue\r\n     * @param {string} name\r\n     * @return {!NamedNode}\r\n     */\r\n    ValueIndex.prototype.makePost = function (indexValue, name) {\r\n        var valueNode = nodeFromJSON$1(indexValue);\r\n        return new NamedNode(name, valueNode);\r\n    };\r\n    /**\r\n     * @return {!string} String representation for inclusion in a query spec\r\n     */\r\n    ValueIndex.prototype.toString = function () {\r\n        return '.value';\r\n    };\r\n    return ValueIndex;\r\n}(Index));\r\nvar VALUE_INDEX = new ValueIndex();\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * @param {!Path} indexPath\r\n * @constructor\r\n * @extends {Index}\r\n */\r\nvar PathIndex = /** @class */ (function (_super) {\r\n    tslib_1.__extends(PathIndex, _super);\r\n    function PathIndex(indexPath_) {\r\n        var _this = _super.call(this) || this;\r\n        _this.indexPath_ = indexPath_;\r\n        util.assert(!indexPath_.isEmpty() && indexPath_.getFront() !== '.priority', \"Can't create PathIndex with empty path or .priority key\");\r\n        return _this;\r\n    }\r\n    /**\r\n     * @param {!Node} snap\r\n     * @return {!Node}\r\n     * @protected\r\n     */\r\n    PathIndex.prototype.extractChild = function (snap) {\r\n        return snap.getChild(this.indexPath_);\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    PathIndex.prototype.isDefinedOn = function (node) {\r\n        return !node.getChild(this.indexPath_).isEmpty();\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    PathIndex.prototype.compare = function (a, b) {\r\n        var aChild = this.extractChild(a.node);\r\n        var bChild = this.extractChild(b.node);\r\n        var indexCmp = aChild.compareTo(bChild);\r\n        if (indexCmp === 0) {\r\n            return nameCompare(a.name, b.name);\r\n        }\r\n        else {\r\n            return indexCmp;\r\n        }\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    PathIndex.prototype.makePost = function (indexValue, name) {\r\n        var valueNode = nodeFromJSON$1(indexValue);\r\n        var node = ChildrenNode.EMPTY_NODE.updateChild(this.indexPath_, valueNode);\r\n        return new NamedNode(name, node);\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    PathIndex.prototype.maxPost = function () {\r\n        var node = ChildrenNode.EMPTY_NODE.updateChild(this.indexPath_, MAX_NODE$2);\r\n        return new NamedNode(MAX_NAME, node);\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    PathIndex.prototype.toString = function () {\r\n        return this.indexPath_.slice().join('/');\r\n    };\r\n    return PathIndex;\r\n}(Index));\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Class representing a firebase data snapshot.  It wraps a SnapshotNode and\r\n * surfaces the public methods (val, forEach, etc.) we want to expose.\r\n */\r\nvar DataSnapshot = /** @class */ (function () {\r\n    /**\r\n     * @param {!Node} node_ A SnapshotNode to wrap.\r\n     * @param {!Reference} ref_ The ref of the location this snapshot came from.\r\n     * @param {!Index} index_ The iteration order for this snapshot\r\n     */\r\n    function DataSnapshot(node_, ref_, index_) {\r\n        this.node_ = node_;\r\n        this.ref_ = ref_;\r\n        this.index_ = index_;\r\n    }\r\n    /**\r\n     * Retrieves the snapshot contents as JSON.  Returns null if the snapshot is\r\n     * empty.\r\n     *\r\n     * @return {*} JSON representation of the DataSnapshot contents, or null if empty.\r\n     */\r\n    DataSnapshot.prototype.val = function () {\r\n        util.validateArgCount('DataSnapshot.val', 0, 0, arguments.length);\r\n        return this.node_.val();\r\n    };\r\n    /**\r\n     * Returns the snapshot contents as JSON, including priorities of node.  Suitable for exporting\r\n     * the entire node contents.\r\n     * @return {*} JSON representation of the DataSnapshot contents, or null if empty.\r\n     */\r\n    DataSnapshot.prototype.exportVal = function () {\r\n        util.validateArgCount('DataSnapshot.exportVal', 0, 0, arguments.length);\r\n        return this.node_.val(true);\r\n    };\r\n    // Do not create public documentation. This is intended to make JSON serialization work but is otherwise unnecessary\r\n    // for end-users\r\n    DataSnapshot.prototype.toJSON = function () {\r\n        // Optional spacer argument is unnecessary because we're depending on recursion rather than stringifying the content\r\n        util.validateArgCount('DataSnapshot.toJSON', 0, 1, arguments.length);\r\n        return this.exportVal();\r\n    };\r\n    /**\r\n     * Returns whether the snapshot contains a non-null value.\r\n     *\r\n     * @return {boolean} Whether the snapshot contains a non-null value, or is empty.\r\n     */\r\n    DataSnapshot.prototype.exists = function () {\r\n        util.validateArgCount('DataSnapshot.exists', 0, 0, arguments.length);\r\n        return !this.node_.isEmpty();\r\n    };\r\n    /**\r\n     * Returns a DataSnapshot of the specified child node's contents.\r\n     *\r\n     * @param {!string} childPathString Path to a child.\r\n     * @return {!DataSnapshot} DataSnapshot for child node.\r\n     */\r\n    DataSnapshot.prototype.child = function (childPathString) {\r\n        util.validateArgCount('DataSnapshot.child', 0, 1, arguments.length);\r\n        // Ensure the childPath is a string (can be a number)\r\n        childPathString = String(childPathString);\r\n        validatePathString('DataSnapshot.child', 1, childPathString, false);\r\n        var childPath = new Path(childPathString);\r\n        var childRef = this.ref_.child(childPath);\r\n        return new DataSnapshot(this.node_.getChild(childPath), childRef, PRIORITY_INDEX);\r\n    };\r\n    /**\r\n     * Returns whether the snapshot contains a child at the specified path.\r\n     *\r\n     * @param {!string} childPathString Path to a child.\r\n     * @return {boolean} Whether the child exists.\r\n     */\r\n    DataSnapshot.prototype.hasChild = function (childPathString) {\r\n        util.validateArgCount('DataSnapshot.hasChild', 1, 1, arguments.length);\r\n        validatePathString('DataSnapshot.hasChild', 1, childPathString, false);\r\n        var childPath = new Path(childPathString);\r\n        return !this.node_.getChild(childPath).isEmpty();\r\n    };\r\n    /**\r\n     * Returns the priority of the object, or null if no priority was set.\r\n     *\r\n     * @return {string|number|null} The priority.\r\n     */\r\n    DataSnapshot.prototype.getPriority = function () {\r\n        util.validateArgCount('DataSnapshot.getPriority', 0, 0, arguments.length);\r\n        // typecast here because we never return deferred values or internal priorities (MAX_PRIORITY)\r\n        return this.node_.getPriority().val();\r\n    };\r\n    /**\r\n     * Iterates through child nodes and calls the specified action for each one.\r\n     *\r\n     * @param {function(!DataSnapshot)} action Callback function to be called\r\n     * for each child.\r\n     * @return {boolean} True if forEach was canceled by action returning true for\r\n     * one of the child nodes.\r\n     */\r\n    DataSnapshot.prototype.forEach = function (action) {\r\n        var _this = this;\r\n        util.validateArgCount('DataSnapshot.forEach', 1, 1, arguments.length);\r\n        util.validateCallback('DataSnapshot.forEach', 1, action, false);\r\n        if (this.node_.isLeafNode())\r\n            return false;\r\n        var childrenNode = this.node_;\r\n        // Sanitize the return value to a boolean. ChildrenNode.forEachChild has a weird return type...\r\n        return !!childrenNode.forEachChild(this.index_, function (key, node) {\r\n            return action(new DataSnapshot(node, _this.ref_.child(key), PRIORITY_INDEX));\r\n        });\r\n    };\r\n    /**\r\n     * Returns whether this DataSnapshot has children.\r\n     * @return {boolean} True if the DataSnapshot contains 1 or more child nodes.\r\n     */\r\n    DataSnapshot.prototype.hasChildren = function () {\r\n        util.validateArgCount('DataSnapshot.hasChildren', 0, 0, arguments.length);\r\n        if (this.node_.isLeafNode())\r\n            return false;\r\n        else\r\n            return !this.node_.isEmpty();\r\n    };\r\n    Object.defineProperty(DataSnapshot.prototype, \"key\", {\r\n        get: function () {\r\n            return this.ref_.getKey();\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Returns the number of children for this DataSnapshot.\r\n     * @return {number} The number of children that this DataSnapshot contains.\r\n     */\r\n    DataSnapshot.prototype.numChildren = function () {\r\n        util.validateArgCount('DataSnapshot.numChildren', 0, 0, arguments.length);\r\n        return this.node_.numChildren();\r\n    };\r\n    /**\r\n     * @return {Reference} The Firebase reference for the location this snapshot's data came from.\r\n     */\r\n    DataSnapshot.prototype.getRef = function () {\r\n        util.validateArgCount('DataSnapshot.ref', 0, 0, arguments.length);\r\n        return this.ref_;\r\n    };\r\n    Object.defineProperty(DataSnapshot.prototype, \"ref\", {\r\n        get: function () {\r\n            return this.getRef();\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return DataSnapshot;\r\n}());\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Encapsulates the data needed to raise an event\r\n * @implements {Event}\r\n */\r\nvar DataEvent = /** @class */ (function () {\r\n    /**\r\n     * @param {!string} eventType One of: value, child_added, child_changed, child_moved, child_removed\r\n     * @param {!EventRegistration} eventRegistration The function to call to with the event data. User provided\r\n     * @param {!DataSnapshot} snapshot The data backing the event\r\n     * @param {?string=} prevName Optional, the name of the previous child for child_* events.\r\n     */\r\n    function DataEvent(eventType, eventRegistration, snapshot, prevName) {\r\n        this.eventType = eventType;\r\n        this.eventRegistration = eventRegistration;\r\n        this.snapshot = snapshot;\r\n        this.prevName = prevName;\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    DataEvent.prototype.getPath = function () {\r\n        var ref = this.snapshot.getRef();\r\n        if (this.eventType === 'value') {\r\n            return ref.path;\r\n        }\r\n        else {\r\n            return ref.getParent().path;\r\n        }\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    DataEvent.prototype.getEventType = function () {\r\n        return this.eventType;\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    DataEvent.prototype.getEventRunner = function () {\r\n        return this.eventRegistration.getEventRunner(this);\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    DataEvent.prototype.toString = function () {\r\n        return (this.getPath().toString() +\r\n            ':' +\r\n            this.eventType +\r\n            ':' +\r\n            util.stringify(this.snapshot.exportVal()));\r\n    };\r\n    return DataEvent;\r\n}());\r\nvar CancelEvent = /** @class */ (function () {\r\n    /**\r\n     * @param {EventRegistration} eventRegistration\r\n     * @param {Error} error\r\n     * @param {!Path} path\r\n     */\r\n    function CancelEvent(eventRegistration, error, path) {\r\n        this.eventRegistration = eventRegistration;\r\n        this.error = error;\r\n        this.path = path;\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    CancelEvent.prototype.getPath = function () {\r\n        return this.path;\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    CancelEvent.prototype.getEventType = function () {\r\n        return 'cancel';\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    CancelEvent.prototype.getEventRunner = function () {\r\n        return this.eventRegistration.getEventRunner(this);\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    CancelEvent.prototype.toString = function () {\r\n        return this.path.toString() + ':cancel';\r\n    };\r\n    return CancelEvent;\r\n}());\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Represents registration for 'value' events.\r\n */\r\nvar ValueEventRegistration = /** @class */ (function () {\r\n    /**\r\n     * @param {?function(!DataSnapshot)} callback_\r\n     * @param {?function(Error)} cancelCallback_\r\n     * @param {?Object} context_\r\n     */\r\n    function ValueEventRegistration(callback_, cancelCallback_, context_) {\r\n        this.callback_ = callback_;\r\n        this.cancelCallback_ = cancelCallback_;\r\n        this.context_ = context_;\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    ValueEventRegistration.prototype.respondsTo = function (eventType) {\r\n        return eventType === 'value';\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    ValueEventRegistration.prototype.createEvent = function (change, query) {\r\n        var index = query.getQueryParams().getIndex();\r\n        return new DataEvent('value', this, new DataSnapshot(change.snapshotNode, query.getRef(), index));\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    ValueEventRegistration.prototype.getEventRunner = function (eventData) {\r\n        var ctx = this.context_;\r\n        if (eventData.getEventType() === 'cancel') {\r\n            util.assert(this.cancelCallback_, 'Raising a cancel event on a listener with no cancel callback');\r\n            var cancelCB_1 = this.cancelCallback_;\r\n            return function () {\r\n                // We know that error exists, we checked above that this is a cancel event\r\n                cancelCB_1.call(ctx, eventData.error);\r\n            };\r\n        }\r\n        else {\r\n            var cb_1 = this.callback_;\r\n            return function () {\r\n                cb_1.call(ctx, eventData.snapshot);\r\n            };\r\n        }\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    ValueEventRegistration.prototype.createCancelEvent = function (error, path) {\r\n        if (this.cancelCallback_) {\r\n            return new CancelEvent(this, error, path);\r\n        }\r\n        else {\r\n            return null;\r\n        }\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    ValueEventRegistration.prototype.matches = function (other) {\r\n        if (!(other instanceof ValueEventRegistration)) {\r\n            return false;\r\n        }\r\n        else if (!other.callback_ || !this.callback_) {\r\n            // If no callback specified, we consider it to match any callback.\r\n            return true;\r\n        }\r\n        else {\r\n            return (other.callback_ === this.callback_ && other.context_ === this.context_);\r\n        }\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    ValueEventRegistration.prototype.hasAnyCallback = function () {\r\n        return this.callback_ !== null;\r\n    };\r\n    return ValueEventRegistration;\r\n}());\r\n/**\r\n * Represents the registration of 1 or more child_xxx events.\r\n *\r\n * Currently, it is always exactly 1 child_xxx event, but the idea is we might let you\r\n * register a group of callbacks together in the future.\r\n *\r\n * @constructor\r\n * @implements {EventRegistration}\r\n */\r\nvar ChildEventRegistration = /** @class */ (function () {\r\n    /**\r\n     * @param {?Object.<string, function(!DataSnapshot, ?string=)>} callbacks_\r\n     * @param {?function(Error)} cancelCallback_\r\n     * @param {Object=} context_\r\n     */\r\n    function ChildEventRegistration(callbacks_, cancelCallback_, context_) {\r\n        this.callbacks_ = callbacks_;\r\n        this.cancelCallback_ = cancelCallback_;\r\n        this.context_ = context_;\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    ChildEventRegistration.prototype.respondsTo = function (eventType) {\r\n        var eventToCheck = eventType === 'children_added' ? 'child_added' : eventType;\r\n        eventToCheck =\r\n            eventToCheck === 'children_removed' ? 'child_removed' : eventToCheck;\r\n        return util.contains(this.callbacks_, eventToCheck);\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    ChildEventRegistration.prototype.createCancelEvent = function (error, path) {\r\n        if (this.cancelCallback_) {\r\n            return new CancelEvent(this, error, path);\r\n        }\r\n        else {\r\n            return null;\r\n        }\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    ChildEventRegistration.prototype.createEvent = function (change, query) {\r\n        util.assert(change.childName != null, 'Child events should have a childName.');\r\n        var ref = query.getRef().child(/** @type {!string} */ (change.childName));\r\n        var index = query.getQueryParams().getIndex();\r\n        return new DataEvent(change.type, this, new DataSnapshot(change.snapshotNode, ref, index), change.prevName);\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    ChildEventRegistration.prototype.getEventRunner = function (eventData) {\r\n        var ctx = this.context_;\r\n        if (eventData.getEventType() === 'cancel') {\r\n            util.assert(this.cancelCallback_, 'Raising a cancel event on a listener with no cancel callback');\r\n            var cancelCB_2 = this.cancelCallback_;\r\n            return function () {\r\n                // We know that error exists, we checked above that this is a cancel event\r\n                cancelCB_2.call(ctx, eventData.error);\r\n            };\r\n        }\r\n        else {\r\n            var cb_2 = this.callbacks_[eventData.eventType];\r\n            return function () {\r\n                cb_2.call(ctx, eventData.snapshot, eventData.prevName);\r\n            };\r\n        }\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    ChildEventRegistration.prototype.matches = function (other) {\r\n        if (other instanceof ChildEventRegistration) {\r\n            if (!this.callbacks_ || !other.callbacks_) {\r\n                return true;\r\n            }\r\n            else if (this.context_ === other.context_) {\r\n                var otherCount = util.getCount(other.callbacks_);\r\n                var thisCount = util.getCount(this.callbacks_);\r\n                if (otherCount === thisCount) {\r\n                    // If count is 1, do an exact match on eventType, if either is defined but null, it's a match.\r\n                    //  If event types don't match, not a match\r\n                    // If count is not 1, exact match across all\r\n                    if (otherCount === 1) {\r\n                        var otherKey /** @type {!string} */ = util.getAnyKey(other.callbacks_);\r\n                        var thisKey /** @type {!string} */ = util.getAnyKey(this.callbacks_);\r\n                        return (thisKey === otherKey &&\r\n                            (!other.callbacks_[otherKey] ||\r\n                                !this.callbacks_[thisKey] ||\r\n                                other.callbacks_[otherKey] === this.callbacks_[thisKey]));\r\n                    }\r\n                    else {\r\n                        // Exact match on each key.\r\n                        return util.every(this.callbacks_, function (eventType, cb) { return other.callbacks_[eventType] === cb; });\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return false;\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    ChildEventRegistration.prototype.hasAnyCallback = function () {\r\n        return this.callbacks_ !== null;\r\n    };\r\n    return ChildEventRegistration;\r\n}());\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nvar __referenceConstructor;\r\n/**\r\n * A Query represents a filter to be applied to a firebase location.  This object purely represents the\r\n * query expression (and exposes our public API to build the query).  The actual query logic is in ViewBase.js.\r\n *\r\n * Since every Firebase reference is a query, Firebase inherits from this object.\r\n */\r\nvar Query = /** @class */ (function () {\r\n    function Query(repo, path, queryParams_, orderByCalled_) {\r\n        this.repo = repo;\r\n        this.path = path;\r\n        this.queryParams_ = queryParams_;\r\n        this.orderByCalled_ = orderByCalled_;\r\n    }\r\n    Object.defineProperty(Query, \"__referenceConstructor\", {\r\n        get: function () {\r\n            util.assert(__referenceConstructor, 'Reference.ts has not been loaded');\r\n            return __referenceConstructor;\r\n        },\r\n        set: function (val) {\r\n            __referenceConstructor = val;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Validates start/end values for queries.\r\n     * @param {!QueryParams} params\r\n     * @private\r\n     */\r\n    Query.validateQueryEndpoints_ = function (params) {\r\n        var startNode = null;\r\n        var endNode = null;\r\n        if (params.hasStart()) {\r\n            startNode = params.getIndexStartValue();\r\n        }\r\n        if (params.hasEnd()) {\r\n            endNode = params.getIndexEndValue();\r\n        }\r\n        if (params.getIndex() === KEY_INDEX) {\r\n            var tooManyArgsError = 'Query: When ordering by key, you may only pass one argument to ' +\r\n                'startAt(), endAt(), or equalTo().';\r\n            var wrongArgTypeError = 'Query: When ordering by key, the argument passed to startAt(), endAt(),' +\r\n                'or equalTo() must be a string.';\r\n            if (params.hasStart()) {\r\n                var startName = params.getIndexStartName();\r\n                if (startName != MIN_NAME) {\r\n                    throw new Error(tooManyArgsError);\r\n                }\r\n                else if (typeof startNode !== 'string') {\r\n                    throw new Error(wrongArgTypeError);\r\n                }\r\n            }\r\n            if (params.hasEnd()) {\r\n                var endName = params.getIndexEndName();\r\n                if (endName != MAX_NAME) {\r\n                    throw new Error(tooManyArgsError);\r\n                }\r\n                else if (typeof endNode !== 'string') {\r\n                    throw new Error(wrongArgTypeError);\r\n                }\r\n            }\r\n        }\r\n        else if (params.getIndex() === PRIORITY_INDEX) {\r\n            if ((startNode != null && !isValidPriority(startNode)) ||\r\n                (endNode != null && !isValidPriority(endNode))) {\r\n                throw new Error('Query: When ordering by priority, the first argument passed to startAt(), ' +\r\n                    'endAt(), or equalTo() must be a valid priority value (null, a number, or a string).');\r\n            }\r\n        }\r\n        else {\r\n            util.assert(params.getIndex() instanceof PathIndex ||\r\n                params.getIndex() === VALUE_INDEX, 'unknown index type.');\r\n            if ((startNode != null && typeof startNode === 'object') ||\r\n                (endNode != null && typeof endNode === 'object')) {\r\n                throw new Error('Query: First argument passed to startAt(), endAt(), or equalTo() cannot be ' +\r\n                    'an object.');\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * Validates that limit* has been called with the correct combination of parameters\r\n     * @param {!QueryParams} params\r\n     * @private\r\n     */\r\n    Query.validateLimit_ = function (params) {\r\n        if (params.hasStart() &&\r\n            params.hasEnd() &&\r\n            params.hasLimit() &&\r\n            !params.hasAnchoredLimit()) {\r\n            throw new Error(\"Query: Can't combine startAt(), endAt(), and limit(). Use limitToFirst() or limitToLast() instead.\");\r\n        }\r\n    };\r\n    /**\r\n     * Validates that no other order by call has been made\r\n     * @param {!string} fnName\r\n     * @private\r\n     */\r\n    Query.prototype.validateNoPreviousOrderByCall_ = function (fnName) {\r\n        if (this.orderByCalled_ === true) {\r\n            throw new Error(fnName + \": You can't combine multiple orderBy calls.\");\r\n        }\r\n    };\r\n    /**\r\n     * @return {!QueryParams}\r\n     */\r\n    Query.prototype.getQueryParams = function () {\r\n        return this.queryParams_;\r\n    };\r\n    /**\r\n     * @return {!Reference}\r\n     */\r\n    Query.prototype.getRef = function () {\r\n        util.validateArgCount('Query.ref', 0, 0, arguments.length);\r\n        // This is a slight hack. We cannot goog.require('fb.api.Firebase'), since Firebase requires fb.api.Query.\r\n        // However, we will always export 'Firebase' to the global namespace, so it's guaranteed to exist by the time this\r\n        // method gets called.\r\n        return new Query.__referenceConstructor(this.repo, this.path);\r\n    };\r\n    /**\r\n     * @param {!string} eventType\r\n     * @param {!function(DataSnapshot, string=)} callback\r\n     * @param {(function(Error)|Object)=} cancelCallbackOrContext\r\n     * @param {Object=} context\r\n     * @return {!function(DataSnapshot, string=)}\r\n     */\r\n    Query.prototype.on = function (eventType, callback, cancelCallbackOrContext, context) {\r\n        util.validateArgCount('Query.on', 2, 4, arguments.length);\r\n        validateEventType('Query.on', 1, eventType, false);\r\n        util.validateCallback('Query.on', 2, callback, false);\r\n        var ret = Query.getCancelAndContextArgs_('Query.on', cancelCallbackOrContext, context);\r\n        if (eventType === 'value') {\r\n            this.onValueEvent(callback, ret.cancel, ret.context);\r\n        }\r\n        else {\r\n            var callbacks = {};\r\n            callbacks[eventType] = callback;\r\n            this.onChildEvent(callbacks, ret.cancel, ret.context);\r\n        }\r\n        return callback;\r\n    };\r\n    /**\r\n     * @param {!function(!DataSnapshot)} callback\r\n     * @param {?function(Error)} cancelCallback\r\n     * @param {?Object} context\r\n     * @protected\r\n     */\r\n    Query.prototype.onValueEvent = function (callback, cancelCallback, context) {\r\n        var container = new ValueEventRegistration(callback, cancelCallback || null, context || null);\r\n        this.repo.addEventCallbackForQuery(this, container);\r\n    };\r\n    /**\r\n     * @param {!Object.<string, !function(!DataSnapshot, ?string)>} callbacks\r\n     * @param {?function(Error)} cancelCallback\r\n     * @param {?Object} context\r\n     * @protected\r\n     */\r\n    Query.prototype.onChildEvent = function (callbacks, cancelCallback, context) {\r\n        var container = new ChildEventRegistration(callbacks, cancelCallback, context);\r\n        this.repo.addEventCallbackForQuery(this, container);\r\n    };\r\n    /**\r\n     * @param {string=} eventType\r\n     * @param {(function(!DataSnapshot, ?string=))=} callback\r\n     * @param {Object=} context\r\n     */\r\n    Query.prototype.off = function (eventType, callback, context) {\r\n        util.validateArgCount('Query.off', 0, 3, arguments.length);\r\n        validateEventType('Query.off', 1, eventType, true);\r\n        util.validateCallback('Query.off', 2, callback, true);\r\n        util.validateContextObject('Query.off', 3, context, true);\r\n        var container = null;\r\n        var callbacks = null;\r\n        if (eventType === 'value') {\r\n            var valueCallback = callback || null;\r\n            container = new ValueEventRegistration(valueCallback, null, context || null);\r\n        }\r\n        else if (eventType) {\r\n            if (callback) {\r\n                callbacks = {};\r\n                callbacks[eventType] = callback;\r\n            }\r\n            container = new ChildEventRegistration(callbacks, null, context || null);\r\n        }\r\n        this.repo.removeEventCallbackForQuery(this, container);\r\n    };\r\n    /**\r\n     * Attaches a listener, waits for the first event, and then removes the listener\r\n     * @param {!string} eventType\r\n     * @param {!function(!DataSnapshot, string=)} userCallback\r\n     * @param cancelOrContext\r\n     * @param context\r\n     * @return {!firebase.Promise}\r\n     */\r\n    Query.prototype.once = function (eventType, userCallback, cancelOrContext, context) {\r\n        var _this = this;\r\n        util.validateArgCount('Query.once', 1, 4, arguments.length);\r\n        validateEventType('Query.once', 1, eventType, false);\r\n        util.validateCallback('Query.once', 2, userCallback, true);\r\n        var ret = Query.getCancelAndContextArgs_('Query.once', cancelOrContext, context);\r\n        // TODO: Implement this more efficiently (in particular, use 'get' wire protocol for 'value' event)\r\n        // TODO: consider actually wiring the callbacks into the promise. We cannot do this without a breaking change\r\n        // because the API currently expects callbacks will be called synchronously if the data is cached, but this is\r\n        // against the Promise specification.\r\n        var firstCall = true;\r\n        var deferred = new util.Deferred();\r\n        // A dummy error handler in case a user wasn't expecting promises\r\n        deferred.promise.catch(function () { });\r\n        var onceCallback = function (snapshot) {\r\n            // NOTE: Even though we unsubscribe, we may get called multiple times if a single action (e.g. set() with JSON)\r\n            // triggers multiple events (e.g. child_added or child_changed).\r\n            if (firstCall) {\r\n                firstCall = false;\r\n                _this.off(eventType, onceCallback);\r\n                if (userCallback) {\r\n                    userCallback.bind(ret.context)(snapshot);\r\n                }\r\n                deferred.resolve(snapshot);\r\n            }\r\n        };\r\n        this.on(eventType, onceCallback, \r\n        /*cancel=*/ function (err) {\r\n            _this.off(eventType, onceCallback);\r\n            if (ret.cancel)\r\n                ret.cancel.bind(ret.context)(err);\r\n            deferred.reject(err);\r\n        });\r\n        return deferred.promise;\r\n    };\r\n    /**\r\n     * Set a limit and anchor it to the start of the window.\r\n     * @param {!number} limit\r\n     * @return {!Query}\r\n     */\r\n    Query.prototype.limitToFirst = function (limit) {\r\n        util.validateArgCount('Query.limitToFirst', 1, 1, arguments.length);\r\n        if (typeof limit !== 'number' ||\r\n            Math.floor(limit) !== limit ||\r\n            limit <= 0) {\r\n            throw new Error('Query.limitToFirst: First argument must be a positive integer.');\r\n        }\r\n        if (this.queryParams_.hasLimit()) {\r\n            throw new Error('Query.limitToFirst: Limit was already set (by another call to limit, ' +\r\n                'limitToFirst, or limitToLast).');\r\n        }\r\n        return new Query(this.repo, this.path, this.queryParams_.limitToFirst(limit), this.orderByCalled_);\r\n    };\r\n    /**\r\n     * Set a limit and anchor it to the end of the window.\r\n     * @param {!number} limit\r\n     * @return {!Query}\r\n     */\r\n    Query.prototype.limitToLast = function (limit) {\r\n        util.validateArgCount('Query.limitToLast', 1, 1, arguments.length);\r\n        if (typeof limit !== 'number' ||\r\n            Math.floor(limit) !== limit ||\r\n            limit <= 0) {\r\n            throw new Error('Query.limitToLast: First argument must be a positive integer.');\r\n        }\r\n        if (this.queryParams_.hasLimit()) {\r\n            throw new Error('Query.limitToLast: Limit was already set (by another call to limit, ' +\r\n                'limitToFirst, or limitToLast).');\r\n        }\r\n        return new Query(this.repo, this.path, this.queryParams_.limitToLast(limit), this.orderByCalled_);\r\n    };\r\n    /**\r\n     * Given a child path, return a new query ordered by the specified grandchild path.\r\n     * @param {!string} path\r\n     * @return {!Query}\r\n     */\r\n    Query.prototype.orderByChild = function (path) {\r\n        util.validateArgCount('Query.orderByChild', 1, 1, arguments.length);\r\n        if (path === '$key') {\r\n            throw new Error('Query.orderByChild: \"$key\" is invalid.  Use Query.orderByKey() instead.');\r\n        }\r\n        else if (path === '$priority') {\r\n            throw new Error('Query.orderByChild: \"$priority\" is invalid.  Use Query.orderByPriority() instead.');\r\n        }\r\n        else if (path === '$value') {\r\n            throw new Error('Query.orderByChild: \"$value\" is invalid.  Use Query.orderByValue() instead.');\r\n        }\r\n        validatePathString('Query.orderByChild', 1, path, false);\r\n        this.validateNoPreviousOrderByCall_('Query.orderByChild');\r\n        var parsedPath = new Path(path);\r\n        if (parsedPath.isEmpty()) {\r\n            throw new Error('Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.');\r\n        }\r\n        var index = new PathIndex(parsedPath);\r\n        var newParams = this.queryParams_.orderBy(index);\r\n        Query.validateQueryEndpoints_(newParams);\r\n        return new Query(this.repo, this.path, newParams, /*orderByCalled=*/ true);\r\n    };\r\n    /**\r\n     * Return a new query ordered by the KeyIndex\r\n     * @return {!Query}\r\n     */\r\n    Query.prototype.orderByKey = function () {\r\n        util.validateArgCount('Query.orderByKey', 0, 0, arguments.length);\r\n        this.validateNoPreviousOrderByCall_('Query.orderByKey');\r\n        var newParams = this.queryParams_.orderBy(KEY_INDEX);\r\n        Query.validateQueryEndpoints_(newParams);\r\n        return new Query(this.repo, this.path, newParams, /*orderByCalled=*/ true);\r\n    };\r\n    /**\r\n     * Return a new query ordered by the PriorityIndex\r\n     * @return {!Query}\r\n     */\r\n    Query.prototype.orderByPriority = function () {\r\n        util.validateArgCount('Query.orderByPriority', 0, 0, arguments.length);\r\n        this.validateNoPreviousOrderByCall_('Query.orderByPriority');\r\n        var newParams = this.queryParams_.orderBy(PRIORITY_INDEX);\r\n        Query.validateQueryEndpoints_(newParams);\r\n        return new Query(this.repo, this.path, newParams, /*orderByCalled=*/ true);\r\n    };\r\n    /**\r\n     * Return a new query ordered by the ValueIndex\r\n     * @return {!Query}\r\n     */\r\n    Query.prototype.orderByValue = function () {\r\n        util.validateArgCount('Query.orderByValue', 0, 0, arguments.length);\r\n        this.validateNoPreviousOrderByCall_('Query.orderByValue');\r\n        var newParams = this.queryParams_.orderBy(VALUE_INDEX);\r\n        Query.validateQueryEndpoints_(newParams);\r\n        return new Query(this.repo, this.path, newParams, /*orderByCalled=*/ true);\r\n    };\r\n    /**\r\n     * @param {number|string|boolean|null} value\r\n     * @param {?string=} name\r\n     * @return {!Query}\r\n     */\r\n    Query.prototype.startAt = function (value, name) {\r\n        if (value === void 0) { value = null; }\r\n        util.validateArgCount('Query.startAt', 0, 2, arguments.length);\r\n        validateFirebaseDataArg('Query.startAt', 1, value, this.path, true);\r\n        validateKey('Query.startAt', 2, name, true);\r\n        var newParams = this.queryParams_.startAt(value, name);\r\n        Query.validateLimit_(newParams);\r\n        Query.validateQueryEndpoints_(newParams);\r\n        if (this.queryParams_.hasStart()) {\r\n            throw new Error('Query.startAt: Starting point was already set (by another call to startAt ' +\r\n                'or equalTo).');\r\n        }\r\n        // Calling with no params tells us to start at the beginning.\r\n        if (value === undefined) {\r\n            value = null;\r\n            name = null;\r\n        }\r\n        return new Query(this.repo, this.path, newParams, this.orderByCalled_);\r\n    };\r\n    /**\r\n     * @param {number|string|boolean|null} value\r\n     * @param {?string=} name\r\n     * @return {!Query}\r\n     */\r\n    Query.prototype.endAt = function (value, name) {\r\n        if (value === void 0) { value = null; }\r\n        util.validateArgCount('Query.endAt', 0, 2, arguments.length);\r\n        validateFirebaseDataArg('Query.endAt', 1, value, this.path, true);\r\n        validateKey('Query.endAt', 2, name, true);\r\n        var newParams = this.queryParams_.endAt(value, name);\r\n        Query.validateLimit_(newParams);\r\n        Query.validateQueryEndpoints_(newParams);\r\n        if (this.queryParams_.hasEnd()) {\r\n            throw new Error('Query.endAt: Ending point was already set (by another call to endAt or ' +\r\n                'equalTo).');\r\n        }\r\n        return new Query(this.repo, this.path, newParams, this.orderByCalled_);\r\n    };\r\n    /**\r\n     * Load the selection of children with exactly the specified value, and, optionally,\r\n     * the specified name.\r\n     * @param {number|string|boolean|null} value\r\n     * @param {string=} name\r\n     * @return {!Query}\r\n     */\r\n    Query.prototype.equalTo = function (value, name) {\r\n        util.validateArgCount('Query.equalTo', 1, 2, arguments.length);\r\n        validateFirebaseDataArg('Query.equalTo', 1, value, this.path, false);\r\n        validateKey('Query.equalTo', 2, name, true);\r\n        if (this.queryParams_.hasStart()) {\r\n            throw new Error('Query.equalTo: Starting point was already set (by another call to startAt or ' +\r\n                'equalTo).');\r\n        }\r\n        if (this.queryParams_.hasEnd()) {\r\n            throw new Error('Query.equalTo: Ending point was already set (by another call to endAt or ' +\r\n                'equalTo).');\r\n        }\r\n        return this.startAt(value, name).endAt(value, name);\r\n    };\r\n    /**\r\n     * @return {!string} URL for this location.\r\n     */\r\n    Query.prototype.toString = function () {\r\n        util.validateArgCount('Query.toString', 0, 0, arguments.length);\r\n        return this.repo.toString() + this.path.toUrlEncodedString();\r\n    };\r\n    // Do not create public documentation. This is intended to make JSON serialization work but is otherwise unnecessary\r\n    // for end-users.\r\n    Query.prototype.toJSON = function () {\r\n        // An optional spacer argument is unnecessary for a string.\r\n        util.validateArgCount('Query.toJSON', 0, 1, arguments.length);\r\n        return this.toString();\r\n    };\r\n    /**\r\n     * An object representation of the query parameters used by this Query.\r\n     * @return {!Object}\r\n     */\r\n    Query.prototype.queryObject = function () {\r\n        return this.queryParams_.getQueryObject();\r\n    };\r\n    /**\r\n     * @return {!string}\r\n     */\r\n    Query.prototype.queryIdentifier = function () {\r\n        var obj = this.queryObject();\r\n        var id = ObjectToUniqueKey(obj);\r\n        return id === '{}' ? 'default' : id;\r\n    };\r\n    /**\r\n     * Return true if this query and the provided query are equivalent; otherwise, return false.\r\n     * @param {Query} other\r\n     * @return {boolean}\r\n     */\r\n    Query.prototype.isEqual = function (other) {\r\n        util.validateArgCount('Query.isEqual', 1, 1, arguments.length);\r\n        if (!(other instanceof Query)) {\r\n            var error$$1 = 'Query.isEqual failed: First argument must be an instance of firebase.database.Query.';\r\n            throw new Error(error$$1);\r\n        }\r\n        var sameRepo = this.repo === other.repo;\r\n        var samePath = this.path.equals(other.path);\r\n        var sameQueryIdentifier = this.queryIdentifier() === other.queryIdentifier();\r\n        return sameRepo && samePath && sameQueryIdentifier;\r\n    };\r\n    /**\r\n     * Helper used by .on and .once to extract the context and or cancel arguments.\r\n     * @param {!string} fnName The function name (on or once)\r\n     * @param {(function(Error)|Object)=} cancelOrContext\r\n     * @param {Object=} context\r\n     * @return {{cancel: ?function(Error), context: ?Object}}\r\n     * @private\r\n     */\r\n    Query.getCancelAndContextArgs_ = function (fnName, cancelOrContext, context) {\r\n        var ret = { cancel: null, context: null };\r\n        if (cancelOrContext && context) {\r\n            ret.cancel = cancelOrContext;\r\n            util.validateCallback(fnName, 3, ret.cancel, true);\r\n            ret.context = context;\r\n            util.validateContextObject(fnName, 4, ret.context, true);\r\n        }\r\n        else if (cancelOrContext) {\r\n            // we have either a cancel callback or a context.\r\n            if (typeof cancelOrContext === 'object' && cancelOrContext !== null) {\r\n                // it's a context!\r\n                ret.context = cancelOrContext;\r\n            }\r\n            else if (typeof cancelOrContext === 'function') {\r\n                ret.cancel = cancelOrContext;\r\n            }\r\n            else {\r\n                throw new Error(util.errorPrefix(fnName, 3, true) +\r\n                    ' must either be a cancel callback or a context object.');\r\n            }\r\n        }\r\n        return ret;\r\n    };\r\n    Object.defineProperty(Query.prototype, \"ref\", {\r\n        get: function () {\r\n            return this.getRef();\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return Query;\r\n}());\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Implements a set with a count of elements.\r\n *\r\n * @template K, V\r\n */\r\nvar CountedSet = /** @class */ (function () {\r\n    function CountedSet() {\r\n        this.set = {};\r\n    }\r\n    /**\r\n     * @param {!K} item\r\n     * @param {V} val\r\n     */\r\n    CountedSet.prototype.add = function (item, val) {\r\n        this.set[item] = val !== null ? val : true;\r\n    };\r\n    /**\r\n     * @param {!K} key\r\n     * @return {boolean}\r\n     */\r\n    CountedSet.prototype.contains = function (key) {\r\n        return util.contains(this.set, key);\r\n    };\r\n    /**\r\n     * @param {!K} item\r\n     * @return {V}\r\n     */\r\n    CountedSet.prototype.get = function (item) {\r\n        return this.contains(item) ? this.set[item] : undefined;\r\n    };\r\n    /**\r\n     * @param {!K} item\r\n     */\r\n    CountedSet.prototype.remove = function (item) {\r\n        delete this.set[item];\r\n    };\r\n    /**\r\n     * Deletes everything in the set\r\n     */\r\n    CountedSet.prototype.clear = function () {\r\n        this.set = {};\r\n    };\r\n    /**\r\n     * True if there's nothing in the set\r\n     * @return {boolean}\r\n     */\r\n    CountedSet.prototype.isEmpty = function () {\r\n        return util.isEmpty(this.set);\r\n    };\r\n    /**\r\n     * @return {number} The number of items in the set\r\n     */\r\n    CountedSet.prototype.count = function () {\r\n        return util.getCount(this.set);\r\n    };\r\n    /**\r\n     * Run a function on each k,v pair in the set\r\n     * @param {function(K, V)} fn\r\n     */\r\n    CountedSet.prototype.each = function (fn) {\r\n        util.forEach(this.set, function (k, v) { return fn(k, v); });\r\n    };\r\n    /**\r\n     * Mostly for debugging\r\n     * @return {Array.<K>} The keys present in this CountedSet\r\n     */\r\n    CountedSet.prototype.keys = function () {\r\n        var keys = [];\r\n        util.forEach(this.set, function (k) {\r\n            keys.push(k);\r\n        });\r\n        return keys;\r\n    };\r\n    return CountedSet;\r\n}());\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Helper class to store a sparse set of snapshots.\r\n *\r\n * @constructor\r\n */\r\nvar SparseSnapshotTree = /** @class */ (function () {\r\n    function SparseSnapshotTree() {\r\n        /**\r\n         * @private\r\n         * @type {Node}\r\n         */\r\n        this.value_ = null;\r\n        /**\r\n         * @private\r\n         * @type {CountedSet}\r\n         */\r\n        this.children_ = null;\r\n    }\r\n    /**\r\n     * Gets the node stored at the given path if one exists.\r\n     *\r\n     * @param {!Path} path Path to look up snapshot for.\r\n     * @return {?Node} The retrieved node, or null.\r\n     */\r\n    SparseSnapshotTree.prototype.find = function (path) {\r\n        if (this.value_ != null) {\r\n            return this.value_.getChild(path);\r\n        }\r\n        else if (!path.isEmpty() && this.children_ != null) {\r\n            var childKey = path.getFront();\r\n            path = path.popFront();\r\n            if (this.children_.contains(childKey)) {\r\n                var childTree = this.children_.get(childKey);\r\n                return childTree.find(path);\r\n            }\r\n            else {\r\n                return null;\r\n            }\r\n        }\r\n        else {\r\n            return null;\r\n        }\r\n    };\r\n    /**\r\n     * Stores the given node at the specified path. If there is already a node\r\n     * at a shallower path, it merges the new data into that snapshot node.\r\n     *\r\n     * @param {!Path} path Path to look up snapshot for.\r\n     * @param {!Node} data The new data, or null.\r\n     */\r\n    SparseSnapshotTree.prototype.remember = function (path, data) {\r\n        if (path.isEmpty()) {\r\n            this.value_ = data;\r\n            this.children_ = null;\r\n        }\r\n        else if (this.value_ !== null) {\r\n            this.value_ = this.value_.updateChild(path, data);\r\n        }\r\n        else {\r\n            if (this.children_ == null) {\r\n                this.children_ = new CountedSet();\r\n            }\r\n            var childKey = path.getFront();\r\n            if (!this.children_.contains(childKey)) {\r\n                this.children_.add(childKey, new SparseSnapshotTree());\r\n            }\r\n            var child = this.children_.get(childKey);\r\n            path = path.popFront();\r\n            child.remember(path, data);\r\n        }\r\n    };\r\n    /**\r\n     * Purge the data at path from the cache.\r\n     *\r\n     * @param {!Path} path Path to look up snapshot for.\r\n     * @return {boolean} True if this node should now be removed.\r\n     */\r\n    SparseSnapshotTree.prototype.forget = function (path) {\r\n        if (path.isEmpty()) {\r\n            this.value_ = null;\r\n            this.children_ = null;\r\n            return true;\r\n        }\r\n        else {\r\n            if (this.value_ !== null) {\r\n                if (this.value_.isLeafNode()) {\r\n                    // We're trying to forget a node that doesn't exist\r\n                    return false;\r\n                }\r\n                else {\r\n                    var value = this.value_;\r\n                    this.value_ = null;\r\n                    var self_1 = this;\r\n                    value.forEachChild(PRIORITY_INDEX, function (key, tree) {\r\n                        self_1.remember(new Path(key), tree);\r\n                    });\r\n                    return this.forget(path);\r\n                }\r\n            }\r\n            else if (this.children_ !== null) {\r\n                var childKey = path.getFront();\r\n                path = path.popFront();\r\n                if (this.children_.contains(childKey)) {\r\n                    var safeToRemove = this.children_.get(childKey).forget(path);\r\n                    if (safeToRemove) {\r\n                        this.children_.remove(childKey);\r\n                    }\r\n                }\r\n                if (this.children_.isEmpty()) {\r\n                    this.children_ = null;\r\n                    return true;\r\n                }\r\n                else {\r\n                    return false;\r\n                }\r\n            }\r\n            else {\r\n                return true;\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * Recursively iterates through all of the stored tree and calls the\r\n     * callback on each one.\r\n     *\r\n     * @param {!Path} prefixPath Path to look up node for.\r\n     * @param {!Function} func The function to invoke for each tree.\r\n     */\r\n    SparseSnapshotTree.prototype.forEachTree = function (prefixPath, func) {\r\n        if (this.value_ !== null) {\r\n            func(prefixPath, this.value_);\r\n        }\r\n        else {\r\n            this.forEachChild(function (key, tree) {\r\n                var path = new Path(prefixPath.toString() + '/' + key);\r\n                tree.forEachTree(path, func);\r\n            });\r\n        }\r\n    };\r\n    /**\r\n     * Iterates through each immediate child and triggers the callback.\r\n     *\r\n     * @param {!Function} func The function to invoke for each child.\r\n     */\r\n    SparseSnapshotTree.prototype.forEachChild = function (func) {\r\n        if (this.children_ !== null) {\r\n            this.children_.each(function (key, tree) {\r\n                func(key, tree);\r\n            });\r\n        }\r\n    };\r\n    return SparseSnapshotTree;\r\n}());\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Generate placeholders for deferred values.\r\n * @param {?Object} values\r\n * @return {!Object}\r\n */\r\nvar generateWithValues = function (values) {\r\n    values = values || {};\r\n    values['timestamp'] = values['timestamp'] || new Date().getTime();\r\n    return values;\r\n};\r\n/**\r\n * Value to use when firing local events. When writing server values, fire\r\n * local events with an approximate value, otherwise return value as-is.\r\n * @param {(Object|string|number|boolean)} value\r\n * @param {!Object} serverValues\r\n * @return {!(string|number|boolean)}\r\n */\r\nvar resolveDeferredValue = function (value, serverValues) {\r\n    if (!value || typeof value !== 'object') {\r\n        return value;\r\n    }\r\n    else {\r\n        util.assert('.sv' in value, 'Unexpected leaf node or priority contents');\r\n        return serverValues[value['.sv']];\r\n    }\r\n};\r\n/**\r\n * Recursively replace all deferred values and priorities in the tree with the\r\n * specified generated replacement values.\r\n * @param {!SparseSnapshotTree} tree\r\n * @param {!Object} serverValues\r\n * @return {!SparseSnapshotTree}\r\n */\r\nvar resolveDeferredValueTree = function (tree, serverValues) {\r\n    var resolvedTree = new SparseSnapshotTree();\r\n    tree.forEachTree(new Path(''), function (path, node) {\r\n        resolvedTree.remember(path, resolveDeferredValueSnapshot(node, serverValues));\r\n    });\r\n    return resolvedTree;\r\n};\r\n/**\r\n * Recursively replace all deferred values and priorities in the node with the\r\n * specified generated replacement values.  If there are no server values in the node,\r\n * it'll be returned as-is.\r\n * @param {!Node} node\r\n * @param {!Object} serverValues\r\n * @return {!Node}\r\n */\r\nvar resolveDeferredValueSnapshot = function (node, serverValues) {\r\n    var rawPri = node.getPriority().val();\r\n    var priority = resolveDeferredValue(rawPri, serverValues);\r\n    var newNode;\r\n    if (node.isLeafNode()) {\r\n        var leafNode = node;\r\n        var value = resolveDeferredValue(leafNode.getValue(), serverValues);\r\n        if (value !== leafNode.getValue() ||\r\n            priority !== leafNode.getPriority().val()) {\r\n            return new LeafNode(value, nodeFromJSON$1(priority));\r\n        }\r\n        else {\r\n            return node;\r\n        }\r\n    }\r\n    else {\r\n        var childrenNode = node;\r\n        newNode = childrenNode;\r\n        if (priority !== childrenNode.getPriority().val()) {\r\n            newNode = newNode.updatePriority(new LeafNode(priority));\r\n        }\r\n        childrenNode.forEachChild(PRIORITY_INDEX, function (childName, childNode) {\r\n            var newChildNode = resolveDeferredValueSnapshot(childNode, serverValues);\r\n            if (newChildNode !== childNode) {\r\n                newNode = newNode.updateImmediateChild(childName, newChildNode);\r\n            }\r\n        });\r\n        return newNode;\r\n    }\r\n};\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n *\r\n * @enum\r\n */\r\nvar OperationType;\r\n(function (OperationType) {\r\n    OperationType[OperationType[\"OVERWRITE\"] = 0] = \"OVERWRITE\";\r\n    OperationType[OperationType[\"MERGE\"] = 1] = \"MERGE\";\r\n    OperationType[OperationType[\"ACK_USER_WRITE\"] = 2] = \"ACK_USER_WRITE\";\r\n    OperationType[OperationType[\"LISTEN_COMPLETE\"] = 3] = \"LISTEN_COMPLETE\";\r\n})(OperationType || (OperationType = {}));\r\n/**\r\n * @param {boolean} fromUser\r\n * @param {boolean} fromServer\r\n * @param {?string} queryId\r\n * @param {boolean} tagged\r\n * @constructor\r\n */\r\nvar OperationSource = /** @class */ (function () {\r\n    function OperationSource(fromUser, fromServer, queryId, tagged) {\r\n        this.fromUser = fromUser;\r\n        this.fromServer = fromServer;\r\n        this.queryId = queryId;\r\n        this.tagged = tagged;\r\n        util.assert(!tagged || fromServer, 'Tagged queries must be from server.');\r\n    }\r\n    /**\r\n     * @const\r\n     * @type {!OperationSource}\r\n     */\r\n    OperationSource.User = new OperationSource(\r\n    /*fromUser=*/ true, false, null, \r\n    /*tagged=*/ false);\r\n    /**\r\n     * @const\r\n     * @type {!OperationSource}\r\n     */\r\n    OperationSource.Server = new OperationSource(false, \r\n    /*fromServer=*/ true, null, \r\n    /*tagged=*/ false);\r\n    /**\r\n     * @param {string} queryId\r\n     * @return {!OperationSource}\r\n     */\r\n    OperationSource.forServerTaggedQuery = function (queryId) {\r\n        return new OperationSource(false, \r\n        /*fromServer=*/ true, queryId, \r\n        /*tagged=*/ true);\r\n    };\r\n    return OperationSource;\r\n}());\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nvar AckUserWrite = /** @class */ (function () {\r\n    /**\r\n     *\r\n     * @param {!Path} path\r\n     * @param {!ImmutableTree<!boolean>} affectedTree A tree containing true for each affected path. Affected paths can't overlap.\r\n     * @param {!boolean} revert\r\n     */\r\n    function AckUserWrite(\r\n    /**@inheritDoc */ path, \r\n    /**@inheritDoc */ affectedTree, \r\n    /**@inheritDoc */ revert) {\r\n        this.path = path;\r\n        this.affectedTree = affectedTree;\r\n        this.revert = revert;\r\n        /** @inheritDoc */\r\n        this.type = OperationType.ACK_USER_WRITE;\r\n        /** @inheritDoc */\r\n        this.source = OperationSource.User;\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    AckUserWrite.prototype.operationForChild = function (childName) {\r\n        if (!this.path.isEmpty()) {\r\n            util.assert(this.path.getFront() === childName, 'operationForChild called for unrelated child.');\r\n            return new AckUserWrite(this.path.popFront(), this.affectedTree, this.revert);\r\n        }\r\n        else if (this.affectedTree.value != null) {\r\n            util.assert(this.affectedTree.children.isEmpty(), 'affectedTree should not have overlapping affected paths.');\r\n            // All child locations are affected as well; just return same operation.\r\n            return this;\r\n        }\r\n        else {\r\n            var childTree = this.affectedTree.subtree(new Path(childName));\r\n            return new AckUserWrite(Path.Empty, childTree, this.revert);\r\n        }\r\n    };\r\n    return AckUserWrite;\r\n}());\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nvar emptyChildrenSingleton;\r\n/**\r\n * Singleton empty children collection.\r\n *\r\n * @const\r\n * @type {!SortedMap.<string, !ImmutableTree.<?>>}\r\n */\r\nvar EmptyChildren = function () {\r\n    if (!emptyChildrenSingleton) {\r\n        emptyChildrenSingleton = new SortedMap(stringCompare);\r\n    }\r\n    return emptyChildrenSingleton;\r\n};\r\n/**\r\n * A tree with immutable elements.\r\n */\r\nvar ImmutableTree = /** @class */ (function () {\r\n    /**\r\n     * @template T\r\n     * @param {?T} value\r\n     * @param {SortedMap.<string, !ImmutableTree.<T>>=} children\r\n     */\r\n    function ImmutableTree(value, children) {\r\n        if (children === void 0) { children = EmptyChildren(); }\r\n        this.value = value;\r\n        this.children = children;\r\n    }\r\n    /**\r\n     * @template T\r\n     * @param {!Object.<string, !T>} obj\r\n     * @return {!ImmutableTree.<!T>}\r\n     */\r\n    ImmutableTree.fromObject = function (obj) {\r\n        var tree = ImmutableTree.Empty;\r\n        util.forEach(obj, function (childPath, childSnap) {\r\n            tree = tree.set(new Path(childPath), childSnap);\r\n        });\r\n        return tree;\r\n    };\r\n    /**\r\n     * True if the value is empty and there are no children\r\n     * @return {boolean}\r\n     */\r\n    ImmutableTree.prototype.isEmpty = function () {\r\n        return this.value === null && this.children.isEmpty();\r\n    };\r\n    /**\r\n     * Given a path and predicate, return the first node and the path to that node\r\n     * where the predicate returns true.\r\n     *\r\n     * TODO Do a perf test -- If we're creating a bunch of {path: value:} objects\r\n     * on the way back out, it may be better to pass down a pathSoFar obj.\r\n     *\r\n     * @param {!Path} relativePath The remainder of the path\r\n     * @param {function(T):boolean} predicate The predicate to satisfy to return a\r\n     *   node\r\n     * @return {?{path:!Path, value:!T}}\r\n     */\r\n    ImmutableTree.prototype.findRootMostMatchingPathAndValue = function (relativePath, predicate) {\r\n        if (this.value != null && predicate(this.value)) {\r\n            return { path: Path.Empty, value: this.value };\r\n        }\r\n        else {\r\n            if (relativePath.isEmpty()) {\r\n                return null;\r\n            }\r\n            else {\r\n                var front = relativePath.getFront();\r\n                var child = this.children.get(front);\r\n                if (child !== null) {\r\n                    var childExistingPathAndValue = child.findRootMostMatchingPathAndValue(relativePath.popFront(), predicate);\r\n                    if (childExistingPathAndValue != null) {\r\n                        var fullPath = new Path(front).child(childExistingPathAndValue.path);\r\n                        return { path: fullPath, value: childExistingPathAndValue.value };\r\n                    }\r\n                    else {\r\n                        return null;\r\n                    }\r\n                }\r\n                else {\r\n                    return null;\r\n                }\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * Find, if it exists, the shortest subpath of the given path that points a defined\r\n     * value in the tree\r\n     * @param {!Path} relativePath\r\n     * @return {?{path: !Path, value: !T}}\r\n     */\r\n    ImmutableTree.prototype.findRootMostValueAndPath = function (relativePath) {\r\n        return this.findRootMostMatchingPathAndValue(relativePath, function () { return true; });\r\n    };\r\n    /**\r\n     * @param {!Path} relativePath\r\n     * @return {!ImmutableTree.<T>} The subtree at the given path\r\n     */\r\n    ImmutableTree.prototype.subtree = function (relativePath) {\r\n        if (relativePath.isEmpty()) {\r\n            return this;\r\n        }\r\n        else {\r\n            var front = relativePath.getFront();\r\n            var childTree = this.children.get(front);\r\n            if (childTree !== null) {\r\n                return childTree.subtree(relativePath.popFront());\r\n            }\r\n            else {\r\n                return ImmutableTree.Empty;\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * Sets a value at the specified path.\r\n     *\r\n     * @param {!Path} relativePath Path to set value at.\r\n     * @param {?T} toSet Value to set.\r\n     * @return {!ImmutableTree.<T>} Resulting tree.\r\n     */\r\n    ImmutableTree.prototype.set = function (relativePath, toSet) {\r\n        if (relativePath.isEmpty()) {\r\n            return new ImmutableTree(toSet, this.children);\r\n        }\r\n        else {\r\n            var front = relativePath.getFront();\r\n            var child = this.children.get(front) || ImmutableTree.Empty;\r\n            var newChild = child.set(relativePath.popFront(), toSet);\r\n            var newChildren = this.children.insert(front, newChild);\r\n            return new ImmutableTree(this.value, newChildren);\r\n        }\r\n    };\r\n    /**\r\n     * Removes the value at the specified path.\r\n     *\r\n     * @param {!Path} relativePath Path to value to remove.\r\n     * @return {!ImmutableTree.<T>} Resulting tree.\r\n     */\r\n    ImmutableTree.prototype.remove = function (relativePath) {\r\n        if (relativePath.isEmpty()) {\r\n            if (this.children.isEmpty()) {\r\n                return ImmutableTree.Empty;\r\n            }\r\n            else {\r\n                return new ImmutableTree(null, this.children);\r\n            }\r\n        }\r\n        else {\r\n            var front = relativePath.getFront();\r\n            var child = this.children.get(front);\r\n            if (child) {\r\n                var newChild = child.remove(relativePath.popFront());\r\n                var newChildren = void 0;\r\n                if (newChild.isEmpty()) {\r\n                    newChildren = this.children.remove(front);\r\n                }\r\n                else {\r\n                    newChildren = this.children.insert(front, newChild);\r\n                }\r\n                if (this.value === null && newChildren.isEmpty()) {\r\n                    return ImmutableTree.Empty;\r\n                }\r\n                else {\r\n                    return new ImmutableTree(this.value, newChildren);\r\n                }\r\n            }\r\n            else {\r\n                return this;\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * Gets a value from the tree.\r\n     *\r\n     * @param {!Path} relativePath Path to get value for.\r\n     * @return {?T} Value at path, or null.\r\n     */\r\n    ImmutableTree.prototype.get = function (relativePath) {\r\n        if (relativePath.isEmpty()) {\r\n            return this.value;\r\n        }\r\n        else {\r\n            var front = relativePath.getFront();\r\n            var child = this.children.get(front);\r\n            if (child) {\r\n                return child.get(relativePath.popFront());\r\n            }\r\n            else {\r\n                return null;\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * Replace the subtree at the specified path with the given new tree.\r\n     *\r\n     * @param {!Path} relativePath Path to replace subtree for.\r\n     * @param {!ImmutableTree} newTree New tree.\r\n     * @return {!ImmutableTree} Resulting tree.\r\n     */\r\n    ImmutableTree.prototype.setTree = function (relativePath, newTree) {\r\n        if (relativePath.isEmpty()) {\r\n            return newTree;\r\n        }\r\n        else {\r\n            var front = relativePath.getFront();\r\n            var child = this.children.get(front) || ImmutableTree.Empty;\r\n            var newChild = child.setTree(relativePath.popFront(), newTree);\r\n            var newChildren = void 0;\r\n            if (newChild.isEmpty()) {\r\n                newChildren = this.children.remove(front);\r\n            }\r\n            else {\r\n                newChildren = this.children.insert(front, newChild);\r\n            }\r\n            return new ImmutableTree(this.value, newChildren);\r\n        }\r\n    };\r\n    /**\r\n     * Performs a depth first fold on this tree. Transforms a tree into a single\r\n     * value, given a function that operates on the path to a node, an optional\r\n     * current value, and a map of child names to folded subtrees\r\n     * @template V\r\n     * @param {function(Path, ?T, Object.<string, V>):V} fn\r\n     * @return {V}\r\n     */\r\n    ImmutableTree.prototype.fold = function (fn) {\r\n        return this.fold_(Path.Empty, fn);\r\n    };\r\n    /**\r\n     * Recursive helper for public-facing fold() method\r\n     * @template V\r\n     * @param {!Path} pathSoFar\r\n     * @param {function(Path, ?T, Object.<string, V>):V} fn\r\n     * @return {V}\r\n     * @private\r\n     */\r\n    ImmutableTree.prototype.fold_ = function (pathSoFar, fn) {\r\n        var accum = {};\r\n        this.children.inorderTraversal(function (childKey, childTree) {\r\n            accum[childKey] = childTree.fold_(pathSoFar.child(childKey), fn);\r\n        });\r\n        return fn(pathSoFar, this.value, accum);\r\n    };\r\n    /**\r\n     * Find the first matching value on the given path. Return the result of applying f to it.\r\n     * @template V\r\n     * @param {!Path} path\r\n     * @param {!function(!Path, !T):?V} f\r\n     * @return {?V}\r\n     */\r\n    ImmutableTree.prototype.findOnPath = function (path, f) {\r\n        return this.findOnPath_(path, Path.Empty, f);\r\n    };\r\n    ImmutableTree.prototype.findOnPath_ = function (pathToFollow, pathSoFar, f) {\r\n        var result = this.value ? f(pathSoFar, this.value) : false;\r\n        if (result) {\r\n            return result;\r\n        }\r\n        else {\r\n            if (pathToFollow.isEmpty()) {\r\n                return null;\r\n            }\r\n            else {\r\n                var front = pathToFollow.getFront();\r\n                var nextChild = this.children.get(front);\r\n                if (nextChild) {\r\n                    return nextChild.findOnPath_(pathToFollow.popFront(), pathSoFar.child(front), f);\r\n                }\r\n                else {\r\n                    return null;\r\n                }\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     *\r\n     * @param {!Path} path\r\n     * @param {!function(!Path, !T)} f\r\n     * @returns {!ImmutableTree.<T>}\r\n     */\r\n    ImmutableTree.prototype.foreachOnPath = function (path, f) {\r\n        return this.foreachOnPath_(path, Path.Empty, f);\r\n    };\r\n    ImmutableTree.prototype.foreachOnPath_ = function (pathToFollow, currentRelativePath, f) {\r\n        if (pathToFollow.isEmpty()) {\r\n            return this;\r\n        }\r\n        else {\r\n            if (this.value) {\r\n                f(currentRelativePath, this.value);\r\n            }\r\n            var front = pathToFollow.getFront();\r\n            var nextChild = this.children.get(front);\r\n            if (nextChild) {\r\n                return nextChild.foreachOnPath_(pathToFollow.popFront(), currentRelativePath.child(front), f);\r\n            }\r\n            else {\r\n                return ImmutableTree.Empty;\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * Calls the given function for each node in the tree that has a value.\r\n     *\r\n     * @param {function(!Path, !T)} f A function to be called with\r\n     *   the path from the root of the tree to a node, and the value at that node.\r\n     *   Called in depth-first order.\r\n     */\r\n    ImmutableTree.prototype.foreach = function (f) {\r\n        this.foreach_(Path.Empty, f);\r\n    };\r\n    ImmutableTree.prototype.foreach_ = function (currentRelativePath, f) {\r\n        this.children.inorderTraversal(function (childName, childTree) {\r\n            childTree.foreach_(currentRelativePath.child(childName), f);\r\n        });\r\n        if (this.value) {\r\n            f(currentRelativePath, this.value);\r\n        }\r\n    };\r\n    /**\r\n     *\r\n     * @param {function(string, !T)} f\r\n     */\r\n    ImmutableTree.prototype.foreachChild = function (f) {\r\n        this.children.inorderTraversal(function (childName, childTree) {\r\n            if (childTree.value) {\r\n                f(childName, childTree.value);\r\n            }\r\n        });\r\n    };\r\n    ImmutableTree.Empty = new ImmutableTree(null);\r\n    return ImmutableTree;\r\n}());\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * @param {!OperationSource} source\r\n * @param {!Path} path\r\n * @constructor\r\n * @implements {Operation}\r\n */\r\nvar ListenComplete = /** @class */ (function () {\r\n    function ListenComplete(source, path) {\r\n        this.source = source;\r\n        this.path = path;\r\n        /** @inheritDoc */\r\n        this.type = OperationType.LISTEN_COMPLETE;\r\n    }\r\n    ListenComplete.prototype.operationForChild = function (childName) {\r\n        if (this.path.isEmpty()) {\r\n            return new ListenComplete(this.source, Path.Empty);\r\n        }\r\n        else {\r\n            return new ListenComplete(this.source, this.path.popFront());\r\n        }\r\n    };\r\n    return ListenComplete;\r\n}());\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * @param {!OperationSource} source\r\n * @param {!Path} path\r\n * @param {!Node} snap\r\n * @constructor\r\n * @implements {Operation}\r\n */\r\nvar Overwrite = /** @class */ (function () {\r\n    function Overwrite(source, path, snap) {\r\n        this.source = source;\r\n        this.path = path;\r\n        this.snap = snap;\r\n        /** @inheritDoc */\r\n        this.type = OperationType.OVERWRITE;\r\n    }\r\n    Overwrite.prototype.operationForChild = function (childName) {\r\n        if (this.path.isEmpty()) {\r\n            return new Overwrite(this.source, Path.Empty, this.snap.getImmediateChild(childName));\r\n        }\r\n        else {\r\n            return new Overwrite(this.source, this.path.popFront(), this.snap);\r\n        }\r\n    };\r\n    return Overwrite;\r\n}());\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * @param {!OperationSource} source\r\n * @param {!Path} path\r\n * @param {!ImmutableTree.<!Node>} children\r\n * @constructor\r\n * @implements {Operation}\r\n */\r\nvar Merge = /** @class */ (function () {\r\n    function Merge(\r\n    /**@inheritDoc */ source, \r\n    /**@inheritDoc */ path, \r\n    /**@inheritDoc */ children) {\r\n        this.source = source;\r\n        this.path = path;\r\n        this.children = children;\r\n        /** @inheritDoc */\r\n        this.type = OperationType.MERGE;\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    Merge.prototype.operationForChild = function (childName) {\r\n        if (this.path.isEmpty()) {\r\n            var childTree = this.children.subtree(new Path(childName));\r\n            if (childTree.isEmpty()) {\r\n                // This child is unaffected\r\n                return null;\r\n            }\r\n            else if (childTree.value) {\r\n                // We have a snapshot for the child in question.  This becomes an overwrite of the child.\r\n                return new Overwrite(this.source, Path.Empty, childTree.value);\r\n            }\r\n            else {\r\n                // This is a merge at a deeper level\r\n                return new Merge(this.source, Path.Empty, childTree);\r\n            }\r\n        }\r\n        else {\r\n            util.assert(this.path.getFront() === childName, \"Can't get a merge for a child not on the path of the operation\");\r\n            return new Merge(this.source, this.path.popFront(), this.children);\r\n        }\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    Merge.prototype.toString = function () {\r\n        return ('Operation(' +\r\n            this.path +\r\n            ': ' +\r\n            this.source.toString() +\r\n            ' merge: ' +\r\n            this.children.toString() +\r\n            ')');\r\n    };\r\n    return Merge;\r\n}());\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * A cache node only stores complete children. Additionally it holds a flag whether the node can be considered fully\r\n * initialized in the sense that we know at one point in time this represented a valid state of the world, e.g.\r\n * initialized with data from the server, or a complete overwrite by the client. The filtered flag also tracks\r\n * whether a node potentially had children removed due to a filter.\r\n */\r\nvar CacheNode = /** @class */ (function () {\r\n    /**\r\n     * @param {!Node} node_\r\n     * @param {boolean} fullyInitialized_\r\n     * @param {boolean} filtered_\r\n     */\r\n    function CacheNode(node_, fullyInitialized_, filtered_) {\r\n        this.node_ = node_;\r\n        this.fullyInitialized_ = fullyInitialized_;\r\n        this.filtered_ = filtered_;\r\n    }\r\n    /**\r\n     * Returns whether this node was fully initialized with either server data or a complete overwrite by the client\r\n     * @return {boolean}\r\n     */\r\n    CacheNode.prototype.isFullyInitialized = function () {\r\n        return this.fullyInitialized_;\r\n    };\r\n    /**\r\n     * Returns whether this node is potentially missing children due to a filter applied to the node\r\n     * @return {boolean}\r\n     */\r\n    CacheNode.prototype.isFiltered = function () {\r\n        return this.filtered_;\r\n    };\r\n    /**\r\n     * @param {!Path} path\r\n     * @return {boolean}\r\n     */\r\n    CacheNode.prototype.isCompleteForPath = function (path) {\r\n        if (path.isEmpty()) {\r\n            return this.isFullyInitialized() && !this.filtered_;\r\n        }\r\n        var childKey = path.getFront();\r\n        return this.isCompleteForChild(childKey);\r\n    };\r\n    /**\r\n     * @param {!string} key\r\n     * @return {boolean}\r\n     */\r\n    CacheNode.prototype.isCompleteForChild = function (key) {\r\n        return ((this.isFullyInitialized() && !this.filtered_) || this.node_.hasChild(key));\r\n    };\r\n    /**\r\n     * @return {!Node}\r\n     */\r\n    CacheNode.prototype.getNode = function () {\r\n        return this.node_;\r\n    };\r\n    return CacheNode;\r\n}());\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Stores the data we have cached for a view.\r\n *\r\n * serverSnap is the cached server data, eventSnap is the cached event data (server data plus any local writes).\r\n *\r\n * @constructor\r\n */\r\nvar ViewCache = /** @class */ (function () {\r\n    /**\r\n     *\r\n     * @param {!CacheNode} eventCache_\r\n     * @param {!CacheNode} serverCache_\r\n     */\r\n    function ViewCache(eventCache_, serverCache_) {\r\n        this.eventCache_ = eventCache_;\r\n        this.serverCache_ = serverCache_;\r\n    }\r\n    /**\r\n     * @param {!Node} eventSnap\r\n     * @param {boolean} complete\r\n     * @param {boolean} filtered\r\n     * @return {!ViewCache}\r\n     */\r\n    ViewCache.prototype.updateEventSnap = function (eventSnap, complete, filtered) {\r\n        return new ViewCache(new CacheNode(eventSnap, complete, filtered), this.serverCache_);\r\n    };\r\n    /**\r\n     * @param {!Node} serverSnap\r\n     * @param {boolean} complete\r\n     * @param {boolean} filtered\r\n     * @return {!ViewCache}\r\n     */\r\n    ViewCache.prototype.updateServerSnap = function (serverSnap, complete, filtered) {\r\n        return new ViewCache(this.eventCache_, new CacheNode(serverSnap, complete, filtered));\r\n    };\r\n    /**\r\n     * @return {!CacheNode}\r\n     */\r\n    ViewCache.prototype.getEventCache = function () {\r\n        return this.eventCache_;\r\n    };\r\n    /**\r\n     * @return {?Node}\r\n     */\r\n    ViewCache.prototype.getCompleteEventSnap = function () {\r\n        return this.eventCache_.isFullyInitialized()\r\n            ? this.eventCache_.getNode()\r\n            : null;\r\n    };\r\n    /**\r\n     * @return {!CacheNode}\r\n     */\r\n    ViewCache.prototype.getServerCache = function () {\r\n        return this.serverCache_;\r\n    };\r\n    /**\r\n     * @return {?Node}\r\n     */\r\n    ViewCache.prototype.getCompleteServerSnap = function () {\r\n        return this.serverCache_.isFullyInitialized()\r\n            ? this.serverCache_.getNode()\r\n            : null;\r\n    };\r\n    /**\r\n     * @const\r\n     * @type {ViewCache}\r\n     */\r\n    ViewCache.Empty = new ViewCache(new CacheNode(ChildrenNode.EMPTY_NODE, \r\n    /*fullyInitialized=*/ false, \r\n    /*filtered=*/ false), new CacheNode(ChildrenNode.EMPTY_NODE, \r\n    /*fullyInitialized=*/ false, \r\n    /*filtered=*/ false));\r\n    return ViewCache;\r\n}());\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * @constructor\r\n * @struct\r\n * @param {!string} type The event type\r\n * @param {!Node} snapshotNode The data\r\n * @param {string=} childName The name for this child, if it's a child event\r\n * @param {Node=} oldSnap Used for intermediate processing of child changed events\r\n * @param {string=} prevName The name for the previous child, if applicable\r\n */\r\nvar Change = /** @class */ (function () {\r\n    function Change(type, snapshotNode, childName, oldSnap, prevName) {\r\n        this.type = type;\r\n        this.snapshotNode = snapshotNode;\r\n        this.childName = childName;\r\n        this.oldSnap = oldSnap;\r\n        this.prevName = prevName;\r\n    }\r\n    /**\r\n     * @param {!Node} snapshot\r\n     * @return {!Change}\r\n     */\r\n    Change.valueChange = function (snapshot) {\r\n        return new Change(Change.VALUE, snapshot);\r\n    };\r\n    /**\r\n     * @param {string} childKey\r\n     * @param {!Node} snapshot\r\n     * @return {!Change}\r\n     */\r\n    Change.childAddedChange = function (childKey, snapshot) {\r\n        return new Change(Change.CHILD_ADDED, snapshot, childKey);\r\n    };\r\n    /**\r\n     * @param {string} childKey\r\n     * @param {!Node} snapshot\r\n     * @return {!Change}\r\n     */\r\n    Change.childRemovedChange = function (childKey, snapshot) {\r\n        return new Change(Change.CHILD_REMOVED, snapshot, childKey);\r\n    };\r\n    /**\r\n     * @param {string} childKey\r\n     * @param {!Node} newSnapshot\r\n     * @param {!Node} oldSnapshot\r\n     * @return {!Change}\r\n     */\r\n    Change.childChangedChange = function (childKey, newSnapshot, oldSnapshot) {\r\n        return new Change(Change.CHILD_CHANGED, newSnapshot, childKey, oldSnapshot);\r\n    };\r\n    /**\r\n     * @param {string} childKey\r\n     * @param {!Node} snapshot\r\n     * @return {!Change}\r\n     */\r\n    Change.childMovedChange = function (childKey, snapshot) {\r\n        return new Change(Change.CHILD_MOVED, snapshot, childKey);\r\n    };\r\n    //event types\r\n    /** Event type for a child added */\r\n    Change.CHILD_ADDED = 'child_added';\r\n    /** Event type for a child removed */\r\n    Change.CHILD_REMOVED = 'child_removed';\r\n    /** Event type for a child changed */\r\n    Change.CHILD_CHANGED = 'child_changed';\r\n    /** Event type for a child moved */\r\n    Change.CHILD_MOVED = 'child_moved';\r\n    /** Event type for a value change */\r\n    Change.VALUE = 'value';\r\n    return Change;\r\n}());\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Doesn't really filter nodes but applies an index to the node and keeps track of any changes\r\n *\r\n * @constructor\r\n * @implements {NodeFilter}\r\n * @param {!Index} index\r\n */\r\nvar IndexedFilter = /** @class */ (function () {\r\n    function IndexedFilter(index_) {\r\n        this.index_ = index_;\r\n    }\r\n    IndexedFilter.prototype.updateChild = function (snap, key, newChild, affectedPath, source, optChangeAccumulator) {\r\n        util.assert(snap.isIndexed(this.index_), 'A node must be indexed if only a child is updated');\r\n        var oldChild = snap.getImmediateChild(key);\r\n        // Check if anything actually changed.\r\n        if (oldChild.getChild(affectedPath).equals(newChild.getChild(affectedPath))) {\r\n            // There's an edge case where a child can enter or leave the view because affectedPath was set to null.\r\n            // In this case, affectedPath will appear null in both the old and new snapshots.  So we need\r\n            // to avoid treating these cases as \"nothing changed.\"\r\n            if (oldChild.isEmpty() == newChild.isEmpty()) {\r\n                // Nothing changed.\r\n                // This assert should be valid, but it's expensive (can dominate perf testing) so don't actually do it.\r\n                //assert(oldChild.equals(newChild), 'Old and new snapshots should be equal.');\r\n                return snap;\r\n            }\r\n        }\r\n        if (optChangeAccumulator != null) {\r\n            if (newChild.isEmpty()) {\r\n                if (snap.hasChild(key)) {\r\n                    optChangeAccumulator.trackChildChange(Change.childRemovedChange(key, oldChild));\r\n                }\r\n                else {\r\n                    util.assert(snap.isLeafNode(), 'A child remove without an old child only makes sense on a leaf node');\r\n                }\r\n            }\r\n            else if (oldChild.isEmpty()) {\r\n                optChangeAccumulator.trackChildChange(Change.childAddedChange(key, newChild));\r\n            }\r\n            else {\r\n                optChangeAccumulator.trackChildChange(Change.childChangedChange(key, newChild, oldChild));\r\n            }\r\n        }\r\n        if (snap.isLeafNode() && newChild.isEmpty()) {\r\n            return snap;\r\n        }\r\n        else {\r\n            // Make sure the node is indexed\r\n            return snap.updateImmediateChild(key, newChild).withIndex(this.index_);\r\n        }\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    IndexedFilter.prototype.updateFullNode = function (oldSnap, newSnap, optChangeAccumulator) {\r\n        if (optChangeAccumulator != null) {\r\n            if (!oldSnap.isLeafNode()) {\r\n                oldSnap.forEachChild(PRIORITY_INDEX, function (key, childNode) {\r\n                    if (!newSnap.hasChild(key)) {\r\n                        optChangeAccumulator.trackChildChange(Change.childRemovedChange(key, childNode));\r\n                    }\r\n                });\r\n            }\r\n            if (!newSnap.isLeafNode()) {\r\n                newSnap.forEachChild(PRIORITY_INDEX, function (key, childNode) {\r\n                    if (oldSnap.hasChild(key)) {\r\n                        var oldChild = oldSnap.getImmediateChild(key);\r\n                        if (!oldChild.equals(childNode)) {\r\n                            optChangeAccumulator.trackChildChange(Change.childChangedChange(key, childNode, oldChild));\r\n                        }\r\n                    }\r\n                    else {\r\n                        optChangeAccumulator.trackChildChange(Change.childAddedChange(key, childNode));\r\n                    }\r\n                });\r\n            }\r\n        }\r\n        return newSnap.withIndex(this.index_);\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    IndexedFilter.prototype.updatePriority = function (oldSnap, newPriority) {\r\n        if (oldSnap.isEmpty()) {\r\n            return ChildrenNode.EMPTY_NODE;\r\n        }\r\n        else {\r\n            return oldSnap.updatePriority(newPriority);\r\n        }\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    IndexedFilter.prototype.filtersNodes = function () {\r\n        return false;\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    IndexedFilter.prototype.getIndexedFilter = function () {\r\n        return this;\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    IndexedFilter.prototype.getIndex = function () {\r\n        return this.index_;\r\n    };\r\n    return IndexedFilter;\r\n}());\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * @constructor\r\n */\r\nvar ChildChangeAccumulator = /** @class */ (function () {\r\n    function ChildChangeAccumulator() {\r\n        this.changeMap_ = {};\r\n    }\r\n    /**\r\n     * @param {!Change} change\r\n     */\r\n    ChildChangeAccumulator.prototype.trackChildChange = function (change) {\r\n        var type = change.type;\r\n        var childKey /** @type {!string} */ = change.childName;\r\n        util.assert(type == Change.CHILD_ADDED ||\r\n            type == Change.CHILD_CHANGED ||\r\n            type == Change.CHILD_REMOVED, 'Only child changes supported for tracking');\r\n        util.assert(childKey !== '.priority', 'Only non-priority child changes can be tracked.');\r\n        var oldChange = util.safeGet(this.changeMap_, childKey);\r\n        if (oldChange) {\r\n            var oldType = oldChange.type;\r\n            if (type == Change.CHILD_ADDED && oldType == Change.CHILD_REMOVED) {\r\n                this.changeMap_[childKey] = Change.childChangedChange(childKey, change.snapshotNode, oldChange.snapshotNode);\r\n            }\r\n            else if (type == Change.CHILD_REMOVED &&\r\n                oldType == Change.CHILD_ADDED) {\r\n                delete this.changeMap_[childKey];\r\n            }\r\n            else if (type == Change.CHILD_REMOVED &&\r\n                oldType == Change.CHILD_CHANGED) {\r\n                this.changeMap_[childKey] = Change.childRemovedChange(childKey, oldChange.oldSnap);\r\n            }\r\n            else if (type == Change.CHILD_CHANGED &&\r\n                oldType == Change.CHILD_ADDED) {\r\n                this.changeMap_[childKey] = Change.childAddedChange(childKey, change.snapshotNode);\r\n            }\r\n            else if (type == Change.CHILD_CHANGED &&\r\n                oldType == Change.CHILD_CHANGED) {\r\n                this.changeMap_[childKey] = Change.childChangedChange(childKey, change.snapshotNode, oldChange.oldSnap);\r\n            }\r\n            else {\r\n                throw util.assertionError('Illegal combination of changes: ' +\r\n                    change +\r\n                    ' occurred after ' +\r\n                    oldChange);\r\n            }\r\n        }\r\n        else {\r\n            this.changeMap_[childKey] = change;\r\n        }\r\n    };\r\n    /**\r\n     * @return {!Array.<!Change>}\r\n     */\r\n    ChildChangeAccumulator.prototype.getChanges = function () {\r\n        return util.getValues(this.changeMap_);\r\n    };\r\n    return ChildChangeAccumulator;\r\n}());\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * An implementation of CompleteChildSource that never returns any additional children\r\n *\r\n * @private\r\n * @constructor\r\n * @implements CompleteChildSource\r\n */\r\nvar NoCompleteChildSource_ = /** @class */ (function () {\r\n    function NoCompleteChildSource_() {\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    NoCompleteChildSource_.prototype.getCompleteChild = function (childKey) {\r\n        return null;\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    NoCompleteChildSource_.prototype.getChildAfterChild = function (index, child, reverse) {\r\n        return null;\r\n    };\r\n    return NoCompleteChildSource_;\r\n}());\r\n/**\r\n * Singleton instance.\r\n * @const\r\n * @type {!CompleteChildSource}\r\n */\r\nvar NO_COMPLETE_CHILD_SOURCE = new NoCompleteChildSource_();\r\n/**\r\n * An implementation of CompleteChildSource that uses a WriteTree in addition to any other server data or\r\n * old event caches available to calculate complete children.\r\n *\r\n *\r\n * @implements CompleteChildSource\r\n */\r\nvar WriteTreeCompleteChildSource = /** @class */ (function () {\r\n    /**\r\n     * @param {!WriteTreeRef} writes_\r\n     * @param {!ViewCache} viewCache_\r\n     * @param {?Node} optCompleteServerCache_\r\n     */\r\n    function WriteTreeCompleteChildSource(writes_, viewCache_, optCompleteServerCache_) {\r\n        if (optCompleteServerCache_ === void 0) { optCompleteServerCache_ = null; }\r\n        this.writes_ = writes_;\r\n        this.viewCache_ = viewCache_;\r\n        this.optCompleteServerCache_ = optCompleteServerCache_;\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    WriteTreeCompleteChildSource.prototype.getCompleteChild = function (childKey) {\r\n        var node = this.viewCache_.getEventCache();\r\n        if (node.isCompleteForChild(childKey)) {\r\n            return node.getNode().getImmediateChild(childKey);\r\n        }\r\n        else {\r\n            var serverNode = this.optCompleteServerCache_ != null\r\n                ? new CacheNode(this.optCompleteServerCache_, true, false)\r\n                : this.viewCache_.getServerCache();\r\n            return this.writes_.calcCompleteChild(childKey, serverNode);\r\n        }\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    WriteTreeCompleteChildSource.prototype.getChildAfterChild = function (index, child, reverse) {\r\n        var completeServerData = this.optCompleteServerCache_ != null\r\n            ? this.optCompleteServerCache_\r\n            : this.viewCache_.getCompleteServerSnap();\r\n        var nodes = this.writes_.calcIndexedSlice(completeServerData, child, 1, reverse, index);\r\n        if (nodes.length === 0) {\r\n            return null;\r\n        }\r\n        else {\r\n            return nodes[0];\r\n        }\r\n    };\r\n    return WriteTreeCompleteChildSource;\r\n}());\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * @constructor\r\n * @struct\r\n */\r\nvar ProcessorResult = /** @class */ (function () {\r\n    /**\r\n     * @param {!ViewCache} viewCache\r\n     * @param {!Array.<!Change>} changes\r\n     */\r\n    function ProcessorResult(viewCache, changes) {\r\n        this.viewCache = viewCache;\r\n        this.changes = changes;\r\n    }\r\n    return ProcessorResult;\r\n}());\r\n/**\r\n * @constructor\r\n */\r\nvar ViewProcessor = /** @class */ (function () {\r\n    /**\r\n     * @param {!NodeFilter} filter_\r\n     */\r\n    function ViewProcessor(filter_) {\r\n        this.filter_ = filter_;\r\n    }\r\n    /**\r\n     * @param {!ViewCache} viewCache\r\n     */\r\n    ViewProcessor.prototype.assertIndexed = function (viewCache) {\r\n        util.assert(viewCache\r\n            .getEventCache()\r\n            .getNode()\r\n            .isIndexed(this.filter_.getIndex()), 'Event snap not indexed');\r\n        util.assert(viewCache\r\n            .getServerCache()\r\n            .getNode()\r\n            .isIndexed(this.filter_.getIndex()), 'Server snap not indexed');\r\n    };\r\n    /**\r\n     * @param {!ViewCache} oldViewCache\r\n     * @param {!Operation} operation\r\n     * @param {!WriteTreeRef} writesCache\r\n     * @param {?Node} completeCache\r\n     * @return {!ProcessorResult}\r\n     */\r\n    ViewProcessor.prototype.applyOperation = function (oldViewCache, operation, writesCache, completeCache) {\r\n        var accumulator = new ChildChangeAccumulator();\r\n        var newViewCache, filterServerNode;\r\n        if (operation.type === OperationType.OVERWRITE) {\r\n            var overwrite = operation;\r\n            if (overwrite.source.fromUser) {\r\n                newViewCache = this.applyUserOverwrite_(oldViewCache, overwrite.path, overwrite.snap, writesCache, completeCache, accumulator);\r\n            }\r\n            else {\r\n                util.assert(overwrite.source.fromServer, 'Unknown source.');\r\n                // We filter the node if it's a tagged update or the node has been previously filtered  and the\r\n                // update is not at the root in which case it is ok (and necessary) to mark the node unfiltered\r\n                // again\r\n                filterServerNode =\r\n                    overwrite.source.tagged ||\r\n                        (oldViewCache.getServerCache().isFiltered() &&\r\n                            !overwrite.path.isEmpty());\r\n                newViewCache = this.applyServerOverwrite_(oldViewCache, overwrite.path, overwrite.snap, writesCache, completeCache, filterServerNode, accumulator);\r\n            }\r\n        }\r\n        else if (operation.type === OperationType.MERGE) {\r\n            var merge = operation;\r\n            if (merge.source.fromUser) {\r\n                newViewCache = this.applyUserMerge_(oldViewCache, merge.path, merge.children, writesCache, completeCache, accumulator);\r\n            }\r\n            else {\r\n                util.assert(merge.source.fromServer, 'Unknown source.');\r\n                // We filter the node if it's a tagged update or the node has been previously filtered\r\n                filterServerNode =\r\n                    merge.source.tagged || oldViewCache.getServerCache().isFiltered();\r\n                newViewCache = this.applyServerMerge_(oldViewCache, merge.path, merge.children, writesCache, completeCache, filterServerNode, accumulator);\r\n            }\r\n        }\r\n        else if (operation.type === OperationType.ACK_USER_WRITE) {\r\n            var ackUserWrite = operation;\r\n            if (!ackUserWrite.revert) {\r\n                newViewCache = this.ackUserWrite_(oldViewCache, ackUserWrite.path, ackUserWrite.affectedTree, writesCache, completeCache, accumulator);\r\n            }\r\n            else {\r\n                newViewCache = this.revertUserWrite_(oldViewCache, ackUserWrite.path, writesCache, completeCache, accumulator);\r\n            }\r\n        }\r\n        else if (operation.type === OperationType.LISTEN_COMPLETE) {\r\n            newViewCache = this.listenComplete_(oldViewCache, operation.path, writesCache, accumulator);\r\n        }\r\n        else {\r\n            throw util.assertionError('Unknown operation type: ' + operation.type);\r\n        }\r\n        var changes = accumulator.getChanges();\r\n        ViewProcessor.maybeAddValueEvent_(oldViewCache, newViewCache, changes);\r\n        return new ProcessorResult(newViewCache, changes);\r\n    };\r\n    /**\r\n     * @param {!ViewCache} oldViewCache\r\n     * @param {!ViewCache} newViewCache\r\n     * @param {!Array.<!Change>} accumulator\r\n     * @private\r\n     */\r\n    ViewProcessor.maybeAddValueEvent_ = function (oldViewCache, newViewCache, accumulator) {\r\n        var eventSnap = newViewCache.getEventCache();\r\n        if (eventSnap.isFullyInitialized()) {\r\n            var isLeafOrEmpty = eventSnap.getNode().isLeafNode() || eventSnap.getNode().isEmpty();\r\n            var oldCompleteSnap = oldViewCache.getCompleteEventSnap();\r\n            if (accumulator.length > 0 ||\r\n                !oldViewCache.getEventCache().isFullyInitialized() ||\r\n                (isLeafOrEmpty &&\r\n                    !eventSnap\r\n                        .getNode()\r\n                        .equals(/** @type {!Node} */ (oldCompleteSnap))) ||\r\n                !eventSnap\r\n                    .getNode()\r\n                    .getPriority()\r\n                    .equals(oldCompleteSnap.getPriority())) {\r\n                accumulator.push(Change.valueChange(\r\n                /** @type {!Node} */ newViewCache.getCompleteEventSnap()));\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * @param {!ViewCache} viewCache\r\n     * @param {!Path} changePath\r\n     * @param {!WriteTreeRef} writesCache\r\n     * @param {!CompleteChildSource} source\r\n     * @param {!ChildChangeAccumulator} accumulator\r\n     * @return {!ViewCache}\r\n     * @private\r\n     */\r\n    ViewProcessor.prototype.generateEventCacheAfterServerEvent_ = function (viewCache, changePath, writesCache, source, accumulator) {\r\n        var oldEventSnap = viewCache.getEventCache();\r\n        if (writesCache.shadowingWrite(changePath) != null) {\r\n            // we have a shadowing write, ignore changes\r\n            return viewCache;\r\n        }\r\n        else {\r\n            var newEventCache = void 0, serverNode = void 0;\r\n            if (changePath.isEmpty()) {\r\n                // TODO: figure out how this plays with \"sliding ack windows\"\r\n                util.assert(viewCache.getServerCache().isFullyInitialized(), 'If change path is empty, we must have complete server data');\r\n                if (viewCache.getServerCache().isFiltered()) {\r\n                    // We need to special case this, because we need to only apply writes to complete children, or\r\n                    // we might end up raising events for incomplete children. If the server data is filtered deep\r\n                    // writes cannot be guaranteed to be complete\r\n                    var serverCache = viewCache.getCompleteServerSnap();\r\n                    var completeChildren = serverCache instanceof ChildrenNode\r\n                        ? serverCache\r\n                        : ChildrenNode.EMPTY_NODE;\r\n                    var completeEventChildren = writesCache.calcCompleteEventChildren(completeChildren);\r\n                    newEventCache = this.filter_.updateFullNode(viewCache.getEventCache().getNode(), completeEventChildren, accumulator);\r\n                }\r\n                else {\r\n                    var completeNode = writesCache.calcCompleteEventCache(viewCache.getCompleteServerSnap());\r\n                    newEventCache = this.filter_.updateFullNode(viewCache.getEventCache().getNode(), completeNode, accumulator);\r\n                }\r\n            }\r\n            else {\r\n                var childKey = changePath.getFront();\r\n                if (childKey == '.priority') {\r\n                    util.assert(changePath.getLength() == 1, \"Can't have a priority with additional path components\");\r\n                    var oldEventNode = oldEventSnap.getNode();\r\n                    serverNode = viewCache.getServerCache().getNode();\r\n                    // we might have overwrites for this priority\r\n                    var updatedPriority = writesCache.calcEventCacheAfterServerOverwrite(changePath, oldEventNode, serverNode);\r\n                    if (updatedPriority != null) {\r\n                        newEventCache = this.filter_.updatePriority(oldEventNode, updatedPriority);\r\n                    }\r\n                    else {\r\n                        // priority didn't change, keep old node\r\n                        newEventCache = oldEventSnap.getNode();\r\n                    }\r\n                }\r\n                else {\r\n                    var childChangePath = changePath.popFront();\r\n                    // update child\r\n                    var newEventChild = void 0;\r\n                    if (oldEventSnap.isCompleteForChild(childKey)) {\r\n                        serverNode = viewCache.getServerCache().getNode();\r\n                        var eventChildUpdate = writesCache.calcEventCacheAfterServerOverwrite(changePath, oldEventSnap.getNode(), serverNode);\r\n                        if (eventChildUpdate != null) {\r\n                            newEventChild = oldEventSnap\r\n                                .getNode()\r\n                                .getImmediateChild(childKey)\r\n                                .updateChild(childChangePath, eventChildUpdate);\r\n                        }\r\n                        else {\r\n                            // Nothing changed, just keep the old child\r\n                            newEventChild = oldEventSnap\r\n                                .getNode()\r\n                                .getImmediateChild(childKey);\r\n                        }\r\n                    }\r\n                    else {\r\n                        newEventChild = writesCache.calcCompleteChild(childKey, viewCache.getServerCache());\r\n                    }\r\n                    if (newEventChild != null) {\r\n                        newEventCache = this.filter_.updateChild(oldEventSnap.getNode(), childKey, newEventChild, childChangePath, source, accumulator);\r\n                    }\r\n                    else {\r\n                        // no complete child available or no change\r\n                        newEventCache = oldEventSnap.getNode();\r\n                    }\r\n                }\r\n            }\r\n            return viewCache.updateEventSnap(newEventCache, oldEventSnap.isFullyInitialized() || changePath.isEmpty(), this.filter_.filtersNodes());\r\n        }\r\n    };\r\n    /**\r\n     * @param {!ViewCache} oldViewCache\r\n     * @param {!Path} changePath\r\n     * @param {!Node} changedSnap\r\n     * @param {!WriteTreeRef} writesCache\r\n     * @param {?Node} completeCache\r\n     * @param {boolean} filterServerNode\r\n     * @param {!ChildChangeAccumulator} accumulator\r\n     * @return {!ViewCache}\r\n     * @private\r\n     */\r\n    ViewProcessor.prototype.applyServerOverwrite_ = function (oldViewCache, changePath, changedSnap, writesCache, completeCache, filterServerNode, accumulator) {\r\n        var oldServerSnap = oldViewCache.getServerCache();\r\n        var newServerCache;\r\n        var serverFilter = filterServerNode\r\n            ? this.filter_\r\n            : this.filter_.getIndexedFilter();\r\n        if (changePath.isEmpty()) {\r\n            newServerCache = serverFilter.updateFullNode(oldServerSnap.getNode(), changedSnap, null);\r\n        }\r\n        else if (serverFilter.filtersNodes() && !oldServerSnap.isFiltered()) {\r\n            // we want to filter the server node, but we didn't filter the server node yet, so simulate a full update\r\n            var newServerNode = oldServerSnap\r\n                .getNode()\r\n                .updateChild(changePath, changedSnap);\r\n            newServerCache = serverFilter.updateFullNode(oldServerSnap.getNode(), newServerNode, null);\r\n        }\r\n        else {\r\n            var childKey = changePath.getFront();\r\n            if (!oldServerSnap.isCompleteForPath(changePath) &&\r\n                changePath.getLength() > 1) {\r\n                // We don't update incomplete nodes with updates intended for other listeners\r\n                return oldViewCache;\r\n            }\r\n            var childChangePath = changePath.popFront();\r\n            var childNode = oldServerSnap.getNode().getImmediateChild(childKey);\r\n            var newChildNode = childNode.updateChild(childChangePath, changedSnap);\r\n            if (childKey == '.priority') {\r\n                newServerCache = serverFilter.updatePriority(oldServerSnap.getNode(), newChildNode);\r\n            }\r\n            else {\r\n                newServerCache = serverFilter.updateChild(oldServerSnap.getNode(), childKey, newChildNode, childChangePath, NO_COMPLETE_CHILD_SOURCE, null);\r\n            }\r\n        }\r\n        var newViewCache = oldViewCache.updateServerSnap(newServerCache, oldServerSnap.isFullyInitialized() || changePath.isEmpty(), serverFilter.filtersNodes());\r\n        var source = new WriteTreeCompleteChildSource(writesCache, newViewCache, completeCache);\r\n        return this.generateEventCacheAfterServerEvent_(newViewCache, changePath, writesCache, source, accumulator);\r\n    };\r\n    /**\r\n     * @param {!ViewCache} oldViewCache\r\n     * @param {!Path} changePath\r\n     * @param {!Node} changedSnap\r\n     * @param {!WriteTreeRef} writesCache\r\n     * @param {?Node} completeCache\r\n     * @param {!ChildChangeAccumulator} accumulator\r\n     * @return {!ViewCache}\r\n     * @private\r\n     */\r\n    ViewProcessor.prototype.applyUserOverwrite_ = function (oldViewCache, changePath, changedSnap, writesCache, completeCache, accumulator) {\r\n        var oldEventSnap = oldViewCache.getEventCache();\r\n        var newViewCache, newEventCache;\r\n        var source = new WriteTreeCompleteChildSource(writesCache, oldViewCache, completeCache);\r\n        if (changePath.isEmpty()) {\r\n            newEventCache = this.filter_.updateFullNode(oldViewCache.getEventCache().getNode(), changedSnap, accumulator);\r\n            newViewCache = oldViewCache.updateEventSnap(newEventCache, true, this.filter_.filtersNodes());\r\n        }\r\n        else {\r\n            var childKey = changePath.getFront();\r\n            if (childKey === '.priority') {\r\n                newEventCache = this.filter_.updatePriority(oldViewCache.getEventCache().getNode(), changedSnap);\r\n                newViewCache = oldViewCache.updateEventSnap(newEventCache, oldEventSnap.isFullyInitialized(), oldEventSnap.isFiltered());\r\n            }\r\n            else {\r\n                var childChangePath = changePath.popFront();\r\n                var oldChild = oldEventSnap.getNode().getImmediateChild(childKey);\r\n                var newChild = void 0;\r\n                if (childChangePath.isEmpty()) {\r\n                    // Child overwrite, we can replace the child\r\n                    newChild = changedSnap;\r\n                }\r\n                else {\r\n                    var childNode = source.getCompleteChild(childKey);\r\n                    if (childNode != null) {\r\n                        if (childChangePath.getBack() === '.priority' &&\r\n                            childNode.getChild(childChangePath.parent()).isEmpty()) {\r\n                            // This is a priority update on an empty node. If this node exists on the server, the\r\n                            // server will send down the priority in the update, so ignore for now\r\n                            newChild = childNode;\r\n                        }\r\n                        else {\r\n                            newChild = childNode.updateChild(childChangePath, changedSnap);\r\n                        }\r\n                    }\r\n                    else {\r\n                        // There is no complete child node available\r\n                        newChild = ChildrenNode.EMPTY_NODE;\r\n                    }\r\n                }\r\n                if (!oldChild.equals(newChild)) {\r\n                    var newEventSnap = this.filter_.updateChild(oldEventSnap.getNode(), childKey, newChild, childChangePath, source, accumulator);\r\n                    newViewCache = oldViewCache.updateEventSnap(newEventSnap, oldEventSnap.isFullyInitialized(), this.filter_.filtersNodes());\r\n                }\r\n                else {\r\n                    newViewCache = oldViewCache;\r\n                }\r\n            }\r\n        }\r\n        return newViewCache;\r\n    };\r\n    /**\r\n     * @param {!ViewCache} viewCache\r\n     * @param {string} childKey\r\n     * @return {boolean}\r\n     * @private\r\n     */\r\n    ViewProcessor.cacheHasChild_ = function (viewCache, childKey) {\r\n        return viewCache.getEventCache().isCompleteForChild(childKey);\r\n    };\r\n    /**\r\n     * @param {!ViewCache} viewCache\r\n     * @param {!Path} path\r\n     * @param {ImmutableTree.<!Node>} changedChildren\r\n     * @param {!WriteTreeRef} writesCache\r\n     * @param {?Node} serverCache\r\n     * @param {!ChildChangeAccumulator} accumulator\r\n     * @return {!ViewCache}\r\n     * @private\r\n     */\r\n    ViewProcessor.prototype.applyUserMerge_ = function (viewCache, path, changedChildren, writesCache, serverCache, accumulator) {\r\n        var _this = this;\r\n        // HACK: In the case of a limit query, there may be some changes that bump things out of the\r\n        // window leaving room for new items.  It's important we process these changes first, so we\r\n        // iterate the changes twice, first processing any that affect items currently in view.\r\n        // TODO: I consider an item \"in view\" if cacheHasChild is true, which checks both the server\r\n        // and event snap.  I'm not sure if this will result in edge cases when a child is in one but\r\n        // not the other.\r\n        var curViewCache = viewCache;\r\n        changedChildren.foreach(function (relativePath, childNode) {\r\n            var writePath = path.child(relativePath);\r\n            if (ViewProcessor.cacheHasChild_(viewCache, writePath.getFront())) {\r\n                curViewCache = _this.applyUserOverwrite_(curViewCache, writePath, childNode, writesCache, serverCache, accumulator);\r\n            }\r\n        });\r\n        changedChildren.foreach(function (relativePath, childNode) {\r\n            var writePath = path.child(relativePath);\r\n            if (!ViewProcessor.cacheHasChild_(viewCache, writePath.getFront())) {\r\n                curViewCache = _this.applyUserOverwrite_(curViewCache, writePath, childNode, writesCache, serverCache, accumulator);\r\n            }\r\n        });\r\n        return curViewCache;\r\n    };\r\n    /**\r\n     * @param {!Node} node\r\n     * @param {ImmutableTree.<!Node>} merge\r\n     * @return {!Node}\r\n     * @private\r\n     */\r\n    ViewProcessor.prototype.applyMerge_ = function (node, merge) {\r\n        merge.foreach(function (relativePath, childNode) {\r\n            node = node.updateChild(relativePath, childNode);\r\n        });\r\n        return node;\r\n    };\r\n    /**\r\n     * @param {!ViewCache} viewCache\r\n     * @param {!Path} path\r\n     * @param {!ImmutableTree.<!Node>} changedChildren\r\n     * @param {!WriteTreeRef} writesCache\r\n     * @param {?Node} serverCache\r\n     * @param {boolean} filterServerNode\r\n     * @param {!ChildChangeAccumulator} accumulator\r\n     * @return {!ViewCache}\r\n     * @private\r\n     */\r\n    ViewProcessor.prototype.applyServerMerge_ = function (viewCache, path, changedChildren, writesCache, serverCache, filterServerNode, accumulator) {\r\n        var _this = this;\r\n        // If we don't have a cache yet, this merge was intended for a previously listen in the same location. Ignore it and\r\n        // wait for the complete data update coming soon.\r\n        if (viewCache\r\n            .getServerCache()\r\n            .getNode()\r\n            .isEmpty() &&\r\n            !viewCache.getServerCache().isFullyInitialized()) {\r\n            return viewCache;\r\n        }\r\n        // HACK: In the case of a limit query, there may be some changes that bump things out of the\r\n        // window leaving room for new items.  It's important we process these changes first, so we\r\n        // iterate the changes twice, first processing any that affect items currently in view.\r\n        // TODO: I consider an item \"in view\" if cacheHasChild is true, which checks both the server\r\n        // and event snap.  I'm not sure if this will result in edge cases when a child is in one but\r\n        // not the other.\r\n        var curViewCache = viewCache;\r\n        var viewMergeTree;\r\n        if (path.isEmpty()) {\r\n            viewMergeTree = changedChildren;\r\n        }\r\n        else {\r\n            viewMergeTree = ImmutableTree.Empty.setTree(path, changedChildren);\r\n        }\r\n        var serverNode = viewCache.getServerCache().getNode();\r\n        viewMergeTree.children.inorderTraversal(function (childKey, childTree) {\r\n            if (serverNode.hasChild(childKey)) {\r\n                var serverChild = viewCache\r\n                    .getServerCache()\r\n                    .getNode()\r\n                    .getImmediateChild(childKey);\r\n                var newChild = _this.applyMerge_(serverChild, childTree);\r\n                curViewCache = _this.applyServerOverwrite_(curViewCache, new Path(childKey), newChild, writesCache, serverCache, filterServerNode, accumulator);\r\n            }\r\n        });\r\n        viewMergeTree.children.inorderTraversal(function (childKey, childMergeTree) {\r\n            var isUnknownDeepMerge = !viewCache.getServerCache().isCompleteForChild(childKey) &&\r\n                childMergeTree.value == null;\r\n            if (!serverNode.hasChild(childKey) && !isUnknownDeepMerge) {\r\n                var serverChild = viewCache\r\n                    .getServerCache()\r\n                    .getNode()\r\n                    .getImmediateChild(childKey);\r\n                var newChild = _this.applyMerge_(serverChild, childMergeTree);\r\n                curViewCache = _this.applyServerOverwrite_(curViewCache, new Path(childKey), newChild, writesCache, serverCache, filterServerNode, accumulator);\r\n            }\r\n        });\r\n        return curViewCache;\r\n    };\r\n    /**\r\n     * @param {!ViewCache} viewCache\r\n     * @param {!Path} ackPath\r\n     * @param {!ImmutableTree<!boolean>} affectedTree\r\n     * @param {!WriteTreeRef} writesCache\r\n     * @param {?Node} completeCache\r\n     * @param {!ChildChangeAccumulator} accumulator\r\n     * @return {!ViewCache}\r\n     * @private\r\n     */\r\n    ViewProcessor.prototype.ackUserWrite_ = function (viewCache, ackPath, affectedTree, writesCache, completeCache, accumulator) {\r\n        if (writesCache.shadowingWrite(ackPath) != null) {\r\n            return viewCache;\r\n        }\r\n        // Only filter server node if it is currently filtered\r\n        var filterServerNode = viewCache.getServerCache().isFiltered();\r\n        // Essentially we'll just get our existing server cache for the affected paths and re-apply it as a server update\r\n        // now that it won't be shadowed.\r\n        var serverCache = viewCache.getServerCache();\r\n        if (affectedTree.value != null) {\r\n            // This is an overwrite.\r\n            if ((ackPath.isEmpty() && serverCache.isFullyInitialized()) ||\r\n                serverCache.isCompleteForPath(ackPath)) {\r\n                return this.applyServerOverwrite_(viewCache, ackPath, serverCache.getNode().getChild(ackPath), writesCache, completeCache, filterServerNode, accumulator);\r\n            }\r\n            else if (ackPath.isEmpty()) {\r\n                // This is a goofy edge case where we are acking data at this location but don't have full data.  We\r\n                // should just re-apply whatever we have in our cache as a merge.\r\n                var changedChildren_1 = ImmutableTree.Empty;\r\n                serverCache.getNode().forEachChild(KEY_INDEX, function (name, node) {\r\n                    changedChildren_1 = changedChildren_1.set(new Path(name), node);\r\n                });\r\n                return this.applyServerMerge_(viewCache, ackPath, changedChildren_1, writesCache, completeCache, filterServerNode, accumulator);\r\n            }\r\n            else {\r\n                return viewCache;\r\n            }\r\n        }\r\n        else {\r\n            // This is a merge.\r\n            var changedChildren_2 = ImmutableTree.Empty;\r\n            affectedTree.foreach(function (mergePath, value) {\r\n                var serverCachePath = ackPath.child(mergePath);\r\n                if (serverCache.isCompleteForPath(serverCachePath)) {\r\n                    changedChildren_2 = changedChildren_2.set(mergePath, serverCache.getNode().getChild(serverCachePath));\r\n                }\r\n            });\r\n            return this.applyServerMerge_(viewCache, ackPath, changedChildren_2, writesCache, completeCache, filterServerNode, accumulator);\r\n        }\r\n    };\r\n    /**\r\n     * @param {!ViewCache} viewCache\r\n     * @param {!Path} path\r\n     * @param {!WriteTreeRef} writesCache\r\n     * @param {!ChildChangeAccumulator} accumulator\r\n     * @return {!ViewCache}\r\n     * @private\r\n     */\r\n    ViewProcessor.prototype.listenComplete_ = function (viewCache, path, writesCache, accumulator) {\r\n        var oldServerNode = viewCache.getServerCache();\r\n        var newViewCache = viewCache.updateServerSnap(oldServerNode.getNode(), oldServerNode.isFullyInitialized() || path.isEmpty(), oldServerNode.isFiltered());\r\n        return this.generateEventCacheAfterServerEvent_(newViewCache, path, writesCache, NO_COMPLETE_CHILD_SOURCE, accumulator);\r\n    };\r\n    /**\r\n     * @param {!ViewCache} viewCache\r\n     * @param {!Path} path\r\n     * @param {!WriteTreeRef} writesCache\r\n     * @param {?Node} completeServerCache\r\n     * @param {!ChildChangeAccumulator} accumulator\r\n     * @return {!ViewCache}\r\n     * @private\r\n     */\r\n    ViewProcessor.prototype.revertUserWrite_ = function (viewCache, path, writesCache, completeServerCache, accumulator) {\r\n        var complete;\r\n        if (writesCache.shadowingWrite(path) != null) {\r\n            return viewCache;\r\n        }\r\n        else {\r\n            var source = new WriteTreeCompleteChildSource(writesCache, viewCache, completeServerCache);\r\n            var oldEventCache = viewCache.getEventCache().getNode();\r\n            var newEventCache = void 0;\r\n            if (path.isEmpty() || path.getFront() === '.priority') {\r\n                var newNode = void 0;\r\n                if (viewCache.getServerCache().isFullyInitialized()) {\r\n                    newNode = writesCache.calcCompleteEventCache(viewCache.getCompleteServerSnap());\r\n                }\r\n                else {\r\n                    var serverChildren = viewCache.getServerCache().getNode();\r\n                    util.assert(serverChildren instanceof ChildrenNode, 'serverChildren would be complete if leaf node');\r\n                    newNode = writesCache.calcCompleteEventChildren(serverChildren);\r\n                }\r\n                newNode = newNode;\r\n                newEventCache = this.filter_.updateFullNode(oldEventCache, newNode, accumulator);\r\n            }\r\n            else {\r\n                var childKey = path.getFront();\r\n                var newChild = writesCache.calcCompleteChild(childKey, viewCache.getServerCache());\r\n                if (newChild == null &&\r\n                    viewCache.getServerCache().isCompleteForChild(childKey)) {\r\n                    newChild = oldEventCache.getImmediateChild(childKey);\r\n                }\r\n                if (newChild != null) {\r\n                    newEventCache = this.filter_.updateChild(oldEventCache, childKey, newChild, path.popFront(), source, accumulator);\r\n                }\r\n                else if (viewCache\r\n                    .getEventCache()\r\n                    .getNode()\r\n                    .hasChild(childKey)) {\r\n                    // No complete child available, delete the existing one, if any\r\n                    newEventCache = this.filter_.updateChild(oldEventCache, childKey, ChildrenNode.EMPTY_NODE, path.popFront(), source, accumulator);\r\n                }\r\n                else {\r\n                    newEventCache = oldEventCache;\r\n                }\r\n                if (newEventCache.isEmpty() &&\r\n                    viewCache.getServerCache().isFullyInitialized()) {\r\n                    // We might have reverted all child writes. Maybe the old event was a leaf node\r\n                    complete = writesCache.calcCompleteEventCache(viewCache.getCompleteServerSnap());\r\n                    if (complete.isLeafNode()) {\r\n                        newEventCache = this.filter_.updateFullNode(newEventCache, complete, accumulator);\r\n                    }\r\n                }\r\n            }\r\n            complete =\r\n                viewCache.getServerCache().isFullyInitialized() ||\r\n                    writesCache.shadowingWrite(Path.Empty) != null;\r\n            return viewCache.updateEventSnap(newEventCache, complete, this.filter_.filtersNodes());\r\n        }\r\n    };\r\n    return ViewProcessor;\r\n}());\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * An EventGenerator is used to convert \"raw\" changes (Change) as computed by the\r\n * CacheDiffer into actual events (Event) that can be raised.  See generateEventsForChanges()\r\n * for details.\r\n *\r\n * @constructor\r\n */\r\nvar EventGenerator = /** @class */ (function () {\r\n    /**\r\n     *\r\n     * @param {!Query} query_\r\n     */\r\n    function EventGenerator(query_) {\r\n        this.query_ = query_;\r\n        /**\r\n         * @private\r\n         * @type {!Index}\r\n         */\r\n        this.index_ = this.query_.getQueryParams().getIndex();\r\n    }\r\n    /**\r\n     * Given a set of raw changes (no moved events and prevName not specified yet), and a set of\r\n     * EventRegistrations that should be notified of these changes, generate the actual events to be raised.\r\n     *\r\n     * Notes:\r\n     *  - child_moved events will be synthesized at this time for any child_changed events that affect\r\n     *    our index.\r\n     *  - prevName will be calculated based on the index ordering.\r\n     *\r\n     * @param {!Array.<!Change>} changes\r\n     * @param {!Node} eventCache\r\n     * @param {!Array.<!EventRegistration>} eventRegistrations\r\n     * @return {!Array.<!Event>}\r\n     */\r\n    EventGenerator.prototype.generateEventsForChanges = function (changes, eventCache, eventRegistrations) {\r\n        var _this = this;\r\n        var events = [];\r\n        var moves = [];\r\n        changes.forEach(function (change) {\r\n            if (change.type === Change.CHILD_CHANGED &&\r\n                _this.index_.indexedValueChanged(change.oldSnap, change.snapshotNode)) {\r\n                moves.push(Change.childMovedChange(change.childName, change.snapshotNode));\r\n            }\r\n        });\r\n        this.generateEventsForType_(events, Change.CHILD_REMOVED, changes, eventRegistrations, eventCache);\r\n        this.generateEventsForType_(events, Change.CHILD_ADDED, changes, eventRegistrations, eventCache);\r\n        this.generateEventsForType_(events, Change.CHILD_MOVED, moves, eventRegistrations, eventCache);\r\n        this.generateEventsForType_(events, Change.CHILD_CHANGED, changes, eventRegistrations, eventCache);\r\n        this.generateEventsForType_(events, Change.VALUE, changes, eventRegistrations, eventCache);\r\n        return events;\r\n    };\r\n    /**\r\n     * Given changes of a single change type, generate the corresponding events.\r\n     *\r\n     * @param {!Array.<!Event>} events\r\n     * @param {!string} eventType\r\n     * @param {!Array.<!Change>} changes\r\n     * @param {!Array.<!EventRegistration>} registrations\r\n     * @param {!Node} eventCache\r\n     * @private\r\n     */\r\n    EventGenerator.prototype.generateEventsForType_ = function (events, eventType, changes, registrations, eventCache) {\r\n        var _this = this;\r\n        var filteredChanges = changes.filter(function (change) { return change.type === eventType; });\r\n        filteredChanges.sort(this.compareChanges_.bind(this));\r\n        filteredChanges.forEach(function (change) {\r\n            var materializedChange = _this.materializeSingleChange_(change, eventCache);\r\n            registrations.forEach(function (registration) {\r\n                if (registration.respondsTo(change.type)) {\r\n                    events.push(registration.createEvent(materializedChange, _this.query_));\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     * @param {!Change} change\r\n     * @param {!Node} eventCache\r\n     * @return {!Change}\r\n     * @private\r\n     */\r\n    EventGenerator.prototype.materializeSingleChange_ = function (change, eventCache) {\r\n        if (change.type === 'value' || change.type === 'child_removed') {\r\n            return change;\r\n        }\r\n        else {\r\n            change.prevName = eventCache.getPredecessorChildName(\r\n            /** @type {!string} */\r\n            change.childName, change.snapshotNode, this.index_);\r\n            return change;\r\n        }\r\n    };\r\n    /**\r\n     * @param {!Change} a\r\n     * @param {!Change} b\r\n     * @return {number}\r\n     * @private\r\n     */\r\n    EventGenerator.prototype.compareChanges_ = function (a, b) {\r\n        if (a.childName == null || b.childName == null) {\r\n            throw util.assertionError('Should only compare child_ events.');\r\n        }\r\n        var aWrapped = new NamedNode(a.childName, a.snapshotNode);\r\n        var bWrapped = new NamedNode(b.childName, b.snapshotNode);\r\n        return this.index_.compare(aWrapped, bWrapped);\r\n    };\r\n    return EventGenerator;\r\n}());\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * A view represents a specific location and query that has 1 or more event registrations.\r\n *\r\n * It does several things:\r\n *  - Maintains the list of event registrations for this location/query.\r\n *  - Maintains a cache of the data visible for this location/query.\r\n *  - Applies new operations (via applyOperation), updates the cache, and based on the event\r\n *    registrations returns the set of events to be raised.\r\n * @constructor\r\n */\r\nvar View = /** @class */ (function () {\r\n    /**\r\n     *\r\n     * @param {!Query} query_\r\n     * @param {!ViewCache} initialViewCache\r\n     */\r\n    function View(query_, initialViewCache) {\r\n        this.query_ = query_;\r\n        this.eventRegistrations_ = [];\r\n        var params = this.query_.getQueryParams();\r\n        var indexFilter = new IndexedFilter(params.getIndex());\r\n        var filter = params.getNodeFilter();\r\n        /**\r\n         * @type {ViewProcessor}\r\n         * @private\r\n         */\r\n        this.processor_ = new ViewProcessor(filter);\r\n        var initialServerCache = initialViewCache.getServerCache();\r\n        var initialEventCache = initialViewCache.getEventCache();\r\n        // Don't filter server node with other filter than index, wait for tagged listen\r\n        var serverSnap = indexFilter.updateFullNode(ChildrenNode.EMPTY_NODE, initialServerCache.getNode(), null);\r\n        var eventSnap = filter.updateFullNode(ChildrenNode.EMPTY_NODE, initialEventCache.getNode(), null);\r\n        var newServerCache = new CacheNode(serverSnap, initialServerCache.isFullyInitialized(), indexFilter.filtersNodes());\r\n        var newEventCache = new CacheNode(eventSnap, initialEventCache.isFullyInitialized(), filter.filtersNodes());\r\n        /**\r\n         * @type {!ViewCache}\r\n         * @private\r\n         */\r\n        this.viewCache_ = new ViewCache(newEventCache, newServerCache);\r\n        /**\r\n         * @type {!EventGenerator}\r\n         * @private\r\n         */\r\n        this.eventGenerator_ = new EventGenerator(this.query_);\r\n    }\r\n    /**\r\n     * @return {!Query}\r\n     */\r\n    View.prototype.getQuery = function () {\r\n        return this.query_;\r\n    };\r\n    /**\r\n     * @return {?Node}\r\n     */\r\n    View.prototype.getServerCache = function () {\r\n        return this.viewCache_.getServerCache().getNode();\r\n    };\r\n    /**\r\n     * @param {!Path} path\r\n     * @return {?Node}\r\n     */\r\n    View.prototype.getCompleteServerCache = function (path) {\r\n        var cache = this.viewCache_.getCompleteServerSnap();\r\n        if (cache) {\r\n            // If this isn't a \"loadsAllData\" view, then cache isn't actually a complete cache and\r\n            // we need to see if it contains the child we're interested in.\r\n            if (this.query_.getQueryParams().loadsAllData() ||\r\n                (!path.isEmpty() && !cache.getImmediateChild(path.getFront()).isEmpty())) {\r\n                return cache.getChild(path);\r\n            }\r\n        }\r\n        return null;\r\n    };\r\n    /**\r\n     * @return {boolean}\r\n     */\r\n    View.prototype.isEmpty = function () {\r\n        return this.eventRegistrations_.length === 0;\r\n    };\r\n    /**\r\n     * @param {!EventRegistration} eventRegistration\r\n     */\r\n    View.prototype.addEventRegistration = function (eventRegistration) {\r\n        this.eventRegistrations_.push(eventRegistration);\r\n    };\r\n    /**\r\n     * @param {?EventRegistration} eventRegistration If null, remove all callbacks.\r\n     * @param {Error=} cancelError If a cancelError is provided, appropriate cancel events will be returned.\r\n     * @return {!Array.<!Event>} Cancel events, if cancelError was provided.\r\n     */\r\n    View.prototype.removeEventRegistration = function (eventRegistration, cancelError) {\r\n        var cancelEvents = [];\r\n        if (cancelError) {\r\n            util.assert(eventRegistration == null, 'A cancel should cancel all event registrations.');\r\n            var path_1 = this.query_.path;\r\n            this.eventRegistrations_.forEach(function (registration) {\r\n                cancelError /** @type {!Error} */ = cancelError;\r\n                var maybeEvent = registration.createCancelEvent(cancelError, path_1);\r\n                if (maybeEvent) {\r\n                    cancelEvents.push(maybeEvent);\r\n                }\r\n            });\r\n        }\r\n        if (eventRegistration) {\r\n            var remaining = [];\r\n            for (var i = 0; i < this.eventRegistrations_.length; ++i) {\r\n                var existing = this.eventRegistrations_[i];\r\n                if (!existing.matches(eventRegistration)) {\r\n                    remaining.push(existing);\r\n                }\r\n                else if (eventRegistration.hasAnyCallback()) {\r\n                    // We're removing just this one\r\n                    remaining = remaining.concat(this.eventRegistrations_.slice(i + 1));\r\n                    break;\r\n                }\r\n            }\r\n            this.eventRegistrations_ = remaining;\r\n        }\r\n        else {\r\n            this.eventRegistrations_ = [];\r\n        }\r\n        return cancelEvents;\r\n    };\r\n    /**\r\n     * Applies the given Operation, updates our cache, and returns the appropriate events.\r\n     *\r\n     * @param {!Operation} operation\r\n     * @param {!WriteTreeRef} writesCache\r\n     * @param {?Node} completeServerCache\r\n     * @return {!Array.<!Event>}\r\n     */\r\n    View.prototype.applyOperation = function (operation, writesCache, completeServerCache) {\r\n        if (operation.type === OperationType.MERGE &&\r\n            operation.source.queryId !== null) {\r\n            util.assert(this.viewCache_.getCompleteServerSnap(), 'We should always have a full cache before handling merges');\r\n            util.assert(this.viewCache_.getCompleteEventSnap(), 'Missing event cache, even though we have a server cache');\r\n        }\r\n        var oldViewCache = this.viewCache_;\r\n        var result = this.processor_.applyOperation(oldViewCache, operation, writesCache, completeServerCache);\r\n        this.processor_.assertIndexed(result.viewCache);\r\n        util.assert(result.viewCache.getServerCache().isFullyInitialized() ||\r\n            !oldViewCache.getServerCache().isFullyInitialized(), 'Once a server snap is complete, it should never go back');\r\n        this.viewCache_ = result.viewCache;\r\n        return this.generateEventsForChanges_(result.changes, result.viewCache.getEventCache().getNode(), null);\r\n    };\r\n    /**\r\n     * @param {!EventRegistration} registration\r\n     * @return {!Array.<!Event>}\r\n     */\r\n    View.prototype.getInitialEvents = function (registration) {\r\n        var eventSnap = this.viewCache_.getEventCache();\r\n        var initialChanges = [];\r\n        if (!eventSnap.getNode().isLeafNode()) {\r\n            var eventNode = eventSnap.getNode();\r\n            eventNode.forEachChild(PRIORITY_INDEX, function (key, childNode) {\r\n                initialChanges.push(Change.childAddedChange(key, childNode));\r\n            });\r\n        }\r\n        if (eventSnap.isFullyInitialized()) {\r\n            initialChanges.push(Change.valueChange(eventSnap.getNode()));\r\n        }\r\n        return this.generateEventsForChanges_(initialChanges, eventSnap.getNode(), registration);\r\n    };\r\n    /**\r\n     * @private\r\n     * @param {!Array.<!Change>} changes\r\n     * @param {!Node} eventCache\r\n     * @param {EventRegistration=} eventRegistration\r\n     * @return {!Array.<!Event>}\r\n     */\r\n    View.prototype.generateEventsForChanges_ = function (changes, eventCache, eventRegistration) {\r\n        var registrations = eventRegistration\r\n            ? [eventRegistration]\r\n            : this.eventRegistrations_;\r\n        return this.eventGenerator_.generateEventsForChanges(changes, eventCache, registrations);\r\n    };\r\n    return View;\r\n}());\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nvar __referenceConstructor$1;\r\n/**\r\n * SyncPoint represents a single location in a SyncTree with 1 or more event registrations, meaning we need to\r\n * maintain 1 or more Views at this location to cache server data and raise appropriate events for server changes\r\n * and user writes (set, transaction, update).\r\n *\r\n * It's responsible for:\r\n *  - Maintaining the set of 1 or more views necessary at this location (a SyncPoint with 0 views should be removed).\r\n *  - Proxying user / server operations to the views as appropriate (i.e. applyServerOverwrite,\r\n *    applyUserOverwrite, etc.)\r\n */\r\nvar SyncPoint = /** @class */ (function () {\r\n    function SyncPoint() {\r\n        /**\r\n         * The Views being tracked at this location in the tree, stored as a map where the key is a\r\n         * queryId and the value is the View for that query.\r\n         *\r\n         * NOTE: This list will be quite small (usually 1, but perhaps 2 or 3; any more is an odd use case).\r\n         *\r\n         * @type {!Object.<!string, !View>}\r\n         * @private\r\n         */\r\n        this.views_ = {};\r\n    }\r\n    Object.defineProperty(SyncPoint, \"__referenceConstructor\", {\r\n        get: function () {\r\n            util.assert(__referenceConstructor$1, 'Reference.ts has not been loaded');\r\n            return __referenceConstructor$1;\r\n        },\r\n        set: function (val) {\r\n            util.assert(!__referenceConstructor$1, '__referenceConstructor has already been defined');\r\n            __referenceConstructor$1 = val;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * @return {boolean}\r\n     */\r\n    SyncPoint.prototype.isEmpty = function () {\r\n        return util.isEmpty(this.views_);\r\n    };\r\n    /**\r\n     *\r\n     * @param {!Operation} operation\r\n     * @param {!WriteTreeRef} writesCache\r\n     * @param {?Node} optCompleteServerCache\r\n     * @return {!Array.<!Event>}\r\n     */\r\n    SyncPoint.prototype.applyOperation = function (operation, writesCache, optCompleteServerCache) {\r\n        var queryId = operation.source.queryId;\r\n        if (queryId !== null) {\r\n            var view = util.safeGet(this.views_, queryId);\r\n            util.assert(view != null, 'SyncTree gave us an op for an invalid query.');\r\n            return view.applyOperation(operation, writesCache, optCompleteServerCache);\r\n        }\r\n        else {\r\n            var events_1 = [];\r\n            util.forEach(this.views_, function (key, view) {\r\n                events_1 = events_1.concat(view.applyOperation(operation, writesCache, optCompleteServerCache));\r\n            });\r\n            return events_1;\r\n        }\r\n    };\r\n    /**\r\n     * Add an event callback for the specified query.\r\n     *\r\n     * @param {!Query} query\r\n     * @param {!EventRegistration} eventRegistration\r\n     * @param {!WriteTreeRef} writesCache\r\n     * @param {?Node} serverCache Complete server cache, if we have it.\r\n     * @param {boolean} serverCacheComplete\r\n     * @return {!Array.<!Event>} Events to raise.\r\n     */\r\n    SyncPoint.prototype.addEventRegistration = function (query, eventRegistration, writesCache, serverCache, serverCacheComplete) {\r\n        var queryId = query.queryIdentifier();\r\n        var view = util.safeGet(this.views_, queryId);\r\n        if (!view) {\r\n            // TODO: make writesCache take flag for complete server node\r\n            var eventCache = writesCache.calcCompleteEventCache(serverCacheComplete ? serverCache : null);\r\n            var eventCacheComplete = false;\r\n            if (eventCache) {\r\n                eventCacheComplete = true;\r\n            }\r\n            else if (serverCache instanceof ChildrenNode) {\r\n                eventCache = writesCache.calcCompleteEventChildren(serverCache);\r\n                eventCacheComplete = false;\r\n            }\r\n            else {\r\n                eventCache = ChildrenNode.EMPTY_NODE;\r\n                eventCacheComplete = false;\r\n            }\r\n            var viewCache = new ViewCache(new CacheNode(\r\n            /** @type {!Node} */ (eventCache), eventCacheComplete, false), new CacheNode(\r\n            /** @type {!Node} */ (serverCache), serverCacheComplete, false));\r\n            view = new View(query, viewCache);\r\n            this.views_[queryId] = view;\r\n        }\r\n        // This is guaranteed to exist now, we just created anything that was missing\r\n        view.addEventRegistration(eventRegistration);\r\n        return view.getInitialEvents(eventRegistration);\r\n    };\r\n    /**\r\n     * Remove event callback(s).  Return cancelEvents if a cancelError is specified.\r\n     *\r\n     * If query is the default query, we'll check all views for the specified eventRegistration.\r\n     * If eventRegistration is null, we'll remove all callbacks for the specified view(s).\r\n     *\r\n     * @param {!Query} query\r\n     * @param {?EventRegistration} eventRegistration If null, remove all callbacks.\r\n     * @param {Error=} cancelError If a cancelError is provided, appropriate cancel events will be returned.\r\n     * @return {{removed:!Array.<!Query>, events:!Array.<!Event>}} removed queries and any cancel events\r\n     */\r\n    SyncPoint.prototype.removeEventRegistration = function (query, eventRegistration, cancelError) {\r\n        var queryId = query.queryIdentifier();\r\n        var removed = [];\r\n        var cancelEvents = [];\r\n        var hadCompleteView = this.hasCompleteView();\r\n        if (queryId === 'default') {\r\n            // When you do ref.off(...), we search all views for the registration to remove.\r\n            var self_1 = this;\r\n            util.forEach(this.views_, function (viewQueryId, view) {\r\n                cancelEvents = cancelEvents.concat(view.removeEventRegistration(eventRegistration, cancelError));\r\n                if (view.isEmpty()) {\r\n                    delete self_1.views_[viewQueryId];\r\n                    // We'll deal with complete views later.\r\n                    if (!view\r\n                        .getQuery()\r\n                        .getQueryParams()\r\n                        .loadsAllData()) {\r\n                        removed.push(view.getQuery());\r\n                    }\r\n                }\r\n            });\r\n        }\r\n        else {\r\n            // remove the callback from the specific view.\r\n            var view = util.safeGet(this.views_, queryId);\r\n            if (view) {\r\n                cancelEvents = cancelEvents.concat(view.removeEventRegistration(eventRegistration, cancelError));\r\n                if (view.isEmpty()) {\r\n                    delete this.views_[queryId];\r\n                    // We'll deal with complete views later.\r\n                    if (!view\r\n                        .getQuery()\r\n                        .getQueryParams()\r\n                        .loadsAllData()) {\r\n                        removed.push(view.getQuery());\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        if (hadCompleteView && !this.hasCompleteView()) {\r\n            // We removed our last complete view.\r\n            removed.push(new SyncPoint.__referenceConstructor(query.repo, query.path));\r\n        }\r\n        return { removed: removed, events: cancelEvents };\r\n    };\r\n    /**\r\n     * @return {!Array.<!View>}\r\n     */\r\n    SyncPoint.prototype.getQueryViews = function () {\r\n        var _this = this;\r\n        var values = Object.keys(this.views_).map(function (key) { return _this.views_[key]; });\r\n        return values.filter(function (view) {\r\n            return !view\r\n                .getQuery()\r\n                .getQueryParams()\r\n                .loadsAllData();\r\n        });\r\n    };\r\n    /**\r\n     *\r\n     * @param {!Path} path The path to the desired complete snapshot\r\n     * @return {?Node} A complete cache, if it exists\r\n     */\r\n    SyncPoint.prototype.getCompleteServerCache = function (path) {\r\n        var serverCache = null;\r\n        util.forEach(this.views_, function (key, view) {\r\n            serverCache = serverCache || view.getCompleteServerCache(path);\r\n        });\r\n        return serverCache;\r\n    };\r\n    /**\r\n     * @param {!Query} query\r\n     * @return {?View}\r\n     */\r\n    SyncPoint.prototype.viewForQuery = function (query) {\r\n        var params = query.getQueryParams();\r\n        if (params.loadsAllData()) {\r\n            return this.getCompleteView();\r\n        }\r\n        else {\r\n            var queryId = query.queryIdentifier();\r\n            return util.safeGet(this.views_, queryId);\r\n        }\r\n    };\r\n    /**\r\n     * @param {!Query} query\r\n     * @return {boolean}\r\n     */\r\n    SyncPoint.prototype.viewExistsForQuery = function (query) {\r\n        return this.viewForQuery(query) != null;\r\n    };\r\n    /**\r\n     * @return {boolean}\r\n     */\r\n    SyncPoint.prototype.hasCompleteView = function () {\r\n        return this.getCompleteView() != null;\r\n    };\r\n    /**\r\n     * @return {?View}\r\n     */\r\n    SyncPoint.prototype.getCompleteView = function () {\r\n        var completeView = util.findValue(this.views_, function (view) {\r\n            return view\r\n                .getQuery()\r\n                .getQueryParams()\r\n                .loadsAllData();\r\n        });\r\n        return completeView || null;\r\n    };\r\n    return SyncPoint;\r\n}());\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * This class holds a collection of writes that can be applied to nodes in unison. It abstracts away the logic with\r\n * dealing with priority writes and multiple nested writes. At any given path there is only allowed to be one write\r\n * modifying that path. Any write to an existing path or shadowing an existing path will modify that existing write\r\n * to reflect the write added.\r\n *\r\n * @constructor\r\n * @param {!ImmutableTree.<!Node>} writeTree\r\n */\r\nvar CompoundWrite = /** @class */ (function () {\r\n    function CompoundWrite(writeTree_) {\r\n        this.writeTree_ = writeTree_;\r\n    }\r\n    /**\r\n     * @param {!Path} path\r\n     * @param {!Node} node\r\n     * @return {!CompoundWrite}\r\n     */\r\n    CompoundWrite.prototype.addWrite = function (path, node) {\r\n        if (path.isEmpty()) {\r\n            return new CompoundWrite(new ImmutableTree(node));\r\n        }\r\n        else {\r\n            var rootmost = this.writeTree_.findRootMostValueAndPath(path);\r\n            if (rootmost != null) {\r\n                var rootMostPath = rootmost.path;\r\n                var value = rootmost.value;\r\n                var relativePath = Path.relativePath(rootMostPath, path);\r\n                value = value.updateChild(relativePath, node);\r\n                return new CompoundWrite(this.writeTree_.set(rootMostPath, value));\r\n            }\r\n            else {\r\n                var subtree = new ImmutableTree(node);\r\n                var newWriteTree = this.writeTree_.setTree(path, subtree);\r\n                return new CompoundWrite(newWriteTree);\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * @param {!Path} path\r\n     * @param {!Object.<string, !Node>} updates\r\n     * @return {!CompoundWrite}\r\n     */\r\n    CompoundWrite.prototype.addWrites = function (path, updates) {\r\n        var newWrite = this;\r\n        util.forEach(updates, function (childKey, node) {\r\n            newWrite = newWrite.addWrite(path.child(childKey), node);\r\n        });\r\n        return newWrite;\r\n    };\r\n    /**\r\n     * Will remove a write at the given path and deeper paths. This will <em>not</em> modify a write at a higher\r\n     * location, which must be removed by calling this method with that path.\r\n     *\r\n     * @param {!Path} path The path at which a write and all deeper writes should be removed\r\n     * @return {!CompoundWrite} The new CompoundWrite with the removed path\r\n     */\r\n    CompoundWrite.prototype.removeWrite = function (path) {\r\n        if (path.isEmpty()) {\r\n            return CompoundWrite.Empty;\r\n        }\r\n        else {\r\n            var newWriteTree = this.writeTree_.setTree(path, ImmutableTree.Empty);\r\n            return new CompoundWrite(newWriteTree);\r\n        }\r\n    };\r\n    /**\r\n     * Returns whether this CompoundWrite will fully overwrite a node at a given location and can therefore be\r\n     * considered \"complete\".\r\n     *\r\n     * @param {!Path} path The path to check for\r\n     * @return {boolean} Whether there is a complete write at that path\r\n     */\r\n    CompoundWrite.prototype.hasCompleteWrite = function (path) {\r\n        return this.getCompleteNode(path) != null;\r\n    };\r\n    /**\r\n     * Returns a node for a path if and only if the node is a \"complete\" overwrite at that path. This will not aggregate\r\n     * writes from deeper paths, but will return child nodes from a more shallow path.\r\n     *\r\n     * @param {!Path} path The path to get a complete write\r\n     * @return {?Node} The node if complete at that path, or null otherwise.\r\n     */\r\n    CompoundWrite.prototype.getCompleteNode = function (path) {\r\n        var rootmost = this.writeTree_.findRootMostValueAndPath(path);\r\n        if (rootmost != null) {\r\n            return this.writeTree_\r\n                .get(rootmost.path)\r\n                .getChild(Path.relativePath(rootmost.path, path));\r\n        }\r\n        else {\r\n            return null;\r\n        }\r\n    };\r\n    /**\r\n     * Returns all children that are guaranteed to be a complete overwrite.\r\n     *\r\n     * @return {!Array.<NamedNode>} A list of all complete children.\r\n     */\r\n    CompoundWrite.prototype.getCompleteChildren = function () {\r\n        var children = [];\r\n        var node = this.writeTree_.value;\r\n        if (node != null) {\r\n            // If it's a leaf node, it has no children; so nothing to do.\r\n            if (!node.isLeafNode()) {\r\n                node.forEachChild(PRIORITY_INDEX, function (childName, childNode) {\r\n                    children.push(new NamedNode(childName, childNode));\r\n                });\r\n            }\r\n        }\r\n        else {\r\n            this.writeTree_.children.inorderTraversal(function (childName, childTree) {\r\n                if (childTree.value != null) {\r\n                    children.push(new NamedNode(childName, childTree.value));\r\n                }\r\n            });\r\n        }\r\n        return children;\r\n    };\r\n    /**\r\n     * @param {!Path} path\r\n     * @return {!CompoundWrite}\r\n     */\r\n    CompoundWrite.prototype.childCompoundWrite = function (path) {\r\n        if (path.isEmpty()) {\r\n            return this;\r\n        }\r\n        else {\r\n            var shadowingNode = this.getCompleteNode(path);\r\n            if (shadowingNode != null) {\r\n                return new CompoundWrite(new ImmutableTree(shadowingNode));\r\n            }\r\n            else {\r\n                return new CompoundWrite(this.writeTree_.subtree(path));\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * Returns true if this CompoundWrite is empty and therefore does not modify any nodes.\r\n     * @return {boolean} Whether this CompoundWrite is empty\r\n     */\r\n    CompoundWrite.prototype.isEmpty = function () {\r\n        return this.writeTree_.isEmpty();\r\n    };\r\n    /**\r\n     * Applies this CompoundWrite to a node. The node is returned with all writes from this CompoundWrite applied to the\r\n     * node\r\n     * @param {!Node} node The node to apply this CompoundWrite to\r\n     * @return {!Node} The node with all writes applied\r\n     */\r\n    CompoundWrite.prototype.apply = function (node) {\r\n        return CompoundWrite.applySubtreeWrite_(Path.Empty, this.writeTree_, node);\r\n    };\r\n    /**\r\n     * @type {!CompoundWrite}\r\n     */\r\n    CompoundWrite.Empty = new CompoundWrite(new ImmutableTree(null));\r\n    /**\r\n     * @param {!Path} relativePath\r\n     * @param {!ImmutableTree.<!Node>} writeTree\r\n     * @param {!Node} node\r\n     * @return {!Node}\r\n     * @private\r\n     */\r\n    CompoundWrite.applySubtreeWrite_ = function (relativePath, writeTree, node) {\r\n        if (writeTree.value != null) {\r\n            // Since there a write is always a leaf, we're done here\r\n            return node.updateChild(relativePath, writeTree.value);\r\n        }\r\n        else {\r\n            var priorityWrite_1 = null;\r\n            writeTree.children.inorderTraversal(function (childKey, childTree) {\r\n                if (childKey === '.priority') {\r\n                    // Apply priorities at the end so we don't update priorities for either empty nodes or forget\r\n                    // to apply priorities to empty nodes that are later filled\r\n                    util.assert(childTree.value !== null, 'Priority writes must always be leaf nodes');\r\n                    priorityWrite_1 = childTree.value;\r\n                }\r\n                else {\r\n                    node = CompoundWrite.applySubtreeWrite_(relativePath.child(childKey), childTree, node);\r\n                }\r\n            });\r\n            // If there was a priority write, we only apply it if the node is not empty\r\n            if (!node.getChild(relativePath).isEmpty() && priorityWrite_1 !== null) {\r\n                node = node.updateChild(relativePath.child('.priority'), priorityWrite_1);\r\n            }\r\n            return node;\r\n        }\r\n    };\r\n    return CompoundWrite;\r\n}());\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * WriteTree tracks all pending user-initiated writes and has methods to calculate the result of merging them\r\n * with underlying server data (to create \"event cache\" data).  Pending writes are added with addOverwrite()\r\n * and addMerge(), and removed with removeWrite().\r\n *\r\n * @constructor\r\n */\r\nvar WriteTree = /** @class */ (function () {\r\n    function WriteTree() {\r\n        /**\r\n         * A tree tracking the result of applying all visible writes.  This does not include transactions with\r\n         * applyLocally=false or writes that are completely shadowed by other writes.\r\n         *\r\n         * @type {!CompoundWrite}\r\n         * @private\r\n         */\r\n        this.visibleWrites_ = CompoundWrite.Empty;\r\n        /**\r\n         * A list of all pending writes, regardless of visibility and shadowed-ness.  Used to calculate arbitrary\r\n         * sets of the changed data, such as hidden writes (from transactions) or changes with certain writes excluded (also\r\n         * used by transactions).\r\n         *\r\n         * @type {!Array.<!WriteRecord>}\r\n         * @private\r\n         */\r\n        this.allWrites_ = [];\r\n        this.lastWriteId_ = -1;\r\n    }\r\n    /**\r\n     * Create a new WriteTreeRef for the given path. For use with a new sync point at the given path.\r\n     *\r\n     * @param {!Path} path\r\n     * @return {!WriteTreeRef}\r\n     */\r\n    WriteTree.prototype.childWrites = function (path) {\r\n        return new WriteTreeRef(path, this);\r\n    };\r\n    /**\r\n     * Record a new overwrite from user code.\r\n     *\r\n     * @param {!Path} path\r\n     * @param {!Node} snap\r\n     * @param {!number} writeId\r\n     * @param {boolean=} visible This is set to false by some transactions. It should be excluded from event caches\r\n     */\r\n    WriteTree.prototype.addOverwrite = function (path, snap, writeId, visible) {\r\n        util.assert(writeId > this.lastWriteId_, 'Stacking an older write on top of newer ones');\r\n        if (visible === undefined) {\r\n            visible = true;\r\n        }\r\n        this.allWrites_.push({\r\n            path: path,\r\n            snap: snap,\r\n            writeId: writeId,\r\n            visible: visible\r\n        });\r\n        if (visible) {\r\n            this.visibleWrites_ = this.visibleWrites_.addWrite(path, snap);\r\n        }\r\n        this.lastWriteId_ = writeId;\r\n    };\r\n    /**\r\n     * Record a new merge from user code.\r\n     *\r\n     * @param {!Path} path\r\n     * @param {!Object.<string, !Node>} changedChildren\r\n     * @param {!number} writeId\r\n     */\r\n    WriteTree.prototype.addMerge = function (path, changedChildren, writeId) {\r\n        util.assert(writeId > this.lastWriteId_, 'Stacking an older merge on top of newer ones');\r\n        this.allWrites_.push({\r\n            path: path,\r\n            children: changedChildren,\r\n            writeId: writeId,\r\n            visible: true\r\n        });\r\n        this.visibleWrites_ = this.visibleWrites_.addWrites(path, changedChildren);\r\n        this.lastWriteId_ = writeId;\r\n    };\r\n    /**\r\n     * @param {!number} writeId\r\n     * @return {?WriteRecord}\r\n     */\r\n    WriteTree.prototype.getWrite = function (writeId) {\r\n        for (var i = 0; i < this.allWrites_.length; i++) {\r\n            var record = this.allWrites_[i];\r\n            if (record.writeId === writeId) {\r\n                return record;\r\n            }\r\n        }\r\n        return null;\r\n    };\r\n    /**\r\n     * Remove a write (either an overwrite or merge) that has been successfully acknowledge by the server. Recalculates\r\n     * the tree if necessary.  We return true if it may have been visible, meaning views need to reevaluate.\r\n     *\r\n     * @param {!number} writeId\r\n     * @return {boolean} true if the write may have been visible (meaning we'll need to reevaluate / raise\r\n     * events as a result).\r\n     */\r\n    WriteTree.prototype.removeWrite = function (writeId) {\r\n        // Note: disabling this check. It could be a transaction that preempted another transaction, and thus was applied\r\n        // out of order.\r\n        //const validClear = revert || this.allWrites_.length === 0 || writeId <= this.allWrites_[0].writeId;\r\n        //assert(validClear, \"Either we don't have this write, or it's the first one in the queue\");\r\n        var _this = this;\r\n        var idx = this.allWrites_.findIndex(function (s) {\r\n            return s.writeId === writeId;\r\n        });\r\n        util.assert(idx >= 0, 'removeWrite called with nonexistent writeId.');\r\n        var writeToRemove = this.allWrites_[idx];\r\n        this.allWrites_.splice(idx, 1);\r\n        var removedWriteWasVisible = writeToRemove.visible;\r\n        var removedWriteOverlapsWithOtherWrites = false;\r\n        var i = this.allWrites_.length - 1;\r\n        while (removedWriteWasVisible && i >= 0) {\r\n            var currentWrite = this.allWrites_[i];\r\n            if (currentWrite.visible) {\r\n                if (i >= idx &&\r\n                    this.recordContainsPath_(currentWrite, writeToRemove.path)) {\r\n                    // The removed write was completely shadowed by a subsequent write.\r\n                    removedWriteWasVisible = false;\r\n                }\r\n                else if (writeToRemove.path.contains(currentWrite.path)) {\r\n                    // Either we're covering some writes or they're covering part of us (depending on which came first).\r\n                    removedWriteOverlapsWithOtherWrites = true;\r\n                }\r\n            }\r\n            i--;\r\n        }\r\n        if (!removedWriteWasVisible) {\r\n            return false;\r\n        }\r\n        else if (removedWriteOverlapsWithOtherWrites) {\r\n            // There's some shadowing going on. Just rebuild the visible writes from scratch.\r\n            this.resetTree_();\r\n            return true;\r\n        }\r\n        else {\r\n            // There's no shadowing.  We can safely just remove the write(s) from visibleWrites.\r\n            if (writeToRemove.snap) {\r\n                this.visibleWrites_ = this.visibleWrites_.removeWrite(writeToRemove.path);\r\n            }\r\n            else {\r\n                var children = writeToRemove.children;\r\n                util.forEach(children, function (childName) {\r\n                    _this.visibleWrites_ = _this.visibleWrites_.removeWrite(writeToRemove.path.child(childName));\r\n                });\r\n            }\r\n            return true;\r\n        }\r\n    };\r\n    /**\r\n     * Return a complete snapshot for the given path if there's visible write data at that path, else null.\r\n     * No server data is considered.\r\n     *\r\n     * @param {!Path} path\r\n     * @return {?Node}\r\n     */\r\n    WriteTree.prototype.getCompleteWriteData = function (path) {\r\n        return this.visibleWrites_.getCompleteNode(path);\r\n    };\r\n    /**\r\n     * Given optional, underlying server data, and an optional set of constraints (exclude some sets, include hidden\r\n     * writes), attempt to calculate a complete snapshot for the given path\r\n     *\r\n     * @param {!Path} treePath\r\n     * @param {?Node} completeServerCache\r\n     * @param {Array.<number>=} writeIdsToExclude An optional set to be excluded\r\n     * @param {boolean=} includeHiddenWrites Defaults to false, whether or not to layer on writes with visible set to false\r\n     * @return {?Node}\r\n     */\r\n    WriteTree.prototype.calcCompleteEventCache = function (treePath, completeServerCache, writeIdsToExclude, includeHiddenWrites) {\r\n        if (!writeIdsToExclude && !includeHiddenWrites) {\r\n            var shadowingNode = this.visibleWrites_.getCompleteNode(treePath);\r\n            if (shadowingNode != null) {\r\n                return shadowingNode;\r\n            }\r\n            else {\r\n                var subMerge = this.visibleWrites_.childCompoundWrite(treePath);\r\n                if (subMerge.isEmpty()) {\r\n                    return completeServerCache;\r\n                }\r\n                else if (completeServerCache == null &&\r\n                    !subMerge.hasCompleteWrite(Path.Empty)) {\r\n                    // We wouldn't have a complete snapshot, since there's no underlying data and no complete shadow\r\n                    return null;\r\n                }\r\n                else {\r\n                    var layeredCache = completeServerCache || ChildrenNode.EMPTY_NODE;\r\n                    return subMerge.apply(layeredCache);\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            var merge = this.visibleWrites_.childCompoundWrite(treePath);\r\n            if (!includeHiddenWrites && merge.isEmpty()) {\r\n                return completeServerCache;\r\n            }\r\n            else {\r\n                // If the server cache is null, and we don't have a complete cache, we need to return null\r\n                if (!includeHiddenWrites &&\r\n                    completeServerCache == null &&\r\n                    !merge.hasCompleteWrite(Path.Empty)) {\r\n                    return null;\r\n                }\r\n                else {\r\n                    var filter = function (write) {\r\n                        return ((write.visible || includeHiddenWrites) &&\r\n                            (!writeIdsToExclude ||\r\n                                !~writeIdsToExclude.indexOf(write.writeId)) &&\r\n                            (write.path.contains(treePath) || treePath.contains(write.path)));\r\n                    };\r\n                    var mergeAtPath = WriteTree.layerTree_(this.allWrites_, filter, treePath);\r\n                    var layeredCache = completeServerCache || ChildrenNode.EMPTY_NODE;\r\n                    return mergeAtPath.apply(layeredCache);\r\n                }\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * With optional, underlying server data, attempt to return a children node of children that we have complete data for.\r\n     * Used when creating new views, to pre-fill their complete event children snapshot.\r\n     *\r\n     * @param {!Path} treePath\r\n     * @param {?ChildrenNode} completeServerChildren\r\n     * @return {!ChildrenNode}\r\n     */\r\n    WriteTree.prototype.calcCompleteEventChildren = function (treePath, completeServerChildren) {\r\n        var completeChildren = ChildrenNode.EMPTY_NODE;\r\n        var topLevelSet = this.visibleWrites_.getCompleteNode(treePath);\r\n        if (topLevelSet) {\r\n            if (!topLevelSet.isLeafNode()) {\r\n                // we're shadowing everything. Return the children.\r\n                topLevelSet.forEachChild(PRIORITY_INDEX, function (childName, childSnap) {\r\n                    completeChildren = completeChildren.updateImmediateChild(childName, childSnap);\r\n                });\r\n            }\r\n            return completeChildren;\r\n        }\r\n        else if (completeServerChildren) {\r\n            // Layer any children we have on top of this\r\n            // We know we don't have a top-level set, so just enumerate existing children\r\n            var merge_1 = this.visibleWrites_.childCompoundWrite(treePath);\r\n            completeServerChildren.forEachChild(PRIORITY_INDEX, function (childName, childNode) {\r\n                var node = merge_1\r\n                    .childCompoundWrite(new Path(childName))\r\n                    .apply(childNode);\r\n                completeChildren = completeChildren.updateImmediateChild(childName, node);\r\n            });\r\n            // Add any complete children we have from the set\r\n            merge_1.getCompleteChildren().forEach(function (namedNode) {\r\n                completeChildren = completeChildren.updateImmediateChild(namedNode.name, namedNode.node);\r\n            });\r\n            return completeChildren;\r\n        }\r\n        else {\r\n            // We don't have anything to layer on top of. Layer on any children we have\r\n            // Note that we can return an empty snap if we have a defined delete\r\n            var merge = this.visibleWrites_.childCompoundWrite(treePath);\r\n            merge.getCompleteChildren().forEach(function (namedNode) {\r\n                completeChildren = completeChildren.updateImmediateChild(namedNode.name, namedNode.node);\r\n            });\r\n            return completeChildren;\r\n        }\r\n    };\r\n    /**\r\n     * Given that the underlying server data has updated, determine what, if anything, needs to be\r\n     * applied to the event cache.\r\n     *\r\n     * Possibilities:\r\n     *\r\n     * 1. No writes are shadowing. Events should be raised, the snap to be applied comes from the server data\r\n     *\r\n     * 2. Some write is completely shadowing. No events to be raised\r\n     *\r\n     * 3. Is partially shadowed. Events\r\n     *\r\n     * Either existingEventSnap or existingServerSnap must exist\r\n     *\r\n     * @param {!Path} treePath\r\n     * @param {!Path} childPath\r\n     * @param {?Node} existingEventSnap\r\n     * @param {?Node} existingServerSnap\r\n     * @return {?Node}\r\n     */\r\n    WriteTree.prototype.calcEventCacheAfterServerOverwrite = function (treePath, childPath, existingEventSnap, existingServerSnap) {\r\n        util.assert(existingEventSnap || existingServerSnap, 'Either existingEventSnap or existingServerSnap must exist');\r\n        var path = treePath.child(childPath);\r\n        if (this.visibleWrites_.hasCompleteWrite(path)) {\r\n            // At this point we can probably guarantee that we're in case 2, meaning no events\r\n            // May need to check visibility while doing the findRootMostValueAndPath call\r\n            return null;\r\n        }\r\n        else {\r\n            // No complete shadowing. We're either partially shadowing or not shadowing at all.\r\n            var childMerge = this.visibleWrites_.childCompoundWrite(path);\r\n            if (childMerge.isEmpty()) {\r\n                // We're not shadowing at all. Case 1\r\n                return existingServerSnap.getChild(childPath);\r\n            }\r\n            else {\r\n                // This could be more efficient if the serverNode + updates doesn't change the eventSnap\r\n                // However this is tricky to find out, since user updates don't necessary change the server\r\n                // snap, e.g. priority updates on empty nodes, or deep deletes. Another special case is if the server\r\n                // adds nodes, but doesn't change any existing writes. It is therefore not enough to\r\n                // only check if the updates change the serverNode.\r\n                // Maybe check if the merge tree contains these special cases and only do a full overwrite in that case?\r\n                return childMerge.apply(existingServerSnap.getChild(childPath));\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * Returns a complete child for a given server snap after applying all user writes or null if there is no\r\n     * complete child for this ChildKey.\r\n     *\r\n     * @param {!Path} treePath\r\n     * @param {!string} childKey\r\n     * @param {!CacheNode} existingServerSnap\r\n     * @return {?Node}\r\n     */\r\n    WriteTree.prototype.calcCompleteChild = function (treePath, childKey, existingServerSnap) {\r\n        var path = treePath.child(childKey);\r\n        var shadowingNode = this.visibleWrites_.getCompleteNode(path);\r\n        if (shadowingNode != null) {\r\n            return shadowingNode;\r\n        }\r\n        else {\r\n            if (existingServerSnap.isCompleteForChild(childKey)) {\r\n                var childMerge = this.visibleWrites_.childCompoundWrite(path);\r\n                return childMerge.apply(existingServerSnap.getNode().getImmediateChild(childKey));\r\n            }\r\n            else {\r\n                return null;\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * Returns a node if there is a complete overwrite for this path. More specifically, if there is a write at\r\n     * a higher path, this will return the child of that write relative to the write and this path.\r\n     * Returns null if there is no write at this path.\r\n     *\r\n     * @param {!Path} path\r\n     * @return {?Node}\r\n     */\r\n    WriteTree.prototype.shadowingWrite = function (path) {\r\n        return this.visibleWrites_.getCompleteNode(path);\r\n    };\r\n    /**\r\n     * This method is used when processing child remove events on a query. If we can, we pull in children that were outside\r\n     * the window, but may now be in the window.\r\n     *\r\n     * @param {!Path} treePath\r\n     * @param {?Node} completeServerData\r\n     * @param {!NamedNode} startPost\r\n     * @param {!number} count\r\n     * @param {boolean} reverse\r\n     * @param {!Index} index\r\n     * @return {!Array.<!NamedNode>}\r\n     */\r\n    WriteTree.prototype.calcIndexedSlice = function (treePath, completeServerData, startPost, count, reverse, index) {\r\n        var toIterate;\r\n        var merge = this.visibleWrites_.childCompoundWrite(treePath);\r\n        var shadowingNode = merge.getCompleteNode(Path.Empty);\r\n        if (shadowingNode != null) {\r\n            toIterate = shadowingNode;\r\n        }\r\n        else if (completeServerData != null) {\r\n            toIterate = merge.apply(completeServerData);\r\n        }\r\n        else {\r\n            // no children to iterate on\r\n            return [];\r\n        }\r\n        toIterate = toIterate.withIndex(index);\r\n        if (!toIterate.isEmpty() && !toIterate.isLeafNode()) {\r\n            var nodes = [];\r\n            var cmp = index.getCompare();\r\n            var iter = reverse\r\n                ? toIterate.getReverseIteratorFrom(startPost, index)\r\n                : toIterate.getIteratorFrom(startPost, index);\r\n            var next = iter.getNext();\r\n            while (next && nodes.length < count) {\r\n                if (cmp(next, startPost) !== 0) {\r\n                    nodes.push(next);\r\n                }\r\n                next = iter.getNext();\r\n            }\r\n            return nodes;\r\n        }\r\n        else {\r\n            return [];\r\n        }\r\n    };\r\n    /**\r\n     * @param {!WriteRecord} writeRecord\r\n     * @param {!Path} path\r\n     * @return {boolean}\r\n     * @private\r\n     */\r\n    WriteTree.prototype.recordContainsPath_ = function (writeRecord, path) {\r\n        if (writeRecord.snap) {\r\n            return writeRecord.path.contains(path);\r\n        }\r\n        else {\r\n            // findKey can return undefined, so use !! to coerce to boolean\r\n            return !!util.findKey(writeRecord.children, function (childSnap, childName) {\r\n                return writeRecord.path.child(childName).contains(path);\r\n            });\r\n        }\r\n    };\r\n    /**\r\n     * Re-layer the writes and merges into a tree so we can efficiently calculate event snapshots\r\n     * @private\r\n     */\r\n    WriteTree.prototype.resetTree_ = function () {\r\n        this.visibleWrites_ = WriteTree.layerTree_(this.allWrites_, WriteTree.DefaultFilter_, Path.Empty);\r\n        if (this.allWrites_.length > 0) {\r\n            this.lastWriteId_ = this.allWrites_[this.allWrites_.length - 1].writeId;\r\n        }\r\n        else {\r\n            this.lastWriteId_ = -1;\r\n        }\r\n    };\r\n    /**\r\n     * The default filter used when constructing the tree. Keep everything that's visible.\r\n     *\r\n     * @param {!WriteRecord} write\r\n     * @return {boolean}\r\n     * @private\r\n     */\r\n    WriteTree.DefaultFilter_ = function (write) {\r\n        return write.visible;\r\n    };\r\n    /**\r\n     * Static method. Given an array of WriteRecords, a filter for which ones to include, and a path, construct the tree of\r\n     * event data at that path.\r\n     *\r\n     * @param {!Array.<!WriteRecord>} writes\r\n     * @param {!function(!WriteRecord):boolean} filter\r\n     * @param {!Path} treeRoot\r\n     * @return {!CompoundWrite}\r\n     * @private\r\n     */\r\n    WriteTree.layerTree_ = function (writes, filter, treeRoot) {\r\n        var compoundWrite = CompoundWrite.Empty;\r\n        for (var i = 0; i < writes.length; ++i) {\r\n            var write = writes[i];\r\n            // Theory, a later set will either:\r\n            // a) abort a relevant transaction, so no need to worry about excluding it from calculating that transaction\r\n            // b) not be relevant to a transaction (separate branch), so again will not affect the data for that transaction\r\n            if (filter(write)) {\r\n                var writePath = write.path;\r\n                var relativePath = void 0;\r\n                if (write.snap) {\r\n                    if (treeRoot.contains(writePath)) {\r\n                        relativePath = Path.relativePath(treeRoot, writePath);\r\n                        compoundWrite = compoundWrite.addWrite(relativePath, write.snap);\r\n                    }\r\n                    else if (writePath.contains(treeRoot)) {\r\n                        relativePath = Path.relativePath(writePath, treeRoot);\r\n                        compoundWrite = compoundWrite.addWrite(Path.Empty, write.snap.getChild(relativePath));\r\n                    }\r\n                    else {\r\n                        // There is no overlap between root path and write path, ignore write\r\n                    }\r\n                }\r\n                else if (write.children) {\r\n                    if (treeRoot.contains(writePath)) {\r\n                        relativePath = Path.relativePath(treeRoot, writePath);\r\n                        compoundWrite = compoundWrite.addWrites(relativePath, write.children);\r\n                    }\r\n                    else if (writePath.contains(treeRoot)) {\r\n                        relativePath = Path.relativePath(writePath, treeRoot);\r\n                        if (relativePath.isEmpty()) {\r\n                            compoundWrite = compoundWrite.addWrites(Path.Empty, write.children);\r\n                        }\r\n                        else {\r\n                            var child = util.safeGet(write.children, relativePath.getFront());\r\n                            if (child) {\r\n                                // There exists a child in this node that matches the root path\r\n                                var deepNode = child.getChild(relativePath.popFront());\r\n                                compoundWrite = compoundWrite.addWrite(Path.Empty, deepNode);\r\n                            }\r\n                        }\r\n                    }\r\n                    else {\r\n                        // There is no overlap between root path and write path, ignore write\r\n                    }\r\n                }\r\n                else {\r\n                    throw util.assertionError('WriteRecord should have .snap or .children');\r\n                }\r\n            }\r\n        }\r\n        return compoundWrite;\r\n    };\r\n    return WriteTree;\r\n}());\r\n/**\r\n * A WriteTreeRef wraps a WriteTree and a path, for convenient access to a particular subtree.  All of the methods\r\n * just proxy to the underlying WriteTree.\r\n *\r\n * @constructor\r\n */\r\nvar WriteTreeRef = /** @class */ (function () {\r\n    /**\r\n     * @param {!Path} path\r\n     * @param {!WriteTree} writeTree\r\n     */\r\n    function WriteTreeRef(path, writeTree) {\r\n        this.treePath_ = path;\r\n        this.writeTree_ = writeTree;\r\n    }\r\n    /**\r\n     * If possible, returns a complete event cache, using the underlying server data if possible. In addition, can be used\r\n     * to get a cache that includes hidden writes, and excludes arbitrary writes. Note that customizing the returned node\r\n     * can lead to a more expensive calculation.\r\n     *\r\n     * @param {?Node} completeServerCache\r\n     * @param {Array.<number>=} writeIdsToExclude Optional writes to exclude.\r\n     * @param {boolean=} includeHiddenWrites Defaults to false, whether or not to layer on writes with visible set to false\r\n     * @return {?Node}\r\n     */\r\n    WriteTreeRef.prototype.calcCompleteEventCache = function (completeServerCache, writeIdsToExclude, includeHiddenWrites) {\r\n        return this.writeTree_.calcCompleteEventCache(this.treePath_, completeServerCache, writeIdsToExclude, includeHiddenWrites);\r\n    };\r\n    /**\r\n     * If possible, returns a children node containing all of the complete children we have data for. The returned data is a\r\n     * mix of the given server data and write data.\r\n     *\r\n     * @param {?ChildrenNode} completeServerChildren\r\n     * @return {!ChildrenNode}\r\n     */\r\n    WriteTreeRef.prototype.calcCompleteEventChildren = function (completeServerChildren) {\r\n        return this.writeTree_.calcCompleteEventChildren(this.treePath_, completeServerChildren);\r\n    };\r\n    /**\r\n     * Given that either the underlying server data has updated or the outstanding writes have updated, determine what,\r\n     * if anything, needs to be applied to the event cache.\r\n     *\r\n     * Possibilities:\r\n     *\r\n     * 1. No writes are shadowing. Events should be raised, the snap to be applied comes from the server data\r\n     *\r\n     * 2. Some write is completely shadowing. No events to be raised\r\n     *\r\n     * 3. Is partially shadowed. Events should be raised\r\n     *\r\n     * Either existingEventSnap or existingServerSnap must exist, this is validated via an assert\r\n     *\r\n     * @param {!Path} path\r\n     * @param {?Node} existingEventSnap\r\n     * @param {?Node} existingServerSnap\r\n     * @return {?Node}\r\n     */\r\n    WriteTreeRef.prototype.calcEventCacheAfterServerOverwrite = function (path, existingEventSnap, existingServerSnap) {\r\n        return this.writeTree_.calcEventCacheAfterServerOverwrite(this.treePath_, path, existingEventSnap, existingServerSnap);\r\n    };\r\n    /**\r\n     * Returns a node if there is a complete overwrite for this path. More specifically, if there is a write at\r\n     * a higher path, this will return the child of that write relative to the write and this path.\r\n     * Returns null if there is no write at this path.\r\n     *\r\n     * @param {!Path} path\r\n     * @return {?Node}\r\n     */\r\n    WriteTreeRef.prototype.shadowingWrite = function (path) {\r\n        return this.writeTree_.shadowingWrite(this.treePath_.child(path));\r\n    };\r\n    /**\r\n     * This method is used when processing child remove events on a query. If we can, we pull in children that were outside\r\n     * the window, but may now be in the window\r\n     *\r\n     * @param {?Node} completeServerData\r\n     * @param {!NamedNode} startPost\r\n     * @param {!number} count\r\n     * @param {boolean} reverse\r\n     * @param {!Index} index\r\n     * @return {!Array.<!NamedNode>}\r\n     */\r\n    WriteTreeRef.prototype.calcIndexedSlice = function (completeServerData, startPost, count, reverse, index) {\r\n        return this.writeTree_.calcIndexedSlice(this.treePath_, completeServerData, startPost, count, reverse, index);\r\n    };\r\n    /**\r\n     * Returns a complete child for a given server snap after applying all user writes or null if there is no\r\n     * complete child for this ChildKey.\r\n     *\r\n     * @param {!string} childKey\r\n     * @param {!CacheNode} existingServerCache\r\n     * @return {?Node}\r\n     */\r\n    WriteTreeRef.prototype.calcCompleteChild = function (childKey, existingServerCache) {\r\n        return this.writeTree_.calcCompleteChild(this.treePath_, childKey, existingServerCache);\r\n    };\r\n    /**\r\n     * Return a WriteTreeRef for a child.\r\n     *\r\n     * @param {string} childName\r\n     * @return {!WriteTreeRef}\r\n     */\r\n    WriteTreeRef.prototype.child = function (childName) {\r\n        return new WriteTreeRef(this.treePath_.child(childName), this.writeTree_);\r\n    };\r\n    return WriteTreeRef;\r\n}());\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * SyncTree is the central class for managing event callback registration, data caching, views\r\n * (query processing), and event generation.  There are typically two SyncTree instances for\r\n * each Repo, one for the normal Firebase data, and one for the .info data.\r\n *\r\n * It has a number of responsibilities, including:\r\n *  - Tracking all user event callbacks (registered via addEventRegistration() and removeEventRegistration()).\r\n *  - Applying and caching data changes for user set(), transaction(), and update() calls\r\n *    (applyUserOverwrite(), applyUserMerge()).\r\n *  - Applying and caching data changes for server data changes (applyServerOverwrite(),\r\n *    applyServerMerge()).\r\n *  - Generating user-facing events for server and user changes (all of the apply* methods\r\n *    return the set of events that need to be raised as a result).\r\n *  - Maintaining the appropriate set of server listens to ensure we are always subscribed\r\n *    to the correct set of paths and queries to satisfy the current set of user event\r\n *    callbacks (listens are started/stopped using the provided listenProvider).\r\n *\r\n * NOTE: Although SyncTree tracks event callbacks and calculates events to raise, the actual\r\n * events are returned to the caller rather than raised synchronously.\r\n *\r\n * @constructor\r\n */\r\nvar SyncTree = /** @class */ (function () {\r\n    /**\r\n     * @param {!ListenProvider} listenProvider_ Used by SyncTree to start / stop listening\r\n     *   to server data.\r\n     */\r\n    function SyncTree(listenProvider_) {\r\n        this.listenProvider_ = listenProvider_;\r\n        /**\r\n         * Tree of SyncPoints.  There's a SyncPoint at any location that has 1 or more views.\r\n         * @type {!ImmutableTree.<!SyncPoint>}\r\n         * @private\r\n         */\r\n        this.syncPointTree_ = ImmutableTree.Empty;\r\n        /**\r\n         * A tree of all pending user writes (user-initiated set()'s, transaction()'s, update()'s, etc.).\r\n         * @type {!WriteTree}\r\n         * @private\r\n         */\r\n        this.pendingWriteTree_ = new WriteTree();\r\n        this.tagToQueryMap_ = {};\r\n        this.queryToTagMap_ = {};\r\n    }\r\n    /**\r\n     * Apply the data changes for a user-generated set() or transaction() call.\r\n     *\r\n     * @param {!Path} path\r\n     * @param {!Node} newData\r\n     * @param {number} writeId\r\n     * @param {boolean=} visible\r\n     * @return {!Array.<!Event>} Events to raise.\r\n     */\r\n    SyncTree.prototype.applyUserOverwrite = function (path, newData, writeId, visible) {\r\n        // Record pending write.\r\n        this.pendingWriteTree_.addOverwrite(path, newData, writeId, visible);\r\n        if (!visible) {\r\n            return [];\r\n        }\r\n        else {\r\n            return this.applyOperationToSyncPoints_(new Overwrite(OperationSource.User, path, newData));\r\n        }\r\n    };\r\n    /**\r\n     * Apply the data from a user-generated update() call\r\n     *\r\n     * @param {!Path} path\r\n     * @param {!Object.<string, !Node>} changedChildren\r\n     * @param {!number} writeId\r\n     * @return {!Array.<!Event>} Events to raise.\r\n     */\r\n    SyncTree.prototype.applyUserMerge = function (path, changedChildren, writeId) {\r\n        // Record pending merge.\r\n        this.pendingWriteTree_.addMerge(path, changedChildren, writeId);\r\n        var changeTree = ImmutableTree.fromObject(changedChildren);\r\n        return this.applyOperationToSyncPoints_(new Merge(OperationSource.User, path, changeTree));\r\n    };\r\n    /**\r\n     * Acknowledge a pending user write that was previously registered with applyUserOverwrite() or applyUserMerge().\r\n     *\r\n     * @param {!number} writeId\r\n     * @param {boolean=} revert True if the given write failed and needs to be reverted\r\n     * @return {!Array.<!Event>} Events to raise.\r\n     */\r\n    SyncTree.prototype.ackUserWrite = function (writeId, revert) {\r\n        if (revert === void 0) { revert = false; }\r\n        var write = this.pendingWriteTree_.getWrite(writeId);\r\n        var needToReevaluate = this.pendingWriteTree_.removeWrite(writeId);\r\n        if (!needToReevaluate) {\r\n            return [];\r\n        }\r\n        else {\r\n            var affectedTree_1 = ImmutableTree.Empty;\r\n            if (write.snap != null) {\r\n                // overwrite\r\n                affectedTree_1 = affectedTree_1.set(Path.Empty, true);\r\n            }\r\n            else {\r\n                util.forEach(write.children, function (pathString, node) {\r\n                    affectedTree_1 = affectedTree_1.set(new Path(pathString), node);\r\n                });\r\n            }\r\n            return this.applyOperationToSyncPoints_(new AckUserWrite(write.path, affectedTree_1, revert));\r\n        }\r\n    };\r\n    /**\r\n     * Apply new server data for the specified path..\r\n     *\r\n     * @param {!Path} path\r\n     * @param {!Node} newData\r\n     * @return {!Array.<!Event>} Events to raise.\r\n     */\r\n    SyncTree.prototype.applyServerOverwrite = function (path, newData) {\r\n        return this.applyOperationToSyncPoints_(new Overwrite(OperationSource.Server, path, newData));\r\n    };\r\n    /**\r\n     * Apply new server data to be merged in at the specified path.\r\n     *\r\n     * @param {!Path} path\r\n     * @param {!Object.<string, !Node>} changedChildren\r\n     * @return {!Array.<!Event>} Events to raise.\r\n     */\r\n    SyncTree.prototype.applyServerMerge = function (path, changedChildren) {\r\n        var changeTree = ImmutableTree.fromObject(changedChildren);\r\n        return this.applyOperationToSyncPoints_(new Merge(OperationSource.Server, path, changeTree));\r\n    };\r\n    /**\r\n     * Apply a listen complete for a query\r\n     *\r\n     * @param {!Path} path\r\n     * @return {!Array.<!Event>} Events to raise.\r\n     */\r\n    SyncTree.prototype.applyListenComplete = function (path) {\r\n        return this.applyOperationToSyncPoints_(new ListenComplete(OperationSource.Server, path));\r\n    };\r\n    /**\r\n     * Apply new server data for the specified tagged query.\r\n     *\r\n     * @param {!Path} path\r\n     * @param {!Node} snap\r\n     * @param {!number} tag\r\n     * @return {!Array.<!Event>} Events to raise.\r\n     */\r\n    SyncTree.prototype.applyTaggedQueryOverwrite = function (path, snap, tag) {\r\n        var queryKey = this.queryKeyForTag_(tag);\r\n        if (queryKey != null) {\r\n            var r = SyncTree.parseQueryKey_(queryKey);\r\n            var queryPath = r.path, queryId = r.queryId;\r\n            var relativePath = Path.relativePath(queryPath, path);\r\n            var op = new Overwrite(OperationSource.forServerTaggedQuery(queryId), relativePath, snap);\r\n            return this.applyTaggedOperation_(queryPath, op);\r\n        }\r\n        else {\r\n            // Query must have been removed already\r\n            return [];\r\n        }\r\n    };\r\n    /**\r\n     * Apply server data to be merged in for the specified tagged query.\r\n     *\r\n     * @param {!Path} path\r\n     * @param {!Object.<string, !Node>} changedChildren\r\n     * @param {!number} tag\r\n     * @return {!Array.<!Event>} Events to raise.\r\n     */\r\n    SyncTree.prototype.applyTaggedQueryMerge = function (path, changedChildren, tag) {\r\n        var queryKey = this.queryKeyForTag_(tag);\r\n        if (queryKey) {\r\n            var r = SyncTree.parseQueryKey_(queryKey);\r\n            var queryPath = r.path, queryId = r.queryId;\r\n            var relativePath = Path.relativePath(queryPath, path);\r\n            var changeTree = ImmutableTree.fromObject(changedChildren);\r\n            var op = new Merge(OperationSource.forServerTaggedQuery(queryId), relativePath, changeTree);\r\n            return this.applyTaggedOperation_(queryPath, op);\r\n        }\r\n        else {\r\n            // We've already removed the query. No big deal, ignore the update\r\n            return [];\r\n        }\r\n    };\r\n    /**\r\n     * Apply a listen complete for a tagged query\r\n     *\r\n     * @param {!Path} path\r\n     * @param {!number} tag\r\n     * @return {!Array.<!Event>} Events to raise.\r\n     */\r\n    SyncTree.prototype.applyTaggedListenComplete = function (path, tag) {\r\n        var queryKey = this.queryKeyForTag_(tag);\r\n        if (queryKey) {\r\n            var r = SyncTree.parseQueryKey_(queryKey);\r\n            var queryPath = r.path, queryId = r.queryId;\r\n            var relativePath = Path.relativePath(queryPath, path);\r\n            var op = new ListenComplete(OperationSource.forServerTaggedQuery(queryId), relativePath);\r\n            return this.applyTaggedOperation_(queryPath, op);\r\n        }\r\n        else {\r\n            // We've already removed the query. No big deal, ignore the update\r\n            return [];\r\n        }\r\n    };\r\n    /**\r\n     * Add an event callback for the specified query.\r\n     *\r\n     * @param {!Query} query\r\n     * @param {!EventRegistration} eventRegistration\r\n     * @return {!Array.<!Event>} Events to raise.\r\n     */\r\n    SyncTree.prototype.addEventRegistration = function (query, eventRegistration) {\r\n        var path = query.path;\r\n        var serverCache = null;\r\n        var foundAncestorDefaultView = false;\r\n        // Any covering writes will necessarily be at the root, so really all we need to find is the server cache.\r\n        // Consider optimizing this once there's a better understanding of what actual behavior will be.\r\n        this.syncPointTree_.foreachOnPath(path, function (pathToSyncPoint, sp) {\r\n            var relativePath = Path.relativePath(pathToSyncPoint, path);\r\n            serverCache = serverCache || sp.getCompleteServerCache(relativePath);\r\n            foundAncestorDefaultView =\r\n                foundAncestorDefaultView || sp.hasCompleteView();\r\n        });\r\n        var syncPoint = this.syncPointTree_.get(path);\r\n        if (!syncPoint) {\r\n            syncPoint = new SyncPoint();\r\n            this.syncPointTree_ = this.syncPointTree_.set(path, syncPoint);\r\n        }\r\n        else {\r\n            foundAncestorDefaultView =\r\n                foundAncestorDefaultView || syncPoint.hasCompleteView();\r\n            serverCache = serverCache || syncPoint.getCompleteServerCache(Path.Empty);\r\n        }\r\n        var serverCacheComplete;\r\n        if (serverCache != null) {\r\n            serverCacheComplete = true;\r\n        }\r\n        else {\r\n            serverCacheComplete = false;\r\n            serverCache = ChildrenNode.EMPTY_NODE;\r\n            var subtree = this.syncPointTree_.subtree(path);\r\n            subtree.foreachChild(function (childName, childSyncPoint) {\r\n                var completeCache = childSyncPoint.getCompleteServerCache(Path.Empty);\r\n                if (completeCache) {\r\n                    serverCache = serverCache.updateImmediateChild(childName, completeCache);\r\n                }\r\n            });\r\n        }\r\n        var viewAlreadyExists = syncPoint.viewExistsForQuery(query);\r\n        if (!viewAlreadyExists && !query.getQueryParams().loadsAllData()) {\r\n            // We need to track a tag for this query\r\n            var queryKey = SyncTree.makeQueryKey_(query);\r\n            util.assert(!(queryKey in this.queryToTagMap_), 'View does not exist, but we have a tag');\r\n            var tag = SyncTree.getNextQueryTag_();\r\n            this.queryToTagMap_[queryKey] = tag;\r\n            // Coerce to string to avoid sparse arrays.\r\n            this.tagToQueryMap_['_' + tag] = queryKey;\r\n        }\r\n        var writesCache = this.pendingWriteTree_.childWrites(path);\r\n        var events = syncPoint.addEventRegistration(query, eventRegistration, writesCache, serverCache, serverCacheComplete);\r\n        if (!viewAlreadyExists && !foundAncestorDefaultView) {\r\n            var view /** @type !View */ = syncPoint.viewForQuery(query);\r\n            events = events.concat(this.setupListener_(query, view));\r\n        }\r\n        return events;\r\n    };\r\n    /**\r\n     * Remove event callback(s).\r\n     *\r\n     * If query is the default query, we'll check all queries for the specified eventRegistration.\r\n     * If eventRegistration is null, we'll remove all callbacks for the specified query/queries.\r\n     *\r\n     * @param {!Query} query\r\n     * @param {?EventRegistration} eventRegistration If null, all callbacks are removed.\r\n     * @param {Error=} cancelError If a cancelError is provided, appropriate cancel events will be returned.\r\n     * @return {!Array.<!Event>} Cancel events, if cancelError was provided.\r\n     */\r\n    SyncTree.prototype.removeEventRegistration = function (query, eventRegistration, cancelError) {\r\n        var _this = this;\r\n        // Find the syncPoint first. Then deal with whether or not it has matching listeners\r\n        var path = query.path;\r\n        var maybeSyncPoint = this.syncPointTree_.get(path);\r\n        var cancelEvents = [];\r\n        // A removal on a default query affects all queries at that location. A removal on an indexed query, even one without\r\n        // other query constraints, does *not* affect all queries at that location. So this check must be for 'default', and\r\n        // not loadsAllData().\r\n        if (maybeSyncPoint &&\r\n            (query.queryIdentifier() === 'default' ||\r\n                maybeSyncPoint.viewExistsForQuery(query))) {\r\n            /**\r\n             * @type {{removed: !Array.<!Query>, events: !Array.<!Event>}}\r\n             */\r\n            var removedAndEvents = maybeSyncPoint.removeEventRegistration(query, eventRegistration, cancelError);\r\n            if (maybeSyncPoint.isEmpty()) {\r\n                this.syncPointTree_ = this.syncPointTree_.remove(path);\r\n            }\r\n            var removed = removedAndEvents.removed;\r\n            cancelEvents = removedAndEvents.events;\r\n            // We may have just removed one of many listeners and can short-circuit this whole process\r\n            // We may also not have removed a default listener, in which case all of the descendant listeners should already be\r\n            // properly set up.\r\n            //\r\n            // Since indexed queries can shadow if they don't have other query constraints, check for loadsAllData(), instead of\r\n            // queryId === 'default'\r\n            var removingDefault = -1 !==\r\n                removed.findIndex(function (query) {\r\n                    return query.getQueryParams().loadsAllData();\r\n                });\r\n            var covered = this.syncPointTree_.findOnPath(path, function (relativePath, parentSyncPoint) {\r\n                return parentSyncPoint.hasCompleteView();\r\n            });\r\n            if (removingDefault && !covered) {\r\n                var subtree = this.syncPointTree_.subtree(path);\r\n                // There are potentially child listeners. Determine what if any listens we need to send before executing the\r\n                // removal\r\n                if (!subtree.isEmpty()) {\r\n                    // We need to fold over our subtree and collect the listeners to send\r\n                    var newViews = this.collectDistinctViewsForSubTree_(subtree);\r\n                    // Ok, we've collected all the listens we need. Set them up.\r\n                    for (var i = 0; i < newViews.length; ++i) {\r\n                        var view = newViews[i], newQuery = view.getQuery();\r\n                        var listener = this.createListenerForView_(view);\r\n                        this.listenProvider_.startListening(SyncTree.queryForListening_(newQuery), this.tagForQuery_(newQuery), listener.hashFn, listener.onComplete);\r\n                    }\r\n                }\r\n                else {\r\n                    // There's nothing below us, so nothing we need to start listening on\r\n                }\r\n            }\r\n            // If we removed anything and we're not covered by a higher up listen, we need to stop listening on this query\r\n            // The above block has us covered in terms of making sure we're set up on listens lower in the tree.\r\n            // Also, note that if we have a cancelError, it's already been removed at the provider level.\r\n            if (!covered && removed.length > 0 && !cancelError) {\r\n                // If we removed a default, then we weren't listening on any of the other queries here. Just cancel the one\r\n                // default. Otherwise, we need to iterate through and cancel each individual query\r\n                if (removingDefault) {\r\n                    // We don't tag default listeners\r\n                    var defaultTag = null;\r\n                    this.listenProvider_.stopListening(SyncTree.queryForListening_(query), defaultTag);\r\n                }\r\n                else {\r\n                    removed.forEach(function (queryToRemove) {\r\n                        var tagToRemove = _this.queryToTagMap_[SyncTree.makeQueryKey_(queryToRemove)];\r\n                        _this.listenProvider_.stopListening(SyncTree.queryForListening_(queryToRemove), tagToRemove);\r\n                    });\r\n                }\r\n            }\r\n            // Now, clear all of the tags we're tracking for the removed listens\r\n            this.removeTags_(removed);\r\n        }\r\n        else {\r\n            // No-op, this listener must've been already removed\r\n        }\r\n        return cancelEvents;\r\n    };\r\n    /**\r\n     * Returns a complete cache, if we have one, of the data at a particular path. The location must have a listener above\r\n     * it, but as this is only used by transaction code, that should always be the case anyways.\r\n     *\r\n     * Note: this method will *include* hidden writes from transaction with applyLocally set to false.\r\n     * @param {!Path} path The path to the data we want\r\n     * @param {Array.<number>=} writeIdsToExclude A specific set to be excluded\r\n     * @return {?Node}\r\n     */\r\n    SyncTree.prototype.calcCompleteEventCache = function (path, writeIdsToExclude) {\r\n        var includeHiddenSets = true;\r\n        var writeTree = this.pendingWriteTree_;\r\n        var serverCache = this.syncPointTree_.findOnPath(path, function (pathSoFar, syncPoint) {\r\n            var relativePath = Path.relativePath(pathSoFar, path);\r\n            var serverCache = syncPoint.getCompleteServerCache(relativePath);\r\n            if (serverCache) {\r\n                return serverCache;\r\n            }\r\n        });\r\n        return writeTree.calcCompleteEventCache(path, serverCache, writeIdsToExclude, includeHiddenSets);\r\n    };\r\n    /**\r\n     * This collapses multiple unfiltered views into a single view, since we only need a single\r\n     * listener for them.\r\n     *\r\n     * @param {!ImmutableTree.<!SyncPoint>} subtree\r\n     * @return {!Array.<!View>}\r\n     * @private\r\n     */\r\n    SyncTree.prototype.collectDistinctViewsForSubTree_ = function (subtree) {\r\n        return subtree.fold(function (relativePath, maybeChildSyncPoint, childMap) {\r\n            if (maybeChildSyncPoint && maybeChildSyncPoint.hasCompleteView()) {\r\n                var completeView = maybeChildSyncPoint.getCompleteView();\r\n                return [completeView];\r\n            }\r\n            else {\r\n                // No complete view here, flatten any deeper listens into an array\r\n                var views_1 = [];\r\n                if (maybeChildSyncPoint) {\r\n                    views_1 = maybeChildSyncPoint.getQueryViews();\r\n                }\r\n                util.forEach(childMap, function (key, childViews) {\r\n                    views_1 = views_1.concat(childViews);\r\n                });\r\n                return views_1;\r\n            }\r\n        });\r\n    };\r\n    /**\r\n     * @param {!Array.<!Query>} queries\r\n     * @private\r\n     */\r\n    SyncTree.prototype.removeTags_ = function (queries) {\r\n        for (var j = 0; j < queries.length; ++j) {\r\n            var removedQuery = queries[j];\r\n            if (!removedQuery.getQueryParams().loadsAllData()) {\r\n                // We should have a tag for this\r\n                var removedQueryKey = SyncTree.makeQueryKey_(removedQuery);\r\n                var removedQueryTag = this.queryToTagMap_[removedQueryKey];\r\n                delete this.queryToTagMap_[removedQueryKey];\r\n                delete this.tagToQueryMap_['_' + removedQueryTag];\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * Normalizes a query to a query we send the server for listening\r\n     * @param {!Query} query\r\n     * @return {!Query} The normalized query\r\n     * @private\r\n     */\r\n    SyncTree.queryForListening_ = function (query) {\r\n        if (query.getQueryParams().loadsAllData() &&\r\n            !query.getQueryParams().isDefault()) {\r\n            // We treat queries that load all data as default queries\r\n            // Cast is necessary because ref() technically returns Firebase which is actually fb.api.Firebase which inherits\r\n            // from Query\r\n            return /** @type {!Query} */ query.getRef();\r\n        }\r\n        else {\r\n            return query;\r\n        }\r\n    };\r\n    /**\r\n     * For a given new listen, manage the de-duplication of outstanding subscriptions.\r\n     *\r\n     * @param {!Query} query\r\n     * @param {!View} view\r\n     * @return {!Array.<!Event>} This method can return events to support synchronous data sources\r\n     * @private\r\n     */\r\n    SyncTree.prototype.setupListener_ = function (query, view) {\r\n        var path = query.path;\r\n        var tag = this.tagForQuery_(query);\r\n        var listener = this.createListenerForView_(view);\r\n        var events = this.listenProvider_.startListening(SyncTree.queryForListening_(query), tag, listener.hashFn, listener.onComplete);\r\n        var subtree = this.syncPointTree_.subtree(path);\r\n        // The root of this subtree has our query. We're here because we definitely need to send a listen for that, but we\r\n        // may need to shadow other listens as well.\r\n        if (tag) {\r\n            util.assert(!subtree.value.hasCompleteView(), \"If we're adding a query, it shouldn't be shadowed\");\r\n        }\r\n        else {\r\n            // Shadow everything at or below this location, this is a default listener.\r\n            var queriesToStop = subtree.fold(function (relativePath, maybeChildSyncPoint, childMap) {\r\n                if (!relativePath.isEmpty() &&\r\n                    maybeChildSyncPoint &&\r\n                    maybeChildSyncPoint.hasCompleteView()) {\r\n                    return [maybeChildSyncPoint.getCompleteView().getQuery()];\r\n                }\r\n                else {\r\n                    // No default listener here, flatten any deeper queries into an array\r\n                    var queries_1 = [];\r\n                    if (maybeChildSyncPoint) {\r\n                        queries_1 = queries_1.concat(maybeChildSyncPoint.getQueryViews().map(function (view) { return view.getQuery(); }));\r\n                    }\r\n                    util.forEach(childMap, function (key, childQueries) {\r\n                        queries_1 = queries_1.concat(childQueries);\r\n                    });\r\n                    return queries_1;\r\n                }\r\n            });\r\n            for (var i = 0; i < queriesToStop.length; ++i) {\r\n                var queryToStop = queriesToStop[i];\r\n                this.listenProvider_.stopListening(SyncTree.queryForListening_(queryToStop), this.tagForQuery_(queryToStop));\r\n            }\r\n        }\r\n        return events;\r\n    };\r\n    /**\r\n     *\r\n     * @param {!View} view\r\n     * @return {{hashFn: function(), onComplete: function(!string, *)}}\r\n     * @private\r\n     */\r\n    SyncTree.prototype.createListenerForView_ = function (view) {\r\n        var _this = this;\r\n        var query = view.getQuery();\r\n        var tag = this.tagForQuery_(query);\r\n        return {\r\n            hashFn: function () {\r\n                var cache = view.getServerCache() || ChildrenNode.EMPTY_NODE;\r\n                return cache.hash();\r\n            },\r\n            onComplete: function (status) {\r\n                if (status === 'ok') {\r\n                    if (tag) {\r\n                        return _this.applyTaggedListenComplete(query.path, tag);\r\n                    }\r\n                    else {\r\n                        return _this.applyListenComplete(query.path);\r\n                    }\r\n                }\r\n                else {\r\n                    // If a listen failed, kill all of the listeners here, not just the one that triggered the error.\r\n                    // Note that this may need to be scoped to just this listener if we change permissions on filtered children\r\n                    var error$$1 = errorForServerCode(status, query);\r\n                    return _this.removeEventRegistration(query, \r\n                    /*eventRegistration*/ null, error$$1);\r\n                }\r\n            }\r\n        };\r\n    };\r\n    /**\r\n     * Given a query, computes a \"queryKey\" suitable for use in our queryToTagMap_.\r\n     * @private\r\n     * @param {!Query} query\r\n     * @return {string}\r\n     */\r\n    SyncTree.makeQueryKey_ = function (query) {\r\n        return query.path.toString() + '$' + query.queryIdentifier();\r\n    };\r\n    /**\r\n     * Given a queryKey (created by makeQueryKey), parse it back into a path and queryId.\r\n     * @private\r\n     * @param {!string} queryKey\r\n     * @return {{queryId: !string, path: !Path}}\r\n     */\r\n    SyncTree.parseQueryKey_ = function (queryKey) {\r\n        var splitIndex = queryKey.indexOf('$');\r\n        util.assert(splitIndex !== -1 && splitIndex < queryKey.length - 1, 'Bad queryKey.');\r\n        return {\r\n            queryId: queryKey.substr(splitIndex + 1),\r\n            path: new Path(queryKey.substr(0, splitIndex))\r\n        };\r\n    };\r\n    /**\r\n     * Return the query associated with the given tag, if we have one\r\n     * @param {!number} tag\r\n     * @return {?string}\r\n     * @private\r\n     */\r\n    SyncTree.prototype.queryKeyForTag_ = function (tag) {\r\n        return this.tagToQueryMap_['_' + tag];\r\n    };\r\n    /**\r\n     * Return the tag associated with the given query.\r\n     * @param {!Query} query\r\n     * @return {?number}\r\n     * @private\r\n     */\r\n    SyncTree.prototype.tagForQuery_ = function (query) {\r\n        var queryKey = SyncTree.makeQueryKey_(query);\r\n        return util.safeGet(this.queryToTagMap_, queryKey);\r\n    };\r\n    /**\r\n     * Static accessor for query tags.\r\n     * @return {number}\r\n     * @private\r\n     */\r\n    SyncTree.getNextQueryTag_ = function () {\r\n        return SyncTree.nextQueryTag_++;\r\n    };\r\n    /**\r\n     * A helper method to apply tagged operations\r\n     *\r\n     * @param {!Path} queryPath\r\n     * @param {!Operation} operation\r\n     * @return {!Array.<!Event>}\r\n     * @private\r\n     */\r\n    SyncTree.prototype.applyTaggedOperation_ = function (queryPath, operation) {\r\n        var syncPoint = this.syncPointTree_.get(queryPath);\r\n        util.assert(syncPoint, \"Missing sync point for query tag that we're tracking\");\r\n        var writesCache = this.pendingWriteTree_.childWrites(queryPath);\r\n        return syncPoint.applyOperation(operation, writesCache, \r\n        /*serverCache=*/ null);\r\n    };\r\n    /**\r\n     * A helper method that visits all descendant and ancestor SyncPoints, applying the operation.\r\n     *\r\n     * NOTES:\r\n     * - Descendant SyncPoints will be visited first (since we raise events depth-first).\r\n  \n     * - We call applyOperation() on each SyncPoint passing three things:\r\n     *   1. A version of the Operation that has been made relative to the SyncPoint location.\r\n     *   2. A WriteTreeRef of any writes we have cached at the SyncPoint location.\r\n     *   3. A snapshot Node with cached server data, if we have it.\r\n  \n     * - We concatenate all of the events returned by each SyncPoint and return the result.\r\n     *\r\n     * @param {!Operation} operation\r\n     * @return {!Array.<!Event>}\r\n     * @private\r\n     */\r\n    SyncTree.prototype.applyOperationToSyncPoints_ = function (operation) {\r\n        return this.applyOperationHelper_(operation, this.syncPointTree_, \r\n        /*serverCache=*/ null, this.pendingWriteTree_.childWrites(Path.Empty));\r\n    };\r\n    /**\r\n     * Recursive helper for applyOperationToSyncPoints_\r\n     *\r\n     * @private\r\n     * @param {!Operation} operation\r\n     * @param {ImmutableTree.<!SyncPoint>} syncPointTree\r\n     * @param {?Node} serverCache\r\n     * @param {!WriteTreeRef} writesCache\r\n     * @return {!Array.<!Event>}\r\n     */\r\n    SyncTree.prototype.applyOperationHelper_ = function (operation, syncPointTree, serverCache, writesCache) {\r\n        if (operation.path.isEmpty()) {\r\n            return this.applyOperationDescendantsHelper_(operation, syncPointTree, serverCache, writesCache);\r\n        }\r\n        else {\r\n            var syncPoint = syncPointTree.get(Path.Empty);\r\n            // If we don't have cached server data, see if we can get it from this SyncPoint.\r\n            if (serverCache == null && syncPoint != null) {\r\n                serverCache = syncPoint.getCompleteServerCache(Path.Empty);\r\n            }\r\n            var events = [];\r\n            var childName = operation.path.getFront();\r\n            var childOperation = operation.operationForChild(childName);\r\n            var childTree = syncPointTree.children.get(childName);\r\n            if (childTree && childOperation) {\r\n                var childServerCache = serverCache\r\n                    ? serverCache.getImmediateChild(childName)\r\n                    : null;\r\n                var childWritesCache = writesCache.child(childName);\r\n                events = events.concat(this.applyOperationHelper_(childOperation, childTree, childServerCache, childWritesCache));\r\n            }\r\n            if (syncPoint) {\r\n                events = events.concat(syncPoint.applyOperation(operation, writesCache, serverCache));\r\n            }\r\n            return events;\r\n        }\r\n    };\r\n    /**\r\n     * Recursive helper for applyOperationToSyncPoints_\r\n     *\r\n     * @private\r\n     * @param {!Operation} operation\r\n     * @param {ImmutableTree.<!SyncPoint>} syncPointTree\r\n     * @param {?Node} serverCache\r\n     * @param {!WriteTreeRef} writesCache\r\n     * @return {!Array.<!Event>}\r\n     */\r\n    SyncTree.prototype.applyOperationDescendantsHelper_ = function (operation, syncPointTree, serverCache, writesCache) {\r\n        var _this = this;\r\n        var syncPoint = syncPointTree.get(Path.Empty);\r\n        // If we don't have cached server data, see if we can get it from this SyncPoint.\r\n        if (serverCache == null && syncPoint != null) {\r\n            serverCache = syncPoint.getCompleteServerCache(Path.Empty);\r\n        }\r\n        var events = [];\r\n        syncPointTree.children.inorderTraversal(function (childName, childTree) {\r\n            var childServerCache = serverCache\r\n                ? serverCache.getImmediateChild(childName)\r\n                : null;\r\n            var childWritesCache = writesCache.child(childName);\r\n            var childOperation = operation.operationForChild(childName);\r\n            if (childOperation) {\r\n                events = events.concat(_this.applyOperationDescendantsHelper_(childOperation, childTree, childServerCache, childWritesCache));\r\n            }\r\n        });\r\n        if (syncPoint) {\r\n            events = events.concat(syncPoint.applyOperation(operation, writesCache, serverCache));\r\n        }\r\n        return events;\r\n    };\r\n    /**\r\n     * Static tracker for next query tag.\r\n     * @type {number}\r\n     * @private\r\n     */\r\n    SyncTree.nextQueryTag_ = 1;\r\n    return SyncTree;\r\n}());\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Mutable object which basically just stores a reference to the \"latest\" immutable snapshot.\r\n *\r\n * @constructor\r\n */\r\nvar SnapshotHolder = /** @class */ (function () {\r\n    function SnapshotHolder() {\r\n        this.rootNode_ = ChildrenNode.EMPTY_NODE;\r\n    }\r\n    SnapshotHolder.prototype.getNode = function (path) {\r\n        return this.rootNode_.getChild(path);\r\n    };\r\n    SnapshotHolder.prototype.updateSnapshot = function (path, newSnapshotNode) {\r\n        this.rootNode_ = this.rootNode_.updateChild(path, newSnapshotNode);\r\n    };\r\n    return SnapshotHolder;\r\n}());\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Abstraction around FirebaseApp's token fetching capabilities.\r\n */\r\nvar AuthTokenProvider = /** @class */ (function () {\r\n    /**\r\n     * @param {!FirebaseApp} app_\r\n     */\r\n    function AuthTokenProvider(app_) {\r\n        this.app_ = app_;\r\n    }\r\n    /**\r\n     * @param {boolean} forceRefresh\r\n     * @return {!Promise<FirebaseAuthTokenData>}\r\n     */\r\n    AuthTokenProvider.prototype.getToken = function (forceRefresh) {\r\n        return this.app_['INTERNAL']['getToken'](forceRefresh).then(null, \r\n        // .catch\r\n        function (error$$1) {\r\n            // TODO: Need to figure out all the cases this is raised and whether\r\n            // this makes sense.\r\n            if (error$$1 && error$$1.code === 'auth/token-not-initialized') {\r\n                log('Got auth/token-not-initialized error.  Treating as null token.');\r\n                return null;\r\n            }\r\n            else {\r\n                return Promise.reject(error$$1);\r\n            }\r\n        });\r\n    };\r\n    AuthTokenProvider.prototype.addTokenChangeListener = function (listener) {\r\n        // TODO: We might want to wrap the listener and call it with no args to\r\n        // avoid a leaky abstraction, but that makes removing the listener harder.\r\n        this.app_['INTERNAL']['addAuthTokenListener'](listener);\r\n    };\r\n    AuthTokenProvider.prototype.removeTokenChangeListener = function (listener) {\r\n        this.app_['INTERNAL']['removeAuthTokenListener'](listener);\r\n    };\r\n    AuthTokenProvider.prototype.notifyForInvalidToken = function () {\r\n        var errorMessage = 'Provided authentication credentials for the app named \"' +\r\n            this.app_.name +\r\n            '\" are invalid. This usually indicates your app was not ' +\r\n            'initialized correctly. ';\r\n        if ('credential' in this.app_.options) {\r\n            errorMessage +=\r\n                'Make sure the \"credential\" property provided to initializeApp() ' +\r\n                    'is authorized to access the specified \"databaseURL\" and is from the correct ' +\r\n                    'project.';\r\n        }\r\n        else if ('serviceAccount' in this.app_.options) {\r\n            errorMessage +=\r\n                'Make sure the \"serviceAccount\" property provided to initializeApp() ' +\r\n                    'is authorized to access the specified \"databaseURL\" and is from the correct ' +\r\n                    'project.';\r\n        }\r\n        else {\r\n            errorMessage +=\r\n                'Make sure the \"apiKey\" and \"databaseURL\" properties provided to ' +\r\n                    'initializeApp() match the values provided for your app at ' +\r\n                    'https://console.firebase.google.com/.';\r\n        }\r\n        warn(errorMessage);\r\n    };\r\n    return AuthTokenProvider;\r\n}());\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Tracks a collection of stats.\r\n *\r\n * @constructor\r\n */\r\nvar StatsCollection = /** @class */ (function () {\r\n    function StatsCollection() {\r\n        this.counters_ = {};\r\n    }\r\n    StatsCollection.prototype.incrementCounter = function (name, amount) {\r\n        if (amount === void 0) { amount = 1; }\r\n        if (!util.contains(this.counters_, name))\r\n            this.counters_[name] = 0;\r\n        this.counters_[name] += amount;\r\n    };\r\n    StatsCollection.prototype.get = function () {\r\n        return util.deepCopy(this.counters_);\r\n    };\r\n    return StatsCollection;\r\n}());\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nvar StatsManager = /** @class */ (function () {\r\n    function StatsManager() {\r\n    }\r\n    StatsManager.getCollection = function (repoInfo) {\r\n        var hashString = repoInfo.toString();\r\n        if (!this.collections_[hashString]) {\r\n            this.collections_[hashString] = new StatsCollection();\r\n        }\r\n        return this.collections_[hashString];\r\n    };\r\n    StatsManager.getOrCreateReporter = function (repoInfo, creatorFunction) {\r\n        var hashString = repoInfo.toString();\r\n        if (!this.reporters_[hashString]) {\r\n            this.reporters_[hashString] = creatorFunction();\r\n        }\r\n        return this.reporters_[hashString];\r\n    };\r\n    StatsManager.collections_ = {};\r\n    StatsManager.reporters_ = {};\r\n    return StatsManager;\r\n}());\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Returns the delta from the previous call to get stats.\r\n *\r\n * @param collection_ The collection to \"listen\" to.\r\n * @constructor\r\n */\r\nvar StatsListener = /** @class */ (function () {\r\n    function StatsListener(collection_) {\r\n        this.collection_ = collection_;\r\n        this.last_ = null;\r\n    }\r\n    StatsListener.prototype.get = function () {\r\n        var newStats = this.collection_.get();\r\n        var delta = util.clone(newStats);\r\n        if (this.last_) {\r\n            util.forEach(this.last_, function (stat, value) {\r\n                delta[stat] = delta[stat] - value;\r\n            });\r\n        }\r\n        this.last_ = newStats;\r\n        return delta;\r\n    };\r\n    return StatsListener;\r\n}());\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n// Assuming some apps may have a short amount of time on page, and a bulk of firebase operations probably\r\n// happen on page load, we try to report our first set of stats pretty quickly, but we wait at least 10\r\n// seconds to try to ensure the Firebase connection is established / settled.\r\nvar FIRST_STATS_MIN_TIME = 10 * 1000;\r\nvar FIRST_STATS_MAX_TIME = 30 * 1000;\r\n// We'll continue to report stats on average every 5 minutes.\r\nvar REPORT_STATS_INTERVAL = 5 * 60 * 1000;\r\n/**\r\n * @constructor\r\n */\r\nvar StatsReporter = /** @class */ (function () {\r\n    /**\r\n     * @param collection\r\n     * @param server_\r\n     */\r\n    function StatsReporter(collection, server_) {\r\n        this.server_ = server_;\r\n        this.statsToReport_ = {};\r\n        this.statsListener_ = new StatsListener(collection);\r\n        var timeout = FIRST_STATS_MIN_TIME +\r\n            (FIRST_STATS_MAX_TIME - FIRST_STATS_MIN_TIME) * Math.random();\r\n        setTimeoutNonBlocking(this.reportStats_.bind(this), Math.floor(timeout));\r\n    }\r\n    StatsReporter.prototype.includeStat = function (stat) {\r\n        this.statsToReport_[stat] = true;\r\n    };\r\n    StatsReporter.prototype.reportStats_ = function () {\r\n        var _this = this;\r\n        var stats = this.statsListener_.get();\r\n        var reportedStats = {};\r\n        var haveStatsToReport = false;\r\n        util.forEach(stats, function (stat, value) {\r\n            if (value > 0 && util.contains(_this.statsToReport_, stat)) {\r\n                reportedStats[stat] = value;\r\n                haveStatsToReport = true;\r\n            }\r\n        });\r\n        if (haveStatsToReport) {\r\n            this.server_.reportStats(reportedStats);\r\n        }\r\n        // queue our next run.\r\n        setTimeoutNonBlocking(this.reportStats_.bind(this), Math.floor(Math.random() * 2 * REPORT_STATS_INTERVAL));\r\n    };\r\n    return StatsReporter;\r\n}());\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * The event queue serves a few purposes:\r\n * 1. It ensures we maintain event order in the face of event callbacks doing operations that result in more\r\n *    events being queued.\r\n * 2. raiseQueuedEvents() handles being called reentrantly nicely.  That is, if in the course of raising events,\r\n *    raiseQueuedEvents() is called again, the \"inner\" call will pick up raising events where the \"outer\" call\r\n *    left off, ensuring that the events are still raised synchronously and in order.\r\n * 3. You can use raiseEventsAtPath and raiseEventsForChangedPath to ensure only relevant previously-queued\r\n *    events are raised synchronously.\r\n *\r\n * NOTE: This can all go away if/when we move to async events.\r\n *\r\n * @constructor\r\n */\r\nvar EventQueue = /** @class */ (function () {\r\n    function EventQueue() {\r\n        /**\r\n         * @private\r\n         * @type {!Array.<EventList>}\r\n         */\r\n        this.eventLists_ = [];\r\n        /**\r\n         * Tracks recursion depth of raiseQueuedEvents_, for debugging purposes.\r\n         * @private\r\n         * @type {!number}\r\n         */\r\n        this.recursionDepth_ = 0;\r\n    }\r\n    /**\r\n     * @param {!Array.<Event>} eventDataList The new events to queue.\r\n     */\r\n    EventQueue.prototype.queueEvents = function (eventDataList) {\r\n        // We group events by path, storing them in a single EventList, to make it easier to skip over them quickly.\r\n        var currList = null;\r\n        for (var i = 0; i < eventDataList.length; i++) {\r\n            var eventData = eventDataList[i];\r\n            var eventPath = eventData.getPath();\r\n            if (currList !== null && !eventPath.equals(currList.getPath())) {\r\n                this.eventLists_.push(currList);\r\n                currList = null;\r\n            }\r\n            if (currList === null) {\r\n                currList = new EventList(eventPath);\r\n            }\r\n            currList.add(eventData);\r\n        }\r\n        if (currList) {\r\n            this.eventLists_.push(currList);\r\n        }\r\n    };\r\n    /**\r\n     * Queues the specified events and synchronously raises all events (including previously queued ones)\r\n     * for the specified path.\r\n     *\r\n     * It is assumed that the new events are all for the specified path.\r\n     *\r\n     * @param {!Path} path The path to raise events for.\r\n     * @param {!Array.<Event>} eventDataList The new events to raise.\r\n     */\r\n    EventQueue.prototype.raiseEventsAtPath = function (path, eventDataList) {\r\n        this.queueEvents(eventDataList);\r\n        this.raiseQueuedEventsMatchingPredicate_(function (eventPath) {\r\n            return eventPath.equals(path);\r\n        });\r\n    };\r\n    /**\r\n     * Queues the specified events and synchronously raises all events (including previously queued ones) for\r\n     * locations related to the specified change path (i.e. all ancestors and descendants).\r\n     *\r\n     * It is assumed that the new events are all related (ancestor or descendant) to the specified path.\r\n     *\r\n     * @param {!Path} changedPath The path to raise events for.\r\n     * @param {!Array.<!Event>} eventDataList The events to raise\r\n     */\r\n    EventQueue.prototype.raiseEventsForChangedPath = function (changedPath, eventDataList) {\r\n        this.queueEvents(eventDataList);\r\n        this.raiseQueuedEventsMatchingPredicate_(function (eventPath) {\r\n            return eventPath.contains(changedPath) || changedPath.contains(eventPath);\r\n        });\r\n    };\r\n    /**\r\n     * @param {!function(!Path):boolean} predicate\r\n     * @private\r\n     */\r\n    EventQueue.prototype.raiseQueuedEventsMatchingPredicate_ = function (predicate) {\r\n        this.recursionDepth_++;\r\n        var sentAll = true;\r\n        for (var i = 0; i < this.eventLists_.length; i++) {\r\n            var eventList = this.eventLists_[i];\r\n            if (eventList) {\r\n                var eventPath = eventList.getPath();\r\n                if (predicate(eventPath)) {\r\n                    this.eventLists_[i].raise();\r\n                    this.eventLists_[i] = null;\r\n                }\r\n                else {\r\n                    sentAll = false;\r\n                }\r\n            }\r\n        }\r\n        if (sentAll) {\r\n            this.eventLists_ = [];\r\n        }\r\n        this.recursionDepth_--;\r\n    };\r\n    return EventQueue;\r\n}());\r\n/**\r\n * @param {!Path} path\r\n * @constructor\r\n */\r\nvar EventList = /** @class */ (function () {\r\n    function EventList(path_) {\r\n        this.path_ = path_;\r\n        /**\r\n         * @type {!Array.<Event>}\r\n         * @private\r\n         */\r\n        this.events_ = [];\r\n    }\r\n    /**\r\n     * @param {!Event} eventData\r\n     */\r\n    EventList.prototype.add = function (eventData) {\r\n        this.events_.push(eventData);\r\n    };\r\n    /**\r\n     * Iterates through the list and raises each event\r\n     */\r\n    EventList.prototype.raise = function () {\r\n        for (var i = 0; i < this.events_.length; i++) {\r\n            var eventData = this.events_[i];\r\n            if (eventData !== null) {\r\n                this.events_[i] = null;\r\n                var eventFn = eventData.getEventRunner();\r\n                if (logger$1) {\r\n                    log('event: ' + eventData.toString());\r\n                }\r\n                exceptionGuard(eventFn);\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * @return {!Path}\r\n     */\r\n    EventList.prototype.getPath = function () {\r\n        return this.path_;\r\n    };\r\n    return EventList;\r\n}());\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Base class to be used if you want to emit events. Call the constructor with\r\n * the set of allowed event names.\r\n */\r\nvar EventEmitter = /** @class */ (function () {\r\n    /**\r\n     * @param {!Array.<string>} allowedEvents_\r\n     */\r\n    function EventEmitter(allowedEvents_) {\r\n        this.allowedEvents_ = allowedEvents_;\r\n        this.listeners_ = {};\r\n        util.assert(Array.isArray(allowedEvents_) && allowedEvents_.length > 0, 'Requires a non-empty array');\r\n    }\r\n    /**\r\n     * To be called by derived classes to trigger events.\r\n     * @param {!string} eventType\r\n     * @param {...*} var_args\r\n     */\r\n    EventEmitter.prototype.trigger = function (eventType) {\r\n        var var_args = [];\r\n        for (var _i = 1; _i < arguments.length; _i++) {\r\n            var_args[_i - 1] = arguments[_i];\r\n        }\r\n        if (Array.isArray(this.listeners_[eventType])) {\r\n            // Clone the list, since callbacks could add/remove listeners.\r\n            var listeners = this.listeners_[eventType].slice();\r\n            for (var i = 0; i < listeners.length; i++) {\r\n                listeners[i].callback.apply(listeners[i].context, var_args);\r\n            }\r\n        }\r\n    };\r\n    EventEmitter.prototype.on = function (eventType, callback, context) {\r\n        this.validateEventType_(eventType);\r\n        this.listeners_[eventType] = this.listeners_[eventType] || [];\r\n        this.listeners_[eventType].push({ callback: callback, context: context });\r\n        var eventData = this.getInitialEvent(eventType);\r\n        if (eventData) {\r\n            callback.apply(context, eventData);\r\n        }\r\n    };\r\n    EventEmitter.prototype.off = function (eventType, callback, context) {\r\n        this.validateEventType_(eventType);\r\n        var listeners = this.listeners_[eventType] || [];\r\n        for (var i = 0; i < listeners.length; i++) {\r\n            if (listeners[i].callback === callback &&\r\n                (!context || context === listeners[i].context)) {\r\n                listeners.splice(i, 1);\r\n                return;\r\n            }\r\n        }\r\n    };\r\n    EventEmitter.prototype.validateEventType_ = function (eventType) {\r\n        util.assert(this.allowedEvents_.find(function (et) {\r\n            return et === eventType;\r\n        }), 'Unknown event: ' + eventType);\r\n    };\r\n    return EventEmitter;\r\n}());\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * @extends {EventEmitter}\r\n */\r\nvar VisibilityMonitor = /** @class */ (function (_super) {\r\n    tslib_1.__extends(VisibilityMonitor, _super);\r\n    function VisibilityMonitor() {\r\n        var _this = _super.call(this, ['visible']) || this;\r\n        var hidden;\r\n        var visibilityChange;\r\n        if (typeof document !== 'undefined' &&\r\n            typeof document.addEventListener !== 'undefined') {\r\n            if (typeof document['hidden'] !== 'undefined') {\r\n                // Opera 12.10 and Firefox 18 and later support\r\n                visibilityChange = 'visibilitychange';\r\n                hidden = 'hidden';\r\n            }\r\n            else if (typeof document['mozHidden'] !== 'undefined') {\r\n                visibilityChange = 'mozvisibilitychange';\r\n                hidden = 'mozHidden';\r\n            }\r\n            else if (typeof document['msHidden'] !== 'undefined') {\r\n                visibilityChange = 'msvisibilitychange';\r\n                hidden = 'msHidden';\r\n            }\r\n            else if (typeof document['webkitHidden'] !== 'undefined') {\r\n                visibilityChange = 'webkitvisibilitychange';\r\n                hidden = 'webkitHidden';\r\n            }\r\n        }\r\n        // Initially, we always assume we are visible. This ensures that in browsers\r\n        // without page visibility support or in cases where we are never visible\r\n        // (e.g. chrome extension), we act as if we are visible, i.e. don't delay\r\n        // reconnects\r\n        _this.visible_ = true;\r\n        if (visibilityChange) {\r\n            document.addEventListener(visibilityChange, function () {\r\n                var visible = !document[hidden];\r\n                if (visible !== _this.visible_) {\r\n                    _this.visible_ = visible;\r\n                    _this.trigger('visible', visible);\r\n                }\r\n            }, false);\r\n        }\r\n        return _this;\r\n    }\r\n    VisibilityMonitor.getInstance = function () {\r\n        return new VisibilityMonitor();\r\n    };\r\n    /**\r\n     * @param {!string} eventType\r\n     * @return {Array.<boolean>}\r\n     */\r\n    VisibilityMonitor.prototype.getInitialEvent = function (eventType) {\r\n        util.assert(eventType === 'visible', 'Unknown event type: ' + eventType);\r\n        return [this.visible_];\r\n    };\r\n    return VisibilityMonitor;\r\n}(EventEmitter));\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Monitors online state (as reported by window.online/offline events).\r\n *\r\n * The expectation is that this could have many false positives (thinks we are online\r\n * when we're not), but no false negatives.  So we can safely use it to determine when\r\n * we definitely cannot reach the internet.\r\n *\r\n * @extends {EventEmitter}\r\n */\r\nvar OnlineMonitor = /** @class */ (function (_super) {\r\n    tslib_1.__extends(OnlineMonitor, _super);\r\n    function OnlineMonitor() {\r\n        var _this = _super.call(this, ['online']) || this;\r\n        _this.online_ = true;\r\n        // We've had repeated complaints that Cordova apps can get stuck \"offline\", e.g.\r\n        // https://forum.ionicframework.com/t/firebase-connection-is-lost-and-never-come-back/43810\r\n        // It would seem that the 'online' event does not always fire consistently. So we disable it\r\n        // for Cordova.\r\n        if (typeof window !== 'undefined' &&\r\n            typeof window.addEventListener !== 'undefined' &&\r\n            !util.isMobileCordova()) {\r\n            window.addEventListener('online', function () {\r\n                if (!_this.online_) {\r\n                    _this.online_ = true;\r\n                    _this.trigger('online', true);\r\n                }\r\n            }, false);\r\n            window.addEventListener('offline', function () {\r\n                if (_this.online_) {\r\n                    _this.online_ = false;\r\n                    _this.trigger('online', false);\r\n                }\r\n            }, false);\r\n        }\r\n        return _this;\r\n    }\r\n    OnlineMonitor.getInstance = function () {\r\n        return new OnlineMonitor();\r\n    };\r\n    /**\r\n     * @param {!string} eventType\r\n     * @return {Array.<boolean>}\r\n     */\r\n    OnlineMonitor.prototype.getInitialEvent = function (eventType) {\r\n        util.assert(eventType === 'online', 'Unknown event type: ' + eventType);\r\n        return [this.online_];\r\n    };\r\n    /**\r\n     * @return {boolean}\r\n     */\r\n    OnlineMonitor.prototype.currentlyOnline = function () {\r\n        return this.online_;\r\n    };\r\n    return OnlineMonitor;\r\n}(EventEmitter));\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * This class ensures the packets from the server arrive in order\r\n * This class takes data from the server and ensures it gets passed into the callbacks in order.\r\n * @constructor\r\n */\r\nvar PacketReceiver = /** @class */ (function () {\r\n    /**\r\n     * @param onMessage_\r\n     */\r\n    function PacketReceiver(onMessage_) {\r\n        this.onMessage_ = onMessage_;\r\n        this.pendingResponses = [];\r\n        this.currentResponseNum = 0;\r\n        this.closeAfterResponse = -1;\r\n        this.onClose = null;\r\n    }\r\n    PacketReceiver.prototype.closeAfter = function (responseNum, callback) {\r\n        this.closeAfterResponse = responseNum;\r\n        this.onClose = callback;\r\n        if (this.closeAfterResponse < this.currentResponseNum) {\r\n            this.onClose();\r\n            this.onClose = null;\r\n        }\r\n    };\r\n    /**\r\n     * Each message from the server comes with a response number, and an array of data. The responseNumber\r\n     * allows us to ensure that we process them in the right order, since we can't be guaranteed that all\r\n     * browsers will respond in the same order as the requests we sent\r\n     * @param {number} requestNum\r\n     * @param {Array} data\r\n     */\r\n    PacketReceiver.prototype.handleResponse = function (requestNum, data) {\r\n        var _this = this;\r\n        this.pendingResponses[requestNum] = data;\r\n        var _loop_1 = function () {\r\n            var toProcess = this_1.pendingResponses[this_1.currentResponseNum];\r\n            delete this_1.pendingResponses[this_1.currentResponseNum];\r\n            var _loop_2 = function (i) {\r\n                if (toProcess[i]) {\r\n                    exceptionGuard(function () {\r\n                        _this.onMessage_(toProcess[i]);\r\n                    });\r\n                }\r\n            };\r\n            for (var i = 0; i < toProcess.length; ++i) {\r\n                _loop_2(i);\r\n            }\r\n            if (this_1.currentResponseNum === this_1.closeAfterResponse) {\r\n                if (this_1.onClose) {\r\n                    this_1.onClose();\r\n                    this_1.onClose = null;\r\n                }\r\n                return \"break\";\r\n            }\r\n            this_1.currentResponseNum++;\r\n        };\r\n        var this_1 = this;\r\n        while (this.pendingResponses[this.currentResponseNum]) {\r\n            var state_1 = _loop_1();\r\n            if (state_1 === \"break\")\r\n                break;\r\n        }\r\n    };\r\n    return PacketReceiver;\r\n}());\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n// URL query parameters associated with longpolling\r\nvar FIREBASE_LONGPOLL_START_PARAM = 'start';\r\nvar FIREBASE_LONGPOLL_CLOSE_COMMAND = 'close';\r\nvar FIREBASE_LONGPOLL_COMMAND_CB_NAME = 'pLPCommand';\r\nvar FIREBASE_LONGPOLL_DATA_CB_NAME = 'pRTLPCB';\r\nvar FIREBASE_LONGPOLL_ID_PARAM = 'id';\r\nvar FIREBASE_LONGPOLL_PW_PARAM = 'pw';\r\nvar FIREBASE_LONGPOLL_SERIAL_PARAM = 'ser';\r\nvar FIREBASE_LONGPOLL_CALLBACK_ID_PARAM = 'cb';\r\nvar FIREBASE_LONGPOLL_SEGMENT_NUM_PARAM = 'seg';\r\nvar FIREBASE_LONGPOLL_SEGMENTS_IN_PACKET = 'ts';\r\nvar FIREBASE_LONGPOLL_DATA_PARAM = 'd';\r\nvar FIREBASE_LONGPOLL_DISCONN_FRAME_PARAM = 'disconn';\r\nvar FIREBASE_LONGPOLL_DISCONN_FRAME_REQUEST_PARAM = 'dframe';\r\n//Data size constants.\r\n//TODO: Perf: the maximum length actually differs from browser to browser.\r\n// We should check what browser we're on and set accordingly.\r\nvar MAX_URL_DATA_SIZE = 1870;\r\nvar SEG_HEADER_SIZE = 30; //ie: &seg=8299234&ts=982389123&d=\r\nvar MAX_PAYLOAD_SIZE = MAX_URL_DATA_SIZE - SEG_HEADER_SIZE;\r\n/**\r\n * Keepalive period\r\n * send a fresh request at minimum every 25 seconds. Opera has a maximum request\r\n * length of 30 seconds that we can't exceed.\r\n * @const\r\n * @type {number}\r\n */\r\nvar KEEPALIVE_REQUEST_INTERVAL = 25000;\r\n/**\r\n * How long to wait before aborting a long-polling connection attempt.\r\n * @const\r\n * @type {number}\r\n */\r\nvar LP_CONNECT_TIMEOUT = 30000;\r\n/**\r\n * This class manages a single long-polling connection.\r\n *\r\n * @constructor\r\n * @implements {Transport}\r\n */\r\nvar BrowserPollConnection = /** @class */ (function () {\r\n    /**\r\n     * @param {string} connId An identifier for this connection, used for logging\r\n     * @param {RepoInfo} repoInfo The info for the endpoint to send data to.\r\n     * @param {string=} transportSessionId Optional transportSessionid if we are reconnecting for an existing\r\n     *                                         transport session\r\n     * @param {string=}  lastSessionId Optional lastSessionId if the PersistentConnection has already created a\r\n     *                                     connection previously\r\n     */\r\n    function BrowserPollConnection(connId, repoInfo, transportSessionId, lastSessionId) {\r\n        this.connId = connId;\r\n        this.repoInfo = repoInfo;\r\n        this.transportSessionId = transportSessionId;\r\n        this.lastSessionId = lastSessionId;\r\n        this.bytesSent = 0;\r\n        this.bytesReceived = 0;\r\n        this.everConnected_ = false;\r\n        this.log_ = logWrapper(connId);\r\n        this.stats_ = StatsManager.getCollection(repoInfo);\r\n        this.urlFn = function (params) {\r\n            return repoInfo.connectionURL(LONG_POLLING, params);\r\n        };\r\n    }\r\n    /**\r\n     *\r\n     * @param {function(Object)} onMessage Callback when messages arrive\r\n     * @param {function()} onDisconnect Callback with connection lost.\r\n     */\r\n    BrowserPollConnection.prototype.open = function (onMessage, onDisconnect) {\r\n        var _this = this;\r\n        this.curSegmentNum = 0;\r\n        this.onDisconnect_ = onDisconnect;\r\n        this.myPacketOrderer = new PacketReceiver(onMessage);\r\n        this.isClosed_ = false;\r\n        this.connectTimeoutTimer_ = setTimeout(function () {\r\n            _this.log_('Timed out trying to connect.');\r\n            // Make sure we clear the host cache\r\n            _this.onClosed_();\r\n            _this.connectTimeoutTimer_ = null;\r\n        }, Math.floor(LP_CONNECT_TIMEOUT));\r\n        // Ensure we delay the creation of the iframe until the DOM is loaded.\r\n        executeWhenDOMReady(function () {\r\n            if (_this.isClosed_)\r\n                return;\r\n            //Set up a callback that gets triggered once a connection is set up.\r\n            _this.scriptTagHolder = new FirebaseIFrameScriptHolder(function () {\r\n                var args = [];\r\n                for (var _i = 0; _i < arguments.length; _i++) {\r\n                    args[_i] = arguments[_i];\r\n                }\r\n                var command = args[0], arg1 = args[1], arg2 = args[2];\r\n                _this.incrementIncomingBytes_(args);\r\n                if (!_this.scriptTagHolder)\r\n                    return; // we closed the connection.\r\n                if (_this.connectTimeoutTimer_) {\r\n                    clearTimeout(_this.connectTimeoutTimer_);\r\n                    _this.connectTimeoutTimer_ = null;\r\n                }\r\n                _this.everConnected_ = true;\r\n                if (command == FIREBASE_LONGPOLL_START_PARAM) {\r\n                    _this.id = arg1;\r\n                    _this.password = arg2;\r\n                }\r\n                else if (command === FIREBASE_LONGPOLL_CLOSE_COMMAND) {\r\n                    // Don't clear the host cache. We got a response from the server, so we know it's reachable\r\n                    if (arg1) {\r\n                        // We aren't expecting any more data (other than what the server's already in the process of sending us\r\n                        // through our already open polls), so don't send any more.\r\n                        _this.scriptTagHolder.sendNewPolls = false;\r\n                        // arg1 in this case is the last response number sent by the server. We should try to receive\r\n                        // all of the responses up to this one before closing\r\n                        _this.myPacketOrderer.closeAfter(arg1, function () {\r\n                            _this.onClosed_();\r\n                        });\r\n                    }\r\n                    else {\r\n                        _this.onClosed_();\r\n                    }\r\n                }\r\n                else {\r\n                    throw new Error('Unrecognized command received: ' + command);\r\n                }\r\n            }, function () {\r\n                var args = [];\r\n                for (var _i = 0; _i < arguments.length; _i++) {\r\n                    args[_i] = arguments[_i];\r\n                }\r\n                var pN = args[0], data = args[1];\r\n                _this.incrementIncomingBytes_(args);\r\n                _this.myPacketOrderer.handleResponse(pN, data);\r\n            }, function () {\r\n                _this.onClosed_();\r\n            }, _this.urlFn);\r\n            //Send the initial request to connect. The serial number is simply to keep the browser from pulling previous results\r\n            //from cache.\r\n            var urlParams = {};\r\n            urlParams[FIREBASE_LONGPOLL_START_PARAM] = 't';\r\n            urlParams[FIREBASE_LONGPOLL_SERIAL_PARAM] = Math.floor(Math.random() * 100000000);\r\n            if (_this.scriptTagHolder.uniqueCallbackIdentifier)\r\n                urlParams[FIREBASE_LONGPOLL_CALLBACK_ID_PARAM] = _this.scriptTagHolder.uniqueCallbackIdentifier;\r\n            urlParams[VERSION_PARAM] = PROTOCOL_VERSION;\r\n            if (_this.transportSessionId) {\r\n                urlParams[TRANSPORT_SESSION_PARAM] = _this.transportSessionId;\r\n            }\r\n            if (_this.lastSessionId) {\r\n                urlParams[LAST_SESSION_PARAM] = _this.lastSessionId;\r\n            }\r\n            if (!util.isNodeSdk() &&\r\n                typeof location !== 'undefined' &&\r\n                location.href &&\r\n                location.href.indexOf(FORGE_DOMAIN) !== -1) {\r\n                urlParams[REFERER_PARAM] = FORGE_REF;\r\n            }\r\n            var connectURL = _this.urlFn(urlParams);\r\n            _this.log_('Connecting via long-poll to ' + connectURL);\r\n            _this.scriptTagHolder.addTag(connectURL, function () {\r\n                /* do nothing */\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     * Call this when a handshake has completed successfully and we want to consider the connection established\r\n     */\r\n    BrowserPollConnection.prototype.start = function () {\r\n        this.scriptTagHolder.startLongPoll(this.id, this.password);\r\n        this.addDisconnectPingFrame(this.id, this.password);\r\n    };\r\n    /**\r\n     * Forces long polling to be considered as a potential transport\r\n     */\r\n    BrowserPollConnection.forceAllow = function () {\r\n        BrowserPollConnection.forceAllow_ = true;\r\n    };\r\n    /**\r\n     * Forces longpolling to not be considered as a potential transport\r\n     */\r\n    BrowserPollConnection.forceDisallow = function () {\r\n        BrowserPollConnection.forceDisallow_ = true;\r\n    };\r\n    // Static method, use string literal so it can be accessed in a generic way\r\n    BrowserPollConnection.isAvailable = function () {\r\n        // NOTE: In React-Native there's normally no 'document', but if you debug a React-Native app in\r\n        // the Chrome debugger, 'document' is defined, but document.createElement is null (2015/06/08).\r\n        return (BrowserPollConnection.forceAllow_ ||\r\n            (!BrowserPollConnection.forceDisallow_ &&\r\n                typeof document !== 'undefined' &&\r\n                document.createElement != null &&\r\n                !isChromeExtensionContentScript() &&\r\n                !isWindowsStoreApp() &&\r\n                !util.isNodeSdk()));\r\n    };\r\n    /**\r\n     * No-op for polling\r\n     */\r\n    BrowserPollConnection.prototype.markConnectionHealthy = function () { };\r\n    /**\r\n     * Stops polling and cleans up the iframe\r\n     * @private\r\n     */\r\n    BrowserPollConnection.prototype.shutdown_ = function () {\r\n        this.isClosed_ = true;\r\n        if (this.scriptTagHolder) {\r\n            this.scriptTagHolder.close();\r\n            this.scriptTagHolder = null;\r\n        }\r\n        //remove the disconnect frame, which will trigger an XHR call to the server to tell it we're leaving.\r\n        if (this.myDisconnFrame) {\r\n            document.body.removeChild(this.myDisconnFrame);\r\n            this.myDisconnFrame = null;\r\n        }\r\n        if (this.connectTimeoutTimer_) {\r\n            clearTimeout(this.connectTimeoutTimer_);\r\n            this.connectTimeoutTimer_ = null;\r\n        }\r\n    };\r\n    /**\r\n     * Triggered when this transport is closed\r\n     * @private\r\n     */\r\n    BrowserPollConnection.prototype.onClosed_ = function () {\r\n        if (!this.isClosed_) {\r\n            this.log_('Longpoll is closing itself');\r\n            this.shutdown_();\r\n            if (this.onDisconnect_) {\r\n                this.onDisconnect_(this.everConnected_);\r\n                this.onDisconnect_ = null;\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * External-facing close handler. RealTime has requested we shut down. Kill our connection and tell the server\r\n     * that we've left.\r\n     */\r\n    BrowserPollConnection.prototype.close = function () {\r\n        if (!this.isClosed_) {\r\n            this.log_('Longpoll is being closed.');\r\n            this.shutdown_();\r\n        }\r\n    };\r\n    /**\r\n     * Send the JSON object down to the server. It will need to be stringified, base64 encoded, and then\r\n     * broken into chunks (since URLs have a small maximum length).\r\n     * @param {!Object} data The JSON data to transmit.\r\n     */\r\n    BrowserPollConnection.prototype.send = function (data) {\r\n        var dataStr = util.stringify(data);\r\n        this.bytesSent += dataStr.length;\r\n        this.stats_.incrementCounter('bytes_sent', dataStr.length);\r\n        //first, lets get the base64-encoded data\r\n        var base64data = util.base64Encode(dataStr);\r\n        //We can only fit a certain amount in each URL, so we need to split this request\r\n        //up into multiple pieces if it doesn't fit in one request.\r\n        var dataSegs = splitStringBySize(base64data, MAX_PAYLOAD_SIZE);\r\n        //Enqueue each segment for transmission. We assign each chunk a sequential ID and a total number\r\n        //of segments so that we can reassemble the packet on the server.\r\n        for (var i = 0; i < dataSegs.length; i++) {\r\n            this.scriptTagHolder.enqueueSegment(this.curSegmentNum, dataSegs.length, dataSegs[i]);\r\n            this.curSegmentNum++;\r\n        }\r\n    };\r\n    /**\r\n     * This is how we notify the server that we're leaving.\r\n     * We aren't able to send requests with DHTML on a window close event, but we can\r\n     * trigger XHR requests in some browsers (everything but Opera basically).\r\n     * @param {!string} id\r\n     * @param {!string} pw\r\n     */\r\n    BrowserPollConnection.prototype.addDisconnectPingFrame = function (id, pw) {\r\n        if (util.isNodeSdk())\r\n            return;\r\n        this.myDisconnFrame = document.createElement('iframe');\r\n        var urlParams = {};\r\n        urlParams[FIREBASE_LONGPOLL_DISCONN_FRAME_REQUEST_PARAM] = 't';\r\n        urlParams[FIREBASE_LONGPOLL_ID_PARAM] = id;\r\n        urlParams[FIREBASE_LONGPOLL_PW_PARAM] = pw;\r\n        this.myDisconnFrame.src = this.urlFn(urlParams);\r\n        this.myDisconnFrame.style.display = 'none';\r\n        document.body.appendChild(this.myDisconnFrame);\r\n    };\r\n    /**\r\n     * Used to track the bytes received by this client\r\n     * @param {*} args\r\n     * @private\r\n     */\r\n    BrowserPollConnection.prototype.incrementIncomingBytes_ = function (args) {\r\n        // TODO: This is an annoying perf hit just to track the number of incoming bytes.  Maybe it should be opt-in.\r\n        var bytesReceived = util.stringify(args).length;\r\n        this.bytesReceived += bytesReceived;\r\n        this.stats_.incrementCounter('bytes_received', bytesReceived);\r\n    };\r\n    return BrowserPollConnection;\r\n}());\r\n/*********************************************************************************************\r\n * A wrapper around an iframe that is used as a long-polling script holder.\r\n * @constructor\r\n *********************************************************************************************/\r\nvar FirebaseIFrameScriptHolder = /** @class */ (function () {\r\n    /**\r\n     * @param commandCB - The callback to be called when control commands are recevied from the server.\r\n     * @param onMessageCB - The callback to be triggered when responses arrive from the server.\r\n     * @param onDisconnect - The callback to be triggered when this tag holder is closed\r\n     * @param urlFn - A function that provides the URL of the endpoint to send data to.\r\n     */\r\n    function FirebaseIFrameScriptHolder(commandCB, onMessageCB, onDisconnect, urlFn) {\r\n        this.onDisconnect = onDisconnect;\r\n        this.urlFn = urlFn;\r\n        //We maintain a count of all of the outstanding requests, because if we have too many active at once it can cause\r\n        //problems in some browsers.\r\n        /**\r\n         * @type {CountedSet.<number, number>}\r\n         */\r\n        this.outstandingRequests = new CountedSet();\r\n        //A queue of the pending segments waiting for transmission to the server.\r\n        this.pendingSegs = [];\r\n        //A serial number. We use this for two things:\r\n        // 1) A way to ensure the browser doesn't cache responses to polls\r\n        // 2) A way to make the server aware when long-polls arrive in a different order than we started them. The\r\n        //    server needs to release both polls in this case or it will cause problems in Opera since Opera can only execute\r\n        //    JSONP code in the order it was added to the iframe.\r\n        this.currentSerial = Math.floor(Math.random() * 100000000);\r\n        // This gets set to false when we're \"closing down\" the connection (e.g. we're switching transports but there's still\r\n        // incoming data from the server that we're waiting for).\r\n        this.sendNewPolls = true;\r\n        if (!util.isNodeSdk()) {\r\n            //Each script holder registers a couple of uniquely named callbacks with the window. These are called from the\r\n            //iframes where we put the long-polling script tags. We have two callbacks:\r\n            //   1) Command Callback - Triggered for control issues, like starting a connection.\r\n            //   2) Message Callback - Triggered when new data arrives.\r\n            this.uniqueCallbackIdentifier = LUIDGenerator();\r\n            window[FIREBASE_LONGPOLL_COMMAND_CB_NAME + this.uniqueCallbackIdentifier] = commandCB;\r\n            window[FIREBASE_LONGPOLL_DATA_CB_NAME + this.uniqueCallbackIdentifier] = onMessageCB;\r\n            //Create an iframe for us to add script tags to.\r\n            this.myIFrame = FirebaseIFrameScriptHolder.createIFrame_();\r\n            // Set the iframe's contents.\r\n            var script = '';\r\n            // if we set a javascript url, it's IE and we need to set the document domain. The javascript url is sufficient\r\n            // for ie9, but ie8 needs to do it again in the document itself.\r\n            if (this.myIFrame.src &&\r\n                this.myIFrame.src.substr(0, 'javascript:'.length) === 'javascript:') {\r\n                var currentDomain = document.domain;\r\n                script = '<script>document.domain=\"' + currentDomain + '\";</script>';\r\n            }\r\n            var iframeContents = '<html><body>' + script + '</body></html>';\r\n            try {\r\n                this.myIFrame.doc.open();\r\n                this.myIFrame.doc.write(iframeContents);\r\n                this.myIFrame.doc.close();\r\n            }\r\n            catch (e) {\r\n                log('frame writing exception');\r\n                if (e.stack) {\r\n                    log(e.stack);\r\n                }\r\n                log(e);\r\n            }\r\n        }\r\n        else {\r\n            this.commandCB = commandCB;\r\n            this.onMessageCB = onMessageCB;\r\n        }\r\n    }\r\n    /**\r\n     * Each browser has its own funny way to handle iframes. Here we mush them all together into one object that I can\r\n     * actually use.\r\n     * @private\r\n     * @return {Element}\r\n     */\r\n    FirebaseIFrameScriptHolder.createIFrame_ = function () {\r\n        var iframe = document.createElement('iframe');\r\n        iframe.style.display = 'none';\r\n        // This is necessary in order to initialize the document inside the iframe\r\n        if (document.body) {\r\n            document.body.appendChild(iframe);\r\n            try {\r\n                // If document.domain has been modified in IE, this will throw an error, and we need to set the\r\n                // domain of the iframe's document manually. We can do this via a javascript: url as the src attribute\r\n                // Also note that we must do this *after* the iframe has been appended to the page. Otherwise it doesn't work.\r\n                var a = iframe.contentWindow.document;\r\n                if (!a) {\r\n                    // Apologies for the log-spam, I need to do something to keep closure from optimizing out the assignment above.\r\n                    log('No IE domain setting required');\r\n                }\r\n            }\r\n            catch (e) {\r\n                var domain = document.domain;\r\n                iframe.src =\r\n                    \"javascript:void((function(){document.open();document.domain='\" +\r\n                        domain +\r\n                        \"';document.close();})())\";\r\n            }\r\n        }\r\n        else {\r\n            // LongPollConnection attempts to delay initialization until the document is ready, so hopefully this\r\n            // never gets hit.\r\n            throw 'Document body has not initialized. Wait to initialize Firebase until after the document is ready.';\r\n        }\r\n        // Get the document of the iframe in a browser-specific way.\r\n        if (iframe.contentDocument) {\r\n            iframe.doc = iframe.contentDocument; // Firefox, Opera, Safari\r\n        }\r\n        else if (iframe.contentWindow) {\r\n            iframe.doc = iframe.contentWindow.document; // Internet Explorer\r\n        }\r\n        else if (iframe.document) {\r\n            iframe.doc = iframe.document; //others?\r\n        }\r\n        return iframe;\r\n    };\r\n    /**\r\n     * Cancel all outstanding queries and remove the frame.\r\n     */\r\n    FirebaseIFrameScriptHolder.prototype.close = function () {\r\n        var _this = this;\r\n        //Mark this iframe as dead, so no new requests are sent.\r\n        this.alive = false;\r\n        if (this.myIFrame) {\r\n            //We have to actually remove all of the html inside this iframe before removing it from the\r\n            //window, or IE will continue loading and executing the script tags we've already added, which\r\n            //can lead to some errors being thrown. Setting innerHTML seems to be the easiest way to do this.\r\n            this.myIFrame.doc.body.innerHTML = '';\r\n            setTimeout(function () {\r\n                if (_this.myIFrame !== null) {\r\n                    document.body.removeChild(_this.myIFrame);\r\n                    _this.myIFrame = null;\r\n                }\r\n            }, Math.floor(0));\r\n        }\r\n        if (util.isNodeSdk() && this.myID) {\r\n            var urlParams = {};\r\n            urlParams[FIREBASE_LONGPOLL_DISCONN_FRAME_PARAM] = 't';\r\n            urlParams[FIREBASE_LONGPOLL_ID_PARAM] = this.myID;\r\n            urlParams[FIREBASE_LONGPOLL_PW_PARAM] = this.myPW;\r\n            var theURL = this.urlFn(urlParams);\r\n            FirebaseIFrameScriptHolder.nodeRestRequest(theURL);\r\n        }\r\n        // Protect from being called recursively.\r\n        var onDisconnect = this.onDisconnect;\r\n        if (onDisconnect) {\r\n            this.onDisconnect = null;\r\n            onDisconnect();\r\n        }\r\n    };\r\n    /**\r\n     * Actually start the long-polling session by adding the first script tag(s) to the iframe.\r\n     * @param {!string} id - The ID of this connection\r\n     * @param {!string} pw - The password for this connection\r\n     */\r\n    FirebaseIFrameScriptHolder.prototype.startLongPoll = function (id, pw) {\r\n        this.myID = id;\r\n        this.myPW = pw;\r\n        this.alive = true;\r\n        //send the initial request. If there are requests queued, make sure that we transmit as many as we are currently able to.\r\n        while (this.newRequest_()) { }\r\n    };\r\n    /**\r\n     * This is called any time someone might want a script tag to be added. It adds a script tag when there aren't\r\n     * too many outstanding requests and we are still alive.\r\n     *\r\n     * If there are outstanding packet segments to send, it sends one. If there aren't, it sends a long-poll anyways if\r\n     * needed.\r\n     */\r\n    FirebaseIFrameScriptHolder.prototype.newRequest_ = function () {\r\n        // We keep one outstanding request open all the time to receive data, but if we need to send data\r\n        // (pendingSegs.length > 0) then we create a new request to send the data.  The server will automatically\r\n        // close the old request.\r\n        if (this.alive &&\r\n            this.sendNewPolls &&\r\n            this.outstandingRequests.count() < (this.pendingSegs.length > 0 ? 2 : 1)) {\r\n            //construct our url\r\n            this.currentSerial++;\r\n            var urlParams = {};\r\n            urlParams[FIREBASE_LONGPOLL_ID_PARAM] = this.myID;\r\n            urlParams[FIREBASE_LONGPOLL_PW_PARAM] = this.myPW;\r\n            urlParams[FIREBASE_LONGPOLL_SERIAL_PARAM] = this.currentSerial;\r\n            var theURL = this.urlFn(urlParams);\r\n            //Now add as much data as we can.\r\n            var curDataString = '';\r\n            var i = 0;\r\n            while (this.pendingSegs.length > 0) {\r\n                //first, lets see if the next segment will fit.\r\n                var nextSeg = this.pendingSegs[0];\r\n                if (nextSeg.d.length + SEG_HEADER_SIZE + curDataString.length <=\r\n                    MAX_URL_DATA_SIZE) {\r\n                    //great, the segment will fit. Lets append it.\r\n                    var theSeg = this.pendingSegs.shift();\r\n                    curDataString =\r\n                        curDataString +\r\n                            '&' +\r\n                            FIREBASE_LONGPOLL_SEGMENT_NUM_PARAM +\r\n                            i +\r\n                            '=' +\r\n                            theSeg.seg +\r\n                            '&' +\r\n                            FIREBASE_LONGPOLL_SEGMENTS_IN_PACKET +\r\n                            i +\r\n                            '=' +\r\n                            theSeg.ts +\r\n                            '&' +\r\n                            FIREBASE_LONGPOLL_DATA_PARAM +\r\n                            i +\r\n                            '=' +\r\n                            theSeg.d;\r\n                    i++;\r\n                }\r\n                else {\r\n                    break;\r\n                }\r\n            }\r\n            theURL = theURL + curDataString;\r\n            this.addLongPollTag_(theURL, this.currentSerial);\r\n            return true;\r\n        }\r\n        else {\r\n            return false;\r\n        }\r\n    };\r\n    /**\r\n     * Queue a packet for transmission to the server.\r\n     * @param segnum - A sequential id for this packet segment used for reassembly\r\n     * @param totalsegs - The total number of segments in this packet\r\n     * @param data - The data for this segment.\r\n     */\r\n    FirebaseIFrameScriptHolder.prototype.enqueueSegment = function (segnum, totalsegs, data) {\r\n        //add this to the queue of segments to send.\r\n        this.pendingSegs.push({ seg: segnum, ts: totalsegs, d: data });\r\n        //send the data immediately if there isn't already data being transmitted, unless\r\n        //startLongPoll hasn't been called yet.\r\n        if (this.alive) {\r\n            this.newRequest_();\r\n        }\r\n    };\r\n    /**\r\n     * Add a script tag for a regular long-poll request.\r\n     * @param {!string} url - The URL of the script tag.\r\n     * @param {!number} serial - The serial number of the request.\r\n     * @private\r\n     */\r\n    FirebaseIFrameScriptHolder.prototype.addLongPollTag_ = function (url, serial) {\r\n        var _this = this;\r\n        //remember that we sent this request.\r\n        this.outstandingRequests.add(serial, 1);\r\n        var doNewRequest = function () {\r\n            _this.outstandingRequests.remove(serial);\r\n            _this.newRequest_();\r\n        };\r\n        // If this request doesn't return on its own accord (by the server sending us some data), we'll\r\n        // create a new one after the KEEPALIVE interval to make sure we always keep a fresh request open.\r\n        var keepaliveTimeout = setTimeout(doNewRequest, Math.floor(KEEPALIVE_REQUEST_INTERVAL));\r\n        var readyStateCB = function () {\r\n            // Request completed.  Cancel the keepalive.\r\n            clearTimeout(keepaliveTimeout);\r\n            // Trigger a new request so we can continue receiving data.\r\n            doNewRequest();\r\n        };\r\n        this.addTag(url, readyStateCB);\r\n    };\r\n    /**\r\n     * Add an arbitrary script tag to the iframe.\r\n     * @param {!string} url - The URL for the script tag source.\r\n     * @param {!function()} loadCB - A callback to be triggered once the script has loaded.\r\n     */\r\n    FirebaseIFrameScriptHolder.prototype.addTag = function (url, loadCB) {\r\n        var _this = this;\r\n        if (util.isNodeSdk()) {\r\n            this.doNodeLongPoll(url, loadCB);\r\n        }\r\n        else {\r\n            setTimeout(function () {\r\n                try {\r\n                    // if we're already closed, don't add this poll\r\n                    if (!_this.sendNewPolls)\r\n                        return;\r\n                    var newScript_1 = _this.myIFrame.doc.createElement('script');\r\n                    newScript_1.type = 'text/javascript';\r\n                    newScript_1.async = true;\r\n                    newScript_1.src = url;\r\n                    newScript_1.onload = newScript_1.onreadystatechange = function () {\r\n                        var rstate = newScript_1.readyState;\r\n                        if (!rstate || rstate === 'loaded' || rstate === 'complete') {\r\n                            newScript_1.onload = newScript_1.onreadystatechange = null;\r\n                            if (newScript_1.parentNode) {\r\n                                newScript_1.parentNode.removeChild(newScript_1);\r\n                            }\r\n                            loadCB();\r\n                        }\r\n                    };\r\n                    newScript_1.onerror = function () {\r\n                        log('Long-poll script failed to load: ' + url);\r\n                        _this.sendNewPolls = false;\r\n                        _this.close();\r\n                    };\r\n                    _this.myIFrame.doc.body.appendChild(newScript_1);\r\n                }\r\n                catch (e) {\r\n                    // TODO: we should make this error visible somehow\r\n                }\r\n            }, Math.floor(1));\r\n        }\r\n    };\r\n    return FirebaseIFrameScriptHolder;\r\n}());\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nvar WEBSOCKET_MAX_FRAME_SIZE = 16384;\r\nvar WEBSOCKET_KEEPALIVE_INTERVAL = 45000;\r\nvar WebSocketImpl = null;\r\nif (typeof MozWebSocket !== 'undefined') {\r\n    WebSocketImpl = MozWebSocket;\r\n}\r\nelse if (typeof WebSocket !== 'undefined') {\r\n    WebSocketImpl = WebSocket;\r\n}\r\n/**\r\n * Create a new websocket connection with the given callbacks.\r\n * @constructor\r\n * @implements {Transport}\r\n */\r\nvar WebSocketConnection = /** @class */ (function () {\r\n    /**\r\n     * @param {string} connId identifier for this transport\r\n     * @param {RepoInfo} repoInfo The info for the websocket endpoint.\r\n     * @param {string=} transportSessionId Optional transportSessionId if this is connecting to an existing transport\r\n     *                                         session\r\n     * @param {string=} lastSessionId Optional lastSessionId if there was a previous connection\r\n     */\r\n    function WebSocketConnection(connId, repoInfo, transportSessionId, lastSessionId) {\r\n        this.connId = connId;\r\n        this.keepaliveTimer = null;\r\n        this.frames = null;\r\n        this.totalFrames = 0;\r\n        this.bytesSent = 0;\r\n        this.bytesReceived = 0;\r\n        this.log_ = logWrapper(this.connId);\r\n        this.stats_ = StatsManager.getCollection(repoInfo);\r\n        this.connURL = WebSocketConnection.connectionURL_(repoInfo, transportSessionId, lastSessionId);\r\n    }\r\n    /**\r\n     * @param {RepoInfo} repoInfo The info for the websocket endpoint.\r\n     * @param {string=} transportSessionId Optional transportSessionId if this is connecting to an existing transport\r\n     *                                         session\r\n     * @param {string=} lastSessionId Optional lastSessionId if there was a previous connection\r\n     * @return {string} connection url\r\n     * @private\r\n     */\r\n    WebSocketConnection.connectionURL_ = function (repoInfo, transportSessionId, lastSessionId) {\r\n        var urlParams = {};\r\n        urlParams[VERSION_PARAM] = PROTOCOL_VERSION;\r\n        if (!util.isNodeSdk() &&\r\n            typeof location !== 'undefined' &&\r\n            location.href &&\r\n            location.href.indexOf(FORGE_DOMAIN) !== -1) {\r\n            urlParams[REFERER_PARAM] = FORGE_REF;\r\n        }\r\n        if (transportSessionId) {\r\n            urlParams[TRANSPORT_SESSION_PARAM] = transportSessionId;\r\n        }\r\n        if (lastSessionId) {\r\n            urlParams[LAST_SESSION_PARAM] = lastSessionId;\r\n        }\r\n        return repoInfo.connectionURL(WEBSOCKET, urlParams);\r\n    };\r\n    /**\r\n     *\r\n     * @param onMessage Callback when messages arrive\r\n     * @param onDisconnect Callback with connection lost.\r\n     */\r\n    WebSocketConnection.prototype.open = function (onMessage, onDisconnect) {\r\n        var _this = this;\r\n        this.onDisconnect = onDisconnect;\r\n        this.onMessage = onMessage;\r\n        this.log_('Websocket connecting to ' + this.connURL);\r\n        this.everConnected_ = false;\r\n        // Assume failure until proven otherwise.\r\n        PersistentStorage.set('previous_websocket_failure', true);\r\n        try {\r\n            if (util.isNodeSdk()) {\r\n                var device = util.CONSTANTS.NODE_ADMIN ? 'AdminNode' : 'Node';\r\n                // UA Format: Firebase/<wire_protocol>/<sdk_version>/<platform>/<device>\r\n                var options = {\r\n                    headers: {\r\n                        'User-Agent': \"Firebase/\" + PROTOCOL_VERSION + \"/\" + firebase.SDK_VERSION + \"/\" + process.platform + \"/\" + device\r\n                    }\r\n                };\r\n                // Plumb appropriate http_proxy environment variable into faye-websocket if it exists.\r\n                var env = Object({\"NODE_ENV\":\"production\",\"PUBLIC_URL\":\"/noteHerder\"});\r\n                var proxy = this.connURL.indexOf('wss://') == 0\r\n                    ? env['HTTPS_PROXY'] || env['https_proxy']\r\n                    : env['HTTP_PROXY'] || env['http_proxy'];\r\n                if (proxy) {\r\n                    options['proxy'] = { origin: proxy };\r\n                }\r\n                this.mySock = new WebSocketImpl(this.connURL, [], options);\r\n            }\r\n            else {\r\n                this.mySock = new WebSocketImpl(this.connURL);\r\n            }\r\n        }\r\n        catch (e) {\r\n            this.log_('Error instantiating WebSocket.');\r\n            var error$$1 = e.message || e.data;\r\n            if (error$$1) {\r\n                this.log_(error$$1);\r\n            }\r\n            this.onClosed_();\r\n            return;\r\n        }\r\n        this.mySock.onopen = function () {\r\n            _this.log_('Websocket connected.');\r\n            _this.everConnected_ = true;\r\n        };\r\n        this.mySock.onclose = function () {\r\n            _this.log_('Websocket connection was disconnected.');\r\n            _this.mySock = null;\r\n            _this.onClosed_();\r\n        };\r\n        this.mySock.onmessage = function (m) {\r\n            _this.handleIncomingFrame(m);\r\n        };\r\n        this.mySock.onerror = function (e) {\r\n            _this.log_('WebSocket error.  Closing connection.');\r\n            var error$$1 = e.message || e.data;\r\n            if (error$$1) {\r\n                _this.log_(error$$1);\r\n            }\r\n            _this.onClosed_();\r\n        };\r\n    };\r\n    /**\r\n     * No-op for websockets, we don't need to do anything once the connection is confirmed as open\r\n     */\r\n    WebSocketConnection.prototype.start = function () { };\r\n    WebSocketConnection.forceDisallow = function () {\r\n        WebSocketConnection.forceDisallow_ = true;\r\n    };\r\n    WebSocketConnection.isAvailable = function () {\r\n        var isOldAndroid = false;\r\n        if (typeof navigator !== 'undefined' && navigator.userAgent) {\r\n            var oldAndroidRegex = /Android ([0-9]{0,}\\.[0-9]{0,})/;\r\n            var oldAndroidMatch = navigator.userAgent.match(oldAndroidRegex);\r\n            if (oldAndroidMatch && oldAndroidMatch.length > 1) {\r\n                if (parseFloat(oldAndroidMatch[1]) < 4.4) {\r\n                    isOldAndroid = true;\r\n                }\r\n            }\r\n        }\r\n        return (!isOldAndroid &&\r\n            WebSocketImpl !== null &&\r\n            !WebSocketConnection.forceDisallow_);\r\n    };\r\n    /**\r\n     * Returns true if we previously failed to connect with this transport.\r\n     * @return {boolean}\r\n     */\r\n    WebSocketConnection.previouslyFailed = function () {\r\n        // If our persistent storage is actually only in-memory storage,\r\n        // we default to assuming that it previously failed to be safe.\r\n        return (PersistentStorage.isInMemoryStorage ||\r\n            PersistentStorage.get('previous_websocket_failure') === true);\r\n    };\r\n    WebSocketConnection.prototype.markConnectionHealthy = function () {\r\n        PersistentStorage.remove('previous_websocket_failure');\r\n    };\r\n    WebSocketConnection.prototype.appendFrame_ = function (data) {\r\n        this.frames.push(data);\r\n        if (this.frames.length == this.totalFrames) {\r\n            var fullMess = this.frames.join('');\r\n            this.frames = null;\r\n            var jsonMess = util.jsonEval(fullMess);\r\n            //handle the message\r\n            this.onMessage(jsonMess);\r\n        }\r\n    };\r\n    /**\r\n     * @param {number} frameCount The number of frames we are expecting from the server\r\n     * @private\r\n     */\r\n    WebSocketConnection.prototype.handleNewFrameCount_ = function (frameCount) {\r\n        this.totalFrames = frameCount;\r\n        this.frames = [];\r\n    };\r\n    /**\r\n     * Attempts to parse a frame count out of some text. If it can't, assumes a value of 1\r\n     * @param {!String} data\r\n     * @return {?String} Any remaining data to be process, or null if there is none\r\n     * @private\r\n     */\r\n    WebSocketConnection.prototype.extractFrameCount_ = function (data) {\r\n        util.assert(this.frames === null, 'We already have a frame buffer');\r\n        // TODO: The server is only supposed to send up to 9999 frames (i.e. length <= 4), but that isn't being enforced\r\n        // currently.  So allowing larger frame counts (length <= 6).  See https://app.asana.com/0/search/8688598998380/8237608042508\r\n        if (data.length <= 6) {\r\n            var frameCount = Number(data);\r\n            if (!isNaN(frameCount)) {\r\n                this.handleNewFrameCount_(frameCount);\r\n                return null;\r\n            }\r\n        }\r\n        this.handleNewFrameCount_(1);\r\n        return data;\r\n    };\r\n    /**\r\n     * Process a websocket frame that has arrived from the server.\r\n     * @param mess The frame data\r\n     */\r\n    WebSocketConnection.prototype.handleIncomingFrame = function (mess) {\r\n        if (this.mySock === null)\r\n            return; // Chrome apparently delivers incoming packets even after we .close() the connection sometimes.\r\n        var data = mess['data'];\r\n        this.bytesReceived += data.length;\r\n        this.stats_.incrementCounter('bytes_received', data.length);\r\n        this.resetKeepAlive();\r\n        if (this.frames !== null) {\r\n            // we're buffering\r\n            this.appendFrame_(data);\r\n        }\r\n        else {\r\n            // try to parse out a frame count, otherwise, assume 1 and process it\r\n            var remainingData = this.extractFrameCount_(data);\r\n            if (remainingData !== null) {\r\n                this.appendFrame_(remainingData);\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * Send a message to the server\r\n     * @param {Object} data The JSON object to transmit\r\n     */\r\n    WebSocketConnection.prototype.send = function (data) {\r\n        this.resetKeepAlive();\r\n        var dataStr = util.stringify(data);\r\n        this.bytesSent += dataStr.length;\r\n        this.stats_.incrementCounter('bytes_sent', dataStr.length);\r\n        //We can only fit a certain amount in each websocket frame, so we need to split this request\r\n        //up into multiple pieces if it doesn't fit in one request.\r\n        var dataSegs = splitStringBySize(dataStr, WEBSOCKET_MAX_FRAME_SIZE);\r\n        //Send the length header\r\n        if (dataSegs.length > 1) {\r\n            this.sendString_(String(dataSegs.length));\r\n        }\r\n        //Send the actual data in segments.\r\n        for (var i = 0; i < dataSegs.length; i++) {\r\n            this.sendString_(dataSegs[i]);\r\n        }\r\n    };\r\n    WebSocketConnection.prototype.shutdown_ = function () {\r\n        this.isClosed_ = true;\r\n        if (this.keepaliveTimer) {\r\n            clearInterval(this.keepaliveTimer);\r\n            this.keepaliveTimer = null;\r\n        }\r\n        if (this.mySock) {\r\n            this.mySock.close();\r\n            this.mySock = null;\r\n        }\r\n    };\r\n    WebSocketConnection.prototype.onClosed_ = function () {\r\n        if (!this.isClosed_) {\r\n            this.log_('WebSocket is closing itself');\r\n            this.shutdown_();\r\n            // since this is an internal close, trigger the close listener\r\n            if (this.onDisconnect) {\r\n                this.onDisconnect(this.everConnected_);\r\n                this.onDisconnect = null;\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * External-facing close handler.\r\n     * Close the websocket and kill the connection.\r\n     */\r\n    WebSocketConnection.prototype.close = function () {\r\n        if (!this.isClosed_) {\r\n            this.log_('WebSocket is being closed');\r\n            this.shutdown_();\r\n        }\r\n    };\r\n    /**\r\n     * Kill the current keepalive timer and start a new one, to ensure that it always fires N seconds after\r\n     * the last activity.\r\n     */\r\n    WebSocketConnection.prototype.resetKeepAlive = function () {\r\n        var _this = this;\r\n        clearInterval(this.keepaliveTimer);\r\n        this.keepaliveTimer = setInterval(function () {\r\n            //If there has been no websocket activity for a while, send a no-op\r\n            if (_this.mySock) {\r\n                _this.sendString_('0');\r\n            }\r\n            _this.resetKeepAlive();\r\n        }, Math.floor(WEBSOCKET_KEEPALIVE_INTERVAL));\r\n    };\r\n    /**\r\n     * Send a string over the websocket.\r\n     *\r\n     * @param {string} str String to send.\r\n     * @private\r\n     */\r\n    WebSocketConnection.prototype.sendString_ = function (str) {\r\n        // Firefox seems to sometimes throw exceptions (NS_ERROR_UNEXPECTED) from websocket .send()\r\n        // calls for some unknown reason.  We treat these as an error and disconnect.\r\n        // See https://app.asana.com/0/58926111402292/68021340250410\r\n        try {\r\n            this.mySock.send(str);\r\n        }\r\n        catch (e) {\r\n            this.log_('Exception thrown from WebSocket.send():', e.message || e.data, 'Closing connection.');\r\n            setTimeout(this.onClosed_.bind(this), 0);\r\n        }\r\n    };\r\n    /**\r\n     * Number of response before we consider the connection \"healthy.\"\r\n     * @type {number}\r\n     */\r\n    WebSocketConnection.responsesRequiredToBeHealthy = 2;\r\n    /**\r\n     * Time to wait for the connection te become healthy before giving up.\r\n     * @type {number}\r\n     */\r\n    WebSocketConnection.healthyTimeout = 30000;\r\n    return WebSocketConnection;\r\n}());\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Currently simplistic, this class manages what transport a Connection should use at various stages of its\r\n * lifecycle.\r\n *\r\n * It starts with longpolling in a browser, and httppolling on node. It then upgrades to websockets if\r\n * they are available.\r\n * @constructor\r\n */\r\nvar TransportManager = /** @class */ (function () {\r\n    /**\r\n     * @param {!RepoInfo} repoInfo Metadata around the namespace we're connecting to\r\n     */\r\n    function TransportManager(repoInfo) {\r\n        this.initTransports_(repoInfo);\r\n    }\r\n    Object.defineProperty(TransportManager, \"ALL_TRANSPORTS\", {\r\n        /**\r\n         * @const\r\n         * @type {!Array.<function(new:Transport, string, RepoInfo, string=)>}\r\n         */\r\n        get: function () {\r\n            return [BrowserPollConnection, WebSocketConnection];\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * @param {!RepoInfo} repoInfo\r\n     * @private\r\n     */\r\n    TransportManager.prototype.initTransports_ = function (repoInfo) {\r\n        var isWebSocketsAvailable = WebSocketConnection && WebSocketConnection['isAvailable']();\r\n        var isSkipPollConnection = isWebSocketsAvailable && !WebSocketConnection.previouslyFailed();\r\n        if (repoInfo.webSocketOnly) {\r\n            if (!isWebSocketsAvailable)\r\n                warn(\"wss:// URL used, but browser isn't known to support websockets.  Trying anyway.\");\r\n            isSkipPollConnection = true;\r\n        }\r\n        if (isSkipPollConnection) {\r\n            this.transports_ = [WebSocketConnection];\r\n        }\r\n        else {\r\n            var transports_1 = (this.transports_ = []);\r\n            each(TransportManager.ALL_TRANSPORTS, function (i, transport) {\r\n                if (transport && transport['isAvailable']()) {\r\n                    transports_1.push(transport);\r\n                }\r\n            });\r\n        }\r\n    };\r\n    /**\r\n     * @return {function(new:Transport, !string, !RepoInfo, string=, string=)} The constructor for the\r\n     * initial transport to use\r\n     */\r\n    TransportManager.prototype.initialTransport = function () {\r\n        if (this.transports_.length > 0) {\r\n            return this.transports_[0];\r\n        }\r\n        else {\r\n            throw new Error('No transports available');\r\n        }\r\n    };\r\n    /**\r\n     * @return {?function(new:Transport, function(),function(), string=)} The constructor for the next\r\n     * transport, or null\r\n     */\r\n    TransportManager.prototype.upgradeTransport = function () {\r\n        if (this.transports_.length > 1) {\r\n            return this.transports_[1];\r\n        }\r\n        else {\r\n            return null;\r\n        }\r\n    };\r\n    return TransportManager;\r\n}());\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n// Abort upgrade attempt if it takes longer than 60s.\r\nvar UPGRADE_TIMEOUT = 60000;\r\n// For some transports (WebSockets), we need to \"validate\" the transport by exchanging a few requests and responses.\r\n// If we haven't sent enough requests within 5s, we'll start sending noop ping requests.\r\nvar DELAY_BEFORE_SENDING_EXTRA_REQUESTS = 5000;\r\n// If the initial data sent triggers a lot of bandwidth (i.e. it's a large put or a listen for a large amount of data)\r\n// then we may not be able to exchange our ping/pong requests within the healthy timeout.  So if we reach the timeout\r\n// but we've sent/received enough bytes, we don't cancel the connection.\r\nvar BYTES_SENT_HEALTHY_OVERRIDE = 10 * 1024;\r\nvar BYTES_RECEIVED_HEALTHY_OVERRIDE = 100 * 1024;\r\nvar MESSAGE_TYPE = 't';\r\nvar MESSAGE_DATA = 'd';\r\nvar CONTROL_SHUTDOWN = 's';\r\nvar CONTROL_RESET = 'r';\r\nvar CONTROL_ERROR = 'e';\r\nvar CONTROL_PONG = 'o';\r\nvar SWITCH_ACK = 'a';\r\nvar END_TRANSMISSION = 'n';\r\nvar PING = 'p';\r\nvar SERVER_HELLO = 'h';\r\n/**\r\n * Creates a new real-time connection to the server using whichever method works\r\n * best in the current browser.\r\n *\r\n * @constructor\r\n */\r\nvar Connection = /** @class */ (function () {\r\n    /**\r\n     * @param {!string} id - an id for this connection\r\n     * @param {!RepoInfo} repoInfo_ - the info for the endpoint to connect to\r\n     * @param {function(Object)} onMessage_ - the callback to be triggered when a server-push message arrives\r\n     * @param {function(number, string)} onReady_ - the callback to be triggered when this connection is ready to send messages.\r\n     * @param {function()} onDisconnect_ - the callback to be triggered when a connection was lost\r\n     * @param {function(string)} onKill_ - the callback to be triggered when this connection has permanently shut down.\r\n     * @param {string=} lastSessionId - last session id in persistent connection. is used to clean up old session in real-time server\r\n     */\r\n    function Connection(id, repoInfo_, onMessage_, onReady_, onDisconnect_, onKill_, lastSessionId) {\r\n        this.id = id;\r\n        this.repoInfo_ = repoInfo_;\r\n        this.onMessage_ = onMessage_;\r\n        this.onReady_ = onReady_;\r\n        this.onDisconnect_ = onDisconnect_;\r\n        this.onKill_ = onKill_;\r\n        this.lastSessionId = lastSessionId;\r\n        this.connectionCount = 0;\r\n        this.pendingDataMessages = [];\r\n        this.state_ = 0 /* CONNECTING */;\r\n        this.log_ = logWrapper('c:' + this.id + ':');\r\n        this.transportManager_ = new TransportManager(repoInfo_);\r\n        this.log_('Connection created');\r\n        this.start_();\r\n    }\r\n    /**\r\n     * Starts a connection attempt\r\n     * @private\r\n     */\r\n    Connection.prototype.start_ = function () {\r\n        var _this = this;\r\n        var conn = this.transportManager_.initialTransport();\r\n        this.conn_ = new conn(this.nextTransportId_(), this.repoInfo_, undefined, this.lastSessionId);\r\n        // For certain transports (WebSockets), we need to send and receive several messages back and forth before we\r\n        // can consider the transport healthy.\r\n        this.primaryResponsesRequired_ = conn['responsesRequiredToBeHealthy'] || 0;\r\n        var onMessageReceived = this.connReceiver_(this.conn_);\r\n        var onConnectionLost = this.disconnReceiver_(this.conn_);\r\n        this.tx_ = this.conn_;\r\n        this.rx_ = this.conn_;\r\n        this.secondaryConn_ = null;\r\n        this.isHealthy_ = false;\r\n        /*\r\n         * Firefox doesn't like when code from one iframe tries to create another iframe by way of the parent frame.\r\n         * This can occur in the case of a redirect, i.e. we guessed wrong on what server to connect to and received a reset.\r\n         * Somehow, setTimeout seems to make this ok. That doesn't make sense from a security perspective, since you should\r\n         * still have the context of your originating frame.\r\n         */\r\n        setTimeout(function () {\r\n            // this.conn_ gets set to null in some of the tests. Check to make sure it still exists before using it\r\n            _this.conn_ && _this.conn_.open(onMessageReceived, onConnectionLost);\r\n        }, Math.floor(0));\r\n        var healthyTimeout_ms = conn['healthyTimeout'] || 0;\r\n        if (healthyTimeout_ms > 0) {\r\n            this.healthyTimeout_ = setTimeoutNonBlocking(function () {\r\n                _this.healthyTimeout_ = null;\r\n                if (!_this.isHealthy_) {\r\n                    if (_this.conn_ &&\r\n                        _this.conn_.bytesReceived > BYTES_RECEIVED_HEALTHY_OVERRIDE) {\r\n                        _this.log_('Connection exceeded healthy timeout but has received ' +\r\n                            _this.conn_.bytesReceived +\r\n                            ' bytes.  Marking connection healthy.');\r\n                        _this.isHealthy_ = true;\r\n                        _this.conn_.markConnectionHealthy();\r\n                    }\r\n                    else if (_this.conn_ &&\r\n                        _this.conn_.bytesSent > BYTES_SENT_HEALTHY_OVERRIDE) {\r\n                        _this.log_('Connection exceeded healthy timeout but has sent ' +\r\n                            _this.conn_.bytesSent +\r\n                            ' bytes.  Leaving connection alive.');\r\n                        // NOTE: We don't want to mark it healthy, since we have no guarantee that the bytes have made it to\r\n                        // the server.\r\n                    }\r\n                    else {\r\n                        _this.log_('Closing unhealthy connection after timeout.');\r\n                        _this.close();\r\n                    }\r\n                }\r\n            }, Math.floor(healthyTimeout_ms));\r\n        }\r\n    };\r\n    /**\r\n     * @return {!string}\r\n     * @private\r\n     */\r\n    Connection.prototype.nextTransportId_ = function () {\r\n        return 'c:' + this.id + ':' + this.connectionCount++;\r\n    };\r\n    Connection.prototype.disconnReceiver_ = function (conn) {\r\n        var _this = this;\r\n        return function (everConnected) {\r\n            if (conn === _this.conn_) {\r\n                _this.onConnectionLost_(everConnected);\r\n            }\r\n            else if (conn === _this.secondaryConn_) {\r\n                _this.log_('Secondary connection lost.');\r\n                _this.onSecondaryConnectionLost_();\r\n            }\r\n            else {\r\n                _this.log_('closing an old connection');\r\n            }\r\n        };\r\n    };\r\n    Connection.prototype.connReceiver_ = function (conn) {\r\n        var _this = this;\r\n        return function (message) {\r\n            if (_this.state_ != 2 /* DISCONNECTED */) {\r\n                if (conn === _this.rx_) {\r\n                    _this.onPrimaryMessageReceived_(message);\r\n                }\r\n                else if (conn === _this.secondaryConn_) {\r\n                    _this.onSecondaryMessageReceived_(message);\r\n                }\r\n                else {\r\n                    _this.log_('message on old connection');\r\n                }\r\n            }\r\n        };\r\n    };\r\n    /**\r\n     *\r\n     * @param {Object} dataMsg An arbitrary data message to be sent to the server\r\n     */\r\n    Connection.prototype.sendRequest = function (dataMsg) {\r\n        // wrap in a data message envelope and send it on\r\n        var msg = { t: 'd', d: dataMsg };\r\n        this.sendData_(msg);\r\n    };\r\n    Connection.prototype.tryCleanupConnection = function () {\r\n        if (this.tx_ === this.secondaryConn_ && this.rx_ === this.secondaryConn_) {\r\n            this.log_('cleaning up and promoting a connection: ' + this.secondaryConn_.connId);\r\n            this.conn_ = this.secondaryConn_;\r\n            this.secondaryConn_ = null;\r\n            // the server will shutdown the old connection\r\n        }\r\n    };\r\n    Connection.prototype.onSecondaryControl_ = function (controlData) {\r\n        if (MESSAGE_TYPE in controlData) {\r\n            var cmd = controlData[MESSAGE_TYPE];\r\n            if (cmd === SWITCH_ACK) {\r\n                this.upgradeIfSecondaryHealthy_();\r\n            }\r\n            else if (cmd === CONTROL_RESET) {\r\n                // Most likely the session wasn't valid. Abandon the switch attempt\r\n                this.log_('Got a reset on secondary, closing it');\r\n                this.secondaryConn_.close();\r\n                // If we were already using this connection for something, than we need to fully close\r\n                if (this.tx_ === this.secondaryConn_ ||\r\n                    this.rx_ === this.secondaryConn_) {\r\n                    this.close();\r\n                }\r\n            }\r\n            else if (cmd === CONTROL_PONG) {\r\n                this.log_('got pong on secondary.');\r\n                this.secondaryResponsesRequired_--;\r\n                this.upgradeIfSecondaryHealthy_();\r\n            }\r\n        }\r\n    };\r\n    Connection.prototype.onSecondaryMessageReceived_ = function (parsedData) {\r\n        var layer = requireKey('t', parsedData);\r\n        var data = requireKey('d', parsedData);\r\n        if (layer == 'c') {\r\n            this.onSecondaryControl_(data);\r\n        }\r\n        else if (layer == 'd') {\r\n            // got a data message, but we're still second connection. Need to buffer it up\r\n            this.pendingDataMessages.push(data);\r\n        }\r\n        else {\r\n            throw new Error('Unknown protocol layer: ' + layer);\r\n        }\r\n    };\r\n    Connection.prototype.upgradeIfSecondaryHealthy_ = function () {\r\n        if (this.secondaryResponsesRequired_ <= 0) {\r\n            this.log_('Secondary connection is healthy.');\r\n            this.isHealthy_ = true;\r\n            this.secondaryConn_.markConnectionHealthy();\r\n            this.proceedWithUpgrade_();\r\n        }\r\n        else {\r\n            // Send a ping to make sure the connection is healthy.\r\n            this.log_('sending ping on secondary.');\r\n            this.secondaryConn_.send({ t: 'c', d: { t: PING, d: {} } });\r\n        }\r\n    };\r\n    Connection.prototype.proceedWithUpgrade_ = function () {\r\n        // tell this connection to consider itself open\r\n        this.secondaryConn_.start();\r\n        // send ack\r\n        this.log_('sending client ack on secondary');\r\n        this.secondaryConn_.send({ t: 'c', d: { t: SWITCH_ACK, d: {} } });\r\n        // send end packet on primary transport, switch to sending on this one\r\n        // can receive on this one, buffer responses until end received on primary transport\r\n        this.log_('Ending transmission on primary');\r\n        this.conn_.send({ t: 'c', d: { t: END_TRANSMISSION, d: {} } });\r\n        this.tx_ = this.secondaryConn_;\r\n        this.tryCleanupConnection();\r\n    };\r\n    Connection.prototype.onPrimaryMessageReceived_ = function (parsedData) {\r\n        // Must refer to parsedData properties in quotes, so closure doesn't touch them.\r\n        var layer = requireKey('t', parsedData);\r\n        var data = requireKey('d', parsedData);\r\n        if (layer == 'c') {\r\n            this.onControl_(data);\r\n        }\r\n        else if (layer == 'd') {\r\n            this.onDataMessage_(data);\r\n        }\r\n    };\r\n    Connection.prototype.onDataMessage_ = function (message) {\r\n        this.onPrimaryResponse_();\r\n        // We don't do anything with data messages, just kick them up a level\r\n        this.onMessage_(message);\r\n    };\r\n    Connection.prototype.onPrimaryResponse_ = function () {\r\n        if (!this.isHealthy_) {\r\n            this.primaryResponsesRequired_--;\r\n            if (this.primaryResponsesRequired_ <= 0) {\r\n                this.log_('Primary connection is healthy.');\r\n                this.isHealthy_ = true;\r\n                this.conn_.markConnectionHealthy();\r\n            }\r\n        }\r\n    };\r\n    Connection.prototype.onControl_ = function (controlData) {\r\n        var cmd = requireKey(MESSAGE_TYPE, controlData);\r\n        if (MESSAGE_DATA in controlData) {\r\n            var payload = controlData[MESSAGE_DATA];\r\n            if (cmd === SERVER_HELLO) {\r\n                this.onHandshake_(payload);\r\n            }\r\n            else if (cmd === END_TRANSMISSION) {\r\n                this.log_('recvd end transmission on primary');\r\n                this.rx_ = this.secondaryConn_;\r\n                for (var i = 0; i < this.pendingDataMessages.length; ++i) {\r\n                    this.onDataMessage_(this.pendingDataMessages[i]);\r\n                }\r\n                this.pendingDataMessages = [];\r\n                this.tryCleanupConnection();\r\n            }\r\n            else if (cmd === CONTROL_SHUTDOWN) {\r\n                // This was previously the 'onKill' callback passed to the lower-level connection\r\n                // payload in this case is the reason for the shutdown. Generally a human-readable error\r\n                this.onConnectionShutdown_(payload);\r\n            }\r\n            else if (cmd === CONTROL_RESET) {\r\n                // payload in this case is the host we should contact\r\n                this.onReset_(payload);\r\n            }\r\n            else if (cmd === CONTROL_ERROR) {\r\n                error('Server Error: ' + payload);\r\n            }\r\n            else if (cmd === CONTROL_PONG) {\r\n                this.log_('got pong on primary.');\r\n                this.onPrimaryResponse_();\r\n                this.sendPingOnPrimaryIfNecessary_();\r\n            }\r\n            else {\r\n                error('Unknown control packet command: ' + cmd);\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     *\r\n     * @param {Object} handshake The handshake data returned from the server\r\n     * @private\r\n     */\r\n    Connection.prototype.onHandshake_ = function (handshake) {\r\n        var timestamp = handshake.ts;\r\n        var version = handshake.v;\r\n        var host = handshake.h;\r\n        this.sessionId = handshake.s;\r\n        this.repoInfo_.updateHost(host);\r\n        // if we've already closed the connection, then don't bother trying to progress further\r\n        if (this.state_ == 0 /* CONNECTING */) {\r\n            this.conn_.start();\r\n            this.onConnectionEstablished_(this.conn_, timestamp);\r\n            if (PROTOCOL_VERSION !== version) {\r\n                warn('Protocol version mismatch detected');\r\n            }\r\n            // TODO: do we want to upgrade? when? maybe a delay?\r\n            this.tryStartUpgrade_();\r\n        }\r\n    };\r\n    Connection.prototype.tryStartUpgrade_ = function () {\r\n        var conn = this.transportManager_.upgradeTransport();\r\n        if (conn) {\r\n            this.startUpgrade_(conn);\r\n        }\r\n    };\r\n    Connection.prototype.startUpgrade_ = function (conn) {\r\n        var _this = this;\r\n        this.secondaryConn_ = new conn(this.nextTransportId_(), this.repoInfo_, this.sessionId);\r\n        // For certain transports (WebSockets), we need to send and receive several messages back and forth before we\r\n        // can consider the transport healthy.\r\n        this.secondaryResponsesRequired_ =\r\n            conn['responsesRequiredToBeHealthy'] || 0;\r\n        var onMessage = this.connReceiver_(this.secondaryConn_);\r\n        var onDisconnect = this.disconnReceiver_(this.secondaryConn_);\r\n        this.secondaryConn_.open(onMessage, onDisconnect);\r\n        // If we haven't successfully upgraded after UPGRADE_TIMEOUT, give up and kill the secondary.\r\n        setTimeoutNonBlocking(function () {\r\n            if (_this.secondaryConn_) {\r\n                _this.log_('Timed out trying to upgrade.');\r\n                _this.secondaryConn_.close();\r\n            }\r\n        }, Math.floor(UPGRADE_TIMEOUT));\r\n    };\r\n    Connection.prototype.onReset_ = function (host) {\r\n        this.log_('Reset packet received.  New host: ' + host);\r\n        this.repoInfo_.updateHost(host);\r\n        // TODO: if we're already \"connected\", we need to trigger a disconnect at the next layer up.\r\n        // We don't currently support resets after the connection has already been established\r\n        if (this.state_ === 1 /* CONNECTED */) {\r\n            this.close();\r\n        }\r\n        else {\r\n            // Close whatever connections we have open and start again.\r\n            this.closeConnections_();\r\n            this.start_();\r\n        }\r\n    };\r\n    Connection.prototype.onConnectionEstablished_ = function (conn, timestamp) {\r\n        var _this = this;\r\n        this.log_('Realtime connection established.');\r\n        this.conn_ = conn;\r\n        this.state_ = 1 /* CONNECTED */;\r\n        if (this.onReady_) {\r\n            this.onReady_(timestamp, this.sessionId);\r\n            this.onReady_ = null;\r\n        }\r\n        // If after 5 seconds we haven't sent enough requests to the server to get the connection healthy,\r\n        // send some pings.\r\n        if (this.primaryResponsesRequired_ === 0) {\r\n            this.log_('Primary connection is healthy.');\r\n            this.isHealthy_ = true;\r\n        }\r\n        else {\r\n            setTimeoutNonBlocking(function () {\r\n                _this.sendPingOnPrimaryIfNecessary_();\r\n            }, Math.floor(DELAY_BEFORE_SENDING_EXTRA_REQUESTS));\r\n        }\r\n    };\r\n    Connection.prototype.sendPingOnPrimaryIfNecessary_ = function () {\r\n        // If the connection isn't considered healthy yet, we'll send a noop ping packet request.\r\n        if (!this.isHealthy_ && this.state_ === 1 /* CONNECTED */) {\r\n            this.log_('sending ping on primary.');\r\n            this.sendData_({ t: 'c', d: { t: PING, d: {} } });\r\n        }\r\n    };\r\n    Connection.prototype.onSecondaryConnectionLost_ = function () {\r\n        var conn = this.secondaryConn_;\r\n        this.secondaryConn_ = null;\r\n        if (this.tx_ === conn || this.rx_ === conn) {\r\n            // we are relying on this connection already in some capacity. Therefore, a failure is real\r\n            this.close();\r\n        }\r\n    };\r\n    /**\r\n     *\r\n     * @param {boolean} everConnected Whether or not the connection ever reached a server. Used to determine if\r\n     * we should flush the host cache\r\n     * @private\r\n     */\r\n    Connection.prototype.onConnectionLost_ = function (everConnected) {\r\n        this.conn_ = null;\r\n        // NOTE: IF you're seeing a Firefox error for this line, I think it might be because it's getting\r\n        // called on window close and RealtimeState.CONNECTING is no longer defined.  Just a guess.\r\n        if (!everConnected && this.state_ === 0 /* CONNECTING */) {\r\n            this.log_('Realtime connection failed.');\r\n            // Since we failed to connect at all, clear any cached entry for this namespace in case the machine went away\r\n            if (this.repoInfo_.isCacheableHost()) {\r\n                PersistentStorage.remove('host:' + this.repoInfo_.host);\r\n                // reset the internal host to what we would show the user, i.e. <ns>.firebaseio.com\r\n                this.repoInfo_.internalHost = this.repoInfo_.host;\r\n            }\r\n        }\r\n        else if (this.state_ === 1 /* CONNECTED */) {\r\n            this.log_('Realtime connection lost.');\r\n        }\r\n        this.close();\r\n    };\r\n    /**\r\n     *\r\n     * @param {string} reason\r\n     * @private\r\n     */\r\n    Connection.prototype.onConnectionShutdown_ = function (reason) {\r\n        this.log_('Connection shutdown command received. Shutting down...');\r\n        if (this.onKill_) {\r\n            this.onKill_(reason);\r\n            this.onKill_ = null;\r\n        }\r\n        // We intentionally don't want to fire onDisconnect (kill is a different case),\r\n        // so clear the callback.\r\n        this.onDisconnect_ = null;\r\n        this.close();\r\n    };\r\n    Connection.prototype.sendData_ = function (data) {\r\n        if (this.state_ !== 1 /* CONNECTED */) {\r\n            throw 'Connection is not connected';\r\n        }\r\n        else {\r\n            this.tx_.send(data);\r\n        }\r\n    };\r\n    /**\r\n     * Cleans up this connection, calling the appropriate callbacks\r\n     */\r\n    Connection.prototype.close = function () {\r\n        if (this.state_ !== 2 /* DISCONNECTED */) {\r\n            this.log_('Closing realtime connection.');\r\n            this.state_ = 2 /* DISCONNECTED */;\r\n            this.closeConnections_();\r\n            if (this.onDisconnect_) {\r\n                this.onDisconnect_();\r\n                this.onDisconnect_ = null;\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     *\r\n     * @private\r\n     */\r\n    Connection.prototype.closeConnections_ = function () {\r\n        this.log_('Shutting down all connections');\r\n        if (this.conn_) {\r\n            this.conn_.close();\r\n            this.conn_ = null;\r\n        }\r\n        if (this.secondaryConn_) {\r\n            this.secondaryConn_.close();\r\n            this.secondaryConn_ = null;\r\n        }\r\n        if (this.healthyTimeout_) {\r\n            clearTimeout(this.healthyTimeout_);\r\n            this.healthyTimeout_ = null;\r\n        }\r\n    };\r\n    return Connection;\r\n}());\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Interface defining the set of actions that can be performed against the Firebase server\r\n * (basically corresponds to our wire protocol).\r\n *\r\n * @interface\r\n */\r\nvar ServerActions = /** @class */ (function () {\r\n    function ServerActions() {\r\n    }\r\n    /**\r\n     * @param {string} pathString\r\n     * @param {*} data\r\n     * @param {function(string, string)=} onComplete\r\n     * @param {string=} hash\r\n     */\r\n    ServerActions.prototype.put = function (pathString, data, onComplete, hash) { };\r\n    /**\r\n     * @param {string} pathString\r\n     * @param {*} data\r\n     * @param {function(string, ?string)} onComplete\r\n     * @param {string=} hash\r\n     */\r\n    ServerActions.prototype.merge = function (pathString, data, onComplete, hash) { };\r\n    /**\r\n     * Refreshes the auth token for the current connection.\r\n     * @param {string} token The authentication token\r\n     */\r\n    ServerActions.prototype.refreshAuthToken = function (token) { };\r\n    /**\r\n     * @param {string} pathString\r\n     * @param {*} data\r\n     * @param {function(string, string)=} onComplete\r\n     */\r\n    ServerActions.prototype.onDisconnectPut = function (pathString, data, onComplete) { };\r\n    /**\r\n     * @param {string} pathString\r\n     * @param {*} data\r\n     * @param {function(string, string)=} onComplete\r\n     */\r\n    ServerActions.prototype.onDisconnectMerge = function (pathString, data, onComplete) { };\r\n    /**\r\n     * @param {string} pathString\r\n     * @param {function(string, string)=} onComplete\r\n     */\r\n    ServerActions.prototype.onDisconnectCancel = function (pathString, onComplete) { };\r\n    /**\r\n     * @param {Object.<string, *>} stats\r\n     */\r\n    ServerActions.prototype.reportStats = function (stats) { };\r\n    return ServerActions;\r\n}());\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nvar RECONNECT_MIN_DELAY = 1000;\r\nvar RECONNECT_MAX_DELAY_DEFAULT = 60 * 5 * 1000; // 5 minutes in milliseconds (Case: 1858)\r\nvar RECONNECT_MAX_DELAY_FOR_ADMINS = 30 * 1000; // 30 seconds for admin clients (likely to be a backend server)\r\nvar RECONNECT_DELAY_MULTIPLIER = 1.3;\r\nvar RECONNECT_DELAY_RESET_TIMEOUT = 30000; // Reset delay back to MIN_DELAY after being connected for 30sec.\r\nvar SERVER_KILL_INTERRUPT_REASON = 'server_kill';\r\n// If auth fails repeatedly, we'll assume something is wrong and log a warning / back off.\r\nvar INVALID_AUTH_TOKEN_THRESHOLD = 3;\r\n/**\r\n * Firebase connection.  Abstracts wire protocol and handles reconnecting.\r\n *\r\n * NOTE: All JSON objects sent to the realtime connection must have property names enclosed\r\n * in quotes to make sure the closure compiler does not minify them.\r\n */\r\nvar PersistentConnection = /** @class */ (function (_super) {\r\n    tslib_1.__extends(PersistentConnection, _super);\r\n    /**\r\n     * @implements {ServerActions}\r\n     * @param {!RepoInfo} repoInfo_ Data about the namespace we are connecting to\r\n     * @param {function(string, *, boolean, ?number)} onDataUpdate_ A callback for new data from the server\r\n     * @param onConnectStatus_\r\n     * @param onServerInfoUpdate_\r\n     * @param authTokenProvider_\r\n     * @param authOverride_\r\n     */\r\n    function PersistentConnection(repoInfo_, onDataUpdate_, onConnectStatus_, onServerInfoUpdate_, authTokenProvider_, authOverride_) {\r\n        var _this = _super.call(this) || this;\r\n        _this.repoInfo_ = repoInfo_;\r\n        _this.onDataUpdate_ = onDataUpdate_;\r\n        _this.onConnectStatus_ = onConnectStatus_;\r\n        _this.onServerInfoUpdate_ = onServerInfoUpdate_;\r\n        _this.authTokenProvider_ = authTokenProvider_;\r\n        _this.authOverride_ = authOverride_;\r\n        // Used for diagnostic logging.\r\n        _this.id = PersistentConnection.nextPersistentConnectionId_++;\r\n        _this.log_ = logWrapper('p:' + _this.id + ':');\r\n        /** @private {Object} */\r\n        _this.interruptReasons_ = {};\r\n        _this.listens_ = {};\r\n        _this.outstandingPuts_ = [];\r\n        _this.outstandingPutCount_ = 0;\r\n        _this.onDisconnectRequestQueue_ = [];\r\n        _this.connected_ = false;\r\n        _this.reconnectDelay_ = RECONNECT_MIN_DELAY;\r\n        _this.maxReconnectDelay_ = RECONNECT_MAX_DELAY_DEFAULT;\r\n        _this.securityDebugCallback_ = null;\r\n        _this.lastSessionId = null;\r\n        /** @private {number|null} */\r\n        _this.establishConnectionTimer_ = null;\r\n        /** @private {boolean} */\r\n        _this.visible_ = false;\r\n        // Before we get connected, we keep a queue of pending messages to send.\r\n        _this.requestCBHash_ = {};\r\n        _this.requestNumber_ = 0;\r\n        /** @private {?{\r\n         *   sendRequest(Object),\r\n         *   close()\r\n         * }} */\r\n        _this.realtime_ = null;\r\n        /** @private {string|null} */\r\n        _this.authToken_ = null;\r\n        _this.forceTokenRefresh_ = false;\r\n        _this.invalidAuthTokenCount_ = 0;\r\n        _this.firstConnection_ = true;\r\n        _this.lastConnectionAttemptTime_ = null;\r\n        _this.lastConnectionEstablishedTime_ = null;\r\n        if (authOverride_ && !util.isNodeSdk()) {\r\n            throw new Error('Auth override specified in options, but not supported on non Node.js platforms');\r\n        }\r\n        _this.scheduleConnect_(0);\r\n        VisibilityMonitor.getInstance().on('visible', _this.onVisible_, _this);\r\n        if (repoInfo_.host.indexOf('fblocal') === -1) {\r\n            OnlineMonitor.getInstance().on('online', _this.onOnline_, _this);\r\n        }\r\n        return _this;\r\n    }\r\n    /**\r\n     * @param {!string} action\r\n     * @param {*} body\r\n     * @param {function(*)=} onResponse\r\n     * @protected\r\n     */\r\n    PersistentConnection.prototype.sendRequest = function (action, body, onResponse) {\r\n        var curReqNum = ++this.requestNumber_;\r\n        var msg = { r: curReqNum, a: action, b: body };\r\n        this.log_(util.stringify(msg));\r\n        util.assert(this.connected_, \"sendRequest call when we're not connected not allowed.\");\r\n        this.realtime_.sendRequest(msg);\r\n        if (onResponse) {\r\n            this.requestCBHash_[curReqNum] = onResponse;\r\n        }\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    PersistentConnection.prototype.listen = function (query, currentHashFn, tag, onComplete) {\r\n        var queryId = query.queryIdentifier();\r\n        var pathString = query.path.toString();\r\n        this.log_('Listen called for ' + pathString + ' ' + queryId);\r\n        this.listens_[pathString] = this.listens_[pathString] || {};\r\n        util.assert(query.getQueryParams().isDefault() ||\r\n            !query.getQueryParams().loadsAllData(), 'listen() called for non-default but complete query');\r\n        util.assert(!this.listens_[pathString][queryId], 'listen() called twice for same path/queryId.');\r\n        var listenSpec = {\r\n            onComplete: onComplete,\r\n            hashFn: currentHashFn,\r\n            query: query,\r\n            tag: tag\r\n        };\r\n        this.listens_[pathString][queryId] = listenSpec;\r\n        if (this.connected_) {\r\n            this.sendListen_(listenSpec);\r\n        }\r\n    };\r\n    /**\r\n     * @param {!{onComplete(),\r\n     *           hashFn():!string,\r\n     *           query: !Query,\r\n     *           tag: ?number}} listenSpec\r\n     * @private\r\n     */\r\n    PersistentConnection.prototype.sendListen_ = function (listenSpec) {\r\n        var _this = this;\r\n        var query = listenSpec.query;\r\n        var pathString = query.path.toString();\r\n        var queryId = query.queryIdentifier();\r\n        this.log_('Listen on ' + pathString + ' for ' + queryId);\r\n        var req = { /*path*/ p: pathString };\r\n        var action = 'q';\r\n        // Only bother to send query if it's non-default.\r\n        if (listenSpec.tag) {\r\n            req['q'] = query.queryObject();\r\n            req['t'] = listenSpec.tag;\r\n        }\r\n        req[ /*hash*/'h'] = listenSpec.hashFn();\r\n        this.sendRequest(action, req, function (message) {\r\n            var payload = message[ /*data*/'d'];\r\n            var status = message[ /*status*/'s'];\r\n            // print warnings in any case...\r\n            PersistentConnection.warnOnListenWarnings_(payload, query);\r\n            var currentListenSpec = _this.listens_[pathString] && _this.listens_[pathString][queryId];\r\n            // only trigger actions if the listen hasn't been removed and readded\r\n            if (currentListenSpec === listenSpec) {\r\n                _this.log_('listen response', message);\r\n                if (status !== 'ok') {\r\n                    _this.removeListen_(pathString, queryId);\r\n                }\r\n                if (listenSpec.onComplete) {\r\n                    listenSpec.onComplete(status, payload);\r\n                }\r\n            }\r\n        });\r\n    };\r\n    /**\r\n     * @param {*} payload\r\n     * @param {!Query} query\r\n     * @private\r\n     */\r\n    PersistentConnection.warnOnListenWarnings_ = function (payload, query) {\r\n        if (payload && typeof payload === 'object' && util.contains(payload, 'w')) {\r\n            var warnings = util.safeGet(payload, 'w');\r\n            if (Array.isArray(warnings) && ~warnings.indexOf('no_index')) {\r\n                var indexSpec = '\".indexOn\": \"' +\r\n                    query\r\n                        .getQueryParams()\r\n                        .getIndex()\r\n                        .toString() +\r\n                    '\"';\r\n                var indexPath = query.path.toString();\r\n                warn(\"Using an unspecified index. Your data will be downloaded and \" +\r\n                    (\"filtered on the client. Consider adding \" + indexSpec + \" at \") +\r\n                    (indexPath + \" to your security rules for better performance.\"));\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    PersistentConnection.prototype.refreshAuthToken = function (token) {\r\n        this.authToken_ = token;\r\n        this.log_('Auth token refreshed');\r\n        if (this.authToken_) {\r\n            this.tryAuth();\r\n        }\r\n        else {\r\n            //If we're connected we want to let the server know to unauthenticate us. If we're not connected, simply delete\r\n            //the credential so we dont become authenticated next time we connect.\r\n            if (this.connected_) {\r\n                this.sendRequest('unauth', {}, function () { });\r\n            }\r\n        }\r\n        this.reduceReconnectDelayIfAdminCredential_(token);\r\n    };\r\n    /**\r\n     * @param {!string} credential\r\n     * @private\r\n     */\r\n    PersistentConnection.prototype.reduceReconnectDelayIfAdminCredential_ = function (credential) {\r\n        // NOTE: This isn't intended to be bulletproof (a malicious developer can always just modify the client).\r\n        // Additionally, we don't bother resetting the max delay back to the default if auth fails / expires.\r\n        var isFirebaseSecret = credential && credential.length === 40;\r\n        if (isFirebaseSecret || util.isAdmin(credential)) {\r\n            this.log_('Admin auth credential detected.  Reducing max reconnect time.');\r\n            this.maxReconnectDelay_ = RECONNECT_MAX_DELAY_FOR_ADMINS;\r\n        }\r\n    };\r\n    /**\r\n     * Attempts to authenticate with the given credentials. If the authentication attempt fails, it's triggered like\r\n     * a auth revoked (the connection is closed).\r\n     */\r\n    PersistentConnection.prototype.tryAuth = function () {\r\n        var _this = this;\r\n        if (this.connected_ && this.authToken_) {\r\n            var token_1 = this.authToken_;\r\n            var authMethod = util.isValidFormat(token_1) ? 'auth' : 'gauth';\r\n            var requestData = { cred: token_1 };\r\n            if (this.authOverride_ === null) {\r\n                requestData['noauth'] = true;\r\n            }\r\n            else if (typeof this.authOverride_ === 'object') {\r\n                requestData['authvar'] = this.authOverride_;\r\n            }\r\n            this.sendRequest(authMethod, requestData, function (res) {\r\n                var status = res[ /*status*/'s'];\r\n                var data = res[ /*data*/'d'] || 'error';\r\n                if (_this.authToken_ === token_1) {\r\n                    if (status === 'ok') {\r\n                        _this.invalidAuthTokenCount_ = 0;\r\n                    }\r\n                    else {\r\n                        // Triggers reconnect and force refresh for auth token\r\n                        _this.onAuthRevoked_(status, data);\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    PersistentConnection.prototype.unlisten = function (query, tag) {\r\n        var pathString = query.path.toString();\r\n        var queryId = query.queryIdentifier();\r\n        this.log_('Unlisten called for ' + pathString + ' ' + queryId);\r\n        util.assert(query.getQueryParams().isDefault() ||\r\n            !query.getQueryParams().loadsAllData(), 'unlisten() called for non-default but complete query');\r\n        var listen = this.removeListen_(pathString, queryId);\r\n        if (listen && this.connected_) {\r\n            this.sendUnlisten_(pathString, queryId, query.queryObject(), tag);\r\n        }\r\n    };\r\n    PersistentConnection.prototype.sendUnlisten_ = function (pathString, queryId, queryObj, tag) {\r\n        this.log_('Unlisten on ' + pathString + ' for ' + queryId);\r\n        var req = { /*path*/ p: pathString };\r\n        var action = 'n';\r\n        // Only bother sending queryId if it's non-default.\r\n        if (tag) {\r\n            req['q'] = queryObj;\r\n            req['t'] = tag;\r\n        }\r\n        this.sendRequest(action, req);\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    PersistentConnection.prototype.onDisconnectPut = function (pathString, data, onComplete) {\r\n        if (this.connected_) {\r\n            this.sendOnDisconnect_('o', pathString, data, onComplete);\r\n        }\r\n        else {\r\n            this.onDisconnectRequestQueue_.push({\r\n                pathString: pathString,\r\n                action: 'o',\r\n                data: data,\r\n                onComplete: onComplete\r\n            });\r\n        }\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    PersistentConnection.prototype.onDisconnectMerge = function (pathString, data, onComplete) {\r\n        if (this.connected_) {\r\n            this.sendOnDisconnect_('om', pathString, data, onComplete);\r\n        }\r\n        else {\r\n            this.onDisconnectRequestQueue_.push({\r\n                pathString: pathString,\r\n                action: 'om',\r\n                data: data,\r\n                onComplete: onComplete\r\n            });\r\n        }\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    PersistentConnection.prototype.onDisconnectCancel = function (pathString, onComplete) {\r\n        if (this.connected_) {\r\n            this.sendOnDisconnect_('oc', pathString, null, onComplete);\r\n        }\r\n        else {\r\n            this.onDisconnectRequestQueue_.push({\r\n                pathString: pathString,\r\n                action: 'oc',\r\n                data: null,\r\n                onComplete: onComplete\r\n            });\r\n        }\r\n    };\r\n    PersistentConnection.prototype.sendOnDisconnect_ = function (action, pathString, data, onComplete) {\r\n        var request = { /*path*/ p: pathString, /*data*/ d: data };\r\n        this.log_('onDisconnect ' + action, request);\r\n        this.sendRequest(action, request, function (response) {\r\n            if (onComplete) {\r\n                setTimeout(function () {\r\n                    onComplete(response[ /*status*/'s'], response[ /* data */'d']);\r\n                }, Math.floor(0));\r\n            }\r\n        });\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    PersistentConnection.prototype.put = function (pathString, data, onComplete, hash) {\r\n        this.putInternal('p', pathString, data, onComplete, hash);\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    PersistentConnection.prototype.merge = function (pathString, data, onComplete, hash) {\r\n        this.putInternal('m', pathString, data, onComplete, hash);\r\n    };\r\n    PersistentConnection.prototype.putInternal = function (action, pathString, data, onComplete, hash) {\r\n        var request = {\r\n            /*path*/ p: pathString,\r\n            /*data*/ d: data\r\n        };\r\n        if (hash !== undefined)\r\n            request[ /*hash*/'h'] = hash;\r\n        // TODO: Only keep track of the most recent put for a given path?\r\n        this.outstandingPuts_.push({\r\n            action: action,\r\n            request: request,\r\n            onComplete: onComplete\r\n        });\r\n        this.outstandingPutCount_++;\r\n        var index = this.outstandingPuts_.length - 1;\r\n        if (this.connected_) {\r\n            this.sendPut_(index);\r\n        }\r\n        else {\r\n            this.log_('Buffering put: ' + pathString);\r\n        }\r\n    };\r\n    PersistentConnection.prototype.sendPut_ = function (index) {\r\n        var _this = this;\r\n        var action = this.outstandingPuts_[index].action;\r\n        var request = this.outstandingPuts_[index].request;\r\n        var onComplete = this.outstandingPuts_[index].onComplete;\r\n        this.outstandingPuts_[index].queued = this.connected_;\r\n        this.sendRequest(action, request, function (message) {\r\n            _this.log_(action + ' response', message);\r\n            delete _this.outstandingPuts_[index];\r\n            _this.outstandingPutCount_--;\r\n            // Clean up array occasionally.\r\n            if (_this.outstandingPutCount_ === 0) {\r\n                _this.outstandingPuts_ = [];\r\n            }\r\n            if (onComplete)\r\n                onComplete(message[ /*status*/'s'], message[ /* data */'d']);\r\n        });\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    PersistentConnection.prototype.reportStats = function (stats) {\r\n        var _this = this;\r\n        // If we're not connected, we just drop the stats.\r\n        if (this.connected_) {\r\n            var request = { /*counters*/ c: stats };\r\n            this.log_('reportStats', request);\r\n            this.sendRequest(/*stats*/ 's', request, function (result) {\r\n                var status = result[ /*status*/'s'];\r\n                if (status !== 'ok') {\r\n                    var errorReason = result[ /* data */'d'];\r\n                    _this.log_('reportStats', 'Error sending stats: ' + errorReason);\r\n                }\r\n            });\r\n        }\r\n    };\r\n    /**\r\n     * @param {*} message\r\n     * @private\r\n     */\r\n    PersistentConnection.prototype.onDataMessage_ = function (message) {\r\n        if ('r' in message) {\r\n            // this is a response\r\n            this.log_('from server: ' + util.stringify(message));\r\n            var reqNum = message['r'];\r\n            var onResponse = this.requestCBHash_[reqNum];\r\n            if (onResponse) {\r\n                delete this.requestCBHash_[reqNum];\r\n                onResponse(message[ /*body*/'b']);\r\n            }\r\n        }\r\n        else if ('error' in message) {\r\n            throw 'A server-side error has occurred: ' + message['error'];\r\n        }\r\n        else if ('a' in message) {\r\n            // a and b are action and body, respectively\r\n            this.onDataPush_(message['a'], message['b']);\r\n        }\r\n    };\r\n    PersistentConnection.prototype.onDataPush_ = function (action, body) {\r\n        this.log_('handleServerMessage', action, body);\r\n        if (action === 'd')\r\n            this.onDataUpdate_(body[ /*path*/'p'], body[ /*data*/'d'], \r\n            /*isMerge*/ false, body['t']);\r\n        else if (action === 'm')\r\n            this.onDataUpdate_(body[ /*path*/'p'], body[ /*data*/'d'], \r\n            /*isMerge=*/ true, body['t']);\r\n        else if (action === 'c')\r\n            this.onListenRevoked_(body[ /*path*/'p'], body[ /*query*/'q']);\r\n        else if (action === 'ac')\r\n            this.onAuthRevoked_(body[ /*status code*/'s'], body[ /* explanation */'d']);\r\n        else if (action === 'sd')\r\n            this.onSecurityDebugPacket_(body);\r\n        else\r\n            error('Unrecognized action received from server: ' +\r\n                util.stringify(action) +\r\n                '\\nAre you using the latest client?');\r\n    };\r\n    PersistentConnection.prototype.onReady_ = function (timestamp, sessionId) {\r\n        this.log_('connection ready');\r\n        this.connected_ = true;\r\n        this.lastConnectionEstablishedTime_ = new Date().getTime();\r\n        this.handleTimestamp_(timestamp);\r\n        this.lastSessionId = sessionId;\r\n        if (this.firstConnection_) {\r\n            this.sendConnectStats_();\r\n        }\r\n        this.restoreState_();\r\n        this.firstConnection_ = false;\r\n        this.onConnectStatus_(true);\r\n    };\r\n    PersistentConnection.prototype.scheduleConnect_ = function (timeout) {\r\n        var _this = this;\r\n        util.assert(!this.realtime_, \"Scheduling a connect when we're already connected/ing?\");\r\n        if (this.establishConnectionTimer_) {\r\n            clearTimeout(this.establishConnectionTimer_);\r\n        }\r\n        // NOTE: Even when timeout is 0, it's important to do a setTimeout to work around an infuriating \"Security Error\" in\r\n        // Firefox when trying to write to our long-polling iframe in some scenarios (e.g. Forge or our unit tests).\r\n        this.establishConnectionTimer_ = setTimeout(function () {\r\n            _this.establishConnectionTimer_ = null;\r\n            _this.establishConnection_();\r\n        }, Math.floor(timeout));\r\n    };\r\n    /**\r\n     * @param {boolean} visible\r\n     * @private\r\n     */\r\n    PersistentConnection.prototype.onVisible_ = function (visible) {\r\n        // NOTE: Tabbing away and back to a window will defeat our reconnect backoff, but I think that's fine.\r\n        if (visible &&\r\n            !this.visible_ &&\r\n            this.reconnectDelay_ === this.maxReconnectDelay_) {\r\n            this.log_('Window became visible.  Reducing delay.');\r\n            this.reconnectDelay_ = RECONNECT_MIN_DELAY;\r\n            if (!this.realtime_) {\r\n                this.scheduleConnect_(0);\r\n            }\r\n        }\r\n        this.visible_ = visible;\r\n    };\r\n    PersistentConnection.prototype.onOnline_ = function (online) {\r\n        if (online) {\r\n            this.log_('Browser went online.');\r\n            this.reconnectDelay_ = RECONNECT_MIN_DELAY;\r\n            if (!this.realtime_) {\r\n                this.scheduleConnect_(0);\r\n            }\r\n        }\r\n        else {\r\n            this.log_('Browser went offline.  Killing connection.');\r\n            if (this.realtime_) {\r\n                this.realtime_.close();\r\n            }\r\n        }\r\n    };\r\n    PersistentConnection.prototype.onRealtimeDisconnect_ = function () {\r\n        this.log_('data client disconnected');\r\n        this.connected_ = false;\r\n        this.realtime_ = null;\r\n        // Since we don't know if our sent transactions succeeded or not, we need to cancel them.\r\n        this.cancelSentTransactions_();\r\n        // Clear out the pending requests.\r\n        this.requestCBHash_ = {};\r\n        if (this.shouldReconnect_()) {\r\n            if (!this.visible_) {\r\n                this.log_(\"Window isn't visible.  Delaying reconnect.\");\r\n                this.reconnectDelay_ = this.maxReconnectDelay_;\r\n                this.lastConnectionAttemptTime_ = new Date().getTime();\r\n            }\r\n            else if (this.lastConnectionEstablishedTime_) {\r\n                // If we've been connected long enough, reset reconnect delay to minimum.\r\n                var timeSinceLastConnectSucceeded = new Date().getTime() - this.lastConnectionEstablishedTime_;\r\n                if (timeSinceLastConnectSucceeded > RECONNECT_DELAY_RESET_TIMEOUT)\r\n                    this.reconnectDelay_ = RECONNECT_MIN_DELAY;\r\n                this.lastConnectionEstablishedTime_ = null;\r\n            }\r\n            var timeSinceLastConnectAttempt = new Date().getTime() - this.lastConnectionAttemptTime_;\r\n            var reconnectDelay = Math.max(0, this.reconnectDelay_ - timeSinceLastConnectAttempt);\r\n            reconnectDelay = Math.random() * reconnectDelay;\r\n            this.log_('Trying to reconnect in ' + reconnectDelay + 'ms');\r\n            this.scheduleConnect_(reconnectDelay);\r\n            // Adjust reconnect delay for next time.\r\n            this.reconnectDelay_ = Math.min(this.maxReconnectDelay_, this.reconnectDelay_ * RECONNECT_DELAY_MULTIPLIER);\r\n        }\r\n        this.onConnectStatus_(false);\r\n    };\r\n    PersistentConnection.prototype.establishConnection_ = function () {\r\n        if (this.shouldReconnect_()) {\r\n            this.log_('Making a connection attempt');\r\n            this.lastConnectionAttemptTime_ = new Date().getTime();\r\n            this.lastConnectionEstablishedTime_ = null;\r\n            var onDataMessage_1 = this.onDataMessage_.bind(this);\r\n            var onReady_1 = this.onReady_.bind(this);\r\n            var onDisconnect_1 = this.onRealtimeDisconnect_.bind(this);\r\n            var connId_1 = this.id + ':' + PersistentConnection.nextConnectionId_++;\r\n            var self_1 = this;\r\n            var lastSessionId_1 = this.lastSessionId;\r\n            var canceled_1 = false;\r\n            var connection_1 = null;\r\n            var closeFn_1 = function () {\r\n                if (connection_1) {\r\n                    connection_1.close();\r\n                }\r\n                else {\r\n                    canceled_1 = true;\r\n                    onDisconnect_1();\r\n                }\r\n            };\r\n            var sendRequestFn = function (msg) {\r\n                util.assert(connection_1, \"sendRequest call when we're not connected not allowed.\");\r\n                connection_1.sendRequest(msg);\r\n            };\r\n            this.realtime_ = {\r\n                close: closeFn_1,\r\n                sendRequest: sendRequestFn\r\n            };\r\n            var forceRefresh = this.forceTokenRefresh_;\r\n            this.forceTokenRefresh_ = false;\r\n            // First fetch auth token, and establish connection after fetching the token was successful\r\n            this.authTokenProvider_\r\n                .getToken(forceRefresh)\r\n                .then(function (result) {\r\n                if (!canceled_1) {\r\n                    log('getToken() completed. Creating connection.');\r\n                    self_1.authToken_ = result && result.accessToken;\r\n                    connection_1 = new Connection(connId_1, self_1.repoInfo_, onDataMessage_1, onReady_1, onDisconnect_1, \r\n                    /* onKill= */ function (reason) {\r\n                        warn(reason + ' (' + self_1.repoInfo_.toString() + ')');\r\n                        self_1.interrupt(SERVER_KILL_INTERRUPT_REASON);\r\n                    }, lastSessionId_1);\r\n                }\r\n                else {\r\n                    log('getToken() completed but was canceled');\r\n                }\r\n            })\r\n                .then(null, function (error$$1) {\r\n                self_1.log_('Failed to get token: ' + error$$1);\r\n                if (!canceled_1) {\r\n                    if (util.CONSTANTS.NODE_ADMIN) {\r\n                        // This may be a critical error for the Admin Node.js SDK, so log a warning.\r\n                        // But getToken() may also just have temporarily failed, so we still want to\r\n                        // continue retrying.\r\n                        warn(error$$1);\r\n                    }\r\n                    closeFn_1();\r\n                }\r\n            });\r\n        }\r\n    };\r\n    /**\r\n     * @param {string} reason\r\n     */\r\n    PersistentConnection.prototype.interrupt = function (reason) {\r\n        log('Interrupting connection for reason: ' + reason);\r\n        this.interruptReasons_[reason] = true;\r\n        if (this.realtime_) {\r\n            this.realtime_.close();\r\n        }\r\n        else {\r\n            if (this.establishConnectionTimer_) {\r\n                clearTimeout(this.establishConnectionTimer_);\r\n                this.establishConnectionTimer_ = null;\r\n            }\r\n            if (this.connected_) {\r\n                this.onRealtimeDisconnect_();\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * @param {string} reason\r\n     */\r\n    PersistentConnection.prototype.resume = function (reason) {\r\n        log('Resuming connection for reason: ' + reason);\r\n        delete this.interruptReasons_[reason];\r\n        if (util.isEmpty(this.interruptReasons_)) {\r\n            this.reconnectDelay_ = RECONNECT_MIN_DELAY;\r\n            if (!this.realtime_) {\r\n                this.scheduleConnect_(0);\r\n            }\r\n        }\r\n    };\r\n    PersistentConnection.prototype.handleTimestamp_ = function (timestamp) {\r\n        var delta = timestamp - new Date().getTime();\r\n        this.onServerInfoUpdate_({ serverTimeOffset: delta });\r\n    };\r\n    PersistentConnection.prototype.cancelSentTransactions_ = function () {\r\n        for (var i = 0; i < this.outstandingPuts_.length; i++) {\r\n            var put = this.outstandingPuts_[i];\r\n            if (put && /*hash*/ 'h' in put.request && put.queued) {\r\n                if (put.onComplete)\r\n                    put.onComplete('disconnect');\r\n                delete this.outstandingPuts_[i];\r\n                this.outstandingPutCount_--;\r\n            }\r\n        }\r\n        // Clean up array occasionally.\r\n        if (this.outstandingPutCount_ === 0)\r\n            this.outstandingPuts_ = [];\r\n    };\r\n    /**\r\n     * @param {!string} pathString\r\n     * @param {Array.<*>=} query\r\n     * @private\r\n     */\r\n    PersistentConnection.prototype.onListenRevoked_ = function (pathString, query) {\r\n        // Remove the listen and manufacture a \"permission_denied\" error for the failed listen.\r\n        var queryId;\r\n        if (!query) {\r\n            queryId = 'default';\r\n        }\r\n        else {\r\n            queryId = query.map(function (q) { return ObjectToUniqueKey(q); }).join('$');\r\n        }\r\n        var listen = this.removeListen_(pathString, queryId);\r\n        if (listen && listen.onComplete)\r\n            listen.onComplete('permission_denied');\r\n    };\r\n    /**\r\n     * @param {!string} pathString\r\n     * @param {!string} queryId\r\n     * @return {{queries:Array.<Query>, onComplete:function(string)}}\r\n     * @private\r\n     */\r\n    PersistentConnection.prototype.removeListen_ = function (pathString, queryId) {\r\n        var normalizedPathString = new Path(pathString).toString(); // normalize path.\r\n        var listen;\r\n        if (this.listens_[normalizedPathString] !== undefined) {\r\n            listen = this.listens_[normalizedPathString][queryId];\r\n            delete this.listens_[normalizedPathString][queryId];\r\n            if (util.getCount(this.listens_[normalizedPathString]) === 0) {\r\n                delete this.listens_[normalizedPathString];\r\n            }\r\n        }\r\n        else {\r\n            // all listens for this path has already been removed\r\n            listen = undefined;\r\n        }\r\n        return listen;\r\n    };\r\n    PersistentConnection.prototype.onAuthRevoked_ = function (statusCode, explanation) {\r\n        log('Auth token revoked: ' + statusCode + '/' + explanation);\r\n        this.authToken_ = null;\r\n        this.forceTokenRefresh_ = true;\r\n        this.realtime_.close();\r\n        if (statusCode === 'invalid_token' || statusCode === 'permission_denied') {\r\n            // We'll wait a couple times before logging the warning / increasing the\r\n            // retry period since oauth tokens will report as \"invalid\" if they're\r\n            // just expired. Plus there may be transient issues that resolve themselves.\r\n            this.invalidAuthTokenCount_++;\r\n            if (this.invalidAuthTokenCount_ >= INVALID_AUTH_TOKEN_THRESHOLD) {\r\n                // Set a long reconnect delay because recovery is unlikely\r\n                this.reconnectDelay_ = RECONNECT_MAX_DELAY_FOR_ADMINS;\r\n                // Notify the auth token provider that the token is invalid, which will log\r\n                // a warning\r\n                this.authTokenProvider_.notifyForInvalidToken();\r\n            }\r\n        }\r\n    };\r\n    PersistentConnection.prototype.onSecurityDebugPacket_ = function (body) {\r\n        if (this.securityDebugCallback_) {\r\n            this.securityDebugCallback_(body);\r\n        }\r\n        else {\r\n            if ('msg' in body) {\r\n                console.log('FIREBASE: ' + body['msg'].replace('\\n', '\\nFIREBASE: '));\r\n            }\r\n        }\r\n    };\r\n    PersistentConnection.prototype.restoreState_ = function () {\r\n        var _this = this;\r\n        //Re-authenticate ourselves if we have a credential stored.\r\n        this.tryAuth();\r\n        // Puts depend on having received the corresponding data update from the server before they complete, so we must\r\n        // make sure to send listens before puts.\r\n        util.forEach(this.listens_, function (pathString, queries) {\r\n            util.forEach(queries, function (key, listenSpec) {\r\n                _this.sendListen_(listenSpec);\r\n            });\r\n        });\r\n        for (var i = 0; i < this.outstandingPuts_.length; i++) {\r\n            if (this.outstandingPuts_[i])\r\n                this.sendPut_(i);\r\n        }\r\n        while (this.onDisconnectRequestQueue_.length) {\r\n            var request = this.onDisconnectRequestQueue_.shift();\r\n            this.sendOnDisconnect_(request.action, request.pathString, request.data, request.onComplete);\r\n        }\r\n    };\r\n    /**\r\n     * Sends client stats for first connection\r\n     * @private\r\n     */\r\n    PersistentConnection.prototype.sendConnectStats_ = function () {\r\n        var stats = {};\r\n        var clientName = 'js';\r\n        if (util.CONSTANTS.NODE_ADMIN) {\r\n            clientName = 'admin_node';\r\n        }\r\n        else if (util.CONSTANTS.NODE_CLIENT) {\r\n            clientName = 'node';\r\n        }\r\n        stats['sdk.' + clientName + '.' + firebase.SDK_VERSION.replace(/\\./g, '-')] = 1;\r\n        if (util.isMobileCordova()) {\r\n            stats['framework.cordova'] = 1;\r\n        }\r\n        else if (util.isReactNative()) {\r\n            stats['framework.reactnative'] = 1;\r\n        }\r\n        this.reportStats(stats);\r\n    };\r\n    /**\r\n     * @return {boolean}\r\n     * @private\r\n     */\r\n    PersistentConnection.prototype.shouldReconnect_ = function () {\r\n        var online = OnlineMonitor.getInstance().currentlyOnline();\r\n        return util.isEmpty(this.interruptReasons_) && online;\r\n    };\r\n    /**\r\n     * @private\r\n     */\r\n    PersistentConnection.nextPersistentConnectionId_ = 0;\r\n    /**\r\n     * Counter for number of connections created. Mainly used for tagging in the logs\r\n     * @type {number}\r\n     * @private\r\n     */\r\n    PersistentConnection.nextConnectionId_ = 0;\r\n    return PersistentConnection;\r\n}(ServerActions));\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * An implementation of ServerActions that communicates with the server via REST requests.\r\n * This is mostly useful for compatibility with crawlers, where we don't want to spin up a full\r\n * persistent connection (using WebSockets or long-polling)\r\n */\r\nvar ReadonlyRestClient = /** @class */ (function (_super) {\r\n    tslib_1.__extends(ReadonlyRestClient, _super);\r\n    /**\r\n     * @param {!RepoInfo} repoInfo_ Data about the namespace we are connecting to\r\n     * @param {function(string, *, boolean, ?number)} onDataUpdate_ A callback for new data from the server\r\n     * @param {AuthTokenProvider} authTokenProvider_\r\n     * @implements {ServerActions}\r\n     */\r\n    function ReadonlyRestClient(repoInfo_, onDataUpdate_, authTokenProvider_) {\r\n        var _this = _super.call(this) || this;\r\n        _this.repoInfo_ = repoInfo_;\r\n        _this.onDataUpdate_ = onDataUpdate_;\r\n        _this.authTokenProvider_ = authTokenProvider_;\r\n        /** @private {function(...[*])} */\r\n        _this.log_ = logWrapper('p:rest:');\r\n        /**\r\n         * We don't actually need to track listens, except to prevent us calling an onComplete for a listen\r\n         * that's been removed. :-/\r\n         *\r\n         * @private {!Object.<string, !Object>}\r\n         */\r\n        _this.listens_ = {};\r\n        return _this;\r\n    }\r\n    ReadonlyRestClient.prototype.reportStats = function (stats) {\r\n        throw new Error('Method not implemented.');\r\n    };\r\n    /**\r\n     * @param {!Query} query\r\n     * @param {?number=} tag\r\n     * @return {string}\r\n     * @private\r\n     */\r\n    ReadonlyRestClient.getListenId_ = function (query, tag) {\r\n        if (tag !== undefined) {\r\n            return 'tag$' + tag;\r\n        }\r\n        else {\r\n            util.assert(query.getQueryParams().isDefault(), \"should have a tag if it's not a default query.\");\r\n            return query.path.toString();\r\n        }\r\n    };\r\n    /** @inheritDoc */\r\n    ReadonlyRestClient.prototype.listen = function (query, currentHashFn, tag, onComplete) {\r\n        var _this = this;\r\n        var pathString = query.path.toString();\r\n        this.log_('Listen called for ' + pathString + ' ' + query.queryIdentifier());\r\n        // Mark this listener so we can tell if it's removed.\r\n        var listenId = ReadonlyRestClient.getListenId_(query, tag);\r\n        var thisListen = {};\r\n        this.listens_[listenId] = thisListen;\r\n        var queryStringParamaters = query\r\n            .getQueryParams()\r\n            .toRestQueryStringParameters();\r\n        this.restRequest_(pathString + '.json', queryStringParamaters, function (error$$1, result) {\r\n            var data = result;\r\n            if (error$$1 === 404) {\r\n                data = null;\r\n                error$$1 = null;\r\n            }\r\n            if (error$$1 === null) {\r\n                _this.onDataUpdate_(pathString, data, /*isMerge=*/ false, tag);\r\n            }\r\n            if (util.safeGet(_this.listens_, listenId) === thisListen) {\r\n                var status_1;\r\n                if (!error$$1) {\r\n                    status_1 = 'ok';\r\n                }\r\n                else if (error$$1 == 401) {\r\n                    status_1 = 'permission_denied';\r\n                }\r\n                else {\r\n                    status_1 = 'rest_error:' + error$$1;\r\n                }\r\n                onComplete(status_1, null);\r\n            }\r\n        });\r\n    };\r\n    /** @inheritDoc */\r\n    ReadonlyRestClient.prototype.unlisten = function (query, tag) {\r\n        var listenId = ReadonlyRestClient.getListenId_(query, tag);\r\n        delete this.listens_[listenId];\r\n    };\r\n    /** @inheritDoc */\r\n    ReadonlyRestClient.prototype.refreshAuthToken = function (token) {\r\n        // no-op since we just always call getToken.\r\n    };\r\n    /**\r\n     * Performs a REST request to the given path, with the provided query string parameters,\r\n     * and any auth credentials we have.\r\n     *\r\n     * @param {!string} pathString\r\n     * @param {!Object.<string, *>} queryStringParameters\r\n     * @param {?function(?number, *=)} callback\r\n     * @private\r\n     */\r\n    ReadonlyRestClient.prototype.restRequest_ = function (pathString, queryStringParameters, callback) {\r\n        var _this = this;\r\n        if (queryStringParameters === void 0) { queryStringParameters = {}; }\r\n        queryStringParameters['format'] = 'export';\r\n        this.authTokenProvider_\r\n            .getToken(/*forceRefresh=*/ false)\r\n            .then(function (authTokenData) {\r\n            var authToken = authTokenData && authTokenData.accessToken;\r\n            if (authToken) {\r\n                queryStringParameters['auth'] = authToken;\r\n            }\r\n            var url = (_this.repoInfo_.secure ? 'https://' : 'http://') +\r\n                _this.repoInfo_.host +\r\n                pathString +\r\n                '?' +\r\n                util.querystring(queryStringParameters);\r\n            _this.log_('Sending REST request for ' + url);\r\n            var xhr = new XMLHttpRequest();\r\n            xhr.onreadystatechange = function () {\r\n                if (callback && xhr.readyState === 4) {\r\n                    _this.log_('REST Response for ' + url + ' received. status:', xhr.status, 'response:', xhr.responseText);\r\n                    var res = null;\r\n                    if (xhr.status >= 200 && xhr.status < 300) {\r\n                        try {\r\n                            res = util.jsonEval(xhr.responseText);\r\n                        }\r\n                        catch (e) {\r\n                            warn('Failed to parse JSON response for ' +\r\n                                url +\r\n                                ': ' +\r\n                                xhr.responseText);\r\n                        }\r\n                        callback(null, res);\r\n                    }\r\n                    else {\r\n                        // 401 and 404 are expected.\r\n                        if (xhr.status !== 401 && xhr.status !== 404) {\r\n                            warn('Got unsuccessful REST response for ' +\r\n                                url +\r\n                                ' Status: ' +\r\n                                xhr.status);\r\n                        }\r\n                        callback(xhr.status);\r\n                    }\r\n                    callback = null;\r\n                }\r\n            };\r\n            xhr.open('GET', url, /*asynchronous=*/ true);\r\n            xhr.send();\r\n        });\r\n    };\r\n    return ReadonlyRestClient;\r\n}(ServerActions));\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nvar INTERRUPT_REASON = 'repo_interrupt';\r\n/**\r\n * A connection to a single data repository.\r\n */\r\nvar Repo = /** @class */ (function () {\r\n    /**\r\n     * @param {!RepoInfo} repoInfo_\r\n     * @param {boolean} forceRestClient\r\n     * @param {!FirebaseApp} app\r\n     */\r\n    function Repo(repoInfo_, forceRestClient, app) {\r\n        var _this = this;\r\n        this.repoInfo_ = repoInfo_;\r\n        this.app = app;\r\n        this.dataUpdateCount = 0;\r\n        this.statsListener_ = null;\r\n        this.eventQueue_ = new EventQueue();\r\n        this.nextWriteId_ = 1;\r\n        this.interceptServerDataCallback_ = null;\r\n        // A list of data pieces and paths to be set when this client disconnects.\r\n        this.onDisconnect_ = new SparseSnapshotTree();\r\n        /**\r\n         * TODO: This should be @private but it's used by test_access.js and internal.js\r\n         * @type {?PersistentConnection}\r\n         */\r\n        this.persistentConnection_ = null;\r\n        /** @type {!AuthTokenProvider} */\r\n        var authTokenProvider = new AuthTokenProvider(app);\r\n        this.stats_ = StatsManager.getCollection(repoInfo_);\r\n        if (forceRestClient || beingCrawled()) {\r\n            this.server_ = new ReadonlyRestClient(this.repoInfo_, this.onDataUpdate_.bind(this), authTokenProvider);\r\n            // Minor hack: Fire onConnect immediately, since there's no actual connection.\r\n            setTimeout(this.onConnectStatus_.bind(this, true), 0);\r\n        }\r\n        else {\r\n            var authOverride = app.options['databaseAuthVariableOverride'];\r\n            // Validate authOverride\r\n            if (typeof authOverride !== 'undefined' && authOverride !== null) {\r\n                if (typeof authOverride !== 'object') {\r\n                    throw new Error('Only objects are supported for option databaseAuthVariableOverride');\r\n                }\r\n                try {\r\n                    util.stringify(authOverride);\r\n                }\r\n                catch (e) {\r\n                    throw new Error('Invalid authOverride provided: ' + e);\r\n                }\r\n            }\r\n            this.persistentConnection_ = new PersistentConnection(this.repoInfo_, this.onDataUpdate_.bind(this), this.onConnectStatus_.bind(this), this.onServerInfoUpdate_.bind(this), authTokenProvider, authOverride);\r\n            this.server_ = this.persistentConnection_;\r\n        }\r\n        authTokenProvider.addTokenChangeListener(function (token) {\r\n            _this.server_.refreshAuthToken(token);\r\n        });\r\n        // In the case of multiple Repos for the same repoInfo (i.e. there are multiple Firebase.Contexts being used),\r\n        // we only want to create one StatsReporter.  As such, we'll report stats over the first Repo created.\r\n        this.statsReporter_ = StatsManager.getOrCreateReporter(repoInfo_, function () { return new StatsReporter(_this.stats_, _this.server_); });\r\n        this.transactions_init_();\r\n        // Used for .info.\r\n        this.infoData_ = new SnapshotHolder();\r\n        this.infoSyncTree_ = new SyncTree({\r\n            startListening: function (query, tag, currentHashFn, onComplete) {\r\n                var infoEvents = [];\r\n                var node = _this.infoData_.getNode(query.path);\r\n                // This is possibly a hack, but we have different semantics for .info endpoints. We don't raise null events\r\n                // on initial data...\r\n                if (!node.isEmpty()) {\r\n                    infoEvents = _this.infoSyncTree_.applyServerOverwrite(query.path, node);\r\n                    setTimeout(function () {\r\n                        onComplete('ok');\r\n                    }, 0);\r\n                }\r\n                return infoEvents;\r\n            },\r\n            stopListening: function () { }\r\n        });\r\n        this.updateInfo_('connected', false);\r\n        this.serverSyncTree_ = new SyncTree({\r\n            startListening: function (query, tag, currentHashFn, onComplete) {\r\n                _this.server_.listen(query, currentHashFn, tag, function (status, data) {\r\n                    var events = onComplete(status, data);\r\n                    _this.eventQueue_.raiseEventsForChangedPath(query.path, events);\r\n                });\r\n                // No synchronous events for network-backed sync trees\r\n                return [];\r\n            },\r\n            stopListening: function (query, tag) {\r\n                _this.server_.unlisten(query, tag);\r\n            }\r\n        });\r\n    }\r\n    /**\r\n     * @return {string}  The URL corresponding to the root of this Firebase.\r\n     */\r\n    Repo.prototype.toString = function () {\r\n        return ((this.repoInfo_.secure ? 'https://' : 'http://') + this.repoInfo_.host);\r\n    };\r\n    /**\r\n     * @return {!string} The namespace represented by the repo.\r\n     */\r\n    Repo.prototype.name = function () {\r\n        return this.repoInfo_.namespace;\r\n    };\r\n    /**\r\n     * @return {!number} The time in milliseconds, taking the server offset into account if we have one.\r\n     */\r\n    Repo.prototype.serverTime = function () {\r\n        var offsetNode = this.infoData_.getNode(new Path('.info/serverTimeOffset'));\r\n        var offset = offsetNode.val() || 0;\r\n        return new Date().getTime() + offset;\r\n    };\r\n    /**\r\n     * Generate ServerValues using some variables from the repo object.\r\n     * @return {!Object}\r\n     */\r\n    Repo.prototype.generateServerValues = function () {\r\n        return generateWithValues({\r\n            timestamp: this.serverTime()\r\n        });\r\n    };\r\n    /**\r\n     * Called by realtime when we get new messages from the server.\r\n     *\r\n     * @private\r\n     * @param {string} pathString\r\n     * @param {*} data\r\n     * @param {boolean} isMerge\r\n     * @param {?number} tag\r\n     */\r\n    Repo.prototype.onDataUpdate_ = function (pathString, data, isMerge, tag) {\r\n        // For testing.\r\n        this.dataUpdateCount++;\r\n        var path = new Path(pathString);\r\n        data = this.interceptServerDataCallback_\r\n            ? this.interceptServerDataCallback_(pathString, data)\r\n            : data;\r\n        var events = [];\r\n        if (tag) {\r\n            if (isMerge) {\r\n                var taggedChildren = util.map(data, function (raw) {\r\n                    return nodeFromJSON$1(raw);\r\n                });\r\n                events = this.serverSyncTree_.applyTaggedQueryMerge(path, taggedChildren, tag);\r\n            }\r\n            else {\r\n                var taggedSnap = nodeFromJSON$1(data);\r\n                events = this.serverSyncTree_.applyTaggedQueryOverwrite(path, taggedSnap, tag);\r\n            }\r\n        }\r\n        else if (isMerge) {\r\n            var changedChildren = util.map(data, function (raw) {\r\n                return nodeFromJSON$1(raw);\r\n            });\r\n            events = this.serverSyncTree_.applyServerMerge(path, changedChildren);\r\n        }\r\n        else {\r\n            var snap = nodeFromJSON$1(data);\r\n            events = this.serverSyncTree_.applyServerOverwrite(path, snap);\r\n        }\r\n        var affectedPath = path;\r\n        if (events.length > 0) {\r\n            // Since we have a listener outstanding for each transaction, receiving any events\r\n            // is a proxy for some change having occurred.\r\n            affectedPath = this.rerunTransactions_(path);\r\n        }\r\n        this.eventQueue_.raiseEventsForChangedPath(affectedPath, events);\r\n    };\r\n    /**\r\n     * TODO: This should be @private but it's used by test_access.js and internal.js\r\n     * @param {?function(!string, *):*} callback\r\n     * @private\r\n     */\r\n    Repo.prototype.interceptServerData_ = function (callback) {\r\n        this.interceptServerDataCallback_ = callback;\r\n    };\r\n    /**\r\n     * @param {!boolean} connectStatus\r\n     * @private\r\n     */\r\n    Repo.prototype.onConnectStatus_ = function (connectStatus) {\r\n        this.updateInfo_('connected', connectStatus);\r\n        if (connectStatus === false) {\r\n            this.runOnDisconnectEvents_();\r\n        }\r\n    };\r\n    /**\r\n     * @param {!Object} updates\r\n     * @private\r\n     */\r\n    Repo.prototype.onServerInfoUpdate_ = function (updates) {\r\n        var _this = this;\r\n        each(updates, function (value, key) {\r\n            _this.updateInfo_(key, value);\r\n        });\r\n    };\r\n    /**\r\n     *\r\n     * @param {!string} pathString\r\n     * @param {*} value\r\n     * @private\r\n     */\r\n    Repo.prototype.updateInfo_ = function (pathString, value) {\r\n        var path = new Path('/.info/' + pathString);\r\n        var newNode = nodeFromJSON$1(value);\r\n        this.infoData_.updateSnapshot(path, newNode);\r\n        var events = this.infoSyncTree_.applyServerOverwrite(path, newNode);\r\n        this.eventQueue_.raiseEventsForChangedPath(path, events);\r\n    };\r\n    /**\r\n     * @return {!number}\r\n     * @private\r\n     */\r\n    Repo.prototype.getNextWriteId_ = function () {\r\n        return this.nextWriteId_++;\r\n    };\r\n    /**\r\n     * @param {!Path} path\r\n     * @param {*} newVal\r\n     * @param {number|string|null} newPriority\r\n     * @param {?function(?Error, *=)} onComplete\r\n     */\r\n    Repo.prototype.setWithPriority = function (path, newVal, newPriority, onComplete) {\r\n        var _this = this;\r\n        this.log_('set', {\r\n            path: path.toString(),\r\n            value: newVal,\r\n            priority: newPriority\r\n        });\r\n        // TODO: Optimize this behavior to either (a) store flag to skip resolving where possible and / or\r\n        // (b) store unresolved paths on JSON parse\r\n        var serverValues = this.generateServerValues();\r\n        var newNodeUnresolved = nodeFromJSON$1(newVal, newPriority);\r\n        var newNode = resolveDeferredValueSnapshot(newNodeUnresolved, serverValues);\r\n        var writeId = this.getNextWriteId_();\r\n        var events = this.serverSyncTree_.applyUserOverwrite(path, newNode, writeId, true);\r\n        this.eventQueue_.queueEvents(events);\r\n        this.server_.put(path.toString(), newNodeUnresolved.val(/*export=*/ true), function (status, errorReason) {\r\n            var success = status === 'ok';\r\n            if (!success) {\r\n                warn('set at ' + path + ' failed: ' + status);\r\n            }\r\n            var clearEvents = _this.serverSyncTree_.ackUserWrite(writeId, !success);\r\n            _this.eventQueue_.raiseEventsForChangedPath(path, clearEvents);\r\n            _this.callOnCompleteCallback(onComplete, status, errorReason);\r\n        });\r\n        var affectedPath = this.abortTransactions_(path);\r\n        this.rerunTransactions_(affectedPath);\r\n        // We queued the events above, so just flush the queue here\r\n        this.eventQueue_.raiseEventsForChangedPath(affectedPath, []);\r\n    };\r\n    /**\r\n     * @param {!Path} path\r\n     * @param {!Object} childrenToMerge\r\n     * @param {?function(?Error, *=)} onComplete\r\n     */\r\n    Repo.prototype.update = function (path, childrenToMerge, onComplete) {\r\n        var _this = this;\r\n        this.log_('update', { path: path.toString(), value: childrenToMerge });\r\n        // Start with our existing data and merge each child into it.\r\n        var empty = true;\r\n        var serverValues = this.generateServerValues();\r\n        var changedChildren = {};\r\n        util.forEach(childrenToMerge, function (changedKey, changedValue) {\r\n            empty = false;\r\n            var newNodeUnresolved = nodeFromJSON$1(changedValue);\r\n            changedChildren[changedKey] = resolveDeferredValueSnapshot(newNodeUnresolved, serverValues);\r\n        });\r\n        if (!empty) {\r\n            var writeId_1 = this.getNextWriteId_();\r\n            var events = this.serverSyncTree_.applyUserMerge(path, changedChildren, writeId_1);\r\n            this.eventQueue_.queueEvents(events);\r\n            this.server_.merge(path.toString(), childrenToMerge, function (status, errorReason) {\r\n                var success = status === 'ok';\r\n                if (!success) {\r\n                    warn('update at ' + path + ' failed: ' + status);\r\n                }\r\n                var clearEvents = _this.serverSyncTree_.ackUserWrite(writeId_1, !success);\r\n                var affectedPath = clearEvents.length > 0 ? _this.rerunTransactions_(path) : path;\r\n                _this.eventQueue_.raiseEventsForChangedPath(affectedPath, clearEvents);\r\n                _this.callOnCompleteCallback(onComplete, status, errorReason);\r\n            });\r\n            util.forEach(childrenToMerge, function (changedPath) {\r\n                var affectedPath = _this.abortTransactions_(path.child(changedPath));\r\n                _this.rerunTransactions_(affectedPath);\r\n            });\r\n            // We queued the events above, so just flush the queue here\r\n            this.eventQueue_.raiseEventsForChangedPath(path, []);\r\n        }\r\n        else {\r\n            log(\"update() called with empty data.  Don't do anything.\");\r\n            this.callOnCompleteCallback(onComplete, 'ok');\r\n        }\r\n    };\r\n    /**\r\n     * Applies all of the changes stored up in the onDisconnect_ tree.\r\n     * @private\r\n     */\r\n    Repo.prototype.runOnDisconnectEvents_ = function () {\r\n        var _this = this;\r\n        this.log_('onDisconnectEvents');\r\n        var serverValues = this.generateServerValues();\r\n        var resolvedOnDisconnectTree = resolveDeferredValueTree(this.onDisconnect_, serverValues);\r\n        var events = [];\r\n        resolvedOnDisconnectTree.forEachTree(Path.Empty, function (path, snap) {\r\n            events = events.concat(_this.serverSyncTree_.applyServerOverwrite(path, snap));\r\n            var affectedPath = _this.abortTransactions_(path);\r\n            _this.rerunTransactions_(affectedPath);\r\n        });\r\n        this.onDisconnect_ = new SparseSnapshotTree();\r\n        this.eventQueue_.raiseEventsForChangedPath(Path.Empty, events);\r\n    };\r\n    /**\r\n     * @param {!Path} path\r\n     * @param {?function(?Error, *=)} onComplete\r\n     */\r\n    Repo.prototype.onDisconnectCancel = function (path, onComplete) {\r\n        var _this = this;\r\n        this.server_.onDisconnectCancel(path.toString(), function (status, errorReason) {\r\n            if (status === 'ok') {\r\n                _this.onDisconnect_.forget(path);\r\n            }\r\n            _this.callOnCompleteCallback(onComplete, status, errorReason);\r\n        });\r\n    };\r\n    /**\r\n     * @param {!Path} path\r\n     * @param {*} value\r\n     * @param {?function(?Error, *=)} onComplete\r\n     */\r\n    Repo.prototype.onDisconnectSet = function (path, value, onComplete) {\r\n        var _this = this;\r\n        var newNode = nodeFromJSON$1(value);\r\n        this.server_.onDisconnectPut(path.toString(), newNode.val(/*export=*/ true), function (status, errorReason) {\r\n            if (status === 'ok') {\r\n                _this.onDisconnect_.remember(path, newNode);\r\n            }\r\n            _this.callOnCompleteCallback(onComplete, status, errorReason);\r\n        });\r\n    };\r\n    /**\r\n     * @param {!Path} path\r\n     * @param {*} value\r\n     * @param {*} priority\r\n     * @param {?function(?Error, *=)} onComplete\r\n     */\r\n    Repo.prototype.onDisconnectSetWithPriority = function (path, value, priority, onComplete) {\r\n        var _this = this;\r\n        var newNode = nodeFromJSON$1(value, priority);\r\n        this.server_.onDisconnectPut(path.toString(), newNode.val(/*export=*/ true), function (status, errorReason) {\r\n            if (status === 'ok') {\r\n                _this.onDisconnect_.remember(path, newNode);\r\n            }\r\n            _this.callOnCompleteCallback(onComplete, status, errorReason);\r\n        });\r\n    };\r\n    /**\r\n     * @param {!Path} path\r\n     * @param {*} childrenToMerge\r\n     * @param {?function(?Error, *=)} onComplete\r\n     */\r\n    Repo.prototype.onDisconnectUpdate = function (path, childrenToMerge, onComplete) {\r\n        var _this = this;\r\n        if (util.isEmpty(childrenToMerge)) {\r\n            log(\"onDisconnect().update() called with empty data.  Don't do anything.\");\r\n            this.callOnCompleteCallback(onComplete, 'ok');\r\n            return;\r\n        }\r\n        this.server_.onDisconnectMerge(path.toString(), childrenToMerge, function (status, errorReason) {\r\n            if (status === 'ok') {\r\n                util.forEach(childrenToMerge, function (childName, childNode) {\r\n                    var newChildNode = nodeFromJSON$1(childNode);\r\n                    _this.onDisconnect_.remember(path.child(childName), newChildNode);\r\n                });\r\n            }\r\n            _this.callOnCompleteCallback(onComplete, status, errorReason);\r\n        });\r\n    };\r\n    /**\r\n     * @param {!Query} query\r\n     * @param {!EventRegistration} eventRegistration\r\n     */\r\n    Repo.prototype.addEventCallbackForQuery = function (query, eventRegistration) {\r\n        var events;\r\n        if (query.path.getFront() === '.info') {\r\n            events = this.infoSyncTree_.addEventRegistration(query, eventRegistration);\r\n        }\r\n        else {\r\n            events = this.serverSyncTree_.addEventRegistration(query, eventRegistration);\r\n        }\r\n        this.eventQueue_.raiseEventsAtPath(query.path, events);\r\n    };\r\n    /**\r\n     * @param {!Query} query\r\n     * @param {?EventRegistration} eventRegistration\r\n     */\r\n    Repo.prototype.removeEventCallbackForQuery = function (query, eventRegistration) {\r\n        // These are guaranteed not to raise events, since we're not passing in a cancelError. However, we can future-proof\r\n        // a little bit by handling the return values anyways.\r\n        var events;\r\n        if (query.path.getFront() === '.info') {\r\n            events = this.infoSyncTree_.removeEventRegistration(query, eventRegistration);\r\n        }\r\n        else {\r\n            events = this.serverSyncTree_.removeEventRegistration(query, eventRegistration);\r\n        }\r\n        this.eventQueue_.raiseEventsAtPath(query.path, events);\r\n    };\r\n    Repo.prototype.interrupt = function () {\r\n        if (this.persistentConnection_) {\r\n            this.persistentConnection_.interrupt(INTERRUPT_REASON);\r\n        }\r\n    };\r\n    Repo.prototype.resume = function () {\r\n        if (this.persistentConnection_) {\r\n            this.persistentConnection_.resume(INTERRUPT_REASON);\r\n        }\r\n    };\r\n    Repo.prototype.stats = function (showDelta) {\r\n        if (showDelta === void 0) { showDelta = false; }\r\n        if (typeof console === 'undefined')\r\n            return;\r\n        var stats;\r\n        if (showDelta) {\r\n            if (!this.statsListener_)\r\n                this.statsListener_ = new StatsListener(this.stats_);\r\n            stats = this.statsListener_.get();\r\n        }\r\n        else {\r\n            stats = this.stats_.get();\r\n        }\r\n        var longestName = Object.keys(stats).reduce(function (previousValue, currentValue) {\r\n            return Math.max(currentValue.length, previousValue);\r\n        }, 0);\r\n        util.forEach(stats, function (stat, value) {\r\n            // pad stat names to be the same length (plus 2 extra spaces).\r\n            for (var i = stat.length; i < longestName + 2; i++)\r\n                stat += ' ';\r\n            console.log(stat + value);\r\n        });\r\n    };\r\n    Repo.prototype.statsIncrementCounter = function (metric) {\r\n        this.stats_.incrementCounter(metric);\r\n        this.statsReporter_.includeStat(metric);\r\n    };\r\n    /**\r\n     * @param {...*} var_args\r\n     * @private\r\n     */\r\n    Repo.prototype.log_ = function () {\r\n        var var_args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            var_args[_i] = arguments[_i];\r\n        }\r\n        var prefix = '';\r\n        if (this.persistentConnection_) {\r\n            prefix = this.persistentConnection_.id + ':';\r\n        }\r\n        log.apply(void 0, [prefix].concat(var_args));\r\n    };\r\n    /**\r\n     * @param {?function(?Error, *=)} callback\r\n     * @param {!string} status\r\n     * @param {?string=} errorReason\r\n     */\r\n    Repo.prototype.callOnCompleteCallback = function (callback, status, errorReason) {\r\n        if (callback) {\r\n            exceptionGuard(function () {\r\n                if (status == 'ok') {\r\n                    callback(null);\r\n                }\r\n                else {\r\n                    var code = (status || 'error').toUpperCase();\r\n                    var message = code;\r\n                    if (errorReason)\r\n                        message += ': ' + errorReason;\r\n                    var error$$1 = new Error(message);\r\n                    error$$1.code = code;\r\n                    callback(error$$1);\r\n                }\r\n            });\r\n        }\r\n    };\r\n    Object.defineProperty(Repo.prototype, \"database\", {\r\n        get: function () {\r\n            return this.__database || (this.__database = new Database(this));\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return Repo;\r\n}());\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Filters nodes by range and uses an IndexFilter to track any changes after filtering the node\r\n *\r\n * @constructor\r\n * @implements {NodeFilter}\r\n */\r\nvar RangedFilter = /** @class */ (function () {\r\n    /**\r\n     * @param {!QueryParams} params\r\n     */\r\n    function RangedFilter(params) {\r\n        this.indexedFilter_ = new IndexedFilter(params.getIndex());\r\n        this.index_ = params.getIndex();\r\n        this.startPost_ = RangedFilter.getStartPost_(params);\r\n        this.endPost_ = RangedFilter.getEndPost_(params);\r\n    }\r\n    /**\r\n     * @return {!NamedNode}\r\n     */\r\n    RangedFilter.prototype.getStartPost = function () {\r\n        return this.startPost_;\r\n    };\r\n    /**\r\n     * @return {!NamedNode}\r\n     */\r\n    RangedFilter.prototype.getEndPost = function () {\r\n        return this.endPost_;\r\n    };\r\n    /**\r\n     * @param {!NamedNode} node\r\n     * @return {boolean}\r\n     */\r\n    RangedFilter.prototype.matches = function (node) {\r\n        return (this.index_.compare(this.getStartPost(), node) <= 0 &&\r\n            this.index_.compare(node, this.getEndPost()) <= 0);\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    RangedFilter.prototype.updateChild = function (snap, key, newChild, affectedPath, source, optChangeAccumulator) {\r\n        if (!this.matches(new NamedNode(key, newChild))) {\r\n            newChild = ChildrenNode.EMPTY_NODE;\r\n        }\r\n        return this.indexedFilter_.updateChild(snap, key, newChild, affectedPath, source, optChangeAccumulator);\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    RangedFilter.prototype.updateFullNode = function (oldSnap, newSnap, optChangeAccumulator) {\r\n        if (newSnap.isLeafNode()) {\r\n            // Make sure we have a children node with the correct index, not a leaf node;\r\n            newSnap = ChildrenNode.EMPTY_NODE;\r\n        }\r\n        var filtered = newSnap.withIndex(this.index_);\r\n        // Don't support priorities on queries\r\n        filtered = filtered.updatePriority(ChildrenNode.EMPTY_NODE);\r\n        var self = this;\r\n        newSnap.forEachChild(PRIORITY_INDEX, function (key, childNode) {\r\n            if (!self.matches(new NamedNode(key, childNode))) {\r\n                filtered = filtered.updateImmediateChild(key, ChildrenNode.EMPTY_NODE);\r\n            }\r\n        });\r\n        return this.indexedFilter_.updateFullNode(oldSnap, filtered, optChangeAccumulator);\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    RangedFilter.prototype.updatePriority = function (oldSnap, newPriority) {\r\n        // Don't support priorities on queries\r\n        return oldSnap;\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    RangedFilter.prototype.filtersNodes = function () {\r\n        return true;\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    RangedFilter.prototype.getIndexedFilter = function () {\r\n        return this.indexedFilter_;\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    RangedFilter.prototype.getIndex = function () {\r\n        return this.index_;\r\n    };\r\n    /**\r\n     * @param {!QueryParams} params\r\n     * @return {!NamedNode}\r\n     * @private\r\n     */\r\n    RangedFilter.getStartPost_ = function (params) {\r\n        if (params.hasStart()) {\r\n            var startName = params.getIndexStartName();\r\n            return params.getIndex().makePost(params.getIndexStartValue(), startName);\r\n        }\r\n        else {\r\n            return params.getIndex().minPost();\r\n        }\r\n    };\r\n    /**\r\n     * @param {!QueryParams} params\r\n     * @return {!NamedNode}\r\n     * @private\r\n     */\r\n    RangedFilter.getEndPost_ = function (params) {\r\n        if (params.hasEnd()) {\r\n            var endName = params.getIndexEndName();\r\n            return params.getIndex().makePost(params.getIndexEndValue(), endName);\r\n        }\r\n        else {\r\n            return params.getIndex().maxPost();\r\n        }\r\n    };\r\n    return RangedFilter;\r\n}());\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Applies a limit and a range to a node and uses RangedFilter to do the heavy lifting where possible\r\n *\r\n * @constructor\r\n * @implements {NodeFilter}\r\n */\r\nvar LimitedFilter = /** @class */ (function () {\r\n    /**\r\n     * @param {!QueryParams} params\r\n     */\r\n    function LimitedFilter(params) {\r\n        this.rangedFilter_ = new RangedFilter(params);\r\n        this.index_ = params.getIndex();\r\n        this.limit_ = params.getLimit();\r\n        this.reverse_ = !params.isViewFromLeft();\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    LimitedFilter.prototype.updateChild = function (snap, key, newChild, affectedPath, source, optChangeAccumulator) {\r\n        if (!this.rangedFilter_.matches(new NamedNode(key, newChild))) {\r\n            newChild = ChildrenNode.EMPTY_NODE;\r\n        }\r\n        if (snap.getImmediateChild(key).equals(newChild)) {\r\n            // No change\r\n            return snap;\r\n        }\r\n        else if (snap.numChildren() < this.limit_) {\r\n            return this.rangedFilter_\r\n                .getIndexedFilter()\r\n                .updateChild(snap, key, newChild, affectedPath, source, optChangeAccumulator);\r\n        }\r\n        else {\r\n            return this.fullLimitUpdateChild_(snap, key, newChild, source, optChangeAccumulator);\r\n        }\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    LimitedFilter.prototype.updateFullNode = function (oldSnap, newSnap, optChangeAccumulator) {\r\n        var filtered;\r\n        if (newSnap.isLeafNode() || newSnap.isEmpty()) {\r\n            // Make sure we have a children node with the correct index, not a leaf node;\r\n            filtered = ChildrenNode.EMPTY_NODE.withIndex(this.index_);\r\n        }\r\n        else {\r\n            if (this.limit_ * 2 < newSnap.numChildren() &&\r\n                newSnap.isIndexed(this.index_)) {\r\n                // Easier to build up a snapshot, since what we're given has more than twice the elements we want\r\n                filtered = ChildrenNode.EMPTY_NODE.withIndex(this.index_);\r\n                // anchor to the startPost, endPost, or last element as appropriate\r\n                var iterator = void 0;\r\n                if (this.reverse_) {\r\n                    iterator = newSnap.getReverseIteratorFrom(this.rangedFilter_.getEndPost(), this.index_);\r\n                }\r\n                else {\r\n                    iterator = newSnap.getIteratorFrom(this.rangedFilter_.getStartPost(), this.index_);\r\n                }\r\n                var count = 0;\r\n                while (iterator.hasNext() && count < this.limit_) {\r\n                    var next = iterator.getNext();\r\n                    var inRange = void 0;\r\n                    if (this.reverse_) {\r\n                        inRange =\r\n                            this.index_.compare(this.rangedFilter_.getStartPost(), next) <= 0;\r\n                    }\r\n                    else {\r\n                        inRange =\r\n                            this.index_.compare(next, this.rangedFilter_.getEndPost()) <= 0;\r\n                    }\r\n                    if (inRange) {\r\n                        filtered = filtered.updateImmediateChild(next.name, next.node);\r\n                        count++;\r\n                    }\r\n                    else {\r\n                        // if we have reached the end post, we cannot keep adding elemments\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n            else {\r\n                // The snap contains less than twice the limit. Faster to delete from the snap than build up a new one\r\n                filtered = newSnap.withIndex(this.index_);\r\n                // Don't support priorities on queries\r\n                filtered = filtered.updatePriority(ChildrenNode.EMPTY_NODE);\r\n                var startPost = void 0;\r\n                var endPost = void 0;\r\n                var cmp = void 0;\r\n                var iterator = void 0;\r\n                if (this.reverse_) {\r\n                    iterator = filtered.getReverseIterator(this.index_);\r\n                    startPost = this.rangedFilter_.getEndPost();\r\n                    endPost = this.rangedFilter_.getStartPost();\r\n                    var indexCompare_1 = this.index_.getCompare();\r\n                    cmp = function (a, b) { return indexCompare_1(b, a); };\r\n                }\r\n                else {\r\n                    iterator = filtered.getIterator(this.index_);\r\n                    startPost = this.rangedFilter_.getStartPost();\r\n                    endPost = this.rangedFilter_.getEndPost();\r\n                    cmp = this.index_.getCompare();\r\n                }\r\n                var count = 0;\r\n                var foundStartPost = false;\r\n                while (iterator.hasNext()) {\r\n                    var next = iterator.getNext();\r\n                    if (!foundStartPost && cmp(startPost, next) <= 0) {\r\n                        // start adding\r\n                        foundStartPost = true;\r\n                    }\r\n                    var inRange = foundStartPost && count < this.limit_ && cmp(next, endPost) <= 0;\r\n                    if (inRange) {\r\n                        count++;\r\n                    }\r\n                    else {\r\n                        filtered = filtered.updateImmediateChild(next.name, ChildrenNode.EMPTY_NODE);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return this.rangedFilter_\r\n            .getIndexedFilter()\r\n            .updateFullNode(oldSnap, filtered, optChangeAccumulator);\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    LimitedFilter.prototype.updatePriority = function (oldSnap, newPriority) {\r\n        // Don't support priorities on queries\r\n        return oldSnap;\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    LimitedFilter.prototype.filtersNodes = function () {\r\n        return true;\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    LimitedFilter.prototype.getIndexedFilter = function () {\r\n        return this.rangedFilter_.getIndexedFilter();\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    LimitedFilter.prototype.getIndex = function () {\r\n        return this.index_;\r\n    };\r\n    /**\r\n     * @param {!Node} snap\r\n     * @param {string} childKey\r\n     * @param {!Node} childSnap\r\n     * @param {!CompleteChildSource} source\r\n     * @param {?ChildChangeAccumulator} changeAccumulator\r\n     * @return {!Node}\r\n     * @private\r\n     */\r\n    LimitedFilter.prototype.fullLimitUpdateChild_ = function (snap, childKey, childSnap, source, changeAccumulator) {\r\n        // TODO: rename all cache stuff etc to general snap terminology\r\n        var cmp;\r\n        if (this.reverse_) {\r\n            var indexCmp_1 = this.index_.getCompare();\r\n            cmp = function (a, b) { return indexCmp_1(b, a); };\r\n        }\r\n        else {\r\n            cmp = this.index_.getCompare();\r\n        }\r\n        var oldEventCache = snap;\r\n        util.assert(oldEventCache.numChildren() == this.limit_, '');\r\n        var newChildNamedNode = new NamedNode(childKey, childSnap);\r\n        var windowBoundary = this.reverse_\r\n            ? oldEventCache.getFirstChild(this.index_)\r\n            : oldEventCache.getLastChild(this.index_);\r\n        var inRange = this.rangedFilter_.matches(newChildNamedNode);\r\n        if (oldEventCache.hasChild(childKey)) {\r\n            var oldChildSnap = oldEventCache.getImmediateChild(childKey);\r\n            var nextChild = source.getChildAfterChild(this.index_, windowBoundary, this.reverse_);\r\n            while (nextChild != null &&\r\n                (nextChild.name == childKey || oldEventCache.hasChild(nextChild.name))) {\r\n                // There is a weird edge case where a node is updated as part of a merge in the write tree, but hasn't\r\n                // been applied to the limited filter yet. Ignore this next child which will be updated later in\r\n                // the limited filter...\r\n                nextChild = source.getChildAfterChild(this.index_, nextChild, this.reverse_);\r\n            }\r\n            var compareNext = nextChild == null ? 1 : cmp(nextChild, newChildNamedNode);\r\n            var remainsInWindow = inRange && !childSnap.isEmpty() && compareNext >= 0;\r\n            if (remainsInWindow) {\r\n                if (changeAccumulator != null) {\r\n                    changeAccumulator.trackChildChange(Change.childChangedChange(childKey, childSnap, oldChildSnap));\r\n                }\r\n                return oldEventCache.updateImmediateChild(childKey, childSnap);\r\n            }\r\n            else {\r\n                if (changeAccumulator != null) {\r\n                    changeAccumulator.trackChildChange(Change.childRemovedChange(childKey, oldChildSnap));\r\n                }\r\n                var newEventCache = oldEventCache.updateImmediateChild(childKey, ChildrenNode.EMPTY_NODE);\r\n                var nextChildInRange = nextChild != null && this.rangedFilter_.matches(nextChild);\r\n                if (nextChildInRange) {\r\n                    if (changeAccumulator != null) {\r\n                        changeAccumulator.trackChildChange(Change.childAddedChange(nextChild.name, nextChild.node));\r\n                    }\r\n                    return newEventCache.updateImmediateChild(nextChild.name, nextChild.node);\r\n                }\r\n                else {\r\n                    return newEventCache;\r\n                }\r\n            }\r\n        }\r\n        else if (childSnap.isEmpty()) {\r\n            // we're deleting a node, but it was not in the window, so ignore it\r\n            return snap;\r\n        }\r\n        else if (inRange) {\r\n            if (cmp(windowBoundary, newChildNamedNode) >= 0) {\r\n                if (changeAccumulator != null) {\r\n                    changeAccumulator.trackChildChange(Change.childRemovedChange(windowBoundary.name, windowBoundary.node));\r\n                    changeAccumulator.trackChildChange(Change.childAddedChange(childKey, childSnap));\r\n                }\r\n                return oldEventCache\r\n                    .updateImmediateChild(childKey, childSnap)\r\n                    .updateImmediateChild(windowBoundary.name, ChildrenNode.EMPTY_NODE);\r\n            }\r\n            else {\r\n                return snap;\r\n            }\r\n        }\r\n        else {\r\n            return snap;\r\n        }\r\n    };\r\n    return LimitedFilter;\r\n}());\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * This class is an immutable-from-the-public-api struct containing a set of query parameters defining a\r\n * range to be returned for a particular location. It is assumed that validation of parameters is done at the\r\n * user-facing API level, so it is not done here.\r\n * @constructor\r\n */\r\nvar QueryParams = /** @class */ (function () {\r\n    function QueryParams() {\r\n        this.limitSet_ = false;\r\n        this.startSet_ = false;\r\n        this.startNameSet_ = false;\r\n        this.endSet_ = false;\r\n        this.endNameSet_ = false;\r\n        this.limit_ = 0;\r\n        this.viewFrom_ = '';\r\n        this.indexStartValue_ = null;\r\n        this.indexStartName_ = '';\r\n        this.indexEndValue_ = null;\r\n        this.indexEndName_ = '';\r\n        this.index_ = PRIORITY_INDEX;\r\n    }\r\n    /**\r\n     * @return {boolean}\r\n     */\r\n    QueryParams.prototype.hasStart = function () {\r\n        return this.startSet_;\r\n    };\r\n    /**\r\n     * @return {boolean} True if it would return from left.\r\n     */\r\n    QueryParams.prototype.isViewFromLeft = function () {\r\n        if (this.viewFrom_ === '') {\r\n            // limit(), rather than limitToFirst or limitToLast was called.\r\n            // This means that only one of startSet_ and endSet_ is true. Use them\r\n            // to calculate which side of the view to anchor to. If neither is set,\r\n            // anchor to the end.\r\n            return this.startSet_;\r\n        }\r\n        else {\r\n            return (this.viewFrom_ === QueryParams.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT);\r\n        }\r\n    };\r\n    /**\r\n     * Only valid to call if hasStart() returns true\r\n     * @return {*}\r\n     */\r\n    QueryParams.prototype.getIndexStartValue = function () {\r\n        util.assert(this.startSet_, 'Only valid if start has been set');\r\n        return this.indexStartValue_;\r\n    };\r\n    /**\r\n     * Only valid to call if hasStart() returns true.\r\n     * Returns the starting key name for the range defined by these query parameters\r\n     * @return {!string}\r\n     */\r\n    QueryParams.prototype.getIndexStartName = function () {\r\n        util.assert(this.startSet_, 'Only valid if start has been set');\r\n        if (this.startNameSet_) {\r\n            return this.indexStartName_;\r\n        }\r\n        else {\r\n            return MIN_NAME;\r\n        }\r\n    };\r\n    /**\r\n     * @return {boolean}\r\n     */\r\n    QueryParams.prototype.hasEnd = function () {\r\n        return this.endSet_;\r\n    };\r\n    /**\r\n     * Only valid to call if hasEnd() returns true.\r\n     * @return {*}\r\n     */\r\n    QueryParams.prototype.getIndexEndValue = function () {\r\n        util.assert(this.endSet_, 'Only valid if end has been set');\r\n        return this.indexEndValue_;\r\n    };\r\n    /**\r\n     * Only valid to call if hasEnd() returns true.\r\n     * Returns the end key name for the range defined by these query parameters\r\n     * @return {!string}\r\n     */\r\n    QueryParams.prototype.getIndexEndName = function () {\r\n        util.assert(this.endSet_, 'Only valid if end has been set');\r\n        if (this.endNameSet_) {\r\n            return this.indexEndName_;\r\n        }\r\n        else {\r\n            return MAX_NAME;\r\n        }\r\n    };\r\n    /**\r\n     * @return {boolean}\r\n     */\r\n    QueryParams.prototype.hasLimit = function () {\r\n        return this.limitSet_;\r\n    };\r\n    /**\r\n     * @return {boolean} True if a limit has been set and it has been explicitly anchored\r\n     */\r\n    QueryParams.prototype.hasAnchoredLimit = function () {\r\n        return this.limitSet_ && this.viewFrom_ !== '';\r\n    };\r\n    /**\r\n     * Only valid to call if hasLimit() returns true\r\n     * @return {!number}\r\n     */\r\n    QueryParams.prototype.getLimit = function () {\r\n        util.assert(this.limitSet_, 'Only valid if limit has been set');\r\n        return this.limit_;\r\n    };\r\n    /**\r\n     * @return {!Index}\r\n     */\r\n    QueryParams.prototype.getIndex = function () {\r\n        return this.index_;\r\n    };\r\n    /**\r\n     * @return {!QueryParams}\r\n     * @private\r\n     */\r\n    QueryParams.prototype.copy_ = function () {\r\n        var copy = new QueryParams();\r\n        copy.limitSet_ = this.limitSet_;\r\n        copy.limit_ = this.limit_;\r\n        copy.startSet_ = this.startSet_;\r\n        copy.indexStartValue_ = this.indexStartValue_;\r\n        copy.startNameSet_ = this.startNameSet_;\r\n        copy.indexStartName_ = this.indexStartName_;\r\n        copy.endSet_ = this.endSet_;\r\n        copy.indexEndValue_ = this.indexEndValue_;\r\n        copy.endNameSet_ = this.endNameSet_;\r\n        copy.indexEndName_ = this.indexEndName_;\r\n        copy.index_ = this.index_;\r\n        copy.viewFrom_ = this.viewFrom_;\r\n        return copy;\r\n    };\r\n    /**\r\n     * @param {!number} newLimit\r\n     * @return {!QueryParams}\r\n     */\r\n    QueryParams.prototype.limit = function (newLimit) {\r\n        var newParams = this.copy_();\r\n        newParams.limitSet_ = true;\r\n        newParams.limit_ = newLimit;\r\n        newParams.viewFrom_ = '';\r\n        return newParams;\r\n    };\r\n    /**\r\n     * @param {!number} newLimit\r\n     * @return {!QueryParams}\r\n     */\r\n    QueryParams.prototype.limitToFirst = function (newLimit) {\r\n        var newParams = this.copy_();\r\n        newParams.limitSet_ = true;\r\n        newParams.limit_ = newLimit;\r\n        newParams.viewFrom_ = QueryParams.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT;\r\n        return newParams;\r\n    };\r\n    /**\r\n     * @param {!number} newLimit\r\n     * @return {!QueryParams}\r\n     */\r\n    QueryParams.prototype.limitToLast = function (newLimit) {\r\n        var newParams = this.copy_();\r\n        newParams.limitSet_ = true;\r\n        newParams.limit_ = newLimit;\r\n        newParams.viewFrom_ = QueryParams.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_RIGHT;\r\n        return newParams;\r\n    };\r\n    /**\r\n     * @param {*} indexValue\r\n     * @param {?string=} key\r\n     * @return {!QueryParams}\r\n     */\r\n    QueryParams.prototype.startAt = function (indexValue, key) {\r\n        var newParams = this.copy_();\r\n        newParams.startSet_ = true;\r\n        if (!(indexValue !== undefined)) {\r\n            indexValue = null;\r\n        }\r\n        newParams.indexStartValue_ = indexValue;\r\n        if (key != null) {\r\n            newParams.startNameSet_ = true;\r\n            newParams.indexStartName_ = key;\r\n        }\r\n        else {\r\n            newParams.startNameSet_ = false;\r\n            newParams.indexStartName_ = '';\r\n        }\r\n        return newParams;\r\n    };\r\n    /**\r\n     * @param {*} indexValue\r\n     * @param {?string=} key\r\n     * @return {!QueryParams}\r\n     */\r\n    QueryParams.prototype.endAt = function (indexValue, key) {\r\n        var newParams = this.copy_();\r\n        newParams.endSet_ = true;\r\n        if (!(indexValue !== undefined)) {\r\n            indexValue = null;\r\n        }\r\n        newParams.indexEndValue_ = indexValue;\r\n        if (key !== undefined) {\r\n            newParams.endNameSet_ = true;\r\n            newParams.indexEndName_ = key;\r\n        }\r\n        else {\r\n            newParams.endNameSet_ = false;\r\n            newParams.indexEndName_ = '';\r\n        }\r\n        return newParams;\r\n    };\r\n    /**\r\n     * @param {!Index} index\r\n     * @return {!QueryParams}\r\n     */\r\n    QueryParams.prototype.orderBy = function (index) {\r\n        var newParams = this.copy_();\r\n        newParams.index_ = index;\r\n        return newParams;\r\n    };\r\n    /**\r\n     * @return {!Object}\r\n     */\r\n    QueryParams.prototype.getQueryObject = function () {\r\n        var WIRE_PROTOCOL_CONSTANTS = QueryParams.WIRE_PROTOCOL_CONSTANTS_;\r\n        var obj = {};\r\n        if (this.startSet_) {\r\n            obj[WIRE_PROTOCOL_CONSTANTS.INDEX_START_VALUE] = this.indexStartValue_;\r\n            if (this.startNameSet_) {\r\n                obj[WIRE_PROTOCOL_CONSTANTS.INDEX_START_NAME] = this.indexStartName_;\r\n            }\r\n        }\r\n        if (this.endSet_) {\r\n            obj[WIRE_PROTOCOL_CONSTANTS.INDEX_END_VALUE] = this.indexEndValue_;\r\n            if (this.endNameSet_) {\r\n                obj[WIRE_PROTOCOL_CONSTANTS.INDEX_END_NAME] = this.indexEndName_;\r\n            }\r\n        }\r\n        if (this.limitSet_) {\r\n            obj[WIRE_PROTOCOL_CONSTANTS.LIMIT] = this.limit_;\r\n            var viewFrom = this.viewFrom_;\r\n            if (viewFrom === '') {\r\n                if (this.isViewFromLeft()) {\r\n                    viewFrom = WIRE_PROTOCOL_CONSTANTS.VIEW_FROM_LEFT;\r\n                }\r\n                else {\r\n                    viewFrom = WIRE_PROTOCOL_CONSTANTS.VIEW_FROM_RIGHT;\r\n                }\r\n            }\r\n            obj[WIRE_PROTOCOL_CONSTANTS.VIEW_FROM] = viewFrom;\r\n        }\r\n        // For now, priority index is the default, so we only specify if it's some other index\r\n        if (this.index_ !== PRIORITY_INDEX) {\r\n            obj[WIRE_PROTOCOL_CONSTANTS.INDEX] = this.index_.toString();\r\n        }\r\n        return obj;\r\n    };\r\n    /**\r\n     * @return {boolean}\r\n     */\r\n    QueryParams.prototype.loadsAllData = function () {\r\n        return !(this.startSet_ || this.endSet_ || this.limitSet_);\r\n    };\r\n    /**\r\n     * @return {boolean}\r\n     */\r\n    QueryParams.prototype.isDefault = function () {\r\n        return this.loadsAllData() && this.index_ == PRIORITY_INDEX;\r\n    };\r\n    /**\r\n     * @return {!NodeFilter}\r\n     */\r\n    QueryParams.prototype.getNodeFilter = function () {\r\n        if (this.loadsAllData()) {\r\n            return new IndexedFilter(this.getIndex());\r\n        }\r\n        else if (this.hasLimit()) {\r\n            return new LimitedFilter(this);\r\n        }\r\n        else {\r\n            return new RangedFilter(this);\r\n        }\r\n    };\r\n    /**\r\n     * Returns a set of REST query string parameters representing this query.\r\n     *\r\n     * @return {!Object.<string,*>} query string parameters\r\n     */\r\n    QueryParams.prototype.toRestQueryStringParameters = function () {\r\n        var REST_CONSTANTS = QueryParams.REST_QUERY_CONSTANTS_;\r\n        var qs = {};\r\n        if (this.isDefault()) {\r\n            return qs;\r\n        }\r\n        var orderBy;\r\n        if (this.index_ === PRIORITY_INDEX) {\r\n            orderBy = REST_CONSTANTS.PRIORITY_INDEX;\r\n        }\r\n        else if (this.index_ === VALUE_INDEX) {\r\n            orderBy = REST_CONSTANTS.VALUE_INDEX;\r\n        }\r\n        else if (this.index_ === KEY_INDEX) {\r\n            orderBy = REST_CONSTANTS.KEY_INDEX;\r\n        }\r\n        else {\r\n            util.assert(this.index_ instanceof PathIndex, 'Unrecognized index type!');\r\n            orderBy = this.index_.toString();\r\n        }\r\n        qs[REST_CONSTANTS.ORDER_BY] = util.stringify(orderBy);\r\n        if (this.startSet_) {\r\n            qs[REST_CONSTANTS.START_AT] = util.stringify(this.indexStartValue_);\r\n            if (this.startNameSet_) {\r\n                qs[REST_CONSTANTS.START_AT] += ',' + util.stringify(this.indexStartName_);\r\n            }\r\n        }\r\n        if (this.endSet_) {\r\n            qs[REST_CONSTANTS.END_AT] = util.stringify(this.indexEndValue_);\r\n            if (this.endNameSet_) {\r\n                qs[REST_CONSTANTS.END_AT] += ',' + util.stringify(this.indexEndName_);\r\n            }\r\n        }\r\n        if (this.limitSet_) {\r\n            if (this.isViewFromLeft()) {\r\n                qs[REST_CONSTANTS.LIMIT_TO_FIRST] = this.limit_;\r\n            }\r\n            else {\r\n                qs[REST_CONSTANTS.LIMIT_TO_LAST] = this.limit_;\r\n            }\r\n        }\r\n        return qs;\r\n    };\r\n    /**\r\n     * Wire Protocol Constants\r\n     * @const\r\n     * @enum {string}\r\n     * @private\r\n     */\r\n    QueryParams.WIRE_PROTOCOL_CONSTANTS_ = {\r\n        INDEX_START_VALUE: 'sp',\r\n        INDEX_START_NAME: 'sn',\r\n        INDEX_END_VALUE: 'ep',\r\n        INDEX_END_NAME: 'en',\r\n        LIMIT: 'l',\r\n        VIEW_FROM: 'vf',\r\n        VIEW_FROM_LEFT: 'l',\r\n        VIEW_FROM_RIGHT: 'r',\r\n        INDEX: 'i'\r\n    };\r\n    /**\r\n     * REST Query Constants\r\n     * @const\r\n     * @enum {string}\r\n     * @private\r\n     */\r\n    QueryParams.REST_QUERY_CONSTANTS_ = {\r\n        ORDER_BY: 'orderBy',\r\n        PRIORITY_INDEX: '$priority',\r\n        VALUE_INDEX: '$value',\r\n        KEY_INDEX: '$key',\r\n        START_AT: 'startAt',\r\n        END_AT: 'endAt',\r\n        LIMIT_TO_FIRST: 'limitToFirst',\r\n        LIMIT_TO_LAST: 'limitToLast'\r\n    };\r\n    /**\r\n     * Default, empty query parameters\r\n     * @type {!QueryParams}\r\n     * @const\r\n     */\r\n    QueryParams.DEFAULT = new QueryParams();\r\n    return QueryParams;\r\n}());\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nvar Reference = /** @class */ (function (_super) {\r\n    tslib_1.__extends(Reference, _super);\r\n    /**\r\n     * Call options:\r\n     *   new Reference(Repo, Path) or\r\n     *   new Reference(url: string, string|RepoManager)\r\n     *\r\n     * Externally - this is the firebase.database.Reference type.\r\n     *\r\n     * @param {!Repo} repo\r\n     * @param {(!Path)} path\r\n     * @extends {Query}\r\n     */\r\n    function Reference(repo, path) {\r\n        var _this = this;\r\n        if (!(repo instanceof Repo)) {\r\n            throw new Error('new Reference() no longer supported - use app.database().');\r\n        }\r\n        // call Query's constructor, passing in the repo and path.\r\n        _this = _super.call(this, repo, path, QueryParams.DEFAULT, false) || this;\r\n        return _this;\r\n    }\r\n    /** @return {?string} */\r\n    Reference.prototype.getKey = function () {\r\n        util.validateArgCount('Reference.key', 0, 0, arguments.length);\r\n        if (this.path.isEmpty())\r\n            return null;\r\n        else\r\n            return this.path.getBack();\r\n    };\r\n    /**\r\n     * @param {!(string|Path)} pathString\r\n     * @return {!Reference}\r\n     */\r\n    Reference.prototype.child = function (pathString) {\r\n        util.validateArgCount('Reference.child', 1, 1, arguments.length);\r\n        if (typeof pathString === 'number') {\r\n            pathString = String(pathString);\r\n        }\r\n        else if (!(pathString instanceof Path)) {\r\n            if (this.path.getFront() === null)\r\n                validateRootPathString('Reference.child', 1, pathString, false);\r\n            else\r\n                validatePathString('Reference.child', 1, pathString, false);\r\n        }\r\n        return new Reference(this.repo, this.path.child(pathString));\r\n    };\r\n    /** @return {?Reference} */\r\n    Reference.prototype.getParent = function () {\r\n        util.validateArgCount('Reference.parent', 0, 0, arguments.length);\r\n        var parentPath = this.path.parent();\r\n        return parentPath === null ? null : new Reference(this.repo, parentPath);\r\n    };\r\n    /** @return {!Reference} */\r\n    Reference.prototype.getRoot = function () {\r\n        util.validateArgCount('Reference.root', 0, 0, arguments.length);\r\n        var ref = this;\r\n        while (ref.getParent() !== null) {\r\n            ref = ref.getParent();\r\n        }\r\n        return ref;\r\n    };\r\n    /** @return {!Database} */\r\n    Reference.prototype.databaseProp = function () {\r\n        return this.repo.database;\r\n    };\r\n    /**\r\n     * @param {*} newVal\r\n     * @param {function(?Error)=} onComplete\r\n     * @return {!Promise}\r\n     */\r\n    Reference.prototype.set = function (newVal, onComplete) {\r\n        util.validateArgCount('Reference.set', 1, 2, arguments.length);\r\n        validateWritablePath('Reference.set', this.path);\r\n        validateFirebaseDataArg('Reference.set', 1, newVal, this.path, false);\r\n        util.validateCallback('Reference.set', 2, onComplete, true);\r\n        var deferred = new util.Deferred();\r\n        this.repo.setWithPriority(this.path, newVal, \r\n        /*priority=*/ null, deferred.wrapCallback(onComplete));\r\n        return deferred.promise;\r\n    };\r\n    /**\r\n     * @param {!Object} objectToMerge\r\n     * @param {function(?Error)=} onComplete\r\n     * @return {!Promise}\r\n     */\r\n    Reference.prototype.update = function (objectToMerge, onComplete) {\r\n        util.validateArgCount('Reference.update', 1, 2, arguments.length);\r\n        validateWritablePath('Reference.update', this.path);\r\n        if (Array.isArray(objectToMerge)) {\r\n            var newObjectToMerge = {};\r\n            for (var i = 0; i < objectToMerge.length; ++i) {\r\n                newObjectToMerge['' + i] = objectToMerge[i];\r\n            }\r\n            objectToMerge = newObjectToMerge;\r\n            warn('Passing an Array to Firebase.update() is deprecated. ' +\r\n                'Use set() if you want to overwrite the existing data, or ' +\r\n                'an Object with integer keys if you really do want to ' +\r\n                'only update some of the children.');\r\n        }\r\n        validateFirebaseMergeDataArg('Reference.update', 1, objectToMerge, this.path, false);\r\n        util.validateCallback('Reference.update', 2, onComplete, true);\r\n        var deferred = new util.Deferred();\r\n        this.repo.update(this.path, objectToMerge, deferred.wrapCallback(onComplete));\r\n        return deferred.promise;\r\n    };\r\n    /**\r\n     * @param {*} newVal\r\n     * @param {string|number|null} newPriority\r\n     * @param {function(?Error)=} onComplete\r\n     * @return {!Promise}\r\n     */\r\n    Reference.prototype.setWithPriority = function (newVal, newPriority, onComplete) {\r\n        util.validateArgCount('Reference.setWithPriority', 2, 3, arguments.length);\r\n        validateWritablePath('Reference.setWithPriority', this.path);\r\n        validateFirebaseDataArg('Reference.setWithPriority', 1, newVal, this.path, false);\r\n        validatePriority('Reference.setWithPriority', 2, newPriority, false);\r\n        util.validateCallback('Reference.setWithPriority', 3, onComplete, true);\r\n        if (this.getKey() === '.length' || this.getKey() === '.keys')\r\n            throw 'Reference.setWithPriority failed: ' +\r\n                this.getKey() +\r\n                ' is a read-only object.';\r\n        var deferred = new util.Deferred();\r\n        this.repo.setWithPriority(this.path, newVal, newPriority, deferred.wrapCallback(onComplete));\r\n        return deferred.promise;\r\n    };\r\n    /**\r\n     * @param {function(?Error)=} onComplete\r\n     * @return {!Promise}\r\n     */\r\n    Reference.prototype.remove = function (onComplete) {\r\n        util.validateArgCount('Reference.remove', 0, 1, arguments.length);\r\n        validateWritablePath('Reference.remove', this.path);\r\n        util.validateCallback('Reference.remove', 1, onComplete, true);\r\n        return this.set(null, onComplete);\r\n    };\r\n    /**\r\n     * @param {function(*):*} transactionUpdate\r\n     * @param {(function(?Error, boolean, ?DataSnapshot))=} onComplete\r\n     * @param {boolean=} applyLocally\r\n     * @return {!Promise}\r\n     */\r\n    Reference.prototype.transaction = function (transactionUpdate, onComplete, applyLocally) {\r\n        util.validateArgCount('Reference.transaction', 1, 3, arguments.length);\r\n        validateWritablePath('Reference.transaction', this.path);\r\n        util.validateCallback('Reference.transaction', 1, transactionUpdate, false);\r\n        util.validateCallback('Reference.transaction', 2, onComplete, true);\r\n        // NOTE: applyLocally is an internal-only option for now.  We need to decide if we want to keep it and how\r\n        // to expose it.\r\n        validateBoolean('Reference.transaction', 3, applyLocally, true);\r\n        if (this.getKey() === '.length' || this.getKey() === '.keys')\r\n            throw 'Reference.transaction failed: ' +\r\n                this.getKey() +\r\n                ' is a read-only object.';\r\n        if (applyLocally === undefined)\r\n            applyLocally = true;\r\n        var deferred = new util.Deferred();\r\n        if (typeof onComplete === 'function') {\r\n            deferred.promise.catch(function () { });\r\n        }\r\n        var promiseComplete = function (error$$1, committed, snapshot) {\r\n            if (error$$1) {\r\n                deferred.reject(error$$1);\r\n            }\r\n            else {\r\n                deferred.resolve(new TransactionResult(committed, snapshot));\r\n            }\r\n            if (typeof onComplete === 'function') {\r\n                onComplete(error$$1, committed, snapshot);\r\n            }\r\n        };\r\n        this.repo.startTransaction(this.path, transactionUpdate, promiseComplete, applyLocally);\r\n        return deferred.promise;\r\n    };\r\n    /**\r\n     * @param {string|number|null} priority\r\n     * @param {function(?Error)=} onComplete\r\n     * @return {!Promise}\r\n     */\r\n    Reference.prototype.setPriority = function (priority, onComplete) {\r\n        util.validateArgCount('Reference.setPriority', 1, 2, arguments.length);\r\n        validateWritablePath('Reference.setPriority', this.path);\r\n        validatePriority('Reference.setPriority', 1, priority, false);\r\n        util.validateCallback('Reference.setPriority', 2, onComplete, true);\r\n        var deferred = new util.Deferred();\r\n        this.repo.setWithPriority(this.path.child('.priority'), priority, null, deferred.wrapCallback(onComplete));\r\n        return deferred.promise;\r\n    };\r\n    /**\r\n     * @param {*=} value\r\n     * @param {function(?Error)=} onComplete\r\n     * @return {!Reference}\r\n     */\r\n    Reference.prototype.push = function (value, onComplete) {\r\n        util.validateArgCount('Reference.push', 0, 2, arguments.length);\r\n        validateWritablePath('Reference.push', this.path);\r\n        validateFirebaseDataArg('Reference.push', 1, value, this.path, true);\r\n        util.validateCallback('Reference.push', 2, onComplete, true);\r\n        var now = this.repo.serverTime();\r\n        var name = nextPushId(now);\r\n        // push() returns a ThennableReference whose promise is fulfilled with a regular Reference.\r\n        // We use child() to create handles to two different references. The first is turned into a\r\n        // ThennableReference below by adding then() and catch() methods and is used as the\r\n        // return value of push(). The second remains a regular Reference and is used as the fulfilled\r\n        // value of the first ThennableReference.\r\n        var thennablePushRef = this.child(name);\r\n        var pushRef = this.child(name);\r\n        var promise;\r\n        if (value != null) {\r\n            promise = thennablePushRef.set(value, onComplete).then(function () { return pushRef; });\r\n        }\r\n        else {\r\n            promise = Promise.resolve(pushRef);\r\n        }\r\n        thennablePushRef.then = promise.then.bind(promise);\r\n        thennablePushRef.catch = promise.then.bind(promise, undefined);\r\n        if (typeof onComplete === 'function') {\r\n            promise.catch(function () { });\r\n        }\r\n        return thennablePushRef;\r\n    };\r\n    /**\r\n     * @return {!OnDisconnect}\r\n     */\r\n    Reference.prototype.onDisconnect = function () {\r\n        validateWritablePath('Reference.onDisconnect', this.path);\r\n        return new OnDisconnect(this.repo, this.path);\r\n    };\r\n    Object.defineProperty(Reference.prototype, \"database\", {\r\n        get: function () {\r\n            return this.databaseProp();\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Reference.prototype, \"key\", {\r\n        get: function () {\r\n            return this.getKey();\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Reference.prototype, \"parent\", {\r\n        get: function () {\r\n            return this.getParent();\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Reference.prototype, \"root\", {\r\n        get: function () {\r\n            return this.getRoot();\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return Reference;\r\n}(Query));\r\n/**\r\n * Define reference constructor in various modules\r\n *\r\n * We are doing this here to avoid several circular\r\n * dependency issues\r\n */\r\nQuery.__referenceConstructor = Reference;\r\nSyncPoint.__referenceConstructor = Reference;\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Node in a Tree.\r\n */\r\nvar TreeNode = /** @class */ (function () {\r\n    function TreeNode() {\r\n        // TODO: Consider making accessors that create children and value lazily or\r\n        // separate Internal / Leaf 'types'.\r\n        this.children = {};\r\n        this.childCount = 0;\r\n        this.value = null;\r\n    }\r\n    return TreeNode;\r\n}());\r\n/**\r\n * A light-weight tree, traversable by path.  Nodes can have both values and children.\r\n * Nodes are not enumerated (by forEachChild) unless they have a value or non-empty\r\n * children.\r\n */\r\nvar Tree = /** @class */ (function () {\r\n    /**\r\n     * @template T\r\n     * @param {string=} name_ Optional name of the node.\r\n     * @param {Tree=} parent_ Optional parent node.\r\n     * @param {TreeNode=} node_ Optional node to wrap.\r\n     */\r\n    function Tree(name_, parent_, node_) {\r\n        if (name_ === void 0) { name_ = ''; }\r\n        if (parent_ === void 0) { parent_ = null; }\r\n        if (node_ === void 0) { node_ = new TreeNode(); }\r\n        this.name_ = name_;\r\n        this.parent_ = parent_;\r\n        this.node_ = node_;\r\n    }\r\n    /**\r\n     * Returns a sub-Tree for the given path.\r\n     *\r\n     * @param {!(string|Path)} pathObj Path to look up.\r\n     * @return {!Tree.<T>} Tree for path.\r\n     */\r\n    Tree.prototype.subTree = function (pathObj) {\r\n        // TODO: Require pathObj to be Path?\r\n        var path = pathObj instanceof Path ? pathObj : new Path(pathObj);\r\n        var child = this, next;\r\n        while ((next = path.getFront()) !== null) {\r\n            var childNode = util.safeGet(child.node_.children, next) || new TreeNode();\r\n            child = new Tree(next, child, childNode);\r\n            path = path.popFront();\r\n        }\r\n        return child;\r\n    };\r\n    /**\r\n     * Returns the data associated with this tree node.\r\n     *\r\n     * @return {?T} The data or null if no data exists.\r\n     */\r\n    Tree.prototype.getValue = function () {\r\n        return this.node_.value;\r\n    };\r\n    /**\r\n     * Sets data to this tree node.\r\n     *\r\n     * @param {!T} value Value to set.\r\n     */\r\n    Tree.prototype.setValue = function (value) {\r\n        util.assert(typeof value !== 'undefined', 'Cannot set value to undefined');\r\n        this.node_.value = value;\r\n        this.updateParents_();\r\n    };\r\n    /**\r\n     * Clears the contents of the tree node (its value and all children).\r\n     */\r\n    Tree.prototype.clear = function () {\r\n        this.node_.value = null;\r\n        this.node_.children = {};\r\n        this.node_.childCount = 0;\r\n        this.updateParents_();\r\n    };\r\n    /**\r\n     * @return {boolean} Whether the tree has any children.\r\n     */\r\n    Tree.prototype.hasChildren = function () {\r\n        return this.node_.childCount > 0;\r\n    };\r\n    /**\r\n     * @return {boolean} Whether the tree is empty (no value or children).\r\n     */\r\n    Tree.prototype.isEmpty = function () {\r\n        return this.getValue() === null && !this.hasChildren();\r\n    };\r\n    /**\r\n     * Calls action for each child of this tree node.\r\n     *\r\n     * @param {function(!Tree.<T>)} action Action to be called for each child.\r\n     */\r\n    Tree.prototype.forEachChild = function (action) {\r\n        var _this = this;\r\n        util.forEach(this.node_.children, function (child, childTree) {\r\n            action(new Tree(child, _this, childTree));\r\n        });\r\n    };\r\n    /**\r\n     * Does a depth-first traversal of this node's descendants, calling action for each one.\r\n     *\r\n     * @param {function(!Tree.<T>)} action Action to be called for each child.\r\n     * @param {boolean=} includeSelf Whether to call action on this node as well. Defaults to\r\n     *   false.\r\n     * @param {boolean=} childrenFirst Whether to call action on children before calling it on\r\n     *   parent.\r\n     */\r\n    Tree.prototype.forEachDescendant = function (action, includeSelf, childrenFirst) {\r\n        if (includeSelf && !childrenFirst)\r\n            action(this);\r\n        this.forEachChild(function (child) {\r\n            child.forEachDescendant(action, /*includeSelf=*/ true, childrenFirst);\r\n        });\r\n        if (includeSelf && childrenFirst)\r\n            action(this);\r\n    };\r\n    /**\r\n     * Calls action on each ancestor node.\r\n     *\r\n     * @param {function(!Tree.<T>)} action Action to be called on each parent; return\r\n     *   true to abort.\r\n     * @param {boolean=} includeSelf Whether to call action on this node as well.\r\n     * @return {boolean} true if the action callback returned true.\r\n     */\r\n    Tree.prototype.forEachAncestor = function (action, includeSelf) {\r\n        var node = includeSelf ? this : this.parent();\r\n        while (node !== null) {\r\n            if (action(node)) {\r\n                return true;\r\n            }\r\n            node = node.parent();\r\n        }\r\n        return false;\r\n    };\r\n    /**\r\n     * Does a depth-first traversal of this node's descendants.  When a descendant with a value\r\n     * is found, action is called on it and traversal does not continue inside the node.\r\n     * Action is *not* called on this node.\r\n     *\r\n     * @param {function(!Tree.<T>)} action Action to be called for each child.\r\n     */\r\n    Tree.prototype.forEachImmediateDescendantWithValue = function (action) {\r\n        this.forEachChild(function (child) {\r\n            if (child.getValue() !== null)\r\n                action(child);\r\n            else\r\n                child.forEachImmediateDescendantWithValue(action);\r\n        });\r\n    };\r\n    /**\r\n     * @return {!Path} The path of this tree node, as a Path.\r\n     */\r\n    Tree.prototype.path = function () {\r\n        return new Path(this.parent_ === null\r\n            ? this.name_\r\n            : this.parent_.path() + '/' + this.name_);\r\n    };\r\n    /**\r\n     * @return {string} The name of the tree node.\r\n     */\r\n    Tree.prototype.name = function () {\r\n        return this.name_;\r\n    };\r\n    /**\r\n     * @return {?Tree} The parent tree node, or null if this is the root of the tree.\r\n     */\r\n    Tree.prototype.parent = function () {\r\n        return this.parent_;\r\n    };\r\n    /**\r\n     * Adds or removes this child from its parent based on whether it's empty or not.\r\n     *\r\n     * @private\r\n     */\r\n    Tree.prototype.updateParents_ = function () {\r\n        if (this.parent_ !== null)\r\n            this.parent_.updateChild_(this.name_, this);\r\n    };\r\n    /**\r\n     * Adds or removes the passed child to this tree node, depending on whether it's empty.\r\n     *\r\n     * @param {string} childName The name of the child to update.\r\n     * @param {!Tree.<T>} child The child to update.\r\n     * @private\r\n     */\r\n    Tree.prototype.updateChild_ = function (childName, child) {\r\n        var childEmpty = child.isEmpty();\r\n        var childExists = util.contains(this.node_.children, childName);\r\n        if (childEmpty && childExists) {\r\n            delete this.node_.children[childName];\r\n            this.node_.childCount--;\r\n            this.updateParents_();\r\n        }\r\n        else if (!childEmpty && !childExists) {\r\n            this.node_.children[childName] = child.node_;\r\n            this.node_.childCount++;\r\n            this.updateParents_();\r\n        }\r\n    };\r\n    return Tree;\r\n}());\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n// TODO: This is pretty messy.  Ideally, a lot of this would move into FirebaseData, or a transaction-specific\r\n// component used by FirebaseData, but it has ties to user callbacks (transaction update and onComplete) as well\r\n// as the realtime connection (to send transactions to the server).  So that all needs to be decoupled first.\r\n// For now it's part of Repo, but in its own file.\r\n/**\r\n * @enum {number}\r\n */\r\nvar TransactionStatus;\r\n(function (TransactionStatus) {\r\n    // We've run the transaction and updated transactionResultData_ with the result, but it isn't currently sent to the\r\n    // server. A transaction will go from RUN -> SENT -> RUN if it comes back from the server as rejected due to\r\n    // mismatched hash.\r\n    TransactionStatus[TransactionStatus[\"RUN\"] = 0] = \"RUN\";\r\n    // We've run the transaction and sent it to the server and it's currently outstanding (hasn't come back as accepted\r\n    // or rejected yet).\r\n    TransactionStatus[TransactionStatus[\"SENT\"] = 1] = \"SENT\";\r\n    // Temporary state used to mark completed transactions (whether successful or aborted).  The transaction will be\r\n    // removed when we get a chance to prune completed ones.\r\n    TransactionStatus[TransactionStatus[\"COMPLETED\"] = 2] = \"COMPLETED\";\r\n    // Used when an already-sent transaction needs to be aborted (e.g. due to a conflicting set() call that was made).\r\n    // If it comes back as unsuccessful, we'll abort it.\r\n    TransactionStatus[TransactionStatus[\"SENT_NEEDS_ABORT\"] = 3] = \"SENT_NEEDS_ABORT\";\r\n    // Temporary state used to mark transactions that need to be aborted.\r\n    TransactionStatus[TransactionStatus[\"NEEDS_ABORT\"] = 4] = \"NEEDS_ABORT\";\r\n})(TransactionStatus || (TransactionStatus = {}));\r\n/**\r\n * If a transaction does not succeed after 25 retries, we abort it.  Among other things this ensure that if there's\r\n * ever a bug causing a mismatch between client / server hashes for some data, we won't retry indefinitely.\r\n * @type {number}\r\n * @const\r\n * @private\r\n */\r\nRepo.MAX_TRANSACTION_RETRIES_ = 25;\r\n/**\r\n * Setup the transaction data structures\r\n * @private\r\n */\r\nRepo.prototype.transactions_init_ = function () {\r\n    /**\r\n     * Stores queues of outstanding transactions for Firebase locations.\r\n     *\r\n     * @type {!Tree.<Array.<!Transaction>>}\r\n     * @private\r\n     */\r\n    this.transactionQueueTree_ = new Tree();\r\n};\r\n/**\r\n * Creates a new transaction, adds it to the transactions we're tracking, and sends it to the server if possible.\r\n *\r\n * @param {!Path} path Path at which to do transaction.\r\n * @param {function(*):*} transactionUpdate Update callback.\r\n * @param {?function(?Error, boolean, ?DataSnapshot)} onComplete Completion callback.\r\n * @param {boolean} applyLocally Whether or not to make intermediate results visible\r\n */\r\nRepo.prototype.startTransaction = function (path, transactionUpdate, onComplete, applyLocally) {\r\n    this.log_('transaction on ' + path);\r\n    // Add a watch to make sure we get server updates.\r\n    var valueCallback = function () { };\r\n    var watchRef = new Reference(this, path);\r\n    watchRef.on('value', valueCallback);\r\n    var unwatcher = function () {\r\n        watchRef.off('value', valueCallback);\r\n    };\r\n    // Initialize transaction.\r\n    var transaction = {\r\n        path: path,\r\n        update: transactionUpdate,\r\n        onComplete: onComplete,\r\n        // One of TransactionStatus enums.\r\n        status: null,\r\n        // Used when combining transactions at different locations to figure out which one goes first.\r\n        order: LUIDGenerator(),\r\n        // Whether to raise local events for this transaction.\r\n        applyLocally: applyLocally,\r\n        // Count of how many times we've retried the transaction.\r\n        retryCount: 0,\r\n        // Function to call to clean up our .on() listener.\r\n        unwatcher: unwatcher,\r\n        // Stores why a transaction was aborted.\r\n        abortReason: null,\r\n        currentWriteId: null,\r\n        currentInputSnapshot: null,\r\n        currentOutputSnapshotRaw: null,\r\n        currentOutputSnapshotResolved: null\r\n    };\r\n    // Run transaction initially.\r\n    var currentState = this.getLatestState_(path);\r\n    transaction.currentInputSnapshot = currentState;\r\n    var newVal = transaction.update(currentState.val());\r\n    if (newVal === undefined) {\r\n        // Abort transaction.\r\n        transaction.unwatcher();\r\n        transaction.currentOutputSnapshotRaw = null;\r\n        transaction.currentOutputSnapshotResolved = null;\r\n        if (transaction.onComplete) {\r\n            // We just set the input snapshot, so this cast should be safe\r\n            var snapshot = new DataSnapshot(transaction.currentInputSnapshot, new Reference(this, transaction.path), PRIORITY_INDEX);\r\n            transaction.onComplete(null, false, snapshot);\r\n        }\r\n    }\r\n    else {\r\n        validateFirebaseData('transaction failed: Data returned ', newVal, transaction.path);\r\n        // Mark as run and add to our queue.\r\n        transaction.status = TransactionStatus.RUN;\r\n        var queueNode = this.transactionQueueTree_.subTree(path);\r\n        var nodeQueue = queueNode.getValue() || [];\r\n        nodeQueue.push(transaction);\r\n        queueNode.setValue(nodeQueue);\r\n        // Update visibleData and raise events\r\n        // Note: We intentionally raise events after updating all of our transaction state, since the user could\r\n        // start new transactions from the event callbacks.\r\n        var priorityForNode = void 0;\r\n        if (typeof newVal === 'object' &&\r\n            newVal !== null &&\r\n            util.contains(newVal, '.priority')) {\r\n            priorityForNode = util.safeGet(newVal, '.priority');\r\n            util.assert(isValidPriority(priorityForNode), 'Invalid priority returned by transaction. ' +\r\n                'Priority must be a valid string, finite number, server value, or null.');\r\n        }\r\n        else {\r\n            var currentNode = this.serverSyncTree_.calcCompleteEventCache(path) ||\r\n                ChildrenNode.EMPTY_NODE;\r\n            priorityForNode = currentNode.getPriority().val();\r\n        }\r\n        priorityForNode /** @type {null|number|string} */ = priorityForNode;\r\n        var serverValues = this.generateServerValues();\r\n        var newNodeUnresolved = nodeFromJSON$1(newVal, priorityForNode);\r\n        var newNode = resolveDeferredValueSnapshot(newNodeUnresolved, serverValues);\r\n        transaction.currentOutputSnapshotRaw = newNodeUnresolved;\r\n        transaction.currentOutputSnapshotResolved = newNode;\r\n        transaction.currentWriteId = this.getNextWriteId_();\r\n        var events = this.serverSyncTree_.applyUserOverwrite(path, newNode, transaction.currentWriteId, transaction.applyLocally);\r\n        this.eventQueue_.raiseEventsForChangedPath(path, events);\r\n        this.sendReadyTransactions_();\r\n    }\r\n};\r\n/**\r\n * @param {!Path} path\r\n * @param {Array.<number>=} excludeSets A specific set to exclude\r\n * @return {Node}\r\n * @private\r\n */\r\nRepo.prototype.getLatestState_ = function (path, excludeSets) {\r\n    return (this.serverSyncTree_.calcCompleteEventCache(path, excludeSets) ||\r\n        ChildrenNode.EMPTY_NODE);\r\n};\r\n/**\r\n * Sends any already-run transactions that aren't waiting for outstanding transactions to\r\n * complete.\r\n *\r\n * Externally it's called with no arguments, but it calls itself recursively with a particular\r\n * transactionQueueTree node to recurse through the tree.\r\n *\r\n * @param {Tree.<Array.<Transaction>>=} node  transactionQueueTree node to start at.\r\n * @private\r\n */\r\nRepo.prototype.sendReadyTransactions_ = function (node) {\r\n    var _this = this;\r\n    if (node === void 0) { node = this.transactionQueueTree_; }\r\n    // Before recursing, make sure any completed transactions are removed.\r\n    if (!node) {\r\n        this.pruneCompletedTransactionsBelowNode_(node);\r\n    }\r\n    if (node.getValue() !== null) {\r\n        var queue = this.buildTransactionQueue_(node);\r\n        util.assert(queue.length > 0, 'Sending zero length transaction queue');\r\n        var allRun = queue.every(function (transaction) { return transaction.status === TransactionStatus.RUN; });\r\n        // If they're all run (and not sent), we can send them.  Else, we must wait.\r\n        if (allRun) {\r\n            this.sendTransactionQueue_(node.path(), queue);\r\n        }\r\n    }\r\n    else if (node.hasChildren()) {\r\n        node.forEachChild(function (childNode) {\r\n            _this.sendReadyTransactions_(childNode);\r\n        });\r\n    }\r\n};\r\n/**\r\n * Given a list of run transactions, send them to the server and then handle the result (success or failure).\r\n *\r\n * @param {!Path} path The location of the queue.\r\n * @param {!Array.<Transaction>} queue Queue of transactions under the specified location.\r\n * @private\r\n */\r\nRepo.prototype.sendTransactionQueue_ = function (path, queue) {\r\n    var _this = this;\r\n    // Mark transactions as sent and increment retry count!\r\n    var setsToIgnore = queue.map(function (txn) {\r\n        return txn.currentWriteId;\r\n    });\r\n    var latestState = this.getLatestState_(path, setsToIgnore);\r\n    var snapToSend = latestState;\r\n    var latestHash = latestState.hash();\r\n    for (var i = 0; i < queue.length; i++) {\r\n        var txn = queue[i];\r\n        util.assert(txn.status === TransactionStatus.RUN, 'tryToSendTransactionQueue_: items in queue should all be run.');\r\n        txn.status = TransactionStatus.SENT;\r\n        txn.retryCount++;\r\n        var relativePath = Path.relativePath(path, txn.path);\r\n        // If we've gotten to this point, the output snapshot must be defined.\r\n        snapToSend = snapToSend.updateChild(relativePath /**@type {!Node} */, txn.currentOutputSnapshotRaw);\r\n    }\r\n    var dataToSend = snapToSend.val(true);\r\n    var pathToSend = path;\r\n    // Send the put.\r\n    this.server_.put(pathToSend.toString(), dataToSend, function (status) {\r\n        _this.log_('transaction put response', {\r\n            path: pathToSend.toString(),\r\n            status: status\r\n        });\r\n        var events = [];\r\n        if (status === 'ok') {\r\n            // Queue up the callbacks and fire them after cleaning up all of our transaction state, since\r\n            // the callback could trigger more transactions or sets.\r\n            var callbacks = [];\r\n            for (var i = 0; i < queue.length; i++) {\r\n                queue[i].status = TransactionStatus.COMPLETED;\r\n                events = events.concat(_this.serverSyncTree_.ackUserWrite(queue[i].currentWriteId));\r\n                if (queue[i].onComplete) {\r\n                    // We never unset the output snapshot, and given that this transaction is complete, it should be set\r\n                    var node = queue[i].currentOutputSnapshotResolved;\r\n                    var ref = new Reference(_this, queue[i].path);\r\n                    var snapshot = new DataSnapshot(node, ref, PRIORITY_INDEX);\r\n                    callbacks.push(queue[i].onComplete.bind(null, null, true, snapshot));\r\n                }\r\n                queue[i].unwatcher();\r\n            }\r\n            // Now remove the completed transactions.\r\n            _this.pruneCompletedTransactionsBelowNode_(_this.transactionQueueTree_.subTree(path));\r\n            // There may be pending transactions that we can now send.\r\n            _this.sendReadyTransactions_();\r\n            _this.eventQueue_.raiseEventsForChangedPath(path, events);\r\n            // Finally, trigger onComplete callbacks.\r\n            for (var i = 0; i < callbacks.length; i++) {\r\n                exceptionGuard(callbacks[i]);\r\n            }\r\n        }\r\n        else {\r\n            // transactions are no longer sent.  Update their status appropriately.\r\n            if (status === 'datastale') {\r\n                for (var i = 0; i < queue.length; i++) {\r\n                    if (queue[i].status === TransactionStatus.SENT_NEEDS_ABORT)\r\n                        queue[i].status = TransactionStatus.NEEDS_ABORT;\r\n                    else\r\n                        queue[i].status = TransactionStatus.RUN;\r\n                }\r\n            }\r\n            else {\r\n                warn('transaction at ' + pathToSend.toString() + ' failed: ' + status);\r\n                for (var i = 0; i < queue.length; i++) {\r\n                    queue[i].status = TransactionStatus.NEEDS_ABORT;\r\n                    queue[i].abortReason = status;\r\n                }\r\n            }\r\n            _this.rerunTransactions_(path);\r\n        }\r\n    }, latestHash);\r\n};\r\n/**\r\n * Finds all transactions dependent on the data at changedPath and reruns them.\r\n *\r\n * Should be called any time cached data changes.\r\n *\r\n * Return the highest path that was affected by rerunning transactions.  This is the path at which events need to\r\n * be raised for.\r\n *\r\n * @param {!Path} changedPath The path in mergedData that changed.\r\n * @return {!Path} The rootmost path that was affected by rerunning transactions.\r\n * @private\r\n */\r\nRepo.prototype.rerunTransactions_ = function (changedPath) {\r\n    var rootMostTransactionNode = this.getAncestorTransactionNode_(changedPath);\r\n    var path = rootMostTransactionNode.path();\r\n    var queue = this.buildTransactionQueue_(rootMostTransactionNode);\r\n    this.rerunTransactionQueue_(queue, path);\r\n    return path;\r\n};\r\n/**\r\n * Does all the work of rerunning transactions (as well as cleans up aborted transactions and whatnot).\r\n *\r\n * @param {Array.<Transaction>} queue The queue of transactions to run.\r\n * @param {!Path} path The path the queue is for.\r\n * @private\r\n */\r\nRepo.prototype.rerunTransactionQueue_ = function (queue, path) {\r\n    if (queue.length === 0) {\r\n        return; // Nothing to do!\r\n    }\r\n    // Queue up the callbacks and fire them after cleaning up all of our transaction state, since\r\n    // the callback could trigger more transactions or sets.\r\n    var callbacks = [];\r\n    var events = [];\r\n    // Ignore all of the sets we're going to re-run.\r\n    var txnsToRerun = queue.filter(function (q) {\r\n        return q.status === TransactionStatus.RUN;\r\n    });\r\n    var setsToIgnore = txnsToRerun.map(function (q) {\r\n        return q.currentWriteId;\r\n    });\r\n    for (var i = 0; i < queue.length; i++) {\r\n        var transaction = queue[i];\r\n        var relativePath = Path.relativePath(path, transaction.path);\r\n        var abortTransaction = false, abortReason = void 0;\r\n        util.assert(relativePath !== null, 'rerunTransactionsUnderNode_: relativePath should not be null.');\r\n        if (transaction.status === TransactionStatus.NEEDS_ABORT) {\r\n            abortTransaction = true;\r\n            abortReason = transaction.abortReason;\r\n            events = events.concat(this.serverSyncTree_.ackUserWrite(transaction.currentWriteId, true));\r\n        }\r\n        else if (transaction.status === TransactionStatus.RUN) {\r\n            if (transaction.retryCount >= Repo.MAX_TRANSACTION_RETRIES_) {\r\n                abortTransaction = true;\r\n                abortReason = 'maxretry';\r\n                events = events.concat(this.serverSyncTree_.ackUserWrite(transaction.currentWriteId, true));\r\n            }\r\n            else {\r\n                // This code reruns a transaction\r\n                var currentNode = this.getLatestState_(transaction.path, setsToIgnore);\r\n                transaction.currentInputSnapshot = currentNode;\r\n                var newData = queue[i].update(currentNode.val());\r\n                if (newData !== undefined) {\r\n                    validateFirebaseData('transaction failed: Data returned ', newData, transaction.path);\r\n                    var newDataNode = nodeFromJSON$1(newData);\r\n                    var hasExplicitPriority = typeof newData === 'object' &&\r\n                        newData != null &&\r\n                        util.contains(newData, '.priority');\r\n                    if (!hasExplicitPriority) {\r\n                        // Keep the old priority if there wasn't a priority explicitly specified.\r\n                        newDataNode = newDataNode.updatePriority(currentNode.getPriority());\r\n                    }\r\n                    var oldWriteId = transaction.currentWriteId;\r\n                    var serverValues = this.generateServerValues();\r\n                    var newNodeResolved = resolveDeferredValueSnapshot(newDataNode, serverValues);\r\n                    transaction.currentOutputSnapshotRaw = newDataNode;\r\n                    transaction.currentOutputSnapshotResolved = newNodeResolved;\r\n                    transaction.currentWriteId = this.getNextWriteId_();\r\n                    // Mutates setsToIgnore in place\r\n                    setsToIgnore.splice(setsToIgnore.indexOf(oldWriteId), 1);\r\n                    events = events.concat(this.serverSyncTree_.applyUserOverwrite(transaction.path, newNodeResolved, transaction.currentWriteId, transaction.applyLocally));\r\n                    events = events.concat(this.serverSyncTree_.ackUserWrite(oldWriteId, true));\r\n                }\r\n                else {\r\n                    abortTransaction = true;\r\n                    abortReason = 'nodata';\r\n                    events = events.concat(this.serverSyncTree_.ackUserWrite(transaction.currentWriteId, true));\r\n                }\r\n            }\r\n        }\r\n        this.eventQueue_.raiseEventsForChangedPath(path, events);\r\n        events = [];\r\n        if (abortTransaction) {\r\n            // Abort.\r\n            queue[i].status = TransactionStatus.COMPLETED;\r\n            // Removing a listener can trigger pruning which can muck with mergedData/visibleData (as it prunes data).\r\n            // So defer the unwatcher until we're done.\r\n            (function (unwatcher) {\r\n                setTimeout(unwatcher, Math.floor(0));\r\n            })(queue[i].unwatcher);\r\n            if (queue[i].onComplete) {\r\n                if (abortReason === 'nodata') {\r\n                    var ref = new Reference(this, queue[i].path);\r\n                    // We set this field immediately, so it's safe to cast to an actual snapshot\r\n                    var lastInput /** @type {!Node} */ = queue[i].currentInputSnapshot;\r\n                    var snapshot = new DataSnapshot(lastInput, ref, PRIORITY_INDEX);\r\n                    callbacks.push(queue[i].onComplete.bind(null, null, false, snapshot));\r\n                }\r\n                else {\r\n                    callbacks.push(queue[i].onComplete.bind(null, new Error(abortReason), false, null));\r\n                }\r\n            }\r\n        }\r\n    }\r\n    // Clean up completed transactions.\r\n    this.pruneCompletedTransactionsBelowNode_(this.transactionQueueTree_);\r\n    // Now fire callbacks, now that we're in a good, known state.\r\n    for (var i = 0; i < callbacks.length; i++) {\r\n        exceptionGuard(callbacks[i]);\r\n    }\r\n    // Try to send the transaction result to the server.\r\n    this.sendReadyTransactions_();\r\n};\r\n/**\r\n * Returns the rootmost ancestor node of the specified path that has a pending transaction on it, or just returns\r\n * the node for the given path if there are no pending transactions on any ancestor.\r\n *\r\n * @param {!Path} path The location to start at.\r\n * @return {!Tree.<Array.<!Transaction>>} The rootmost node with a transaction.\r\n * @private\r\n */\r\nRepo.prototype.getAncestorTransactionNode_ = function (path) {\r\n    var front;\r\n    // Start at the root and walk deeper into the tree towards path until we find a node with pending transactions.\r\n    var transactionNode = this.transactionQueueTree_;\r\n    while ((front = path.getFront()) !== null &&\r\n        transactionNode.getValue() === null) {\r\n        transactionNode = transactionNode.subTree(front);\r\n        path = path.popFront();\r\n    }\r\n    return transactionNode;\r\n};\r\n/**\r\n * Builds the queue of all transactions at or below the specified transactionNode.\r\n *\r\n * @param {!Tree.<Array.<Transaction>>} transactionNode\r\n * @return {Array.<Transaction>} The generated queue.\r\n * @private\r\n */\r\nRepo.prototype.buildTransactionQueue_ = function (transactionNode) {\r\n    // Walk any child transaction queues and aggregate them into a single queue.\r\n    var transactionQueue = [];\r\n    this.aggregateTransactionQueuesForNode_(transactionNode, transactionQueue);\r\n    // Sort them by the order the transactions were created.\r\n    transactionQueue.sort(function (a, b) {\r\n        return a.order - b.order;\r\n    });\r\n    return transactionQueue;\r\n};\r\n/**\r\n * @param {!Tree.<Array.<Transaction>>} node\r\n * @param {Array.<Transaction>} queue\r\n * @private\r\n */\r\nRepo.prototype.aggregateTransactionQueuesForNode_ = function (node, queue) {\r\n    var _this = this;\r\n    var nodeQueue = node.getValue();\r\n    if (nodeQueue !== null) {\r\n        for (var i = 0; i < nodeQueue.length; i++) {\r\n            queue.push(nodeQueue[i]);\r\n        }\r\n    }\r\n    node.forEachChild(function (child) {\r\n        _this.aggregateTransactionQueuesForNode_(child, queue);\r\n    });\r\n};\r\n/**\r\n * Remove COMPLETED transactions at or below this node in the transactionQueueTree_.\r\n *\r\n * @param {!Tree.<Array.<!Transaction>>} node\r\n * @private\r\n */\r\nRepo.prototype.pruneCompletedTransactionsBelowNode_ = function (node) {\r\n    var _this = this;\r\n    var queue = node.getValue();\r\n    if (queue) {\r\n        var to = 0;\r\n        for (var from = 0; from < queue.length; from++) {\r\n            if (queue[from].status !== TransactionStatus.COMPLETED) {\r\n                queue[to] = queue[from];\r\n                to++;\r\n            }\r\n        }\r\n        queue.length = to;\r\n        node.setValue(queue.length > 0 ? queue : null);\r\n    }\r\n    node.forEachChild(function (childNode) {\r\n        _this.pruneCompletedTransactionsBelowNode_(childNode);\r\n    });\r\n};\r\n/**\r\n * Aborts all transactions on ancestors or descendants of the specified path.  Called when doing a set() or update()\r\n * since we consider them incompatible with transactions.\r\n *\r\n * @param {!Path} path Path for which we want to abort related transactions.\r\n * @return {!Path}\r\n * @private\r\n */\r\nRepo.prototype.abortTransactions_ = function (path) {\r\n    var _this = this;\r\n    var affectedPath = this.getAncestorTransactionNode_(path).path();\r\n    var transactionNode = this.transactionQueueTree_.subTree(path);\r\n    transactionNode.forEachAncestor(function (node) {\r\n        _this.abortTransactionsOnNode_(node);\r\n    });\r\n    this.abortTransactionsOnNode_(transactionNode);\r\n    transactionNode.forEachDescendant(function (node) {\r\n        _this.abortTransactionsOnNode_(node);\r\n    });\r\n    return affectedPath;\r\n};\r\n/**\r\n * Abort transactions stored in this transaction queue node.\r\n *\r\n * @param {!Tree.<Array.<Transaction>>} node Node to abort transactions for.\r\n * @private\r\n */\r\nRepo.prototype.abortTransactionsOnNode_ = function (node) {\r\n    var queue = node.getValue();\r\n    if (queue !== null) {\r\n        // Queue up the callbacks and fire them after cleaning up all of our transaction state, since\r\n        // the callback could trigger more transactions or sets.\r\n        var callbacks = [];\r\n        // Go through queue.  Any already-sent transactions must be marked for abort, while the unsent ones\r\n        // can be immediately aborted and removed.\r\n        var events = [];\r\n        var lastSent = -1;\r\n        for (var i = 0; i < queue.length; i++) {\r\n            if (queue[i].status === TransactionStatus.SENT_NEEDS_ABORT) {\r\n                // Already marked.  No action needed.\r\n            }\r\n            else if (queue[i].status === TransactionStatus.SENT) {\r\n                util.assert(lastSent === i - 1, 'All SENT items should be at beginning of queue.');\r\n                lastSent = i;\r\n                // Mark transaction for abort when it comes back.\r\n                queue[i].status = TransactionStatus.SENT_NEEDS_ABORT;\r\n                queue[i].abortReason = 'set';\r\n            }\r\n            else {\r\n                util.assert(queue[i].status === TransactionStatus.RUN, 'Unexpected transaction status in abort');\r\n                // We can abort it immediately.\r\n                queue[i].unwatcher();\r\n                events = events.concat(this.serverSyncTree_.ackUserWrite(queue[i].currentWriteId, true));\r\n                if (queue[i].onComplete) {\r\n                    var snapshot = null;\r\n                    callbacks.push(queue[i].onComplete.bind(null, new Error('set'), false, snapshot));\r\n                }\r\n            }\r\n        }\r\n        if (lastSent === -1) {\r\n            // We're not waiting for any sent transactions.  We can clear the queue.\r\n            node.setValue(null);\r\n        }\r\n        else {\r\n            // Remove the transactions we aborted.\r\n            queue.length = lastSent + 1;\r\n        }\r\n        // Now fire the callbacks.\r\n        this.eventQueue_.raiseEventsForChangedPath(node.path(), events);\r\n        for (var i = 0; i < callbacks.length; i++) {\r\n            exceptionGuard(callbacks[i]);\r\n        }\r\n    }\r\n};\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/** @const {string} */\r\nvar DATABASE_URL_OPTION = 'databaseURL';\r\nvar _staticInstance;\r\n/**\r\n * Creates and caches Repo instances.\r\n */\r\nvar RepoManager = /** @class */ (function () {\r\n    function RepoManager() {\r\n        /**\r\n         * @private {!Object.<string, Object<string, !fb.core.Repo>>}\r\n         */\r\n        this.repos_ = {};\r\n        /**\r\n         * If true, new Repos will be created to use ReadonlyRestClient (for testing purposes).\r\n         * @private {boolean}\r\n         */\r\n        this.useRestClient_ = false;\r\n    }\r\n    RepoManager.getInstance = function () {\r\n        if (!_staticInstance) {\r\n            _staticInstance = new RepoManager();\r\n        }\r\n        return _staticInstance;\r\n    };\r\n    // TODO(koss): Remove these functions unless used in tests?\r\n    RepoManager.prototype.interrupt = function () {\r\n        for (var appName in this.repos_) {\r\n            for (var dbUrl in this.repos_[appName]) {\r\n                this.repos_[appName][dbUrl].interrupt();\r\n            }\r\n        }\r\n    };\r\n    RepoManager.prototype.resume = function () {\r\n        for (var appName in this.repos_) {\r\n            for (var dbUrl in this.repos_[appName]) {\r\n                this.repos_[appName][dbUrl].resume();\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * This function should only ever be called to CREATE a new database instance.\r\n     *\r\n     * @param {!FirebaseApp} app\r\n     * @return {!Database}\r\n     */\r\n    RepoManager.prototype.databaseFromApp = function (app, url) {\r\n        var dbUrl = url || app.options[DATABASE_URL_OPTION];\r\n        if (dbUrl === undefined) {\r\n            fatal(\"Can't determine Firebase Database URL.  Be sure to include \" +\r\n                DATABASE_URL_OPTION +\r\n                ' option when calling firebase.initializeApp().');\r\n        }\r\n        var parsedUrl = parseRepoInfo(dbUrl);\r\n        var repoInfo = parsedUrl.repoInfo;\r\n        validateUrl('Invalid Firebase Database URL', 1, parsedUrl);\r\n        if (!parsedUrl.path.isEmpty()) {\r\n            fatal('Database URL must point to the root of a Firebase Database ' +\r\n                '(not including a child path).');\r\n        }\r\n        var repo = this.createRepo(repoInfo, app);\r\n        return repo.database;\r\n    };\r\n    /**\r\n     * Remove the repo and make sure it is disconnected.\r\n     *\r\n     * @param {!Repo} repo\r\n     */\r\n    RepoManager.prototype.deleteRepo = function (repo) {\r\n        var appRepos = util.safeGet(this.repos_, repo.app.name);\r\n        // This should never happen...\r\n        if (!appRepos || util.safeGet(appRepos, repo.repoInfo_.toURLString()) !== repo) {\r\n            fatal(\"Database \" + repo.app.name + \"(\" + repo.repoInfo_ + \") has already been deleted.\");\r\n        }\r\n        repo.interrupt();\r\n        delete appRepos[repo.repoInfo_.toURLString()];\r\n    };\r\n    /**\r\n     * Ensures a repo doesn't already exist and then creates one using the\r\n     * provided app.\r\n     *\r\n     * @param {!RepoInfo} repoInfo The metadata about the Repo\r\n     * @param {!FirebaseApp} app\r\n     * @return {!Repo} The Repo object for the specified server / repoName.\r\n     */\r\n    RepoManager.prototype.createRepo = function (repoInfo, app) {\r\n        var appRepos = util.safeGet(this.repos_, app.name);\r\n        if (!appRepos) {\r\n            appRepos = {};\r\n            this.repos_[app.name] = appRepos;\r\n        }\r\n        var repo = util.safeGet(appRepos, repoInfo.toURLString());\r\n        if (repo) {\r\n            fatal('Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.');\r\n        }\r\n        repo = new Repo(repoInfo, this.useRestClient_, app);\r\n        appRepos[repoInfo.toURLString()] = repo;\r\n        return repo;\r\n    };\r\n    /**\r\n     * Forces us to use ReadonlyRestClient instead of PersistentConnection for new Repos.\r\n     * @param {boolean} forceRestClient\r\n     */\r\n    RepoManager.prototype.forceRestClient = function (forceRestClient) {\r\n        this.useRestClient_ = forceRestClient;\r\n    };\r\n    return RepoManager;\r\n}());\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Class representing a firebase database.\r\n * @implements {FirebaseService}\r\n */\r\nvar Database = /** @class */ (function () {\r\n    /**\r\n     * The constructor should not be called by users of our public API.\r\n     * @param {!Repo} repo_\r\n     */\r\n    function Database(repo_) {\r\n        this.repo_ = repo_;\r\n        if (!(repo_ instanceof Repo)) {\r\n            fatal(\"Don't call new Database() directly - please use firebase.database().\");\r\n        }\r\n        /** @type {Reference} */\r\n        this.root_ = new Reference(repo_, Path.Empty);\r\n        this.INTERNAL = new DatabaseInternals(this);\r\n    }\r\n    Object.defineProperty(Database.prototype, \"app\", {\r\n        get: function () {\r\n            return this.repo_.app;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Database.prototype.ref = function (path) {\r\n        this.checkDeleted_('ref');\r\n        util.validateArgCount('database.ref', 0, 1, arguments.length);\r\n        if (path instanceof Reference) {\r\n            return this.refFromURL(path.toString());\r\n        }\r\n        return path !== undefined ? this.root_.child(path) : this.root_;\r\n    };\r\n    /**\r\n     * Returns a reference to the root or the path specified in url.\r\n     * We throw a exception if the url is not in the same domain as the\r\n     * current repo.\r\n     * @param {string} url\r\n     * @return {!Reference} Firebase reference.\r\n     */\r\n    Database.prototype.refFromURL = function (url) {\r\n        /** @const {string} */\r\n        var apiName = 'database.refFromURL';\r\n        this.checkDeleted_(apiName);\r\n        util.validateArgCount(apiName, 1, 1, arguments.length);\r\n        var parsedURL = parseRepoInfo(url);\r\n        validateUrl(apiName, 1, parsedURL);\r\n        var repoInfo = parsedURL.repoInfo;\r\n        if (repoInfo.host !== this.repo_.repoInfo_.host) {\r\n            fatal(apiName +\r\n                ': Host name does not match the current database: ' +\r\n                '(found ' +\r\n                repoInfo.host +\r\n                ' but expected ' +\r\n                this.repo_.repoInfo_.host +\r\n                ')');\r\n        }\r\n        return this.ref(parsedURL.path.toString());\r\n    };\r\n    /**\r\n     * @param {string} apiName\r\n     */\r\n    Database.prototype.checkDeleted_ = function (apiName) {\r\n        if (this.repo_ === null) {\r\n            fatal('Cannot call ' + apiName + ' on a deleted database.');\r\n        }\r\n    };\r\n    // Make individual repo go offline.\r\n    Database.prototype.goOffline = function () {\r\n        util.validateArgCount('database.goOffline', 0, 0, arguments.length);\r\n        this.checkDeleted_('goOffline');\r\n        this.repo_.interrupt();\r\n    };\r\n    Database.prototype.goOnline = function () {\r\n        util.validateArgCount('database.goOnline', 0, 0, arguments.length);\r\n        this.checkDeleted_('goOnline');\r\n        this.repo_.resume();\r\n    };\r\n    Database.ServerValue = {\r\n        TIMESTAMP: {\r\n            '.sv': 'timestamp'\r\n        }\r\n    };\r\n    return Database;\r\n}());\r\nvar DatabaseInternals = /** @class */ (function () {\r\n    /** @param {!Database} database */\r\n    function DatabaseInternals(database) {\r\n        this.database = database;\r\n    }\r\n    /** @return {Promise<void>} */\r\n    DatabaseInternals.prototype.delete = function () {\r\n        return tslib_1.__awaiter(this, void 0, void 0, function () {\r\n            return tslib_1.__generator(this, function (_a) {\r\n                this.database.checkDeleted_('delete');\r\n                RepoManager.getInstance().deleteRepo(this.database.repo_);\r\n                this.database.repo_ = null;\r\n                this.database.root_ = null;\r\n                this.database.INTERNAL = null;\r\n                this.database = null;\r\n                return [2 /*return*/];\r\n            });\r\n        });\r\n    };\r\n    return DatabaseInternals;\r\n}());\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * INTERNAL methods for internal-use only (tests, etc.).\r\n *\r\n * Customers shouldn't use these or else should be aware that they could break at any time.\r\n *\r\n * @const\r\n */\r\nvar forceLongPolling = function () {\r\n    WebSocketConnection.forceDisallow();\r\n    BrowserPollConnection.forceAllow();\r\n};\r\nvar forceWebSockets = function () {\r\n    BrowserPollConnection.forceDisallow();\r\n};\r\n/* Used by App Manager */\r\nvar isWebSocketsAvailable = function () {\r\n    return WebSocketConnection['isAvailable']();\r\n};\r\nvar setSecurityDebugCallback = function (ref, callback) {\r\n    ref.repo.persistentConnection_.securityDebugCallback_ = callback;\r\n};\r\nvar stats = function (ref, showDelta) {\r\n    ref.repo.stats(showDelta);\r\n};\r\nvar statsIncrementCounter = function (ref, metric) {\r\n    ref.repo.statsIncrementCounter(metric);\r\n};\r\nvar dataUpdateCount = function (ref) {\r\n    return ref.repo.dataUpdateCount;\r\n};\r\nvar interceptServerData = function (ref, callback) {\r\n    return ref.repo.interceptServerData_(callback);\r\n};\n\nvar INTERNAL = /*#__PURE__*/Object.freeze({\n  forceLongPolling: forceLongPolling,\n  forceWebSockets: forceWebSockets,\n  isWebSocketsAvailable: isWebSocketsAvailable,\n  setSecurityDebugCallback: setSecurityDebugCallback,\n  stats: stats,\n  statsIncrementCounter: statsIncrementCounter,\n  dataUpdateCount: dataUpdateCount,\n  interceptServerData: interceptServerData\n});\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nvar DataConnection = PersistentConnection;\r\n/**\r\n * @param {!string} pathString\r\n * @param {function(*)} onComplete\r\n */\r\nPersistentConnection.prototype.simpleListen = function (pathString, onComplete) {\r\n    this.sendRequest('q', { p: pathString }, onComplete);\r\n};\r\n/**\r\n * @param {*} data\r\n * @param {function(*)} onEcho\r\n */\r\nPersistentConnection.prototype.echo = function (data, onEcho) {\r\n    this.sendRequest('echo', { d: data }, onEcho);\r\n};\r\n// RealTimeConnection properties that we use in tests.\r\nvar RealTimeConnection = Connection;\r\n/**\r\n * @param {function(): string} newHash\r\n * @return {function()}\r\n */\r\nvar hijackHash = function (newHash) {\r\n    var oldPut = PersistentConnection.prototype.put;\r\n    PersistentConnection.prototype.put = function (pathString, data, opt_onComplete, opt_hash) {\r\n        if (opt_hash !== undefined) {\r\n            opt_hash = newHash();\r\n        }\r\n        oldPut.call(this, pathString, data, opt_onComplete, opt_hash);\r\n    };\r\n    return function () {\r\n        PersistentConnection.prototype.put = oldPut;\r\n    };\r\n};\r\n/**\r\n * @type {function(new:RepoInfo, !string, boolean, !string, boolean): undefined}\r\n */\r\nvar ConnectionTarget = RepoInfo;\r\n/**\r\n * @param {!Query} query\r\n * @return {!string}\r\n */\r\nvar queryIdentifier = function (query) {\r\n    return query.queryIdentifier();\r\n};\r\n/**\r\n * @param {!Query} firebaseRef\r\n * @return {!Object}\r\n */\r\nvar listens = function (firebaseRef) {\r\n    return firebaseRef.repo.persistentConnection_.listens_;\r\n};\r\n/**\r\n * Forces the RepoManager to create Repos that use ReadonlyRestClient instead of PersistentConnection.\r\n *\r\n * @param {boolean} forceRestClient\r\n */\r\nvar forceRestClient = function (forceRestClient) {\r\n    RepoManager.getInstance().forceRestClient(forceRestClient);\r\n};\n\nvar TEST_ACCESS = /*#__PURE__*/Object.freeze({\n  DataConnection: DataConnection,\n  RealTimeConnection: RealTimeConnection,\n  hijackHash: hijackHash,\n  ConnectionTarget: ConnectionTarget,\n  queryIdentifier: queryIdentifier,\n  listens: listens,\n  forceRestClient: forceRestClient\n});\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nvar ServerValue = Database.ServerValue;\r\nfunction registerDatabase(instance) {\r\n    // Register the Database Service with the 'firebase' namespace.\r\n    var namespace = instance.INTERNAL.registerService('database', function (app, unused, url) { return RepoManager.getInstance().databaseFromApp(app, url); }, \r\n    // firebase.database namespace properties\r\n    {\r\n        Reference: Reference,\r\n        Query: Query,\r\n        Database: Database,\r\n        enableLogging: enableLogging,\r\n        INTERNAL: INTERNAL,\r\n        ServerValue: ServerValue,\r\n        TEST_ACCESS: TEST_ACCESS\r\n    }, null, true);\r\n    if (util.isNodeSdk()) {\r\n        module.exports = namespace;\r\n    }\r\n}\r\nregisterDatabase(firebase);\n\nexports.registerDatabase = registerDatabase;\nexports.Database = Database;\nexports.Query = Query;\nexports.Reference = Reference;\nexports.enableLogging = enableLogging;\nexports.ServerValue = ServerValue;\nexports.DataSnapshot = DataSnapshot;\nexports.OnDisconnect = OnDisconnect;\n\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(8)))\n\n/***/ }),\n/* 47 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"setLogLevel\", function() { return setLogLevel; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Logger\", function() { return Logger; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"LogLevel\", function() { return LogLevel; });\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * A container for all of the Logger instances\r\n */\r\nvar instances = [];\r\n/**\r\n * The JS SDK supports 5 log levels and also allows a user the ability to\r\n * silence the logs altogether.\r\n *\r\n * The order is a follows:\r\n * DEBUG < VERBOSE < INFO < WARN < ERROR\r\n *\r\n * All of the log types above the current log level will be captured (i.e. if\r\n * you set the log level to `INFO`, errors will still be logged, but `DEBUG` and\r\n * `VERBOSE` logs will not)\r\n */\r\nvar LogLevel;\r\n(function (LogLevel) {\r\n    LogLevel[LogLevel[\"DEBUG\"] = 0] = \"DEBUG\";\r\n    LogLevel[LogLevel[\"VERBOSE\"] = 1] = \"VERBOSE\";\r\n    LogLevel[LogLevel[\"INFO\"] = 2] = \"INFO\";\r\n    LogLevel[LogLevel[\"WARN\"] = 3] = \"WARN\";\r\n    LogLevel[LogLevel[\"ERROR\"] = 4] = \"ERROR\";\r\n    LogLevel[LogLevel[\"SILENT\"] = 5] = \"SILENT\";\r\n})(LogLevel || (LogLevel = {}));\r\n/**\r\n * The default log level\r\n */\r\nvar defaultLogLevel = LogLevel.INFO;\r\n/**\r\n * The default log handler will forward DEBUG, VERBOSE, INFO, WARN, and ERROR\r\n * messages on to their corresponding console counterparts (if the log method\r\n * is supported by the current log level)\r\n */\r\nvar defaultLogHandler = function (instance, logType) {\r\n    var args = [];\r\n    for (var _i = 2; _i < arguments.length; _i++) {\r\n        args[_i - 2] = arguments[_i];\r\n    }\r\n    if (logType < instance.logLevel)\r\n        return;\r\n    var now = new Date().toISOString();\r\n    switch (logType) {\r\n        /**\r\n         * By default, `console.debug` is not displayed in the developer console (in\r\n         * chrome). To avoid forcing users to have to opt-in to these logs twice\r\n         * (i.e. once for firebase, and once in the console), we are sending `DEBUG`\r\n         * logs to the `console.log` function.\r\n         */\r\n        case LogLevel.DEBUG:\r\n            console.log.apply(console, [\"[\" + now + \"]  \" + instance.name + \":\"].concat(args));\r\n            break;\r\n        case LogLevel.VERBOSE:\r\n            console.log.apply(console, [\"[\" + now + \"]  \" + instance.name + \":\"].concat(args));\r\n            break;\r\n        case LogLevel.INFO:\r\n            console.info.apply(console, [\"[\" + now + \"]  \" + instance.name + \":\"].concat(args));\r\n            break;\r\n        case LogLevel.WARN:\r\n            console.warn.apply(console, [\"[\" + now + \"]  \" + instance.name + \":\"].concat(args));\r\n            break;\r\n        case LogLevel.ERROR:\r\n            console.error.apply(console, [\"[\" + now + \"]  \" + instance.name + \":\"].concat(args));\r\n            break;\r\n        default:\r\n            throw new Error(\"Attempted to log a message with an invalid logType (value: \" + logType + \")\");\r\n    }\r\n};\r\nvar Logger = /** @class */ (function () {\r\n    /**\r\n     * Gives you an instance of a Logger to capture messages according to\r\n     * Firebase's logging scheme.\r\n     *\r\n     * @param name The name that the logs will be associated with\r\n     */\r\n    function Logger(name) {\r\n        this.name = name;\r\n        /**\r\n         * The log level of the given Logger instance.\r\n         */\r\n        this._logLevel = defaultLogLevel;\r\n        /**\r\n         * The log handler for the Logger instance.\r\n         */\r\n        this._logHandler = defaultLogHandler;\r\n        /**\r\n         * Capture the current instance for later use\r\n         */\r\n        instances.push(this);\r\n    }\r\n    Object.defineProperty(Logger.prototype, \"logLevel\", {\r\n        get: function () {\r\n            return this._logLevel;\r\n        },\r\n        set: function (val) {\r\n            if (!(val in LogLevel)) {\r\n                throw new TypeError('Invalid value assigned to `logLevel`');\r\n            }\r\n            this._logLevel = val;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Logger.prototype, \"logHandler\", {\r\n        get: function () {\r\n            return this._logHandler;\r\n        },\r\n        set: function (val) {\r\n            if (typeof val !== 'function') {\r\n                throw new TypeError('Value assigned to `logHandler` must be a function');\r\n            }\r\n            this._logHandler = val;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * The functions below are all based on the `console` interface\r\n     */\r\n    Logger.prototype.debug = function () {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        this._logHandler.apply(this, [this, LogLevel.DEBUG].concat(args));\r\n    };\r\n    Logger.prototype.log = function () {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        this._logHandler.apply(this, [this, LogLevel.VERBOSE].concat(args));\r\n    };\r\n    Logger.prototype.info = function () {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        this._logHandler.apply(this, [this, LogLevel.INFO].concat(args));\r\n    };\r\n    Logger.prototype.warn = function () {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        this._logHandler.apply(this, [this, LogLevel.WARN].concat(args));\r\n    };\r\n    Logger.prototype.error = function () {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        this._logHandler.apply(this, [this, LogLevel.ERROR].concat(args));\r\n    };\r\n    return Logger;\r\n}());\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nfunction setLogLevel(level) {\r\n    instances.forEach(function (inst) {\r\n        inst.logLevel = level;\r\n    });\r\n}\n\n\n\n\n/***/ }),\n/* 48 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = register;\n/* unused harmony export unregister */\n// In production, we register a service worker to serve assets from local cache.\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\n// cached resources are updated in the background.\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\n// This link also includes instructions on opting out of this behavior.\nvar isLocalhost=Boolean(window.location.hostname==='localhost'||// [::1] is the IPv6 localhost address.\nwindow.location.hostname==='[::1]'||// 127.0.0.1/8 is considered localhost for IPv4.\nwindow.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function register(){if(\"production\"==='production'&&'serviceWorker'in navigator){// The URL constructor is available in all browsers that support SW.\nvar publicUrl=new URL(\"/noteHerder\",window.location);if(publicUrl.origin!==window.location.origin){// Our service worker won't work if PUBLIC_URL is on a different origin\n// from what our page is served on. This might happen if a CDN is used to\n// serve assets; see https://github.com/facebookincubator/create-react-app/issues/2374\nreturn;}window.addEventListener('load',function(){var swUrl=\"/noteHerder\"+'/service-worker.js';if(isLocalhost){// This is running on localhost. Lets check if a service worker still exists or not.\ncheckValidServiceWorker(swUrl);// Add some additional logging to localhost, pointing developers to the\n// service worker/PWA documentation.\nnavigator.serviceWorker.ready.then(function(){console.log('This web app is being served cache-first by a service '+'worker. To learn more, visit https://goo.gl/SC7cgQ');});}else{// Is not local host. Just register service worker\nregisterValidSW(swUrl);}});}}function registerValidSW(swUrl){navigator.serviceWorker.register(swUrl).then(function(registration){registration.onupdatefound=function(){var installingWorker=registration.installing;installingWorker.onstatechange=function(){if(installingWorker.state==='installed'){if(navigator.serviceWorker.controller){// At this point, the old content will have been purged and\n// the fresh content will have been added to the cache.\n// It's the perfect time to display a \"New content is\n// available; please refresh.\" message in your web app.\nconsole.log('New content is available; please refresh.');}else{// At this point, everything has been precached.\n// It's the perfect time to display a\n// \"Content is cached for offline use.\" message.\nconsole.log('Content is cached for offline use.');}}};};}).catch(function(error){console.error('Error during service worker registration:',error);});}function checkValidServiceWorker(swUrl){// Check if the service worker can be found. If it can't reload the page.\nfetch(swUrl).then(function(response){// Ensure service worker exists, and that we really are getting a JS file.\nif(response.status===404||response.headers.get('content-type').indexOf('javascript')===-1){// No service worker found. Probably a different app. Reload the page.\nnavigator.serviceWorker.ready.then(function(registration){registration.unregister().then(function(){window.location.reload();});});}else{// Service worker found. Proceed as normal.\nregisterValidSW(swUrl);}}).catch(function(){console.log('No internet connection found. App is running in offline mode.');});}function unregister(){if('serviceWorker'in navigator){navigator.serviceWorker.ready.then(function(registration){registration.unregister();});}}\n\n/***/ })\n/******/ ]);\n\n\n// WEBPACK FOOTER //\n// static/js/main.f6d9a343.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/noteHerder/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 12);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap d09f4c6d6942c2c29e78","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react.production.min.js');\n} else {\n  module.exports = require('./cjs/react.development.js');\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/react/index.js\n// module id = 0\n// module chunks = 0","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || Function(\"return this\")() || (1,eval)(\"this\");\n} catch(e) {\n\t// This works if the window reference is available\n\tif(typeof window === \"object\")\n\t\tg = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// (webpack)/buildin/global.js\n// module id = 1\n// module chunks = 0","/*\nobject-assign\n(c) Sindre Sorhus\n@license MIT\n*/\n\n'use strict';\n/* eslint-disable no-unused-vars */\nvar getOwnPropertySymbols = Object.getOwnPropertySymbols;\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\nfunction toObject(val) {\n\tif (val === null || val === undefined) {\n\t\tthrow new TypeError('Object.assign cannot be called with null or undefined');\n\t}\n\n\treturn Object(val);\n}\n\nfunction shouldUseNative() {\n\ttry {\n\t\tif (!Object.assign) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Detect buggy property enumeration order in older V8 versions.\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=4118\n\t\tvar test1 = new String('abc');  // eslint-disable-line no-new-wrappers\n\t\ttest1[5] = 'de';\n\t\tif (Object.getOwnPropertyNames(test1)[0] === '5') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test2 = {};\n\t\tfor (var i = 0; i < 10; i++) {\n\t\t\ttest2['_' + String.fromCharCode(i)] = i;\n\t\t}\n\t\tvar order2 = Object.getOwnPropertyNames(test2).map(function (n) {\n\t\t\treturn test2[n];\n\t\t});\n\t\tif (order2.join('') !== '0123456789') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test3 = {};\n\t\t'abcdefghijklmnopqrst'.split('').forEach(function (letter) {\n\t\t\ttest3[letter] = letter;\n\t\t});\n\t\tif (Object.keys(Object.assign({}, test3)).join('') !==\n\t\t\t\t'abcdefghijklmnopqrst') {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t} catch (err) {\n\t\t// We don't expect any of the above to throw, but better to be safe.\n\t\treturn false;\n\t}\n}\n\nmodule.exports = shouldUseNative() ? Object.assign : function (target, source) {\n\tvar from;\n\tvar to = toObject(target);\n\tvar symbols;\n\n\tfor (var s = 1; s < arguments.length; s++) {\n\t\tfrom = Object(arguments[s]);\n\n\t\tfor (var key in from) {\n\t\t\tif (hasOwnProperty.call(from, key)) {\n\t\t\t\tto[key] = from[key];\n\t\t\t}\n\t\t}\n\n\t\tif (getOwnPropertySymbols) {\n\t\t\tsymbols = getOwnPropertySymbols(from);\n\t\t\tfor (var i = 0; i < symbols.length; i++) {\n\t\t\t\tif (propIsEnumerable.call(from, symbols[i])) {\n\t\t\t\t\tto[symbols[i]] = from[symbols[i]];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn to;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/object-assign/index.js\n// module id = 2\n// module chunks = 0","'use strict';\n\nvar asap = require('asap/raw');\n\nfunction noop() {}\n\n// States:\n//\n// 0 - pending\n// 1 - fulfilled with _value\n// 2 - rejected with _value\n// 3 - adopted the state of another promise, _value\n//\n// once the state is no longer pending (0) it is immutable\n\n// All `_` prefixed properties will be reduced to `_{random number}`\n// at build time to obfuscate them and discourage their use.\n// We don't use symbols or Object.defineProperty to fully hide them\n// because the performance isn't good enough.\n\n\n// to avoid using try/catch inside critical functions, we\n// extract them to here.\nvar LAST_ERROR = null;\nvar IS_ERROR = {};\nfunction getThen(obj) {\n  try {\n    return obj.then;\n  } catch (ex) {\n    LAST_ERROR = ex;\n    return IS_ERROR;\n  }\n}\n\nfunction tryCallOne(fn, a) {\n  try {\n    return fn(a);\n  } catch (ex) {\n    LAST_ERROR = ex;\n    return IS_ERROR;\n  }\n}\nfunction tryCallTwo(fn, a, b) {\n  try {\n    fn(a, b);\n  } catch (ex) {\n    LAST_ERROR = ex;\n    return IS_ERROR;\n  }\n}\n\nmodule.exports = Promise;\n\nfunction Promise(fn) {\n  if (typeof this !== 'object') {\n    throw new TypeError('Promises must be constructed via new');\n  }\n  if (typeof fn !== 'function') {\n    throw new TypeError('Promise constructor\\'s argument is not a function');\n  }\n  this._75 = 0;\n  this._83 = 0;\n  this._18 = null;\n  this._38 = null;\n  if (fn === noop) return;\n  doResolve(fn, this);\n}\nPromise._47 = null;\nPromise._71 = null;\nPromise._44 = noop;\n\nPromise.prototype.then = function(onFulfilled, onRejected) {\n  if (this.constructor !== Promise) {\n    return safeThen(this, onFulfilled, onRejected);\n  }\n  var res = new Promise(noop);\n  handle(this, new Handler(onFulfilled, onRejected, res));\n  return res;\n};\n\nfunction safeThen(self, onFulfilled, onRejected) {\n  return new self.constructor(function (resolve, reject) {\n    var res = new Promise(noop);\n    res.then(resolve, reject);\n    handle(self, new Handler(onFulfilled, onRejected, res));\n  });\n}\nfunction handle(self, deferred) {\n  while (self._83 === 3) {\n    self = self._18;\n  }\n  if (Promise._47) {\n    Promise._47(self);\n  }\n  if (self._83 === 0) {\n    if (self._75 === 0) {\n      self._75 = 1;\n      self._38 = deferred;\n      return;\n    }\n    if (self._75 === 1) {\n      self._75 = 2;\n      self._38 = [self._38, deferred];\n      return;\n    }\n    self._38.push(deferred);\n    return;\n  }\n  handleResolved(self, deferred);\n}\n\nfunction handleResolved(self, deferred) {\n  asap(function() {\n    var cb = self._83 === 1 ? deferred.onFulfilled : deferred.onRejected;\n    if (cb === null) {\n      if (self._83 === 1) {\n        resolve(deferred.promise, self._18);\n      } else {\n        reject(deferred.promise, self._18);\n      }\n      return;\n    }\n    var ret = tryCallOne(cb, self._18);\n    if (ret === IS_ERROR) {\n      reject(deferred.promise, LAST_ERROR);\n    } else {\n      resolve(deferred.promise, ret);\n    }\n  });\n}\nfunction resolve(self, newValue) {\n  // Promise Resolution Procedure: https://github.com/promises-aplus/promises-spec#the-promise-resolution-procedure\n  if (newValue === self) {\n    return reject(\n      self,\n      new TypeError('A promise cannot be resolved with itself.')\n    );\n  }\n  if (\n    newValue &&\n    (typeof newValue === 'object' || typeof newValue === 'function')\n  ) {\n    var then = getThen(newValue);\n    if (then === IS_ERROR) {\n      return reject(self, LAST_ERROR);\n    }\n    if (\n      then === self.then &&\n      newValue instanceof Promise\n    ) {\n      self._83 = 3;\n      self._18 = newValue;\n      finale(self);\n      return;\n    } else if (typeof then === 'function') {\n      doResolve(then.bind(newValue), self);\n      return;\n    }\n  }\n  self._83 = 1;\n  self._18 = newValue;\n  finale(self);\n}\n\nfunction reject(self, newValue) {\n  self._83 = 2;\n  self._18 = newValue;\n  if (Promise._71) {\n    Promise._71(self, newValue);\n  }\n  finale(self);\n}\nfunction finale(self) {\n  if (self._75 === 1) {\n    handle(self, self._38);\n    self._38 = null;\n  }\n  if (self._75 === 2) {\n    for (var i = 0; i < self._38.length; i++) {\n      handle(self, self._38[i]);\n    }\n    self._38 = null;\n  }\n}\n\nfunction Handler(onFulfilled, onRejected, promise){\n  this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;\n  this.onRejected = typeof onRejected === 'function' ? onRejected : null;\n  this.promise = promise;\n}\n\n/**\n * Take a potentially misbehaving resolver function and make sure\n * onFulfilled and onRejected are only called once.\n *\n * Makes no guarantees about asynchrony.\n */\nfunction doResolve(fn, promise) {\n  var done = false;\n  var res = tryCallTwo(fn, function (value) {\n    if (done) return;\n    done = true;\n    resolve(promise, value);\n  }, function (reason) {\n    if (done) return;\n    done = true;\n    reject(promise, reason);\n  });\n  if (!done && res === IS_ERROR) {\n    done = true;\n    reject(promise, LAST_ERROR);\n  }\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/react-scripts/node_modules/promise/lib/core.js\n// module id = 3\n// module chunks = 0","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\n\n'use strict';\n\n/**\n * Use invariant() to assert state which your program assumes to be true.\n *\n * Provide sprintf-style format (only %s is supported) and arguments\n * to provide information about what broke and what you were\n * expecting.\n *\n * The invariant message will be stripped in production, but the invariant\n * will remain to ensure logic does not differ in production.\n */\n\nvar validateFormat = function validateFormat(format) {};\n\nif (process.env.NODE_ENV !== 'production') {\n  validateFormat = function validateFormat(format) {\n    if (format === undefined) {\n      throw new Error('invariant requires an error message argument');\n    }\n  };\n}\n\nfunction invariant(condition, format, a, b, c, d, e, f) {\n  validateFormat(format);\n\n  if (!condition) {\n    var error;\n    if (format === undefined) {\n      error = new Error('Minified exception occurred; use the non-minified dev environment ' + 'for the full error message and additional helpful warnings.');\n    } else {\n      var args = [a, b, c, d, e, f];\n      var argIndex = 0;\n      error = new Error(format.replace(/%s/g, function () {\n        return args[argIndex++];\n      }));\n      error.name = 'Invariant Violation';\n    }\n\n    error.framesToPop = 1; // we don't care about invariant's own frame\n    throw error;\n  }\n}\n\nmodule.exports = invariant;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/fbjs/lib/invariant.js\n// module id = 4\n// module chunks = 0","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\n\n'use strict';\n\nvar emptyObject = {};\n\nif (process.env.NODE_ENV !== 'production') {\n  Object.freeze(emptyObject);\n}\n\nmodule.exports = emptyObject;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/fbjs/lib/emptyObject.js\n// module id = 5\n// module chunks = 0","\"use strict\";\n\n/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * \n */\n\nfunction makeEmptyFunction(arg) {\n  return function () {\n    return arg;\n  };\n}\n\n/**\n * This function accepts and discards inputs; it has no side effects. This is\n * primarily useful idiomatically for overridable function endpoints which\n * always need to be callable, since JS lacks a null-call idiom ala Cocoa.\n */\nvar emptyFunction = function emptyFunction() {};\n\nemptyFunction.thatReturns = makeEmptyFunction;\nemptyFunction.thatReturnsFalse = makeEmptyFunction(false);\nemptyFunction.thatReturnsTrue = makeEmptyFunction(true);\nemptyFunction.thatReturnsNull = makeEmptyFunction(null);\nemptyFunction.thatReturnsThis = function () {\n  return this;\n};\nemptyFunction.thatReturnsArgument = function (arg) {\n  return arg;\n};\n\nmodule.exports = emptyFunction;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/fbjs/lib/emptyFunction.js\n// module id = 6\n// module chunks = 0","/**\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nrequire('@firebase/polyfill');\nmodule.exports = require('@firebase/app').default;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/firebase/app/index.js\n// module id = 7\n// module chunks = 0","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/process/browser.js\n// module id = 8\n// module chunks = 0","import { createSubscribe, deepCopy, deepExtend, ErrorFactory, patchProperty } from '@firebase/util';\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nvar contains = function (obj, key) {\r\n    return Object.prototype.hasOwnProperty.call(obj, key);\r\n};\r\nvar DEFAULT_ENTRY_NAME = '[DEFAULT]';\r\n// An array to capture listeners before the true auth functions\r\n// exist\r\nvar tokenListeners = [];\r\n/**\r\n * Global context object for a collection of services using\r\n * a shared authentication state.\r\n */\r\nvar FirebaseAppImpl = /** @class */ (function () {\r\n    function FirebaseAppImpl(options, config, firebase_) {\r\n        this.firebase_ = firebase_;\r\n        this.isDeleted_ = false;\r\n        this.services_ = {};\r\n        this.name_ = config.name;\r\n        this._automaticDataCollectionEnabled =\r\n            config.automaticDataCollectionEnabled || false;\r\n        this.options_ = deepCopy(options);\r\n        this.INTERNAL = {\r\n            getUid: function () { return null; },\r\n            getToken: function () { return Promise.resolve(null); },\r\n            addAuthTokenListener: function (callback) {\r\n                tokenListeners.push(callback);\r\n                // Make sure callback is called, asynchronously, in the absence of the auth module\r\n                setTimeout(function () { return callback(null); }, 0);\r\n            },\r\n            removeAuthTokenListener: function (callback) {\r\n                tokenListeners = tokenListeners.filter(function (listener) { return listener !== callback; });\r\n            }\r\n        };\r\n    }\r\n    Object.defineProperty(FirebaseAppImpl.prototype, \"automaticDataCollectionEnabled\", {\r\n        get: function () {\r\n            this.checkDestroyed_();\r\n            return this._automaticDataCollectionEnabled;\r\n        },\r\n        set: function (val) {\r\n            this.checkDestroyed_();\r\n            this._automaticDataCollectionEnabled = val;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(FirebaseAppImpl.prototype, \"name\", {\r\n        get: function () {\r\n            this.checkDestroyed_();\r\n            return this.name_;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(FirebaseAppImpl.prototype, \"options\", {\r\n        get: function () {\r\n            this.checkDestroyed_();\r\n            return this.options_;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    FirebaseAppImpl.prototype.delete = function () {\r\n        var _this = this;\r\n        return new Promise(function (resolve) {\r\n            _this.checkDestroyed_();\r\n            resolve();\r\n        })\r\n            .then(function () {\r\n            _this.firebase_.INTERNAL.removeApp(_this.name_);\r\n            var services = [];\r\n            Object.keys(_this.services_).forEach(function (serviceKey) {\r\n                Object.keys(_this.services_[serviceKey]).forEach(function (instanceKey) {\r\n                    services.push(_this.services_[serviceKey][instanceKey]);\r\n                });\r\n            });\r\n            return Promise.all(services.map(function (service) {\r\n                return service.INTERNAL.delete();\r\n            }));\r\n        })\r\n            .then(function () {\r\n            _this.isDeleted_ = true;\r\n            _this.services_ = {};\r\n        });\r\n    };\r\n    /**\r\n     * Return a service instance associated with this app (creating it\r\n     * on demand), identified by the passed instanceIdentifier.\r\n     *\r\n     * NOTE: Currently storage is the only one that is leveraging this\r\n     * functionality. They invoke it by calling:\r\n     *\r\n     * ```javascript\r\n     * firebase.app().storage('STORAGE BUCKET ID')\r\n     * ```\r\n     *\r\n     * The service name is passed to this already\r\n     * @internal\r\n     */\r\n    FirebaseAppImpl.prototype._getService = function (name, instanceIdentifier) {\r\n        if (instanceIdentifier === void 0) { instanceIdentifier = DEFAULT_ENTRY_NAME; }\r\n        this.checkDestroyed_();\r\n        if (!this.services_[name]) {\r\n            this.services_[name] = {};\r\n        }\r\n        if (!this.services_[name][instanceIdentifier]) {\r\n            /**\r\n             * If a custom instance has been defined (i.e. not '[DEFAULT]')\r\n             * then we will pass that instance on, otherwise we pass `null`\r\n             */\r\n            var instanceSpecifier = instanceIdentifier !== DEFAULT_ENTRY_NAME\r\n                ? instanceIdentifier\r\n                : undefined;\r\n            var service = this.firebase_.INTERNAL.factories[name](this, this.extendApp.bind(this), instanceSpecifier);\r\n            this.services_[name][instanceIdentifier] = service;\r\n        }\r\n        return this.services_[name][instanceIdentifier];\r\n    };\r\n    /**\r\n     * Callback function used to extend an App instance at the time\r\n     * of service instance creation.\r\n     */\r\n    FirebaseAppImpl.prototype.extendApp = function (props) {\r\n        var _this = this;\r\n        // Copy the object onto the FirebaseAppImpl prototype\r\n        deepExtend(this, props);\r\n        /**\r\n         * If the app has overwritten the addAuthTokenListener stub, forward\r\n         * the active token listeners on to the true fxn.\r\n         *\r\n         * TODO: This function is required due to our current module\r\n         * structure. Once we are able to rely strictly upon a single module\r\n         * implementation, this code should be refactored and Auth should\r\n         * provide these stubs and the upgrade logic\r\n         */\r\n        if (props.INTERNAL && props.INTERNAL.addAuthTokenListener) {\r\n            tokenListeners.forEach(function (listener) {\r\n                _this.INTERNAL.addAuthTokenListener(listener);\r\n            });\r\n            tokenListeners = [];\r\n        }\r\n    };\r\n    /**\r\n     * This function will throw an Error if the App has already been deleted -\r\n     * use before performing API actions on the App.\r\n     */\r\n    FirebaseAppImpl.prototype.checkDestroyed_ = function () {\r\n        if (this.isDeleted_) {\r\n            error('app-deleted', { name: this.name_ });\r\n        }\r\n    };\r\n    return FirebaseAppImpl;\r\n}());\r\n// Prevent dead-code elimination of these methods w/o invalid property\r\n// copying.\r\n(FirebaseAppImpl.prototype.name && FirebaseAppImpl.prototype.options) ||\r\n    FirebaseAppImpl.prototype.delete ||\r\n    console.log('dc');\r\n/**\r\n * Return a firebase namespace object.\r\n *\r\n * In production, this will be called exactly once and the result\r\n * assigned to the 'firebase' global.  It may be called multiple times\r\n * in unit tests.\r\n */\r\nfunction createFirebaseNamespace() {\r\n    var apps_ = {};\r\n    var factories = {};\r\n    var appHooks = {};\r\n    // A namespace is a plain JavaScript Object.\r\n    var namespace = {\r\n        // Hack to prevent Babel from modifying the object returned\r\n        // as the firebase namespace.\r\n        __esModule: true,\r\n        initializeApp: initializeApp,\r\n        app: app,\r\n        apps: null,\r\n        Promise: Promise,\r\n        SDK_VERSION: '4.13.0',\r\n        INTERNAL: {\r\n            registerService: registerService,\r\n            createFirebaseNamespace: createFirebaseNamespace,\r\n            extendNamespace: extendNamespace,\r\n            createSubscribe: createSubscribe,\r\n            ErrorFactory: ErrorFactory,\r\n            removeApp: removeApp,\r\n            factories: factories,\r\n            useAsService: useAsService,\r\n            Promise: Promise,\r\n            deepExtend: deepExtend\r\n        }\r\n    };\r\n    // Inject a circular default export to allow Babel users who were previously\r\n    // using:\r\n    //\r\n    //   import firebase from 'firebase';\r\n    //   which becomes: var firebase = require('firebase').default;\r\n    //\r\n    // instead of\r\n    //\r\n    //   import * as firebase from 'firebase';\r\n    //   which becomes: var firebase = require('firebase');\r\n    patchProperty(namespace, 'default', namespace);\r\n    // firebase.apps is a read-only getter.\r\n    Object.defineProperty(namespace, 'apps', {\r\n        get: getApps\r\n    });\r\n    /**\r\n     * Called by App.delete() - but before any services associated with the App\r\n     * are deleted.\r\n     */\r\n    function removeApp(name) {\r\n        var app = apps_[name];\r\n        callAppHooks(app, 'delete');\r\n        delete apps_[name];\r\n    }\r\n    /**\r\n     * Get the App object for a given name (or DEFAULT).\r\n     */\r\n    function app(name) {\r\n        name = name || DEFAULT_ENTRY_NAME;\r\n        if (!contains(apps_, name)) {\r\n            error('no-app', { name: name });\r\n        }\r\n        return apps_[name];\r\n    }\r\n    patchProperty(app, 'App', FirebaseAppImpl);\r\n    function initializeApp(options, rawConfig) {\r\n        if (rawConfig === void 0) { rawConfig = {}; }\r\n        if (typeof rawConfig !== 'object' || rawConfig === null) {\r\n            var name_1 = rawConfig;\r\n            rawConfig = { name: name_1 };\r\n        }\r\n        var config = rawConfig;\r\n        if (config.name === undefined) {\r\n            config.name = DEFAULT_ENTRY_NAME;\r\n        }\r\n        var name = config.name;\r\n        if (typeof name !== 'string' || !name) {\r\n            error('bad-app-name', { name: name + '' });\r\n        }\r\n        if (contains(apps_, name)) {\r\n            error('duplicate-app', { name: name });\r\n        }\r\n        var app = new FirebaseAppImpl(options, config, namespace);\r\n        apps_[name] = app;\r\n        callAppHooks(app, 'create');\r\n        return app;\r\n    }\r\n    /*\r\n     * Return an array of all the non-deleted FirebaseApps.\r\n     */\r\n    function getApps() {\r\n        // Make a copy so caller cannot mutate the apps list.\r\n        return Object.keys(apps_).map(function (name) { return apps_[name]; });\r\n    }\r\n    /*\r\n     * Register a Firebase Service.\r\n     *\r\n     * firebase.INTERNAL.registerService()\r\n     *\r\n     * TODO: Implement serviceProperties.\r\n     */\r\n    function registerService(name, createService, serviceProperties, appHook, allowMultipleInstances) {\r\n        // Cannot re-register a service that already exists\r\n        if (factories[name]) {\r\n            error('duplicate-service', { name: name });\r\n        }\r\n        // Capture the service factory for later service instantiation\r\n        factories[name] = createService;\r\n        // Capture the appHook, if passed\r\n        if (appHook) {\r\n            appHooks[name] = appHook;\r\n            // Run the **new** app hook on all existing apps\r\n            getApps().forEach(function (app) {\r\n                appHook('create', app);\r\n            });\r\n        }\r\n        // The Service namespace is an accessor function ...\r\n        var serviceNamespace = function (appArg) {\r\n            if (appArg === void 0) { appArg = app(); }\r\n            if (typeof appArg[name] !== 'function') {\r\n                // Invalid argument.\r\n                // This happens in the following case: firebase.storage('gs:/')\r\n                error('invalid-app-argument', { name: name });\r\n            }\r\n            // Forward service instance lookup to the FirebaseApp.\r\n            return appArg[name]();\r\n        };\r\n        // ... and a container for service-level properties.\r\n        if (serviceProperties !== undefined) {\r\n            deepExtend(serviceNamespace, serviceProperties);\r\n        }\r\n        // Monkey-patch the serviceNamespace onto the firebase namespace\r\n        namespace[name] = serviceNamespace;\r\n        // Patch the FirebaseAppImpl prototype\r\n        FirebaseAppImpl.prototype[name] = function () {\r\n            var args = [];\r\n            for (var _i = 0; _i < arguments.length; _i++) {\r\n                args[_i] = arguments[_i];\r\n            }\r\n            var serviceFxn = this._getService.bind(this, name);\r\n            return serviceFxn.apply(this, allowMultipleInstances ? args : []);\r\n        };\r\n        return serviceNamespace;\r\n    }\r\n    /**\r\n     * Patch the top-level firebase namespace with additional properties.\r\n     *\r\n     * firebase.INTERNAL.extendNamespace()\r\n     */\r\n    function extendNamespace(props) {\r\n        deepExtend(namespace, props);\r\n    }\r\n    function callAppHooks(app, eventName) {\r\n        Object.keys(factories).forEach(function (serviceName) {\r\n            // Ignore virtual services\r\n            var factoryName = useAsService(app, serviceName);\r\n            if (factoryName === null) {\r\n                return;\r\n            }\r\n            if (appHooks[factoryName]) {\r\n                appHooks[factoryName](eventName, app);\r\n            }\r\n        });\r\n    }\r\n    // Map the requested service to a registered service name\r\n    // (used to map auth to serverAuth service when needed).\r\n    function useAsService(app, name) {\r\n        if (name === 'serverAuth') {\r\n            return null;\r\n        }\r\n        var useService = name;\r\n        var options = app.options;\r\n        return useService;\r\n    }\r\n    return namespace;\r\n}\r\nfunction error(code, args) {\r\n    throw appErrors.create(code, args);\r\n}\r\n// TypeScript does not support non-string indexes!\r\n// let errors: {[code: AppError: string} = {\r\nvar errors = {\r\n    'no-app': \"No Firebase App '{$name}' has been created - \" +\r\n        'call Firebase App.initializeApp()',\r\n    'bad-app-name': \"Illegal App name: '{$name}\",\r\n    'duplicate-app': \"Firebase App named '{$name}' already exists\",\r\n    'app-deleted': \"Firebase App named '{$name}' already deleted\",\r\n    'duplicate-service': \"Firebase service named '{$name}' already registered\",\r\n    'sa-not-supported': 'Initializing the Firebase SDK with a service ' +\r\n        'account is only allowed in a Node.js environment. On client ' +\r\n        'devices, you should instead initialize the SDK with an api key and ' +\r\n        'auth domain',\r\n    'invalid-app-argument': 'firebase.{$name}() takes either no argument or a ' +\r\n        'Firebase App instance.'\r\n};\r\nvar appErrors = new ErrorFactory('app', 'Firebase', errors);\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nvar firebase = createFirebaseNamespace();\n\nexport default firebase;\nexport { firebase };\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/@firebase/app/dist/index.esm.js\n// module id = 9\n// module chunks = 0","'use strict';\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\nvar tslib_1 = require('tslib');\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * @fileoverview Firebase constants.  Some of these (@defines) can be overridden at compile-time.\r\n */\r\nvar CONSTANTS = {\r\n    /**\r\n     * @define {boolean} Whether this is the client Node.js SDK.\r\n     */\r\n    NODE_CLIENT: false,\r\n    /**\r\n     * @define {boolean} Whether this is the Admin Node.js SDK.\r\n     */\r\n    NODE_ADMIN: false,\r\n    /**\r\n     * Firebase SDK Version\r\n     */\r\n    SDK_VERSION: '${JSCORE_VERSION}'\r\n};\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Throws an error if the provided assertion is falsy\r\n * @param {*} assertion The assertion to be tested for falsiness\r\n * @param {!string} message The message to display if the check fails\r\n */\r\nvar assert = function (assertion, message) {\r\n    if (!assertion) {\r\n        throw assertionError(message);\r\n    }\r\n};\r\n/**\r\n * Returns an Error object suitable for throwing.\r\n * @param {string} message\r\n * @return {!Error}\r\n */\r\nvar assertionError = function (message) {\r\n    return new Error('Firebase Database (' +\r\n        CONSTANTS.SDK_VERSION +\r\n        ') INTERNAL ASSERT FAILED: ' +\r\n        message);\r\n};\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nvar stringToByteArray = function (str) {\r\n    // TODO(user): Use native implementations if/when available\r\n    var out = [], p = 0;\r\n    for (var i = 0; i < str.length; i++) {\r\n        var c = str.charCodeAt(i);\r\n        if (c < 128) {\r\n            out[p++] = c;\r\n        }\r\n        else if (c < 2048) {\r\n            out[p++] = (c >> 6) | 192;\r\n            out[p++] = (c & 63) | 128;\r\n        }\r\n        else if ((c & 0xfc00) == 0xd800 &&\r\n            i + 1 < str.length &&\r\n            (str.charCodeAt(i + 1) & 0xfc00) == 0xdc00) {\r\n            // Surrogate Pair\r\n            c = 0x10000 + ((c & 0x03ff) << 10) + (str.charCodeAt(++i) & 0x03ff);\r\n            out[p++] = (c >> 18) | 240;\r\n            out[p++] = ((c >> 12) & 63) | 128;\r\n            out[p++] = ((c >> 6) & 63) | 128;\r\n            out[p++] = (c & 63) | 128;\r\n        }\r\n        else {\r\n            out[p++] = (c >> 12) | 224;\r\n            out[p++] = ((c >> 6) & 63) | 128;\r\n            out[p++] = (c & 63) | 128;\r\n        }\r\n    }\r\n    return out;\r\n};\r\n/**\r\n * Turns an array of numbers into the string given by the concatenation of the\r\n * characters to which the numbers correspond.\r\n * @param {Array<number>} bytes Array of numbers representing characters.\r\n * @return {string} Stringification of the array.\r\n */\r\nvar byteArrayToString = function (bytes) {\r\n    // TODO(user): Use native implementations if/when available\r\n    var out = [], pos = 0, c = 0;\r\n    while (pos < bytes.length) {\r\n        var c1 = bytes[pos++];\r\n        if (c1 < 128) {\r\n            out[c++] = String.fromCharCode(c1);\r\n        }\r\n        else if (c1 > 191 && c1 < 224) {\r\n            var c2 = bytes[pos++];\r\n            out[c++] = String.fromCharCode(((c1 & 31) << 6) | (c2 & 63));\r\n        }\r\n        else if (c1 > 239 && c1 < 365) {\r\n            // Surrogate Pair\r\n            var c2 = bytes[pos++];\r\n            var c3 = bytes[pos++];\r\n            var c4 = bytes[pos++];\r\n            var u = (((c1 & 7) << 18) | ((c2 & 63) << 12) | ((c3 & 63) << 6) | (c4 & 63)) -\r\n                0x10000;\r\n            out[c++] = String.fromCharCode(0xd800 + (u >> 10));\r\n            out[c++] = String.fromCharCode(0xdc00 + (u & 1023));\r\n        }\r\n        else {\r\n            var c2 = bytes[pos++];\r\n            var c3 = bytes[pos++];\r\n            out[c++] = String.fromCharCode(((c1 & 15) << 12) | ((c2 & 63) << 6) | (c3 & 63));\r\n        }\r\n    }\r\n    return out.join('');\r\n};\r\n// Static lookup maps, lazily populated by init_()\r\nvar base64 = {\r\n    /**\r\n     * Maps bytes to characters.\r\n     * @type {Object}\r\n     * @private\r\n     */\r\n    byteToCharMap_: null,\r\n    /**\r\n     * Maps characters to bytes.\r\n     * @type {Object}\r\n     * @private\r\n     */\r\n    charToByteMap_: null,\r\n    /**\r\n     * Maps bytes to websafe characters.\r\n     * @type {Object}\r\n     * @private\r\n     */\r\n    byteToCharMapWebSafe_: null,\r\n    /**\r\n     * Maps websafe characters to bytes.\r\n     * @type {Object}\r\n     * @private\r\n     */\r\n    charToByteMapWebSafe_: null,\r\n    /**\r\n     * Our default alphabet, shared between\r\n     * ENCODED_VALS and ENCODED_VALS_WEBSAFE\r\n     * @type {string}\r\n     */\r\n    ENCODED_VALS_BASE: 'ABCDEFGHIJKLMNOPQRSTUVWXYZ' + 'abcdefghijklmnopqrstuvwxyz' + '0123456789',\r\n    /**\r\n     * Our default alphabet. Value 64 (=) is special; it means \"nothing.\"\r\n     * @type {string}\r\n     */\r\n    get ENCODED_VALS() {\r\n        return this.ENCODED_VALS_BASE + '+/=';\r\n    },\r\n    /**\r\n     * Our websafe alphabet.\r\n     * @type {string}\r\n     */\r\n    get ENCODED_VALS_WEBSAFE() {\r\n        return this.ENCODED_VALS_BASE + '-_.';\r\n    },\r\n    /**\r\n     * Whether this browser supports the atob and btoa functions. This extension\r\n     * started at Mozilla but is now implemented by many browsers. We use the\r\n     * ASSUME_* variables to avoid pulling in the full useragent detection library\r\n     * but still allowing the standard per-browser compilations.\r\n     *\r\n     * @type {boolean}\r\n     */\r\n    HAS_NATIVE_SUPPORT: typeof atob === 'function',\r\n    /**\r\n     * Base64-encode an array of bytes.\r\n     *\r\n     * @param {Array<number>|Uint8Array} input An array of bytes (numbers with\r\n     *     value in [0, 255]) to encode.\r\n     * @param {boolean=} opt_webSafe Boolean indicating we should use the\r\n     *     alternative alphabet.\r\n     * @return {string} The base64 encoded string.\r\n     */\r\n    encodeByteArray: function (input, opt_webSafe) {\r\n        if (!Array.isArray(input)) {\r\n            throw Error('encodeByteArray takes an array as a parameter');\r\n        }\r\n        this.init_();\r\n        var byteToCharMap = opt_webSafe\r\n            ? this.byteToCharMapWebSafe_\r\n            : this.byteToCharMap_;\r\n        var output = [];\r\n        for (var i = 0; i < input.length; i += 3) {\r\n            var byte1 = input[i];\r\n            var haveByte2 = i + 1 < input.length;\r\n            var byte2 = haveByte2 ? input[i + 1] : 0;\r\n            var haveByte3 = i + 2 < input.length;\r\n            var byte3 = haveByte3 ? input[i + 2] : 0;\r\n            var outByte1 = byte1 >> 2;\r\n            var outByte2 = ((byte1 & 0x03) << 4) | (byte2 >> 4);\r\n            var outByte3 = ((byte2 & 0x0f) << 2) | (byte3 >> 6);\r\n            var outByte4 = byte3 & 0x3f;\r\n            if (!haveByte3) {\r\n                outByte4 = 64;\r\n                if (!haveByte2) {\r\n                    outByte3 = 64;\r\n                }\r\n            }\r\n            output.push(byteToCharMap[outByte1], byteToCharMap[outByte2], byteToCharMap[outByte3], byteToCharMap[outByte4]);\r\n        }\r\n        return output.join('');\r\n    },\r\n    /**\r\n     * Base64-encode a string.\r\n     *\r\n     * @param {string} input A string to encode.\r\n     * @param {boolean=} opt_webSafe If true, we should use the\r\n     *     alternative alphabet.\r\n     * @return {string} The base64 encoded string.\r\n     */\r\n    encodeString: function (input, opt_webSafe) {\r\n        // Shortcut for Mozilla browsers that implement\r\n        // a native base64 encoder in the form of \"btoa/atob\"\r\n        if (this.HAS_NATIVE_SUPPORT && !opt_webSafe) {\r\n            return btoa(input);\r\n        }\r\n        return this.encodeByteArray(stringToByteArray(input), opt_webSafe);\r\n    },\r\n    /**\r\n     * Base64-decode a string.\r\n     *\r\n     * @param {string} input to decode.\r\n     * @param {boolean=} opt_webSafe True if we should use the\r\n     *     alternative alphabet.\r\n     * @return {string} string representing the decoded value.\r\n     */\r\n    decodeString: function (input, opt_webSafe) {\r\n        // Shortcut for Mozilla browsers that implement\r\n        // a native base64 encoder in the form of \"btoa/atob\"\r\n        if (this.HAS_NATIVE_SUPPORT && !opt_webSafe) {\r\n            return atob(input);\r\n        }\r\n        return byteArrayToString(this.decodeStringToByteArray(input, opt_webSafe));\r\n    },\r\n    /**\r\n     * Base64-decode a string.\r\n     *\r\n     * In base-64 decoding, groups of four characters are converted into three\r\n     * bytes.  If the encoder did not apply padding, the input length may not\r\n     * be a multiple of 4.\r\n     *\r\n     * In this case, the last group will have fewer than 4 characters, and\r\n     * padding will be inferred.  If the group has one or two characters, it decodes\r\n     * to one byte.  If the group has three characters, it decodes to two bytes.\r\n     *\r\n     * @param {string} input Input to decode.\r\n     * @param {boolean=} opt_webSafe True if we should use the web-safe alphabet.\r\n     * @return {!Array<number>} bytes representing the decoded value.\r\n     */\r\n    decodeStringToByteArray: function (input, opt_webSafe) {\r\n        this.init_();\r\n        var charToByteMap = opt_webSafe\r\n            ? this.charToByteMapWebSafe_\r\n            : this.charToByteMap_;\r\n        var output = [];\r\n        for (var i = 0; i < input.length;) {\r\n            var byte1 = charToByteMap[input.charAt(i++)];\r\n            var haveByte2 = i < input.length;\r\n            var byte2 = haveByte2 ? charToByteMap[input.charAt(i)] : 0;\r\n            ++i;\r\n            var haveByte3 = i < input.length;\r\n            var byte3 = haveByte3 ? charToByteMap[input.charAt(i)] : 64;\r\n            ++i;\r\n            var haveByte4 = i < input.length;\r\n            var byte4 = haveByte4 ? charToByteMap[input.charAt(i)] : 64;\r\n            ++i;\r\n            if (byte1 == null || byte2 == null || byte3 == null || byte4 == null) {\r\n                throw Error();\r\n            }\r\n            var outByte1 = (byte1 << 2) | (byte2 >> 4);\r\n            output.push(outByte1);\r\n            if (byte3 != 64) {\r\n                var outByte2 = ((byte2 << 4) & 0xf0) | (byte3 >> 2);\r\n                output.push(outByte2);\r\n                if (byte4 != 64) {\r\n                    var outByte3 = ((byte3 << 6) & 0xc0) | byte4;\r\n                    output.push(outByte3);\r\n                }\r\n            }\r\n        }\r\n        return output;\r\n    },\r\n    /**\r\n     * Lazy static initialization function. Called before\r\n     * accessing any of the static map variables.\r\n     * @private\r\n     */\r\n    init_: function () {\r\n        if (!this.byteToCharMap_) {\r\n            this.byteToCharMap_ = {};\r\n            this.charToByteMap_ = {};\r\n            this.byteToCharMapWebSafe_ = {};\r\n            this.charToByteMapWebSafe_ = {};\r\n            // We want quick mappings back and forth, so we precompute two maps.\r\n            for (var i = 0; i < this.ENCODED_VALS.length; i++) {\r\n                this.byteToCharMap_[i] = this.ENCODED_VALS.charAt(i);\r\n                this.charToByteMap_[this.byteToCharMap_[i]] = i;\r\n                this.byteToCharMapWebSafe_[i] = this.ENCODED_VALS_WEBSAFE.charAt(i);\r\n                this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]] = i;\r\n                // Be forgiving when decoding and correctly decode both encodings.\r\n                if (i >= this.ENCODED_VALS_BASE.length) {\r\n                    this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)] = i;\r\n                    this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)] = i;\r\n                }\r\n            }\r\n        }\r\n    }\r\n};\r\n/**\r\n * URL-safe base64 encoding\r\n * @param {!string} str\r\n * @return {!string}\r\n */\r\nvar base64Encode = function (str) {\r\n    var utf8Bytes = stringToByteArray(str);\r\n    return base64.encodeByteArray(utf8Bytes, true);\r\n};\r\n/**\r\n * URL-safe base64 decoding\r\n *\r\n * NOTE: DO NOT use the global atob() function - it does NOT support the\r\n * base64Url variant encoding.\r\n *\r\n * @param {string} str To be decoded\r\n * @return {?string} Decoded result, if possible\r\n */\r\nvar base64Decode = function (str) {\r\n    try {\r\n        return base64.decodeString(str, true);\r\n    }\r\n    catch (e) {\r\n        console.error('base64Decode failed: ', e);\r\n    }\r\n    return null;\r\n};\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Do a deep-copy of basic JavaScript Objects or Arrays.\r\n */\r\nfunction deepCopy(value) {\r\n    return deepExtend(undefined, value);\r\n}\r\n/**\r\n * Copy properties from source to target (recursively allows extension\r\n * of Objects and Arrays).  Scalar values in the target are over-written.\r\n * If target is undefined, an object of the appropriate type will be created\r\n * (and returned).\r\n *\r\n * We recursively copy all child properties of plain Objects in the source- so\r\n * that namespace- like dictionaries are merged.\r\n *\r\n * Note that the target can be a function, in which case the properties in\r\n * the source Object are copied onto it as static properties of the Function.\r\n */\r\nfunction deepExtend(target, source) {\r\n    if (!(source instanceof Object)) {\r\n        return source;\r\n    }\r\n    switch (source.constructor) {\r\n        case Date:\r\n            // Treat Dates like scalars; if the target date object had any child\r\n            // properties - they will be lost!\r\n            var dateValue = source;\r\n            return new Date(dateValue.getTime());\r\n        case Object:\r\n            if (target === undefined) {\r\n                target = {};\r\n            }\r\n            break;\r\n        case Array:\r\n            // Always copy the array source and overwrite the target.\r\n            target = [];\r\n            break;\r\n        default:\r\n            // Not a plain Object - treat it as a scalar.\r\n            return source;\r\n    }\r\n    for (var prop in source) {\r\n        if (!source.hasOwnProperty(prop)) {\r\n            continue;\r\n        }\r\n        target[prop] = deepExtend(target[prop], source[prop]);\r\n    }\r\n    return target;\r\n}\r\n// TODO: Really needed (for JSCompiler type checking)?\r\nfunction patchProperty(obj, prop, value) {\r\n    obj[prop] = value;\r\n}\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nvar Deferred = /** @class */ (function () {\r\n    function Deferred() {\r\n        var _this = this;\r\n        this.promise = new Promise(function (resolve, reject) {\r\n            _this.resolve = resolve;\r\n            _this.reject = reject;\r\n        });\r\n    }\r\n    /**\r\n     * Our API internals are not promiseified and cannot because our callback APIs have subtle expectations around\r\n     * invoking promises inline, which Promises are forbidden to do. This method accepts an optional node-style callback\r\n     * and returns a node-style callback which will resolve or reject the Deferred's promise.\r\n     * @param {((?function(?(Error)): (?|undefined))| (?function(?(Error),?=): (?|undefined)))=} callback\r\n     * @return {!function(?(Error), ?=)}\r\n     */\r\n    Deferred.prototype.wrapCallback = function (callback) {\r\n        var _this = this;\r\n        return function (error, value) {\r\n            if (error) {\r\n                _this.reject(error);\r\n            }\r\n            else {\r\n                _this.resolve(value);\r\n            }\r\n            if (typeof callback === 'function') {\r\n                // Attaching noop handler just in case developer wasn't expecting\r\n                // promises\r\n                _this.promise.catch(function () { });\r\n                // Some of our callbacks don't expect a value and our own tests\r\n                // assert that the parameter length is 1\r\n                if (callback.length === 1) {\r\n                    callback(error);\r\n                }\r\n                else {\r\n                    callback(error, value);\r\n                }\r\n            }\r\n        };\r\n    };\r\n    return Deferred;\r\n}());\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Returns navigator.userAgent string or '' if it's not defined.\r\n * @return {string} user agent string\r\n */\r\nvar getUA = function () {\r\n    if (typeof navigator !== 'undefined' &&\r\n        typeof navigator['userAgent'] === 'string') {\r\n        return navigator['userAgent'];\r\n    }\r\n    else {\r\n        return '';\r\n    }\r\n};\r\n/**\r\n * Detect Cordova / PhoneGap / Ionic frameworks on a mobile device.\r\n *\r\n * Deliberately does not rely on checking `file://` URLs (as this fails PhoneGap in the Ripple emulator) nor\r\n * Cordova `onDeviceReady`, which would normally wait for a callback.\r\n *\r\n * @return {boolean} isMobileCordova\r\n */\r\nvar isMobileCordova = function () {\r\n    return (typeof window !== 'undefined' &&\r\n        !!(window['cordova'] || window['phonegap'] || window['PhoneGap']) &&\r\n        /ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(getUA()));\r\n};\r\n/**\r\n * Detect React Native.\r\n *\r\n * @return {boolean} True if ReactNative environment is detected.\r\n */\r\nvar isReactNative = function () {\r\n    return (typeof navigator === 'object' && navigator['product'] === 'ReactNative');\r\n};\r\n/**\r\n * Detect Node.js.\r\n *\r\n * @return {boolean} True if Node.js environment is detected.\r\n */\r\nvar isNodeSdk = function () {\r\n    return CONSTANTS.NODE_CLIENT === true || CONSTANTS.NODE_ADMIN === true;\r\n};\n\nvar ERROR_NAME = 'FirebaseError';\r\nvar captureStackTrace = Error\r\n    .captureStackTrace;\r\n// Export for faking in tests\r\nfunction patchCapture(captureFake) {\r\n    var result = captureStackTrace;\r\n    captureStackTrace = captureFake;\r\n    return result;\r\n}\r\nvar FirebaseError = /** @class */ (function () {\r\n    function FirebaseError(code, message) {\r\n        this.code = code;\r\n        this.message = message;\r\n        // We want the stack value, if implemented by Error\r\n        if (captureStackTrace) {\r\n            // Patches this.stack, omitted calls above ErrorFactory#create\r\n            captureStackTrace(this, ErrorFactory.prototype.create);\r\n        }\r\n        else {\r\n            var err_1 = Error.apply(this, arguments);\r\n            this.name = ERROR_NAME;\r\n            // Make non-enumerable getter for the property.\r\n            Object.defineProperty(this, 'stack', {\r\n                get: function () {\r\n                    return err_1.stack;\r\n                }\r\n            });\r\n        }\r\n    }\r\n    return FirebaseError;\r\n}());\r\n// Back-door inheritance\r\nFirebaseError.prototype = Object.create(Error.prototype);\r\nFirebaseError.prototype.constructor = FirebaseError;\r\nFirebaseError.prototype.name = ERROR_NAME;\r\nvar ErrorFactory = /** @class */ (function () {\r\n    function ErrorFactory(service, serviceName, errors) {\r\n        this.service = service;\r\n        this.serviceName = serviceName;\r\n        this.errors = errors;\r\n        // Matches {$name}, by default.\r\n        this.pattern = /\\{\\$([^}]+)}/g;\r\n        // empty\r\n    }\r\n    ErrorFactory.prototype.create = function (code, data) {\r\n        if (data === undefined) {\r\n            data = {};\r\n        }\r\n        var template = this.errors[code];\r\n        var fullCode = this.service + '/' + code;\r\n        var message;\r\n        if (template === undefined) {\r\n            message = 'Error';\r\n        }\r\n        else {\r\n            message = template.replace(this.pattern, function (match, key) {\r\n                var value = data[key];\r\n                return value !== undefined ? value.toString() : '<' + key + '?>';\r\n            });\r\n        }\r\n        // Service: Error message (service/code).\r\n        message = this.serviceName + ': ' + message + ' (' + fullCode + ').';\r\n        var err = new FirebaseError(fullCode, message);\r\n        // Populate the Error object with message parts for programmatic\r\n        // accesses (e.g., e.file).\r\n        for (var prop in data) {\r\n            if (!data.hasOwnProperty(prop) || prop.slice(-1) === '_') {\r\n                continue;\r\n            }\r\n            err[prop] = data[prop];\r\n        }\r\n        return err;\r\n    };\r\n    return ErrorFactory;\r\n}());\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Evaluates a JSON string into a javascript object.\r\n *\r\n * @param {string} str A string containing JSON.\r\n * @return {*} The javascript object representing the specified JSON.\r\n */\r\nfunction jsonEval(str) {\r\n    return JSON.parse(str);\r\n}\r\n/**\r\n * Returns JSON representing a javascript object.\r\n * @param {*} data Javascript object to be stringified.\r\n * @return {string} The JSON contents of the object.\r\n */\r\nfunction stringify(data) {\r\n    return JSON.stringify(data);\r\n}\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Decodes a Firebase auth. token into constituent parts.\r\n *\r\n * Notes:\r\n * - May return with invalid / incomplete claims if there's no native base64 decoding support.\r\n * - Doesn't check if the token is actually valid.\r\n *\r\n * @param {?string} token\r\n * @return {{header: *, claims: *, data: *, signature: string}}\r\n */\r\nvar decode = function (token) {\r\n    var header = {}, claims = {}, data = {}, signature = '';\r\n    try {\r\n        var parts = token.split('.');\r\n        header = jsonEval(base64Decode(parts[0]) || '');\r\n        claims = jsonEval(base64Decode(parts[1]) || '');\r\n        signature = parts[2];\r\n        data = claims['d'] || {};\r\n        delete claims['d'];\r\n    }\r\n    catch (e) { }\r\n    return {\r\n        header: header,\r\n        claims: claims,\r\n        data: data,\r\n        signature: signature\r\n    };\r\n};\r\n/**\r\n * Decodes a Firebase auth. token and checks the validity of its time-based claims. Will return true if the\r\n * token is within the time window authorized by the 'nbf' (not-before) and 'iat' (issued-at) claims.\r\n *\r\n * Notes:\r\n * - May return a false negative if there's no native base64 decoding support.\r\n * - Doesn't check if the token is actually valid.\r\n *\r\n * @param {?string} token\r\n * @return {boolean}\r\n */\r\nvar isValidTimestamp = function (token) {\r\n    var claims = decode(token).claims, now = Math.floor(new Date().getTime() / 1000), validSince, validUntil;\r\n    if (typeof claims === 'object') {\r\n        if (claims.hasOwnProperty('nbf')) {\r\n            validSince = claims['nbf'];\r\n        }\r\n        else if (claims.hasOwnProperty('iat')) {\r\n            validSince = claims['iat'];\r\n        }\r\n        if (claims.hasOwnProperty('exp')) {\r\n            validUntil = claims['exp'];\r\n        }\r\n        else {\r\n            // token will expire after 24h by default\r\n            validUntil = validSince + 86400;\r\n        }\r\n    }\r\n    return (now && validSince && validUntil && now >= validSince && now <= validUntil);\r\n};\r\n/**\r\n * Decodes a Firebase auth. token and returns its issued at time if valid, null otherwise.\r\n *\r\n * Notes:\r\n * - May return null if there's no native base64 decoding support.\r\n * - Doesn't check if the token is actually valid.\r\n *\r\n * @param {?string} token\r\n * @return {?number}\r\n */\r\nvar issuedAtTime = function (token) {\r\n    var claims = decode(token).claims;\r\n    if (typeof claims === 'object' && claims.hasOwnProperty('iat')) {\r\n        return claims['iat'];\r\n    }\r\n    return null;\r\n};\r\n/**\r\n * Decodes a Firebase auth. token and checks the validity of its format. Expects a valid issued-at time and non-empty\r\n * signature.\r\n *\r\n * Notes:\r\n * - May return a false negative if there's no native base64 decoding support.\r\n * - Doesn't check if the token is actually valid.\r\n *\r\n * @param {?string} token\r\n * @return {boolean}\r\n */\r\nvar isValidFormat = function (token) {\r\n    var decoded = decode(token), claims = decoded.claims;\r\n    return (!!decoded.signature &&\r\n        !!claims &&\r\n        typeof claims === 'object' &&\r\n        claims.hasOwnProperty('iat'));\r\n};\r\n/**\r\n * Attempts to peer into an auth token and determine if it's an admin auth token by looking at the claims portion.\r\n *\r\n * Notes:\r\n * - May return a false negative if there's no native base64 decoding support.\r\n * - Doesn't check if the token is actually valid.\r\n *\r\n * @param {?string} token\r\n * @return {boolean}\r\n */\r\nvar isAdmin = function (token) {\r\n    var claims = decode(token).claims;\r\n    return typeof claims === 'object' && claims['admin'] === true;\r\n};\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n// See http://www.devthought.com/2012/01/18/an-object-is-not-a-hash/\r\nvar contains = function (obj, key) {\r\n    return Object.prototype.hasOwnProperty.call(obj, key);\r\n};\r\nvar safeGet = function (obj, key) {\r\n    if (Object.prototype.hasOwnProperty.call(obj, key))\r\n        return obj[key];\r\n    // else return undefined.\r\n};\r\n/**\r\n * Enumerates the keys/values in an object, excluding keys defined on the prototype.\r\n *\r\n * @param {?Object.<K,V>} obj Object to enumerate.\r\n * @param {!function(K, V)} fn Function to call for each key and value.\r\n * @template K,V\r\n */\r\nvar forEach = function (obj, fn) {\r\n    for (var key in obj) {\r\n        if (Object.prototype.hasOwnProperty.call(obj, key)) {\r\n            fn(key, obj[key]);\r\n        }\r\n    }\r\n};\r\n/**\r\n * Copies all the (own) properties from one object to another.\r\n * @param {!Object} objTo\r\n * @param {!Object} objFrom\r\n * @return {!Object} objTo\r\n */\r\nvar extend = function (objTo, objFrom) {\r\n    forEach(objFrom, function (key, value) {\r\n        objTo[key] = value;\r\n    });\r\n    return objTo;\r\n};\r\n/**\r\n * Returns a clone of the specified object.\r\n * @param {!Object} obj\r\n * @return {!Object} cloned obj.\r\n */\r\nvar clone = function (obj) {\r\n    return extend({}, obj);\r\n};\r\n/**\r\n * Returns true if obj has typeof \"object\" and is not null.  Unlike goog.isObject(), does not return true\r\n * for functions.\r\n *\r\n * @param obj {*} A potential object.\r\n * @returns {boolean} True if it's an object.\r\n */\r\nvar isNonNullObject = function (obj) {\r\n    return typeof obj === 'object' && obj !== null;\r\n};\r\nvar isEmpty = function (obj) {\r\n    for (var key in obj) {\r\n        return false;\r\n    }\r\n    return true;\r\n};\r\nvar getCount = function (obj) {\r\n    var rv = 0;\r\n    for (var key in obj) {\r\n        rv++;\r\n    }\r\n    return rv;\r\n};\r\nvar map = function (obj, f, opt_obj) {\r\n    var res = {};\r\n    for (var key in obj) {\r\n        res[key] = f.call(opt_obj, obj[key], key, obj);\r\n    }\r\n    return res;\r\n};\r\nvar findKey = function (obj, fn, opt_this) {\r\n    for (var key in obj) {\r\n        if (fn.call(opt_this, obj[key], key, obj)) {\r\n            return key;\r\n        }\r\n    }\r\n    return undefined;\r\n};\r\nvar findValue = function (obj, fn, opt_this) {\r\n    var key = findKey(obj, fn, opt_this);\r\n    return key && obj[key];\r\n};\r\nvar getAnyKey = function (obj) {\r\n    for (var key in obj) {\r\n        return key;\r\n    }\r\n};\r\nvar getValues = function (obj) {\r\n    var res = [];\r\n    var i = 0;\r\n    for (var key in obj) {\r\n        res[i++] = obj[key];\r\n    }\r\n    return res;\r\n};\r\n/**\r\n * Tests whether every key/value pair in an object pass the test implemented\r\n * by the provided function\r\n *\r\n * @param {?Object.<K,V>} obj Object to test.\r\n * @param {!function(K, V)} fn Function to call for each key and value.\r\n * @template K,V\r\n */\r\nvar every = function (obj, fn) {\r\n    for (var key in obj) {\r\n        if (Object.prototype.hasOwnProperty.call(obj, key)) {\r\n            if (!fn(key, obj[key])) {\r\n                return false;\r\n            }\r\n        }\r\n    }\r\n    return true;\r\n};\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Returns a querystring-formatted string (e.g. &arg=val&arg2=val2) from a params\r\n * object (e.g. {arg: 'val', arg2: 'val2'})\r\n * Note: You must prepend it with ? when adding it to a URL.\r\n *\r\n * @param {!Object} querystringParams\r\n * @return {string}\r\n */\r\nvar querystring = function (querystringParams) {\r\n    var params = [];\r\n    forEach(querystringParams, function (key, value) {\r\n        if (Array.isArray(value)) {\r\n            value.forEach(function (arrayVal) {\r\n                params.push(encodeURIComponent(key) + '=' + encodeURIComponent(arrayVal));\r\n            });\r\n        }\r\n        else {\r\n            params.push(encodeURIComponent(key) + '=' + encodeURIComponent(value));\r\n        }\r\n    });\r\n    return params.length ? '&' + params.join('&') : '';\r\n};\r\n/**\r\n * Decodes a querystring (e.g. ?arg=val&arg2=val2) into a params object (e.g. {arg: 'val', arg2: 'val2'})\r\n *\r\n * @param {string} querystring\r\n * @return {!Object}\r\n */\r\nvar querystringDecode = function (querystring) {\r\n    var obj = {};\r\n    var tokens = querystring.replace(/^\\?/, '').split('&');\r\n    tokens.forEach(function (token) {\r\n        if (token) {\r\n            var key = token.split('=');\r\n            obj[key[0]] = key[1];\r\n        }\r\n    });\r\n    return obj;\r\n};\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n// Copyright 2011 The Closure Library Authors. All Rights Reserved.\r\n//\r\n// Licensed under the Apache License, Version 2.0 (the \"License\");\r\n// you may not use this file except in compliance with the License.\r\n// You may obtain a copy of the License at\r\n//\r\n//      http://www.apache.org/licenses/LICENSE-2.0\r\n//\r\n// Unless required by applicable law or agreed to in writing, software\r\n// distributed under the License is distributed on an \"AS-IS\" BASIS,\r\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n// See the License for the specific language governing permissions and\r\n// limitations under the License.\r\n/**\r\n * @fileoverview Abstract cryptographic hash interface.\r\n *\r\n * See Sha1 and Md5 for sample implementations.\r\n *\r\n */\r\n/**\r\n * Create a cryptographic hash instance.\r\n *\r\n * @constructor\r\n * @struct\r\n */\r\nvar Hash = /** @class */ (function () {\r\n    function Hash() {\r\n        /**\r\n         * The block size for the hasher.\r\n         * @type {number}\r\n         */\r\n        this.blockSize = -1;\r\n    }\r\n    return Hash;\r\n}());\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * @fileoverview SHA-1 cryptographic hash.\r\n * Variable names follow the notation in FIPS PUB 180-3:\r\n * http://csrc.nist.gov/publications/fips/fips180-3/fips180-3_final.pdf.\r\n *\r\n * Usage:\r\n *   var sha1 = new sha1();\r\n *   sha1.update(bytes);\r\n *   var hash = sha1.digest();\r\n *\r\n * Performance:\r\n *   Chrome 23:   ~400 Mbit/s\r\n *   Firefox 16:  ~250 Mbit/s\r\n *\r\n */\r\n/**\r\n * SHA-1 cryptographic hash constructor.\r\n *\r\n * The properties declared here are discussed in the above algorithm document.\r\n * @constructor\r\n * @extends {Hash}\r\n * @final\r\n * @struct\r\n */\r\nvar Sha1 = /** @class */ (function (_super) {\r\n    tslib_1.__extends(Sha1, _super);\r\n    function Sha1() {\r\n        var _this = _super.call(this) || this;\r\n        /**\r\n         * Holds the previous values of accumulated variables a-e in the compress_\r\n         * function.\r\n         * @type {!Array<number>}\r\n         * @private\r\n         */\r\n        _this.chain_ = [];\r\n        /**\r\n         * A buffer holding the partially computed hash result.\r\n         * @type {!Array<number>}\r\n         * @private\r\n         */\r\n        _this.buf_ = [];\r\n        /**\r\n         * An array of 80 bytes, each a part of the message to be hashed.  Referred to\r\n         * as the message schedule in the docs.\r\n         * @type {!Array<number>}\r\n         * @private\r\n         */\r\n        _this.W_ = [];\r\n        /**\r\n         * Contains data needed to pad messages less than 64 bytes.\r\n         * @type {!Array<number>}\r\n         * @private\r\n         */\r\n        _this.pad_ = [];\r\n        /**\r\n         * @private {number}\r\n         */\r\n        _this.inbuf_ = 0;\r\n        /**\r\n         * @private {number}\r\n         */\r\n        _this.total_ = 0;\r\n        _this.blockSize = 512 / 8;\r\n        _this.pad_[0] = 128;\r\n        for (var i = 1; i < _this.blockSize; ++i) {\r\n            _this.pad_[i] = 0;\r\n        }\r\n        _this.reset();\r\n        return _this;\r\n    }\r\n    Sha1.prototype.reset = function () {\r\n        this.chain_[0] = 0x67452301;\r\n        this.chain_[1] = 0xefcdab89;\r\n        this.chain_[2] = 0x98badcfe;\r\n        this.chain_[3] = 0x10325476;\r\n        this.chain_[4] = 0xc3d2e1f0;\r\n        this.inbuf_ = 0;\r\n        this.total_ = 0;\r\n    };\r\n    /**\r\n     * Internal compress helper function.\r\n     * @param {!Array<number>|!Uint8Array|string} buf Block to compress.\r\n     * @param {number=} opt_offset Offset of the block in the buffer.\r\n     * @private\r\n     */\r\n    Sha1.prototype.compress_ = function (buf, opt_offset) {\r\n        if (!opt_offset) {\r\n            opt_offset = 0;\r\n        }\r\n        var W = this.W_;\r\n        // get 16 big endian words\r\n        if (typeof buf === 'string') {\r\n            for (var i = 0; i < 16; i++) {\r\n                // TODO(user): [bug 8140122] Recent versions of Safari for Mac OS and iOS\r\n                // have a bug that turns the post-increment ++ operator into pre-increment\r\n                // during JIT compilation.  We have code that depends heavily on SHA-1 for\r\n                // correctness and which is affected by this bug, so I've removed all uses\r\n                // of post-increment ++ in which the result value is used.  We can revert\r\n                // this change once the Safari bug\r\n                // (https://bugs.webkit.org/show_bug.cgi?id=109036) has been fixed and\r\n                // most clients have been updated.\r\n                W[i] =\r\n                    (buf.charCodeAt(opt_offset) << 24) |\r\n                        (buf.charCodeAt(opt_offset + 1) << 16) |\r\n                        (buf.charCodeAt(opt_offset + 2) << 8) |\r\n                        buf.charCodeAt(opt_offset + 3);\r\n                opt_offset += 4;\r\n            }\r\n        }\r\n        else {\r\n            for (var i = 0; i < 16; i++) {\r\n                W[i] =\r\n                    (buf[opt_offset] << 24) |\r\n                        (buf[opt_offset + 1] << 16) |\r\n                        (buf[opt_offset + 2] << 8) |\r\n                        buf[opt_offset + 3];\r\n                opt_offset += 4;\r\n            }\r\n        }\r\n        // expand to 80 words\r\n        for (var i = 16; i < 80; i++) {\r\n            var t = W[i - 3] ^ W[i - 8] ^ W[i - 14] ^ W[i - 16];\r\n            W[i] = ((t << 1) | (t >>> 31)) & 0xffffffff;\r\n        }\r\n        var a = this.chain_[0];\r\n        var b = this.chain_[1];\r\n        var c = this.chain_[2];\r\n        var d = this.chain_[3];\r\n        var e = this.chain_[4];\r\n        var f, k;\r\n        // TODO(user): Try to unroll this loop to speed up the computation.\r\n        for (var i = 0; i < 80; i++) {\r\n            if (i < 40) {\r\n                if (i < 20) {\r\n                    f = d ^ (b & (c ^ d));\r\n                    k = 0x5a827999;\r\n                }\r\n                else {\r\n                    f = b ^ c ^ d;\r\n                    k = 0x6ed9eba1;\r\n                }\r\n            }\r\n            else {\r\n                if (i < 60) {\r\n                    f = (b & c) | (d & (b | c));\r\n                    k = 0x8f1bbcdc;\r\n                }\r\n                else {\r\n                    f = b ^ c ^ d;\r\n                    k = 0xca62c1d6;\r\n                }\r\n            }\r\n            var t = (((a << 5) | (a >>> 27)) + f + e + k + W[i]) & 0xffffffff;\r\n            e = d;\r\n            d = c;\r\n            c = ((b << 30) | (b >>> 2)) & 0xffffffff;\r\n            b = a;\r\n            a = t;\r\n        }\r\n        this.chain_[0] = (this.chain_[0] + a) & 0xffffffff;\r\n        this.chain_[1] = (this.chain_[1] + b) & 0xffffffff;\r\n        this.chain_[2] = (this.chain_[2] + c) & 0xffffffff;\r\n        this.chain_[3] = (this.chain_[3] + d) & 0xffffffff;\r\n        this.chain_[4] = (this.chain_[4] + e) & 0xffffffff;\r\n    };\r\n    Sha1.prototype.update = function (bytes, opt_length) {\r\n        // TODO(johnlenz): tighten the function signature and remove this check\r\n        if (bytes == null) {\r\n            return;\r\n        }\r\n        if (opt_length === undefined) {\r\n            opt_length = bytes.length;\r\n        }\r\n        var lengthMinusBlock = opt_length - this.blockSize;\r\n        var n = 0;\r\n        // Using local instead of member variables gives ~5% speedup on Firefox 16.\r\n        var buf = this.buf_;\r\n        var inbuf = this.inbuf_;\r\n        // The outer while loop should execute at most twice.\r\n        while (n < opt_length) {\r\n            // When we have no data in the block to top up, we can directly process the\r\n            // input buffer (assuming it contains sufficient data). This gives ~25%\r\n            // speedup on Chrome 23 and ~15% speedup on Firefox 16, but requires that\r\n            // the data is provided in large chunks (or in multiples of 64 bytes).\r\n            if (inbuf == 0) {\r\n                while (n <= lengthMinusBlock) {\r\n                    this.compress_(bytes, n);\r\n                    n += this.blockSize;\r\n                }\r\n            }\r\n            if (typeof bytes === 'string') {\r\n                while (n < opt_length) {\r\n                    buf[inbuf] = bytes.charCodeAt(n);\r\n                    ++inbuf;\r\n                    ++n;\r\n                    if (inbuf == this.blockSize) {\r\n                        this.compress_(buf);\r\n                        inbuf = 0;\r\n                        // Jump to the outer loop so we use the full-block optimization.\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n            else {\r\n                while (n < opt_length) {\r\n                    buf[inbuf] = bytes[n];\r\n                    ++inbuf;\r\n                    ++n;\r\n                    if (inbuf == this.blockSize) {\r\n                        this.compress_(buf);\r\n                        inbuf = 0;\r\n                        // Jump to the outer loop so we use the full-block optimization.\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        this.inbuf_ = inbuf;\r\n        this.total_ += opt_length;\r\n    };\r\n    /** @override */\r\n    Sha1.prototype.digest = function () {\r\n        var digest = [];\r\n        var totalBits = this.total_ * 8;\r\n        // Add pad 0x80 0x00*.\r\n        if (this.inbuf_ < 56) {\r\n            this.update(this.pad_, 56 - this.inbuf_);\r\n        }\r\n        else {\r\n            this.update(this.pad_, this.blockSize - (this.inbuf_ - 56));\r\n        }\r\n        // Add # bits.\r\n        for (var i = this.blockSize - 1; i >= 56; i--) {\r\n            this.buf_[i] = totalBits & 255;\r\n            totalBits /= 256; // Don't use bit-shifting here!\r\n        }\r\n        this.compress_(this.buf_);\r\n        var n = 0;\r\n        for (var i = 0; i < 5; i++) {\r\n            for (var j = 24; j >= 0; j -= 8) {\r\n                digest[n] = (this.chain_[i] >> j) & 255;\r\n                ++n;\r\n            }\r\n        }\r\n        return digest;\r\n    };\r\n    return Sha1;\r\n}(Hash));\n\n/**\r\n * Helper to make a Subscribe function (just like Promise helps make a\r\n * Thenable).\r\n *\r\n * @param executor Function which can make calls to a single Observer\r\n *     as a proxy.\r\n * @param onNoObservers Callback when count of Observers goes to zero.\r\n */\r\nfunction createSubscribe(executor, onNoObservers) {\r\n    var proxy = new ObserverProxy(executor, onNoObservers);\r\n    return proxy.subscribe.bind(proxy);\r\n}\r\n/**\r\n * Implement fan-out for any number of Observers attached via a subscribe\r\n * function.\r\n */\r\nvar ObserverProxy = /** @class */ (function () {\r\n    /**\r\n     * @param executor Function which can make calls to a single Observer\r\n     *     as a proxy.\r\n     * @param onNoObservers Callback when count of Observers goes to zero.\r\n     */\r\n    function ObserverProxy(executor, onNoObservers) {\r\n        var _this = this;\r\n        this.observers = [];\r\n        this.unsubscribes = [];\r\n        this.observerCount = 0;\r\n        // Micro-task scheduling by calling task.then().\r\n        this.task = Promise.resolve();\r\n        this.finalized = false;\r\n        this.onNoObservers = onNoObservers;\r\n        // Call the executor asynchronously so subscribers that are called\r\n        // synchronously after the creation of the subscribe function\r\n        // can still receive the very first value generated in the executor.\r\n        this.task\r\n            .then(function () {\r\n            executor(_this);\r\n        })\r\n            .catch(function (e) {\r\n            _this.error(e);\r\n        });\r\n    }\r\n    ObserverProxy.prototype.next = function (value) {\r\n        this.forEachObserver(function (observer) {\r\n            observer.next(value);\r\n        });\r\n    };\r\n    ObserverProxy.prototype.error = function (error) {\r\n        this.forEachObserver(function (observer) {\r\n            observer.error(error);\r\n        });\r\n        this.close(error);\r\n    };\r\n    ObserverProxy.prototype.complete = function () {\r\n        this.forEachObserver(function (observer) {\r\n            observer.complete();\r\n        });\r\n        this.close();\r\n    };\r\n    /**\r\n     * Subscribe function that can be used to add an Observer to the fan-out list.\r\n     *\r\n     * - We require that no event is sent to a subscriber sychronously to their\r\n     *   call to subscribe().\r\n     */\r\n    ObserverProxy.prototype.subscribe = function (nextOrObserver, error, complete) {\r\n        var _this = this;\r\n        var observer;\r\n        if (nextOrObserver === undefined &&\r\n            error === undefined &&\r\n            complete === undefined) {\r\n            throw new Error('Missing Observer.');\r\n        }\r\n        // Assemble an Observer object when passed as callback functions.\r\n        if (implementsAnyMethods(nextOrObserver, ['next', 'error', 'complete'])) {\r\n            observer = nextOrObserver;\r\n        }\r\n        else {\r\n            observer = {\r\n                next: nextOrObserver,\r\n                error: error,\r\n                complete: complete\r\n            };\r\n        }\r\n        if (observer.next === undefined) {\r\n            observer.next = noop;\r\n        }\r\n        if (observer.error === undefined) {\r\n            observer.error = noop;\r\n        }\r\n        if (observer.complete === undefined) {\r\n            observer.complete = noop;\r\n        }\r\n        var unsub = this.unsubscribeOne.bind(this, this.observers.length);\r\n        // Attempt to subscribe to a terminated Observable - we\r\n        // just respond to the Observer with the final error or complete\r\n        // event.\r\n        if (this.finalized) {\r\n            this.task.then(function () {\r\n                try {\r\n                    if (_this.finalError) {\r\n                        observer.error(_this.finalError);\r\n                    }\r\n                    else {\r\n                        observer.complete();\r\n                    }\r\n                }\r\n                catch (e) {\r\n                    // nothing\r\n                }\r\n                return;\r\n            });\r\n        }\r\n        this.observers.push(observer);\r\n        return unsub;\r\n    };\r\n    // Unsubscribe is synchronous - we guarantee that no events are sent to\r\n    // any unsubscribed Observer.\r\n    ObserverProxy.prototype.unsubscribeOne = function (i) {\r\n        if (this.observers === undefined || this.observers[i] === undefined) {\r\n            return;\r\n        }\r\n        delete this.observers[i];\r\n        this.observerCount -= 1;\r\n        if (this.observerCount === 0 && this.onNoObservers !== undefined) {\r\n            this.onNoObservers(this);\r\n        }\r\n    };\r\n    ObserverProxy.prototype.forEachObserver = function (fn) {\r\n        if (this.finalized) {\r\n            // Already closed by previous event....just eat the additional values.\r\n            return;\r\n        }\r\n        // Since sendOne calls asynchronously - there is no chance that\r\n        // this.observers will become undefined.\r\n        for (var i = 0; i < this.observers.length; i++) {\r\n            this.sendOne(i, fn);\r\n        }\r\n    };\r\n    // Call the Observer via one of it's callback function. We are careful to\r\n    // confirm that the observe has not been unsubscribed since this asynchronous\r\n    // function had been queued.\r\n    ObserverProxy.prototype.sendOne = function (i, fn) {\r\n        var _this = this;\r\n        // Execute the callback asynchronously\r\n        this.task.then(function () {\r\n            if (_this.observers !== undefined && _this.observers[i] !== undefined) {\r\n                try {\r\n                    fn(_this.observers[i]);\r\n                }\r\n                catch (e) {\r\n                    // Ignore exceptions raised in Observers or missing methods of an\r\n                    // Observer.\r\n                    // Log error to console. b/31404806\r\n                    if (typeof console !== 'undefined' && console.error) {\r\n                        console.error(e);\r\n                    }\r\n                }\r\n            }\r\n        });\r\n    };\r\n    ObserverProxy.prototype.close = function (err) {\r\n        var _this = this;\r\n        if (this.finalized) {\r\n            return;\r\n        }\r\n        this.finalized = true;\r\n        if (err !== undefined) {\r\n            this.finalError = err;\r\n        }\r\n        // Proxy is no longer needed - garbage collect references\r\n        this.task.then(function () {\r\n            _this.observers = undefined;\r\n            _this.onNoObservers = undefined;\r\n        });\r\n    };\r\n    return ObserverProxy;\r\n}());\r\n/** Turn synchronous function into one called asynchronously. */\r\nfunction async(fn, onError) {\r\n    return function () {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        Promise.resolve(true)\r\n            .then(function () {\r\n            fn.apply(void 0, args);\r\n        })\r\n            .catch(function (error) {\r\n            if (onError) {\r\n                onError(error);\r\n            }\r\n        });\r\n    };\r\n}\r\n/**\r\n * Return true if the object passed in implements any of the named methods.\r\n */\r\nfunction implementsAnyMethods(obj, methods) {\r\n    if (typeof obj !== 'object' || obj === null) {\r\n        return false;\r\n    }\r\n    for (var _i = 0, methods_1 = methods; _i < methods_1.length; _i++) {\r\n        var method = methods_1[_i];\r\n        if (method in obj && typeof obj[method] === 'function') {\r\n            return true;\r\n        }\r\n    }\r\n    return false;\r\n}\r\nfunction noop() {\r\n    // do nothing\r\n}\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Check to make sure the appropriate number of arguments are provided for a public function.\r\n * Throws an error if it fails.\r\n *\r\n * @param {!string} fnName The function name\r\n * @param {!number} minCount The minimum number of arguments to allow for the function call\r\n * @param {!number} maxCount The maximum number of argument to allow for the function call\r\n * @param {!number} argCount The actual number of arguments provided.\r\n */\r\nvar validateArgCount = function (fnName, minCount, maxCount, argCount) {\r\n    var argError;\r\n    if (argCount < minCount) {\r\n        argError = 'at least ' + minCount;\r\n    }\r\n    else if (argCount > maxCount) {\r\n        argError = maxCount === 0 ? 'none' : 'no more than ' + maxCount;\r\n    }\r\n    if (argError) {\r\n        var error = fnName +\r\n            ' failed: Was called with ' +\r\n            argCount +\r\n            (argCount === 1 ? ' argument.' : ' arguments.') +\r\n            ' Expects ' +\r\n            argError +\r\n            '.';\r\n        throw new Error(error);\r\n    }\r\n};\r\n/**\r\n * Generates a string to prefix an error message about failed argument validation\r\n *\r\n * @param {!string} fnName The function name\r\n * @param {!number} argumentNumber The index of the argument\r\n * @param {boolean} optional Whether or not the argument is optional\r\n * @return {!string} The prefix to add to the error thrown for validation.\r\n */\r\nfunction errorPrefix(fnName, argumentNumber, optional) {\r\n    var argName = '';\r\n    switch (argumentNumber) {\r\n        case 1:\r\n            argName = optional ? 'first' : 'First';\r\n            break;\r\n        case 2:\r\n            argName = optional ? 'second' : 'Second';\r\n            break;\r\n        case 3:\r\n            argName = optional ? 'third' : 'Third';\r\n            break;\r\n        case 4:\r\n            argName = optional ? 'fourth' : 'Fourth';\r\n            break;\r\n        default:\r\n            throw new Error('errorPrefix called with argumentNumber > 4.  Need to update it?');\r\n    }\r\n    var error = fnName + ' failed: ';\r\n    error += argName + ' argument ';\r\n    return error;\r\n}\r\n/**\r\n * @param {!string} fnName\r\n * @param {!number} argumentNumber\r\n * @param {!string} namespace\r\n * @param {boolean} optional\r\n */\r\nfunction validateNamespace(fnName, argumentNumber, namespace, optional) {\r\n    if (optional && !namespace)\r\n        return;\r\n    if (typeof namespace !== 'string') {\r\n        //TODO: I should do more validation here. We only allow certain chars in namespaces.\r\n        throw new Error(errorPrefix(fnName, argumentNumber, optional) +\r\n            'must be a valid firebase namespace.');\r\n    }\r\n}\r\nfunction validateCallback(fnName, argumentNumber, callback, optional) {\r\n    if (optional && !callback)\r\n        return;\r\n    if (typeof callback !== 'function')\r\n        throw new Error(errorPrefix(fnName, argumentNumber, optional) +\r\n            'must be a valid function.');\r\n}\r\nfunction validateContextObject(fnName, argumentNumber, context, optional) {\r\n    if (optional && !context)\r\n        return;\r\n    if (typeof context !== 'object' || context === null)\r\n        throw new Error(errorPrefix(fnName, argumentNumber, optional) +\r\n            'must be a valid context object.');\r\n}\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n// Code originally came from goog.crypt.stringToUtf8ByteArray, but for some reason they\r\n// automatically replaced '\\r\\n' with '\\n', and they didn't handle surrogate pairs,\r\n// so it's been modified.\r\n// Note that not all Unicode characters appear as single characters in JavaScript strings.\r\n// fromCharCode returns the UTF-16 encoding of a character - so some Unicode characters\r\n// use 2 characters in Javascript.  All 4-byte UTF-8 characters begin with a first\r\n// character in the range 0xD800 - 0xDBFF (the first character of a so-called surrogate\r\n// pair).\r\n// See http://www.ecma-international.org/ecma-262/5.1/#sec-15.1.3\r\n/**\r\n * @param {string} str\r\n * @return {Array}\r\n */\r\nvar stringToByteArray$1 = function (str) {\r\n    var out = [], p = 0;\r\n    for (var i = 0; i < str.length; i++) {\r\n        var c = str.charCodeAt(i);\r\n        // Is this the lead surrogate in a surrogate pair?\r\n        if (c >= 0xd800 && c <= 0xdbff) {\r\n            var high = c - 0xd800; // the high 10 bits.\r\n            i++;\r\n            assert(i < str.length, 'Surrogate pair missing trail surrogate.');\r\n            var low = str.charCodeAt(i) - 0xdc00; // the low 10 bits.\r\n            c = 0x10000 + (high << 10) + low;\r\n        }\r\n        if (c < 128) {\r\n            out[p++] = c;\r\n        }\r\n        else if (c < 2048) {\r\n            out[p++] = (c >> 6) | 192;\r\n            out[p++] = (c & 63) | 128;\r\n        }\r\n        else if (c < 65536) {\r\n            out[p++] = (c >> 12) | 224;\r\n            out[p++] = ((c >> 6) & 63) | 128;\r\n            out[p++] = (c & 63) | 128;\r\n        }\r\n        else {\r\n            out[p++] = (c >> 18) | 240;\r\n            out[p++] = ((c >> 12) & 63) | 128;\r\n            out[p++] = ((c >> 6) & 63) | 128;\r\n            out[p++] = (c & 63) | 128;\r\n        }\r\n    }\r\n    return out;\r\n};\r\n/**\r\n * Calculate length without actually converting; useful for doing cheaper validation.\r\n * @param {string} str\r\n * @return {number}\r\n */\r\nvar stringLength = function (str) {\r\n    var p = 0;\r\n    for (var i = 0; i < str.length; i++) {\r\n        var c = str.charCodeAt(i);\r\n        if (c < 128) {\r\n            p++;\r\n        }\r\n        else if (c < 2048) {\r\n            p += 2;\r\n        }\r\n        else if (c >= 0xd800 && c <= 0xdbff) {\r\n            // Lead surrogate of a surrogate pair.  The pair together will take 4 bytes to represent.\r\n            p += 4;\r\n            i++; // skip trail surrogate.\r\n        }\r\n        else {\r\n            p += 3;\r\n        }\r\n    }\r\n    return p;\r\n};\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\nexports.assert = assert;\nexports.assertionError = assertionError;\nexports.base64 = base64;\nexports.base64Decode = base64Decode;\nexports.base64Encode = base64Encode;\nexports.CONSTANTS = CONSTANTS;\nexports.deepCopy = deepCopy;\nexports.deepExtend = deepExtend;\nexports.patchProperty = patchProperty;\nexports.Deferred = Deferred;\nexports.getUA = getUA;\nexports.isMobileCordova = isMobileCordova;\nexports.isNodeSdk = isNodeSdk;\nexports.isReactNative = isReactNative;\nexports.ErrorFactory = ErrorFactory;\nexports.FirebaseError = FirebaseError;\nexports.patchCapture = patchCapture;\nexports.jsonEval = jsonEval;\nexports.stringify = stringify;\nexports.decode = decode;\nexports.isAdmin = isAdmin;\nexports.issuedAtTime = issuedAtTime;\nexports.isValidFormat = isValidFormat;\nexports.isValidTimestamp = isValidTimestamp;\nexports.clone = clone;\nexports.contains = contains;\nexports.every = every;\nexports.extend = extend;\nexports.findKey = findKey;\nexports.findValue = findValue;\nexports.forEach = forEach;\nexports.getAnyKey = getAnyKey;\nexports.getCount = getCount;\nexports.getValues = getValues;\nexports.isEmpty = isEmpty;\nexports.isNonNullObject = isNonNullObject;\nexports.map = map;\nexports.safeGet = safeGet;\nexports.querystring = querystring;\nexports.querystringDecode = querystringDecode;\nexports.Sha1 = Sha1;\nexports.async = async;\nexports.createSubscribe = createSubscribe;\nexports.errorPrefix = errorPrefix;\nexports.validateArgCount = validateArgCount;\nexports.validateCallback = validateCallback;\nexports.validateContextObject = validateContextObject;\nexports.validateNamespace = validateNamespace;\nexports.stringLength = stringLength;\nexports.stringToByteArray = stringToByteArray$1;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/@firebase/util/dist/index.cjs.js\n// module id = 10\n// module chunks = 0","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = Object.setPrototypeOf ||\r\n    ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n    function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = Object.assign || function __assign(t) {\r\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n        s = arguments[i];\r\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n    }\r\n    return t;\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)\r\n            t[p[i]] = s[p[i]];\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = y[op[0] & 2 ? \"return\" : op[0] ? \"throw\" : \"next\"]) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [0, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r);  }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { if (o[n]) i[n] = function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; }; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator];\r\n    return m ? m.call(o) : typeof __values === \"function\" ? __values(o) : o[Symbol.iterator]();\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/tslib/tslib.es6.js\n// module id = 11\n// module chunks = 0","// @remove-on-eject-begin\n/**\n * Copyright (c) 2015-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n// @remove-on-eject-end\n'use strict';\n\nif (typeof Promise === 'undefined') {\n  // Rejection tracking prevents a common issue where React gets into an\n  // inconsistent state due to an error, but it gets swallowed by a Promise,\n  // and the user has no idea what causes React's erratic future behavior.\n  require('promise/lib/rejection-tracking').enable();\n  window.Promise = require('promise/lib/es6-extensions.js');\n}\n\n// fetch() polyfill for making API calls.\nrequire('whatwg-fetch');\n\n// Object.assign() is commonly used with React.\n// It will use the native implementation if it's present and isn't buggy.\nObject.assign = require('object-assign');\n\n// In tests, polyfill requestAnimationFrame since jsdom doesn't provide it yet.\n// We don't polyfill it in the browser--this is user's responsibility.\nif (process.env.NODE_ENV === 'test') {\n  require('raf').polyfill(global);\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/react-scripts/config/polyfills.js\n// module id = 13\n// module chunks = 0","'use strict';\n\nvar Promise = require('./core');\n\nvar DEFAULT_WHITELIST = [\n  ReferenceError,\n  TypeError,\n  RangeError\n];\n\nvar enabled = false;\nexports.disable = disable;\nfunction disable() {\n  enabled = false;\n  Promise._47 = null;\n  Promise._71 = null;\n}\n\nexports.enable = enable;\nfunction enable(options) {\n  options = options || {};\n  if (enabled) disable();\n  enabled = true;\n  var id = 0;\n  var displayId = 0;\n  var rejections = {};\n  Promise._47 = function (promise) {\n    if (\n      promise._83 === 2 && // IS REJECTED\n      rejections[promise._56]\n    ) {\n      if (rejections[promise._56].logged) {\n        onHandled(promise._56);\n      } else {\n        clearTimeout(rejections[promise._56].timeout);\n      }\n      delete rejections[promise._56];\n    }\n  };\n  Promise._71 = function (promise, err) {\n    if (promise._75 === 0) { // not yet handled\n      promise._56 = id++;\n      rejections[promise._56] = {\n        displayId: null,\n        error: err,\n        timeout: setTimeout(\n          onUnhandled.bind(null, promise._56),\n          // For reference errors and type errors, this almost always\n          // means the programmer made a mistake, so log them after just\n          // 100ms\n          // otherwise, wait 2 seconds to see if they get handled\n          matchWhitelist(err, DEFAULT_WHITELIST)\n            ? 100\n            : 2000\n        ),\n        logged: false\n      };\n    }\n  };\n  function onUnhandled(id) {\n    if (\n      options.allRejections ||\n      matchWhitelist(\n        rejections[id].error,\n        options.whitelist || DEFAULT_WHITELIST\n      )\n    ) {\n      rejections[id].displayId = displayId++;\n      if (options.onUnhandled) {\n        rejections[id].logged = true;\n        options.onUnhandled(\n          rejections[id].displayId,\n          rejections[id].error\n        );\n      } else {\n        rejections[id].logged = true;\n        logError(\n          rejections[id].displayId,\n          rejections[id].error\n        );\n      }\n    }\n  }\n  function onHandled(id) {\n    if (rejections[id].logged) {\n      if (options.onHandled) {\n        options.onHandled(rejections[id].displayId, rejections[id].error);\n      } else if (!rejections[id].onUnhandled) {\n        console.warn(\n          'Promise Rejection Handled (id: ' + rejections[id].displayId + '):'\n        );\n        console.warn(\n          '  This means you can ignore any previous messages of the form \"Possible Unhandled Promise Rejection\" with id ' +\n          rejections[id].displayId + '.'\n        );\n      }\n    }\n  }\n}\n\nfunction logError(id, error) {\n  console.warn('Possible Unhandled Promise Rejection (id: ' + id + '):');\n  var errStr = (error && (error.stack || error)) + '';\n  errStr.split('\\n').forEach(function (line) {\n    console.warn('  ' + line);\n  });\n}\n\nfunction matchWhitelist(error, list) {\n  return list.some(function (cls) {\n    return error instanceof cls;\n  });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/react-scripts/node_modules/promise/lib/rejection-tracking.js\n// module id = 14\n// module chunks = 0","\"use strict\";\n\n// Use the fastest means possible to execute a task in its own turn, with\n// priority over other events including IO, animation, reflow, and redraw\n// events in browsers.\n//\n// An exception thrown by a task will permanently interrupt the processing of\n// subsequent tasks. The higher level `asap` function ensures that if an\n// exception is thrown by a task, that the task queue will continue flushing as\n// soon as possible, but if you use `rawAsap` directly, you are responsible to\n// either ensure that no exceptions are thrown from your task, or to manually\n// call `rawAsap.requestFlush` if an exception is thrown.\nmodule.exports = rawAsap;\nfunction rawAsap(task) {\n    if (!queue.length) {\n        requestFlush();\n        flushing = true;\n    }\n    // Equivalent to push, but avoids a function call.\n    queue[queue.length] = task;\n}\n\nvar queue = [];\n// Once a flush has been requested, no further calls to `requestFlush` are\n// necessary until the next `flush` completes.\nvar flushing = false;\n// `requestFlush` is an implementation-specific method that attempts to kick\n// off a `flush` event as quickly as possible. `flush` will attempt to exhaust\n// the event queue before yielding to the browser's own event loop.\nvar requestFlush;\n// The position of the next task to execute in the task queue. This is\n// preserved between calls to `flush` so that it can be resumed if\n// a task throws an exception.\nvar index = 0;\n// If a task schedules additional tasks recursively, the task queue can grow\n// unbounded. To prevent memory exhaustion, the task queue will periodically\n// truncate already-completed tasks.\nvar capacity = 1024;\n\n// The flush function processes all tasks that have been scheduled with\n// `rawAsap` unless and until one of those tasks throws an exception.\n// If a task throws an exception, `flush` ensures that its state will remain\n// consistent and will resume where it left off when called again.\n// However, `flush` does not make any arrangements to be called again if an\n// exception is thrown.\nfunction flush() {\n    while (index < queue.length) {\n        var currentIndex = index;\n        // Advance the index before calling the task. This ensures that we will\n        // begin flushing on the next task the task throws an error.\n        index = index + 1;\n        queue[currentIndex].call();\n        // Prevent leaking memory for long chains of recursive calls to `asap`.\n        // If we call `asap` within tasks scheduled by `asap`, the queue will\n        // grow, but to avoid an O(n) walk for every task we execute, we don't\n        // shift tasks off the queue after they have been executed.\n        // Instead, we periodically shift 1024 tasks off the queue.\n        if (index > capacity) {\n            // Manually shift all values starting at the index back to the\n            // beginning of the queue.\n            for (var scan = 0, newLength = queue.length - index; scan < newLength; scan++) {\n                queue[scan] = queue[scan + index];\n            }\n            queue.length -= index;\n            index = 0;\n        }\n    }\n    queue.length = 0;\n    index = 0;\n    flushing = false;\n}\n\n// `requestFlush` is implemented using a strategy based on data collected from\n// every available SauceLabs Selenium web driver worker at time of writing.\n// https://docs.google.com/spreadsheets/d/1mG-5UYGup5qxGdEMWkhP6BWCz053NUb2E1QoUTU16uA/edit#gid=783724593\n\n// Safari 6 and 6.1 for desktop, iPad, and iPhone are the only browsers that\n// have WebKitMutationObserver but not un-prefixed MutationObserver.\n// Must use `global` or `self` instead of `window` to work in both frames and web\n// workers. `global` is a provision of Browserify, Mr, Mrs, or Mop.\n\n/* globals self */\nvar scope = typeof global !== \"undefined\" ? global : self;\nvar BrowserMutationObserver = scope.MutationObserver || scope.WebKitMutationObserver;\n\n// MutationObservers are desirable because they have high priority and work\n// reliably everywhere they are implemented.\n// They are implemented in all modern browsers.\n//\n// - Android 4-4.3\n// - Chrome 26-34\n// - Firefox 14-29\n// - Internet Explorer 11\n// - iPad Safari 6-7.1\n// - iPhone Safari 7-7.1\n// - Safari 6-7\nif (typeof BrowserMutationObserver === \"function\") {\n    requestFlush = makeRequestCallFromMutationObserver(flush);\n\n// MessageChannels are desirable because they give direct access to the HTML\n// task queue, are implemented in Internet Explorer 10, Safari 5.0-1, and Opera\n// 11-12, and in web workers in many engines.\n// Although message channels yield to any queued rendering and IO tasks, they\n// would be better than imposing the 4ms delay of timers.\n// However, they do not work reliably in Internet Explorer or Safari.\n\n// Internet Explorer 10 is the only browser that has setImmediate but does\n// not have MutationObservers.\n// Although setImmediate yields to the browser's renderer, it would be\n// preferrable to falling back to setTimeout since it does not have\n// the minimum 4ms penalty.\n// Unfortunately there appears to be a bug in Internet Explorer 10 Mobile (and\n// Desktop to a lesser extent) that renders both setImmediate and\n// MessageChannel useless for the purposes of ASAP.\n// https://github.com/kriskowal/q/issues/396\n\n// Timers are implemented universally.\n// We fall back to timers in workers in most engines, and in foreground\n// contexts in the following browsers.\n// However, note that even this simple case requires nuances to operate in a\n// broad spectrum of browsers.\n//\n// - Firefox 3-13\n// - Internet Explorer 6-9\n// - iPad Safari 4.3\n// - Lynx 2.8.7\n} else {\n    requestFlush = makeRequestCallFromTimer(flush);\n}\n\n// `requestFlush` requests that the high priority event queue be flushed as\n// soon as possible.\n// This is useful to prevent an error thrown in a task from stalling the event\n// queue if the exception handled by Node.js’s\n// `process.on(\"uncaughtException\")` or by a domain.\nrawAsap.requestFlush = requestFlush;\n\n// To request a high priority event, we induce a mutation observer by toggling\n// the text of a text node between \"1\" and \"-1\".\nfunction makeRequestCallFromMutationObserver(callback) {\n    var toggle = 1;\n    var observer = new BrowserMutationObserver(callback);\n    var node = document.createTextNode(\"\");\n    observer.observe(node, {characterData: true});\n    return function requestCall() {\n        toggle = -toggle;\n        node.data = toggle;\n    };\n}\n\n// The message channel technique was discovered by Malte Ubl and was the\n// original foundation for this library.\n// http://www.nonblocking.io/2011/06/windownexttick.html\n\n// Safari 6.0.5 (at least) intermittently fails to create message ports on a\n// page's first load. Thankfully, this version of Safari supports\n// MutationObservers, so we don't need to fall back in that case.\n\n// function makeRequestCallFromMessageChannel(callback) {\n//     var channel = new MessageChannel();\n//     channel.port1.onmessage = callback;\n//     return function requestCall() {\n//         channel.port2.postMessage(0);\n//     };\n// }\n\n// For reasons explained above, we are also unable to use `setImmediate`\n// under any circumstances.\n// Even if we were, there is another bug in Internet Explorer 10.\n// It is not sufficient to assign `setImmediate` to `requestFlush` because\n// `setImmediate` must be called *by name* and therefore must be wrapped in a\n// closure.\n// Never forget.\n\n// function makeRequestCallFromSetImmediate(callback) {\n//     return function requestCall() {\n//         setImmediate(callback);\n//     };\n// }\n\n// Safari 6.0 has a problem where timers will get lost while the user is\n// scrolling. This problem does not impact ASAP because Safari 6.0 supports\n// mutation observers, so that implementation is used instead.\n// However, if we ever elect to use timers in Safari, the prevalent work-around\n// is to add a scroll event listener that calls for a flush.\n\n// `setTimeout` does not call the passed callback if the delay is less than\n// approximately 7 in web workers in Firefox 8 through 18, and sometimes not\n// even then.\n\nfunction makeRequestCallFromTimer(callback) {\n    return function requestCall() {\n        // We dispatch a timeout with a specified delay of 0 for engines that\n        // can reliably accommodate that request. This will usually be snapped\n        // to a 4 milisecond delay, but once we're flushing, there's no delay\n        // between events.\n        var timeoutHandle = setTimeout(handleTimer, 0);\n        // However, since this timer gets frequently dropped in Firefox\n        // workers, we enlist an interval handle that will try to fire\n        // an event 20 times per second until it succeeds.\n        var intervalHandle = setInterval(handleTimer, 50);\n\n        function handleTimer() {\n            // Whichever timer succeeds will cancel both timers and\n            // execute the callback.\n            clearTimeout(timeoutHandle);\n            clearInterval(intervalHandle);\n            callback();\n        }\n    };\n}\n\n// This is for `asap.js` only.\n// Its name will be periodically randomized to break any code that depends on\n// its existence.\nrawAsap.makeRequestCallFromTimer = makeRequestCallFromTimer;\n\n// ASAP was originally a nextTick shim included in Q. This was factored out\n// into this ASAP package. It was later adapted to RSVP which made further\n// amendments. These decisions, particularly to marginalize MessageChannel and\n// to capture the MutationObserver implementation in a closure, were integrated\n// back into ASAP proper.\n// https://github.com/tildeio/rsvp.js/blob/cddf7232546a9cf858524b75cde6f9edf72620a7/lib/rsvp/asap.js\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/asap/browser-raw.js\n// module id = 15\n// module chunks = 0","'use strict';\n\n//This file contains the ES6 extensions to the core Promises/A+ API\n\nvar Promise = require('./core.js');\n\nmodule.exports = Promise;\n\n/* Static Functions */\n\nvar TRUE = valuePromise(true);\nvar FALSE = valuePromise(false);\nvar NULL = valuePromise(null);\nvar UNDEFINED = valuePromise(undefined);\nvar ZERO = valuePromise(0);\nvar EMPTYSTRING = valuePromise('');\n\nfunction valuePromise(value) {\n  var p = new Promise(Promise._44);\n  p._83 = 1;\n  p._18 = value;\n  return p;\n}\nPromise.resolve = function (value) {\n  if (value instanceof Promise) return value;\n\n  if (value === null) return NULL;\n  if (value === undefined) return UNDEFINED;\n  if (value === true) return TRUE;\n  if (value === false) return FALSE;\n  if (value === 0) return ZERO;\n  if (value === '') return EMPTYSTRING;\n\n  if (typeof value === 'object' || typeof value === 'function') {\n    try {\n      var then = value.then;\n      if (typeof then === 'function') {\n        return new Promise(then.bind(value));\n      }\n    } catch (ex) {\n      return new Promise(function (resolve, reject) {\n        reject(ex);\n      });\n    }\n  }\n  return valuePromise(value);\n};\n\nPromise.all = function (arr) {\n  var args = Array.prototype.slice.call(arr);\n\n  return new Promise(function (resolve, reject) {\n    if (args.length === 0) return resolve([]);\n    var remaining = args.length;\n    function res(i, val) {\n      if (val && (typeof val === 'object' || typeof val === 'function')) {\n        if (val instanceof Promise && val.then === Promise.prototype.then) {\n          while (val._83 === 3) {\n            val = val._18;\n          }\n          if (val._83 === 1) return res(i, val._18);\n          if (val._83 === 2) reject(val._18);\n          val.then(function (val) {\n            res(i, val);\n          }, reject);\n          return;\n        } else {\n          var then = val.then;\n          if (typeof then === 'function') {\n            var p = new Promise(then.bind(val));\n            p.then(function (val) {\n              res(i, val);\n            }, reject);\n            return;\n          }\n        }\n      }\n      args[i] = val;\n      if (--remaining === 0) {\n        resolve(args);\n      }\n    }\n    for (var i = 0; i < args.length; i++) {\n      res(i, args[i]);\n    }\n  });\n};\n\nPromise.reject = function (value) {\n  return new Promise(function (resolve, reject) {\n    reject(value);\n  });\n};\n\nPromise.race = function (values) {\n  return new Promise(function (resolve, reject) {\n    values.forEach(function(value){\n      Promise.resolve(value).then(resolve, reject);\n    });\n  });\n};\n\n/* Prototype Methods */\n\nPromise.prototype['catch'] = function (onRejected) {\n  return this.then(null, onRejected);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/react-scripts/node_modules/promise/lib/es6-extensions.js\n// module id = 16\n// module chunks = 0","(function(self) {\n  'use strict';\n\n  if (self.fetch) {\n    return\n  }\n\n  var support = {\n    searchParams: 'URLSearchParams' in self,\n    iterable: 'Symbol' in self && 'iterator' in Symbol,\n    blob: 'FileReader' in self && 'Blob' in self && (function() {\n      try {\n        new Blob()\n        return true\n      } catch(e) {\n        return false\n      }\n    })(),\n    formData: 'FormData' in self,\n    arrayBuffer: 'ArrayBuffer' in self\n  }\n\n  if (support.arrayBuffer) {\n    var viewClasses = [\n      '[object Int8Array]',\n      '[object Uint8Array]',\n      '[object Uint8ClampedArray]',\n      '[object Int16Array]',\n      '[object Uint16Array]',\n      '[object Int32Array]',\n      '[object Uint32Array]',\n      '[object Float32Array]',\n      '[object Float64Array]'\n    ]\n\n    var isDataView = function(obj) {\n      return obj && DataView.prototype.isPrototypeOf(obj)\n    }\n\n    var isArrayBufferView = ArrayBuffer.isView || function(obj) {\n      return obj && viewClasses.indexOf(Object.prototype.toString.call(obj)) > -1\n    }\n  }\n\n  function normalizeName(name) {\n    if (typeof name !== 'string') {\n      name = String(name)\n    }\n    if (/[^a-z0-9\\-#$%&'*+.\\^_`|~]/i.test(name)) {\n      throw new TypeError('Invalid character in header field name')\n    }\n    return name.toLowerCase()\n  }\n\n  function normalizeValue(value) {\n    if (typeof value !== 'string') {\n      value = String(value)\n    }\n    return value\n  }\n\n  // Build a destructive iterator for the value list\n  function iteratorFor(items) {\n    var iterator = {\n      next: function() {\n        var value = items.shift()\n        return {done: value === undefined, value: value}\n      }\n    }\n\n    if (support.iterable) {\n      iterator[Symbol.iterator] = function() {\n        return iterator\n      }\n    }\n\n    return iterator\n  }\n\n  function Headers(headers) {\n    this.map = {}\n\n    if (headers instanceof Headers) {\n      headers.forEach(function(value, name) {\n        this.append(name, value)\n      }, this)\n    } else if (Array.isArray(headers)) {\n      headers.forEach(function(header) {\n        this.append(header[0], header[1])\n      }, this)\n    } else if (headers) {\n      Object.getOwnPropertyNames(headers).forEach(function(name) {\n        this.append(name, headers[name])\n      }, this)\n    }\n  }\n\n  Headers.prototype.append = function(name, value) {\n    name = normalizeName(name)\n    value = normalizeValue(value)\n    var oldValue = this.map[name]\n    this.map[name] = oldValue ? oldValue+','+value : value\n  }\n\n  Headers.prototype['delete'] = function(name) {\n    delete this.map[normalizeName(name)]\n  }\n\n  Headers.prototype.get = function(name) {\n    name = normalizeName(name)\n    return this.has(name) ? this.map[name] : null\n  }\n\n  Headers.prototype.has = function(name) {\n    return this.map.hasOwnProperty(normalizeName(name))\n  }\n\n  Headers.prototype.set = function(name, value) {\n    this.map[normalizeName(name)] = normalizeValue(value)\n  }\n\n  Headers.prototype.forEach = function(callback, thisArg) {\n    for (var name in this.map) {\n      if (this.map.hasOwnProperty(name)) {\n        callback.call(thisArg, this.map[name], name, this)\n      }\n    }\n  }\n\n  Headers.prototype.keys = function() {\n    var items = []\n    this.forEach(function(value, name) { items.push(name) })\n    return iteratorFor(items)\n  }\n\n  Headers.prototype.values = function() {\n    var items = []\n    this.forEach(function(value) { items.push(value) })\n    return iteratorFor(items)\n  }\n\n  Headers.prototype.entries = function() {\n    var items = []\n    this.forEach(function(value, name) { items.push([name, value]) })\n    return iteratorFor(items)\n  }\n\n  if (support.iterable) {\n    Headers.prototype[Symbol.iterator] = Headers.prototype.entries\n  }\n\n  function consumed(body) {\n    if (body.bodyUsed) {\n      return Promise.reject(new TypeError('Already read'))\n    }\n    body.bodyUsed = true\n  }\n\n  function fileReaderReady(reader) {\n    return new Promise(function(resolve, reject) {\n      reader.onload = function() {\n        resolve(reader.result)\n      }\n      reader.onerror = function() {\n        reject(reader.error)\n      }\n    })\n  }\n\n  function readBlobAsArrayBuffer(blob) {\n    var reader = new FileReader()\n    var promise = fileReaderReady(reader)\n    reader.readAsArrayBuffer(blob)\n    return promise\n  }\n\n  function readBlobAsText(blob) {\n    var reader = new FileReader()\n    var promise = fileReaderReady(reader)\n    reader.readAsText(blob)\n    return promise\n  }\n\n  function readArrayBufferAsText(buf) {\n    var view = new Uint8Array(buf)\n    var chars = new Array(view.length)\n\n    for (var i = 0; i < view.length; i++) {\n      chars[i] = String.fromCharCode(view[i])\n    }\n    return chars.join('')\n  }\n\n  function bufferClone(buf) {\n    if (buf.slice) {\n      return buf.slice(0)\n    } else {\n      var view = new Uint8Array(buf.byteLength)\n      view.set(new Uint8Array(buf))\n      return view.buffer\n    }\n  }\n\n  function Body() {\n    this.bodyUsed = false\n\n    this._initBody = function(body) {\n      this._bodyInit = body\n      if (!body) {\n        this._bodyText = ''\n      } else if (typeof body === 'string') {\n        this._bodyText = body\n      } else if (support.blob && Blob.prototype.isPrototypeOf(body)) {\n        this._bodyBlob = body\n      } else if (support.formData && FormData.prototype.isPrototypeOf(body)) {\n        this._bodyFormData = body\n      } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n        this._bodyText = body.toString()\n      } else if (support.arrayBuffer && support.blob && isDataView(body)) {\n        this._bodyArrayBuffer = bufferClone(body.buffer)\n        // IE 10-11 can't handle a DataView body.\n        this._bodyInit = new Blob([this._bodyArrayBuffer])\n      } else if (support.arrayBuffer && (ArrayBuffer.prototype.isPrototypeOf(body) || isArrayBufferView(body))) {\n        this._bodyArrayBuffer = bufferClone(body)\n      } else {\n        throw new Error('unsupported BodyInit type')\n      }\n\n      if (!this.headers.get('content-type')) {\n        if (typeof body === 'string') {\n          this.headers.set('content-type', 'text/plain;charset=UTF-8')\n        } else if (this._bodyBlob && this._bodyBlob.type) {\n          this.headers.set('content-type', this._bodyBlob.type)\n        } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n          this.headers.set('content-type', 'application/x-www-form-urlencoded;charset=UTF-8')\n        }\n      }\n    }\n\n    if (support.blob) {\n      this.blob = function() {\n        var rejected = consumed(this)\n        if (rejected) {\n          return rejected\n        }\n\n        if (this._bodyBlob) {\n          return Promise.resolve(this._bodyBlob)\n        } else if (this._bodyArrayBuffer) {\n          return Promise.resolve(new Blob([this._bodyArrayBuffer]))\n        } else if (this._bodyFormData) {\n          throw new Error('could not read FormData body as blob')\n        } else {\n          return Promise.resolve(new Blob([this._bodyText]))\n        }\n      }\n\n      this.arrayBuffer = function() {\n        if (this._bodyArrayBuffer) {\n          return consumed(this) || Promise.resolve(this._bodyArrayBuffer)\n        } else {\n          return this.blob().then(readBlobAsArrayBuffer)\n        }\n      }\n    }\n\n    this.text = function() {\n      var rejected = consumed(this)\n      if (rejected) {\n        return rejected\n      }\n\n      if (this._bodyBlob) {\n        return readBlobAsText(this._bodyBlob)\n      } else if (this._bodyArrayBuffer) {\n        return Promise.resolve(readArrayBufferAsText(this._bodyArrayBuffer))\n      } else if (this._bodyFormData) {\n        throw new Error('could not read FormData body as text')\n      } else {\n        return Promise.resolve(this._bodyText)\n      }\n    }\n\n    if (support.formData) {\n      this.formData = function() {\n        return this.text().then(decode)\n      }\n    }\n\n    this.json = function() {\n      return this.text().then(JSON.parse)\n    }\n\n    return this\n  }\n\n  // HTTP methods whose capitalization should be normalized\n  var methods = ['DELETE', 'GET', 'HEAD', 'OPTIONS', 'POST', 'PUT']\n\n  function normalizeMethod(method) {\n    var upcased = method.toUpperCase()\n    return (methods.indexOf(upcased) > -1) ? upcased : method\n  }\n\n  function Request(input, options) {\n    options = options || {}\n    var body = options.body\n\n    if (input instanceof Request) {\n      if (input.bodyUsed) {\n        throw new TypeError('Already read')\n      }\n      this.url = input.url\n      this.credentials = input.credentials\n      if (!options.headers) {\n        this.headers = new Headers(input.headers)\n      }\n      this.method = input.method\n      this.mode = input.mode\n      if (!body && input._bodyInit != null) {\n        body = input._bodyInit\n        input.bodyUsed = true\n      }\n    } else {\n      this.url = String(input)\n    }\n\n    this.credentials = options.credentials || this.credentials || 'omit'\n    if (options.headers || !this.headers) {\n      this.headers = new Headers(options.headers)\n    }\n    this.method = normalizeMethod(options.method || this.method || 'GET')\n    this.mode = options.mode || this.mode || null\n    this.referrer = null\n\n    if ((this.method === 'GET' || this.method === 'HEAD') && body) {\n      throw new TypeError('Body not allowed for GET or HEAD requests')\n    }\n    this._initBody(body)\n  }\n\n  Request.prototype.clone = function() {\n    return new Request(this, { body: this._bodyInit })\n  }\n\n  function decode(body) {\n    var form = new FormData()\n    body.trim().split('&').forEach(function(bytes) {\n      if (bytes) {\n        var split = bytes.split('=')\n        var name = split.shift().replace(/\\+/g, ' ')\n        var value = split.join('=').replace(/\\+/g, ' ')\n        form.append(decodeURIComponent(name), decodeURIComponent(value))\n      }\n    })\n    return form\n  }\n\n  function parseHeaders(rawHeaders) {\n    var headers = new Headers()\n    rawHeaders.split(/\\r?\\n/).forEach(function(line) {\n      var parts = line.split(':')\n      var key = parts.shift().trim()\n      if (key) {\n        var value = parts.join(':').trim()\n        headers.append(key, value)\n      }\n    })\n    return headers\n  }\n\n  Body.call(Request.prototype)\n\n  function Response(bodyInit, options) {\n    if (!options) {\n      options = {}\n    }\n\n    this.type = 'default'\n    this.status = 'status' in options ? options.status : 200\n    this.ok = this.status >= 200 && this.status < 300\n    this.statusText = 'statusText' in options ? options.statusText : 'OK'\n    this.headers = new Headers(options.headers)\n    this.url = options.url || ''\n    this._initBody(bodyInit)\n  }\n\n  Body.call(Response.prototype)\n\n  Response.prototype.clone = function() {\n    return new Response(this._bodyInit, {\n      status: this.status,\n      statusText: this.statusText,\n      headers: new Headers(this.headers),\n      url: this.url\n    })\n  }\n\n  Response.error = function() {\n    var response = new Response(null, {status: 0, statusText: ''})\n    response.type = 'error'\n    return response\n  }\n\n  var redirectStatuses = [301, 302, 303, 307, 308]\n\n  Response.redirect = function(url, status) {\n    if (redirectStatuses.indexOf(status) === -1) {\n      throw new RangeError('Invalid status code')\n    }\n\n    return new Response(null, {status: status, headers: {location: url}})\n  }\n\n  self.Headers = Headers\n  self.Request = Request\n  self.Response = Response\n\n  self.fetch = function(input, init) {\n    return new Promise(function(resolve, reject) {\n      var request = new Request(input, init)\n      var xhr = new XMLHttpRequest()\n\n      xhr.onload = function() {\n        var options = {\n          status: xhr.status,\n          statusText: xhr.statusText,\n          headers: parseHeaders(xhr.getAllResponseHeaders() || '')\n        }\n        options.url = 'responseURL' in xhr ? xhr.responseURL : options.headers.get('X-Request-URL')\n        var body = 'response' in xhr ? xhr.response : xhr.responseText\n        resolve(new Response(body, options))\n      }\n\n      xhr.onerror = function() {\n        reject(new TypeError('Network request failed'))\n      }\n\n      xhr.ontimeout = function() {\n        reject(new TypeError('Network request failed'))\n      }\n\n      xhr.open(request.method, request.url, true)\n\n      if (request.credentials === 'include') {\n        xhr.withCredentials = true\n      }\n\n      if ('responseType' in xhr && support.blob) {\n        xhr.responseType = 'blob'\n      }\n\n      request.headers.forEach(function(value, name) {\n        xhr.setRequestHeader(name, value)\n      })\n\n      xhr.send(typeof request._bodyInit === 'undefined' ? null : request._bodyInit)\n    })\n  }\n  self.fetch.polyfill = true\n})(typeof self !== 'undefined' ? self : this);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/react-scripts/node_modules/whatwg-fetch/fetch.js\n// module id = 17\n// module chunks = 0","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport registerServiceWorker from './registerServiceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\nregisterServiceWorker();\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","/** @license React v16.4.0\n * react.production.min.js\n *\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';var k=require(\"object-assign\"),n=require(\"fbjs/lib/invariant\"),p=require(\"fbjs/lib/emptyObject\"),q=require(\"fbjs/lib/emptyFunction\"),r=\"function\"===typeof Symbol&&Symbol.for,t=r?Symbol.for(\"react.element\"):60103,u=r?Symbol.for(\"react.portal\"):60106,v=r?Symbol.for(\"react.fragment\"):60107,w=r?Symbol.for(\"react.strict_mode\"):60108,x=r?Symbol.for(\"react.profiler\"):60114,y=r?Symbol.for(\"react.provider\"):60109,z=r?Symbol.for(\"react.context\"):60110,A=r?Symbol.for(\"react.async_mode\"):60111,B=\nr?Symbol.for(\"react.forward_ref\"):60112;r&&Symbol.for(\"react.timeout\");var C=\"function\"===typeof Symbol&&Symbol.iterator;function D(a){for(var b=arguments.length-1,e=\"https://reactjs.org/docs/error-decoder.html?invariant=\"+a,c=0;c<b;c++)e+=\"&args[]=\"+encodeURIComponent(arguments[c+1]);n(!1,\"Minified React error #\"+a+\"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. \",e)}\nvar E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}};function F(a,b,e){this.props=a;this.context=b;this.refs=p;this.updater=e||E}F.prototype.isReactComponent={};F.prototype.setState=function(a,b){\"object\"!==typeof a&&\"function\"!==typeof a&&null!=a?D(\"85\"):void 0;this.updater.enqueueSetState(this,a,b,\"setState\")};F.prototype.forceUpdate=function(a){this.updater.enqueueForceUpdate(this,a,\"forceUpdate\")};function G(){}\nG.prototype=F.prototype;function H(a,b,e){this.props=a;this.context=b;this.refs=p;this.updater=e||E}var I=H.prototype=new G;I.constructor=H;k(I,F.prototype);I.isPureReactComponent=!0;var J={current:null},K=Object.prototype.hasOwnProperty,L={key:!0,ref:!0,__self:!0,__source:!0};\nfunction M(a,b,e){var c=void 0,d={},g=null,h=null;if(null!=b)for(c in void 0!==b.ref&&(h=b.ref),void 0!==b.key&&(g=\"\"+b.key),b)K.call(b,c)&&!L.hasOwnProperty(c)&&(d[c]=b[c]);var f=arguments.length-2;if(1===f)d.children=e;else if(1<f){for(var l=Array(f),m=0;m<f;m++)l[m]=arguments[m+2];d.children=l}if(a&&a.defaultProps)for(c in f=a.defaultProps,f)void 0===d[c]&&(d[c]=f[c]);return{$$typeof:t,type:a,key:g,ref:h,props:d,_owner:J.current}}\nfunction N(a){return\"object\"===typeof a&&null!==a&&a.$$typeof===t}function escape(a){var b={\"=\":\"=0\",\":\":\"=2\"};return\"$\"+(\"\"+a).replace(/[=:]/g,function(a){return b[a]})}var O=/\\/+/g,P=[];function Q(a,b,e,c){if(P.length){var d=P.pop();d.result=a;d.keyPrefix=b;d.func=e;d.context=c;d.count=0;return d}return{result:a,keyPrefix:b,func:e,context:c,count:0}}function R(a){a.result=null;a.keyPrefix=null;a.func=null;a.context=null;a.count=0;10>P.length&&P.push(a)}\nfunction S(a,b,e,c){var d=typeof a;if(\"undefined\"===d||\"boolean\"===d)a=null;var g=!1;if(null===a)g=!0;else switch(d){case \"string\":case \"number\":g=!0;break;case \"object\":switch(a.$$typeof){case t:case u:g=!0}}if(g)return e(c,a,\"\"===b?\".\"+T(a,0):b),1;g=0;b=\"\"===b?\".\":b+\":\";if(Array.isArray(a))for(var h=0;h<a.length;h++){d=a[h];var f=b+T(d,h);g+=S(d,f,e,c)}else if(null===a||\"undefined\"===typeof a?f=null:(f=C&&a[C]||a[\"@@iterator\"],f=\"function\"===typeof f?f:null),\"function\"===typeof f)for(a=f.call(a),\nh=0;!(d=a.next()).done;)d=d.value,f=b+T(d,h++),g+=S(d,f,e,c);else\"object\"===d&&(e=\"\"+a,D(\"31\",\"[object Object]\"===e?\"object with keys {\"+Object.keys(a).join(\", \")+\"}\":e,\"\"));return g}function T(a,b){return\"object\"===typeof a&&null!==a&&null!=a.key?escape(a.key):b.toString(36)}function U(a,b){a.func.call(a.context,b,a.count++)}\nfunction V(a,b,e){var c=a.result,d=a.keyPrefix;a=a.func.call(a.context,b,a.count++);Array.isArray(a)?W(a,c,e,q.thatReturnsArgument):null!=a&&(N(a)&&(b=d+(!a.key||b&&b.key===a.key?\"\":(\"\"+a.key).replace(O,\"$&/\")+\"/\")+e,a={$$typeof:t,type:a.type,key:b,ref:a.ref,props:a.props,_owner:a._owner}),c.push(a))}function W(a,b,e,c,d){var g=\"\";null!=e&&(g=(\"\"+e).replace(O,\"$&/\")+\"/\");b=Q(b,g,c,d);null==a||S(a,\"\",V,b);R(b)}\nvar X={Children:{map:function(a,b,e){if(null==a)return a;var c=[];W(a,c,null,b,e);return c},forEach:function(a,b,e){if(null==a)return a;b=Q(null,null,b,e);null==a||S(a,\"\",U,b);R(b)},count:function(a){return null==a?0:S(a,\"\",q.thatReturnsNull,null)},toArray:function(a){var b=[];W(a,b,null,q.thatReturnsArgument);return b},only:function(a){N(a)?void 0:D(\"143\");return a}},createRef:function(){return{current:null}},Component:F,PureComponent:H,createContext:function(a,b){void 0===b&&(b=null);a={$$typeof:z,\n_calculateChangedBits:b,_defaultValue:a,_currentValue:a,_currentValue2:a,_changedBits:0,_changedBits2:0,Provider:null,Consumer:null};a.Provider={$$typeof:y,_context:a};return a.Consumer=a},forwardRef:function(a){return{$$typeof:B,render:a}},Fragment:v,StrictMode:w,unstable_AsyncMode:A,unstable_Profiler:x,createElement:M,cloneElement:function(a,b,e){null===a||void 0===a?D(\"267\",a):void 0;var c=void 0,d=k({},a.props),g=a.key,h=a.ref,f=a._owner;if(null!=b){void 0!==b.ref&&(h=b.ref,f=J.current);void 0!==\nb.key&&(g=\"\"+b.key);var l=void 0;a.type&&a.type.defaultProps&&(l=a.type.defaultProps);for(c in b)K.call(b,c)&&!L.hasOwnProperty(c)&&(d[c]=void 0===b[c]&&void 0!==l?l[c]:b[c])}c=arguments.length-2;if(1===c)d.children=e;else if(1<c){l=Array(c);for(var m=0;m<c;m++)l[m]=arguments[m+2];d.children=l}return{$$typeof:t,type:a.type,key:g,ref:h,props:d,_owner:f}},createFactory:function(a){var b=M.bind(null,a);b.type=a;return b},isValidElement:N,version:\"16.4.0\",__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{ReactCurrentOwner:J,\nassign:k}},Y={default:X},Z=Y&&X||Y;module.exports=Z.default?Z.default:Z;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/react/cjs/react.production.min.js\n// module id = 19\n// module chunks = 0","'use strict';\n\nfunction checkDCE() {\n  /* global __REACT_DEVTOOLS_GLOBAL_HOOK__ */\n  if (\n    typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ === 'undefined' ||\n    typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE !== 'function'\n  ) {\n    return;\n  }\n  if (process.env.NODE_ENV !== 'production') {\n    // This branch is unreachable because this function is only called\n    // in production, but the condition is true only in development.\n    // Therefore if the branch is still here, dead code elimination wasn't\n    // properly applied.\n    // Don't change the message. React DevTools relies on it. Also make sure\n    // this message doesn't occur elsewhere in this function, or it will cause\n    // a false positive.\n    throw new Error('^_^');\n  }\n  try {\n    // Verify that the code above has been dead code eliminated (DCE'd).\n    __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE);\n  } catch (err) {\n    // DevTools shouldn't crash React, no matter what.\n    // We should still report in case we break this code.\n    console.error(err);\n  }\n}\n\nif (process.env.NODE_ENV === 'production') {\n  // DCE check should happen before ReactDOM bundle executes so that\n  // DevTools can report bad minification during injection.\n  checkDCE();\n  module.exports = require('./cjs/react-dom.production.min.js');\n} else {\n  module.exports = require('./cjs/react-dom.development.js');\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/react-dom/index.js\n// module id = 20\n// module chunks = 0","/** @license React v16.4.0\n * react-dom.production.min.js\n *\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n/*\n Modernizr 3.0.0pre (Custom Build) | MIT\n*/\n'use strict';var aa=require(\"fbjs/lib/invariant\"),ca=require(\"react\"),m=require(\"fbjs/lib/ExecutionEnvironment\"),p=require(\"object-assign\"),v=require(\"fbjs/lib/emptyFunction\"),da=require(\"fbjs/lib/getActiveElement\"),ea=require(\"fbjs/lib/shallowEqual\"),fa=require(\"fbjs/lib/containsNode\"),ha=require(\"fbjs/lib/emptyObject\");\nfunction A(a){for(var b=arguments.length-1,c=\"https://reactjs.org/docs/error-decoder.html?invariant=\"+a,d=0;d<b;d++)c+=\"&args[]=\"+encodeURIComponent(arguments[d+1]);aa(!1,\"Minified React error #\"+a+\"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. \",c)}ca?void 0:A(\"227\");\nfunction ia(a,b,c,d,e,f,g,h,k){this._hasCaughtError=!1;this._caughtError=null;var n=Array.prototype.slice.call(arguments,3);try{b.apply(c,n)}catch(r){this._caughtError=r,this._hasCaughtError=!0}}\nvar B={_caughtError:null,_hasCaughtError:!1,_rethrowError:null,_hasRethrowError:!1,invokeGuardedCallback:function(a,b,c,d,e,f,g,h,k){ia.apply(B,arguments)},invokeGuardedCallbackAndCatchFirstError:function(a,b,c,d,e,f,g,h,k){B.invokeGuardedCallback.apply(this,arguments);if(B.hasCaughtError()){var n=B.clearCaughtError();B._hasRethrowError||(B._hasRethrowError=!0,B._rethrowError=n)}},rethrowCaughtError:function(){return ka.apply(B,arguments)},hasCaughtError:function(){return B._hasCaughtError},clearCaughtError:function(){if(B._hasCaughtError){var a=\nB._caughtError;B._caughtError=null;B._hasCaughtError=!1;return a}A(\"198\")}};function ka(){if(B._hasRethrowError){var a=B._rethrowError;B._rethrowError=null;B._hasRethrowError=!1;throw a;}}var la=null,ma={};\nfunction na(){if(la)for(var a in ma){var b=ma[a],c=la.indexOf(a);-1<c?void 0:A(\"96\",a);if(!oa[c]){b.extractEvents?void 0:A(\"97\",a);oa[c]=b;c=b.eventTypes;for(var d in c){var e=void 0;var f=c[d],g=b,h=d;pa.hasOwnProperty(h)?A(\"99\",h):void 0;pa[h]=f;var k=f.phasedRegistrationNames;if(k){for(e in k)k.hasOwnProperty(e)&&qa(k[e],g,h);e=!0}else f.registrationName?(qa(f.registrationName,g,h),e=!0):e=!1;e?void 0:A(\"98\",d,a)}}}}\nfunction qa(a,b,c){ra[a]?A(\"100\",a):void 0;ra[a]=b;sa[a]=b.eventTypes[c].dependencies}var oa=[],pa={},ra={},sa={};function ta(a){la?A(\"101\"):void 0;la=Array.prototype.slice.call(a);na()}function ua(a){var b=!1,c;for(c in a)if(a.hasOwnProperty(c)){var d=a[c];ma.hasOwnProperty(c)&&ma[c]===d||(ma[c]?A(\"102\",c):void 0,ma[c]=d,b=!0)}b&&na()}\nvar va={plugins:oa,eventNameDispatchConfigs:pa,registrationNameModules:ra,registrationNameDependencies:sa,possibleRegistrationNames:null,injectEventPluginOrder:ta,injectEventPluginsByName:ua},wa=null,xa=null,ya=null;function za(a,b,c,d){b=a.type||\"unknown-event\";a.currentTarget=ya(d);B.invokeGuardedCallbackAndCatchFirstError(b,c,void 0,a);a.currentTarget=null}\nfunction Aa(a,b){null==b?A(\"30\"):void 0;if(null==a)return b;if(Array.isArray(a)){if(Array.isArray(b))return a.push.apply(a,b),a;a.push(b);return a}return Array.isArray(b)?[a].concat(b):[a,b]}function Ba(a,b,c){Array.isArray(a)?a.forEach(b,c):a&&b.call(c,a)}var Ca=null;\nfunction Da(a,b){if(a){var c=a._dispatchListeners,d=a._dispatchInstances;if(Array.isArray(c))for(var e=0;e<c.length&&!a.isPropagationStopped();e++)za(a,b,c[e],d[e]);else c&&za(a,b,c,d);a._dispatchListeners=null;a._dispatchInstances=null;a.isPersistent()||a.constructor.release(a)}}function Ea(a){return Da(a,!0)}function Fa(a){return Da(a,!1)}var Ga={injectEventPluginOrder:ta,injectEventPluginsByName:ua};\nfunction Ha(a,b){var c=a.stateNode;if(!c)return null;var d=wa(c);if(!d)return null;c=d[b];a:switch(b){case \"onClick\":case \"onClickCapture\":case \"onDoubleClick\":case \"onDoubleClickCapture\":case \"onMouseDown\":case \"onMouseDownCapture\":case \"onMouseMove\":case \"onMouseMoveCapture\":case \"onMouseUp\":case \"onMouseUpCapture\":(d=!d.disabled)||(a=a.type,d=!(\"button\"===a||\"input\"===a||\"select\"===a||\"textarea\"===a));a=!d;break a;default:a=!1}if(a)return null;c&&\"function\"!==typeof c?A(\"231\",b,typeof c):void 0;\nreturn c}function Ia(a,b){null!==a&&(Ca=Aa(Ca,a));a=Ca;Ca=null;a&&(b?Ba(a,Ea):Ba(a,Fa),Ca?A(\"95\"):void 0,B.rethrowCaughtError())}function Ja(a,b,c,d){for(var e=null,f=0;f<oa.length;f++){var g=oa[f];g&&(g=g.extractEvents(a,b,c,d))&&(e=Aa(e,g))}Ia(e,!1)}var Ka={injection:Ga,getListener:Ha,runEventsInBatch:Ia,runExtractedEventsInBatch:Ja},La=Math.random().toString(36).slice(2),C=\"__reactInternalInstance$\"+La,Ma=\"__reactEventHandlers$\"+La;\nfunction Na(a){if(a[C])return a[C];for(;!a[C];)if(a.parentNode)a=a.parentNode;else return null;a=a[C];return 5===a.tag||6===a.tag?a:null}function Oa(a){if(5===a.tag||6===a.tag)return a.stateNode;A(\"33\")}function Pa(a){return a[Ma]||null}var Qa={precacheFiberNode:function(a,b){b[C]=a},getClosestInstanceFromNode:Na,getInstanceFromNode:function(a){a=a[C];return!a||5!==a.tag&&6!==a.tag?null:a},getNodeFromInstance:Oa,getFiberCurrentPropsFromNode:Pa,updateFiberProps:function(a,b){a[Ma]=b}};\nfunction F(a){do a=a.return;while(a&&5!==a.tag);return a?a:null}function Ra(a,b,c){for(var d=[];a;)d.push(a),a=F(a);for(a=d.length;0<a--;)b(d[a],\"captured\",c);for(a=0;a<d.length;a++)b(d[a],\"bubbled\",c)}function Sa(a,b,c){if(b=Ha(a,c.dispatchConfig.phasedRegistrationNames[b]))c._dispatchListeners=Aa(c._dispatchListeners,b),c._dispatchInstances=Aa(c._dispatchInstances,a)}function Ta(a){a&&a.dispatchConfig.phasedRegistrationNames&&Ra(a._targetInst,Sa,a)}\nfunction Ua(a){if(a&&a.dispatchConfig.phasedRegistrationNames){var b=a._targetInst;b=b?F(b):null;Ra(b,Sa,a)}}function Va(a,b,c){a&&c&&c.dispatchConfig.registrationName&&(b=Ha(a,c.dispatchConfig.registrationName))&&(c._dispatchListeners=Aa(c._dispatchListeners,b),c._dispatchInstances=Aa(c._dispatchInstances,a))}function Xa(a){a&&a.dispatchConfig.registrationName&&Va(a._targetInst,null,a)}function Ya(a){Ba(a,Ta)}\nfunction Za(a,b,c,d){if(c&&d)a:{var e=c;for(var f=d,g=0,h=e;h;h=F(h))g++;h=0;for(var k=f;k;k=F(k))h++;for(;0<g-h;)e=F(e),g--;for(;0<h-g;)f=F(f),h--;for(;g--;){if(e===f||e===f.alternate)break a;e=F(e);f=F(f)}e=null}else e=null;f=e;for(e=[];c&&c!==f;){g=c.alternate;if(null!==g&&g===f)break;e.push(c);c=F(c)}for(c=[];d&&d!==f;){g=d.alternate;if(null!==g&&g===f)break;c.push(d);d=F(d)}for(d=0;d<e.length;d++)Va(e[d],\"bubbled\",a);for(a=c.length;0<a--;)Va(c[a],\"captured\",b)}\nvar $a={accumulateTwoPhaseDispatches:Ya,accumulateTwoPhaseDispatchesSkipTarget:function(a){Ba(a,Ua)},accumulateEnterLeaveDispatches:Za,accumulateDirectDispatches:function(a){Ba(a,Xa)}};function ab(a,b){var c={};c[a.toLowerCase()]=b.toLowerCase();c[\"Webkit\"+a]=\"webkit\"+b;c[\"Moz\"+a]=\"moz\"+b;c[\"ms\"+a]=\"MS\"+b;c[\"O\"+a]=\"o\"+b.toLowerCase();return c}\nvar bb={animationend:ab(\"Animation\",\"AnimationEnd\"),animationiteration:ab(\"Animation\",\"AnimationIteration\"),animationstart:ab(\"Animation\",\"AnimationStart\"),transitionend:ab(\"Transition\",\"TransitionEnd\")},cb={},db={};m.canUseDOM&&(db=document.createElement(\"div\").style,\"AnimationEvent\"in window||(delete bb.animationend.animation,delete bb.animationiteration.animation,delete bb.animationstart.animation),\"TransitionEvent\"in window||delete bb.transitionend.transition);\nfunction eb(a){if(cb[a])return cb[a];if(!bb[a])return a;var b=bb[a],c;for(c in b)if(b.hasOwnProperty(c)&&c in db)return cb[a]=b[c];return a}var fb=eb(\"animationend\"),gb=eb(\"animationiteration\"),hb=eb(\"animationstart\"),ib=eb(\"transitionend\"),jb=\"abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting\".split(\" \"),kb=null;\nfunction lb(){!kb&&m.canUseDOM&&(kb=\"textContent\"in document.documentElement?\"textContent\":\"innerText\");return kb}var G={_root:null,_startText:null,_fallbackText:null};function mb(){if(G._fallbackText)return G._fallbackText;var a,b=G._startText,c=b.length,d,e=nb(),f=e.length;for(a=0;a<c&&b[a]===e[a];a++);var g=c-a;for(d=1;d<=g&&b[c-d]===e[f-d];d++);G._fallbackText=e.slice(a,1<d?1-d:void 0);return G._fallbackText}function nb(){return\"value\"in G._root?G._root.value:G._root[lb()]}\nvar ob=\"dispatchConfig _targetInst nativeEvent isDefaultPrevented isPropagationStopped _dispatchListeners _dispatchInstances\".split(\" \"),pb={type:null,target:null,currentTarget:v.thatReturnsNull,eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null};\nfunction H(a,b,c,d){this.dispatchConfig=a;this._targetInst=b;this.nativeEvent=c;a=this.constructor.Interface;for(var e in a)a.hasOwnProperty(e)&&((b=a[e])?this[e]=b(c):\"target\"===e?this.target=d:this[e]=c[e]);this.isDefaultPrevented=(null!=c.defaultPrevented?c.defaultPrevented:!1===c.returnValue)?v.thatReturnsTrue:v.thatReturnsFalse;this.isPropagationStopped=v.thatReturnsFalse;return this}\np(H.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():\"unknown\"!==typeof a.returnValue&&(a.returnValue=!1),this.isDefaultPrevented=v.thatReturnsTrue)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():\"unknown\"!==typeof a.cancelBubble&&(a.cancelBubble=!0),this.isPropagationStopped=v.thatReturnsTrue)},persist:function(){this.isPersistent=v.thatReturnsTrue},isPersistent:v.thatReturnsFalse,\ndestructor:function(){var a=this.constructor.Interface,b;for(b in a)this[b]=null;for(a=0;a<ob.length;a++)this[ob[a]]=null}});H.Interface=pb;H.extend=function(a){function b(){}function c(){return d.apply(this,arguments)}var d=this;b.prototype=d.prototype;var e=new b;p(e,c.prototype);c.prototype=e;c.prototype.constructor=c;c.Interface=p({},d.Interface,a);c.extend=d.extend;qb(c);return c};qb(H);\nfunction rb(a,b,c,d){if(this.eventPool.length){var e=this.eventPool.pop();this.call(e,a,b,c,d);return e}return new this(a,b,c,d)}function sb(a){a instanceof this?void 0:A(\"223\");a.destructor();10>this.eventPool.length&&this.eventPool.push(a)}function qb(a){a.eventPool=[];a.getPooled=rb;a.release=sb}var tb=H.extend({data:null}),ub=H.extend({data:null}),vb=[9,13,27,32],wb=m.canUseDOM&&\"CompositionEvent\"in window,xb=null;m.canUseDOM&&\"documentMode\"in document&&(xb=document.documentMode);\nvar yb=m.canUseDOM&&\"TextEvent\"in window&&!xb,zb=m.canUseDOM&&(!wb||xb&&8<xb&&11>=xb),Ab=String.fromCharCode(32),Bb={beforeInput:{phasedRegistrationNames:{bubbled:\"onBeforeInput\",captured:\"onBeforeInputCapture\"},dependencies:[\"compositionend\",\"keypress\",\"textInput\",\"paste\"]},compositionEnd:{phasedRegistrationNames:{bubbled:\"onCompositionEnd\",captured:\"onCompositionEndCapture\"},dependencies:\"blur compositionend keydown keypress keyup mousedown\".split(\" \")},compositionStart:{phasedRegistrationNames:{bubbled:\"onCompositionStart\",\ncaptured:\"onCompositionStartCapture\"},dependencies:\"blur compositionstart keydown keypress keyup mousedown\".split(\" \")},compositionUpdate:{phasedRegistrationNames:{bubbled:\"onCompositionUpdate\",captured:\"onCompositionUpdateCapture\"},dependencies:\"blur compositionupdate keydown keypress keyup mousedown\".split(\" \")}},Cb=!1;\nfunction Db(a,b){switch(a){case \"keyup\":return-1!==vb.indexOf(b.keyCode);case \"keydown\":return 229!==b.keyCode;case \"keypress\":case \"mousedown\":case \"blur\":return!0;default:return!1}}function Eb(a){a=a.detail;return\"object\"===typeof a&&\"data\"in a?a.data:null}var Fb=!1;function Gb(a,b){switch(a){case \"compositionend\":return Eb(b);case \"keypress\":if(32!==b.which)return null;Cb=!0;return Ab;case \"textInput\":return a=b.data,a===Ab&&Cb?null:a;default:return null}}\nfunction Hb(a,b){if(Fb)return\"compositionend\"===a||!wb&&Db(a,b)?(a=mb(),G._root=null,G._startText=null,G._fallbackText=null,Fb=!1,a):null;switch(a){case \"paste\":return null;case \"keypress\":if(!(b.ctrlKey||b.altKey||b.metaKey)||b.ctrlKey&&b.altKey){if(b.char&&1<b.char.length)return b.char;if(b.which)return String.fromCharCode(b.which)}return null;case \"compositionend\":return zb?null:b.data;default:return null}}\nvar Ib={eventTypes:Bb,extractEvents:function(a,b,c,d){var e=void 0;var f=void 0;if(wb)b:{switch(a){case \"compositionstart\":e=Bb.compositionStart;break b;case \"compositionend\":e=Bb.compositionEnd;break b;case \"compositionupdate\":e=Bb.compositionUpdate;break b}e=void 0}else Fb?Db(a,c)&&(e=Bb.compositionEnd):\"keydown\"===a&&229===c.keyCode&&(e=Bb.compositionStart);e?(zb&&(Fb||e!==Bb.compositionStart?e===Bb.compositionEnd&&Fb&&(f=mb()):(G._root=d,G._startText=nb(),Fb=!0)),e=tb.getPooled(e,b,c,d),f?e.data=\nf:(f=Eb(c),null!==f&&(e.data=f)),Ya(e),f=e):f=null;(a=yb?Gb(a,c):Hb(a,c))?(b=ub.getPooled(Bb.beforeInput,b,c,d),b.data=a,Ya(b)):b=null;return null===f?b:null===b?f:[f,b]}},Jb=null,Kb={injectFiberControlledHostComponent:function(a){Jb=a}},Lb=null,Mb=null;function Nb(a){if(a=xa(a)){Jb&&\"function\"===typeof Jb.restoreControlledState?void 0:A(\"194\");var b=wa(a.stateNode);Jb.restoreControlledState(a.stateNode,a.type,b)}}function Ob(a){Lb?Mb?Mb.push(a):Mb=[a]:Lb=a}\nfunction Pb(){return null!==Lb||null!==Mb}function Qb(){if(Lb){var a=Lb,b=Mb;Mb=Lb=null;Nb(a);if(b)for(a=0;a<b.length;a++)Nb(b[a])}}var Rb={injection:Kb,enqueueStateRestore:Ob,needsStateRestore:Pb,restoreStateIfNeeded:Qb};function Sb(a,b){return a(b)}function Tb(a,b,c){return a(b,c)}function Ub(){}var Vb=!1;function Wb(a,b){if(Vb)return a(b);Vb=!0;try{return Sb(a,b)}finally{Vb=!1,Pb()&&(Ub(),Qb())}}\nvar Xb={color:!0,date:!0,datetime:!0,\"datetime-local\":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Yb(a){var b=a&&a.nodeName&&a.nodeName.toLowerCase();return\"input\"===b?!!Xb[a.type]:\"textarea\"===b?!0:!1}function Zb(a){a=a.target||window;a.correspondingUseElement&&(a=a.correspondingUseElement);return 3===a.nodeType?a.parentNode:a}\nfunction $b(a,b){if(!m.canUseDOM||b&&!(\"addEventListener\"in document))return!1;a=\"on\"+a;b=a in document;b||(b=document.createElement(\"div\"),b.setAttribute(a,\"return;\"),b=\"function\"===typeof b[a]);return b}function ac(a){var b=a.type;return(a=a.nodeName)&&\"input\"===a.toLowerCase()&&(\"checkbox\"===b||\"radio\"===b)}\nfunction bc(a){var b=ac(a)?\"checked\":\"value\",c=Object.getOwnPropertyDescriptor(a.constructor.prototype,b),d=\"\"+a[b];if(!a.hasOwnProperty(b)&&\"undefined\"!==typeof c&&\"function\"===typeof c.get&&\"function\"===typeof c.set){var e=c.get,f=c.set;Object.defineProperty(a,b,{configurable:!0,get:function(){return e.call(this)},set:function(a){d=\"\"+a;f.call(this,a)}});Object.defineProperty(a,b,{enumerable:c.enumerable});return{getValue:function(){return d},setValue:function(a){d=\"\"+a},stopTracking:function(){a._valueTracker=\nnull;delete a[b]}}}}function cc(a){a._valueTracker||(a._valueTracker=bc(a))}function dc(a){if(!a)return!1;var b=a._valueTracker;if(!b)return!0;var c=b.getValue();var d=\"\";a&&(d=ac(a)?a.checked?\"true\":\"false\":a.value);a=d;return a!==c?(b.setValue(a),!0):!1}\nvar ec=ca.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,I=\"function\"===typeof Symbol&&Symbol.for,fc=I?Symbol.for(\"react.element\"):60103,gc=I?Symbol.for(\"react.portal\"):60106,hc=I?Symbol.for(\"react.fragment\"):60107,ic=I?Symbol.for(\"react.strict_mode\"):60108,jc=I?Symbol.for(\"react.profiler\"):60114,mc=I?Symbol.for(\"react.provider\"):60109,nc=I?Symbol.for(\"react.context\"):60110,oc=I?Symbol.for(\"react.async_mode\"):60111,pc=I?Symbol.for(\"react.forward_ref\"):60112,qc=I?Symbol.for(\"react.timeout\"):\n60113,rc=\"function\"===typeof Symbol&&Symbol.iterator;function sc(a){if(null===a||\"undefined\"===typeof a)return null;a=rc&&a[rc]||a[\"@@iterator\"];return\"function\"===typeof a?a:null}\nfunction tc(a){var b=a.type;if(\"function\"===typeof b)return b.displayName||b.name;if(\"string\"===typeof b)return b;switch(b){case oc:return\"AsyncMode\";case nc:return\"Context.Consumer\";case hc:return\"ReactFragment\";case gc:return\"ReactPortal\";case jc:return\"Profiler(\"+a.pendingProps.id+\")\";case mc:return\"Context.Provider\";case ic:return\"StrictMode\";case qc:return\"Timeout\"}if(\"object\"===typeof b&&null!==b)switch(b.$$typeof){case pc:return a=b.render.displayName||b.render.name||\"\",\"\"!==a?\"ForwardRef(\"+\na+\")\":\"ForwardRef\"}return null}function vc(a){var b=\"\";do{a:switch(a.tag){case 0:case 1:case 2:case 5:var c=a._debugOwner,d=a._debugSource;var e=tc(a);var f=null;c&&(f=tc(c));c=d;e=\"\\n    in \"+(e||\"Unknown\")+(c?\" (at \"+c.fileName.replace(/^.*[\\\\\\/]/,\"\")+\":\"+c.lineNumber+\")\":f?\" (created by \"+f+\")\":\"\");break a;default:e=\"\"}b+=e;a=a.return}while(a);return b}\nvar wc=/^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$/,xc={},yc={};function zc(a){if(yc.hasOwnProperty(a))return!0;if(xc.hasOwnProperty(a))return!1;if(wc.test(a))return yc[a]=!0;xc[a]=!0;return!1}\nfunction Ac(a,b,c,d){if(null!==c&&0===c.type)return!1;switch(typeof b){case \"function\":case \"symbol\":return!0;case \"boolean\":if(d)return!1;if(null!==c)return!c.acceptsBooleans;a=a.toLowerCase().slice(0,5);return\"data-\"!==a&&\"aria-\"!==a;default:return!1}}function Bc(a,b,c,d){if(null===b||\"undefined\"===typeof b||Ac(a,b,c,d))return!0;if(d)return!1;if(null!==c)switch(c.type){case 3:return!b;case 4:return!1===b;case 5:return isNaN(b);case 6:return isNaN(b)||1>b}return!1}\nfunction J(a,b,c,d,e){this.acceptsBooleans=2===b||3===b||4===b;this.attributeName=d;this.attributeNamespace=e;this.mustUseProperty=c;this.propertyName=a;this.type=b}var K={};\"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style\".split(\" \").forEach(function(a){K[a]=new J(a,0,!1,a,null)});\n[[\"acceptCharset\",\"accept-charset\"],[\"className\",\"class\"],[\"htmlFor\",\"for\"],[\"httpEquiv\",\"http-equiv\"]].forEach(function(a){var b=a[0];K[b]=new J(b,1,!1,a[1],null)});[\"contentEditable\",\"draggable\",\"spellCheck\",\"value\"].forEach(function(a){K[a]=new J(a,2,!1,a.toLowerCase(),null)});[\"autoReverse\",\"externalResourcesRequired\",\"preserveAlpha\"].forEach(function(a){K[a]=new J(a,2,!1,a,null)});\n\"allowFullScreen async autoFocus autoPlay controls default defer disabled formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope\".split(\" \").forEach(function(a){K[a]=new J(a,3,!1,a.toLowerCase(),null)});[\"checked\",\"multiple\",\"muted\",\"selected\"].forEach(function(a){K[a]=new J(a,3,!0,a.toLowerCase(),null)});[\"capture\",\"download\"].forEach(function(a){K[a]=new J(a,4,!1,a.toLowerCase(),null)});\n[\"cols\",\"rows\",\"size\",\"span\"].forEach(function(a){K[a]=new J(a,6,!1,a.toLowerCase(),null)});[\"rowSpan\",\"start\"].forEach(function(a){K[a]=new J(a,5,!1,a.toLowerCase(),null)});var Cc=/[\\-:]([a-z])/g;function Dc(a){return a[1].toUpperCase()}\n\"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height\".split(\" \").forEach(function(a){var b=a.replace(Cc,\nDc);K[b]=new J(b,1,!1,a,null)});\"xlink:actuate xlink:arcrole xlink:href xlink:role xlink:show xlink:title xlink:type\".split(\" \").forEach(function(a){var b=a.replace(Cc,Dc);K[b]=new J(b,1,!1,a,\"http://www.w3.org/1999/xlink\")});[\"xml:base\",\"xml:lang\",\"xml:space\"].forEach(function(a){var b=a.replace(Cc,Dc);K[b]=new J(b,1,!1,a,\"http://www.w3.org/XML/1998/namespace\")});K.tabIndex=new J(\"tabIndex\",1,!1,\"tabindex\",null);\nfunction Ec(a,b,c,d){var e=K.hasOwnProperty(b)?K[b]:null;var f=null!==e?0===e.type:d?!1:!(2<b.length)||\"o\"!==b[0]&&\"O\"!==b[0]||\"n\"!==b[1]&&\"N\"!==b[1]?!1:!0;f||(Bc(b,c,e,d)&&(c=null),d||null===e?zc(b)&&(null===c?a.removeAttribute(b):a.setAttribute(b,\"\"+c)):e.mustUseProperty?a[e.propertyName]=null===c?3===e.type?!1:\"\":c:(b=e.attributeName,d=e.attributeNamespace,null===c?a.removeAttribute(b):(e=e.type,c=3===e||4===e&&!0===c?\"\":\"\"+c,d?a.setAttributeNS(d,b,c):a.setAttribute(b,c))))}\nfunction Fc(a,b){var c=b.checked;return p({},b,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=c?c:a._wrapperState.initialChecked})}function Gc(a,b){var c=null==b.defaultValue?\"\":b.defaultValue,d=null!=b.checked?b.checked:b.defaultChecked;c=Hc(null!=b.value?b.value:c);a._wrapperState={initialChecked:d,initialValue:c,controlled:\"checkbox\"===b.type||\"radio\"===b.type?null!=b.checked:null!=b.value}}function Ic(a,b){b=b.checked;null!=b&&Ec(a,\"checked\",b,!1)}\nfunction Jc(a,b){Ic(a,b);var c=Hc(b.value);if(null!=c)if(\"number\"===b.type){if(0===c&&\"\"===a.value||a.value!=c)a.value=\"\"+c}else a.value!==\"\"+c&&(a.value=\"\"+c);b.hasOwnProperty(\"value\")?Kc(a,b.type,c):b.hasOwnProperty(\"defaultValue\")&&Kc(a,b.type,Hc(b.defaultValue));null==b.checked&&null!=b.defaultChecked&&(a.defaultChecked=!!b.defaultChecked)}\nfunction Lc(a,b){if(b.hasOwnProperty(\"value\")||b.hasOwnProperty(\"defaultValue\"))\"\"===a.value&&(a.value=\"\"+a._wrapperState.initialValue),a.defaultValue=\"\"+a._wrapperState.initialValue;b=a.name;\"\"!==b&&(a.name=\"\");a.defaultChecked=!a.defaultChecked;a.defaultChecked=!a.defaultChecked;\"\"!==b&&(a.name=b)}function Kc(a,b,c){if(\"number\"!==b||a.ownerDocument.activeElement!==a)null==c?a.defaultValue=\"\"+a._wrapperState.initialValue:a.defaultValue!==\"\"+c&&(a.defaultValue=\"\"+c)}\nfunction Hc(a){switch(typeof a){case \"boolean\":case \"number\":case \"object\":case \"string\":case \"undefined\":return a;default:return\"\"}}var Mc={change:{phasedRegistrationNames:{bubbled:\"onChange\",captured:\"onChangeCapture\"},dependencies:\"blur change click focus input keydown keyup selectionchange\".split(\" \")}};function Nc(a,b,c){a=H.getPooled(Mc.change,a,b,c);a.type=\"change\";Ob(c);Ya(a);return a}var Oc=null,Pc=null;function Qc(a){Ia(a,!1)}function Rc(a){var b=Oa(a);if(dc(b))return a}\nfunction Sc(a,b){if(\"change\"===a)return b}var Tc=!1;m.canUseDOM&&(Tc=$b(\"input\")&&(!document.documentMode||9<document.documentMode));function Uc(){Oc&&(Oc.detachEvent(\"onpropertychange\",Vc),Pc=Oc=null)}function Vc(a){\"value\"===a.propertyName&&Rc(Pc)&&(a=Nc(Pc,a,Zb(a)),Wb(Qc,a))}function Wc(a,b,c){\"focus\"===a?(Uc(),Oc=b,Pc=c,Oc.attachEvent(\"onpropertychange\",Vc)):\"blur\"===a&&Uc()}function Xc(a){if(\"selectionchange\"===a||\"keyup\"===a||\"keydown\"===a)return Rc(Pc)}\nfunction Yc(a,b){if(\"click\"===a)return Rc(b)}function Zc(a,b){if(\"input\"===a||\"change\"===a)return Rc(b)}\nvar $c={eventTypes:Mc,_isInputEventSupported:Tc,extractEvents:function(a,b,c,d){var e=b?Oa(b):window,f=void 0,g=void 0,h=e.nodeName&&e.nodeName.toLowerCase();\"select\"===h||\"input\"===h&&\"file\"===e.type?f=Sc:Yb(e)?Tc?f=Zc:(f=Xc,g=Wc):(h=e.nodeName)&&\"input\"===h.toLowerCase()&&(\"checkbox\"===e.type||\"radio\"===e.type)&&(f=Yc);if(f&&(f=f(a,b)))return Nc(f,c,d);g&&g(a,e,b);\"blur\"===a&&null!=b&&(a=b._wrapperState||e._wrapperState)&&a.controlled&&\"number\"===e.type&&Kc(e,\"number\",e.value)}},ad=H.extend({view:null,\ndetail:null}),bd={Alt:\"altKey\",Control:\"ctrlKey\",Meta:\"metaKey\",Shift:\"shiftKey\"};function cd(a){var b=this.nativeEvent;return b.getModifierState?b.getModifierState(a):(a=bd[a])?!!b[a]:!1}function dd(){return cd}\nvar ed=ad.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:dd,button:null,buttons:null,relatedTarget:function(a){return a.relatedTarget||(a.fromElement===a.srcElement?a.toElement:a.fromElement)}}),fd=ed.extend({pointerId:null,width:null,height:null,pressure:null,tiltX:null,tiltY:null,pointerType:null,isPrimary:null}),gd={mouseEnter:{registrationName:\"onMouseEnter\",dependencies:[\"mouseout\",\"mouseover\"]},\nmouseLeave:{registrationName:\"onMouseLeave\",dependencies:[\"mouseout\",\"mouseover\"]},pointerEnter:{registrationName:\"onPointerEnter\",dependencies:[\"pointerout\",\"pointerover\"]},pointerLeave:{registrationName:\"onPointerLeave\",dependencies:[\"pointerout\",\"pointerover\"]}},hd={eventTypes:gd,extractEvents:function(a,b,c,d){var e=\"mouseover\"===a||\"pointerover\"===a,f=\"mouseout\"===a||\"pointerout\"===a;if(e&&(c.relatedTarget||c.fromElement)||!f&&!e)return null;e=d.window===d?d:(e=d.ownerDocument)?e.defaultView||\ne.parentWindow:window;f?(f=b,b=(b=c.relatedTarget||c.toElement)?Na(b):null):f=null;if(f===b)return null;var g=void 0,h=void 0,k=void 0,n=void 0;if(\"mouseout\"===a||\"mouseover\"===a)g=ed,h=gd.mouseLeave,k=gd.mouseEnter,n=\"mouse\";else if(\"pointerout\"===a||\"pointerover\"===a)g=fd,h=gd.pointerLeave,k=gd.pointerEnter,n=\"pointer\";a=null==f?e:Oa(f);e=null==b?e:Oa(b);h=g.getPooled(h,f,c,d);h.type=n+\"leave\";h.target=a;h.relatedTarget=e;c=g.getPooled(k,b,c,d);c.type=n+\"enter\";c.target=e;c.relatedTarget=a;Za(h,\nc,f,b);return[h,c]}};function id(a){var b=a;if(a.alternate)for(;b.return;)b=b.return;else{if(0!==(b.effectTag&2))return 1;for(;b.return;)if(b=b.return,0!==(b.effectTag&2))return 1}return 3===b.tag?2:3}function jd(a){2!==id(a)?A(\"188\"):void 0}\nfunction kd(a){var b=a.alternate;if(!b)return b=id(a),3===b?A(\"188\"):void 0,1===b?null:a;for(var c=a,d=b;;){var e=c.return,f=e?e.alternate:null;if(!e||!f)break;if(e.child===f.child){for(var g=e.child;g;){if(g===c)return jd(e),a;if(g===d)return jd(e),b;g=g.sibling}A(\"188\")}if(c.return!==d.return)c=e,d=f;else{g=!1;for(var h=e.child;h;){if(h===c){g=!0;c=e;d=f;break}if(h===d){g=!0;d=e;c=f;break}h=h.sibling}if(!g){for(h=f.child;h;){if(h===c){g=!0;c=f;d=e;break}if(h===d){g=!0;d=f;c=e;break}h=h.sibling}g?\nvoid 0:A(\"189\")}}c.alternate!==d?A(\"190\"):void 0}3!==c.tag?A(\"188\"):void 0;return c.stateNode.current===c?a:b}function ld(a){a=kd(a);if(!a)return null;for(var b=a;;){if(5===b.tag||6===b.tag)return b;if(b.child)b.child.return=b,b=b.child;else{if(b===a)break;for(;!b.sibling;){if(!b.return||b.return===a)return null;b=b.return}b.sibling.return=b.return;b=b.sibling}}return null}\nfunction md(a){a=kd(a);if(!a)return null;for(var b=a;;){if(5===b.tag||6===b.tag)return b;if(b.child&&4!==b.tag)b.child.return=b,b=b.child;else{if(b===a)break;for(;!b.sibling;){if(!b.return||b.return===a)return null;b=b.return}b.sibling.return=b.return;b=b.sibling}}return null}var nd=H.extend({animationName:null,elapsedTime:null,pseudoElement:null}),od=H.extend({clipboardData:function(a){return\"clipboardData\"in a?a.clipboardData:window.clipboardData}}),pd=ad.extend({relatedTarget:null});\nfunction qd(a){var b=a.keyCode;\"charCode\"in a?(a=a.charCode,0===a&&13===b&&(a=13)):a=b;10===a&&(a=13);return 32<=a||13===a?a:0}\nvar rd={Esc:\"Escape\",Spacebar:\" \",Left:\"ArrowLeft\",Up:\"ArrowUp\",Right:\"ArrowRight\",Down:\"ArrowDown\",Del:\"Delete\",Win:\"OS\",Menu:\"ContextMenu\",Apps:\"ContextMenu\",Scroll:\"ScrollLock\",MozPrintableKey:\"Unidentified\"},sd={8:\"Backspace\",9:\"Tab\",12:\"Clear\",13:\"Enter\",16:\"Shift\",17:\"Control\",18:\"Alt\",19:\"Pause\",20:\"CapsLock\",27:\"Escape\",32:\" \",33:\"PageUp\",34:\"PageDown\",35:\"End\",36:\"Home\",37:\"ArrowLeft\",38:\"ArrowUp\",39:\"ArrowRight\",40:\"ArrowDown\",45:\"Insert\",46:\"Delete\",112:\"F1\",113:\"F2\",114:\"F3\",115:\"F4\",\n116:\"F5\",117:\"F6\",118:\"F7\",119:\"F8\",120:\"F9\",121:\"F10\",122:\"F11\",123:\"F12\",144:\"NumLock\",145:\"ScrollLock\",224:\"Meta\"},td=ad.extend({key:function(a){if(a.key){var b=rd[a.key]||a.key;if(\"Unidentified\"!==b)return b}return\"keypress\"===a.type?(a=qd(a),13===a?\"Enter\":String.fromCharCode(a)):\"keydown\"===a.type||\"keyup\"===a.type?sd[a.keyCode]||\"Unidentified\":\"\"},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:dd,charCode:function(a){return\"keypress\"===\na.type?qd(a):0},keyCode:function(a){return\"keydown\"===a.type||\"keyup\"===a.type?a.keyCode:0},which:function(a){return\"keypress\"===a.type?qd(a):\"keydown\"===a.type||\"keyup\"===a.type?a.keyCode:0}}),ud=ed.extend({dataTransfer:null}),vd=ad.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:dd}),wd=H.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),xd=ed.extend({deltaX:function(a){return\"deltaX\"in a?a.deltaX:\"wheelDeltaX\"in\na?-a.wheelDeltaX:0},deltaY:function(a){return\"deltaY\"in a?a.deltaY:\"wheelDeltaY\"in a?-a.wheelDeltaY:\"wheelDelta\"in a?-a.wheelDelta:0},deltaZ:null,deltaMode:null}),yd=[[\"abort\",\"abort\"],[fb,\"animationEnd\"],[gb,\"animationIteration\"],[hb,\"animationStart\"],[\"canplay\",\"canPlay\"],[\"canplaythrough\",\"canPlayThrough\"],[\"drag\",\"drag\"],[\"dragenter\",\"dragEnter\"],[\"dragexit\",\"dragExit\"],[\"dragleave\",\"dragLeave\"],[\"dragover\",\"dragOver\"],[\"durationchange\",\"durationChange\"],[\"emptied\",\"emptied\"],[\"encrypted\",\"encrypted\"],\n[\"ended\",\"ended\"],[\"error\",\"error\"],[\"gotpointercapture\",\"gotPointerCapture\"],[\"load\",\"load\"],[\"loadeddata\",\"loadedData\"],[\"loadedmetadata\",\"loadedMetadata\"],[\"loadstart\",\"loadStart\"],[\"lostpointercapture\",\"lostPointerCapture\"],[\"mousemove\",\"mouseMove\"],[\"mouseout\",\"mouseOut\"],[\"mouseover\",\"mouseOver\"],[\"playing\",\"playing\"],[\"pointermove\",\"pointerMove\"],[\"pointerout\",\"pointerOut\"],[\"pointerover\",\"pointerOver\"],[\"progress\",\"progress\"],[\"scroll\",\"scroll\"],[\"seeking\",\"seeking\"],[\"stalled\",\"stalled\"],\n[\"suspend\",\"suspend\"],[\"timeupdate\",\"timeUpdate\"],[\"toggle\",\"toggle\"],[\"touchmove\",\"touchMove\"],[ib,\"transitionEnd\"],[\"waiting\",\"waiting\"],[\"wheel\",\"wheel\"]],zd={},Ad={};function Bd(a,b){var c=a[0];a=a[1];var d=\"on\"+(a[0].toUpperCase()+a.slice(1));b={phasedRegistrationNames:{bubbled:d,captured:d+\"Capture\"},dependencies:[c],isInteractive:b};zd[a]=b;Ad[c]=b}\n[[\"blur\",\"blur\"],[\"cancel\",\"cancel\"],[\"click\",\"click\"],[\"close\",\"close\"],[\"contextmenu\",\"contextMenu\"],[\"copy\",\"copy\"],[\"cut\",\"cut\"],[\"dblclick\",\"doubleClick\"],[\"dragend\",\"dragEnd\"],[\"dragstart\",\"dragStart\"],[\"drop\",\"drop\"],[\"focus\",\"focus\"],[\"input\",\"input\"],[\"invalid\",\"invalid\"],[\"keydown\",\"keyDown\"],[\"keypress\",\"keyPress\"],[\"keyup\",\"keyUp\"],[\"mousedown\",\"mouseDown\"],[\"mouseup\",\"mouseUp\"],[\"paste\",\"paste\"],[\"pause\",\"pause\"],[\"play\",\"play\"],[\"pointercancel\",\"pointerCancel\"],[\"pointerdown\",\"pointerDown\"],\n[\"pointerup\",\"pointerUp\"],[\"ratechange\",\"rateChange\"],[\"reset\",\"reset\"],[\"seeked\",\"seeked\"],[\"submit\",\"submit\"],[\"touchcancel\",\"touchCancel\"],[\"touchend\",\"touchEnd\"],[\"touchstart\",\"touchStart\"],[\"volumechange\",\"volumeChange\"]].forEach(function(a){Bd(a,!0)});yd.forEach(function(a){Bd(a,!1)});\nvar Cd={eventTypes:zd,isInteractiveTopLevelEventType:function(a){a=Ad[a];return void 0!==a&&!0===a.isInteractive},extractEvents:function(a,b,c,d){var e=Ad[a];if(!e)return null;switch(a){case \"keypress\":if(0===qd(c))return null;case \"keydown\":case \"keyup\":a=td;break;case \"blur\":case \"focus\":a=pd;break;case \"click\":if(2===c.button)return null;case \"dblclick\":case \"mousedown\":case \"mousemove\":case \"mouseup\":case \"mouseout\":case \"mouseover\":case \"contextmenu\":a=ed;break;case \"drag\":case \"dragend\":case \"dragenter\":case \"dragexit\":case \"dragleave\":case \"dragover\":case \"dragstart\":case \"drop\":a=\nud;break;case \"touchcancel\":case \"touchend\":case \"touchmove\":case \"touchstart\":a=vd;break;case fb:case gb:case hb:a=nd;break;case ib:a=wd;break;case \"scroll\":a=ad;break;case \"wheel\":a=xd;break;case \"copy\":case \"cut\":case \"paste\":a=od;break;case \"gotpointercapture\":case \"lostpointercapture\":case \"pointercancel\":case \"pointerdown\":case \"pointermove\":case \"pointerout\":case \"pointerover\":case \"pointerup\":a=fd;break;default:a=H}b=a.getPooled(e,b,c,d);Ya(b);return b}},Dd=Cd.isInteractiveTopLevelEventType,\nEd=[];function Fd(a){var b=a.targetInst;do{if(!b){a.ancestors.push(b);break}var c;for(c=b;c.return;)c=c.return;c=3!==c.tag?null:c.stateNode.containerInfo;if(!c)break;a.ancestors.push(b);b=Na(c)}while(b);for(c=0;c<a.ancestors.length;c++)b=a.ancestors[c],Ja(a.topLevelType,b,a.nativeEvent,Zb(a.nativeEvent))}var Gd=!0;function Id(a){Gd=!!a}function L(a,b){if(!b)return null;var c=(Dd(a)?Jd:Kd).bind(null,a);b.addEventListener(a,c,!1)}\nfunction Ld(a,b){if(!b)return null;var c=(Dd(a)?Jd:Kd).bind(null,a);b.addEventListener(a,c,!0)}function Jd(a,b){Tb(Kd,a,b)}function Kd(a,b){if(Gd){var c=Zb(b);c=Na(c);null===c||\"number\"!==typeof c.tag||2===id(c)||(c=null);if(Ed.length){var d=Ed.pop();d.topLevelType=a;d.nativeEvent=b;d.targetInst=c;a=d}else a={topLevelType:a,nativeEvent:b,targetInst:c,ancestors:[]};try{Wb(Fd,a)}finally{a.topLevelType=null,a.nativeEvent=null,a.targetInst=null,a.ancestors.length=0,10>Ed.length&&Ed.push(a)}}}\nvar Md={get _enabled(){return Gd},setEnabled:Id,isEnabled:function(){return Gd},trapBubbledEvent:L,trapCapturedEvent:Ld,dispatchEvent:Kd},Nd={},Od=0,Pd=\"_reactListenersID\"+(\"\"+Math.random()).slice(2);function Qd(a){Object.prototype.hasOwnProperty.call(a,Pd)||(a[Pd]=Od++,Nd[a[Pd]]={});return Nd[a[Pd]]}function Rd(a){for(;a&&a.firstChild;)a=a.firstChild;return a}\nfunction Sd(a,b){var c=Rd(a);a=0;for(var d;c;){if(3===c.nodeType){d=a+c.textContent.length;if(a<=b&&d>=b)return{node:c,offset:b-a};a=d}a:{for(;c;){if(c.nextSibling){c=c.nextSibling;break a}c=c.parentNode}c=void 0}c=Rd(c)}}function Td(a){var b=a&&a.nodeName&&a.nodeName.toLowerCase();return b&&(\"input\"===b&&\"text\"===a.type||\"textarea\"===b||\"true\"===a.contentEditable)}\nvar Ud=m.canUseDOM&&\"documentMode\"in document&&11>=document.documentMode,Vd={select:{phasedRegistrationNames:{bubbled:\"onSelect\",captured:\"onSelectCapture\"},dependencies:\"blur contextmenu focus keydown keyup mousedown mouseup selectionchange\".split(\" \")}},Wd=null,Xd=null,Yd=null,Zd=!1;\nfunction $d(a,b){if(Zd||null==Wd||Wd!==da())return null;var c=Wd;\"selectionStart\"in c&&Td(c)?c={start:c.selectionStart,end:c.selectionEnd}:window.getSelection?(c=window.getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}):c=void 0;return Yd&&ea(Yd,c)?null:(Yd=c,a=H.getPooled(Vd.select,Xd,a,b),a.type=\"select\",a.target=Wd,Ya(a),a)}\nvar ae={eventTypes:Vd,extractEvents:function(a,b,c,d){var e=d.window===d?d.document:9===d.nodeType?d:d.ownerDocument,f;if(!(f=!e)){a:{e=Qd(e);f=sa.onSelect;for(var g=0;g<f.length;g++){var h=f[g];if(!e.hasOwnProperty(h)||!e[h]){e=!1;break a}}e=!0}f=!e}if(f)return null;e=b?Oa(b):window;switch(a){case \"focus\":if(Yb(e)||\"true\"===e.contentEditable)Wd=e,Xd=b,Yd=null;break;case \"blur\":Yd=Xd=Wd=null;break;case \"mousedown\":Zd=!0;break;case \"contextmenu\":case \"mouseup\":return Zd=!1,$d(c,d);case \"selectionchange\":if(Ud)break;\ncase \"keydown\":case \"keyup\":return $d(c,d)}return null}};Ga.injectEventPluginOrder(\"ResponderEventPlugin SimpleEventPlugin TapEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin\".split(\" \"));wa=Qa.getFiberCurrentPropsFromNode;xa=Qa.getInstanceFromNode;ya=Qa.getNodeFromInstance;Ga.injectEventPluginsByName({SimpleEventPlugin:Cd,EnterLeaveEventPlugin:hd,ChangeEventPlugin:$c,SelectEventPlugin:ae,BeforeInputEventPlugin:Ib});var be=void 0;\nbe=\"object\"===typeof performance&&\"function\"===typeof performance.now?function(){return performance.now()}:function(){return Date.now()};var ce=void 0,de=void 0;\nif(m.canUseDOM){var ee=[],fe=0,ge={},he=-1,ie=!1,je=!1,ke=0,le=33,me=33,ne={didTimeout:!1,timeRemaining:function(){var a=ke-be();return 0<a?a:0}},oe=function(a,b){if(ge[b])try{a(ne)}finally{delete ge[b]}},pe=\"__reactIdleCallback$\"+Math.random().toString(36).slice(2);window.addEventListener(\"message\",function(a){if(a.source===window&&a.data===pe&&(ie=!1,0!==ee.length)){if(0!==ee.length&&(a=be(),!(-1===he||he>a))){he=-1;ne.didTimeout=!0;for(var b=0,c=ee.length;b<c;b++){var d=ee[b],e=d.timeoutTime;-1!==\ne&&e<=a?oe(d.scheduledCallback,d.callbackId):-1!==e&&(-1===he||e<he)&&(he=e)}}for(a=be();0<ke-a&&0<ee.length;)a=ee.shift(),ne.didTimeout=!1,oe(a.scheduledCallback,a.callbackId),a=be();0<ee.length&&!je&&(je=!0,requestAnimationFrame(qe))}},!1);var qe=function(a){je=!1;var b=a-ke+me;b<me&&le<me?(8>b&&(b=8),me=b<le?le:b):le=b;ke=a+me;ie||(ie=!0,window.postMessage(pe,\"*\"))};ce=function(a,b){var c=-1;null!=b&&\"number\"===typeof b.timeout&&(c=be()+b.timeout);if(-1===he||-1!==c&&c<he)he=c;fe++;b=fe;ee.push({scheduledCallback:a,\ncallbackId:b,timeoutTime:c});ge[b]=!0;je||(je=!0,requestAnimationFrame(qe));return b};de=function(a){delete ge[a]}}else{var re=0,se={};ce=function(a){var b=re++,c=setTimeout(function(){a({timeRemaining:function(){return Infinity},didTimeout:!1})});se[b]=c;return b};de=function(a){var b=se[a];delete se[a];clearTimeout(b)}}function te(a){var b=\"\";ca.Children.forEach(a,function(a){null==a||\"string\"!==typeof a&&\"number\"!==typeof a||(b+=a)});return b}\nfunction ue(a,b){a=p({children:void 0},b);if(b=te(b.children))a.children=b;return a}function ve(a,b,c,d){a=a.options;if(b){b={};for(var e=0;e<c.length;e++)b[\"$\"+c[e]]=!0;for(c=0;c<a.length;c++)e=b.hasOwnProperty(\"$\"+a[c].value),a[c].selected!==e&&(a[c].selected=e),e&&d&&(a[c].defaultSelected=!0)}else{c=\"\"+c;b=null;for(e=0;e<a.length;e++){if(a[e].value===c){a[e].selected=!0;d&&(a[e].defaultSelected=!0);return}null!==b||a[e].disabled||(b=a[e])}null!==b&&(b.selected=!0)}}\nfunction we(a,b){var c=b.value;a._wrapperState={initialValue:null!=c?c:b.defaultValue,wasMultiple:!!b.multiple}}function xe(a,b){null!=b.dangerouslySetInnerHTML?A(\"91\"):void 0;return p({},b,{value:void 0,defaultValue:void 0,children:\"\"+a._wrapperState.initialValue})}function ye(a,b){var c=b.value;null==c&&(c=b.defaultValue,b=b.children,null!=b&&(null!=c?A(\"92\"):void 0,Array.isArray(b)&&(1>=b.length?void 0:A(\"93\"),b=b[0]),c=\"\"+b),null==c&&(c=\"\"));a._wrapperState={initialValue:\"\"+c}}\nfunction ze(a,b){var c=b.value;null!=c&&(c=\"\"+c,c!==a.value&&(a.value=c),null==b.defaultValue&&(a.defaultValue=c));null!=b.defaultValue&&(a.defaultValue=b.defaultValue)}function Ae(a){var b=a.textContent;b===a._wrapperState.initialValue&&(a.value=b)}var Be={html:\"http://www.w3.org/1999/xhtml\",mathml:\"http://www.w3.org/1998/Math/MathML\",svg:\"http://www.w3.org/2000/svg\"};\nfunction Ce(a){switch(a){case \"svg\":return\"http://www.w3.org/2000/svg\";case \"math\":return\"http://www.w3.org/1998/Math/MathML\";default:return\"http://www.w3.org/1999/xhtml\"}}function De(a,b){return null==a||\"http://www.w3.org/1999/xhtml\"===a?Ce(b):\"http://www.w3.org/2000/svg\"===a&&\"foreignObject\"===b?\"http://www.w3.org/1999/xhtml\":a}\nvar Ee=void 0,Fe=function(a){return\"undefined\"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(b,c,d,e){MSApp.execUnsafeLocalFunction(function(){return a(b,c,d,e)})}:a}(function(a,b){if(a.namespaceURI!==Be.svg||\"innerHTML\"in a)a.innerHTML=b;else{Ee=Ee||document.createElement(\"div\");Ee.innerHTML=\"<svg>\"+b+\"</svg>\";for(b=Ee.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;b.firstChild;)a.appendChild(b.firstChild)}});\nfunction Ge(a,b){if(b){var c=a.firstChild;if(c&&c===a.lastChild&&3===c.nodeType){c.nodeValue=b;return}}a.textContent=b}\nvar He={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,\nstopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ie=[\"Webkit\",\"ms\",\"Moz\",\"O\"];Object.keys(He).forEach(function(a){Ie.forEach(function(b){b=b+a.charAt(0).toUpperCase()+a.substring(1);He[b]=He[a]})});\nfunction Je(a,b){a=a.style;for(var c in b)if(b.hasOwnProperty(c)){var d=0===c.indexOf(\"--\");var e=c;var f=b[c];e=null==f||\"boolean\"===typeof f||\"\"===f?\"\":d||\"number\"!==typeof f||0===f||He.hasOwnProperty(e)&&He[e]?(\"\"+f).trim():f+\"px\";\"float\"===c&&(c=\"cssFloat\");d?a.setProperty(c,e):a[c]=e}}var Ke=p({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});\nfunction Le(a,b,c){b&&(Ke[a]&&(null!=b.children||null!=b.dangerouslySetInnerHTML?A(\"137\",a,c()):void 0),null!=b.dangerouslySetInnerHTML&&(null!=b.children?A(\"60\"):void 0,\"object\"===typeof b.dangerouslySetInnerHTML&&\"__html\"in b.dangerouslySetInnerHTML?void 0:A(\"61\")),null!=b.style&&\"object\"!==typeof b.style?A(\"62\",c()):void 0)}\nfunction Me(a,b){if(-1===a.indexOf(\"-\"))return\"string\"===typeof b.is;switch(a){case \"annotation-xml\":case \"color-profile\":case \"font-face\":case \"font-face-src\":case \"font-face-uri\":case \"font-face-format\":case \"font-face-name\":case \"missing-glyph\":return!1;default:return!0}}var Ne=v.thatReturns(\"\");\nfunction Oe(a,b){a=9===a.nodeType||11===a.nodeType?a:a.ownerDocument;var c=Qd(a);b=sa[b];for(var d=0;d<b.length;d++){var e=b[d];if(!c.hasOwnProperty(e)||!c[e]){switch(e){case \"scroll\":Ld(\"scroll\",a);break;case \"focus\":case \"blur\":Ld(\"focus\",a);Ld(\"blur\",a);c.blur=!0;c.focus=!0;break;case \"cancel\":case \"close\":$b(e,!0)&&Ld(e,a);break;case \"invalid\":case \"submit\":case \"reset\":break;default:-1===jb.indexOf(e)&&L(e,a)}c[e]=!0}}}\nfunction Pe(a,b,c,d){c=9===c.nodeType?c:c.ownerDocument;d===Be.html&&(d=Ce(a));d===Be.html?\"script\"===a?(a=c.createElement(\"div\"),a.innerHTML=\"<script>\\x3c/script>\",a=a.removeChild(a.firstChild)):a=\"string\"===typeof b.is?c.createElement(a,{is:b.is}):c.createElement(a):a=c.createElementNS(d,a);return a}function Qe(a,b){return(9===b.nodeType?b:b.ownerDocument).createTextNode(a)}\nfunction Re(a,b,c,d){var e=Me(b,c);switch(b){case \"iframe\":case \"object\":L(\"load\",a);var f=c;break;case \"video\":case \"audio\":for(f=0;f<jb.length;f++)L(jb[f],a);f=c;break;case \"source\":L(\"error\",a);f=c;break;case \"img\":case \"image\":case \"link\":L(\"error\",a);L(\"load\",a);f=c;break;case \"form\":L(\"reset\",a);L(\"submit\",a);f=c;break;case \"details\":L(\"toggle\",a);f=c;break;case \"input\":Gc(a,c);f=Fc(a,c);L(\"invalid\",a);Oe(d,\"onChange\");break;case \"option\":f=ue(a,c);break;case \"select\":we(a,c);f=p({},c,{value:void 0});\nL(\"invalid\",a);Oe(d,\"onChange\");break;case \"textarea\":ye(a,c);f=xe(a,c);L(\"invalid\",a);Oe(d,\"onChange\");break;default:f=c}Le(b,f,Ne);var g=f,h;for(h in g)if(g.hasOwnProperty(h)){var k=g[h];\"style\"===h?Je(a,k,Ne):\"dangerouslySetInnerHTML\"===h?(k=k?k.__html:void 0,null!=k&&Fe(a,k)):\"children\"===h?\"string\"===typeof k?(\"textarea\"!==b||\"\"!==k)&&Ge(a,k):\"number\"===typeof k&&Ge(a,\"\"+k):\"suppressContentEditableWarning\"!==h&&\"suppressHydrationWarning\"!==h&&\"autoFocus\"!==h&&(ra.hasOwnProperty(h)?null!=k&&Oe(d,\nh):null!=k&&Ec(a,h,k,e))}switch(b){case \"input\":cc(a);Lc(a,c);break;case \"textarea\":cc(a);Ae(a,c);break;case \"option\":null!=c.value&&a.setAttribute(\"value\",c.value);break;case \"select\":a.multiple=!!c.multiple;b=c.value;null!=b?ve(a,!!c.multiple,b,!1):null!=c.defaultValue&&ve(a,!!c.multiple,c.defaultValue,!0);break;default:\"function\"===typeof f.onClick&&(a.onclick=v)}}\nfunction Se(a,b,c,d,e){var f=null;switch(b){case \"input\":c=Fc(a,c);d=Fc(a,d);f=[];break;case \"option\":c=ue(a,c);d=ue(a,d);f=[];break;case \"select\":c=p({},c,{value:void 0});d=p({},d,{value:void 0});f=[];break;case \"textarea\":c=xe(a,c);d=xe(a,d);f=[];break;default:\"function\"!==typeof c.onClick&&\"function\"===typeof d.onClick&&(a.onclick=v)}Le(b,d,Ne);b=a=void 0;var g=null;for(a in c)if(!d.hasOwnProperty(a)&&c.hasOwnProperty(a)&&null!=c[a])if(\"style\"===a){var h=c[a];for(b in h)h.hasOwnProperty(b)&&(g||\n(g={}),g[b]=\"\")}else\"dangerouslySetInnerHTML\"!==a&&\"children\"!==a&&\"suppressContentEditableWarning\"!==a&&\"suppressHydrationWarning\"!==a&&\"autoFocus\"!==a&&(ra.hasOwnProperty(a)?f||(f=[]):(f=f||[]).push(a,null));for(a in d){var k=d[a];h=null!=c?c[a]:void 0;if(d.hasOwnProperty(a)&&k!==h&&(null!=k||null!=h))if(\"style\"===a)if(h){for(b in h)!h.hasOwnProperty(b)||k&&k.hasOwnProperty(b)||(g||(g={}),g[b]=\"\");for(b in k)k.hasOwnProperty(b)&&h[b]!==k[b]&&(g||(g={}),g[b]=k[b])}else g||(f||(f=[]),f.push(a,g)),\ng=k;else\"dangerouslySetInnerHTML\"===a?(k=k?k.__html:void 0,h=h?h.__html:void 0,null!=k&&h!==k&&(f=f||[]).push(a,\"\"+k)):\"children\"===a?h===k||\"string\"!==typeof k&&\"number\"!==typeof k||(f=f||[]).push(a,\"\"+k):\"suppressContentEditableWarning\"!==a&&\"suppressHydrationWarning\"!==a&&(ra.hasOwnProperty(a)?(null!=k&&Oe(e,a),f||h===k||(f=[])):(f=f||[]).push(a,k))}g&&(f=f||[]).push(\"style\",g);return f}\nfunction Te(a,b,c,d,e){\"input\"===c&&\"radio\"===e.type&&null!=e.name&&Ic(a,e);Me(c,d);d=Me(c,e);for(var f=0;f<b.length;f+=2){var g=b[f],h=b[f+1];\"style\"===g?Je(a,h,Ne):\"dangerouslySetInnerHTML\"===g?Fe(a,h):\"children\"===g?Ge(a,h):Ec(a,g,h,d)}switch(c){case \"input\":Jc(a,e);break;case \"textarea\":ze(a,e);break;case \"select\":a._wrapperState.initialValue=void 0,b=a._wrapperState.wasMultiple,a._wrapperState.wasMultiple=!!e.multiple,c=e.value,null!=c?ve(a,!!e.multiple,c,!1):b!==!!e.multiple&&(null!=e.defaultValue?\nve(a,!!e.multiple,e.defaultValue,!0):ve(a,!!e.multiple,e.multiple?[]:\"\",!1))}}\nfunction Ue(a,b,c,d,e){switch(b){case \"iframe\":case \"object\":L(\"load\",a);break;case \"video\":case \"audio\":for(d=0;d<jb.length;d++)L(jb[d],a);break;case \"source\":L(\"error\",a);break;case \"img\":case \"image\":case \"link\":L(\"error\",a);L(\"load\",a);break;case \"form\":L(\"reset\",a);L(\"submit\",a);break;case \"details\":L(\"toggle\",a);break;case \"input\":Gc(a,c);L(\"invalid\",a);Oe(e,\"onChange\");break;case \"select\":we(a,c);L(\"invalid\",a);Oe(e,\"onChange\");break;case \"textarea\":ye(a,c),L(\"invalid\",a),Oe(e,\"onChange\")}Le(b,\nc,Ne);d=null;for(var f in c)if(c.hasOwnProperty(f)){var g=c[f];\"children\"===f?\"string\"===typeof g?a.textContent!==g&&(d=[\"children\",g]):\"number\"===typeof g&&a.textContent!==\"\"+g&&(d=[\"children\",\"\"+g]):ra.hasOwnProperty(f)&&null!=g&&Oe(e,f)}switch(b){case \"input\":cc(a);Lc(a,c);break;case \"textarea\":cc(a);Ae(a,c);break;case \"select\":case \"option\":break;default:\"function\"===typeof c.onClick&&(a.onclick=v)}return d}function Ve(a,b){return a.nodeValue!==b}\nvar We={createElement:Pe,createTextNode:Qe,setInitialProperties:Re,diffProperties:Se,updateProperties:Te,diffHydratedProperties:Ue,diffHydratedText:Ve,warnForUnmatchedText:function(){},warnForDeletedHydratableElement:function(){},warnForDeletedHydratableText:function(){},warnForInsertedHydratedElement:function(){},warnForInsertedHydratedText:function(){},restoreControlledState:function(a,b,c){switch(b){case \"input\":Jc(a,c);b=c.name;if(\"radio\"===c.type&&null!=b){for(c=a;c.parentNode;)c=c.parentNode;\nc=c.querySelectorAll(\"input[name=\"+JSON.stringify(\"\"+b)+'][type=\"radio\"]');for(b=0;b<c.length;b++){var d=c[b];if(d!==a&&d.form===a.form){var e=Pa(d);e?void 0:A(\"90\");dc(d);Jc(d,e)}}}break;case \"textarea\":ze(a,c);break;case \"select\":b=c.value,null!=b&&ve(a,!!c.multiple,b,!1)}}},Xe=null,Ye=null;function Ze(a,b){switch(a){case \"button\":case \"input\":case \"select\":case \"textarea\":return!!b.autoFocus}return!1}\nfunction $e(a,b){return\"textarea\"===a||\"string\"===typeof b.children||\"number\"===typeof b.children||\"object\"===typeof b.dangerouslySetInnerHTML&&null!==b.dangerouslySetInnerHTML&&\"string\"===typeof b.dangerouslySetInnerHTML.__html}var af=be,bf=ce,cf=de;function df(a){for(a=a.nextSibling;a&&1!==a.nodeType&&3!==a.nodeType;)a=a.nextSibling;return a}function ef(a){for(a=a.firstChild;a&&1!==a.nodeType&&3!==a.nodeType;)a=a.nextSibling;return a}new Set;var ff=[],gf=-1;function hf(a){return{current:a}}\nfunction M(a){0>gf||(a.current=ff[gf],ff[gf]=null,gf--)}function N(a,b){gf++;ff[gf]=a.current;a.current=b}var jf=hf(ha),O=hf(!1),kf=ha;function lf(a){return mf(a)?kf:jf.current}\nfunction nf(a,b){var c=a.type.contextTypes;if(!c)return ha;var d=a.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===b)return d.__reactInternalMemoizedMaskedChildContext;var e={},f;for(f in c)e[f]=b[f];d&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=b,a.__reactInternalMemoizedMaskedChildContext=e);return e}function mf(a){return 2===a.tag&&null!=a.type.childContextTypes}function of(a){mf(a)&&(M(O,a),M(jf,a))}function pf(a){M(O,a);M(jf,a)}\nfunction qf(a,b,c){jf.current!==ha?A(\"168\"):void 0;N(jf,b,a);N(O,c,a)}function rf(a,b){var c=a.stateNode,d=a.type.childContextTypes;if(\"function\"!==typeof c.getChildContext)return b;c=c.getChildContext();for(var e in c)e in d?void 0:A(\"108\",tc(a)||\"Unknown\",e);return p({},b,c)}function sf(a){if(!mf(a))return!1;var b=a.stateNode;b=b&&b.__reactInternalMemoizedMergedChildContext||ha;kf=jf.current;N(jf,b,a);N(O,O.current,a);return!0}\nfunction tf(a,b){var c=a.stateNode;c?void 0:A(\"169\");if(b){var d=rf(a,kf);c.__reactInternalMemoizedMergedChildContext=d;M(O,a);M(jf,a);N(jf,d,a)}else M(O,a);N(O,b,a)}\nfunction uf(a,b,c,d){this.tag=a;this.key=c;this.sibling=this.child=this.return=this.stateNode=this.type=null;this.index=0;this.ref=null;this.pendingProps=b;this.memoizedState=this.updateQueue=this.memoizedProps=null;this.mode=d;this.effectTag=0;this.lastEffect=this.firstEffect=this.nextEffect=null;this.expirationTime=0;this.alternate=null}\nfunction vf(a,b,c){var d=a.alternate;null===d?(d=new uf(a.tag,b,a.key,a.mode),d.type=a.type,d.stateNode=a.stateNode,d.alternate=a,a.alternate=d):(d.pendingProps=b,d.effectTag=0,d.nextEffect=null,d.firstEffect=null,d.lastEffect=null);d.expirationTime=c;d.child=a.child;d.memoizedProps=a.memoizedProps;d.memoizedState=a.memoizedState;d.updateQueue=a.updateQueue;d.sibling=a.sibling;d.index=a.index;d.ref=a.ref;return d}\nfunction wf(a,b,c){var d=a.type,e=a.key;a=a.props;if(\"function\"===typeof d)var f=d.prototype&&d.prototype.isReactComponent?2:0;else if(\"string\"===typeof d)f=5;else switch(d){case hc:return xf(a.children,b,c,e);case oc:f=11;b|=3;break;case ic:f=11;b|=2;break;case jc:return d=new uf(15,a,e,b|4),d.type=jc,d.expirationTime=c,d;case qc:f=16;b|=2;break;default:a:{switch(\"object\"===typeof d&&null!==d?d.$$typeof:null){case mc:f=13;break a;case nc:f=12;break a;case pc:f=14;break a;default:A(\"130\",null==d?\nd:typeof d,\"\")}f=void 0}}b=new uf(f,a,e,b);b.type=d;b.expirationTime=c;return b}function xf(a,b,c,d){a=new uf(10,a,d,b);a.expirationTime=c;return a}function yf(a,b,c){a=new uf(6,a,null,b);a.expirationTime=c;return a}function zf(a,b,c){b=new uf(4,null!==a.children?a.children:[],a.key,b);b.expirationTime=c;b.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation};return b}\nfunction Af(a,b,c){b=new uf(3,null,null,b?3:0);a={current:b,containerInfo:a,pendingChildren:null,earliestPendingTime:0,latestPendingTime:0,earliestSuspendedTime:0,latestSuspendedTime:0,latestPingedTime:0,pendingCommitExpirationTime:0,finishedWork:null,context:null,pendingContext:null,hydrate:c,remainingExpirationTime:0,firstBatch:null,nextScheduledRoot:null};return b.stateNode=a}var Bf=null,Cf=null;function Df(a){return function(b){try{return a(b)}catch(c){}}}\nfunction Ef(a){if(\"undefined\"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var b=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(b.isDisabled||!b.supportsFiber)return!0;try{var c=b.inject(a);Bf=Df(function(a){return b.onCommitFiberRoot(c,a)});Cf=Df(function(a){return b.onCommitFiberUnmount(c,a)})}catch(d){}return!0}function Ff(a){\"function\"===typeof Bf&&Bf(a)}function Gf(a){\"function\"===typeof Cf&&Cf(a)}var Hf=!1;\nfunction If(a){return{expirationTime:0,baseState:a,firstUpdate:null,lastUpdate:null,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function Jf(a){return{expirationTime:a.expirationTime,baseState:a.baseState,firstUpdate:a.firstUpdate,lastUpdate:a.lastUpdate,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}\nfunction Kf(a){return{expirationTime:a,tag:0,payload:null,callback:null,next:null,nextEffect:null}}function Lf(a,b,c){null===a.lastUpdate?a.firstUpdate=a.lastUpdate=b:(a.lastUpdate.next=b,a.lastUpdate=b);if(0===a.expirationTime||a.expirationTime>c)a.expirationTime=c}\nfunction Mf(a,b,c){var d=a.alternate;if(null===d){var e=a.updateQueue;var f=null;null===e&&(e=a.updateQueue=If(a.memoizedState))}else e=a.updateQueue,f=d.updateQueue,null===e?null===f?(e=a.updateQueue=If(a.memoizedState),f=d.updateQueue=If(d.memoizedState)):e=a.updateQueue=Jf(f):null===f&&(f=d.updateQueue=Jf(e));null===f||e===f?Lf(e,b,c):null===e.lastUpdate||null===f.lastUpdate?(Lf(e,b,c),Lf(f,b,c)):(Lf(e,b,c),f.lastUpdate=b)}\nfunction Nf(a,b,c){var d=a.updateQueue;d=null===d?a.updateQueue=If(a.memoizedState):Of(a,d);null===d.lastCapturedUpdate?d.firstCapturedUpdate=d.lastCapturedUpdate=b:(d.lastCapturedUpdate.next=b,d.lastCapturedUpdate=b);if(0===d.expirationTime||d.expirationTime>c)d.expirationTime=c}function Of(a,b){var c=a.alternate;null!==c&&b===c.updateQueue&&(b=a.updateQueue=Jf(b));return b}\nfunction Pf(a,b,c,d,e,f){switch(c.tag){case 1:return a=c.payload,\"function\"===typeof a?a.call(f,d,e):a;case 3:a.effectTag=a.effectTag&-1025|64;case 0:a=c.payload;e=\"function\"===typeof a?a.call(f,d,e):a;if(null===e||void 0===e)break;return p({},d,e);case 2:Hf=!0}return d}\nfunction Qf(a,b,c,d,e){Hf=!1;if(!(0===b.expirationTime||b.expirationTime>e)){b=Of(a,b);for(var f=b.baseState,g=null,h=0,k=b.firstUpdate,n=f;null!==k;){var r=k.expirationTime;if(r>e){if(null===g&&(g=k,f=n),0===h||h>r)h=r}else n=Pf(a,b,k,n,c,d),null!==k.callback&&(a.effectTag|=32,k.nextEffect=null,null===b.lastEffect?b.firstEffect=b.lastEffect=k:(b.lastEffect.nextEffect=k,b.lastEffect=k));k=k.next}r=null;for(k=b.firstCapturedUpdate;null!==k;){var w=k.expirationTime;if(w>e){if(null===r&&(r=k,null===\ng&&(f=n)),0===h||h>w)h=w}else n=Pf(a,b,k,n,c,d),null!==k.callback&&(a.effectTag|=32,k.nextEffect=null,null===b.lastCapturedEffect?b.firstCapturedEffect=b.lastCapturedEffect=k:(b.lastCapturedEffect.nextEffect=k,b.lastCapturedEffect=k));k=k.next}null===g&&(b.lastUpdate=null);null===r?b.lastCapturedUpdate=null:a.effectTag|=32;null===g&&null===r&&(f=n);b.baseState=f;b.firstUpdate=g;b.firstCapturedUpdate=r;b.expirationTime=h;a.memoizedState=n}}\nfunction Rf(a,b){\"function\"!==typeof a?A(\"191\",a):void 0;a.call(b)}\nfunction Sf(a,b,c){null!==b.firstCapturedUpdate&&(null!==b.lastUpdate&&(b.lastUpdate.next=b.firstCapturedUpdate,b.lastUpdate=b.lastCapturedUpdate),b.firstCapturedUpdate=b.lastCapturedUpdate=null);a=b.firstEffect;for(b.firstEffect=b.lastEffect=null;null!==a;){var d=a.callback;null!==d&&(a.callback=null,Rf(d,c));a=a.nextEffect}a=b.firstCapturedEffect;for(b.firstCapturedEffect=b.lastCapturedEffect=null;null!==a;)b=a.callback,null!==b&&(a.callback=null,Rf(b,c)),a=a.nextEffect}\nfunction Tf(a,b){return{value:a,source:b,stack:vc(b)}}var Uf=hf(null),Vf=hf(null),Wf=hf(0);function Xf(a){var b=a.type._context;N(Wf,b._changedBits,a);N(Vf,b._currentValue,a);N(Uf,a,a);b._currentValue=a.pendingProps.value;b._changedBits=a.stateNode}function Yf(a){var b=Wf.current,c=Vf.current;M(Uf,a);M(Vf,a);M(Wf,a);a=a.type._context;a._currentValue=c;a._changedBits=b}var Zf={},$f=hf(Zf),ag=hf(Zf),bg=hf(Zf);function cg(a){a===Zf?A(\"174\"):void 0;return a}\nfunction dg(a,b){N(bg,b,a);N(ag,a,a);N($f,Zf,a);var c=b.nodeType;switch(c){case 9:case 11:b=(b=b.documentElement)?b.namespaceURI:De(null,\"\");break;default:c=8===c?b.parentNode:b,b=c.namespaceURI||null,c=c.tagName,b=De(b,c)}M($f,a);N($f,b,a)}function eg(a){M($f,a);M(ag,a);M(bg,a)}function fg(a){ag.current===a&&(M($f,a),M(ag,a))}function hg(a,b,c){var d=a.memoizedState;b=b(c,d);d=null===b||void 0===b?d:p({},d,b);a.memoizedState=d;a=a.updateQueue;null!==a&&0===a.expirationTime&&(a.baseState=d)}\nvar lg={isMounted:function(a){return(a=a._reactInternalFiber)?2===id(a):!1},enqueueSetState:function(a,b,c){a=a._reactInternalFiber;var d=ig();d=jg(d,a);var e=Kf(d);e.payload=b;void 0!==c&&null!==c&&(e.callback=c);Mf(a,e,d);kg(a,d)},enqueueReplaceState:function(a,b,c){a=a._reactInternalFiber;var d=ig();d=jg(d,a);var e=Kf(d);e.tag=1;e.payload=b;void 0!==c&&null!==c&&(e.callback=c);Mf(a,e,d);kg(a,d)},enqueueForceUpdate:function(a,b){a=a._reactInternalFiber;var c=ig();c=jg(c,a);var d=Kf(c);d.tag=2;void 0!==\nb&&null!==b&&(d.callback=b);Mf(a,d,c);kg(a,c)}};function mg(a,b,c,d,e,f){var g=a.stateNode;a=a.type;return\"function\"===typeof g.shouldComponentUpdate?g.shouldComponentUpdate(c,e,f):a.prototype&&a.prototype.isPureReactComponent?!ea(b,c)||!ea(d,e):!0}\nfunction ng(a,b,c,d){a=b.state;\"function\"===typeof b.componentWillReceiveProps&&b.componentWillReceiveProps(c,d);\"function\"===typeof b.UNSAFE_componentWillReceiveProps&&b.UNSAFE_componentWillReceiveProps(c,d);b.state!==a&&lg.enqueueReplaceState(b,b.state,null)}\nfunction og(a,b){var c=a.type,d=a.stateNode,e=a.pendingProps,f=lf(a);d.props=e;d.state=a.memoizedState;d.refs=ha;d.context=nf(a,f);f=a.updateQueue;null!==f&&(Qf(a,f,e,d,b),d.state=a.memoizedState);f=a.type.getDerivedStateFromProps;\"function\"===typeof f&&(hg(a,f,e),d.state=a.memoizedState);\"function\"===typeof c.getDerivedStateFromProps||\"function\"===typeof d.getSnapshotBeforeUpdate||\"function\"!==typeof d.UNSAFE_componentWillMount&&\"function\"!==typeof d.componentWillMount||(c=d.state,\"function\"===typeof d.componentWillMount&&\nd.componentWillMount(),\"function\"===typeof d.UNSAFE_componentWillMount&&d.UNSAFE_componentWillMount(),c!==d.state&&lg.enqueueReplaceState(d,d.state,null),f=a.updateQueue,null!==f&&(Qf(a,f,e,d,b),d.state=a.memoizedState));\"function\"===typeof d.componentDidMount&&(a.effectTag|=4)}var pg=Array.isArray;\nfunction qg(a,b,c){a=c.ref;if(null!==a&&\"function\"!==typeof a&&\"object\"!==typeof a){if(c._owner){c=c._owner;var d=void 0;c&&(2!==c.tag?A(\"110\"):void 0,d=c.stateNode);d?void 0:A(\"147\",a);var e=\"\"+a;if(null!==b&&null!==b.ref&&\"function\"===typeof b.ref&&b.ref._stringRef===e)return b.ref;b=function(a){var b=d.refs===ha?d.refs={}:d.refs;null===a?delete b[e]:b[e]=a};b._stringRef=e;return b}\"string\"!==typeof a?A(\"148\"):void 0;c._owner?void 0:A(\"254\",a)}return a}\nfunction rg(a,b){\"textarea\"!==a.type&&A(\"31\",\"[object Object]\"===Object.prototype.toString.call(b)?\"object with keys {\"+Object.keys(b).join(\", \")+\"}\":b,\"\")}\nfunction sg(a){function b(b,c){if(a){var d=b.lastEffect;null!==d?(d.nextEffect=c,b.lastEffect=c):b.firstEffect=b.lastEffect=c;c.nextEffect=null;c.effectTag=8}}function c(c,d){if(!a)return null;for(;null!==d;)b(c,d),d=d.sibling;return null}function d(a,b){for(a=new Map;null!==b;)null!==b.key?a.set(b.key,b):a.set(b.index,b),b=b.sibling;return a}function e(a,b,c){a=vf(a,b,c);a.index=0;a.sibling=null;return a}function f(b,c,d){b.index=d;if(!a)return c;d=b.alternate;if(null!==d)return d=d.index,d<c?(b.effectTag=\n2,c):d;b.effectTag=2;return c}function g(b){a&&null===b.alternate&&(b.effectTag=2);return b}function h(a,b,c,d){if(null===b||6!==b.tag)return b=yf(c,a.mode,d),b.return=a,b;b=e(b,c,d);b.return=a;return b}function k(a,b,c,d){if(null!==b&&b.type===c.type)return d=e(b,c.props,d),d.ref=qg(a,b,c),d.return=a,d;d=wf(c,a.mode,d);d.ref=qg(a,b,c);d.return=a;return d}function n(a,b,c,d){if(null===b||4!==b.tag||b.stateNode.containerInfo!==c.containerInfo||b.stateNode.implementation!==c.implementation)return b=\nzf(c,a.mode,d),b.return=a,b;b=e(b,c.children||[],d);b.return=a;return b}function r(a,b,c,d,f){if(null===b||10!==b.tag)return b=xf(c,a.mode,d,f),b.return=a,b;b=e(b,c,d);b.return=a;return b}function w(a,b,c){if(\"string\"===typeof b||\"number\"===typeof b)return b=yf(\"\"+b,a.mode,c),b.return=a,b;if(\"object\"===typeof b&&null!==b){switch(b.$$typeof){case fc:return c=wf(b,a.mode,c),c.ref=qg(a,null,b),c.return=a,c;case gc:return b=zf(b,a.mode,c),b.return=a,b}if(pg(b)||sc(b))return b=xf(b,a.mode,c,null),b.return=\na,b;rg(a,b)}return null}function P(a,b,c,d){var e=null!==b?b.key:null;if(\"string\"===typeof c||\"number\"===typeof c)return null!==e?null:h(a,b,\"\"+c,d);if(\"object\"===typeof c&&null!==c){switch(c.$$typeof){case fc:return c.key===e?c.type===hc?r(a,b,c.props.children,d,e):k(a,b,c,d):null;case gc:return c.key===e?n(a,b,c,d):null}if(pg(c)||sc(c))return null!==e?null:r(a,b,c,d,null);rg(a,c)}return null}function kc(a,b,c,d,e){if(\"string\"===typeof d||\"number\"===typeof d)return a=a.get(c)||null,h(b,a,\"\"+d,e);\nif(\"object\"===typeof d&&null!==d){switch(d.$$typeof){case fc:return a=a.get(null===d.key?c:d.key)||null,d.type===hc?r(b,a,d.props.children,e,d.key):k(b,a,d,e);case gc:return a=a.get(null===d.key?c:d.key)||null,n(b,a,d,e)}if(pg(d)||sc(d))return a=a.get(c)||null,r(b,a,d,e,null);rg(b,d)}return null}function Hd(e,g,h,k){for(var u=null,x=null,t=g,q=g=0,n=null;null!==t&&q<h.length;q++){t.index>q?(n=t,t=null):n=t.sibling;var l=P(e,t,h[q],k);if(null===l){null===t&&(t=n);break}a&&t&&null===l.alternate&&b(e,\nt);g=f(l,g,q);null===x?u=l:x.sibling=l;x=l;t=n}if(q===h.length)return c(e,t),u;if(null===t){for(;q<h.length;q++)if(t=w(e,h[q],k))g=f(t,g,q),null===x?u=t:x.sibling=t,x=t;return u}for(t=d(e,t);q<h.length;q++)if(n=kc(t,e,q,h[q],k))a&&null!==n.alternate&&t.delete(null===n.key?q:n.key),g=f(n,g,q),null===x?u=n:x.sibling=n,x=n;a&&t.forEach(function(a){return b(e,a)});return u}function E(e,g,h,k){var t=sc(h);\"function\"!==typeof t?A(\"150\"):void 0;h=t.call(h);null==h?A(\"151\"):void 0;for(var u=t=null,n=g,x=\ng=0,y=null,l=h.next();null!==n&&!l.done;x++,l=h.next()){n.index>x?(y=n,n=null):y=n.sibling;var r=P(e,n,l.value,k);if(null===r){n||(n=y);break}a&&n&&null===r.alternate&&b(e,n);g=f(r,g,x);null===u?t=r:u.sibling=r;u=r;n=y}if(l.done)return c(e,n),t;if(null===n){for(;!l.done;x++,l=h.next())l=w(e,l.value,k),null!==l&&(g=f(l,g,x),null===u?t=l:u.sibling=l,u=l);return t}for(n=d(e,n);!l.done;x++,l=h.next())l=kc(n,e,x,l.value,k),null!==l&&(a&&null!==l.alternate&&n.delete(null===l.key?x:l.key),g=f(l,g,x),null===\nu?t=l:u.sibling=l,u=l);a&&n.forEach(function(a){return b(e,a)});return t}return function(a,d,f,h){\"object\"===typeof f&&null!==f&&f.type===hc&&null===f.key&&(f=f.props.children);var k=\"object\"===typeof f&&null!==f;if(k)switch(f.$$typeof){case fc:a:{var n=f.key;for(k=d;null!==k;){if(k.key===n)if(10===k.tag?f.type===hc:k.type===f.type){c(a,k.sibling);d=e(k,f.type===hc?f.props.children:f.props,h);d.ref=qg(a,k,f);d.return=a;a=d;break a}else{c(a,k);break}else b(a,k);k=k.sibling}f.type===hc?(d=xf(f.props.children,\na.mode,h,f.key),d.return=a,a=d):(h=wf(f,a.mode,h),h.ref=qg(a,d,f),h.return=a,a=h)}return g(a);case gc:a:{for(k=f.key;null!==d;){if(d.key===k)if(4===d.tag&&d.stateNode.containerInfo===f.containerInfo&&d.stateNode.implementation===f.implementation){c(a,d.sibling);d=e(d,f.children||[],h);d.return=a;a=d;break a}else{c(a,d);break}else b(a,d);d=d.sibling}d=zf(f,a.mode,h);d.return=a;a=d}return g(a)}if(\"string\"===typeof f||\"number\"===typeof f)return f=\"\"+f,null!==d&&6===d.tag?(c(a,d.sibling),d=e(d,f,h),d.return=\na,a=d):(c(a,d),d=yf(f,a.mode,h),d.return=a,a=d),g(a);if(pg(f))return Hd(a,d,f,h);if(sc(f))return E(a,d,f,h);k&&rg(a,f);if(\"undefined\"===typeof f)switch(a.tag){case 2:case 1:h=a.type,A(\"152\",h.displayName||h.name||\"Component\")}return c(a,d)}}var tg=sg(!0),ug=sg(!1),vg=null,wg=null,xg=!1;function yg(a,b){var c=new uf(5,null,null,0);c.type=\"DELETED\";c.stateNode=b;c.return=a;c.effectTag=8;null!==a.lastEffect?(a.lastEffect.nextEffect=c,a.lastEffect=c):a.firstEffect=a.lastEffect=c}\nfunction zg(a,b){switch(a.tag){case 5:var c=a.type;b=1!==b.nodeType||c.toLowerCase()!==b.nodeName.toLowerCase()?null:b;return null!==b?(a.stateNode=b,!0):!1;case 6:return b=\"\"===a.pendingProps||3!==b.nodeType?null:b,null!==b?(a.stateNode=b,!0):!1;default:return!1}}function Ag(a){if(xg){var b=wg;if(b){var c=b;if(!zg(a,b)){b=df(c);if(!b||!zg(a,b)){a.effectTag|=2;xg=!1;vg=a;return}yg(vg,c)}vg=a;wg=ef(b)}else a.effectTag|=2,xg=!1,vg=a}}\nfunction Bg(a){for(a=a.return;null!==a&&5!==a.tag&&3!==a.tag;)a=a.return;vg=a}function Cg(a){if(a!==vg)return!1;if(!xg)return Bg(a),xg=!0,!1;var b=a.type;if(5!==a.tag||\"head\"!==b&&\"body\"!==b&&!$e(b,a.memoizedProps))for(b=wg;b;)yg(a,b),b=df(b);Bg(a);wg=vg?df(a.stateNode):null;return!0}function Dg(){wg=vg=null;xg=!1}function Q(a,b,c){Eg(a,b,c,b.expirationTime)}function Eg(a,b,c,d){b.child=null===a?ug(b,null,c,d):tg(b,a.child,c,d)}\nfunction Fg(a,b){var c=b.ref;if(null===a&&null!==c||null!==a&&a.ref!==c)b.effectTag|=128}function Gg(a,b,c,d,e){Fg(a,b);var f=0!==(b.effectTag&64);if(!c&&!f)return d&&tf(b,!1),R(a,b);c=b.stateNode;ec.current=b;var g=f?null:c.render();b.effectTag|=1;f&&(Eg(a,b,null,e),b.child=null);Eg(a,b,g,e);b.memoizedState=c.state;b.memoizedProps=c.props;d&&tf(b,!0);return b.child}\nfunction Hg(a){var b=a.stateNode;b.pendingContext?qf(a,b.pendingContext,b.pendingContext!==b.context):b.context&&qf(a,b.context,!1);dg(a,b.containerInfo)}\nfunction Ig(a,b,c,d){var e=a.child;null!==e&&(e.return=a);for(;null!==e;){switch(e.tag){case 12:var f=e.stateNode|0;if(e.type===b&&0!==(f&c)){for(f=e;null!==f;){var g=f.alternate;if(0===f.expirationTime||f.expirationTime>d)f.expirationTime=d,null!==g&&(0===g.expirationTime||g.expirationTime>d)&&(g.expirationTime=d);else if(null!==g&&(0===g.expirationTime||g.expirationTime>d))g.expirationTime=d;else break;f=f.return}f=null}else f=e.child;break;case 13:f=e.type===a.type?null:e.child;break;default:f=\ne.child}if(null!==f)f.return=e;else for(f=e;null!==f;){if(f===a){f=null;break}e=f.sibling;if(null!==e){e.return=f.return;f=e;break}f=f.return}e=f}}\nfunction Jg(a,b,c){var d=b.type._context,e=b.pendingProps,f=b.memoizedProps,g=!0;if(O.current)g=!1;else if(f===e)return b.stateNode=0,Xf(b),R(a,b);var h=e.value;b.memoizedProps=e;if(null===f)h=1073741823;else if(f.value===e.value){if(f.children===e.children&&g)return b.stateNode=0,Xf(b),R(a,b);h=0}else{var k=f.value;if(k===h&&(0!==k||1/k===1/h)||k!==k&&h!==h){if(f.children===e.children&&g)return b.stateNode=0,Xf(b),R(a,b);h=0}else if(h=\"function\"===typeof d._calculateChangedBits?d._calculateChangedBits(k,\nh):1073741823,h|=0,0===h){if(f.children===e.children&&g)return b.stateNode=0,Xf(b),R(a,b)}else Ig(b,d,h,c)}b.stateNode=h;Xf(b);Q(a,b,e.children);return b.child}function R(a,b){null!==a&&b.child!==a.child?A(\"153\"):void 0;if(null!==b.child){a=b.child;var c=vf(a,a.pendingProps,a.expirationTime);b.child=c;for(c.return=b;null!==a.sibling;)a=a.sibling,c=c.sibling=vf(a,a.pendingProps,a.expirationTime),c.return=b;c.sibling=null}return b.child}\nfunction Kg(a,b,c){if(0===b.expirationTime||b.expirationTime>c){switch(b.tag){case 3:Hg(b);break;case 2:sf(b);break;case 4:dg(b,b.stateNode.containerInfo);break;case 13:Xf(b)}return null}switch(b.tag){case 0:null!==a?A(\"155\"):void 0;var d=b.type,e=b.pendingProps,f=lf(b);f=nf(b,f);d=d(e,f);b.effectTag|=1;\"object\"===typeof d&&null!==d&&\"function\"===typeof d.render&&void 0===d.$$typeof?(f=b.type,b.tag=2,b.memoizedState=null!==d.state&&void 0!==d.state?d.state:null,f=f.getDerivedStateFromProps,\"function\"===\ntypeof f&&hg(b,f,e),e=sf(b),d.updater=lg,b.stateNode=d,d._reactInternalFiber=b,og(b,c),a=Gg(a,b,!0,e,c)):(b.tag=1,Q(a,b,d),b.memoizedProps=e,a=b.child);return a;case 1:return e=b.type,c=b.pendingProps,O.current||b.memoizedProps!==c?(d=lf(b),d=nf(b,d),e=e(c,d),b.effectTag|=1,Q(a,b,e),b.memoizedProps=c,a=b.child):a=R(a,b),a;case 2:e=sf(b);if(null===a)if(null===b.stateNode){var g=b.pendingProps,h=b.type;d=lf(b);var k=2===b.tag&&null!=b.type.contextTypes;f=k?nf(b,d):ha;g=new h(g,f);b.memoizedState=null!==\ng.state&&void 0!==g.state?g.state:null;g.updater=lg;b.stateNode=g;g._reactInternalFiber=b;k&&(k=b.stateNode,k.__reactInternalMemoizedUnmaskedChildContext=d,k.__reactInternalMemoizedMaskedChildContext=f);og(b,c);d=!0}else{h=b.type;d=b.stateNode;k=b.memoizedProps;f=b.pendingProps;d.props=k;var n=d.context;g=lf(b);g=nf(b,g);var r=h.getDerivedStateFromProps;(h=\"function\"===typeof r||\"function\"===typeof d.getSnapshotBeforeUpdate)||\"function\"!==typeof d.UNSAFE_componentWillReceiveProps&&\"function\"!==typeof d.componentWillReceiveProps||\n(k!==f||n!==g)&&ng(b,d,f,g);Hf=!1;var w=b.memoizedState;n=d.state=w;var P=b.updateQueue;null!==P&&(Qf(b,P,f,d,c),n=b.memoizedState);k!==f||w!==n||O.current||Hf?(\"function\"===typeof r&&(hg(b,r,f),n=b.memoizedState),(k=Hf||mg(b,k,f,w,n,g))?(h||\"function\"!==typeof d.UNSAFE_componentWillMount&&\"function\"!==typeof d.componentWillMount||(\"function\"===typeof d.componentWillMount&&d.componentWillMount(),\"function\"===typeof d.UNSAFE_componentWillMount&&d.UNSAFE_componentWillMount()),\"function\"===typeof d.componentDidMount&&\n(b.effectTag|=4)):(\"function\"===typeof d.componentDidMount&&(b.effectTag|=4),b.memoizedProps=f,b.memoizedState=n),d.props=f,d.state=n,d.context=g,d=k):(\"function\"===typeof d.componentDidMount&&(b.effectTag|=4),d=!1)}else h=b.type,d=b.stateNode,f=b.memoizedProps,k=b.pendingProps,d.props=f,n=d.context,g=lf(b),g=nf(b,g),r=h.getDerivedStateFromProps,(h=\"function\"===typeof r||\"function\"===typeof d.getSnapshotBeforeUpdate)||\"function\"!==typeof d.UNSAFE_componentWillReceiveProps&&\"function\"!==typeof d.componentWillReceiveProps||\n(f!==k||n!==g)&&ng(b,d,k,g),Hf=!1,n=b.memoizedState,w=d.state=n,P=b.updateQueue,null!==P&&(Qf(b,P,k,d,c),w=b.memoizedState),f!==k||n!==w||O.current||Hf?(\"function\"===typeof r&&(hg(b,r,k),w=b.memoizedState),(r=Hf||mg(b,f,k,n,w,g))?(h||\"function\"!==typeof d.UNSAFE_componentWillUpdate&&\"function\"!==typeof d.componentWillUpdate||(\"function\"===typeof d.componentWillUpdate&&d.componentWillUpdate(k,w,g),\"function\"===typeof d.UNSAFE_componentWillUpdate&&d.UNSAFE_componentWillUpdate(k,w,g)),\"function\"===typeof d.componentDidUpdate&&\n(b.effectTag|=4),\"function\"===typeof d.getSnapshotBeforeUpdate&&(b.effectTag|=256)):(\"function\"!==typeof d.componentDidUpdate||f===a.memoizedProps&&n===a.memoizedState||(b.effectTag|=4),\"function\"!==typeof d.getSnapshotBeforeUpdate||f===a.memoizedProps&&n===a.memoizedState||(b.effectTag|=256),b.memoizedProps=k,b.memoizedState=w),d.props=k,d.state=w,d.context=g,d=r):(\"function\"!==typeof d.componentDidUpdate||f===a.memoizedProps&&n===a.memoizedState||(b.effectTag|=4),\"function\"!==typeof d.getSnapshotBeforeUpdate||\nf===a.memoizedProps&&n===a.memoizedState||(b.effectTag|=256),d=!1);return Gg(a,b,d,e,c);case 3:Hg(b);e=b.updateQueue;if(null!==e)if(d=b.memoizedState,d=null!==d?d.element:null,Qf(b,e,b.pendingProps,null,c),e=b.memoizedState.element,e===d)Dg(),a=R(a,b);else{d=b.stateNode;if(d=(null===a||null===a.child)&&d.hydrate)wg=ef(b.stateNode.containerInfo),vg=b,d=xg=!0;d?(b.effectTag|=2,b.child=ug(b,null,e,c)):(Dg(),Q(a,b,e));a=b.child}else Dg(),a=R(a,b);return a;case 5:a:{cg(bg.current);e=cg($f.current);d=De(e,\nb.type);e!==d&&(N(ag,b,b),N($f,d,b));null===a&&Ag(b);e=b.type;k=b.memoizedProps;d=b.pendingProps;f=null!==a?a.memoizedProps:null;if(!O.current&&k===d){if(k=b.mode&1&&!!d.hidden)b.expirationTime=1073741823;if(!k||1073741823!==c){a=R(a,b);break a}}k=d.children;$e(e,d)?k=null:f&&$e(e,f)&&(b.effectTag|=16);Fg(a,b);1073741823!==c&&b.mode&1&&d.hidden?(b.expirationTime=1073741823,b.memoizedProps=d,a=null):(Q(a,b,k),b.memoizedProps=d,a=b.child)}return a;case 6:return null===a&&Ag(b),b.memoizedProps=b.pendingProps,\nnull;case 16:return null;case 4:return dg(b,b.stateNode.containerInfo),e=b.pendingProps,O.current||b.memoizedProps!==e?(null===a?b.child=tg(b,null,e,c):Q(a,b,e),b.memoizedProps=e,a=b.child):a=R(a,b),a;case 14:return e=b.type.render,c=b.pendingProps,d=b.ref,O.current||b.memoizedProps!==c||d!==(null!==a?a.ref:null)?(e=e(c,d),Q(a,b,e),b.memoizedProps=c,a=b.child):a=R(a,b),a;case 10:return c=b.pendingProps,O.current||b.memoizedProps!==c?(Q(a,b,c),b.memoizedProps=c,a=b.child):a=R(a,b),a;case 11:return c=\nb.pendingProps.children,O.current||null!==c&&b.memoizedProps!==c?(Q(a,b,c),b.memoizedProps=c,a=b.child):a=R(a,b),a;case 15:return c=b.pendingProps,b.memoizedProps===c?a=R(a,b):(Q(a,b,c.children),b.memoizedProps=c,a=b.child),a;case 13:return Jg(a,b,c);case 12:a:if(d=b.type,f=b.pendingProps,k=b.memoizedProps,e=d._currentValue,g=d._changedBits,O.current||0!==g||k!==f){b.memoizedProps=f;h=f.unstable_observedBits;if(void 0===h||null===h)h=1073741823;b.stateNode=h;if(0!==(g&h))Ig(b,d,g,c);else if(k===f){a=\nR(a,b);break a}c=f.children;c=c(e);b.effectTag|=1;Q(a,b,c);a=b.child}else a=R(a,b);return a;default:A(\"156\")}}function Lg(a){a.effectTag|=4}var Pg=void 0,Qg=void 0,Rg=void 0;Pg=function(){};Qg=function(a,b,c){(b.updateQueue=c)&&Lg(b)};Rg=function(a,b,c,d){c!==d&&Lg(b)};\nfunction Sg(a,b){var c=b.pendingProps;switch(b.tag){case 1:return null;case 2:return of(b),null;case 3:eg(b);pf(b);var d=b.stateNode;d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null);if(null===a||null===a.child)Cg(b),b.effectTag&=-3;Pg(b);return null;case 5:fg(b);d=cg(bg.current);var e=b.type;if(null!==a&&null!=b.stateNode){var f=a.memoizedProps,g=b.stateNode,h=cg($f.current);g=Se(g,e,f,c,d);Qg(a,b,g,e,f,c,d,h);a.ref!==b.ref&&(b.effectTag|=128)}else{if(!c)return null===b.stateNode?\nA(\"166\"):void 0,null;a=cg($f.current);if(Cg(b))c=b.stateNode,e=b.type,f=b.memoizedProps,c[C]=b,c[Ma]=f,d=Ue(c,e,f,a,d),b.updateQueue=d,null!==d&&Lg(b);else{a=Pe(e,c,d,a);a[C]=b;a[Ma]=c;a:for(f=b.child;null!==f;){if(5===f.tag||6===f.tag)a.appendChild(f.stateNode);else if(4!==f.tag&&null!==f.child){f.child.return=f;f=f.child;continue}if(f===b)break;for(;null===f.sibling;){if(null===f.return||f.return===b)break a;f=f.return}f.sibling.return=f.return;f=f.sibling}Re(a,e,c,d);Ze(e,c)&&Lg(b);b.stateNode=\na}null!==b.ref&&(b.effectTag|=128)}return null;case 6:if(a&&null!=b.stateNode)Rg(a,b,a.memoizedProps,c);else{if(\"string\"!==typeof c)return null===b.stateNode?A(\"166\"):void 0,null;d=cg(bg.current);cg($f.current);Cg(b)?(d=b.stateNode,c=b.memoizedProps,d[C]=b,Ve(d,c)&&Lg(b)):(d=Qe(c,d),d[C]=b,b.stateNode=d)}return null;case 14:return null;case 16:return null;case 10:return null;case 11:return null;case 15:return null;case 4:return eg(b),Pg(b),null;case 13:return Yf(b),null;case 12:return null;case 0:A(\"167\");\ndefault:A(\"156\")}}function Tg(a,b){var c=b.source;null===b.stack&&null!==c&&vc(c);null!==c&&tc(c);b=b.value;null!==a&&2===a.tag&&tc(a);try{b&&b.suppressReactErrorLogging||console.error(b)}catch(d){d&&d.suppressReactErrorLogging||console.error(d)}}function Ug(a){var b=a.ref;if(null!==b)if(\"function\"===typeof b)try{b(null)}catch(c){Vg(a,c)}else b.current=null}\nfunction Wg(a){\"function\"===typeof Gf&&Gf(a);switch(a.tag){case 2:Ug(a);var b=a.stateNode;if(\"function\"===typeof b.componentWillUnmount)try{b.props=a.memoizedProps,b.state=a.memoizedState,b.componentWillUnmount()}catch(c){Vg(a,c)}break;case 5:Ug(a);break;case 4:Xg(a)}}function Yg(a){return 5===a.tag||3===a.tag||4===a.tag}\nfunction Zg(a){a:{for(var b=a.return;null!==b;){if(Yg(b)){var c=b;break a}b=b.return}A(\"160\");c=void 0}var d=b=void 0;switch(c.tag){case 5:b=c.stateNode;d=!1;break;case 3:b=c.stateNode.containerInfo;d=!0;break;case 4:b=c.stateNode.containerInfo;d=!0;break;default:A(\"161\")}c.effectTag&16&&(Ge(b,\"\"),c.effectTag&=-17);a:b:for(c=a;;){for(;null===c.sibling;){if(null===c.return||Yg(c.return)){c=null;break a}c=c.return}c.sibling.return=c.return;for(c=c.sibling;5!==c.tag&&6!==c.tag;){if(c.effectTag&2)continue b;\nif(null===c.child||4===c.tag)continue b;else c.child.return=c,c=c.child}if(!(c.effectTag&2)){c=c.stateNode;break a}}for(var e=a;;){if(5===e.tag||6===e.tag)if(c)if(d){var f=b,g=e.stateNode,h=c;8===f.nodeType?f.parentNode.insertBefore(g,h):f.insertBefore(g,h)}else b.insertBefore(e.stateNode,c);else d?(f=b,g=e.stateNode,8===f.nodeType?f.parentNode.insertBefore(g,f):f.appendChild(g)):b.appendChild(e.stateNode);else if(4!==e.tag&&null!==e.child){e.child.return=e;e=e.child;continue}if(e===a)break;for(;null===\ne.sibling;){if(null===e.return||e.return===a)return;e=e.return}e.sibling.return=e.return;e=e.sibling}}\nfunction Xg(a){for(var b=a,c=!1,d=void 0,e=void 0;;){if(!c){c=b.return;a:for(;;){null===c?A(\"160\"):void 0;switch(c.tag){case 5:d=c.stateNode;e=!1;break a;case 3:d=c.stateNode.containerInfo;e=!0;break a;case 4:d=c.stateNode.containerInfo;e=!0;break a}c=c.return}c=!0}if(5===b.tag||6===b.tag){a:for(var f=b,g=f;;)if(Wg(g),null!==g.child&&4!==g.tag)g.child.return=g,g=g.child;else{if(g===f)break;for(;null===g.sibling;){if(null===g.return||g.return===f)break a;g=g.return}g.sibling.return=g.return;g=g.sibling}e?\n(f=d,g=b.stateNode,8===f.nodeType?f.parentNode.removeChild(g):f.removeChild(g)):d.removeChild(b.stateNode)}else if(4===b.tag?d=b.stateNode.containerInfo:Wg(b),null!==b.child){b.child.return=b;b=b.child;continue}if(b===a)break;for(;null===b.sibling;){if(null===b.return||b.return===a)return;b=b.return;4===b.tag&&(c=!1)}b.sibling.return=b.return;b=b.sibling}}\nfunction $g(a,b){switch(b.tag){case 2:break;case 5:var c=b.stateNode;if(null!=c){var d=b.memoizedProps;a=null!==a?a.memoizedProps:d;var e=b.type,f=b.updateQueue;b.updateQueue=null;null!==f&&(c[Ma]=d,Te(c,f,e,a,d))}break;case 6:null===b.stateNode?A(\"162\"):void 0;b.stateNode.nodeValue=b.memoizedProps;break;case 3:break;case 15:break;case 16:break;default:A(\"163\")}}function ah(a,b,c){c=Kf(c);c.tag=3;c.payload={element:null};var d=b.value;c.callback=function(){bh(d);Tg(a,b)};return c}\nfunction ch(a,b,c){c=Kf(c);c.tag=3;var d=a.stateNode;null!==d&&\"function\"===typeof d.componentDidCatch&&(c.callback=function(){null===dh?dh=new Set([this]):dh.add(this);var c=b.value,d=b.stack;Tg(a,b);this.componentDidCatch(c,{componentStack:null!==d?d:\"\"})});return c}\nfunction eh(a,b,c,d,e,f){c.effectTag|=512;c.firstEffect=c.lastEffect=null;d=Tf(d,c);a=b;do{switch(a.tag){case 3:a.effectTag|=1024;d=ah(a,d,f);Nf(a,d,f);return;case 2:if(b=d,c=a.stateNode,0===(a.effectTag&64)&&null!==c&&\"function\"===typeof c.componentDidCatch&&(null===dh||!dh.has(c))){a.effectTag|=1024;d=ch(a,b,f);Nf(a,d,f);return}}a=a.return}while(null!==a)}\nfunction fh(a){switch(a.tag){case 2:of(a);var b=a.effectTag;return b&1024?(a.effectTag=b&-1025|64,a):null;case 3:return eg(a),pf(a),b=a.effectTag,b&1024?(a.effectTag=b&-1025|64,a):null;case 5:return fg(a),null;case 16:return b=a.effectTag,b&1024?(a.effectTag=b&-1025|64,a):null;case 4:return eg(a),null;case 13:return Yf(a),null;default:return null}}var gh=af(),hh=2,ih=gh,jh=0,kh=0,lh=!1,S=null,mh=null,T=0,nh=-1,oh=!1,U=null,ph=!1,qh=!1,dh=null;\nfunction rh(){if(null!==S)for(var a=S.return;null!==a;){var b=a;switch(b.tag){case 2:of(b);break;case 3:eg(b);pf(b);break;case 5:fg(b);break;case 4:eg(b);break;case 13:Yf(b)}a=a.return}mh=null;T=0;nh=-1;oh=!1;S=null;qh=!1}\nfunction sh(a){for(;;){var b=a.alternate,c=a.return,d=a.sibling;if(0===(a.effectTag&512)){b=Sg(b,a,T);var e=a;if(1073741823===T||1073741823!==e.expirationTime){var f=0;switch(e.tag){case 3:case 2:var g=e.updateQueue;null!==g&&(f=g.expirationTime)}for(g=e.child;null!==g;)0!==g.expirationTime&&(0===f||f>g.expirationTime)&&(f=g.expirationTime),g=g.sibling;e.expirationTime=f}if(null!==b)return b;null!==c&&0===(c.effectTag&512)&&(null===c.firstEffect&&(c.firstEffect=a.firstEffect),null!==a.lastEffect&&\n(null!==c.lastEffect&&(c.lastEffect.nextEffect=a.firstEffect),c.lastEffect=a.lastEffect),1<a.effectTag&&(null!==c.lastEffect?c.lastEffect.nextEffect=a:c.firstEffect=a,c.lastEffect=a));if(null!==d)return d;if(null!==c)a=c;else{qh=!0;break}}else{a=fh(a,oh,T);if(null!==a)return a.effectTag&=511,a;null!==c&&(c.firstEffect=c.lastEffect=null,c.effectTag|=512);if(null!==d)return d;if(null!==c)a=c;else break}}return null}\nfunction th(a){var b=Kg(a.alternate,a,T);null===b&&(b=sh(a));ec.current=null;return b}\nfunction uh(a,b,c){lh?A(\"243\"):void 0;lh=!0;if(b!==T||a!==mh||null===S)rh(),mh=a,T=b,nh=-1,S=vf(mh.current,null,T),a.pendingCommitExpirationTime=0;var d=!1;oh=!c||T<=hh;do{try{if(c)for(;null!==S&&!vh();)S=th(S);else for(;null!==S;)S=th(S)}catch(f){if(null===S)d=!0,bh(f);else{null===S?A(\"271\"):void 0;c=S;var e=c.return;if(null===e){d=!0;bh(f);break}eh(a,e,c,f,oh,T,ih);S=sh(c)}}break}while(1);lh=!1;if(d)return null;if(null===S){if(qh)return a.pendingCommitExpirationTime=b,a.current.alternate;oh?A(\"262\"):\nvoid 0;0<=nh&&setTimeout(function(){var b=a.current.expirationTime;0!==b&&(0===a.remainingExpirationTime||a.remainingExpirationTime<b)&&wh(a,b)},nh);xh(a.current.expirationTime)}return null}\nfunction Vg(a,b){var c;a:{lh&&!ph?A(\"263\"):void 0;for(c=a.return;null!==c;){switch(c.tag){case 2:var d=c.stateNode;if(\"function\"===typeof c.type.getDerivedStateFromCatch||\"function\"===typeof d.componentDidCatch&&(null===dh||!dh.has(d))){a=Tf(b,a);a=ch(c,a,1);Mf(c,a,1);kg(c,1);c=void 0;break a}break;case 3:a=Tf(b,a);a=ah(c,a,1);Mf(c,a,1);kg(c,1);c=void 0;break a}c=c.return}3===a.tag&&(c=Tf(b,a),c=ah(a,c,1),Mf(a,c,1),kg(a,1));c=void 0}return c}\nfunction yh(){var a=2+25*(((ig()-2+500)/25|0)+1);a<=jh&&(a=jh+1);return jh=a}function jg(a,b){a=0!==kh?kh:lh?ph?1:T:b.mode&1?zh?2+10*(((a-2+15)/10|0)+1):2+25*(((a-2+500)/25|0)+1):1;zh&&(0===Ah||a>Ah)&&(Ah=a);return a}\nfunction kg(a,b){for(;null!==a;){if(0===a.expirationTime||a.expirationTime>b)a.expirationTime=b;null!==a.alternate&&(0===a.alternate.expirationTime||a.alternate.expirationTime>b)&&(a.alternate.expirationTime=b);if(null===a.return)if(3===a.tag){var c=a.stateNode;!lh&&0!==T&&b<T&&rh();var d=c.current.expirationTime;lh&&!ph&&mh===c||wh(c,d);Bh>Ch&&A(\"185\")}else break;a=a.return}}function ig(){ih=af()-gh;return hh=(ih/10|0)+2}\nfunction Dh(a){var b=kh;kh=2+25*(((ig()-2+500)/25|0)+1);try{return a()}finally{kh=b}}function Eh(a,b,c,d,e){var f=kh;kh=1;try{return a(b,c,d,e)}finally{kh=f}}var Fh=null,V=null,Gh=0,Hh=-1,W=!1,X=null,Y=0,Ah=0,Ih=!1,Jh=!1,Kh=null,Lh=null,Z=!1,Mh=!1,zh=!1,Nh=null,Ch=1E3,Bh=0,Oh=1;function Ph(a){if(0!==Gh){if(a>Gh)return;cf(Hh)}var b=af()-gh;Gh=a;Hh=bf(Qh,{timeout:10*(a-2)-b})}\nfunction wh(a,b){if(null===a.nextScheduledRoot)a.remainingExpirationTime=b,null===V?(Fh=V=a,a.nextScheduledRoot=a):(V=V.nextScheduledRoot=a,V.nextScheduledRoot=Fh);else{var c=a.remainingExpirationTime;if(0===c||b<c)a.remainingExpirationTime=b}W||(Z?Mh&&(X=a,Y=1,Rh(a,1,!1)):1===b?Sh():Ph(b))}\nfunction Th(){var a=0,b=null;if(null!==V)for(var c=V,d=Fh;null!==d;){var e=d.remainingExpirationTime;if(0===e){null===c||null===V?A(\"244\"):void 0;if(d===d.nextScheduledRoot){Fh=V=d.nextScheduledRoot=null;break}else if(d===Fh)Fh=e=d.nextScheduledRoot,V.nextScheduledRoot=e,d.nextScheduledRoot=null;else if(d===V){V=c;V.nextScheduledRoot=Fh;d.nextScheduledRoot=null;break}else c.nextScheduledRoot=d.nextScheduledRoot,d.nextScheduledRoot=null;d=c.nextScheduledRoot}else{if(0===a||e<a)a=e,b=d;if(d===V)break;\nc=d;d=d.nextScheduledRoot}}c=X;null!==c&&c===b&&1===a?Bh++:Bh=0;X=b;Y=a}function Qh(a){Uh(0,!0,a)}function Sh(){Uh(1,!1,null)}function Uh(a,b,c){Lh=c;Th();if(b)for(;null!==X&&0!==Y&&(0===a||a>=Y)&&(!Ih||ig()>=Y);)ig(),Rh(X,Y,!Ih),Th();else for(;null!==X&&0!==Y&&(0===a||a>=Y);)Rh(X,Y,!1),Th();null!==Lh&&(Gh=0,Hh=-1);0!==Y&&Ph(Y);Lh=null;Ih=!1;Vh()}function Wh(a,b){W?A(\"253\"):void 0;X=a;Y=b;Rh(a,b,!1);Sh();Vh()}\nfunction Vh(){Bh=0;if(null!==Nh){var a=Nh;Nh=null;for(var b=0;b<a.length;b++){var c=a[b];try{c._onComplete()}catch(d){Jh||(Jh=!0,Kh=d)}}}if(Jh)throw a=Kh,Kh=null,Jh=!1,a;}function Rh(a,b,c){W?A(\"245\"):void 0;W=!0;c?(c=a.finishedWork,null!==c?Xh(a,c,b):(a.finishedWork=null,c=uh(a,b,!0),null!==c&&(vh()?a.finishedWork=c:Xh(a,c,b)))):(c=a.finishedWork,null!==c?Xh(a,c,b):(a.finishedWork=null,c=uh(a,b,!1),null!==c&&Xh(a,c,b)));W=!1}\nfunction Xh(a,b,c){var d=a.firstBatch;if(null!==d&&d._expirationTime<=c&&(null===Nh?Nh=[d]:Nh.push(d),d._defer)){a.finishedWork=b;a.remainingExpirationTime=0;return}a.finishedWork=null;ph=lh=!0;c=b.stateNode;c.current===b?A(\"177\"):void 0;d=c.pendingCommitExpirationTime;0===d?A(\"261\"):void 0;c.pendingCommitExpirationTime=0;ig();ec.current=null;if(1<b.effectTag)if(null!==b.lastEffect){b.lastEffect.nextEffect=b;var e=b.firstEffect}else e=b;else e=b.firstEffect;Xe=Gd;var f=da();if(Td(f)){if(\"selectionStart\"in\nf)var g={start:f.selectionStart,end:f.selectionEnd};else a:{var h=window.getSelection&&window.getSelection();if(h&&0!==h.rangeCount){g=h.anchorNode;var k=h.anchorOffset,n=h.focusNode;h=h.focusOffset;try{g.nodeType,n.nodeType}catch(Wa){g=null;break a}var r=0,w=-1,P=-1,kc=0,Hd=0,E=f,t=null;b:for(;;){for(var x;;){E!==g||0!==k&&3!==E.nodeType||(w=r+k);E!==n||0!==h&&3!==E.nodeType||(P=r+h);3===E.nodeType&&(r+=E.nodeValue.length);if(null===(x=E.firstChild))break;t=E;E=x}for(;;){if(E===f)break b;t===g&&\n++kc===k&&(w=r);t===n&&++Hd===h&&(P=r);if(null!==(x=E.nextSibling))break;E=t;t=E.parentNode}E=x}g=-1===w||-1===P?null:{start:w,end:P}}else g=null}g=g||{start:0,end:0}}else g=null;Ye={focusedElem:f,selectionRange:g};Id(!1);for(U=e;null!==U;){f=!1;g=void 0;try{for(;null!==U;){if(U.effectTag&256){var u=U.alternate;k=U;switch(k.tag){case 2:if(k.effectTag&256&&null!==u){var y=u.memoizedProps,D=u.memoizedState,ja=k.stateNode;ja.props=k.memoizedProps;ja.state=k.memoizedState;var hi=ja.getSnapshotBeforeUpdate(y,\nD);ja.__reactInternalSnapshotBeforeUpdate=hi}break;case 3:case 5:case 6:case 4:break;default:A(\"163\")}}U=U.nextEffect}}catch(Wa){f=!0,g=Wa}f&&(null===U?A(\"178\"):void 0,Vg(U,g),null!==U&&(U=U.nextEffect))}for(U=e;null!==U;){u=!1;y=void 0;try{for(;null!==U;){var q=U.effectTag;q&16&&Ge(U.stateNode,\"\");if(q&128){var z=U.alternate;if(null!==z){var l=z.ref;null!==l&&(\"function\"===typeof l?l(null):l.current=null)}}switch(q&14){case 2:Zg(U);U.effectTag&=-3;break;case 6:Zg(U);U.effectTag&=-3;$g(U.alternate,\nU);break;case 4:$g(U.alternate,U);break;case 8:D=U,Xg(D),D.return=null,D.child=null,D.alternate&&(D.alternate.child=null,D.alternate.return=null)}U=U.nextEffect}}catch(Wa){u=!0,y=Wa}u&&(null===U?A(\"178\"):void 0,Vg(U,y),null!==U&&(U=U.nextEffect))}l=Ye;z=da();q=l.focusedElem;u=l.selectionRange;if(z!==q&&fa(document.documentElement,q)){Td(q)&&(z=u.start,l=u.end,void 0===l&&(l=z),\"selectionStart\"in q?(q.selectionStart=z,q.selectionEnd=Math.min(l,q.value.length)):window.getSelection&&(z=window.getSelection(),\ny=q[lb()].length,l=Math.min(u.start,y),u=void 0===u.end?l:Math.min(u.end,y),!z.extend&&l>u&&(y=u,u=l,l=y),y=Sd(q,l),D=Sd(q,u),y&&D&&(1!==z.rangeCount||z.anchorNode!==y.node||z.anchorOffset!==y.offset||z.focusNode!==D.node||z.focusOffset!==D.offset)&&(ja=document.createRange(),ja.setStart(y.node,y.offset),z.removeAllRanges(),l>u?(z.addRange(ja),z.extend(D.node,D.offset)):(ja.setEnd(D.node,D.offset),z.addRange(ja)))));z=[];for(l=q;l=l.parentNode;)1===l.nodeType&&z.push({element:l,left:l.scrollLeft,\ntop:l.scrollTop});q.focus();for(q=0;q<z.length;q++)l=z[q],l.element.scrollLeft=l.left,l.element.scrollTop=l.top}Ye=null;Id(Xe);Xe=null;c.current=b;for(U=e;null!==U;){e=!1;q=void 0;try{for(z=d;null!==U;){var gg=U.effectTag;if(gg&36){var lc=U.alternate;l=U;u=z;switch(l.tag){case 2:var ba=l.stateNode;if(l.effectTag&4)if(null===lc)ba.props=l.memoizedProps,ba.state=l.memoizedState,ba.componentDidMount();else{var ri=lc.memoizedProps,si=lc.memoizedState;ba.props=l.memoizedProps;ba.state=l.memoizedState;\nba.componentDidUpdate(ri,si,ba.__reactInternalSnapshotBeforeUpdate)}var Mg=l.updateQueue;null!==Mg&&(ba.props=l.memoizedProps,ba.state=l.memoizedState,Sf(l,Mg,ba,u));break;case 3:var Ng=l.updateQueue;if(null!==Ng){y=null;if(null!==l.child)switch(l.child.tag){case 5:y=l.child.stateNode;break;case 2:y=l.child.stateNode}Sf(l,Ng,y,u)}break;case 5:var ti=l.stateNode;null===lc&&l.effectTag&4&&Ze(l.type,l.memoizedProps)&&ti.focus();break;case 6:break;case 4:break;case 15:break;case 16:break;default:A(\"163\")}}if(gg&\n128){l=void 0;var uc=U.ref;if(null!==uc){var Og=U.stateNode;switch(U.tag){case 5:l=Og;break;default:l=Og}\"function\"===typeof uc?uc(l):uc.current=l}}var ui=U.nextEffect;U.nextEffect=null;U=ui}}catch(Wa){e=!0,q=Wa}e&&(null===U?A(\"178\"):void 0,Vg(U,q),null!==U&&(U=U.nextEffect))}lh=ph=!1;\"function\"===typeof Ff&&Ff(b.stateNode);b=c.current.expirationTime;0===b&&(dh=null);a.remainingExpirationTime=b}function vh(){return null===Lh||Lh.timeRemaining()>Oh?!1:Ih=!0}\nfunction bh(a){null===X?A(\"246\"):void 0;X.remainingExpirationTime=0;Jh||(Jh=!0,Kh=a)}function xh(a){null===X?A(\"246\"):void 0;X.remainingExpirationTime=a}function Yh(a,b){var c=Z;Z=!0;try{return a(b)}finally{(Z=c)||W||Sh()}}function Zh(a,b){if(Z&&!Mh){Mh=!0;try{return a(b)}finally{Mh=!1}}return a(b)}function $h(a,b){W?A(\"187\"):void 0;var c=Z;Z=!0;try{return Eh(a,b)}finally{Z=c,Sh()}}function ai(a){var b=Z;Z=!0;try{Eh(a)}finally{(Z=b)||W||Uh(1,!1,null)}}\nfunction bi(a,b,c,d,e){var f=b.current;if(c){c=c._reactInternalFiber;var g;b:{2===id(c)&&2===c.tag?void 0:A(\"170\");for(g=c;3!==g.tag;){if(mf(g)){g=g.stateNode.__reactInternalMemoizedMergedChildContext;break b}(g=g.return)?void 0:A(\"171\")}g=g.stateNode.context}c=mf(c)?rf(c,g):g}else c=ha;null===b.context?b.context=c:b.pendingContext=c;b=e;e=Kf(d);e.payload={element:a};b=void 0===b?null:b;null!==b&&(e.callback=b);Mf(f,e,d);kg(f,d);return d}\nfunction ci(a){var b=a._reactInternalFiber;void 0===b&&(\"function\"===typeof a.render?A(\"188\"):A(\"268\",Object.keys(a)));a=ld(b);return null===a?null:a.stateNode}function di(a,b,c,d){var e=b.current,f=ig();e=jg(f,e);return bi(a,b,c,e,d)}function ei(a){a=a.current;if(!a.child)return null;switch(a.child.tag){case 5:return a.child.stateNode;default:return a.child.stateNode}}\nfunction fi(a){var b=a.findFiberByHostInstance;return Ef(p({},a,{findHostInstanceByFiber:function(a){a=ld(a);return null===a?null:a.stateNode},findFiberByHostInstance:function(a){return b?b(a):null}}))}\nvar gi={updateContainerAtExpirationTime:bi,createContainer:function(a,b,c){return Af(a,b,c)},updateContainer:di,flushRoot:Wh,requestWork:wh,computeUniqueAsyncExpiration:yh,batchedUpdates:Yh,unbatchedUpdates:Zh,deferredUpdates:Dh,syncUpdates:Eh,interactiveUpdates:function(a,b,c){if(zh)return a(b,c);Z||W||0===Ah||(Uh(Ah,!1,null),Ah=0);var d=zh,e=Z;Z=zh=!0;try{return a(b,c)}finally{zh=d,(Z=e)||W||Sh()}},flushInteractiveUpdates:function(){W||0===Ah||(Uh(Ah,!1,null),Ah=0)},flushControlled:ai,flushSync:$h,\ngetPublicRootInstance:ei,findHostInstance:ci,findHostInstanceWithNoPortals:function(a){a=md(a);return null===a?null:a.stateNode},injectIntoDevTools:fi};function ii(a,b,c){var d=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:gc,key:null==d?null:\"\"+d,children:a,containerInfo:b,implementation:c}}Kb.injectFiberControlledHostComponent(We);\nfunction ji(a){this._expirationTime=yh();this._root=a;this._callbacks=this._next=null;this._hasChildren=this._didComplete=!1;this._children=null;this._defer=!0}ji.prototype.render=function(a){this._defer?void 0:A(\"250\");this._hasChildren=!0;this._children=a;var b=this._root._internalRoot,c=this._expirationTime,d=new ki;bi(a,b,null,c,d._onCommit);return d};ji.prototype.then=function(a){if(this._didComplete)a();else{var b=this._callbacks;null===b&&(b=this._callbacks=[]);b.push(a)}};\nji.prototype.commit=function(){var a=this._root._internalRoot,b=a.firstBatch;this._defer&&null!==b?void 0:A(\"251\");if(this._hasChildren){var c=this._expirationTime;if(b!==this){this._hasChildren&&(c=this._expirationTime=b._expirationTime,this.render(this._children));for(var d=null,e=b;e!==this;)d=e,e=e._next;null===d?A(\"251\"):void 0;d._next=e._next;this._next=b;a.firstBatch=this}this._defer=!1;Wh(a,c);b=this._next;this._next=null;b=a.firstBatch=b;null!==b&&b._hasChildren&&b.render(b._children)}else this._next=\nnull,this._defer=!1};ji.prototype._onComplete=function(){if(!this._didComplete){this._didComplete=!0;var a=this._callbacks;if(null!==a)for(var b=0;b<a.length;b++)(0,a[b])()}};function ki(){this._callbacks=null;this._didCommit=!1;this._onCommit=this._onCommit.bind(this)}ki.prototype.then=function(a){if(this._didCommit)a();else{var b=this._callbacks;null===b&&(b=this._callbacks=[]);b.push(a)}};\nki.prototype._onCommit=function(){if(!this._didCommit){this._didCommit=!0;var a=this._callbacks;if(null!==a)for(var b=0;b<a.length;b++){var c=a[b];\"function\"!==typeof c?A(\"191\",c):void 0;c()}}};function li(a,b,c){this._internalRoot=Af(a,b,c)}li.prototype.render=function(a,b){var c=this._internalRoot,d=new ki;b=void 0===b?null:b;null!==b&&d.then(b);di(a,c,null,d._onCommit);return d};\nli.prototype.unmount=function(a){var b=this._internalRoot,c=new ki;a=void 0===a?null:a;null!==a&&c.then(a);di(null,b,null,c._onCommit);return c};li.prototype.legacy_renderSubtreeIntoContainer=function(a,b,c){var d=this._internalRoot,e=new ki;c=void 0===c?null:c;null!==c&&e.then(c);di(b,d,a,e._onCommit);return e};\nli.prototype.createBatch=function(){var a=new ji(this),b=a._expirationTime,c=this._internalRoot,d=c.firstBatch;if(null===d)c.firstBatch=a,a._next=null;else{for(c=null;null!==d&&d._expirationTime<=b;)c=d,d=d._next;a._next=d;null!==c&&(c._next=a)}return a};function mi(a){return!(!a||1!==a.nodeType&&9!==a.nodeType&&11!==a.nodeType&&(8!==a.nodeType||\" react-mount-point-unstable \"!==a.nodeValue))}Sb=gi.batchedUpdates;Tb=gi.interactiveUpdates;Ub=gi.flushInteractiveUpdates;\nfunction ni(a,b){b||(b=a?9===a.nodeType?a.documentElement:a.firstChild:null,b=!(!b||1!==b.nodeType||!b.hasAttribute(\"data-reactroot\")));if(!b)for(var c;c=a.lastChild;)a.removeChild(c);return new li(a,!1,b)}\nfunction oi(a,b,c,d,e){mi(c)?void 0:A(\"200\");var f=c._reactRootContainer;if(f){if(\"function\"===typeof e){var g=e;e=function(){var a=ei(f._internalRoot);g.call(a)}}null!=a?f.legacy_renderSubtreeIntoContainer(a,b,e):f.render(b,e)}else{f=c._reactRootContainer=ni(c,d);if(\"function\"===typeof e){var h=e;e=function(){var a=ei(f._internalRoot);h.call(a)}}Zh(function(){null!=a?f.legacy_renderSubtreeIntoContainer(a,b,e):f.render(b,e)})}return ei(f._internalRoot)}\nfunction pi(a,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;mi(b)?void 0:A(\"200\");return ii(a,b,null,c)}\nvar qi={createPortal:pi,findDOMNode:function(a){return null==a?null:1===a.nodeType?a:ci(a)},hydrate:function(a,b,c){return oi(null,a,b,!0,c)},render:function(a,b,c){return oi(null,a,b,!1,c)},unstable_renderSubtreeIntoContainer:function(a,b,c,d){null==a||void 0===a._reactInternalFiber?A(\"38\"):void 0;return oi(a,b,c,!1,d)},unmountComponentAtNode:function(a){mi(a)?void 0:A(\"40\");return a._reactRootContainer?(Zh(function(){oi(null,null,a,!1,function(){a._reactRootContainer=null})}),!0):!1},unstable_createPortal:function(){return pi.apply(void 0,\narguments)},unstable_batchedUpdates:Yh,unstable_deferredUpdates:Dh,flushSync:$h,unstable_flushControlled:ai,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{EventPluginHub:Ka,EventPluginRegistry:va,EventPropagators:$a,ReactControlledComponent:Rb,ReactDOMComponentTree:Qa,ReactDOMEventListener:Md},unstable_createRoot:function(a,b){return new li(a,!0,null!=b&&!0===b.hydrate)}};fi({findFiberByHostInstance:Na,bundleType:0,version:\"16.4.0\",rendererPackageName:\"react-dom\"});\nvar vi={default:qi},wi=vi&&qi||vi;module.exports=wi.default?wi.default:wi;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/react-dom/cjs/react-dom.production.min.js\n// module id = 21\n// module chunks = 0","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\n\n'use strict';\n\nvar canUseDOM = !!(typeof window !== 'undefined' && window.document && window.document.createElement);\n\n/**\n * Simple, lightweight module assisting with the detection and context of\n * Worker. Helps avoid circular dependencies and allows code to reason about\n * whether or not they are in a Worker, even if they never include the main\n * `ReactWorker` dependency.\n */\nvar ExecutionEnvironment = {\n\n  canUseDOM: canUseDOM,\n\n  canUseWorkers: typeof Worker !== 'undefined',\n\n  canUseEventListeners: canUseDOM && !!(window.addEventListener || window.attachEvent),\n\n  canUseViewport: canUseDOM && !!window.screen,\n\n  isInWorker: !canUseDOM // For now, this is true - might change in the future.\n\n};\n\nmodule.exports = ExecutionEnvironment;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/fbjs/lib/ExecutionEnvironment.js\n// module id = 22\n// module chunks = 0","'use strict';\n\n/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @typechecks\n */\n\n/* eslint-disable fb-www/typeof-undefined */\n\n/**\n * Same as document.activeElement but wraps in a try-catch block. In IE it is\n * not safe to call document.activeElement if there is nothing focused.\n *\n * The activeElement will be null only if the document or document body is not\n * yet defined.\n *\n * @param {?DOMDocument} doc Defaults to current document.\n * @return {?DOMElement}\n */\nfunction getActiveElement(doc) /*?DOMElement*/{\n  doc = doc || (typeof document !== 'undefined' ? document : undefined);\n  if (typeof doc === 'undefined') {\n    return null;\n  }\n  try {\n    return doc.activeElement || doc.body;\n  } catch (e) {\n    return doc.body;\n  }\n}\n\nmodule.exports = getActiveElement;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/fbjs/lib/getActiveElement.js\n// module id = 23\n// module chunks = 0","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @typechecks\n * \n */\n\n/*eslint-disable no-self-compare */\n\n'use strict';\n\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\n\n/**\n * inlined Object.is polyfill to avoid requiring consumers ship their own\n * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/is\n */\nfunction is(x, y) {\n  // SameValue algorithm\n  if (x === y) {\n    // Steps 1-5, 7-10\n    // Steps 6.b-6.e: +0 != -0\n    // Added the nonzero y check to make Flow happy, but it is redundant\n    return x !== 0 || y !== 0 || 1 / x === 1 / y;\n  } else {\n    // Step 6.a: NaN == NaN\n    return x !== x && y !== y;\n  }\n}\n\n/**\n * Performs equality by iterating through keys on an object and returning false\n * when any key has values which are not strictly equal between the arguments.\n * Returns true when the values of all keys are strictly equal.\n */\nfunction shallowEqual(objA, objB) {\n  if (is(objA, objB)) {\n    return true;\n  }\n\n  if (typeof objA !== 'object' || objA === null || typeof objB !== 'object' || objB === null) {\n    return false;\n  }\n\n  var keysA = Object.keys(objA);\n  var keysB = Object.keys(objB);\n\n  if (keysA.length !== keysB.length) {\n    return false;\n  }\n\n  // Test for A's keys different from B.\n  for (var i = 0; i < keysA.length; i++) {\n    if (!hasOwnProperty.call(objB, keysA[i]) || !is(objA[keysA[i]], objB[keysA[i]])) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nmodule.exports = shallowEqual;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/fbjs/lib/shallowEqual.js\n// module id = 24\n// module chunks = 0","'use strict';\n\n/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * \n */\n\nvar isTextNode = require('./isTextNode');\n\n/*eslint-disable no-bitwise */\n\n/**\n * Checks if a given DOM node contains or is another DOM node.\n */\nfunction containsNode(outerNode, innerNode) {\n  if (!outerNode || !innerNode) {\n    return false;\n  } else if (outerNode === innerNode) {\n    return true;\n  } else if (isTextNode(outerNode)) {\n    return false;\n  } else if (isTextNode(innerNode)) {\n    return containsNode(outerNode, innerNode.parentNode);\n  } else if ('contains' in outerNode) {\n    return outerNode.contains(innerNode);\n  } else if (outerNode.compareDocumentPosition) {\n    return !!(outerNode.compareDocumentPosition(innerNode) & 16);\n  } else {\n    return false;\n  }\n}\n\nmodule.exports = containsNode;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/fbjs/lib/containsNode.js\n// module id = 25\n// module chunks = 0","'use strict';\n\n/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @typechecks\n */\n\nvar isNode = require('./isNode');\n\n/**\n * @param {*} object The object to check.\n * @return {boolean} Whether or not the object is a DOM text node.\n */\nfunction isTextNode(object) {\n  return isNode(object) && object.nodeType == 3;\n}\n\nmodule.exports = isTextNode;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/fbjs/lib/isTextNode.js\n// module id = 26\n// module chunks = 0","'use strict';\n\n/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @typechecks\n */\n\n/**\n * @param {*} object The object to check.\n * @return {boolean} Whether or not the object is a DOM node.\n */\nfunction isNode(object) {\n  var doc = object ? object.ownerDocument || object : document;\n  var defaultView = doc.defaultView || window;\n  return !!(object && (typeof defaultView.Node === 'function' ? object instanceof defaultView.Node : typeof object === 'object' && typeof object.nodeType === 'number' && typeof object.nodeName === 'string'));\n}\n\nmodule.exports = isNode;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/fbjs/lib/isNode.js\n// module id = 27\n// module chunks = 0","import React, { Component } from 'react'\n\nimport './App.css'\nimport Main from \"./Main\"\n\nclass App extends Component {\n  render() {\n    return (\n      <div className=\"App\">\n        <Main />\n      </div>\n    )\n  }\n}\n\n\nexport default App\n\n\n\n// WEBPACK FOOTER //\n// ./src/App.js","import React from 'react'\n\nimport Sidebar from './Sidebar'\nimport NoteList from './NoteList'\nimport NoteForm from './NoteForm'\nimport base from './rebase'\n\n\nlet counter=0;\n\n\nclass Main extends React.Component {\n    \n\n    constructor(props) {\n        super(props)\n       \n\n        this.state = {\n            //arr: this.blankNote()\n            // arr: JSON.parse(localStorage.getItem('array')),\n            arr:[],\n\n            currentNote: this.blankNote()\n        }\n    }\n\n    componentWillMount(){\n        //console.log(this.state.arr)\n        base.syncState('arr',{\n            context:this,\n            state: 'arr',\n            asArray: true\n        })\n    }\n\n    saveNote = (note) =>{\n        const tempArr = [...this.state.arr]\n        const index= tempArr.findIndex(x => note.id === x.id)\n        if(index === -1)\n        {\n            note.id=counter++\n            tempArr.push(note)\n            \n        }\n        else{\n            tempArr[index]=note\n        }\n\n        this.setState({arr:tempArr})\n        this.setState({currentNote:note})\n        //localStorage.setItem('array', JSON.stringify(this.state.arr));\n\n    }\n\n\n    setCurrentNote = (data) => {\n        // let temp= Object.assign({}, this.state.arr)\n        // temp.title=data.title\n        // temp.body=data.body\n\n        // this.setState(\n        //     {\n        //         arr:temp\n        //     }\n        // )\n\n        // this.setState(\n        //     {\n        //         arr:{title:data.title , body:data.body}\n        //     }\n        // )\n        //this.setState({arr:data})\n\n\n        //console.log(data)\n        this.setState({ currentNote: data })\n    }\n\n    blankNote = () => {\n        return (\n            {\n                title: '',\n                body: ''\n            }\n        )\n    }\n\n    resetNote = () => {\n        return (\n            this.setCurrentNote(this.blankNote())\n        )\n    }\n\n    deleteNote = (currentNote)=> {\n        const tempArr = [...this.state.arr]\n        const index = tempArr.indexOf(currentNote)\n        console.log(index)\n        if(index===-1)\n        {\n            return\n        }\n        tempArr.splice(index,1)\n        this.setState({arr:tempArr, currentNote:this.blankNote()})\n        //localStorage.setItem('array', JSON.stringify(this.state.arr));\n\n\n    }\n\n     \n\n\n    render() {\n        return (\n            <div className=\"Main\">\n                <Sidebar resetNote={this.resetNote} />\n                <NoteList setCurrentNote={this.setCurrentNote} arr={this.state.arr} />\n                <NoteForm currentNote={this.state.currentNote}   saveNote={this.saveNote} deleteNote={this.deleteNote}/>\n            </div>\n        )\n    }\n}\n\n// const style ={\n// display: 'flex',\n// height: '100vh',\n// alignItems: 'strech'\n\n// }\n\n// class Main extends React.Component{\n//     render(){\n//         return(\n//             <div className=\"Main\">\n//                 MAIN!\n//                 </div>\n//         )\n//     }\n// }\n\nexport default Main\n\n\n// WEBPACK FOOTER //\n// ./src/Main.js","import React from 'react'\nimport quill from './quill.svg'\nimport newIcon from './new.png'\nimport newHover from './new-hover.png'\n\n// import './Sidebar.css'\n\n\n\n\nconst Sidebar = ({ resetNote }) => {\n  return (\n    <nav className=\"Sidebar\">\n      <div className=\"logo\">\n        <img src={quill} alt=\"Noteherder\" />\n      </div>\n      <a onClick={(ev) => {\n        ev.preventDefault()\n        resetNote()\n      }}\n        className=\"new-note\"\n        href=\"/notes\">\n        <img src={newHover} alt=\"New note\" />\n        <img className=\"outline\" src={newIcon} alt=\"New note\" />\n      </a>\n      <div className=\"SignOut\">\n        <button>\n          <i className=\"fa fa-sign-out\"></i>\n        </button>\n      </div>\n    </nav>\n  )\n}\n\n// const styles = {\n//     sidebar:{\n//         width:'6rem',\n//         backgroundColor:'#f3f3f3',\n//         padding:'0.5rem 0',\n//         display:'flex',\n//         flexDirection:'column',\n//         alignItems:'center'\n//     },\n//     logo:{\n\n//     }\n\n// }\n\nexport default Sidebar\n\n\n// WEBPACK FOOTER //\n// ./src/Sidebar.js","module.exports = __webpack_public_path__ + \"static/media/quill.d2ea47fa.svg\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/quill.svg\n// module id = 33\n// module chunks = 0","module.exports = __webpack_public_path__ + \"static/media/new.2718a414.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/new.png\n// module id = 34\n// module chunks = 0","module.exports = __webpack_public_path__ + \"static/media/new-hover.751b2c31.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/new-hover.png\n// module id = 35\n// module chunks = 0","import React from 'react'\n\n// import './NoteList.css'\n\nconst NoteList = (props) => {\n  // constructor(props){\n  //   super(props)\n  //   this.state={\n  //     note:[\n  //       {title:'Kohlrabi welsh', body:'Veggies es bonus vobis, proinde vos postulo essum magis kohlrabi welsh onion daikon amaranth tatsoi tomatillo melon azuki bean garlic.'},\n  //       {title:'Dandelion cucumber', body:'Gumbo beet greens corn soko endive gumbo gourd. Parsley shallot courgette tatsoi pea sprouts fava bean collard greens dandelion okra wakame tomato. Dandelion cucumber earthnut pea peanut soko zucchini.'},\n  //       {title:'Prairie turnip',body:'Nori grape silver beet broccoli kombu beet greens fava bean potato quandong celery. Bunya nuts black-eyed pea prairie turnip leek lentil turnip greens parsnip.'}\n  //     ]\n  //   }\n\n  // }\n\n  // const temp = [...props.arr];\n  return (\n    <div className='NoteList'>\n      <h3>Notes</h3>\n      <ul id=\"notes\">\n        {          console.log(props.arr)\n}\n        {\n          props.arr.map(n => {\n            return (\n              <a onClick={() => { props.setCurrentNote(n) }} key={props.arr.indexOf(n)}>\n                <li >\n                  <div className=\"note\">\n                    <div className=\"note-title\">\n                      {n.title}\n                    </div>\n                    <div className=\"note-body\">\n                      <p>\n                        {n.body}\n                      </p>\n                    </div>\n                  </div>\n                </li>\n              </a>\n            )\n          }\n          )\n        }\n\n\n      </ul>\n\n\n    </div>\n  )\n}\n\n\n\nexport default NoteList\n\n\n// WEBPACK FOOTER //\n// ./src/NoteList.js","import React from 'react'\n// import './NoteForm.css'\n\n// const NoteForm = () => {\n//     return(\n//         <div className=\"NoteForm\">\n//           <div className=\"form-actions\">\n//             <button type=\"button\">\n//               <i className=\"fa fa-trash-o\"></i>\n//             </button>\n//           </div>\n//           <form>\n//             <p>\n//               <input\n//                 type=\"text\"\n//                 name=\"title\"\n//                 placeholder=\"Title your note\"\n//               />\n//             </p>\n\n//             <textarea name=\"body\"></textarea>\n//           </form>\n//         </div>\n\n//     )\n// }\n\n\n\n\nconst NoteForm = ({ currentNote ,saveNote ,deleteNote}) => {\n\n  const handleChanges = (ev)=>{\n    const temp = {...currentNote}\n    temp[ev.target.name]=ev.target.value\n    saveNote(temp)\n       \n  }\n\n  \n\n  return (\n    <div className=\"NoteForm\">\n      <div className=\"form-actions\">\n        <button type=\"button\" onClick={() => deleteNote(currentNote)}>\n          <i className=\"fa fa-trash-o\"></i>\n        </button>\n      </div>\n      <form>\n        <p>\n          <input\n            type=\"text\"\n            name=\"title\"\n            placeholder=\"Title Your Note\"\n            value={currentNote.title}\n            onChange={(ev)=>handleChanges(ev)}\n          />\n        </p>\n\n        <textarea name=\"body\" value={currentNote.body} onChange={(ev)=>handleChanges(ev)} ></textarea>\n      </form>\n    </div>\n  )\n}\n\n\nexport default NoteForm\n\n\n// WEBPACK FOOTER //\n// ./src/NoteForm.js","import Rebase from 're-base';\nimport firebase from 'firebase/app';\nimport 'firebase/database';\n\nconst app = firebase.initializeApp({\n    apiKey: \"AIzaSyDxePri8QOUvm2hMbGCKjLeyG7rI-q90UI\",\n    authDomain: \"noteherder-dd790.firebaseapp.com\",\n    databaseURL: \"https://noteherder-dd790.firebaseio.com\",\n    projectId: \"noteherder-dd790\",\n    storageBucket: \"noteherder-dd790.appspot.com\",\n    messagingSenderId: \"875679986580\"\n});\n\nconst db = firebase.database(app);\nconst base = Rebase.createClass(db);\n\nexport default base;\n\n\n// WEBPACK FOOTER //\n// ./src/rebase.js","module.exports = require('./dist/bundle.js');\n\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/re-base/index.js\n// module id = 39\n// module chunks = 0","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"firebase/app\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"firebase/app\"], factory);\n\telse {\n\t\tvar a = typeof exports === 'object' ? factory(require(\"firebase/app\")) : factory(root[\"firebase/app\"]);\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(this, function(__WEBPACK_EXTERNAL_MODULE_6__) {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n\n\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__(1);\n\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\n\tvar _utils = __webpack_require__(2);\n\n\tvar _validators = __webpack_require__(5);\n\n\tvar _push2 = __webpack_require__(7);\n\n\tvar _push3 = _interopRequireDefault(_push2);\n\n\tvar _fetch2 = __webpack_require__(8);\n\n\tvar _fetch3 = _interopRequireDefault(_fetch2);\n\n\tvar _post2 = __webpack_require__(9);\n\n\tvar _post3 = _interopRequireDefault(_post2);\n\n\tvar _sync2 = __webpack_require__(10);\n\n\tvar _sync3 = _interopRequireDefault(_sync2);\n\n\tvar _bind2 = __webpack_require__(11);\n\n\tvar _bind3 = _interopRequireDefault(_bind2);\n\n\tvar _update2 = __webpack_require__(12);\n\n\tvar _update3 = _interopRequireDefault(_update2);\n\n\tvar _reset2 = __webpack_require__(13);\n\n\tvar _reset3 = _interopRequireDefault(_reset2);\n\n\tvar _removeBinding2 = __webpack_require__(3);\n\n\tvar _removeBinding3 = _interopRequireDefault(_removeBinding2);\n\n\tvar _remove2 = __webpack_require__(14);\n\n\tvar _remove3 = _interopRequireDefault(_remove2);\n\n\tvar _fsSync2 = __webpack_require__(15);\n\n\tvar _fsSync3 = _interopRequireDefault(_fsSync2);\n\n\tvar _fsRemoveBinding2 = __webpack_require__(4);\n\n\tvar _fsRemoveBinding3 = _interopRequireDefault(_fsRemoveBinding2);\n\n\tvar _fsBind2 = __webpack_require__(16);\n\n\tvar _fsBind3 = _interopRequireDefault(_fsBind2);\n\n\tvar _fsGet2 = __webpack_require__(17);\n\n\tvar _fsGet3 = _interopRequireDefault(_fsGet2);\n\n\tvar _fsRemoveDoc2 = __webpack_require__(18);\n\n\tvar _fsRemoveDoc3 = _interopRequireDefault(_fsRemoveDoc2);\n\n\tvar _fsAddToCollection2 = __webpack_require__(19);\n\n\tvar _fsAddToCollection3 = _interopRequireDefault(_fsAddToCollection2);\n\n\tvar _fsRemoveFromCollection2 = __webpack_require__(20);\n\n\tvar _fsRemoveFromCollection3 = _interopRequireDefault(_fsRemoveFromCollection2);\n\n\tvar _fsUpdateDoc2 = __webpack_require__(21);\n\n\tvar _fsUpdateDoc3 = _interopRequireDefault(_fsUpdateDoc2);\n\n\tvar _fsReset2 = __webpack_require__(22);\n\n\tvar _fsReset3 = _interopRequireDefault(_fsReset2);\n\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n\t//database\n\t//helpers\n\tmodule.exports = function () {\n\t  function init(db) {\n\t    return function () {\n\t      var refs = new Map();\n\t      var listeners = new Map();\n\t      var syncs = new WeakMap();\n\n\t      if (typeof db.ref === 'function') {\n\t        var rebase = {\n\t          initializedApp: db.app,\n\t          listenTo: function listenTo(endpoint, options) {\n\t            return _bind3.default.call(this, endpoint, options, 'listenTo', {\n\t              db: db,\n\t              refs: refs,\n\t              listeners: listeners,\n\t              syncs: syncs\n\t            });\n\t          },\n\t          bindToState: function bindToState(endpoint, options) {\n\t            return _bind3.default.call(this, endpoint, options, 'bindToState', {\n\t              db: db,\n\t              refs: refs,\n\t              listeners: listeners\n\t            });\n\t          },\n\t          syncState: function syncState(endpoint, options) {\n\t            return _sync3.default.call(this, endpoint, options, {\n\t              db: db,\n\t              refs: refs,\n\t              listeners: listeners,\n\t              syncs: syncs\n\t            });\n\t          },\n\t          fetch: function fetch(endpoint, options) {\n\t            return (0, _fetch3.default)(endpoint, options, db);\n\t          },\n\t          post: function post(endpoint, options) {\n\t            return (0, _post3.default)(endpoint, options, db);\n\t          },\n\t          update: function update(endpoint, options) {\n\t            return (0, _update3.default)(endpoint, options, { db: db });\n\t          },\n\t          push: function push(endpoint, options) {\n\t            return (0, _push3.default)(endpoint, options, db);\n\t          },\n\t          removeBinding: function removeBinding(binding) {\n\t            (0, _removeBinding3.default)(binding, {\n\t              refs: refs,\n\t              listeners: listeners,\n\t              syncs: syncs\n\t            });\n\t          },\n\t          remove: function remove(endpoint, fn) {\n\t            return (0, _remove3.default)(endpoint, db, fn);\n\t          },\n\t          reset: function reset() {\n\t            return (0, _reset3.default)({\n\t              refs: refs,\n\t              listeners: listeners,\n\t              syncs: syncs\n\t            });\n\t          }\n\t        };\n\t      } else {\n\t        var rebase = {\n\t          initializedApp: db.app,\n\t          bindDoc: function bindDoc(path, options) {\n\t            return _fsBind3.default.call(this, path, options, 'bindDoc', {\n\t              db: db,\n\t              refs: refs,\n\t              listeners: listeners\n\t            });\n\t          },\n\t          bindCollection: function bindCollection(path, options) {\n\t            return _fsBind3.default.call(this, path, options, 'bindCollection', {\n\t              db: db,\n\t              refs: refs,\n\t              listeners: listeners\n\t            });\n\t          },\n\t          syncDoc: function syncDoc(doc, options) {\n\t            return _fsSync3.default.call(this, doc, options, {\n\t              db: db,\n\t              refs: refs,\n\t              listeners: listeners,\n\t              syncs: syncs\n\t            });\n\t          },\n\t          listenToDoc: function listenToDoc(doc, options) {\n\t            return _fsBind3.default.call(this, doc, options, 'listenToDoc', {\n\t              db: db,\n\t              refs: refs,\n\t              listeners: listeners\n\t            });\n\t          },\n\t          listenToCollection: function listenToCollection(path, options) {\n\t            return _fsBind3.default.call(this, path, options, 'listenToCollection', {\n\t              db: db,\n\t              refs: refs,\n\t              listeners: listeners\n\t            });\n\t          },\n\t          addToCollection: function addToCollection(path, doc, key) {\n\t            return _fsAddToCollection3.default.call(this, path, doc, db, key);\n\t          },\n\t          updateDoc: function updateDoc(path, doc, options) {\n\t            return _fsUpdateDoc3.default.call(this, path, doc, db);\n\t          },\n\t          get: function get(path, options) {\n\t            return _fsGet3.default.call(this, path, options, db);\n\t          },\n\t          removeDoc: function removeDoc(path) {\n\t            return (0, _fsRemoveDoc3.default)(path, db);\n\t          },\n\t          removeFromCollection: function removeFromCollection(path, options) {\n\t            return (0, _fsRemoveFromCollection3.default)(path, db, options);\n\t          },\n\t          removeBinding: function removeBinding(binding) {\n\t            (0, _fsRemoveBinding3.default)(binding, {\n\t              refs: refs,\n\t              listeners: listeners,\n\t              syncs: syncs\n\t            });\n\t          },\n\t          reset: function reset() {\n\t            return (0, _fsReset3.default)({\n\t              refs: refs,\n\t              listeners: listeners,\n\t              syncs: syncs\n\t            });\n\t          }\n\t        };\n\t      }\n\t      return rebase;\n\t    }();\n\t  }\n\n\t  return {\n\t    createClass: function createClass(db) {\n\t      (0, _validators._validateDatabase)(db);\n\t      return init(db);\n\t    }\n\t  };\n\t}();\n\n\t//firestore\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports._fsCreateRef = exports._fsSetUnmountHandler = exports._setData = exports._handleError = exports._createNestedObject = exports._setUnmountHandler = exports._addFirestoreListener = exports._addListener = exports._fsUpdateSyncState = exports._updateSyncState = exports._firebaseRefsMixin = exports._addSync = exports._hasOwnNestedProperty = exports._getSegmentCount = exports._getNestedObject = exports._isNestedPath = exports._isObject = exports._isValid = exports._toArray = exports._fsPrepareData = exports._prepareData = exports._throwError = exports._setState = exports._returnRef = exports._addFirestoreQuery = exports._addQueries = exports._createHash = undefined;\n\n\tvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n\tvar _removeBinding2 = __webpack_require__(3);\n\n\tvar _removeBinding3 = _interopRequireDefault(_removeBinding2);\n\n\tvar _fsRemoveBinding2 = __webpack_require__(4);\n\n\tvar _fsRemoveBinding3 = _interopRequireDefault(_fsRemoveBinding2);\n\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n\tfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n\tvar _isObject = function _isObject(obj) {\n\t  return Object.prototype.toString.call(obj) === '[object Object]' ? true : false;\n\t};\n\n\tvar _toArray = function _toArray(snapshot) {\n\t  var arr = [];\n\t  snapshot.forEach(function (childSnapshot) {\n\t    var val = childSnapshot.val();\n\t    if (_isObject(val)) {\n\t      val.key = childSnapshot.key;\n\t    }\n\t    arr.push(val);\n\t  });\n\t  return arr;\n\t};\n\n\tvar _isValid = function _isValid(value) {\n\t  return typeof value === 'string' || typeof value === 'number' || typeof value === 'boolean' || (typeof value === 'undefined' ? 'undefined' : _typeof(value)) === 'object' ? true : false;\n\t};\n\n\tvar _isNestedPath = function _isNestedPath(path) {\n\t  return path.split('.').length > 1 ? true : false;\n\t};\n\n\tvar _createNestedObject = function _createNestedObject(path, value) {\n\t  var obj = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n\t  var keys = path.split('.');\n\t  var lastKey = value === undefined ? false : keys.pop();\n\t  var root = obj;\n\n\t  var _iteratorNormalCompletion = true;\n\t  var _didIteratorError = false;\n\t  var _iteratorError = undefined;\n\n\t  try {\n\t    for (var _iterator = keys[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n\t      var key = _step.value;\n\n\t      obj = obj[key] = obj[key] || {};\n\t    }\n\t  } catch (err) {\n\t    _didIteratorError = true;\n\t    _iteratorError = err;\n\t  } finally {\n\t    try {\n\t      if (!_iteratorNormalCompletion && _iterator.return) {\n\t        _iterator.return();\n\t      }\n\t    } finally {\n\t      if (_didIteratorError) {\n\t        throw _iteratorError;\n\t      }\n\t    }\n\t  }\n\n\t  if (lastKey) obj[lastKey] = value;\n\n\t  return root;\n\t};\n\n\tvar _getNestedObject = function _getNestedObject(obj, path) {\n\t  if (_isNestedPath(path) === false) return;\n\n\t  var keys = path.split('.');\n\t  var _iteratorNormalCompletion2 = true;\n\t  var _didIteratorError2 = false;\n\t  var _iteratorError2 = undefined;\n\n\t  try {\n\t    for (var _iterator2 = keys[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n\t      var key = _step2.value;\n\n\t      if (!obj || (typeof obj === 'undefined' ? 'undefined' : _typeof(obj)) !== 'object') return;\n\t      obj = obj[key];\n\t    }\n\t  } catch (err) {\n\t    _didIteratorError2 = true;\n\t    _iteratorError2 = err;\n\t  } finally {\n\t    try {\n\t      if (!_iteratorNormalCompletion2 && _iterator2.return) {\n\t        _iterator2.return();\n\t      }\n\t    } finally {\n\t      if (_didIteratorError2) {\n\t        throw _iteratorError2;\n\t      }\n\t    }\n\t  }\n\n\t  return obj;\n\t};\n\n\tvar _hasOwnNestedProperty = function _hasOwnNestedProperty(obj, path) {\n\t  return _getNestedObject(obj, path) === undefined ? false : true;\n\t};\n\n\tvar _prepareData = function _prepareData(snapshot) {\n\t  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\t  var defaultValue = options.defaultValue,\n\t      asArray = options.asArray;\n\n\t  var data = snapshot.val();\n\t  if (data === null && _isValid(defaultValue)) return defaultValue;\n\t  if (asArray === true) return _toArray(snapshot);\n\t  return data === null ? {} : data;\n\t};\n\n\tvar _addSync = function _addSync(context, sync, syncs) {\n\t  var existingSyncs = syncs.get(context) || [];\n\t  existingSyncs.push(sync);\n\t  syncs.set(context, existingSyncs);\n\t};\n\n\tvar _throwError = function _throwError(msg, code) {\n\t  var err = new Error('REBASE: ' + msg);\n\t  err.code = code;\n\t  throw err;\n\t};\n\n\tvar _setState = function _setState(newState) {\n\t  this.setState(newState);\n\t};\n\n\tvar _returnRef = function _returnRef(endpoint, method, id, context) {\n\t  return { endpoint: endpoint, method: method, id: id, context: context };\n\t};\n\n\tvar _addQueries = function _addQueries(ref, queries) {\n\t  var needArgs = {\n\t    limitToFirst: true,\n\t    limitToLast: true,\n\t    orderByChild: true,\n\t    startAt: true,\n\t    endAt: true,\n\t    equalTo: true\n\t  };\n\n\t  for (var key in queries) {\n\t    /* istanbul ignore else */\n\t    if (queries.hasOwnProperty(key)) {\n\t      if (needArgs[key]) {\n\t        ref = ref[key](queries[key]);\n\t      } else {\n\t        ref = ref[key]();\n\t      }\n\t    }\n\t  }\n\t  return ref;\n\t};\n\n\tvar _addFirestoreQuery = function _addFirestoreQuery(ref, query) {\n\t  if (query) {\n\t    return query(ref);\n\t  }\n\t  return ref;\n\t};\n\n\tvar _createHash = function _createHash(endpoint, invoker) {\n\t  var hash = 0;\n\t  var str = endpoint + invoker + Math.random();\n\t  for (var i = 0; i < str.length; i++) {\n\t    var char = str.charCodeAt(i);\n\t    hash = (hash << 5) - hash + char;\n\t    hash = hash & hash;\n\t  }\n\t  return hash;\n\t};\n\n\tvar _firebaseRefsMixin = function _firebaseRefsMixin(id, ref, refs) {\n\t  refs.set(id, ref);\n\t};\n\n\tvar _handleError = function _handleError(onFailure, err) {\n\t  if (err && typeof onFailure === 'function') {\n\t    onFailure(err);\n\t  }\n\t};\n\n\tvar _setUnmountHandler = function _setUnmountHandler(context, id, refs, listeners, syncs) {\n\t  var removeListeners = function removeListeners() {\n\t    (0, _removeBinding3.default)({ context: context, id: id }, { refs: refs, listeners: listeners, syncs: syncs });\n\t  };\n\t  if (typeof context.componentWillUnmount === 'function') {\n\t    var unmount = context.componentWillUnmount;\n\t  }\n\t  context.componentWillUnmount = function () {\n\t    removeListeners();\n\t    if (unmount) unmount.call(context);\n\t  };\n\t};\n\n\tvar _fsSetUnmountHandler = function _fsSetUnmountHandler(context, id, refs, listeners, syncs) {\n\t  var removeListeners = function removeListeners() {\n\t    (0, _fsRemoveBinding3.default)({ context: context, id: id }, { refs: refs, listeners: listeners, syncs: syncs });\n\t  };\n\t  if (typeof context.componentWillUnmount === 'function') {\n\t    var unmount = context.componentWillUnmount;\n\t  }\n\t  context.componentWillUnmount = function () {\n\t    removeListeners();\n\t    if (unmount) unmount.call(context);\n\t  };\n\t};\n\n\tvar _setData = function _setData(ref, data, handleError, keepKeys) {\n\t  if (Array.isArray(data) && keepKeys) {\n\t    var shouldConvertToObject = data.reduce(function (acc, curr) {\n\t      return acc ? acc : _isObject(curr) && curr.hasOwnProperty('key');\n\t    }, false);\n\t    if (shouldConvertToObject) {\n\t      data = data.reduce(function (acc, item) {\n\t        acc[item.key] = item;\n\t        return acc;\n\t      }, {});\n\t    }\n\t  }\n\t  ref.set(data, handleError);\n\t};\n\n\tvar _updateSyncState = function _updateSyncState(ref, onFailure, keepKeys, data) {\n\t  if (_isObject(data)) {\n\t    for (var prop in data) {\n\t      //allow timestamps to be set\n\t      if (prop !== '.sv') {\n\t        _updateSyncState(ref.child(prop), onFailure, keepKeys, data[prop]);\n\t      } else {\n\t        _setData(ref, data, _handleError.bind(null, onFailure), keepKeys);\n\t      }\n\t    }\n\t  } else {\n\t    _setData(ref, data, _handleError.bind(null, onFailure), keepKeys);\n\t  }\n\t};\n\n\tvar _fsUpdateSyncState = function _fsUpdateSyncState(ref, data) {\n\t  ref.set(data);\n\t};\n\n\tvar _addListener = function _addListener(id, invoker, options, ref, listeners) {\n\t  ref = _addQueries(ref, options.queries);\n\t  var boundOnFailure = typeof options.onFailure === 'function' ? options.onFailure.bind(options.context) : null;\n\t  listeners.set(id, ref.on('value', function (snapshot) {\n\t    var data = _prepareData(snapshot, options);\n\t    if (invoker === 'listenTo') {\n\t      options.then.call(options.context, data);\n\t    } else {\n\t      var newState = _defineProperty({}, options.state, data);\n\t      if (_isNestedPath(options.state)) {\n\t        var root = options.state.split('.')[0];\n\t        // Merge the previous state with the new one\n\t        var prevState = _defineProperty({}, root, options.context.state[root]);\n\t        newState = _createNestedObject(options.state, data, prevState);\n\t      }\n\t      if (invoker === 'syncState') {\n\t        options.reactSetState.call(options.context, newState);\n\t        if (options.then && options.then.called === false) {\n\t          options.then.call(options.context);\n\t          options.then.called = true;\n\t        }\n\t      } else if (invoker === 'bindToState') {\n\t        _setState.call(options.context, newState);\n\t        if (options.then && options.then.called === false) {\n\t          options.then.call(options.context);\n\t          options.then.called = true;\n\t        }\n\t      }\n\t    }\n\t  }, boundOnFailure));\n\t};\n\n\tvar _addFirestoreListener = function _addFirestoreListener(id, invoker, options, ref, listeners) {\n\t  ref = _addFirestoreQuery(ref, options.query);\n\t  var boundOnFailure = typeof options.onFailure === 'function' ? options.onFailure.bind(options.context) : undefined;\n\t  listeners.set(id, ref.onSnapshot(function (snapshot) {\n\t    if (invoker.match(/^listenTo/)) {\n\t      if (invoker === 'listenToDoc') {\n\t        var newState = _fsPrepareData(snapshot, options);\n\t        return options.then.call(options.context, newState);\n\t      }\n\t      if (invoker === 'listenToCollection') {\n\t        var _newState2 = _fsPrepareData(snapshot, options, true);\n\t        return options.then.call(options.context, _newState2);\n\t      }\n\t    } else {\n\t      if (invoker === 'syncDoc') {\n\t        var _newState3 = _fsPrepareData(snapshot, options);\n\t        options.reactSetState.call(options.context, function (currentState) {\n\t          return Object.assign(currentState, _newState3);\n\t        });\n\t      } else if (invoker === 'bindDoc') {\n\t        var _newState4 = _fsPrepareData(snapshot, options);\n\t        _setState.call(options.context, function (currentState) {\n\t          return Object.assign(currentState, _newState4);\n\t        });\n\t      } else if (invoker === 'bindCollection') {\n\t        var _newState5 = _fsPrepareData(snapshot, options, true);\n\t        _setState.call(options.context, function (currentState) {\n\t          return Object.assign(currentState, _newState5);\n\t        });\n\t      }\n\t      if (options.then && options.then.called === false) {\n\t        options.then.call(options.context);\n\t        options.then.called = true;\n\t      }\n\t    }\n\t  }, boundOnFailure));\n\t};\n\n\tvar _getSegmentCount = function _getSegmentCount(path) {\n\t  return path.match(/^\\//) ? path.split('/').slice(1).length : path.split('/').length;\n\t};\n\n\tvar _fsPrepareData = function _fsPrepareData(snapshot, options) {\n\t  var isCollection = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n\n\t  var meta = {};\n\t  if (!isCollection) {\n\t    var data = {};\n\t    if (snapshot.exists) {\n\t      if (options.withRefs) meta.ref = snapshot.ref;\n\t      if (options.withIds) meta.id = snapshot.id;\n\t      data = snapshot.data();\n\t    } else {\n\t      data = {};\n\t    }\n\t    return options.state ? _defineProperty({}, options.state, Object.assign({}, data, meta)) : Object.assign({}, data, meta);\n\t  }\n\t  var collection = [];\n\t  if (!snapshot.empty) {\n\t    snapshot.forEach(function (doc) {\n\t      if (options.withRefs) meta.ref = doc.ref;\n\t      if (options.withIds) meta.id = doc.id;\n\t      collection.push(Object.assign({}, doc.data(), meta));\n\t    });\n\t  }\n\t  return options.state ? _defineProperty({}, options.state, collection) : collection;\n\t};\n\n\tvar _fsCreateRef = function _fsCreateRef(pathOrRef, db) {\n\t  if ((typeof pathOrRef === 'undefined' ? 'undefined' : _typeof(pathOrRef)) === 'object') {\n\t    return pathOrRef;\n\t  }\n\t  var segmentCount = _getSegmentCount(pathOrRef);\n\t  var ref;\n\t  if (segmentCount % 2 === 0) {\n\t    ref = db.doc(pathOrRef);\n\t  } else {\n\t    ref = db.collection(pathOrRef);\n\t  }\n\t  return ref;\n\t};\n\n\texports._createHash = _createHash;\n\texports._addQueries = _addQueries;\n\texports._addFirestoreQuery = _addFirestoreQuery;\n\texports._returnRef = _returnRef;\n\texports._setState = _setState;\n\texports._throwError = _throwError;\n\texports._prepareData = _prepareData;\n\texports._fsPrepareData = _fsPrepareData;\n\texports._toArray = _toArray;\n\texports._isValid = _isValid;\n\texports._isObject = _isObject;\n\texports._isNestedPath = _isNestedPath;\n\texports._getNestedObject = _getNestedObject;\n\texports._getSegmentCount = _getSegmentCount;\n\texports._hasOwnNestedProperty = _hasOwnNestedProperty;\n\texports._addSync = _addSync;\n\texports._firebaseRefsMixin = _firebaseRefsMixin;\n\texports._updateSyncState = _updateSyncState;\n\texports._fsUpdateSyncState = _fsUpdateSyncState;\n\texports._addListener = _addListener;\n\texports._addFirestoreListener = _addFirestoreListener;\n\texports._setUnmountHandler = _setUnmountHandler;\n\texports._createNestedObject = _createNestedObject;\n\texports._handleError = _handleError;\n\texports._setData = _setData;\n\texports._fsSetUnmountHandler = _fsSetUnmountHandler;\n\texports._fsCreateRef = _fsCreateRef;\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = _removeBinding;\n\n\tvar _utils = __webpack_require__(2);\n\n\tfunction _removeBinding(_ref, _ref2) {\n\t  var id = _ref.id,\n\t      context = _ref.context;\n\t  var refs = _ref2.refs,\n\t      listeners = _ref2.listeners,\n\t      syncs = _ref2.syncs;\n\n\t  var ref = refs.get(id);\n\t  var listener = listeners.get(id);\n\t  if (typeof ref !== 'undefined') {\n\t    ref.off('value', listener);\n\t    refs.delete(id);\n\t    listeners.delete(id);\n\t    if (syncs) {\n\t      var currentSyncs = syncs.get(context);\n\t      if (currentSyncs && currentSyncs.length > 0) {\n\t        var idx = currentSyncs.findIndex(function (item, index) {\n\t          return item.id === id;\n\t        });\n\t        /*istanbul ignore else */\n\t        if (idx !== -1) {\n\t          currentSyncs.splice(idx, 1);\n\t          syncs.set(context, currentSyncs);\n\t        }\n\t      }\n\t    }\n\t  }\n\t}\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = _fsRemoveBinding;\n\tfunction _fsRemoveBinding(_ref, _ref2) {\n\t  var id = _ref.id,\n\t      context = _ref.context;\n\t  var refs = _ref2.refs,\n\t      listeners = _ref2.listeners,\n\t      syncs = _ref2.syncs;\n\n\t  var unsubscribe = listeners.get(id);\n\t  if (typeof unsubscribe === 'function') {\n\t    unsubscribe();\n\t    refs.delete(id);\n\t    listeners.delete(id);\n\t    if (syncs) {\n\t      var currentSyncs = syncs.get(context);\n\t      if (currentSyncs && currentSyncs.length > 0) {\n\t        var idx = currentSyncs.findIndex(function (item, index) {\n\t          return item.id === id;\n\t        });\n\t        /*istanbul ignore else */\n\t        if (idx !== -1) {\n\t          currentSyncs.splice(idx, 1);\n\t          syncs.set(context, currentSyncs);\n\t        }\n\t      }\n\t    }\n\t  }\n\t}\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports._validateCollectionPath = exports._validateDocumentPath = exports._validateEndpoint = exports._validateDatabase = exports.optionValidators = undefined;\n\n\tvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n\tvar _utils = __webpack_require__(2);\n\n\tvar _app = __webpack_require__(6);\n\n\tvar _app2 = _interopRequireDefault(_app);\n\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n\tvar optionValidators = {\n\t  notObject: function notObject(options) {\n\t    if (!(0, _utils._isObject)(options)) {\n\t      (0, _utils._throwError)('The options argument must be an object. Instead, got ' + options, 'INVALID_OPTIONS');\n\t    }\n\t  },\n\t  context: function context(options) {\n\t    this.notObject(options);\n\t    if (!options.context || !(0, _utils._isObject)(options.context)) {\n\t      this.makeError('context', 'object', options.context);\n\t    }\n\t  },\n\t  state: function state(options) {\n\t    this.notObject(options);\n\t    if (!options.state || typeof options.state !== 'string') {\n\t      this.makeError('state', 'string', options.state);\n\t    }\n\t  },\n\t  then: function then(options) {\n\t    this.notObject(options);\n\t    if (typeof options.then === 'undefined' || typeof options.then !== 'function') {\n\t      this.makeError('then', 'function', options.then);\n\t    }\n\t  },\n\t  data: function data(options) {\n\t    this.notObject(options);\n\t    if (typeof options.data === 'undefined') {\n\t      this.makeError('data', 'ANY', options.data);\n\t    }\n\t  },\n\t  query: function query(options) {\n\t    this.notObject(options);\n\t    var validQueries = ['limitToFirst', 'limitToLast', 'orderByChild', 'orderByValue', 'orderByKey', 'orderByPriority', 'startAt', 'endAt', 'equalTo'];\n\t    var queries = options.queries;\n\t    for (var key in queries) {\n\t      if (queries.hasOwnProperty(key) && validQueries.indexOf(key) === -1) {\n\t        (0, _utils._throwError)('The query field must contain valid Firebase queries.  Expected one of [' + validQueries.join(', ') + ']. Instead, got ' + key, 'INVALID_OPTIONS');\n\t      }\n\t    }\n\t  },\n\t  defaultValue: function defaultValue(options) {\n\t    this.notObject(options);\n\t    if (options.hasOwnProperty('defaultValue')) {\n\t      if (!(0, _utils._isValid)(options.defaultValue)) {\n\t        (0, _utils._throwError)('The typeof defaultValue must be one of string, number, boolean, object.', 'INVALID_OPTIONS');\n\t      }\n\t    }\n\t  },\n\t  makeError: function makeError(prop, type, actual) {\n\t    (0, _utils._throwError)('The options argument must contain a ' + prop + ' property of type ' + type + '. Instead, got ' + actual, 'INVALID_OPTIONS');\n\t  }\n\t};\n\n\tvar _validateEndpoint = function _validateEndpoint(endpoint) {\n\t  if (_app2.default.firestore) {\n\t    var _firebase$firestore = _app2.default.firestore,\n\t        DocumentReference = _firebase$firestore.DocumentReference,\n\t        CollectionReference = _firebase$firestore.CollectionReference;\n\n\t    if ((typeof endpoint === 'undefined' ? 'undefined' : _typeof(endpoint)) === 'object') {\n\t      if (endpoint instanceof DocumentReference || endpoint instanceof CollectionReference) {\n\t        return;\n\t      }\n\t    }\n\t  }\n\t  var defaultError = 'The Firebase endpoint you are trying to listen to';\n\t  var errorMsg;\n\t  if (typeof endpoint !== 'string') {\n\t    errorMsg = defaultError + ' must be a string. Instead, got ' + endpoint;\n\t  } else if (endpoint.length === 0) {\n\t    errorMsg = defaultError + ' must be a non-empty string. Instead, got ' + endpoint;\n\t  } else if (endpoint.length > 768) {\n\t    errorMsg = defaultError + ' is too long to be stored in Firebase. It must be less than 768 characters.';\n\t  } else if (/^$|[\\[\\]\\#\\$]|.{1}[\\.]/.test(endpoint)) {\n\t    errorMsg = defaultError + ' in invalid. Paths must be non-empty strings and can\\'t contain \".\", \"#\", \"$\", \"[\", or \"]\".';\n\t  }\n\n\t  if (typeof errorMsg !== 'undefined') {\n\t    (0, _utils._throwError)(errorMsg, 'INVALID_ENDPOINT');\n\t  }\n\t};\n\n\tvar _validateDatabase = function _validateDatabase(db) {\n\t  var defaultError = 'Rebase.createClass failed.';\n\t  var errorMsg;\n\t  if ((typeof db === 'undefined' ? 'undefined' : _typeof(db)) !== 'object' || !db.ref && !db.collection) {\n\t    errorMsg = defaultError + ' Expected an initialized firebase or firestore database object.';\n\t  }\n\t  if (typeof errorMsg !== 'undefined') {\n\t    (0, _utils._throwError)(errorMsg, 'INVALID_CONFIG');\n\t  }\n\t};\n\n\tvar _validateDocumentPath = function _validateDocumentPath(path) {\n\t  var DocumentReference = _app2.default.firestore.DocumentReference;\n\n\t  if ((typeof path === 'undefined' ? 'undefined' : _typeof(path)) === 'object' && path instanceof DocumentReference) return;\n\t  var defaultError = 'Invalid document path or reference.';\n\t  if (typeof path !== 'string') (0, _utils._throwError)(defaultError, 'INVALID_ENDPOINT');\n\t  var segmentCount = (0, _utils._getSegmentCount)(path);\n\t  if (segmentCount % 2 !== 0) (0, _utils._throwError)(defaultError, 'INVALID_ENDPOINT');\n\t};\n\n\tvar _validateCollectionPath = function _validateCollectionPath(path) {\n\t  var CollectionReference = _app2.default.firestore.CollectionReference;\n\n\t  if ((typeof path === 'undefined' ? 'undefined' : _typeof(path)) === 'object' && path instanceof CollectionReference) return;\n\t  var defaultError = 'Invalid collection path or reference.';\n\t  if (typeof path !== 'string') (0, _utils._throwError)(defaultError, 'INVALID_ENDPOINT');\n\t  var segmentCount = (0, _utils._getSegmentCount)(path);\n\t  if (segmentCount % 2 === 0) (0, _utils._throwError)(defaultError, 'INVALID_ENDPOINT');\n\t};\n\n\texports.optionValidators = optionValidators;\n\texports._validateDatabase = _validateDatabase;\n\texports._validateEndpoint = _validateEndpoint;\n\texports._validateDocumentPath = _validateDocumentPath;\n\texports._validateCollectionPath = _validateCollectionPath;\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_6__;\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = _push;\n\n\tvar _validators = __webpack_require__(5);\n\n\tfunction _push(endpoint, options, db) {\n\t  (0, _validators._validateEndpoint)(endpoint);\n\t  _validators.optionValidators.data(options);\n\t  var ref = db.ref(endpoint);\n\t  var returnEndpoint;\n\t  if (options.then) {\n\t    returnEndpoint = ref.push(options.data, options.then);\n\t  } else {\n\t    returnEndpoint = ref.push(options.data);\n\t  }\n\t  return returnEndpoint;\n\t}\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = _fetch;\n\n\tvar _validators = __webpack_require__(5);\n\n\tvar _utils = __webpack_require__(2);\n\n\tfunction _fetch(endpoint, options, db) {\n\t  (0, _validators._validateEndpoint)(endpoint);\n\t  _validators.optionValidators.defaultValue(options);\n\t  options.queries && _validators.optionValidators.query(options);\n\t  var ref = db.ref(endpoint);\n\t  ref = (0, _utils._addQueries)(ref, options.queries);\n\t  return ref.once('value').then(function (snapshot) {\n\t    var data = (0, _utils._prepareData)(snapshot, options);\n\t    if (options.then) {\n\t      options.then.call(options.context, data);\n\t    }\n\t    return data;\n\t  }).catch(function (err) {\n\t    //call onFailure callback if it exists otherwise rethrow error\n\t    if (options.onFailure && typeof options.onFailure === 'function') {\n\t      options.onFailure.call(options.context, err);\n\t    } else {\n\t      throw err;\n\t    }\n\t  });\n\t}\n\n/***/ }),\n/* 9 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = _post;\n\n\tvar _validators = __webpack_require__(5);\n\n\tfunction _post(endpoint, options, db) {\n\t  (0, _validators._validateEndpoint)(endpoint);\n\t  _validators.optionValidators.data(options);\n\t  var ref = db.ref(endpoint);\n\t  if (options.then) {\n\t    return ref.set(options.data, options.then);\n\t  } else {\n\t    return ref.set(options.data);\n\t  }\n\t}\n\n/***/ }),\n/* 10 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = _sync;\n\n\tvar _validators = __webpack_require__(5);\n\n\tvar _utils = __webpack_require__(2);\n\n\tfunction _sync(endpoint, options, state) {\n\t  (0, _validators._validateEndpoint)(endpoint);\n\t  _validators.optionValidators.context(options);\n\t  _validators.optionValidators.state(options);\n\t  _validators.optionValidators.defaultValue(options);\n\t  options.queries && _validators.optionValidators.query(options);\n\t  options.then && (options.then.called = false);\n\t  options.onFailure = options.onFailure ? options.onFailure.bind(options.context) : null;\n\t  options.keepKeys = options.keepKeys && options.asArray;\n\n\t  //store reference to react's setState\n\t  if (_sync.called !== true) {\n\t    _sync.reactSetState = options.context.setState;\n\t    _sync.called = true;\n\t  }\n\t  options.reactSetState = _sync.reactSetState;\n\n\t  var ref = state.db.ref(endpoint);\n\t  var id = (0, _utils._createHash)(endpoint, 'syncState');\n\t  (0, _utils._firebaseRefsMixin)(id, ref, state.refs);\n\t  (0, _utils._addListener)(id, 'syncState', options, ref, state.listeners);\n\t  (0, _utils._setUnmountHandler)(options.context, id, state.refs, state.listeners, state.syncs);\n\t  var sync = {\n\t    id: id,\n\t    updateFirebase: _utils._updateSyncState.bind(null, ref, options.onFailure, options.keepKeys),\n\t    stateKey: options.state\n\t  };\n\t  (0, _utils._addSync)(options.context, sync, state.syncs);\n\n\t  options.context.setState = function (data, cb) {\n\t    //if setState is a function, call it first before syncing to fb\n\t    if (typeof data === 'function') {\n\t      return _sync.reactSetState.call(options.context, data, function () {\n\t        if (cb) cb.call(options.context);\n\t        return options.context.setState.call(options.context, options.context.state);\n\t      });\n\t    }\n\t    //if callback is supplied, call setState first before syncing to fb\n\t    if (typeof cb === 'function') {\n\t      return _sync.reactSetState.call(options.context, data, function () {\n\t        cb();\n\t        return options.context.setState.call(options.context, data);\n\t      });\n\t    }\n\t    var syncsToCall = state.syncs.get(this);\n\t    //if sync does not exist, call original Component.setState\n\t    if (!syncsToCall || syncsToCall.length === 0) {\n\t      return _sync.reactSetState.call(this, data, cb);\n\t    }\n\t    var syncedKeys = syncsToCall.map(function (sync) {\n\t      return {\n\t        key: sync.stateKey,\n\t        update: sync.updateFirebase,\n\t        nested: (0, _utils._isNestedPath)(sync.stateKey)\n\t      };\n\t    });\n\t    syncedKeys.forEach(function (syncedKey) {\n\t      if (syncedKey.nested === true) {\n\t        if ((0, _utils._hasOwnNestedProperty)(data, syncedKey.key)) {\n\t          var datum = (0, _utils._getNestedObject)(data, syncedKey.key);\n\t          syncedKey.update(datum);\n\t        }\n\t      } else if (data.hasOwnProperty(syncedKey.key)) {\n\t        syncedKey.update(data[syncedKey.key]);\n\t      }\n\t    });\n\t    var allKeys = Object.keys(data);\n\t    allKeys.forEach(function (key) {\n\t      var absent = !syncedKeys.find(function (syncedKey) {\n\t        var k = syncedKey.key;\n\t        if (syncedKey.nested === true) {\n\t          // Check with the root\n\t          k = syncedKey.key.split('.')[0];\n\t        }\n\t        return k === key;\n\t      });\n\n\t      if (absent) {\n\t        var update = {};\n\t        update[key] = data[key];\n\t        _sync.reactSetState.call(options.context, update, cb);\n\t      }\n\t    });\n\t  };\n\t  return (0, _utils._returnRef)(endpoint, 'syncState', id, options.context);\n\t}\n\n/***/ }),\n/* 11 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = _bind;\n\n\tvar _validators = __webpack_require__(5);\n\n\tvar _utils = __webpack_require__(2);\n\n\tfunction _bind(endpoint, options, invoker, state) {\n\t  (0, _validators._validateEndpoint)(endpoint);\n\t  _validators.optionValidators.context(options);\n\t  _validators.optionValidators.defaultValue(options);\n\t  invoker === 'listenTo' && _validators.optionValidators.then(options);\n\t  invoker === 'bindToState' && _validators.optionValidators.state(options);\n\t  options.queries && _validators.optionValidators.query(options);\n\t  options.then && (options.then.called = false);\n\n\t  var id = (0, _utils._createHash)(endpoint, invoker);\n\t  var ref = state.db.ref(endpoint);\n\t  (0, _utils._firebaseRefsMixin)(id, ref, state.refs);\n\t  (0, _utils._addListener)(id, invoker, options, ref, state.listeners);\n\t  (0, _utils._setUnmountHandler)(options.context, id, state.refs, state.listeners, state.syncs);\n\t  return (0, _utils._returnRef)(endpoint, invoker, id, options.context);\n\t}\n\n/***/ }),\n/* 12 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = _update;\n\n\tvar _validators = __webpack_require__(5);\n\n\tfunction _update(endpoint, options, state) {\n\t  (0, _validators._validateEndpoint)(endpoint);\n\t  _validators.optionValidators.data(options);\n\t  var ref = state.db.ref(endpoint);\n\t  if (options.then) {\n\t    return ref.update(options.data, options.then);\n\t  } else {\n\t    return ref.update(options.data);\n\t  }\n\t}\n\n/***/ }),\n/* 13 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = _reset;\n\tfunction _reset(state) {\n\t  state.refs.forEach(function (ref, id) {\n\t    ref.off('value', state.listeners.get(id));\n\t  });\n\t  state.listeners = new Map();\n\t  state.refs = new Map();\n\t  state.syncs = new WeakMap();\n\t  return null;\n\t}\n\n/***/ }),\n/* 14 */\n/***/ (function(module, exports) {\n\n\t\"use strict\";\n\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\n\texports.default = function (endpoint, db, fn) {\n\t  return db.ref().child(endpoint).remove(fn);\n\t};\n\n/***/ }),\n/* 15 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = _fsSync;\n\n\tvar _validators = __webpack_require__(5);\n\n\tvar _utils = __webpack_require__(2);\n\n\tfunction _fsSync(document, options, state) {\n\t  //validate arguments\n\t  (0, _validators._validateDocumentPath)(document);\n\t  _validators.optionValidators.context(options);\n\t  _validators.optionValidators.state(options);\n\t  options.then && (options.then.called = false);\n\t  //store reference to react's setState\n\t  if (_fsSync.called !== true) {\n\t    _fsSync.reactSetState = options.context.setState;\n\t    _fsSync.called = true;\n\t  }\n\t  options.reactSetState = _fsSync.reactSetState;\n\n\t  var id = (0, _utils._createHash)(document, 'syncDoc');\n\t  var ref = (0, _utils._fsCreateRef)(document, state.db);\n\t  (0, _utils._firebaseRefsMixin)(id, ref, state.refs);\n\t  (0, _utils._addFirestoreListener)(id, 'syncDoc', options, ref, state.listeners);\n\t  (0, _utils._fsSetUnmountHandler)(options.context, id, state.refs, state.listeners, state.syncs);\n\t  var sync = {\n\t    id: id,\n\t    updateFirebase: _utils._fsUpdateSyncState.bind(null, ref),\n\t    stateKey: options.state\n\t  };\n\t  (0, _utils._addSync)(options.context, sync, state.syncs);\n\t  options.context.setState = function (data, cb) {\n\t    //if setState is a function, call it first before syncing to fb\n\t    if (typeof data === 'function') {\n\t      return _fsSync.reactSetState.call(options.context, data, function () {\n\t        if (cb) cb.call(options.context);\n\t        return options.context.setState.call(options.context, options.context.state);\n\t      });\n\t    }\n\t    //if callback is supplied, call setState first before syncing to fb\n\t    if (typeof cb === 'function') {\n\t      return _fsSync.reactSetState.call(options.context, data, function () {\n\t        cb();\n\t        return options.context.setState.call(options.context, data);\n\t      });\n\t    }\n\t    var syncsToCall = state.syncs.get(this);\n\t    //if sync does not exist, call original Component.setState\n\t    if (!syncsToCall || syncsToCall.length === 0) {\n\t      return _fsSync.reactSetState.call(this, data, cb);\n\t    }\n\t    //send the update of synced keys to firestore\n\t    var syncedKeys = syncsToCall.map(function (sync) {\n\t      return {\n\t        key: sync.stateKey,\n\t        update: sync.updateFirebase\n\t      };\n\t    });\n\t    syncedKeys.forEach(function (syncedKey) {\n\t      if (data[syncedKey.key]) {\n\t        syncedKey.update(data[syncedKey.key]);\n\t      }\n\t    });\n\t    //send the update of all other keys through setState\n\t    var allKeys = Object.keys(data);\n\t    allKeys.forEach(function (key) {\n\t      var absent = !syncedKeys.find(function (syncedKey) {\n\t        return syncedKey.key === key;\n\t      });\n\t      if (absent) {\n\t        var update = {};\n\t        update[key] = data[key];\n\t        _fsSync.reactSetState.call(options.context, function (currentState) {\n\t          return Object.assign(currentState, update);\n\t        }, cb);\n\t      }\n\t    });\n\t  };\n\t  return (0, _utils._returnRef)(document, 'syncDoc', id, options.context);\n\t}\n\n/***/ }),\n/* 16 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = _fsBind;\n\n\tvar _validators = __webpack_require__(5);\n\n\tvar _utils = __webpack_require__(2);\n\n\tfunction _fsBind(path, options, invoker, state) {\n\t  _validators.optionValidators.context(options);\n\t  options.then && (options.then.called = false);\n\t  if (invoker === 'bindDoc') {\n\t    (0, _validators._validateDocumentPath)(path);\n\t  }\n\t  if (invoker === 'bindCollection') {\n\t    _validators.optionValidators.state(options);\n\t    (0, _validators._validateCollectionPath)(path);\n\t  }\n\t  if (invoker === 'listenToDoc') {\n\t    (0, _validators._validateDocumentPath)(path);\n\t    _validators.optionValidators.then(options);\n\t  }\n\t  if (invoker === 'listenToCollection') {\n\t    (0, _validators._validateCollectionPath)(path);\n\t    _validators.optionValidators.then(options);\n\t  }\n\t  var ref = (0, _utils._fsCreateRef)(path, state.db);\n\t  var id = (0, _utils._createHash)(path, invoker);\n\t  (0, _utils._firebaseRefsMixin)(id, ref, state.refs);\n\t  (0, _utils._addFirestoreListener)(id, invoker, options, ref, state.listeners);\n\t  (0, _utils._fsSetUnmountHandler)(options.context, id, state.refs, state.listeners, state.syncs);\n\t  return (0, _utils._returnRef)(path, invoker, id, options.context);\n\t}\n\n/***/ }),\n/* 17 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = _fsGet;\n\n\tvar _utils = __webpack_require__(2);\n\n\tvar _validators = __webpack_require__(5);\n\n\tfunction _fsGet(endpoint) {\n\t  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\t  var db = arguments[2];\n\n\t  (0, _validators._validateEndpoint)(endpoint);\n\t  var ref = (0, _utils._fsCreateRef)(endpoint, db);\n\t  //check if ref is a collection\n\t  var isCollection = !!ref.add;\n\t  ref = (0, _utils._addFirestoreQuery)(ref, options.query);\n\t  return ref.get().then(function (snapshot) {\n\t    if (isCollection && !snapshot.empty || !isCollection && snapshot.exists) {\n\t      return (0, _utils._fsPrepareData)(snapshot, options, isCollection);\n\t    } else {\n\t      return Promise.reject(new Error('No Result'));\n\t    }\n\t  });\n\t}\n\n/***/ }),\n/* 18 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = _fsRemoveDoc;\n\n\tvar _utils = __webpack_require__(2);\n\n\tfunction _fsRemoveDoc(path, db) {\n\t  var ref = (0, _utils._fsCreateRef)(path, db);\n\t  return ref.delete();\n\t}\n\n/***/ }),\n/* 19 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = _fsAddToCollection;\n\n\tvar _validators = __webpack_require__(5);\n\n\tvar _utils = __webpack_require__(2);\n\n\tfunction _fsAddToCollection(path, doc, db, key) {\n\t  (0, _validators._validateCollectionPath)(path);\n\t  var ref = (0, _utils._fsCreateRef)(path, db);\n\t  if (key) {\n\t    return ref.doc(key).set(doc);\n\t  }\n\t  return ref.add(doc);\n\t}\n\n/***/ }),\n/* 20 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = _fsRemoveFromCollection;\n\n\tvar _validators = __webpack_require__(5);\n\n\tvar _utils = __webpack_require__(2);\n\n\tfunction _fsRemoveFromCollection(path, db) {\n\t  var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n\t  (0, _validators._validateCollectionPath)(path);\n\t  var ref = (0, _utils._fsCreateRef)(path, db);\n\t  ref = (0, _utils._addFirestoreQuery)(ref, options.query);\n\t  return ref.get().then(function (snapshot) {\n\t    if (!snapshot.empty) {\n\t      var batch = db.batch();\n\t      snapshot.forEach(function (doc) {\n\t        batch.delete(doc.ref);\n\t      });\n\t      return batch.commit();\n\t    }\n\t  });\n\t}\n\n/***/ }),\n/* 21 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = _fsUpdateDoc;\n\n\tvar _validators = __webpack_require__(5);\n\n\tvar _utils = __webpack_require__(2);\n\n\tfunction _fsUpdateDoc(document, data, db) {\n\t  (0, _validators._validateDocumentPath)(document);\n\t  var ref = (0, _utils._fsCreateRef)(document, db);\n\t  return ref.update(data);\n\t}\n\n/***/ }),\n/* 22 */\n/***/ (function(module, exports) {\n\n\t\"use strict\";\n\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = _fsReset;\n\tfunction _fsReset(state) {\n\t  state.listeners.forEach(function (unsubscribe, id) {\n\t    unsubscribe();\n\t  });\n\t  state.listeners = new Map();\n\t  state.refs = new Map();\n\t  state.syncs = new WeakMap();\n\t  return null;\n\t}\n\n/***/ })\n/******/ ])\n});\n;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/re-base/dist/bundle.js\n// module id = 40\n// module chunks = 0","import 'whatwg-fetch';\n\n// Store setTimeout reference so promise-polyfill will be unaffected by\n// other code modifying setTimeout (like sinon.useFakeTimers())\nvar setTimeoutFunc = setTimeout;\n\nfunction noop() {}\n\n// Polyfill for Function.prototype.bind\nfunction bind(fn, thisArg) {\n  return function() {\n    fn.apply(thisArg, arguments);\n  };\n}\n\nfunction Promise(fn) {\n  if (!(this instanceof Promise))\n    throw new TypeError('Promises must be constructed via new');\n  if (typeof fn !== 'function') throw new TypeError('not a function');\n  this._state = 0;\n  this._handled = false;\n  this._value = undefined;\n  this._deferreds = [];\n\n  doResolve(fn, this);\n}\n\nfunction handle(self, deferred) {\n  while (self._state === 3) {\n    self = self._value;\n  }\n  if (self._state === 0) {\n    self._deferreds.push(deferred);\n    return;\n  }\n  self._handled = true;\n  Promise._immediateFn(function() {\n    var cb = self._state === 1 ? deferred.onFulfilled : deferred.onRejected;\n    if (cb === null) {\n      (self._state === 1 ? resolve : reject)(deferred.promise, self._value);\n      return;\n    }\n    var ret;\n    try {\n      ret = cb(self._value);\n    } catch (e) {\n      reject(deferred.promise, e);\n      return;\n    }\n    resolve(deferred.promise, ret);\n  });\n}\n\nfunction resolve(self, newValue) {\n  try {\n    // Promise Resolution Procedure: https://github.com/promises-aplus/promises-spec#the-promise-resolution-procedure\n    if (newValue === self)\n      throw new TypeError('A promise cannot be resolved with itself.');\n    if (\n      newValue &&\n      (typeof newValue === 'object' || typeof newValue === 'function')\n    ) {\n      var then = newValue.then;\n      if (newValue instanceof Promise) {\n        self._state = 3;\n        self._value = newValue;\n        finale(self);\n        return;\n      } else if (typeof then === 'function') {\n        doResolve(bind(then, newValue), self);\n        return;\n      }\n    }\n    self._state = 1;\n    self._value = newValue;\n    finale(self);\n  } catch (e) {\n    reject(self, e);\n  }\n}\n\nfunction reject(self, newValue) {\n  self._state = 2;\n  self._value = newValue;\n  finale(self);\n}\n\nfunction finale(self) {\n  if (self._state === 2 && self._deferreds.length === 0) {\n    Promise._immediateFn(function() {\n      if (!self._handled) {\n        Promise._unhandledRejectionFn(self._value);\n      }\n    });\n  }\n\n  for (var i = 0, len = self._deferreds.length; i < len; i++) {\n    handle(self, self._deferreds[i]);\n  }\n  self._deferreds = null;\n}\n\nfunction Handler(onFulfilled, onRejected, promise) {\n  this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;\n  this.onRejected = typeof onRejected === 'function' ? onRejected : null;\n  this.promise = promise;\n}\n\n/**\n * Take a potentially misbehaving resolver function and make sure\n * onFulfilled and onRejected are only called once.\n *\n * Makes no guarantees about asynchrony.\n */\nfunction doResolve(fn, self) {\n  var done = false;\n  try {\n    fn(\n      function(value) {\n        if (done) return;\n        done = true;\n        resolve(self, value);\n      },\n      function(reason) {\n        if (done) return;\n        done = true;\n        reject(self, reason);\n      }\n    );\n  } catch (ex) {\n    if (done) return;\n    done = true;\n    reject(self, ex);\n  }\n}\n\nPromise.prototype['catch'] = function(onRejected) {\n  return this.then(null, onRejected);\n};\n\nPromise.prototype.then = function(onFulfilled, onRejected) {\n  var prom = new this.constructor(noop);\n\n  handle(this, new Handler(onFulfilled, onRejected, prom));\n  return prom;\n};\n\nPromise.prototype['finally'] = function(callback) {\n  var constructor = this.constructor;\n  return this.then(\n    function(value) {\n      return constructor.resolve(callback()).then(function() {\n        return value;\n      });\n    },\n    function(reason) {\n      return constructor.resolve(callback()).then(function() {\n        return constructor.reject(reason);\n      });\n    }\n  );\n};\n\nPromise.all = function(arr) {\n  return new Promise(function(resolve, reject) {\n    if (!arr || typeof arr.length === 'undefined')\n      throw new TypeError('Promise.all accepts an array');\n    var args = Array.prototype.slice.call(arr);\n    if (args.length === 0) return resolve([]);\n    var remaining = args.length;\n\n    function res(i, val) {\n      try {\n        if (val && (typeof val === 'object' || typeof val === 'function')) {\n          var then = val.then;\n          if (typeof then === 'function') {\n            then.call(\n              val,\n              function(val) {\n                res(i, val);\n              },\n              reject\n            );\n            return;\n          }\n        }\n        args[i] = val;\n        if (--remaining === 0) {\n          resolve(args);\n        }\n      } catch (ex) {\n        reject(ex);\n      }\n    }\n\n    for (var i = 0; i < args.length; i++) {\n      res(i, args[i]);\n    }\n  });\n};\n\nPromise.resolve = function(value) {\n  if (value && typeof value === 'object' && value.constructor === Promise) {\n    return value;\n  }\n\n  return new Promise(function(resolve) {\n    resolve(value);\n  });\n};\n\nPromise.reject = function(value) {\n  return new Promise(function(resolve, reject) {\n    reject(value);\n  });\n};\n\nPromise.race = function(values) {\n  return new Promise(function(resolve, reject) {\n    for (var i = 0, len = values.length; i < len; i++) {\n      values[i].then(resolve, reject);\n    }\n  });\n};\n\n// Use polyfill for setImmediate for performance gains\nPromise._immediateFn =\n  (typeof setImmediate === 'function' &&\n    function(fn) {\n      setImmediate(fn);\n    }) ||\n  function(fn) {\n    setTimeoutFunc(fn, 0);\n  };\n\nPromise._unhandledRejectionFn = function _unhandledRejectionFn(err) {\n  if (typeof console !== 'undefined' && console) {\n    console.warn('Possible Unhandled Promise Rejection:', err); // eslint-disable-line no-console\n  }\n};\n\nvar globalNS = (function() {\n  // the only reliable means to get the global object is\n  // `Function('return this')()`\n  // However, this causes CSP violations in Chrome apps.\n  if (typeof self !== 'undefined') {\n    return self;\n  }\n  if (typeof window !== 'undefined') {\n    return window;\n  }\n  if (typeof global !== 'undefined') {\n    return global;\n  }\n  throw new Error('unable to locate global object');\n})();\n\nif (!globalNS.Promise) {\n  globalNS.Promise = Promise;\n}\n\nfunction createCommonjsModule(fn, module) {\n\treturn module = { exports: {} }, fn(module, module.exports), module.exports;\n}\n\nvar _global = createCommonjsModule(function (module) {\n// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\nvar global = module.exports = typeof window != 'undefined' && window.Math == Math\n  ? window : typeof self != 'undefined' && self.Math == Math ? self\n  // eslint-disable-next-line no-new-func\n  : Function('return this')();\nif (typeof __g == 'number') __g = global; // eslint-disable-line no-undef\n});\n\nvar _core = createCommonjsModule(function (module) {\nvar core = module.exports = { version: '2.5.5' };\nif (typeof __e == 'number') __e = core; // eslint-disable-line no-undef\n});\nvar _core_1 = _core.version;\n\nvar _isObject = function (it) {\n  return typeof it === 'object' ? it !== null : typeof it === 'function';\n};\n\nvar _anObject = function (it) {\n  if (!_isObject(it)) throw TypeError(it + ' is not an object!');\n  return it;\n};\n\nvar _fails = function (exec) {\n  try {\n    return !!exec();\n  } catch (e) {\n    return true;\n  }\n};\n\n// Thank's IE8 for his funny defineProperty\nvar _descriptors = !_fails(function () {\n  return Object.defineProperty({}, 'a', { get: function () { return 7; } }).a != 7;\n});\n\nvar document = _global.document;\n// typeof document.createElement is 'object' in old IE\nvar is = _isObject(document) && _isObject(document.createElement);\nvar _domCreate = function (it) {\n  return is ? document.createElement(it) : {};\n};\n\nvar _ie8DomDefine = !_descriptors && !_fails(function () {\n  return Object.defineProperty(_domCreate('div'), 'a', { get: function () { return 7; } }).a != 7;\n});\n\n// 7.1.1 ToPrimitive(input [, PreferredType])\n\n// instead of the ES6 spec version, we didn't implement @@toPrimitive case\n// and the second argument - flag - preferred type is a string\nvar _toPrimitive = function (it, S) {\n  if (!_isObject(it)) return it;\n  var fn, val;\n  if (S && typeof (fn = it.toString) == 'function' && !_isObject(val = fn.call(it))) return val;\n  if (typeof (fn = it.valueOf) == 'function' && !_isObject(val = fn.call(it))) return val;\n  if (!S && typeof (fn = it.toString) == 'function' && !_isObject(val = fn.call(it))) return val;\n  throw TypeError(\"Can't convert object to primitive value\");\n};\n\nvar dP = Object.defineProperty;\n\nvar f = _descriptors ? Object.defineProperty : function defineProperty(O, P, Attributes) {\n  _anObject(O);\n  P = _toPrimitive(P, true);\n  _anObject(Attributes);\n  if (_ie8DomDefine) try {\n    return dP(O, P, Attributes);\n  } catch (e) { /* empty */ }\n  if ('get' in Attributes || 'set' in Attributes) throw TypeError('Accessors not supported!');\n  if ('value' in Attributes) O[P] = Attributes.value;\n  return O;\n};\n\nvar _objectDp = {\n\tf: f\n};\n\nvar _propertyDesc = function (bitmap, value) {\n  return {\n    enumerable: !(bitmap & 1),\n    configurable: !(bitmap & 2),\n    writable: !(bitmap & 4),\n    value: value\n  };\n};\n\nvar _hide = _descriptors ? function (object, key, value) {\n  return _objectDp.f(object, key, _propertyDesc(1, value));\n} : function (object, key, value) {\n  object[key] = value;\n  return object;\n};\n\nvar hasOwnProperty = {}.hasOwnProperty;\nvar _has = function (it, key) {\n  return hasOwnProperty.call(it, key);\n};\n\nvar id = 0;\nvar px = Math.random();\nvar _uid = function (key) {\n  return 'Symbol('.concat(key === undefined ? '' : key, ')_', (++id + px).toString(36));\n};\n\nvar _redefine = createCommonjsModule(function (module) {\nvar SRC = _uid('src');\nvar TO_STRING = 'toString';\nvar $toString = Function[TO_STRING];\nvar TPL = ('' + $toString).split(TO_STRING);\n\n_core.inspectSource = function (it) {\n  return $toString.call(it);\n};\n\n(module.exports = function (O, key, val, safe) {\n  var isFunction = typeof val == 'function';\n  if (isFunction) _has(val, 'name') || _hide(val, 'name', key);\n  if (O[key] === val) return;\n  if (isFunction) _has(val, SRC) || _hide(val, SRC, O[key] ? '' + O[key] : TPL.join(String(key)));\n  if (O === _global) {\n    O[key] = val;\n  } else if (!safe) {\n    delete O[key];\n    _hide(O, key, val);\n  } else if (O[key]) {\n    O[key] = val;\n  } else {\n    _hide(O, key, val);\n  }\n// add fake Function#toString for correct work wrapped methods / constructors with methods like LoDash isNative\n})(Function.prototype, TO_STRING, function toString() {\n  return typeof this == 'function' && this[SRC] || $toString.call(this);\n});\n});\n\nvar _aFunction = function (it) {\n  if (typeof it != 'function') throw TypeError(it + ' is not a function!');\n  return it;\n};\n\n// optional / simple context binding\n\nvar _ctx = function (fn, that, length) {\n  _aFunction(fn);\n  if (that === undefined) return fn;\n  switch (length) {\n    case 1: return function (a) {\n      return fn.call(that, a);\n    };\n    case 2: return function (a, b) {\n      return fn.call(that, a, b);\n    };\n    case 3: return function (a, b, c) {\n      return fn.call(that, a, b, c);\n    };\n  }\n  return function (/* ...args */) {\n    return fn.apply(that, arguments);\n  };\n};\n\nvar PROTOTYPE = 'prototype';\n\nvar $export = function (type, name, source) {\n  var IS_FORCED = type & $export.F;\n  var IS_GLOBAL = type & $export.G;\n  var IS_STATIC = type & $export.S;\n  var IS_PROTO = type & $export.P;\n  var IS_BIND = type & $export.B;\n  var target = IS_GLOBAL ? _global : IS_STATIC ? _global[name] || (_global[name] = {}) : (_global[name] || {})[PROTOTYPE];\n  var exports = IS_GLOBAL ? _core : _core[name] || (_core[name] = {});\n  var expProto = exports[PROTOTYPE] || (exports[PROTOTYPE] = {});\n  var key, own, out, exp;\n  if (IS_GLOBAL) source = name;\n  for (key in source) {\n    // contains in native\n    own = !IS_FORCED && target && target[key] !== undefined;\n    // export native or passed\n    out = (own ? target : source)[key];\n    // bind timers to global for call from export context\n    exp = IS_BIND && own ? _ctx(out, _global) : IS_PROTO && typeof out == 'function' ? _ctx(Function.call, out) : out;\n    // extend global\n    if (target) _redefine(target, key, out, type & $export.U);\n    // export\n    if (exports[key] != out) _hide(exports, key, exp);\n    if (IS_PROTO && expProto[key] != out) expProto[key] = out;\n  }\n};\n_global.core = _core;\n// type bitmap\n$export.F = 1;   // forced\n$export.G = 2;   // global\n$export.S = 4;   // static\n$export.P = 8;   // proto\n$export.B = 16;  // bind\n$export.W = 32;  // wrap\n$export.U = 64;  // safe\n$export.R = 128; // real proto method for `library`\nvar _export = $export;\n\nvar toString = {}.toString;\n\nvar _cof = function (it) {\n  return toString.call(it).slice(8, -1);\n};\n\n// fallback for non-array-like ES3 and non-enumerable old V8 strings\n\n// eslint-disable-next-line no-prototype-builtins\nvar _iobject = Object('z').propertyIsEnumerable(0) ? Object : function (it) {\n  return _cof(it) == 'String' ? it.split('') : Object(it);\n};\n\n// 7.2.1 RequireObjectCoercible(argument)\nvar _defined = function (it) {\n  if (it == undefined) throw TypeError(\"Can't call method on  \" + it);\n  return it;\n};\n\n// 7.1.13 ToObject(argument)\n\nvar _toObject = function (it) {\n  return Object(_defined(it));\n};\n\n// 7.1.4 ToInteger\nvar ceil = Math.ceil;\nvar floor = Math.floor;\nvar _toInteger = function (it) {\n  return isNaN(it = +it) ? 0 : (it > 0 ? floor : ceil)(it);\n};\n\n// 7.1.15 ToLength\n\nvar min = Math.min;\nvar _toLength = function (it) {\n  return it > 0 ? min(_toInteger(it), 0x1fffffffffffff) : 0; // pow(2, 53) - 1 == 9007199254740991\n};\n\n// 7.2.2 IsArray(argument)\n\nvar _isArray = Array.isArray || function isArray(arg) {\n  return _cof(arg) == 'Array';\n};\n\nvar SHARED = '__core-js_shared__';\nvar store = _global[SHARED] || (_global[SHARED] = {});\nvar _shared = function (key) {\n  return store[key] || (store[key] = {});\n};\n\nvar _wks = createCommonjsModule(function (module) {\nvar store = _shared('wks');\n\nvar Symbol = _global.Symbol;\nvar USE_SYMBOL = typeof Symbol == 'function';\n\nvar $exports = module.exports = function (name) {\n  return store[name] || (store[name] =\n    USE_SYMBOL && Symbol[name] || (USE_SYMBOL ? Symbol : _uid)('Symbol.' + name));\n};\n\n$exports.store = store;\n});\n\nvar SPECIES = _wks('species');\n\nvar _arraySpeciesConstructor = function (original) {\n  var C;\n  if (_isArray(original)) {\n    C = original.constructor;\n    // cross-realm fallback\n    if (typeof C == 'function' && (C === Array || _isArray(C.prototype))) C = undefined;\n    if (_isObject(C)) {\n      C = C[SPECIES];\n      if (C === null) C = undefined;\n    }\n  } return C === undefined ? Array : C;\n};\n\n// 9.4.2.3 ArraySpeciesCreate(originalArray, length)\n\n\nvar _arraySpeciesCreate = function (original, length) {\n  return new (_arraySpeciesConstructor(original))(length);\n};\n\n// 0 -> Array#forEach\n// 1 -> Array#map\n// 2 -> Array#filter\n// 3 -> Array#some\n// 4 -> Array#every\n// 5 -> Array#find\n// 6 -> Array#findIndex\n\n\n\n\n\nvar _arrayMethods = function (TYPE, $create) {\n  var IS_MAP = TYPE == 1;\n  var IS_FILTER = TYPE == 2;\n  var IS_SOME = TYPE == 3;\n  var IS_EVERY = TYPE == 4;\n  var IS_FIND_INDEX = TYPE == 6;\n  var NO_HOLES = TYPE == 5 || IS_FIND_INDEX;\n  var create = $create || _arraySpeciesCreate;\n  return function ($this, callbackfn, that) {\n    var O = _toObject($this);\n    var self = _iobject(O);\n    var f = _ctx(callbackfn, that, 3);\n    var length = _toLength(self.length);\n    var index = 0;\n    var result = IS_MAP ? create($this, length) : IS_FILTER ? create($this, 0) : undefined;\n    var val, res;\n    for (;length > index; index++) if (NO_HOLES || index in self) {\n      val = self[index];\n      res = f(val, index, O);\n      if (TYPE) {\n        if (IS_MAP) result[index] = res;   // map\n        else if (res) switch (TYPE) {\n          case 3: return true;             // some\n          case 5: return val;              // find\n          case 6: return index;            // findIndex\n          case 2: result.push(val);        // filter\n        } else if (IS_EVERY) return false; // every\n      }\n    }\n    return IS_FIND_INDEX ? -1 : IS_SOME || IS_EVERY ? IS_EVERY : result;\n  };\n};\n\n// 22.1.3.31 Array.prototype[@@unscopables]\nvar UNSCOPABLES = _wks('unscopables');\nvar ArrayProto = Array.prototype;\nif (ArrayProto[UNSCOPABLES] == undefined) _hide(ArrayProto, UNSCOPABLES, {});\nvar _addToUnscopables = function (key) {\n  ArrayProto[UNSCOPABLES][key] = true;\n};\n\n// 22.1.3.8 Array.prototype.find(predicate, thisArg = undefined)\n\nvar $find = _arrayMethods(5);\nvar KEY = 'find';\nvar forced = true;\n// Shouldn't skip holes\nif (KEY in []) Array(1)[KEY](function () { forced = false; });\n_export(_export.P + _export.F * forced, 'Array', {\n  find: function find(callbackfn /* , that = undefined */) {\n    return $find(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n_addToUnscopables(KEY);\n\nvar find = _core.Array.find;\n\n// 22.1.3.9 Array.prototype.findIndex(predicate, thisArg = undefined)\n\nvar $find$1 = _arrayMethods(6);\nvar KEY$1 = 'findIndex';\nvar forced$1 = true;\n// Shouldn't skip holes\nif (KEY$1 in []) Array(1)[KEY$1](function () { forced$1 = false; });\n_export(_export.P + _export.F * forced$1, 'Array', {\n  findIndex: function findIndex(callbackfn /* , that = undefined */) {\n    return $find$1(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n_addToUnscopables(KEY$1);\n\nvar findIndex = _core.Array.findIndex;\n\n// 7.2.8 IsRegExp(argument)\n\n\nvar MATCH = _wks('match');\nvar _isRegexp = function (it) {\n  var isRegExp;\n  return _isObject(it) && ((isRegExp = it[MATCH]) !== undefined ? !!isRegExp : _cof(it) == 'RegExp');\n};\n\n// helper for String#{startsWith, endsWith, includes}\n\n\n\nvar _stringContext = function (that, searchString, NAME) {\n  if (_isRegexp(searchString)) throw TypeError('String#' + NAME + \" doesn't accept regex!\");\n  return String(_defined(that));\n};\n\nvar MATCH$1 = _wks('match');\nvar _failsIsRegexp = function (KEY) {\n  var re = /./;\n  try {\n    '/./'[KEY](re);\n  } catch (e) {\n    try {\n      re[MATCH$1] = false;\n      return !'/./'[KEY](re);\n    } catch (f) { /* empty */ }\n  } return true;\n};\n\nvar STARTS_WITH = 'startsWith';\nvar $startsWith = ''[STARTS_WITH];\n\n_export(_export.P + _export.F * _failsIsRegexp(STARTS_WITH), 'String', {\n  startsWith: function startsWith(searchString /* , position = 0 */) {\n    var that = _stringContext(this, searchString, STARTS_WITH);\n    var index = _toLength(Math.min(arguments.length > 1 ? arguments[1] : undefined, that.length));\n    var search = String(searchString);\n    return $startsWith\n      ? $startsWith.call(that, search, index)\n      : that.slice(index, index + search.length) === search;\n  }\n});\n\nvar startsWith = _core.String.startsWith;\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/@firebase/polyfill/dist/index.esm.js\n// module id = 41\n// module chunks = 0","var scope = (typeof global !== \"undefined\" && global) ||\n            (typeof self !== \"undefined\" && self) ||\n            window;\nvar apply = Function.prototype.apply;\n\n// DOM APIs, for completeness\n\nexports.setTimeout = function() {\n  return new Timeout(apply.call(setTimeout, scope, arguments), clearTimeout);\n};\nexports.setInterval = function() {\n  return new Timeout(apply.call(setInterval, scope, arguments), clearInterval);\n};\nexports.clearTimeout =\nexports.clearInterval = function(timeout) {\n  if (timeout) {\n    timeout.close();\n  }\n};\n\nfunction Timeout(id, clearFn) {\n  this._id = id;\n  this._clearFn = clearFn;\n}\nTimeout.prototype.unref = Timeout.prototype.ref = function() {};\nTimeout.prototype.close = function() {\n  this._clearFn.call(scope, this._id);\n};\n\n// Does not start the time, just sets up the members needed.\nexports.enroll = function(item, msecs) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = msecs;\n};\n\nexports.unenroll = function(item) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = -1;\n};\n\nexports._unrefActive = exports.active = function(item) {\n  clearTimeout(item._idleTimeoutId);\n\n  var msecs = item._idleTimeout;\n  if (msecs >= 0) {\n    item._idleTimeoutId = setTimeout(function onTimeout() {\n      if (item._onTimeout)\n        item._onTimeout();\n    }, msecs);\n  }\n};\n\n// setimmediate attaches itself to the global object\nrequire(\"setimmediate\");\n// On some exotic environments, it's not clear which object `setimmediate` was\n// able to install onto.  Search each possibility in the same order as the\n// `setimmediate` library.\nexports.setImmediate = (typeof self !== \"undefined\" && self.setImmediate) ||\n                       (typeof global !== \"undefined\" && global.setImmediate) ||\n                       (this && this.setImmediate);\nexports.clearImmediate = (typeof self !== \"undefined\" && self.clearImmediate) ||\n                         (typeof global !== \"undefined\" && global.clearImmediate) ||\n                         (this && this.clearImmediate);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/timers-browserify/main.js\n// module id = 42\n// module chunks = 0","(function (global, undefined) {\n    \"use strict\";\n\n    if (global.setImmediate) {\n        return;\n    }\n\n    var nextHandle = 1; // Spec says greater than zero\n    var tasksByHandle = {};\n    var currentlyRunningATask = false;\n    var doc = global.document;\n    var registerImmediate;\n\n    function setImmediate(callback) {\n      // Callback can either be a function or a string\n      if (typeof callback !== \"function\") {\n        callback = new Function(\"\" + callback);\n      }\n      // Copy function arguments\n      var args = new Array(arguments.length - 1);\n      for (var i = 0; i < args.length; i++) {\n          args[i] = arguments[i + 1];\n      }\n      // Store and register the task\n      var task = { callback: callback, args: args };\n      tasksByHandle[nextHandle] = task;\n      registerImmediate(nextHandle);\n      return nextHandle++;\n    }\n\n    function clearImmediate(handle) {\n        delete tasksByHandle[handle];\n    }\n\n    function run(task) {\n        var callback = task.callback;\n        var args = task.args;\n        switch (args.length) {\n        case 0:\n            callback();\n            break;\n        case 1:\n            callback(args[0]);\n            break;\n        case 2:\n            callback(args[0], args[1]);\n            break;\n        case 3:\n            callback(args[0], args[1], args[2]);\n            break;\n        default:\n            callback.apply(undefined, args);\n            break;\n        }\n    }\n\n    function runIfPresent(handle) {\n        // From the spec: \"Wait until any invocations of this algorithm started before this one have completed.\"\n        // So if we're currently running a task, we'll need to delay this invocation.\n        if (currentlyRunningATask) {\n            // Delay by doing a setTimeout. setImmediate was tried instead, but in Firefox 7 it generated a\n            // \"too much recursion\" error.\n            setTimeout(runIfPresent, 0, handle);\n        } else {\n            var task = tasksByHandle[handle];\n            if (task) {\n                currentlyRunningATask = true;\n                try {\n                    run(task);\n                } finally {\n                    clearImmediate(handle);\n                    currentlyRunningATask = false;\n                }\n            }\n        }\n    }\n\n    function installNextTickImplementation() {\n        registerImmediate = function(handle) {\n            process.nextTick(function () { runIfPresent(handle); });\n        };\n    }\n\n    function canUsePostMessage() {\n        // The test against `importScripts` prevents this implementation from being installed inside a web worker,\n        // where `global.postMessage` means something completely different and can't be used for this purpose.\n        if (global.postMessage && !global.importScripts) {\n            var postMessageIsAsynchronous = true;\n            var oldOnMessage = global.onmessage;\n            global.onmessage = function() {\n                postMessageIsAsynchronous = false;\n            };\n            global.postMessage(\"\", \"*\");\n            global.onmessage = oldOnMessage;\n            return postMessageIsAsynchronous;\n        }\n    }\n\n    function installPostMessageImplementation() {\n        // Installs an event handler on `global` for the `message` event: see\n        // * https://developer.mozilla.org/en/DOM/window.postMessage\n        // * http://www.whatwg.org/specs/web-apps/current-work/multipage/comms.html#crossDocumentMessages\n\n        var messagePrefix = \"setImmediate$\" + Math.random() + \"$\";\n        var onGlobalMessage = function(event) {\n            if (event.source === global &&\n                typeof event.data === \"string\" &&\n                event.data.indexOf(messagePrefix) === 0) {\n                runIfPresent(+event.data.slice(messagePrefix.length));\n            }\n        };\n\n        if (global.addEventListener) {\n            global.addEventListener(\"message\", onGlobalMessage, false);\n        } else {\n            global.attachEvent(\"onmessage\", onGlobalMessage);\n        }\n\n        registerImmediate = function(handle) {\n            global.postMessage(messagePrefix + handle, \"*\");\n        };\n    }\n\n    function installMessageChannelImplementation() {\n        var channel = new MessageChannel();\n        channel.port1.onmessage = function(event) {\n            var handle = event.data;\n            runIfPresent(handle);\n        };\n\n        registerImmediate = function(handle) {\n            channel.port2.postMessage(handle);\n        };\n    }\n\n    function installReadyStateChangeImplementation() {\n        var html = doc.documentElement;\n        registerImmediate = function(handle) {\n            // Create a <script> element; its readystatechange event will be fired asynchronously once it is inserted\n            // into the document. Do so, thus queuing up the task. Remember to clean up once it's been called.\n            var script = doc.createElement(\"script\");\n            script.onreadystatechange = function () {\n                runIfPresent(handle);\n                script.onreadystatechange = null;\n                html.removeChild(script);\n                script = null;\n            };\n            html.appendChild(script);\n        };\n    }\n\n    function installSetTimeoutImplementation() {\n        registerImmediate = function(handle) {\n            setTimeout(runIfPresent, 0, handle);\n        };\n    }\n\n    // If supported, we should attach to the prototype of global, since that is where setTimeout et al. live.\n    var attachTo = Object.getPrototypeOf && Object.getPrototypeOf(global);\n    attachTo = attachTo && attachTo.setTimeout ? attachTo : global;\n\n    // Don't get fooled by e.g. browserify environments.\n    if ({}.toString.call(global.process) === \"[object process]\") {\n        // For Node.js before 0.9\n        installNextTickImplementation();\n\n    } else if (canUsePostMessage()) {\n        // For non-IE10 modern browsers\n        installPostMessageImplementation();\n\n    } else if (global.MessageChannel) {\n        // For web workers, where supported\n        installMessageChannelImplementation();\n\n    } else if (doc && \"onreadystatechange\" in doc.createElement(\"script\")) {\n        // For IE 6–8\n        installReadyStateChangeImplementation();\n\n    } else {\n        // For older browsers\n        installSetTimeoutImplementation();\n    }\n\n    attachTo.setImmediate = setImmediate;\n    attachTo.clearImmediate = clearImmediate;\n}(typeof self === \"undefined\" ? typeof global === \"undefined\" ? this : global : self));\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/setimmediate/setImmediate.js\n// module id = 43\n// module chunks = 0","(function(self) {\n  'use strict';\n\n  if (self.fetch) {\n    return\n  }\n\n  var support = {\n    searchParams: 'URLSearchParams' in self,\n    iterable: 'Symbol' in self && 'iterator' in Symbol,\n    blob: 'FileReader' in self && 'Blob' in self && (function() {\n      try {\n        new Blob()\n        return true\n      } catch(e) {\n        return false\n      }\n    })(),\n    formData: 'FormData' in self,\n    arrayBuffer: 'ArrayBuffer' in self\n  }\n\n  if (support.arrayBuffer) {\n    var viewClasses = [\n      '[object Int8Array]',\n      '[object Uint8Array]',\n      '[object Uint8ClampedArray]',\n      '[object Int16Array]',\n      '[object Uint16Array]',\n      '[object Int32Array]',\n      '[object Uint32Array]',\n      '[object Float32Array]',\n      '[object Float64Array]'\n    ]\n\n    var isDataView = function(obj) {\n      return obj && DataView.prototype.isPrototypeOf(obj)\n    }\n\n    var isArrayBufferView = ArrayBuffer.isView || function(obj) {\n      return obj && viewClasses.indexOf(Object.prototype.toString.call(obj)) > -1\n    }\n  }\n\n  function normalizeName(name) {\n    if (typeof name !== 'string') {\n      name = String(name)\n    }\n    if (/[^a-z0-9\\-#$%&'*+.\\^_`|~]/i.test(name)) {\n      throw new TypeError('Invalid character in header field name')\n    }\n    return name.toLowerCase()\n  }\n\n  function normalizeValue(value) {\n    if (typeof value !== 'string') {\n      value = String(value)\n    }\n    return value\n  }\n\n  // Build a destructive iterator for the value list\n  function iteratorFor(items) {\n    var iterator = {\n      next: function() {\n        var value = items.shift()\n        return {done: value === undefined, value: value}\n      }\n    }\n\n    if (support.iterable) {\n      iterator[Symbol.iterator] = function() {\n        return iterator\n      }\n    }\n\n    return iterator\n  }\n\n  function Headers(headers) {\n    this.map = {}\n\n    if (headers instanceof Headers) {\n      headers.forEach(function(value, name) {\n        this.append(name, value)\n      }, this)\n    } else if (Array.isArray(headers)) {\n      headers.forEach(function(header) {\n        this.append(header[0], header[1])\n      }, this)\n    } else if (headers) {\n      Object.getOwnPropertyNames(headers).forEach(function(name) {\n        this.append(name, headers[name])\n      }, this)\n    }\n  }\n\n  Headers.prototype.append = function(name, value) {\n    name = normalizeName(name)\n    value = normalizeValue(value)\n    var oldValue = this.map[name]\n    this.map[name] = oldValue ? oldValue+','+value : value\n  }\n\n  Headers.prototype['delete'] = function(name) {\n    delete this.map[normalizeName(name)]\n  }\n\n  Headers.prototype.get = function(name) {\n    name = normalizeName(name)\n    return this.has(name) ? this.map[name] : null\n  }\n\n  Headers.prototype.has = function(name) {\n    return this.map.hasOwnProperty(normalizeName(name))\n  }\n\n  Headers.prototype.set = function(name, value) {\n    this.map[normalizeName(name)] = normalizeValue(value)\n  }\n\n  Headers.prototype.forEach = function(callback, thisArg) {\n    for (var name in this.map) {\n      if (this.map.hasOwnProperty(name)) {\n        callback.call(thisArg, this.map[name], name, this)\n      }\n    }\n  }\n\n  Headers.prototype.keys = function() {\n    var items = []\n    this.forEach(function(value, name) { items.push(name) })\n    return iteratorFor(items)\n  }\n\n  Headers.prototype.values = function() {\n    var items = []\n    this.forEach(function(value) { items.push(value) })\n    return iteratorFor(items)\n  }\n\n  Headers.prototype.entries = function() {\n    var items = []\n    this.forEach(function(value, name) { items.push([name, value]) })\n    return iteratorFor(items)\n  }\n\n  if (support.iterable) {\n    Headers.prototype[Symbol.iterator] = Headers.prototype.entries\n  }\n\n  function consumed(body) {\n    if (body.bodyUsed) {\n      return Promise.reject(new TypeError('Already read'))\n    }\n    body.bodyUsed = true\n  }\n\n  function fileReaderReady(reader) {\n    return new Promise(function(resolve, reject) {\n      reader.onload = function() {\n        resolve(reader.result)\n      }\n      reader.onerror = function() {\n        reject(reader.error)\n      }\n    })\n  }\n\n  function readBlobAsArrayBuffer(blob) {\n    var reader = new FileReader()\n    var promise = fileReaderReady(reader)\n    reader.readAsArrayBuffer(blob)\n    return promise\n  }\n\n  function readBlobAsText(blob) {\n    var reader = new FileReader()\n    var promise = fileReaderReady(reader)\n    reader.readAsText(blob)\n    return promise\n  }\n\n  function readArrayBufferAsText(buf) {\n    var view = new Uint8Array(buf)\n    var chars = new Array(view.length)\n\n    for (var i = 0; i < view.length; i++) {\n      chars[i] = String.fromCharCode(view[i])\n    }\n    return chars.join('')\n  }\n\n  function bufferClone(buf) {\n    if (buf.slice) {\n      return buf.slice(0)\n    } else {\n      var view = new Uint8Array(buf.byteLength)\n      view.set(new Uint8Array(buf))\n      return view.buffer\n    }\n  }\n\n  function Body() {\n    this.bodyUsed = false\n\n    this._initBody = function(body) {\n      this._bodyInit = body\n      if (!body) {\n        this._bodyText = ''\n      } else if (typeof body === 'string') {\n        this._bodyText = body\n      } else if (support.blob && Blob.prototype.isPrototypeOf(body)) {\n        this._bodyBlob = body\n      } else if (support.formData && FormData.prototype.isPrototypeOf(body)) {\n        this._bodyFormData = body\n      } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n        this._bodyText = body.toString()\n      } else if (support.arrayBuffer && support.blob && isDataView(body)) {\n        this._bodyArrayBuffer = bufferClone(body.buffer)\n        // IE 10-11 can't handle a DataView body.\n        this._bodyInit = new Blob([this._bodyArrayBuffer])\n      } else if (support.arrayBuffer && (ArrayBuffer.prototype.isPrototypeOf(body) || isArrayBufferView(body))) {\n        this._bodyArrayBuffer = bufferClone(body)\n      } else {\n        throw new Error('unsupported BodyInit type')\n      }\n\n      if (!this.headers.get('content-type')) {\n        if (typeof body === 'string') {\n          this.headers.set('content-type', 'text/plain;charset=UTF-8')\n        } else if (this._bodyBlob && this._bodyBlob.type) {\n          this.headers.set('content-type', this._bodyBlob.type)\n        } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n          this.headers.set('content-type', 'application/x-www-form-urlencoded;charset=UTF-8')\n        }\n      }\n    }\n\n    if (support.blob) {\n      this.blob = function() {\n        var rejected = consumed(this)\n        if (rejected) {\n          return rejected\n        }\n\n        if (this._bodyBlob) {\n          return Promise.resolve(this._bodyBlob)\n        } else if (this._bodyArrayBuffer) {\n          return Promise.resolve(new Blob([this._bodyArrayBuffer]))\n        } else if (this._bodyFormData) {\n          throw new Error('could not read FormData body as blob')\n        } else {\n          return Promise.resolve(new Blob([this._bodyText]))\n        }\n      }\n\n      this.arrayBuffer = function() {\n        if (this._bodyArrayBuffer) {\n          return consumed(this) || Promise.resolve(this._bodyArrayBuffer)\n        } else {\n          return this.blob().then(readBlobAsArrayBuffer)\n        }\n      }\n    }\n\n    this.text = function() {\n      var rejected = consumed(this)\n      if (rejected) {\n        return rejected\n      }\n\n      if (this._bodyBlob) {\n        return readBlobAsText(this._bodyBlob)\n      } else if (this._bodyArrayBuffer) {\n        return Promise.resolve(readArrayBufferAsText(this._bodyArrayBuffer))\n      } else if (this._bodyFormData) {\n        throw new Error('could not read FormData body as text')\n      } else {\n        return Promise.resolve(this._bodyText)\n      }\n    }\n\n    if (support.formData) {\n      this.formData = function() {\n        return this.text().then(decode)\n      }\n    }\n\n    this.json = function() {\n      return this.text().then(JSON.parse)\n    }\n\n    return this\n  }\n\n  // HTTP methods whose capitalization should be normalized\n  var methods = ['DELETE', 'GET', 'HEAD', 'OPTIONS', 'POST', 'PUT']\n\n  function normalizeMethod(method) {\n    var upcased = method.toUpperCase()\n    return (methods.indexOf(upcased) > -1) ? upcased : method\n  }\n\n  function Request(input, options) {\n    options = options || {}\n    var body = options.body\n\n    if (input instanceof Request) {\n      if (input.bodyUsed) {\n        throw new TypeError('Already read')\n      }\n      this.url = input.url\n      this.credentials = input.credentials\n      if (!options.headers) {\n        this.headers = new Headers(input.headers)\n      }\n      this.method = input.method\n      this.mode = input.mode\n      if (!body && input._bodyInit != null) {\n        body = input._bodyInit\n        input.bodyUsed = true\n      }\n    } else {\n      this.url = String(input)\n    }\n\n    this.credentials = options.credentials || this.credentials || 'omit'\n    if (options.headers || !this.headers) {\n      this.headers = new Headers(options.headers)\n    }\n    this.method = normalizeMethod(options.method || this.method || 'GET')\n    this.mode = options.mode || this.mode || null\n    this.referrer = null\n\n    if ((this.method === 'GET' || this.method === 'HEAD') && body) {\n      throw new TypeError('Body not allowed for GET or HEAD requests')\n    }\n    this._initBody(body)\n  }\n\n  Request.prototype.clone = function() {\n    return new Request(this, { body: this._bodyInit })\n  }\n\n  function decode(body) {\n    var form = new FormData()\n    body.trim().split('&').forEach(function(bytes) {\n      if (bytes) {\n        var split = bytes.split('=')\n        var name = split.shift().replace(/\\+/g, ' ')\n        var value = split.join('=').replace(/\\+/g, ' ')\n        form.append(decodeURIComponent(name), decodeURIComponent(value))\n      }\n    })\n    return form\n  }\n\n  function parseHeaders(rawHeaders) {\n    var headers = new Headers()\n    // Replace instances of \\r\\n and \\n followed by at least one space or horizontal tab with a space\n    // https://tools.ietf.org/html/rfc7230#section-3.2\n    var preProcessedHeaders = rawHeaders.replace(/\\r?\\n[\\t ]+/g, ' ')\n    preProcessedHeaders.split(/\\r?\\n/).forEach(function(line) {\n      var parts = line.split(':')\n      var key = parts.shift().trim()\n      if (key) {\n        var value = parts.join(':').trim()\n        headers.append(key, value)\n      }\n    })\n    return headers\n  }\n\n  Body.call(Request.prototype)\n\n  function Response(bodyInit, options) {\n    if (!options) {\n      options = {}\n    }\n\n    this.type = 'default'\n    this.status = options.status === undefined ? 200 : options.status\n    this.ok = this.status >= 200 && this.status < 300\n    this.statusText = 'statusText' in options ? options.statusText : 'OK'\n    this.headers = new Headers(options.headers)\n    this.url = options.url || ''\n    this._initBody(bodyInit)\n  }\n\n  Body.call(Response.prototype)\n\n  Response.prototype.clone = function() {\n    return new Response(this._bodyInit, {\n      status: this.status,\n      statusText: this.statusText,\n      headers: new Headers(this.headers),\n      url: this.url\n    })\n  }\n\n  Response.error = function() {\n    var response = new Response(null, {status: 0, statusText: ''})\n    response.type = 'error'\n    return response\n  }\n\n  var redirectStatuses = [301, 302, 303, 307, 308]\n\n  Response.redirect = function(url, status) {\n    if (redirectStatuses.indexOf(status) === -1) {\n      throw new RangeError('Invalid status code')\n    }\n\n    return new Response(null, {status: status, headers: {location: url}})\n  }\n\n  self.Headers = Headers\n  self.Request = Request\n  self.Response = Response\n\n  self.fetch = function(input, init) {\n    return new Promise(function(resolve, reject) {\n      var request = new Request(input, init)\n      var xhr = new XMLHttpRequest()\n\n      xhr.onload = function() {\n        var options = {\n          status: xhr.status,\n          statusText: xhr.statusText,\n          headers: parseHeaders(xhr.getAllResponseHeaders() || '')\n        }\n        options.url = 'responseURL' in xhr ? xhr.responseURL : options.headers.get('X-Request-URL')\n        var body = 'response' in xhr ? xhr.response : xhr.responseText\n        resolve(new Response(body, options))\n      }\n\n      xhr.onerror = function() {\n        reject(new TypeError('Network request failed'))\n      }\n\n      xhr.ontimeout = function() {\n        reject(new TypeError('Network request failed'))\n      }\n\n      xhr.open(request.method, request.url, true)\n\n      if (request.credentials === 'include') {\n        xhr.withCredentials = true\n      } else if (request.credentials === 'omit') {\n        xhr.withCredentials = false\n      }\n\n      if ('responseType' in xhr && support.blob) {\n        xhr.responseType = 'blob'\n      }\n\n      request.headers.forEach(function(value, name) {\n        xhr.setRequestHeader(name, value)\n      })\n\n      xhr.send(typeof request._bodyInit === 'undefined' ? null : request._bodyInit)\n    })\n  }\n  self.fetch.polyfill = true\n})(typeof self !== 'undefined' ? self : this);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/whatwg-fetch/fetch.js\n// module id = 44\n// module chunks = 0","/**\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nmodule.exports = require('@firebase/database');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/firebase/database/index.js\n// module id = 45\n// module chunks = 0","'use strict';\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\nfunction _interopDefault (ex) { return (ex && (typeof ex === 'object') && 'default' in ex) ? ex['default'] : ex; }\n\nvar util = require('@firebase/util');\nvar logger = require('@firebase/logger');\nvar tslib_1 = require('tslib');\nvar firebase = _interopDefault(require('@firebase/app'));\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Wraps a DOM Storage object and:\r\n * - automatically encode objects as JSON strings before storing them to allow us to store arbitrary types.\r\n * - prefixes names with \"firebase:\" to avoid collisions with app data.\r\n *\r\n * We automatically (see storage.js) create two such wrappers, one for sessionStorage,\r\n * and one for localStorage.\r\n *\r\n * @constructor\r\n */\r\nvar DOMStorageWrapper = /** @class */ (function () {\r\n    /**\r\n     * @param {Storage} domStorage_ The underlying storage object (e.g. localStorage or sessionStorage)\r\n     */\r\n    function DOMStorageWrapper(domStorage_) {\r\n        this.domStorage_ = domStorage_;\r\n        // Use a prefix to avoid collisions with other stuff saved by the app.\r\n        this.prefix_ = 'firebase:';\r\n    }\r\n    /**\r\n     * @param {string} key The key to save the value under\r\n     * @param {?Object} value The value being stored, or null to remove the key.\r\n     */\r\n    DOMStorageWrapper.prototype.set = function (key, value) {\r\n        if (value == null) {\r\n            this.domStorage_.removeItem(this.prefixedName_(key));\r\n        }\r\n        else {\r\n            this.domStorage_.setItem(this.prefixedName_(key), util.stringify(value));\r\n        }\r\n    };\r\n    /**\r\n     * @param {string} key\r\n     * @return {*} The value that was stored under this key, or null\r\n     */\r\n    DOMStorageWrapper.prototype.get = function (key) {\r\n        var storedVal = this.domStorage_.getItem(this.prefixedName_(key));\r\n        if (storedVal == null) {\r\n            return null;\r\n        }\r\n        else {\r\n            return util.jsonEval(storedVal);\r\n        }\r\n    };\r\n    /**\r\n     * @param {string} key\r\n     */\r\n    DOMStorageWrapper.prototype.remove = function (key) {\r\n        this.domStorage_.removeItem(this.prefixedName_(key));\r\n    };\r\n    /**\r\n     * @param {string} name\r\n     * @return {string}\r\n     */\r\n    DOMStorageWrapper.prototype.prefixedName_ = function (name) {\r\n        return this.prefix_ + name;\r\n    };\r\n    DOMStorageWrapper.prototype.toString = function () {\r\n        return this.domStorage_.toString();\r\n    };\r\n    return DOMStorageWrapper;\r\n}());\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * An in-memory storage implementation that matches the API of DOMStorageWrapper\r\n * (TODO: create interface for both to implement).\r\n *\r\n * @constructor\r\n */\r\nvar MemoryStorage = /** @class */ (function () {\r\n    function MemoryStorage() {\r\n        this.cache_ = {};\r\n        this.isInMemoryStorage = true;\r\n    }\r\n    MemoryStorage.prototype.set = function (key, value) {\r\n        if (value == null) {\r\n            delete this.cache_[key];\r\n        }\r\n        else {\r\n            this.cache_[key] = value;\r\n        }\r\n    };\r\n    MemoryStorage.prototype.get = function (key) {\r\n        if (util.contains(this.cache_, key)) {\r\n            return this.cache_[key];\r\n        }\r\n        return null;\r\n    };\r\n    MemoryStorage.prototype.remove = function (key) {\r\n        delete this.cache_[key];\r\n    };\r\n    return MemoryStorage;\r\n}());\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Helper to create a DOMStorageWrapper or else fall back to MemoryStorage.\r\n * TODO: Once MemoryStorage and DOMStorageWrapper have a shared interface this method annotation should change\r\n * to reflect this type\r\n *\r\n * @param {string} domStorageName Name of the underlying storage object\r\n *   (e.g. 'localStorage' or 'sessionStorage').\r\n * @return {?} Turning off type information until a common interface is defined.\r\n */\r\nvar createStoragefor = function (domStorageName) {\r\n    try {\r\n        // NOTE: just accessing \"localStorage\" or \"window['localStorage']\" may throw a security exception,\r\n        // so it must be inside the try/catch.\r\n        if (typeof window !== 'undefined' &&\r\n            typeof window[domStorageName] !== 'undefined') {\r\n            // Need to test cache. Just because it's here doesn't mean it works\r\n            var domStorage = window[domStorageName];\r\n            domStorage.setItem('firebase:sentinel', 'cache');\r\n            domStorage.removeItem('firebase:sentinel');\r\n            return new DOMStorageWrapper(domStorage);\r\n        }\r\n    }\r\n    catch (e) { }\r\n    // Failed to create wrapper.  Just return in-memory storage.\r\n    // TODO: log?\r\n    return new MemoryStorage();\r\n};\r\n/** A storage object that lasts across sessions */\r\nvar PersistentStorage = createStoragefor('localStorage');\r\n/** A storage object that only lasts one session */\r\nvar SessionStorage = createStoragefor('sessionStorage');\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nvar logClient = new logger.Logger('@firebase/database');\r\n/**\r\n * Returns a locally-unique ID (generated by just incrementing up from 0 each time its called).\r\n * @type {function(): number} Generated ID.\r\n */\r\nvar LUIDGenerator = (function () {\r\n    var id = 1;\r\n    return function () {\r\n        return id++;\r\n    };\r\n})();\r\n/**\r\n * Sha1 hash of the input string\r\n * @param {!string} str The string to hash\r\n * @return {!string} The resulting hash\r\n */\r\nvar sha1 = function (str) {\r\n    var utf8Bytes = util.stringToByteArray(str);\r\n    var sha1 = new util.Sha1();\r\n    sha1.update(utf8Bytes);\r\n    var sha1Bytes = sha1.digest();\r\n    return util.base64.encodeByteArray(sha1Bytes);\r\n};\r\n/**\r\n * @param {...*} var_args\r\n * @return {string}\r\n * @private\r\n */\r\nvar buildLogMessage_ = function () {\r\n    var var_args = [];\r\n    for (var _i = 0; _i < arguments.length; _i++) {\r\n        var_args[_i] = arguments[_i];\r\n    }\r\n    var message = '';\r\n    for (var i = 0; i < var_args.length; i++) {\r\n        if (Array.isArray(var_args[i]) ||\r\n            (var_args[i] &&\r\n                typeof var_args[i] === 'object' &&\r\n                typeof var_args[i].length === 'number')) {\r\n            message += buildLogMessage_.apply(null, var_args[i]);\r\n        }\r\n        else if (typeof var_args[i] === 'object') {\r\n            message += util.stringify(var_args[i]);\r\n        }\r\n        else {\r\n            message += var_args[i];\r\n        }\r\n        message += ' ';\r\n    }\r\n    return message;\r\n};\r\n/**\r\n * Use this for all debug messages in Firebase.\r\n * @type {?function(string)}\r\n */\r\nvar logger$1 = null;\r\n/**\r\n * Flag to check for log availability on first log message\r\n * @type {boolean}\r\n * @private\r\n */\r\nvar firstLog_ = true;\r\n/**\r\n * The implementation of Firebase.enableLogging (defined here to break dependencies)\r\n * @param {boolean|?function(string)} logger_ A flag to turn on logging, or a custom logger\r\n * @param {boolean=} persistent Whether or not to persist logging settings across refreshes\r\n */\r\nvar enableLogging = function (logger_, persistent) {\r\n    util.assert(!persistent || (logger_ === true || logger_ === false), \"Can't turn on custom loggers persistently.\");\r\n    if (logger_ === true) {\r\n        logClient.logLevel = logger.LogLevel.VERBOSE;\r\n        logger$1 = logClient.log.bind(logClient);\r\n        if (persistent)\r\n            SessionStorage.set('logging_enabled', true);\r\n    }\r\n    else if (typeof logger_ === 'function') {\r\n        logger$1 = logger_;\r\n    }\r\n    else {\r\n        logger$1 = null;\r\n        SessionStorage.remove('logging_enabled');\r\n    }\r\n};\r\n/**\r\n *\r\n * @param {...(string|Arguments)} var_args\r\n */\r\nvar log = function () {\r\n    var var_args = [];\r\n    for (var _i = 0; _i < arguments.length; _i++) {\r\n        var_args[_i] = arguments[_i];\r\n    }\r\n    if (firstLog_ === true) {\r\n        firstLog_ = false;\r\n        if (logger$1 === null && SessionStorage.get('logging_enabled') === true)\r\n            enableLogging(true);\r\n    }\r\n    if (logger$1) {\r\n        var message = buildLogMessage_.apply(null, var_args);\r\n        logger$1(message);\r\n    }\r\n};\r\n/**\r\n * @param {!string} prefix\r\n * @return {function(...[*])}\r\n */\r\nvar logWrapper = function (prefix) {\r\n    return function () {\r\n        var var_args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            var_args[_i] = arguments[_i];\r\n        }\r\n        log.apply(void 0, [prefix].concat(var_args));\r\n    };\r\n};\r\n/**\r\n * @param {...string} var_args\r\n */\r\nvar error = function () {\r\n    var var_args = [];\r\n    for (var _i = 0; _i < arguments.length; _i++) {\r\n        var_args[_i] = arguments[_i];\r\n    }\r\n    var message = 'FIREBASE INTERNAL ERROR: ' + buildLogMessage_.apply(void 0, var_args);\r\n    logClient.error(message);\r\n};\r\n/**\r\n * @param {...string} var_args\r\n */\r\nvar fatal = function () {\r\n    var var_args = [];\r\n    for (var _i = 0; _i < arguments.length; _i++) {\r\n        var_args[_i] = arguments[_i];\r\n    }\r\n    var message = \"FIREBASE FATAL ERROR: \" + buildLogMessage_.apply(void 0, var_args);\r\n    logClient.error(message);\r\n    throw new Error(message);\r\n};\r\n/**\r\n * @param {...*} var_args\r\n */\r\nvar warn = function () {\r\n    var var_args = [];\r\n    for (var _i = 0; _i < arguments.length; _i++) {\r\n        var_args[_i] = arguments[_i];\r\n    }\r\n    var message = 'FIREBASE WARNING: ' + buildLogMessage_.apply(void 0, var_args);\r\n    logClient.warn(message);\r\n};\r\n/**\r\n * Logs a warning if the containing page uses https. Called when a call to new Firebase\r\n * does not use https.\r\n */\r\nvar warnIfPageIsSecure = function () {\r\n    // Be very careful accessing browser globals. Who knows what may or may not exist.\r\n    if (typeof window !== 'undefined' &&\r\n        window.location &&\r\n        window.location.protocol &&\r\n        window.location.protocol.indexOf('https:') !== -1) {\r\n        warn('Insecure Firebase access from a secure page. ' +\r\n            'Please use https in calls to new Firebase().');\r\n    }\r\n};\r\n/**\r\n * Returns true if data is NaN, or +/- Infinity.\r\n * @param {*} data\r\n * @return {boolean}\r\n */\r\nvar isInvalidJSONNumber = function (data) {\r\n    return (typeof data === 'number' &&\r\n        (data != data || // NaN\r\n            data == Number.POSITIVE_INFINITY ||\r\n            data == Number.NEGATIVE_INFINITY));\r\n};\r\n/**\r\n * @param {function()} fn\r\n */\r\nvar executeWhenDOMReady = function (fn) {\r\n    if (util.isNodeSdk() || document.readyState === 'complete') {\r\n        fn();\r\n    }\r\n    else {\r\n        // Modeled after jQuery. Try DOMContentLoaded and onreadystatechange (which\r\n        // fire before onload), but fall back to onload.\r\n        var called_1 = false;\r\n        var wrappedFn_1 = function () {\r\n            if (!document.body) {\r\n                setTimeout(wrappedFn_1, Math.floor(10));\r\n                return;\r\n            }\r\n            if (!called_1) {\r\n                called_1 = true;\r\n                fn();\r\n            }\r\n        };\r\n        if (document.addEventListener) {\r\n            document.addEventListener('DOMContentLoaded', wrappedFn_1, false);\r\n            // fallback to onload.\r\n            window.addEventListener('load', wrappedFn_1, false);\r\n        }\r\n        else if (document.attachEvent) {\r\n            // IE.\r\n            document.attachEvent('onreadystatechange', function () {\r\n                if (document.readyState === 'complete')\r\n                    wrappedFn_1();\r\n            });\r\n            // fallback to onload.\r\n            window.attachEvent('onload', wrappedFn_1);\r\n            // jQuery has an extra hack for IE that we could employ (based on\r\n            // http://javascript.nwbox.com/IEContentLoaded/) But it looks really old.\r\n            // I'm hoping we don't need it.\r\n        }\r\n    }\r\n};\r\n/**\r\n * Minimum key name. Invalid for actual data, used as a marker to sort before any valid names\r\n * @type {!string}\r\n */\r\nvar MIN_NAME = '[MIN_NAME]';\r\n/**\r\n * Maximum key name. Invalid for actual data, used as a marker to sort above any valid names\r\n * @type {!string}\r\n */\r\nvar MAX_NAME = '[MAX_NAME]';\r\n/**\r\n * Compares valid Firebase key names, plus min and max name\r\n * @param {!string} a\r\n * @param {!string} b\r\n * @return {!number}\r\n */\r\nvar nameCompare = function (a, b) {\r\n    if (a === b) {\r\n        return 0;\r\n    }\r\n    else if (a === MIN_NAME || b === MAX_NAME) {\r\n        return -1;\r\n    }\r\n    else if (b === MIN_NAME || a === MAX_NAME) {\r\n        return 1;\r\n    }\r\n    else {\r\n        var aAsInt = tryParseInt(a), bAsInt = tryParseInt(b);\r\n        if (aAsInt !== null) {\r\n            if (bAsInt !== null) {\r\n                return aAsInt - bAsInt == 0 ? a.length - b.length : aAsInt - bAsInt;\r\n            }\r\n            else {\r\n                return -1;\r\n            }\r\n        }\r\n        else if (bAsInt !== null) {\r\n            return 1;\r\n        }\r\n        else {\r\n            return a < b ? -1 : 1;\r\n        }\r\n    }\r\n};\r\n/**\r\n * @param {!string} a\r\n * @param {!string} b\r\n * @return {!number} comparison result.\r\n */\r\nvar stringCompare = function (a, b) {\r\n    if (a === b) {\r\n        return 0;\r\n    }\r\n    else if (a < b) {\r\n        return -1;\r\n    }\r\n    else {\r\n        return 1;\r\n    }\r\n};\r\n/**\r\n * @param {string} key\r\n * @param {Object} obj\r\n * @return {*}\r\n */\r\nvar requireKey = function (key, obj) {\r\n    if (obj && key in obj) {\r\n        return obj[key];\r\n    }\r\n    else {\r\n        throw new Error('Missing required key (' + key + ') in object: ' + util.stringify(obj));\r\n    }\r\n};\r\n/**\r\n * @param {*} obj\r\n * @return {string}\r\n */\r\nvar ObjectToUniqueKey = function (obj) {\r\n    if (typeof obj !== 'object' || obj === null)\r\n        return util.stringify(obj);\r\n    var keys = [];\r\n    for (var k in obj) {\r\n        keys.push(k);\r\n    }\r\n    // Export as json, but with the keys sorted.\r\n    keys.sort();\r\n    var key = '{';\r\n    for (var i = 0; i < keys.length; i++) {\r\n        if (i !== 0)\r\n            key += ',';\r\n        key += util.stringify(keys[i]);\r\n        key += ':';\r\n        key += ObjectToUniqueKey(obj[keys[i]]);\r\n    }\r\n    key += '}';\r\n    return key;\r\n};\r\n/**\r\n * Splits a string into a number of smaller segments of maximum size\r\n * @param {!string} str The string\r\n * @param {!number} segsize The maximum number of chars in the string.\r\n * @return {Array.<string>} The string, split into appropriately-sized chunks\r\n */\r\nvar splitStringBySize = function (str, segsize) {\r\n    var len = str.length;\r\n    if (len <= segsize) {\r\n        return [str];\r\n    }\r\n    var dataSegs = [];\r\n    for (var c = 0; c < len; c += segsize) {\r\n        if (c + segsize > len) {\r\n            dataSegs.push(str.substring(c, len));\r\n        }\r\n        else {\r\n            dataSegs.push(str.substring(c, c + segsize));\r\n        }\r\n    }\r\n    return dataSegs;\r\n};\r\n/**\r\n * Apply a function to each (key, value) pair in an object or\r\n * apply a function to each (index, value) pair in an array\r\n * @param {!(Object|Array)} obj The object or array to iterate over\r\n * @param {function(?, ?)} fn The function to apply\r\n */\r\nvar each = function (obj, fn) {\r\n    if (Array.isArray(obj)) {\r\n        for (var i = 0; i < obj.length; ++i) {\r\n            fn(i, obj[i]);\r\n        }\r\n    }\r\n    else {\r\n        /**\r\n         * in the conversion of code we removed the goog.object.forEach\r\n         * function which did a value,key callback. We standardized on\r\n         * a single impl that does a key, value callback. So we invert\r\n         * to not have to touch the `each` code points\r\n         */\r\n        util.forEach(obj, function (key, val) { return fn(val, key); });\r\n    }\r\n};\r\n/**\r\n * Borrowed from http://hg.secondlife.com/llsd/src/tip/js/typedarray.js (MIT License)\r\n * I made one modification at the end and removed the NaN / Infinity\r\n * handling (since it seemed broken [caused an overflow] and we don't need it).  See MJL comments.\r\n * @param {!number} v A double\r\n * @return {string}\r\n */\r\nvar doubleToIEEE754String = function (v) {\r\n    util.assert(!isInvalidJSONNumber(v), 'Invalid JSON number'); // MJL\r\n    var ebits = 11, fbits = 52;\r\n    var bias = (1 << (ebits - 1)) - 1, s, e, f, ln, i, bits, str;\r\n    // Compute sign, exponent, fraction\r\n    // Skip NaN / Infinity handling --MJL.\r\n    if (v === 0) {\r\n        e = 0;\r\n        f = 0;\r\n        s = 1 / v === -Infinity ? 1 : 0;\r\n    }\r\n    else {\r\n        s = v < 0;\r\n        v = Math.abs(v);\r\n        if (v >= Math.pow(2, 1 - bias)) {\r\n            // Normalized\r\n            ln = Math.min(Math.floor(Math.log(v) / Math.LN2), bias);\r\n            e = ln + bias;\r\n            f = Math.round(v * Math.pow(2, fbits - ln) - Math.pow(2, fbits));\r\n        }\r\n        else {\r\n            // Denormalized\r\n            e = 0;\r\n            f = Math.round(v / Math.pow(2, 1 - bias - fbits));\r\n        }\r\n    }\r\n    // Pack sign, exponent, fraction\r\n    bits = [];\r\n    for (i = fbits; i; i -= 1) {\r\n        bits.push(f % 2 ? 1 : 0);\r\n        f = Math.floor(f / 2);\r\n    }\r\n    for (i = ebits; i; i -= 1) {\r\n        bits.push(e % 2 ? 1 : 0);\r\n        e = Math.floor(e / 2);\r\n    }\r\n    bits.push(s ? 1 : 0);\r\n    bits.reverse();\r\n    str = bits.join('');\r\n    // Return the data as a hex string. --MJL\r\n    var hexByteString = '';\r\n    for (i = 0; i < 64; i += 8) {\r\n        var hexByte = parseInt(str.substr(i, 8), 2).toString(16);\r\n        if (hexByte.length === 1)\r\n            hexByte = '0' + hexByte;\r\n        hexByteString = hexByteString + hexByte;\r\n    }\r\n    return hexByteString.toLowerCase();\r\n};\r\n/**\r\n * Used to detect if we're in a Chrome content script (which executes in an\r\n * isolated environment where long-polling doesn't work).\r\n * @return {boolean}\r\n */\r\nvar isChromeExtensionContentScript = function () {\r\n    return !!(typeof window === 'object' &&\r\n        window['chrome'] &&\r\n        window['chrome']['extension'] &&\r\n        !/^chrome/.test(window.location.href));\r\n};\r\n/**\r\n * Used to detect if we're in a Windows 8 Store app.\r\n * @return {boolean}\r\n */\r\nvar isWindowsStoreApp = function () {\r\n    // Check for the presence of a couple WinRT globals\r\n    return typeof Windows === 'object' && typeof Windows.UI === 'object';\r\n};\r\n/**\r\n * Converts a server error code to a Javascript Error\r\n * @param {!string} code\r\n * @param {!Query} query\r\n * @return {Error}\r\n */\r\nvar errorForServerCode = function (code, query) {\r\n    var reason = 'Unknown Error';\r\n    if (code === 'too_big') {\r\n        reason =\r\n            'The data requested exceeds the maximum size ' +\r\n                'that can be accessed with a single request.';\r\n    }\r\n    else if (code == 'permission_denied') {\r\n        reason = \"Client doesn't have permission to access the desired data.\";\r\n    }\r\n    else if (code == 'unavailable') {\r\n        reason = 'The service is unavailable';\r\n    }\r\n    var error = new Error(code + ' at ' + query.path.toString() + ': ' + reason);\r\n    error.code = code.toUpperCase();\r\n    return error;\r\n};\r\n/**\r\n * Used to test for integer-looking strings\r\n * @type {RegExp}\r\n * @private\r\n */\r\nvar INTEGER_REGEXP_ = new RegExp('^-?\\\\d{1,10}$');\r\n/**\r\n * If the string contains a 32-bit integer, return it.  Else return null.\r\n * @param {!string} str\r\n * @return {?number}\r\n */\r\nvar tryParseInt = function (str) {\r\n    if (INTEGER_REGEXP_.test(str)) {\r\n        var intVal = Number(str);\r\n        if (intVal >= -2147483648 && intVal <= 2147483647) {\r\n            return intVal;\r\n        }\r\n    }\r\n    return null;\r\n};\r\n/**\r\n * Helper to run some code but catch any exceptions and re-throw them later.\r\n * Useful for preventing user callbacks from breaking internal code.\r\n *\r\n * Re-throwing the exception from a setTimeout is a little evil, but it's very\r\n * convenient (we don't have to try to figure out when is a safe point to\r\n * re-throw it), and the behavior seems reasonable:\r\n *\r\n * * If you aren't pausing on exceptions, you get an error in the console with\r\n *   the correct stack trace.\r\n * * If you're pausing on all exceptions, the debugger will pause on your\r\n *   exception and then again when we rethrow it.\r\n * * If you're only pausing on uncaught exceptions, the debugger will only pause\r\n *   on us re-throwing it.\r\n *\r\n * @param {!function()} fn The code to guard.\r\n */\r\nvar exceptionGuard = function (fn) {\r\n    try {\r\n        fn();\r\n    }\r\n    catch (e) {\r\n        // Re-throw exception when it's safe.\r\n        setTimeout(function () {\r\n            // It used to be that \"throw e\" would result in a good console error with\r\n            // relevant context, but as of Chrome 39, you just get the firebase.js\r\n            // file/line number where we re-throw it, which is useless. So we log\r\n            // e.stack explicitly.\r\n            var stack = e.stack || '';\r\n            warn('Exception was thrown by user callback.', stack);\r\n            throw e;\r\n        }, Math.floor(0));\r\n    }\r\n};\r\n/**\r\n * @return {boolean} true if we think we're currently being crawled.\r\n */\r\nvar beingCrawled = function () {\r\n    var userAgent = (typeof window === 'object' &&\r\n        window['navigator'] &&\r\n        window['navigator']['userAgent']) ||\r\n        '';\r\n    // For now we whitelist the most popular crawlers.  We should refine this to be the set of crawlers we\r\n    // believe to support JavaScript/AJAX rendering.\r\n    // NOTE: Google Webmaster Tools doesn't really belong, but their \"This is how a visitor to your website\r\n    // would have seen the page\" is flaky if we don't treat it as a crawler.\r\n    return (userAgent.search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i) >= 0);\r\n};\r\n/**\r\n * Same as setTimeout() except on Node.JS it will /not/ prevent the process from exiting.\r\n *\r\n * It is removed with clearTimeout() as normal.\r\n *\r\n * @param {Function} fn Function to run.\r\n * @param {number} time Milliseconds to wait before running.\r\n * @return {number|Object} The setTimeout() return value.\r\n */\r\nvar setTimeoutNonBlocking = function (fn, time) {\r\n    var timeout = setTimeout(fn, time);\r\n    if (typeof timeout === 'object' && timeout['unref']) {\r\n        timeout['unref']();\r\n    }\r\n    return timeout;\r\n};\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * An immutable object representing a parsed path.  It's immutable so that you\r\n * can pass them around to other functions without worrying about them changing\r\n * it.\r\n */\r\nvar Path = /** @class */ (function () {\r\n    /**\r\n     * @param {string|Array.<string>} pathOrString Path string to parse,\r\n     *      or another path, or the raw tokens array\r\n     * @param {number=} pieceNum\r\n     */\r\n    function Path(pathOrString, pieceNum) {\r\n        if (pieceNum === void 0) {\r\n            this.pieces_ = pathOrString.split('/');\r\n            // Remove empty pieces.\r\n            var copyTo = 0;\r\n            for (var i = 0; i < this.pieces_.length; i++) {\r\n                if (this.pieces_[i].length > 0) {\r\n                    this.pieces_[copyTo] = this.pieces_[i];\r\n                    copyTo++;\r\n                }\r\n            }\r\n            this.pieces_.length = copyTo;\r\n            this.pieceNum_ = 0;\r\n        }\r\n        else {\r\n            this.pieces_ = pathOrString;\r\n            this.pieceNum_ = pieceNum;\r\n        }\r\n    }\r\n    Object.defineProperty(Path, \"Empty\", {\r\n        /**\r\n         * Singleton to represent an empty path\r\n         *\r\n         * @const\r\n         */\r\n        get: function () {\r\n            return new Path('');\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Path.prototype.getFront = function () {\r\n        if (this.pieceNum_ >= this.pieces_.length)\r\n            return null;\r\n        return this.pieces_[this.pieceNum_];\r\n    };\r\n    /**\r\n     * @return {number} The number of segments in this path\r\n     */\r\n    Path.prototype.getLength = function () {\r\n        return this.pieces_.length - this.pieceNum_;\r\n    };\r\n    /**\r\n     * @return {!Path}\r\n     */\r\n    Path.prototype.popFront = function () {\r\n        var pieceNum = this.pieceNum_;\r\n        if (pieceNum < this.pieces_.length) {\r\n            pieceNum++;\r\n        }\r\n        return new Path(this.pieces_, pieceNum);\r\n    };\r\n    /**\r\n     * @return {?string}\r\n     */\r\n    Path.prototype.getBack = function () {\r\n        if (this.pieceNum_ < this.pieces_.length)\r\n            return this.pieces_[this.pieces_.length - 1];\r\n        return null;\r\n    };\r\n    Path.prototype.toString = function () {\r\n        var pathString = '';\r\n        for (var i = this.pieceNum_; i < this.pieces_.length; i++) {\r\n            if (this.pieces_[i] !== '')\r\n                pathString += '/' + this.pieces_[i];\r\n        }\r\n        return pathString || '/';\r\n    };\r\n    Path.prototype.toUrlEncodedString = function () {\r\n        var pathString = '';\r\n        for (var i = this.pieceNum_; i < this.pieces_.length; i++) {\r\n            if (this.pieces_[i] !== '')\r\n                pathString += '/' + encodeURIComponent(String(this.pieces_[i]));\r\n        }\r\n        return pathString || '/';\r\n    };\r\n    /**\r\n     * Shallow copy of the parts of the path.\r\n     *\r\n     * @param {number=} begin\r\n     * @return {!Array<string>}\r\n     */\r\n    Path.prototype.slice = function (begin) {\r\n        if (begin === void 0) { begin = 0; }\r\n        return this.pieces_.slice(this.pieceNum_ + begin);\r\n    };\r\n    /**\r\n     * @return {?Path}\r\n     */\r\n    Path.prototype.parent = function () {\r\n        if (this.pieceNum_ >= this.pieces_.length)\r\n            return null;\r\n        var pieces = [];\r\n        for (var i = this.pieceNum_; i < this.pieces_.length - 1; i++)\r\n            pieces.push(this.pieces_[i]);\r\n        return new Path(pieces, 0);\r\n    };\r\n    /**\r\n     * @param {string|!Path} childPathObj\r\n     * @return {!Path}\r\n     */\r\n    Path.prototype.child = function (childPathObj) {\r\n        var pieces = [];\r\n        for (var i = this.pieceNum_; i < this.pieces_.length; i++)\r\n            pieces.push(this.pieces_[i]);\r\n        if (childPathObj instanceof Path) {\r\n            for (var i = childPathObj.pieceNum_; i < childPathObj.pieces_.length; i++) {\r\n                pieces.push(childPathObj.pieces_[i]);\r\n            }\r\n        }\r\n        else {\r\n            var childPieces = childPathObj.split('/');\r\n            for (var i = 0; i < childPieces.length; i++) {\r\n                if (childPieces[i].length > 0)\r\n                    pieces.push(childPieces[i]);\r\n            }\r\n        }\r\n        return new Path(pieces, 0);\r\n    };\r\n    /**\r\n     * @return {boolean} True if there are no segments in this path\r\n     */\r\n    Path.prototype.isEmpty = function () {\r\n        return this.pieceNum_ >= this.pieces_.length;\r\n    };\r\n    /**\r\n     * @param {!Path} outerPath\r\n     * @param {!Path} innerPath\r\n     * @return {!Path} The path from outerPath to innerPath\r\n     */\r\n    Path.relativePath = function (outerPath, innerPath) {\r\n        var outer = outerPath.getFront(), inner = innerPath.getFront();\r\n        if (outer === null) {\r\n            return innerPath;\r\n        }\r\n        else if (outer === inner) {\r\n            return Path.relativePath(outerPath.popFront(), innerPath.popFront());\r\n        }\r\n        else {\r\n            throw new Error('INTERNAL ERROR: innerPath (' +\r\n                innerPath +\r\n                ') is not within ' +\r\n                'outerPath (' +\r\n                outerPath +\r\n                ')');\r\n        }\r\n    };\r\n    /**\r\n     * @param {!Path} left\r\n     * @param {!Path} right\r\n     * @return {number} -1, 0, 1 if left is less, equal, or greater than the right.\r\n     */\r\n    Path.comparePaths = function (left, right) {\r\n        var leftKeys = left.slice();\r\n        var rightKeys = right.slice();\r\n        for (var i = 0; i < leftKeys.length && i < rightKeys.length; i++) {\r\n            var cmp = nameCompare(leftKeys[i], rightKeys[i]);\r\n            if (cmp !== 0)\r\n                return cmp;\r\n        }\r\n        if (leftKeys.length === rightKeys.length)\r\n            return 0;\r\n        return leftKeys.length < rightKeys.length ? -1 : 1;\r\n    };\r\n    /**\r\n     *\r\n     * @param {Path} other\r\n     * @return {boolean} true if paths are the same.\r\n     */\r\n    Path.prototype.equals = function (other) {\r\n        if (this.getLength() !== other.getLength()) {\r\n            return false;\r\n        }\r\n        for (var i = this.pieceNum_, j = other.pieceNum_; i <= this.pieces_.length; i++, j++) {\r\n            if (this.pieces_[i] !== other.pieces_[j]) {\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    };\r\n    /**\r\n     *\r\n     * @param {!Path} other\r\n     * @return {boolean} True if this path is a parent (or the same as) other\r\n     */\r\n    Path.prototype.contains = function (other) {\r\n        var i = this.pieceNum_;\r\n        var j = other.pieceNum_;\r\n        if (this.getLength() > other.getLength()) {\r\n            return false;\r\n        }\r\n        while (i < this.pieces_.length) {\r\n            if (this.pieces_[i] !== other.pieces_[j]) {\r\n                return false;\r\n            }\r\n            ++i;\r\n            ++j;\r\n        }\r\n        return true;\r\n    };\r\n    return Path;\r\n}()); // end Path\r\n/**\r\n * Dynamic (mutable) path used to count path lengths.\r\n *\r\n * This class is used to efficiently check paths for valid\r\n * length (in UTF8 bytes) and depth (used in path validation).\r\n *\r\n * Throws Error exception if path is ever invalid.\r\n *\r\n * The definition of a path always begins with '/'.\r\n */\r\nvar ValidationPath = /** @class */ (function () {\r\n    /**\r\n     * @param {!Path} path Initial Path.\r\n     * @param {string} errorPrefix_ Prefix for any error messages.\r\n     */\r\n    function ValidationPath(path, errorPrefix_) {\r\n        this.errorPrefix_ = errorPrefix_;\r\n        /** @type {!Array<string>} */\r\n        this.parts_ = path.slice();\r\n        /** @type {number} Initialize to number of '/' chars needed in path. */\r\n        this.byteLength_ = Math.max(1, this.parts_.length);\r\n        for (var i = 0; i < this.parts_.length; i++) {\r\n            this.byteLength_ += util.stringLength(this.parts_[i]);\r\n        }\r\n        this.checkValid_();\r\n    }\r\n    Object.defineProperty(ValidationPath, \"MAX_PATH_DEPTH\", {\r\n        /** @const {number} Maximum key depth. */\r\n        get: function () {\r\n            return 32;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ValidationPath, \"MAX_PATH_LENGTH_BYTES\", {\r\n        /** @const {number} Maximum number of (UTF8) bytes in a Firebase path. */\r\n        get: function () {\r\n            return 768;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /** @param {string} child */\r\n    ValidationPath.prototype.push = function (child) {\r\n        // Count the needed '/'\r\n        if (this.parts_.length > 0) {\r\n            this.byteLength_ += 1;\r\n        }\r\n        this.parts_.push(child);\r\n        this.byteLength_ += util.stringLength(child);\r\n        this.checkValid_();\r\n    };\r\n    ValidationPath.prototype.pop = function () {\r\n        var last = this.parts_.pop();\r\n        this.byteLength_ -= util.stringLength(last);\r\n        // Un-count the previous '/'\r\n        if (this.parts_.length > 0) {\r\n            this.byteLength_ -= 1;\r\n        }\r\n    };\r\n    ValidationPath.prototype.checkValid_ = function () {\r\n        if (this.byteLength_ > ValidationPath.MAX_PATH_LENGTH_BYTES) {\r\n            throw new Error(this.errorPrefix_ +\r\n                'has a key path longer than ' +\r\n                ValidationPath.MAX_PATH_LENGTH_BYTES +\r\n                ' bytes (' +\r\n                this.byteLength_ +\r\n                ').');\r\n        }\r\n        if (this.parts_.length > ValidationPath.MAX_PATH_DEPTH) {\r\n            throw new Error(this.errorPrefix_ +\r\n                'path specified exceeds the maximum depth that can be written (' +\r\n                ValidationPath.MAX_PATH_DEPTH +\r\n                ') or object contains a cycle ' +\r\n                this.toErrorString());\r\n        }\r\n    };\r\n    /**\r\n     * String for use in error messages - uses '.' notation for path.\r\n     *\r\n     * @return {string}\r\n     */\r\n    ValidationPath.prototype.toErrorString = function () {\r\n        if (this.parts_.length == 0) {\r\n            return '';\r\n        }\r\n        return \"in property '\" + this.parts_.join('.') + \"'\";\r\n    };\r\n    return ValidationPath;\r\n}());\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nvar PROTOCOL_VERSION = '5';\r\nvar VERSION_PARAM = 'v';\r\nvar TRANSPORT_SESSION_PARAM = 's';\r\nvar REFERER_PARAM = 'r';\r\nvar FORGE_REF = 'f';\r\nvar FORGE_DOMAIN = 'firebaseio.com';\r\nvar LAST_SESSION_PARAM = 'ls';\r\nvar WEBSOCKET = 'websocket';\r\nvar LONG_POLLING = 'long_polling';\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * A class that holds metadata about a Repo object\r\n *\r\n * @constructor\r\n */\r\nvar RepoInfo = /** @class */ (function () {\r\n    /**\r\n     * @param {string} host Hostname portion of the url for the repo\r\n     * @param {boolean} secure Whether or not this repo is accessed over ssl\r\n     * @param {string} namespace The namespace represented by the repo\r\n     * @param {boolean} webSocketOnly Whether to prefer websockets over all other transports (used by Nest).\r\n     * @param {string=} persistenceKey Override the default session persistence storage key\r\n     */\r\n    function RepoInfo(host, secure, namespace, webSocketOnly, persistenceKey) {\r\n        if (persistenceKey === void 0) { persistenceKey = ''; }\r\n        this.secure = secure;\r\n        this.namespace = namespace;\r\n        this.webSocketOnly = webSocketOnly;\r\n        this.persistenceKey = persistenceKey;\r\n        this.host = host.toLowerCase();\r\n        this.domain = this.host.substr(this.host.indexOf('.') + 1);\r\n        this.internalHost = PersistentStorage.get('host:' + host) || this.host;\r\n    }\r\n    RepoInfo.prototype.needsQueryParam = function () {\r\n        return this.host !== this.internalHost || this.isCustomHost();\r\n    };\r\n    RepoInfo.prototype.isCacheableHost = function () {\r\n        return this.internalHost.substr(0, 2) === 's-';\r\n    };\r\n    RepoInfo.prototype.isDemoHost = function () {\r\n        return this.domain === 'firebaseio-demo.com';\r\n    };\r\n    RepoInfo.prototype.isCustomHost = function () {\r\n        return (this.domain !== 'firebaseio.com' && this.domain !== 'firebaseio-demo.com');\r\n    };\r\n    RepoInfo.prototype.updateHost = function (newHost) {\r\n        if (newHost !== this.internalHost) {\r\n            this.internalHost = newHost;\r\n            if (this.isCacheableHost()) {\r\n                PersistentStorage.set('host:' + this.host, this.internalHost);\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * Returns the websocket URL for this repo\r\n     * @param {string} type of connection\r\n     * @param {Object} params list\r\n     * @return {string} The URL for this repo\r\n     */\r\n    RepoInfo.prototype.connectionURL = function (type, params) {\r\n        util.assert(typeof type === 'string', 'typeof type must == string');\r\n        util.assert(typeof params === 'object', 'typeof params must == object');\r\n        var connURL;\r\n        if (type === WEBSOCKET) {\r\n            connURL =\r\n                (this.secure ? 'wss://' : 'ws://') + this.internalHost + '/.ws?';\r\n        }\r\n        else if (type === LONG_POLLING) {\r\n            connURL =\r\n                (this.secure ? 'https://' : 'http://') + this.internalHost + '/.lp?';\r\n        }\r\n        else {\r\n            throw new Error('Unknown connection type: ' + type);\r\n        }\r\n        if (this.needsQueryParam()) {\r\n            params['ns'] = this.namespace;\r\n        }\r\n        var pairs = [];\r\n        util.forEach(params, function (key, value) {\r\n            pairs.push(key + '=' + value);\r\n        });\r\n        return connURL + pairs.join('&');\r\n    };\r\n    /** @return {string} */\r\n    RepoInfo.prototype.toString = function () {\r\n        var str = this.toURLString();\r\n        if (this.persistenceKey) {\r\n            str += '<' + this.persistenceKey + '>';\r\n        }\r\n        return str;\r\n    };\r\n    /** @return {string} */\r\n    RepoInfo.prototype.toURLString = function () {\r\n        return (this.secure ? 'https://' : 'http://') + this.host;\r\n    };\r\n    return RepoInfo;\r\n}());\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * @param {!string} pathString\r\n * @return {string}\r\n */\r\nfunction decodePath(pathString) {\r\n    var pathStringDecoded = '';\r\n    var pieces = pathString.split('/');\r\n    for (var i = 0; i < pieces.length; i++) {\r\n        if (pieces[i].length > 0) {\r\n            var piece = pieces[i];\r\n            try {\r\n                piece = decodeURIComponent(piece.replace(/\\+/g, ' '));\r\n            }\r\n            catch (e) { }\r\n            pathStringDecoded += '/' + piece;\r\n        }\r\n    }\r\n    return pathStringDecoded;\r\n}\r\n/**\r\n * @param {!string} queryString\r\n * @return {!{[key:string]:string}} key value hash\r\n */\r\nfunction decodeQuery(queryString) {\r\n    var results = {};\r\n    if (queryString.startsWith('?')) {\r\n        queryString = queryString.substring(1);\r\n    }\r\n    for (var _i = 0, _a = queryString.split('&'); _i < _a.length; _i++) {\r\n        var segment = _a[_i];\r\n        if (segment.length === 0) {\r\n            continue;\r\n        }\r\n        var kv = segment.split('=');\r\n        if (kv.length === 2) {\r\n            results[decodeURIComponent(kv[0])] = decodeURIComponent(kv[1]);\r\n        }\r\n        else {\r\n            warn(\"Invalid query segment '\" + segment + \"' in query '\" + queryString + \"'\");\r\n        }\r\n    }\r\n    return results;\r\n}\r\n/**\r\n *\r\n * @param {!string} dataURL\r\n * @return {{repoInfo: !RepoInfo, path: !Path}}\r\n */\r\nvar parseRepoInfo = function (dataURL) {\r\n    var parsedUrl = parseURL(dataURL), namespace = parsedUrl.subdomain;\r\n    if (parsedUrl.domain === 'firebase') {\r\n        fatal(parsedUrl.host +\r\n            ' is no longer supported. ' +\r\n            'Please use <YOUR FIREBASE>.firebaseio.com instead');\r\n    }\r\n    // Catch common error of uninitialized namespace value.\r\n    if ((!namespace || namespace == 'undefined') &&\r\n        parsedUrl.domain !== 'localhost') {\r\n        fatal('Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com');\r\n    }\r\n    if (!parsedUrl.secure) {\r\n        warnIfPageIsSecure();\r\n    }\r\n    var webSocketOnly = parsedUrl.scheme === 'ws' || parsedUrl.scheme === 'wss';\r\n    return {\r\n        repoInfo: new RepoInfo(parsedUrl.host, parsedUrl.secure, namespace, webSocketOnly),\r\n        path: new Path(parsedUrl.pathString)\r\n    };\r\n};\r\n/**\r\n *\r\n * @param {!string} dataURL\r\n * @return {{host: string, port: number, domain: string, subdomain: string, secure: boolean, scheme: string, pathString: string}}\r\n */\r\nvar parseURL = function (dataURL) {\r\n    // Default to empty strings in the event of a malformed string.\r\n    var host = '', domain = '', subdomain = '', pathString = '';\r\n    // Always default to SSL, unless otherwise specified.\r\n    var secure = true, scheme = 'https', port = 443;\r\n    // Don't do any validation here. The caller is responsible for validating the result of parsing.\r\n    if (typeof dataURL === 'string') {\r\n        // Parse scheme.\r\n        var colonInd = dataURL.indexOf('//');\r\n        if (colonInd >= 0) {\r\n            scheme = dataURL.substring(0, colonInd - 1);\r\n            dataURL = dataURL.substring(colonInd + 2);\r\n        }\r\n        // Parse host, path, and query string.\r\n        var slashInd = dataURL.indexOf('/');\r\n        if (slashInd === -1) {\r\n            slashInd = dataURL.length;\r\n        }\r\n        var questionMarkInd = dataURL.indexOf('?');\r\n        if (questionMarkInd === -1) {\r\n            questionMarkInd = dataURL.length;\r\n        }\r\n        host = dataURL.substring(0, Math.min(slashInd, questionMarkInd));\r\n        if (slashInd < questionMarkInd) {\r\n            // For pathString, questionMarkInd will always come after slashInd\r\n            pathString = decodePath(dataURL.substring(slashInd, questionMarkInd));\r\n        }\r\n        var queryParams = decodeQuery(dataURL.substring(Math.min(dataURL.length, questionMarkInd)));\r\n        // If we have a port, use scheme for determining if it's secure.\r\n        colonInd = host.indexOf(':');\r\n        if (colonInd >= 0) {\r\n            secure = scheme === 'https' || scheme === 'wss';\r\n            port = parseInt(host.substring(colonInd + 1), 10);\r\n        }\r\n        else {\r\n            colonInd = dataURL.length;\r\n        }\r\n        var parts = host.split('.');\r\n        if (parts.length === 3) {\r\n            // Normalize namespaces to lowercase to share storage / connection.\r\n            domain = parts[1];\r\n            subdomain = parts[0].toLowerCase();\r\n        }\r\n        else if (parts.length === 2) {\r\n            domain = parts[0];\r\n        }\r\n        else if (parts[0].slice(0, colonInd).toLowerCase() === 'localhost') {\r\n            domain = 'localhost';\r\n        }\r\n        // Support `ns` query param if subdomain not already set\r\n        if (subdomain === '' && 'ns' in queryParams) {\r\n            subdomain = queryParams['ns'];\r\n        }\r\n    }\r\n    return {\r\n        host: host,\r\n        port: port,\r\n        domain: domain,\r\n        subdomain: subdomain,\r\n        secure: secure,\r\n        scheme: scheme,\r\n        pathString: pathString\r\n    };\r\n};\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * True for invalid Firebase keys\r\n * @type {RegExp}\r\n * @private\r\n */\r\nvar INVALID_KEY_REGEX_ = /[\\[\\].#$\\/\\u0000-\\u001F\\u007F]/;\r\n/**\r\n * True for invalid Firebase paths.\r\n * Allows '/' in paths.\r\n * @type {RegExp}\r\n * @private\r\n */\r\nvar INVALID_PATH_REGEX_ = /[\\[\\].#$\\u0000-\\u001F\\u007F]/;\r\n/**\r\n * Maximum number of characters to allow in leaf value\r\n * @type {number}\r\n * @private\r\n */\r\nvar MAX_LEAF_SIZE_ = 10 * 1024 * 1024;\r\n/**\r\n * @param {*} key\r\n * @return {boolean}\r\n */\r\nvar isValidKey = function (key) {\r\n    return (typeof key === 'string' && key.length !== 0 && !INVALID_KEY_REGEX_.test(key));\r\n};\r\n/**\r\n * @param {string} pathString\r\n * @return {boolean}\r\n */\r\nvar isValidPathString = function (pathString) {\r\n    return (typeof pathString === 'string' &&\r\n        pathString.length !== 0 &&\r\n        !INVALID_PATH_REGEX_.test(pathString));\r\n};\r\n/**\r\n * @param {string} pathString\r\n * @return {boolean}\r\n */\r\nvar isValidRootPathString = function (pathString) {\r\n    if (pathString) {\r\n        // Allow '/.info/' at the beginning.\r\n        pathString = pathString.replace(/^\\/*\\.info(\\/|$)/, '/');\r\n    }\r\n    return isValidPathString(pathString);\r\n};\r\n/**\r\n * @param {*} priority\r\n * @return {boolean}\r\n */\r\nvar isValidPriority = function (priority) {\r\n    return (priority === null ||\r\n        typeof priority === 'string' ||\r\n        (typeof priority === 'number' && !isInvalidJSONNumber(priority)) ||\r\n        (priority && typeof priority === 'object' && util.contains(priority, '.sv')));\r\n};\r\n/**\r\n * Pre-validate a datum passed as an argument to Firebase function.\r\n *\r\n * @param {string} fnName\r\n * @param {number} argumentNumber\r\n * @param {*} data\r\n * @param {!Path} path\r\n * @param {boolean} optional\r\n */\r\nvar validateFirebaseDataArg = function (fnName, argumentNumber, data, path, optional) {\r\n    if (optional && data === undefined)\r\n        return;\r\n    validateFirebaseData(util.errorPrefix(fnName, argumentNumber, optional), data, path);\r\n};\r\n/**\r\n * Validate a data object client-side before sending to server.\r\n *\r\n * @param {string} errorPrefix\r\n * @param {*} data\r\n * @param {!Path|!ValidationPath} path_\r\n */\r\nvar validateFirebaseData = function (errorPrefix, data, path_) {\r\n    var path = path_ instanceof Path ? new ValidationPath(path_, errorPrefix) : path_;\r\n    if (data === undefined) {\r\n        throw new Error(errorPrefix + 'contains undefined ' + path.toErrorString());\r\n    }\r\n    if (typeof data === 'function') {\r\n        throw new Error(errorPrefix +\r\n            'contains a function ' +\r\n            path.toErrorString() +\r\n            ' with contents = ' +\r\n            data.toString());\r\n    }\r\n    if (isInvalidJSONNumber(data)) {\r\n        throw new Error(errorPrefix + 'contains ' + data.toString() + ' ' + path.toErrorString());\r\n    }\r\n    // Check max leaf size, but try to avoid the utf8 conversion if we can.\r\n    if (typeof data === 'string' &&\r\n        data.length > MAX_LEAF_SIZE_ / 3 &&\r\n        util.stringLength(data) > MAX_LEAF_SIZE_) {\r\n        throw new Error(errorPrefix +\r\n            'contains a string greater than ' +\r\n            MAX_LEAF_SIZE_ +\r\n            ' utf8 bytes ' +\r\n            path.toErrorString() +\r\n            \" ('\" +\r\n            data.substring(0, 50) +\r\n            \"...')\");\r\n    }\r\n    // TODO = Perf = Consider combining the recursive validation of keys into NodeFromJSON\r\n    // to save extra walking of large objects.\r\n    if (data && typeof data === 'object') {\r\n        var hasDotValue_1 = false, hasActualChild_1 = false;\r\n        util.forEach(data, function (key, value) {\r\n            if (key === '.value') {\r\n                hasDotValue_1 = true;\r\n            }\r\n            else if (key !== '.priority' && key !== '.sv') {\r\n                hasActualChild_1 = true;\r\n                if (!isValidKey(key)) {\r\n                    throw new Error(errorPrefix +\r\n                        ' contains an invalid key (' +\r\n                        key +\r\n                        ') ' +\r\n                        path.toErrorString() +\r\n                        '.  Keys must be non-empty strings ' +\r\n                        'and can\\'t contain \".\", \"#\", \"$\", \"/\", \"[\", or \"]\"');\r\n                }\r\n            }\r\n            path.push(key);\r\n            validateFirebaseData(errorPrefix, value, path);\r\n            path.pop();\r\n        });\r\n        if (hasDotValue_1 && hasActualChild_1) {\r\n            throw new Error(errorPrefix +\r\n                ' contains \".value\" child ' +\r\n                path.toErrorString() +\r\n                ' in addition to actual children.');\r\n        }\r\n    }\r\n};\r\n/**\r\n * Pre-validate paths passed in the firebase function.\r\n *\r\n * @param {string} errorPrefix\r\n * @param {Array<!Path>} mergePaths\r\n */\r\nvar validateFirebaseMergePaths = function (errorPrefix, mergePaths) {\r\n    var i, curPath;\r\n    for (i = 0; i < mergePaths.length; i++) {\r\n        curPath = mergePaths[i];\r\n        var keys = curPath.slice();\r\n        for (var j = 0; j < keys.length; j++) {\r\n            if (keys[j] === '.priority' && j === keys.length - 1) {\r\n                // .priority is OK\r\n            }\r\n            else if (!isValidKey(keys[j])) {\r\n                throw new Error(errorPrefix +\r\n                    'contains an invalid key (' +\r\n                    keys[j] +\r\n                    ') in path ' +\r\n                    curPath.toString() +\r\n                    '. Keys must be non-empty strings ' +\r\n                    'and can\\'t contain \".\", \"#\", \"$\", \"/\", \"[\", or \"]\"');\r\n            }\r\n        }\r\n    }\r\n    // Check that update keys are not descendants of each other.\r\n    // We rely on the property that sorting guarantees that ancestors come\r\n    // right before descendants.\r\n    mergePaths.sort(Path.comparePaths);\r\n    var prevPath = null;\r\n    for (i = 0; i < mergePaths.length; i++) {\r\n        curPath = mergePaths[i];\r\n        if (prevPath !== null && prevPath.contains(curPath)) {\r\n            throw new Error(errorPrefix +\r\n                'contains a path ' +\r\n                prevPath.toString() +\r\n                ' that is ancestor of another path ' +\r\n                curPath.toString());\r\n        }\r\n        prevPath = curPath;\r\n    }\r\n};\r\n/**\r\n * pre-validate an object passed as an argument to firebase function (\r\n * must be an object - e.g. for firebase.update()).\r\n *\r\n * @param {string} fnName\r\n * @param {number} argumentNumber\r\n * @param {*} data\r\n * @param {!Path} path\r\n * @param {boolean} optional\r\n */\r\nvar validateFirebaseMergeDataArg = function (fnName, argumentNumber, data, path, optional) {\r\n    if (optional && data === undefined)\r\n        return;\r\n    var errorPrefix = util.errorPrefix(fnName, argumentNumber, optional);\r\n    if (!(data && typeof data === 'object') || Array.isArray(data)) {\r\n        throw new Error(errorPrefix + ' must be an object containing the children to replace.');\r\n    }\r\n    var mergePaths = [];\r\n    util.forEach(data, function (key, value) {\r\n        var curPath = new Path(key);\r\n        validateFirebaseData(errorPrefix, value, path.child(curPath));\r\n        if (curPath.getBack() === '.priority') {\r\n            if (!isValidPriority(value)) {\r\n                throw new Error(errorPrefix +\r\n                    \"contains an invalid value for '\" +\r\n                    curPath.toString() +\r\n                    \"', which must be a valid \" +\r\n                    'Firebase priority (a string, finite number, server value, or null).');\r\n            }\r\n        }\r\n        mergePaths.push(curPath);\r\n    });\r\n    validateFirebaseMergePaths(errorPrefix, mergePaths);\r\n};\r\nvar validatePriority = function (fnName, argumentNumber, priority, optional) {\r\n    if (optional && priority === undefined)\r\n        return;\r\n    if (isInvalidJSONNumber(priority))\r\n        throw new Error(util.errorPrefix(fnName, argumentNumber, optional) +\r\n            'is ' +\r\n            priority.toString() +\r\n            ', but must be a valid Firebase priority (a string, finite number, ' +\r\n            'server value, or null).');\r\n    // Special case to allow importing data with a .sv.\r\n    if (!isValidPriority(priority))\r\n        throw new Error(util.errorPrefix(fnName, argumentNumber, optional) +\r\n            'must be a valid Firebase priority ' +\r\n            '(a string, finite number, server value, or null).');\r\n};\r\nvar validateEventType = function (fnName, argumentNumber, eventType, optional) {\r\n    if (optional && eventType === undefined)\r\n        return;\r\n    switch (eventType) {\r\n        case 'value':\r\n        case 'child_added':\r\n        case 'child_removed':\r\n        case 'child_changed':\r\n        case 'child_moved':\r\n            break;\r\n        default:\r\n            throw new Error(util.errorPrefix(fnName, argumentNumber, optional) +\r\n                'must be a valid event type = \"value\", \"child_added\", \"child_removed\", ' +\r\n                '\"child_changed\", or \"child_moved\".');\r\n    }\r\n};\r\nvar validateKey = function (fnName, argumentNumber, key, optional) {\r\n    if (optional && key === undefined)\r\n        return;\r\n    if (!isValidKey(key))\r\n        throw new Error(util.errorPrefix(fnName, argumentNumber, optional) +\r\n            'was an invalid key = \"' +\r\n            key +\r\n            '\".  Firebase keys must be non-empty strings and ' +\r\n            'can\\'t contain \".\", \"#\", \"$\", \"/\", \"[\", or \"]\").');\r\n};\r\nvar validatePathString = function (fnName, argumentNumber, pathString, optional) {\r\n    if (optional && pathString === undefined)\r\n        return;\r\n    if (!isValidPathString(pathString))\r\n        throw new Error(util.errorPrefix(fnName, argumentNumber, optional) +\r\n            'was an invalid path = \"' +\r\n            pathString +\r\n            '\". Paths must be non-empty strings and ' +\r\n            'can\\'t contain \".\", \"#\", \"$\", \"[\", or \"]\"');\r\n};\r\nvar validateRootPathString = function (fnName, argumentNumber, pathString, optional) {\r\n    if (pathString) {\r\n        // Allow '/.info/' at the beginning.\r\n        pathString = pathString.replace(/^\\/*\\.info(\\/|$)/, '/');\r\n    }\r\n    validatePathString(fnName, argumentNumber, pathString, optional);\r\n};\r\nvar validateWritablePath = function (fnName, path) {\r\n    if (path.getFront() === '.info') {\r\n        throw new Error(fnName + \" failed = Can't modify data under /.info/\");\r\n    }\r\n};\r\nvar validateUrl = function (fnName, argumentNumber, parsedUrl) {\r\n    // TODO = Validate server better.\r\n    var pathString = parsedUrl.path.toString();\r\n    if (!(typeof parsedUrl.repoInfo.host === 'string') ||\r\n        parsedUrl.repoInfo.host.length === 0 ||\r\n        (!isValidKey(parsedUrl.repoInfo.namespace) &&\r\n            parsedUrl.repoInfo.host.split(':')[0] !== 'localhost') ||\r\n        (pathString.length !== 0 && !isValidRootPathString(pathString))) {\r\n        throw new Error(util.errorPrefix(fnName, argumentNumber, false) +\r\n            'must be a valid firebase URL and ' +\r\n            'the path can\\'t contain \".\", \"#\", \"$\", \"[\", or \"]\".');\r\n    }\r\n};\r\nvar validateBoolean = function (fnName, argumentNumber, bool, optional) {\r\n    if (optional && bool === undefined)\r\n        return;\r\n    if (typeof bool !== 'boolean')\r\n        throw new Error(util.errorPrefix(fnName, argumentNumber, optional) + 'must be a boolean.');\r\n};\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * @constructor\r\n */\r\nvar OnDisconnect = /** @class */ (function () {\r\n    /**\r\n     * @param {!Repo} repo_\r\n     * @param {!Path} path_\r\n     */\r\n    function OnDisconnect(repo_, path_) {\r\n        this.repo_ = repo_;\r\n        this.path_ = path_;\r\n    }\r\n    /**\r\n     * @param {function(?Error)=} onComplete\r\n     * @return {!firebase.Promise}\r\n     */\r\n    OnDisconnect.prototype.cancel = function (onComplete) {\r\n        util.validateArgCount('OnDisconnect.cancel', 0, 1, arguments.length);\r\n        util.validateCallback('OnDisconnect.cancel', 1, onComplete, true);\r\n        var deferred = new util.Deferred();\r\n        this.repo_.onDisconnectCancel(this.path_, deferred.wrapCallback(onComplete));\r\n        return deferred.promise;\r\n    };\r\n    /**\r\n     * @param {function(?Error)=} onComplete\r\n     * @return {!firebase.Promise}\r\n     */\r\n    OnDisconnect.prototype.remove = function (onComplete) {\r\n        util.validateArgCount('OnDisconnect.remove', 0, 1, arguments.length);\r\n        validateWritablePath('OnDisconnect.remove', this.path_);\r\n        util.validateCallback('OnDisconnect.remove', 1, onComplete, true);\r\n        var deferred = new util.Deferred();\r\n        this.repo_.onDisconnectSet(this.path_, null, deferred.wrapCallback(onComplete));\r\n        return deferred.promise;\r\n    };\r\n    /**\r\n     * @param {*} value\r\n     * @param {function(?Error)=} onComplete\r\n     * @return {!firebase.Promise}\r\n     */\r\n    OnDisconnect.prototype.set = function (value, onComplete) {\r\n        util.validateArgCount('OnDisconnect.set', 1, 2, arguments.length);\r\n        validateWritablePath('OnDisconnect.set', this.path_);\r\n        validateFirebaseDataArg('OnDisconnect.set', 1, value, this.path_, false);\r\n        util.validateCallback('OnDisconnect.set', 2, onComplete, true);\r\n        var deferred = new util.Deferred();\r\n        this.repo_.onDisconnectSet(this.path_, value, deferred.wrapCallback(onComplete));\r\n        return deferred.promise;\r\n    };\r\n    /**\r\n     * @param {*} value\r\n     * @param {number|string|null} priority\r\n     * @param {function(?Error)=} onComplete\r\n     * @return {!firebase.Promise}\r\n     */\r\n    OnDisconnect.prototype.setWithPriority = function (value, priority, onComplete) {\r\n        util.validateArgCount('OnDisconnect.setWithPriority', 2, 3, arguments.length);\r\n        validateWritablePath('OnDisconnect.setWithPriority', this.path_);\r\n        validateFirebaseDataArg('OnDisconnect.setWithPriority', 1, value, this.path_, false);\r\n        validatePriority('OnDisconnect.setWithPriority', 2, priority, false);\r\n        util.validateCallback('OnDisconnect.setWithPriority', 3, onComplete, true);\r\n        var deferred = new util.Deferred();\r\n        this.repo_.onDisconnectSetWithPriority(this.path_, value, priority, deferred.wrapCallback(onComplete));\r\n        return deferred.promise;\r\n    };\r\n    /**\r\n     * @param {!Object} objectToMerge\r\n     * @param {function(?Error)=} onComplete\r\n     * @return {!firebase.Promise}\r\n     */\r\n    OnDisconnect.prototype.update = function (objectToMerge, onComplete) {\r\n        util.validateArgCount('OnDisconnect.update', 1, 2, arguments.length);\r\n        validateWritablePath('OnDisconnect.update', this.path_);\r\n        if (Array.isArray(objectToMerge)) {\r\n            var newObjectToMerge = {};\r\n            for (var i = 0; i < objectToMerge.length; ++i) {\r\n                newObjectToMerge['' + i] = objectToMerge[i];\r\n            }\r\n            objectToMerge = newObjectToMerge;\r\n            warn('Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the ' +\r\n                'existing data, or an Object with integer keys if you really do want to only update some of the children.');\r\n        }\r\n        validateFirebaseMergeDataArg('OnDisconnect.update', 1, objectToMerge, this.path_, false);\r\n        util.validateCallback('OnDisconnect.update', 2, onComplete, true);\r\n        var deferred = new util.Deferred();\r\n        this.repo_.onDisconnectUpdate(this.path_, objectToMerge, deferred.wrapCallback(onComplete));\r\n        return deferred.promise;\r\n    };\r\n    return OnDisconnect;\r\n}());\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nvar TransactionResult = /** @class */ (function () {\r\n    /**\r\n     * A type for the resolve value of Firebase.transaction.\r\n     * @constructor\r\n     * @dict\r\n     * @param {boolean} committed\r\n     * @param {DataSnapshot} snapshot\r\n     */\r\n    function TransactionResult(committed, snapshot) {\r\n        this.committed = committed;\r\n        this.snapshot = snapshot;\r\n    }\r\n    // Do not create public documentation. This is intended to make JSON serialization work but is otherwise unnecessary\r\n    // for end-users\r\n    TransactionResult.prototype.toJSON = function () {\r\n        util.validateArgCount('TransactionResult.toJSON', 0, 1, arguments.length);\r\n        return { committed: this.committed, snapshot: this.snapshot.toJSON() };\r\n    };\r\n    return TransactionResult;\r\n}());\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Fancy ID generator that creates 20-character string identifiers with the\r\n * following properties:\r\n *\r\n * 1. They're based on timestamp so that they sort *after* any existing ids.\r\n * 2. They contain 72-bits of random data after the timestamp so that IDs won't\r\n *    collide with other clients' IDs.\r\n * 3. They sort *lexicographically* (so the timestamp is converted to characters\r\n *    that will sort properly).\r\n * 4. They're monotonically increasing. Even if you generate more than one in\r\n *    the same timestamp, the latter ones will sort after the former ones. We do\r\n *    this by using the previous random bits but \"incrementing\" them by 1 (only\r\n *    in the case of a timestamp collision).\r\n */\r\nvar nextPushId = (function () {\r\n    // Modeled after base64 web-safe chars, but ordered by ASCII.\r\n    var PUSH_CHARS = '-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz';\r\n    // Timestamp of last push, used to prevent local collisions if you push twice\r\n    // in one ms.\r\n    var lastPushTime = 0;\r\n    // We generate 72-bits of randomness which get turned into 12 characters and\r\n    // appended to the timestamp to prevent collisions with other clients. We\r\n    // store the last characters we generated because in the event of a collision,\r\n    // we'll use those same characters except \"incremented\" by one.\r\n    var lastRandChars = [];\r\n    return function (now) {\r\n        var duplicateTime = now === lastPushTime;\r\n        lastPushTime = now;\r\n        var i;\r\n        var timeStampChars = new Array(8);\r\n        for (i = 7; i >= 0; i--) {\r\n            timeStampChars[i] = PUSH_CHARS.charAt(now % 64);\r\n            // NOTE: Can't use << here because javascript will convert to int and lose\r\n            // the upper bits.\r\n            now = Math.floor(now / 64);\r\n        }\r\n        util.assert(now === 0, 'Cannot push at time == 0');\r\n        var id = timeStampChars.join('');\r\n        if (!duplicateTime) {\r\n            for (i = 0; i < 12; i++) {\r\n                lastRandChars[i] = Math.floor(Math.random() * 64);\r\n            }\r\n        }\r\n        else {\r\n            // If the timestamp hasn't changed since last push, use the same random\r\n            // number, except incremented by 1.\r\n            for (i = 11; i >= 0 && lastRandChars[i] === 63; i--) {\r\n                lastRandChars[i] = 0;\r\n            }\r\n            lastRandChars[i]++;\r\n        }\r\n        for (i = 0; i < 12; i++) {\r\n            id += PUSH_CHARS.charAt(lastRandChars[i]);\r\n        }\r\n        util.assert(id.length === 20, 'nextPushId: Length should be 20.');\r\n        return id;\r\n    };\r\n})();\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n *\r\n * @param {!string} name\r\n * @param {!Node} node\r\n * @constructor\r\n * @struct\r\n */\r\nvar NamedNode = /** @class */ (function () {\r\n    function NamedNode(name, node) {\r\n        this.name = name;\r\n        this.node = node;\r\n    }\r\n    /**\r\n     *\r\n     * @param {!string} name\r\n     * @param {!Node} node\r\n     * @return {NamedNode}\r\n     */\r\n    NamedNode.Wrap = function (name, node) {\r\n        return new NamedNode(name, node);\r\n    };\r\n    return NamedNode;\r\n}());\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n *\r\n * @constructor\r\n */\r\nvar Index = /** @class */ (function () {\r\n    function Index() {\r\n    }\r\n    /**\r\n     * @return {function(!NamedNode, !NamedNode):number} A standalone comparison function for\r\n     * this index\r\n     */\r\n    Index.prototype.getCompare = function () {\r\n        return this.compare.bind(this);\r\n    };\r\n    /**\r\n     * Given a before and after value for a node, determine if the indexed value has changed. Even if they are different,\r\n     * it's possible that the changes are isolated to parts of the snapshot that are not indexed.\r\n     *\r\n     * @param {!Node} oldNode\r\n     * @param {!Node} newNode\r\n     * @return {boolean} True if the portion of the snapshot being indexed changed between oldNode and newNode\r\n     */\r\n    Index.prototype.indexedValueChanged = function (oldNode, newNode) {\r\n        var oldWrapped = new NamedNode(MIN_NAME, oldNode);\r\n        var newWrapped = new NamedNode(MIN_NAME, newNode);\r\n        return this.compare(oldWrapped, newWrapped) !== 0;\r\n    };\r\n    /**\r\n     * @return {!NamedNode} a node wrapper that will sort equal to or less than\r\n     * any other node wrapper, using this index\r\n     */\r\n    Index.prototype.minPost = function () {\r\n        return NamedNode.MIN;\r\n    };\r\n    return Index;\r\n}());\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nvar __EMPTY_NODE;\r\nvar KeyIndex = /** @class */ (function (_super) {\r\n    tslib_1.__extends(KeyIndex, _super);\r\n    function KeyIndex() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    Object.defineProperty(KeyIndex, \"__EMPTY_NODE\", {\r\n        get: function () {\r\n            return __EMPTY_NODE;\r\n        },\r\n        set: function (val) {\r\n            __EMPTY_NODE = val;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    KeyIndex.prototype.compare = function (a, b) {\r\n        return nameCompare(a.name, b.name);\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    KeyIndex.prototype.isDefinedOn = function (node) {\r\n        // We could probably return true here (since every node has a key), but it's never called\r\n        // so just leaving unimplemented for now.\r\n        throw util.assertionError('KeyIndex.isDefinedOn not expected to be called.');\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    KeyIndex.prototype.indexedValueChanged = function (oldNode, newNode) {\r\n        return false; // The key for a node never changes.\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    KeyIndex.prototype.minPost = function () {\r\n        return NamedNode.MIN;\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    KeyIndex.prototype.maxPost = function () {\r\n        // TODO: This should really be created once and cached in a static property, but\r\n        // NamedNode isn't defined yet, so I can't use it in a static.  Bleh.\r\n        return new NamedNode(MAX_NAME, __EMPTY_NODE);\r\n    };\r\n    /**\r\n     * @param {*} indexValue\r\n     * @param {string} name\r\n     * @return {!NamedNode}\r\n     */\r\n    KeyIndex.prototype.makePost = function (indexValue, name) {\r\n        util.assert(typeof indexValue === 'string', 'KeyIndex indexValue must always be a string.');\r\n        // We just use empty node, but it'll never be compared, since our comparator only looks at name.\r\n        return new NamedNode(indexValue, __EMPTY_NODE);\r\n    };\r\n    /**\r\n     * @return {!string} String representation for inclusion in a query spec\r\n     */\r\n    KeyIndex.prototype.toString = function () {\r\n        return '.key';\r\n    };\r\n    return KeyIndex;\r\n}(Index));\r\nvar KEY_INDEX = new KeyIndex();\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nvar MAX_NODE;\r\nfunction setMaxNode(val) {\r\n    MAX_NODE = val;\r\n}\r\n/**\r\n * @param {(!string|!number)} priority\r\n * @return {!string}\r\n */\r\nvar priorityHashText = function (priority) {\r\n    if (typeof priority === 'number')\r\n        return 'number:' + doubleToIEEE754String(priority);\r\n    else\r\n        return 'string:' + priority;\r\n};\r\n/**\r\n * Validates that a priority snapshot Node is valid.\r\n *\r\n * @param {!Node} priorityNode\r\n */\r\nvar validatePriorityNode = function (priorityNode) {\r\n    if (priorityNode.isLeafNode()) {\r\n        var val = priorityNode.val();\r\n        util.assert(typeof val === 'string' ||\r\n            typeof val === 'number' ||\r\n            (typeof val === 'object' && util.contains(val, '.sv')), 'Priority must be a string or number.');\r\n    }\r\n    else {\r\n        util.assert(priorityNode === MAX_NODE || priorityNode.isEmpty(), 'priority of unexpected type.');\r\n    }\r\n    // Don't call getPriority() on MAX_NODE to avoid hitting assertion.\r\n    util.assert(priorityNode === MAX_NODE || priorityNode.getPriority().isEmpty(), \"Priority nodes can't have a priority of their own.\");\r\n};\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nvar __childrenNodeConstructor;\r\n/**\r\n * LeafNode is a class for storing leaf nodes in a DataSnapshot.  It\r\n * implements Node and stores the value of the node (a string,\r\n * number, or boolean) accessible via getValue().\r\n */\r\nvar LeafNode = /** @class */ (function () {\r\n    /**\r\n     * @implements {Node}\r\n     * @param {!(string|number|boolean|Object)} value_ The value to store in this leaf node.\r\n     *                                         The object type is possible in the event of a deferred value\r\n     * @param {!Node=} priorityNode_ The priority of this node.\r\n     */\r\n    function LeafNode(value_, priorityNode_) {\r\n        if (priorityNode_ === void 0) { priorityNode_ = LeafNode.__childrenNodeConstructor.EMPTY_NODE; }\r\n        this.value_ = value_;\r\n        this.priorityNode_ = priorityNode_;\r\n        this.lazyHash_ = null;\r\n        util.assert(this.value_ !== undefined && this.value_ !== null, \"LeafNode shouldn't be created with null/undefined value.\");\r\n        validatePriorityNode(this.priorityNode_);\r\n    }\r\n    Object.defineProperty(LeafNode, \"__childrenNodeConstructor\", {\r\n        get: function () {\r\n            return __childrenNodeConstructor;\r\n        },\r\n        set: function (val) {\r\n            __childrenNodeConstructor = val;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /** @inheritDoc */\r\n    LeafNode.prototype.isLeafNode = function () {\r\n        return true;\r\n    };\r\n    /** @inheritDoc */\r\n    LeafNode.prototype.getPriority = function () {\r\n        return this.priorityNode_;\r\n    };\r\n    /** @inheritDoc */\r\n    LeafNode.prototype.updatePriority = function (newPriorityNode) {\r\n        return new LeafNode(this.value_, newPriorityNode);\r\n    };\r\n    /** @inheritDoc */\r\n    LeafNode.prototype.getImmediateChild = function (childName) {\r\n        // Hack to treat priority as a regular child\r\n        if (childName === '.priority') {\r\n            return this.priorityNode_;\r\n        }\r\n        else {\r\n            return LeafNode.__childrenNodeConstructor.EMPTY_NODE;\r\n        }\r\n    };\r\n    /** @inheritDoc */\r\n    LeafNode.prototype.getChild = function (path) {\r\n        if (path.isEmpty()) {\r\n            return this;\r\n        }\r\n        else if (path.getFront() === '.priority') {\r\n            return this.priorityNode_;\r\n        }\r\n        else {\r\n            return LeafNode.__childrenNodeConstructor.EMPTY_NODE;\r\n        }\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    LeafNode.prototype.hasChild = function () {\r\n        return false;\r\n    };\r\n    /** @inheritDoc */\r\n    LeafNode.prototype.getPredecessorChildName = function (childName, childNode) {\r\n        return null;\r\n    };\r\n    /** @inheritDoc */\r\n    LeafNode.prototype.updateImmediateChild = function (childName, newChildNode) {\r\n        if (childName === '.priority') {\r\n            return this.updatePriority(newChildNode);\r\n        }\r\n        else if (newChildNode.isEmpty() && childName !== '.priority') {\r\n            return this;\r\n        }\r\n        else {\r\n            return LeafNode.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(childName, newChildNode).updatePriority(this.priorityNode_);\r\n        }\r\n    };\r\n    /** @inheritDoc */\r\n    LeafNode.prototype.updateChild = function (path, newChildNode) {\r\n        var front = path.getFront();\r\n        if (front === null) {\r\n            return newChildNode;\r\n        }\r\n        else if (newChildNode.isEmpty() && front !== '.priority') {\r\n            return this;\r\n        }\r\n        else {\r\n            util.assert(front !== '.priority' || path.getLength() === 1, '.priority must be the last token in a path');\r\n            return this.updateImmediateChild(front, LeafNode.__childrenNodeConstructor.EMPTY_NODE.updateChild(path.popFront(), newChildNode));\r\n        }\r\n    };\r\n    /** @inheritDoc */\r\n    LeafNode.prototype.isEmpty = function () {\r\n        return false;\r\n    };\r\n    /** @inheritDoc */\r\n    LeafNode.prototype.numChildren = function () {\r\n        return 0;\r\n    };\r\n    /** @inheritDoc */\r\n    LeafNode.prototype.forEachChild = function (index, action) {\r\n        return false;\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    LeafNode.prototype.val = function (exportFormat) {\r\n        if (exportFormat && !this.getPriority().isEmpty())\r\n            return {\r\n                '.value': this.getValue(),\r\n                '.priority': this.getPriority().val()\r\n            };\r\n        else\r\n            return this.getValue();\r\n    };\r\n    /** @inheritDoc */\r\n    LeafNode.prototype.hash = function () {\r\n        if (this.lazyHash_ === null) {\r\n            var toHash = '';\r\n            if (!this.priorityNode_.isEmpty())\r\n                toHash +=\r\n                    'priority:' +\r\n                        priorityHashText(this.priorityNode_.val()) +\r\n                        ':';\r\n            var type = typeof this.value_;\r\n            toHash += type + ':';\r\n            if (type === 'number') {\r\n                toHash += doubleToIEEE754String(this.value_);\r\n            }\r\n            else {\r\n                toHash += this.value_;\r\n            }\r\n            this.lazyHash_ = sha1(toHash);\r\n        }\r\n        return this.lazyHash_;\r\n    };\r\n    /**\r\n     * Returns the value of the leaf node.\r\n     * @return {Object|string|number|boolean} The value of the node.\r\n     */\r\n    LeafNode.prototype.getValue = function () {\r\n        return this.value_;\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    LeafNode.prototype.compareTo = function (other) {\r\n        if (other === LeafNode.__childrenNodeConstructor.EMPTY_NODE) {\r\n            return 1;\r\n        }\r\n        else if (other instanceof LeafNode.__childrenNodeConstructor) {\r\n            return -1;\r\n        }\r\n        else {\r\n            util.assert(other.isLeafNode(), 'Unknown node type');\r\n            return this.compareToLeafNode_(other);\r\n        }\r\n    };\r\n    /**\r\n     * Comparison specifically for two leaf nodes\r\n     * @param {!LeafNode} otherLeaf\r\n     * @return {!number}\r\n     * @private\r\n     */\r\n    LeafNode.prototype.compareToLeafNode_ = function (otherLeaf) {\r\n        var otherLeafType = typeof otherLeaf.value_;\r\n        var thisLeafType = typeof this.value_;\r\n        var otherIndex = LeafNode.VALUE_TYPE_ORDER.indexOf(otherLeafType);\r\n        var thisIndex = LeafNode.VALUE_TYPE_ORDER.indexOf(thisLeafType);\r\n        util.assert(otherIndex >= 0, 'Unknown leaf type: ' + otherLeafType);\r\n        util.assert(thisIndex >= 0, 'Unknown leaf type: ' + thisLeafType);\r\n        if (otherIndex === thisIndex) {\r\n            // Same type, compare values\r\n            if (thisLeafType === 'object') {\r\n                // Deferred value nodes are all equal, but we should also never get to this point...\r\n                return 0;\r\n            }\r\n            else {\r\n                // Note that this works because true > false, all others are number or string comparisons\r\n                if (this.value_ < otherLeaf.value_) {\r\n                    return -1;\r\n                }\r\n                else if (this.value_ === otherLeaf.value_) {\r\n                    return 0;\r\n                }\r\n                else {\r\n                    return 1;\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            return thisIndex - otherIndex;\r\n        }\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    LeafNode.prototype.withIndex = function () {\r\n        return this;\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    LeafNode.prototype.isIndexed = function () {\r\n        return true;\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    LeafNode.prototype.equals = function (other) {\r\n        /**\r\n         * @inheritDoc\r\n         */\r\n        if (other === this) {\r\n            return true;\r\n        }\r\n        else if (other.isLeafNode()) {\r\n            var otherLeaf = other;\r\n            return (this.value_ === otherLeaf.value_ &&\r\n                this.priorityNode_.equals(otherLeaf.priorityNode_));\r\n        }\r\n        else {\r\n            return false;\r\n        }\r\n    };\r\n    /**\r\n     * The sort order for comparing leaf nodes of different types. If two leaf nodes have\r\n     * the same type, the comparison falls back to their value\r\n     * @type {Array.<!string>}\r\n     * @const\r\n     */\r\n    LeafNode.VALUE_TYPE_ORDER = ['object', 'boolean', 'number', 'string'];\r\n    return LeafNode;\r\n}());\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nvar nodeFromJSON;\r\nvar MAX_NODE$1;\r\nfunction setNodeFromJSON(val) {\r\n    nodeFromJSON = val;\r\n}\r\nfunction setMaxNode$1(val) {\r\n    MAX_NODE$1 = val;\r\n}\r\n/**\r\n * @constructor\r\n * @extends {Index}\r\n * @private\r\n */\r\nvar PriorityIndex = /** @class */ (function (_super) {\r\n    tslib_1.__extends(PriorityIndex, _super);\r\n    function PriorityIndex() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    PriorityIndex.prototype.compare = function (a, b) {\r\n        var aPriority = a.node.getPriority();\r\n        var bPriority = b.node.getPriority();\r\n        var indexCmp = aPriority.compareTo(bPriority);\r\n        if (indexCmp === 0) {\r\n            return nameCompare(a.name, b.name);\r\n        }\r\n        else {\r\n            return indexCmp;\r\n        }\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    PriorityIndex.prototype.isDefinedOn = function (node) {\r\n        return !node.getPriority().isEmpty();\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    PriorityIndex.prototype.indexedValueChanged = function (oldNode, newNode) {\r\n        return !oldNode.getPriority().equals(newNode.getPriority());\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    PriorityIndex.prototype.minPost = function () {\r\n        return NamedNode.MIN;\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    PriorityIndex.prototype.maxPost = function () {\r\n        return new NamedNode(MAX_NAME, new LeafNode('[PRIORITY-POST]', MAX_NODE$1));\r\n    };\r\n    /**\r\n     * @param {*} indexValue\r\n     * @param {string} name\r\n     * @return {!NamedNode}\r\n     */\r\n    PriorityIndex.prototype.makePost = function (indexValue, name) {\r\n        var priorityNode = nodeFromJSON(indexValue);\r\n        return new NamedNode(name, new LeafNode('[PRIORITY-POST]', priorityNode));\r\n    };\r\n    /**\r\n     * @return {!string} String representation for inclusion in a query spec\r\n     */\r\n    PriorityIndex.prototype.toString = function () {\r\n        return '.priority';\r\n    };\r\n    return PriorityIndex;\r\n}(Index));\r\nvar PRIORITY_INDEX = new PriorityIndex();\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * An iterator over an LLRBNode.\r\n */\r\nvar SortedMapIterator = /** @class */ (function () {\r\n    /**\r\n     * @template K, V, T\r\n     * @param {LLRBNode|LLRBEmptyNode} node Node to iterate.\r\n     * @param {?K} startKey\r\n     * @param {function(K, K): number} comparator\r\n     * @param {boolean} isReverse_ Whether or not to iterate in reverse\r\n     * @param {(function(K, V):T)=} resultGenerator_\r\n     */\r\n    function SortedMapIterator(node, startKey, comparator, isReverse_, resultGenerator_) {\r\n        if (resultGenerator_ === void 0) { resultGenerator_ = null; }\r\n        this.isReverse_ = isReverse_;\r\n        this.resultGenerator_ = resultGenerator_;\r\n        /** @private\r\n         * @type {Array.<!LLRBNode>}\r\n         */\r\n        this.nodeStack_ = [];\r\n        var cmp = 1;\r\n        while (!node.isEmpty()) {\r\n            node = node;\r\n            cmp = startKey ? comparator(node.key, startKey) : 1;\r\n            // flip the comparison if we're going in reverse\r\n            if (isReverse_)\r\n                cmp *= -1;\r\n            if (cmp < 0) {\r\n                // This node is less than our start key. ignore it\r\n                if (this.isReverse_) {\r\n                    node = node.left;\r\n                }\r\n                else {\r\n                    node = node.right;\r\n                }\r\n            }\r\n            else if (cmp === 0) {\r\n                // This node is exactly equal to our start key. Push it on the stack, but stop iterating;\r\n                this.nodeStack_.push(node);\r\n                break;\r\n            }\r\n            else {\r\n                // This node is greater than our start key, add it to the stack and move to the next one\r\n                this.nodeStack_.push(node);\r\n                if (this.isReverse_) {\r\n                    node = node.right;\r\n                }\r\n                else {\r\n                    node = node.left;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    SortedMapIterator.prototype.getNext = function () {\r\n        if (this.nodeStack_.length === 0)\r\n            return null;\r\n        var node = this.nodeStack_.pop();\r\n        var result;\r\n        if (this.resultGenerator_)\r\n            result = this.resultGenerator_(node.key, node.value);\r\n        else\r\n            result = { key: node.key, value: node.value };\r\n        if (this.isReverse_) {\r\n            node = node.left;\r\n            while (!node.isEmpty()) {\r\n                this.nodeStack_.push(node);\r\n                node = node.right;\r\n            }\r\n        }\r\n        else {\r\n            node = node.right;\r\n            while (!node.isEmpty()) {\r\n                this.nodeStack_.push(node);\r\n                node = node.left;\r\n            }\r\n        }\r\n        return result;\r\n    };\r\n    SortedMapIterator.prototype.hasNext = function () {\r\n        return this.nodeStack_.length > 0;\r\n    };\r\n    SortedMapIterator.prototype.peek = function () {\r\n        if (this.nodeStack_.length === 0)\r\n            return null;\r\n        var node = this.nodeStack_[this.nodeStack_.length - 1];\r\n        if (this.resultGenerator_) {\r\n            return this.resultGenerator_(node.key, node.value);\r\n        }\r\n        else {\r\n            return { key: node.key, value: node.value };\r\n        }\r\n    };\r\n    return SortedMapIterator;\r\n}());\r\n/**\r\n * Represents a node in a Left-leaning Red-Black tree.\r\n */\r\nvar LLRBNode = /** @class */ (function () {\r\n    /**\r\n     * @template K, V\r\n     * @param {!K} key Key associated with this node.\r\n     * @param {!V} value Value associated with this node.\r\n     * @param {?boolean} color Whether this node is red.\r\n     * @param {?(LLRBNode|LLRBEmptyNode)=} left Left child.\r\n     * @param {?(LLRBNode|LLRBEmptyNode)=} right Right child.\r\n     */\r\n    function LLRBNode(key, value, color, left, right) {\r\n        this.key = key;\r\n        this.value = value;\r\n        this.color = color != null ? color : LLRBNode.RED;\r\n        this.left =\r\n            left != null ? left : SortedMap.EMPTY_NODE;\r\n        this.right =\r\n            right != null ? right : SortedMap.EMPTY_NODE;\r\n    }\r\n    /**\r\n     * Returns a copy of the current node, optionally replacing pieces of it.\r\n     *\r\n     * @param {?K} key New key for the node, or null.\r\n     * @param {?V} value New value for the node, or null.\r\n     * @param {?boolean} color New color for the node, or null.\r\n     * @param {?LLRBNode|LLRBEmptyNode} left New left child for the node, or null.\r\n     * @param {?LLRBNode|LLRBEmptyNode} right New right child for the node, or null.\r\n     * @return {!LLRBNode} The node copy.\r\n     */\r\n    LLRBNode.prototype.copy = function (key, value, color, left, right) {\r\n        return new LLRBNode(key != null ? key : this.key, value != null ? value : this.value, color != null ? color : this.color, left != null ? left : this.left, right != null ? right : this.right);\r\n    };\r\n    /**\r\n     * @return {number} The total number of nodes in the tree.\r\n     */\r\n    LLRBNode.prototype.count = function () {\r\n        return this.left.count() + 1 + this.right.count();\r\n    };\r\n    /**\r\n     * @return {boolean} True if the tree is empty.\r\n     */\r\n    LLRBNode.prototype.isEmpty = function () {\r\n        return false;\r\n    };\r\n    /**\r\n     * Traverses the tree in key order and calls the specified action function\r\n     * for each node.\r\n     *\r\n     * @param {function(!K, !V):*} action Callback function to be called for each\r\n     *   node.  If it returns true, traversal is aborted.\r\n     * @return {*} The first truthy value returned by action, or the last falsey\r\n     *   value returned by action\r\n     */\r\n    LLRBNode.prototype.inorderTraversal = function (action) {\r\n        return (this.left.inorderTraversal(action) ||\r\n            action(this.key, this.value) ||\r\n            this.right.inorderTraversal(action));\r\n    };\r\n    /**\r\n     * Traverses the tree in reverse key order and calls the specified action function\r\n     * for each node.\r\n     *\r\n     * @param {function(!Object, !Object)} action Callback function to be called for each\r\n     * node.  If it returns true, traversal is aborted.\r\n     * @return {*} True if traversal was aborted.\r\n     */\r\n    LLRBNode.prototype.reverseTraversal = function (action) {\r\n        return (this.right.reverseTraversal(action) ||\r\n            action(this.key, this.value) ||\r\n            this.left.reverseTraversal(action));\r\n    };\r\n    /**\r\n     * @return {!Object} The minimum node in the tree.\r\n     * @private\r\n     */\r\n    LLRBNode.prototype.min_ = function () {\r\n        if (this.left.isEmpty()) {\r\n            return this;\r\n        }\r\n        else {\r\n            return this.left.min_();\r\n        }\r\n    };\r\n    /**\r\n     * @return {!K} The maximum key in the tree.\r\n     */\r\n    LLRBNode.prototype.minKey = function () {\r\n        return this.min_().key;\r\n    };\r\n    /**\r\n     * @return {!K} The maximum key in the tree.\r\n     */\r\n    LLRBNode.prototype.maxKey = function () {\r\n        if (this.right.isEmpty()) {\r\n            return this.key;\r\n        }\r\n        else {\r\n            return this.right.maxKey();\r\n        }\r\n    };\r\n    /**\r\n     *\r\n     * @param {!Object} key Key to insert.\r\n     * @param {!Object} value Value to insert.\r\n     * @param {Comparator} comparator Comparator.\r\n     * @return {!LLRBNode} New tree, with the key/value added.\r\n     */\r\n    LLRBNode.prototype.insert = function (key, value, comparator) {\r\n        var cmp, n;\r\n        n = this;\r\n        cmp = comparator(key, n.key);\r\n        if (cmp < 0) {\r\n            n = n.copy(null, null, null, n.left.insert(key, value, comparator), null);\r\n        }\r\n        else if (cmp === 0) {\r\n            n = n.copy(null, value, null, null, null);\r\n        }\r\n        else {\r\n            n = n.copy(null, null, null, null, n.right.insert(key, value, comparator));\r\n        }\r\n        return n.fixUp_();\r\n    };\r\n    /**\r\n     * @private\r\n     * @return {!LLRBNode|LLRBEmptyNode} New tree, with the minimum key removed.\r\n     */\r\n    LLRBNode.prototype.removeMin_ = function () {\r\n        if (this.left.isEmpty()) {\r\n            return SortedMap.EMPTY_NODE;\r\n        }\r\n        var n = this;\r\n        if (!n.left.isRed_() && !n.left.left.isRed_())\r\n            n = n.moveRedLeft_();\r\n        n = n.copy(null, null, null, n.left.removeMin_(), null);\r\n        return n.fixUp_();\r\n    };\r\n    /**\r\n     * @param {!Object} key The key of the item to remove.\r\n     * @param {Comparator} comparator Comparator.\r\n     * @return {!LLRBNode|LLRBEmptyNode} New tree, with the specified item removed.\r\n     */\r\n    LLRBNode.prototype.remove = function (key, comparator) {\r\n        var n, smallest;\r\n        n = this;\r\n        if (comparator(key, n.key) < 0) {\r\n            if (!n.left.isEmpty() && !n.left.isRed_() && !n.left.left.isRed_()) {\r\n                n = n.moveRedLeft_();\r\n            }\r\n            n = n.copy(null, null, null, n.left.remove(key, comparator), null);\r\n        }\r\n        else {\r\n            if (n.left.isRed_())\r\n                n = n.rotateRight_();\r\n            if (!n.right.isEmpty() && !n.right.isRed_() && !n.right.left.isRed_()) {\r\n                n = n.moveRedRight_();\r\n            }\r\n            if (comparator(key, n.key) === 0) {\r\n                if (n.right.isEmpty()) {\r\n                    return SortedMap.EMPTY_NODE;\r\n                }\r\n                else {\r\n                    smallest = n.right.min_();\r\n                    n = n.copy(smallest.key, smallest.value, null, null, n.right.removeMin_());\r\n                }\r\n            }\r\n            n = n.copy(null, null, null, null, n.right.remove(key, comparator));\r\n        }\r\n        return n.fixUp_();\r\n    };\r\n    /**\r\n     * @private\r\n     * @return {boolean} Whether this is a RED node.\r\n     */\r\n    LLRBNode.prototype.isRed_ = function () {\r\n        return this.color;\r\n    };\r\n    /**\r\n     * @private\r\n     * @return {!LLRBNode} New tree after performing any needed rotations.\r\n     */\r\n    LLRBNode.prototype.fixUp_ = function () {\r\n        var n = this;\r\n        if (n.right.isRed_() && !n.left.isRed_())\r\n            n = n.rotateLeft_();\r\n        if (n.left.isRed_() && n.left.left.isRed_())\r\n            n = n.rotateRight_();\r\n        if (n.left.isRed_() && n.right.isRed_())\r\n            n = n.colorFlip_();\r\n        return n;\r\n    };\r\n    /**\r\n     * @private\r\n     * @return {!LLRBNode} New tree, after moveRedLeft.\r\n     */\r\n    LLRBNode.prototype.moveRedLeft_ = function () {\r\n        var n = this.colorFlip_();\r\n        if (n.right.left.isRed_()) {\r\n            n = n.copy(null, null, null, null, n.right.rotateRight_());\r\n            n = n.rotateLeft_();\r\n            n = n.colorFlip_();\r\n        }\r\n        return n;\r\n    };\r\n    /**\r\n     * @private\r\n     * @return {!LLRBNode} New tree, after moveRedRight.\r\n     */\r\n    LLRBNode.prototype.moveRedRight_ = function () {\r\n        var n = this.colorFlip_();\r\n        if (n.left.left.isRed_()) {\r\n            n = n.rotateRight_();\r\n            n = n.colorFlip_();\r\n        }\r\n        return n;\r\n    };\r\n    /**\r\n     * @private\r\n     * @return {!LLRBNode} New tree, after rotateLeft.\r\n     */\r\n    LLRBNode.prototype.rotateLeft_ = function () {\r\n        var nl = this.copy(null, null, LLRBNode.RED, null, this.right.left);\r\n        return this.right.copy(null, null, this.color, nl, null);\r\n    };\r\n    /**\r\n     * @private\r\n     * @return {!LLRBNode} New tree, after rotateRight.\r\n     */\r\n    LLRBNode.prototype.rotateRight_ = function () {\r\n        var nr = this.copy(null, null, LLRBNode.RED, this.left.right, null);\r\n        return this.left.copy(null, null, this.color, null, nr);\r\n    };\r\n    /**\r\n     * @private\r\n     * @return {!LLRBNode} New tree, after colorFlip.\r\n     */\r\n    LLRBNode.prototype.colorFlip_ = function () {\r\n        var left = this.left.copy(null, null, !this.left.color, null, null);\r\n        var right = this.right.copy(null, null, !this.right.color, null, null);\r\n        return this.copy(null, null, !this.color, left, right);\r\n    };\r\n    /**\r\n     * For testing.\r\n     *\r\n     * @private\r\n     * @return {boolean} True if all is well.\r\n     */\r\n    LLRBNode.prototype.checkMaxDepth_ = function () {\r\n        var blackDepth = this.check_();\r\n        return Math.pow(2.0, blackDepth) <= this.count() + 1;\r\n    };\r\n    /**\r\n     * @private\r\n     * @return {number} Not sure what this returns exactly. :-).\r\n     */\r\n    LLRBNode.prototype.check_ = function () {\r\n        var blackDepth;\r\n        if (this.isRed_() && this.left.isRed_()) {\r\n            throw new Error('Red node has red child(' + this.key + ',' + this.value + ')');\r\n        }\r\n        if (this.right.isRed_()) {\r\n            throw new Error('Right child of (' + this.key + ',' + this.value + ') is red');\r\n        }\r\n        blackDepth = this.left.check_();\r\n        if (blackDepth !== this.right.check_()) {\r\n            throw new Error('Black depths differ');\r\n        }\r\n        else {\r\n            return blackDepth + (this.isRed_() ? 0 : 1);\r\n        }\r\n    };\r\n    LLRBNode.RED = true;\r\n    LLRBNode.BLACK = false;\r\n    return LLRBNode;\r\n}());\r\n/**\r\n * Represents an empty node (a leaf node in the Red-Black Tree).\r\n */\r\nvar LLRBEmptyNode = /** @class */ (function () {\r\n    function LLRBEmptyNode() {\r\n    }\r\n    /**\r\n     * Returns a copy of the current node.\r\n     *\r\n     * @return {!LLRBEmptyNode} The node copy.\r\n     */\r\n    LLRBEmptyNode.prototype.copy = function (key, value, color, left, right) {\r\n        return this;\r\n    };\r\n    /**\r\n     * Returns a copy of the tree, with the specified key/value added.\r\n     *\r\n     * @param {!K} key Key to be added.\r\n     * @param {!V} value Value to be added.\r\n     * @param {Comparator} comparator Comparator.\r\n     * @return {!LLRBNode} New tree, with item added.\r\n     */\r\n    LLRBEmptyNode.prototype.insert = function (key, value, comparator) {\r\n        return new LLRBNode(key, value, null);\r\n    };\r\n    /**\r\n     * Returns a copy of the tree, with the specified key removed.\r\n     *\r\n     * @param {!K} key The key to remove.\r\n     * @param {Comparator} comparator Comparator.\r\n     * @return {!LLRBEmptyNode} New tree, with item removed.\r\n     */\r\n    LLRBEmptyNode.prototype.remove = function (key, comparator) {\r\n        return this;\r\n    };\r\n    /**\r\n     * @return {number} The total number of nodes in the tree.\r\n     */\r\n    LLRBEmptyNode.prototype.count = function () {\r\n        return 0;\r\n    };\r\n    /**\r\n     * @return {boolean} True if the tree is empty.\r\n     */\r\n    LLRBEmptyNode.prototype.isEmpty = function () {\r\n        return true;\r\n    };\r\n    /**\r\n     * Traverses the tree in key order and calls the specified action function\r\n     * for each node.\r\n     *\r\n     * @param {function(!K, !V):*} action Callback function to be called for each\r\n     * node.  If it returns true, traversal is aborted.\r\n     * @return {boolean} True if traversal was aborted.\r\n     */\r\n    LLRBEmptyNode.prototype.inorderTraversal = function (action) {\r\n        return false;\r\n    };\r\n    /**\r\n     * Traverses the tree in reverse key order and calls the specified action function\r\n     * for each node.\r\n     *\r\n     * @param {function(!K, !V)} action Callback function to be called for each\r\n     * node.  If it returns true, traversal is aborted.\r\n     * @return {boolean} True if traversal was aborted.\r\n     */\r\n    LLRBEmptyNode.prototype.reverseTraversal = function (action) {\r\n        return false;\r\n    };\r\n    /**\r\n     * @return {null}\r\n     */\r\n    LLRBEmptyNode.prototype.minKey = function () {\r\n        return null;\r\n    };\r\n    /**\r\n     * @return {null}\r\n     */\r\n    LLRBEmptyNode.prototype.maxKey = function () {\r\n        return null;\r\n    };\r\n    /**\r\n     * @private\r\n     * @return {number} Not sure what this returns exactly. :-).\r\n     */\r\n    LLRBEmptyNode.prototype.check_ = function () {\r\n        return 0;\r\n    };\r\n    /**\r\n     * @private\r\n     * @return {boolean} Whether this node is red.\r\n     */\r\n    LLRBEmptyNode.prototype.isRed_ = function () {\r\n        return false;\r\n    };\r\n    return LLRBEmptyNode;\r\n}());\r\n/**\r\n * An immutable sorted map implementation, based on a Left-leaning Red-Black\r\n * tree.\r\n */\r\nvar SortedMap = /** @class */ (function () {\r\n    /**\r\n     * @template K, V\r\n     * @param {function(K, K):number} comparator_ Key comparator.\r\n     * @param {LLRBNode=} root_ (Optional) Root node for the map.\r\n     */\r\n    function SortedMap(comparator_, root_) {\r\n        if (root_ === void 0) { root_ = SortedMap.EMPTY_NODE; }\r\n        this.comparator_ = comparator_;\r\n        this.root_ = root_;\r\n    }\r\n    /**\r\n     * Returns a copy of the map, with the specified key/value added or replaced.\r\n     * (TODO: We should perhaps rename this method to 'put')\r\n     *\r\n     * @param {!K} key Key to be added.\r\n     * @param {!V} value Value to be added.\r\n     * @return {!SortedMap.<K, V>} New map, with item added.\r\n     */\r\n    SortedMap.prototype.insert = function (key, value) {\r\n        return new SortedMap(this.comparator_, this.root_\r\n            .insert(key, value, this.comparator_)\r\n            .copy(null, null, LLRBNode.BLACK, null, null));\r\n    };\r\n    /**\r\n     * Returns a copy of the map, with the specified key removed.\r\n     *\r\n     * @param {!K} key The key to remove.\r\n     * @return {!SortedMap.<K, V>} New map, with item removed.\r\n     */\r\n    SortedMap.prototype.remove = function (key) {\r\n        return new SortedMap(this.comparator_, this.root_\r\n            .remove(key, this.comparator_)\r\n            .copy(null, null, LLRBNode.BLACK, null, null));\r\n    };\r\n    /**\r\n     * Returns the value of the node with the given key, or null.\r\n     *\r\n     * @param {!K} key The key to look up.\r\n     * @return {?V} The value of the node with the given key, or null if the\r\n     * key doesn't exist.\r\n     */\r\n    SortedMap.prototype.get = function (key) {\r\n        var cmp;\r\n        var node = this.root_;\r\n        while (!node.isEmpty()) {\r\n            cmp = this.comparator_(key, node.key);\r\n            if (cmp === 0) {\r\n                return node.value;\r\n            }\r\n            else if (cmp < 0) {\r\n                node = node.left;\r\n            }\r\n            else if (cmp > 0) {\r\n                node = node.right;\r\n            }\r\n        }\r\n        return null;\r\n    };\r\n    /**\r\n     * Returns the key of the item *before* the specified key, or null if key is the first item.\r\n     * @param {K} key The key to find the predecessor of\r\n     * @return {?K} The predecessor key.\r\n     */\r\n    SortedMap.prototype.getPredecessorKey = function (key) {\r\n        var cmp, node = this.root_, rightParent = null;\r\n        while (!node.isEmpty()) {\r\n            cmp = this.comparator_(key, node.key);\r\n            if (cmp === 0) {\r\n                if (!node.left.isEmpty()) {\r\n                    node = node.left;\r\n                    while (!node.right.isEmpty())\r\n                        node = node.right;\r\n                    return node.key;\r\n                }\r\n                else if (rightParent) {\r\n                    return rightParent.key;\r\n                }\r\n                else {\r\n                    return null; // first item.\r\n                }\r\n            }\r\n            else if (cmp < 0) {\r\n                node = node.left;\r\n            }\r\n            else if (cmp > 0) {\r\n                rightParent = node;\r\n                node = node.right;\r\n            }\r\n        }\r\n        throw new Error('Attempted to find predecessor key for a nonexistent key.  What gives?');\r\n    };\r\n    /**\r\n     * @return {boolean} True if the map is empty.\r\n     */\r\n    SortedMap.prototype.isEmpty = function () {\r\n        return this.root_.isEmpty();\r\n    };\r\n    /**\r\n     * @return {number} The total number of nodes in the map.\r\n     */\r\n    SortedMap.prototype.count = function () {\r\n        return this.root_.count();\r\n    };\r\n    /**\r\n     * @return {?K} The minimum key in the map.\r\n     */\r\n    SortedMap.prototype.minKey = function () {\r\n        return this.root_.minKey();\r\n    };\r\n    /**\r\n     * @return {?K} The maximum key in the map.\r\n     */\r\n    SortedMap.prototype.maxKey = function () {\r\n        return this.root_.maxKey();\r\n    };\r\n    /**\r\n     * Traverses the map in key order and calls the specified action function\r\n     * for each key/value pair.\r\n     *\r\n     * @param {function(!K, !V):*} action Callback function to be called\r\n     * for each key/value pair.  If action returns true, traversal is aborted.\r\n     * @return {*} The first truthy value returned by action, or the last falsey\r\n     *   value returned by action\r\n     */\r\n    SortedMap.prototype.inorderTraversal = function (action) {\r\n        return this.root_.inorderTraversal(action);\r\n    };\r\n    /**\r\n     * Traverses the map in reverse key order and calls the specified action function\r\n     * for each key/value pair.\r\n     *\r\n     * @param {function(!Object, !Object)} action Callback function to be called\r\n     * for each key/value pair.  If action returns true, traversal is aborted.\r\n     * @return {*} True if the traversal was aborted.\r\n     */\r\n    SortedMap.prototype.reverseTraversal = function (action) {\r\n        return this.root_.reverseTraversal(action);\r\n    };\r\n    /**\r\n     * Returns an iterator over the SortedMap.\r\n     * @template T\r\n     * @param {(function(K, V):T)=} resultGenerator\r\n     * @return {SortedMapIterator.<K, V, T>} The iterator.\r\n     */\r\n    SortedMap.prototype.getIterator = function (resultGenerator) {\r\n        return new SortedMapIterator(this.root_, null, this.comparator_, false, resultGenerator);\r\n    };\r\n    SortedMap.prototype.getIteratorFrom = function (key, resultGenerator) {\r\n        return new SortedMapIterator(this.root_, key, this.comparator_, false, resultGenerator);\r\n    };\r\n    SortedMap.prototype.getReverseIteratorFrom = function (key, resultGenerator) {\r\n        return new SortedMapIterator(this.root_, key, this.comparator_, true, resultGenerator);\r\n    };\r\n    SortedMap.prototype.getReverseIterator = function (resultGenerator) {\r\n        return new SortedMapIterator(this.root_, null, this.comparator_, true, resultGenerator);\r\n    };\r\n    /**\r\n     * Always use the same empty node, to reduce memory.\r\n     * @const\r\n     */\r\n    SortedMap.EMPTY_NODE = new LLRBEmptyNode();\r\n    return SortedMap;\r\n}());\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nvar LOG_2 = Math.log(2);\r\n/**\r\n * @constructor\r\n */\r\nvar Base12Num = /** @class */ (function () {\r\n    /**\r\n     * @param {number} length\r\n     */\r\n    function Base12Num(length) {\r\n        var logBase2 = function (num) {\r\n            return parseInt((Math.log(num) / LOG_2), 10);\r\n        };\r\n        var bitMask = function (bits) { return parseInt(Array(bits + 1).join('1'), 2); };\r\n        this.count = logBase2(length + 1);\r\n        this.current_ = this.count - 1;\r\n        var mask = bitMask(this.count);\r\n        this.bits_ = (length + 1) & mask;\r\n    }\r\n    /**\r\n     * @return {boolean}\r\n     */\r\n    Base12Num.prototype.nextBitIsOne = function () {\r\n        //noinspection JSBitwiseOperatorUsage\r\n        var result = !(this.bits_ & (0x1 << this.current_));\r\n        this.current_--;\r\n        return result;\r\n    };\r\n    return Base12Num;\r\n}());\r\n/**\r\n * Takes a list of child nodes and constructs a SortedSet using the given comparison\r\n * function\r\n *\r\n * Uses the algorithm described in the paper linked here:\r\n * http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.46.1458\r\n *\r\n * @template K, V\r\n * @param {Array.<!NamedNode>} childList Unsorted list of children\r\n * @param {function(!NamedNode, !NamedNode):number} cmp The comparison method to be used\r\n * @param {(function(NamedNode):K)=} keyFn An optional function to extract K from a node wrapper, if K's\r\n *                                                        type is not NamedNode\r\n * @param {(function(K, K):number)=} mapSortFn An optional override for comparator used by the generated sorted map\r\n * @return {SortedMap.<K, V>}\r\n */\r\nvar buildChildSet = function (childList, cmp, keyFn, mapSortFn) {\r\n    childList.sort(cmp);\r\n    var buildBalancedTree = function (low, high) {\r\n        var length = high - low;\r\n        var namedNode;\r\n        var key;\r\n        if (length == 0) {\r\n            return null;\r\n        }\r\n        else if (length == 1) {\r\n            namedNode = childList[low];\r\n            key = keyFn ? keyFn(namedNode) : namedNode;\r\n            return new LLRBNode(key, namedNode.node, LLRBNode.BLACK, null, null);\r\n        }\r\n        else {\r\n            var middle = parseInt((length / 2), 10) + low;\r\n            var left = buildBalancedTree(low, middle);\r\n            var right = buildBalancedTree(middle + 1, high);\r\n            namedNode = childList[middle];\r\n            key = keyFn ? keyFn(namedNode) : namedNode;\r\n            return new LLRBNode(key, namedNode.node, LLRBNode.BLACK, left, right);\r\n        }\r\n    };\r\n    var buildFrom12Array = function (base12) {\r\n        var node = null;\r\n        var root = null;\r\n        var index = childList.length;\r\n        var buildPennant = function (chunkSize, color) {\r\n            var low = index - chunkSize;\r\n            var high = index;\r\n            index -= chunkSize;\r\n            var childTree = buildBalancedTree(low + 1, high);\r\n            var namedNode = childList[low];\r\n            var key = keyFn ? keyFn(namedNode) : namedNode;\r\n            attachPennant(new LLRBNode(key, namedNode.node, color, null, childTree));\r\n        };\r\n        var attachPennant = function (pennant) {\r\n            if (node) {\r\n                node.left = pennant;\r\n                node = pennant;\r\n            }\r\n            else {\r\n                root = pennant;\r\n                node = pennant;\r\n            }\r\n        };\r\n        for (var i = 0; i < base12.count; ++i) {\r\n            var isOne = base12.nextBitIsOne();\r\n            // The number of nodes taken in each slice is 2^(arr.length - (i + 1))\r\n            var chunkSize = Math.pow(2, base12.count - (i + 1));\r\n            if (isOne) {\r\n                buildPennant(chunkSize, LLRBNode.BLACK);\r\n            }\r\n            else {\r\n                // current == 2\r\n                buildPennant(chunkSize, LLRBNode.BLACK);\r\n                buildPennant(chunkSize, LLRBNode.RED);\r\n            }\r\n        }\r\n        return root;\r\n    };\r\n    var base12 = new Base12Num(childList.length);\r\n    var root = buildFrom12Array(base12);\r\n    return new SortedMap(mapSortFn || cmp, root);\r\n};\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nvar _defaultIndexMap;\r\nvar fallbackObject = {};\r\n/**\r\n *\r\n * @param {Object.<string, FallbackType|SortedMap.<NamedNode, Node>>} indexes\r\n * @param {Object.<string, Index>} indexSet\r\n * @constructor\r\n */\r\nvar IndexMap = /** @class */ (function () {\r\n    function IndexMap(indexes_, indexSet_) {\r\n        this.indexes_ = indexes_;\r\n        this.indexSet_ = indexSet_;\r\n    }\r\n    Object.defineProperty(IndexMap, \"Default\", {\r\n        /**\r\n         * The default IndexMap for nodes without a priority\r\n         * @type {!IndexMap}\r\n         * @const\r\n         */\r\n        get: function () {\r\n            util.assert(fallbackObject && PRIORITY_INDEX, 'ChildrenNode.ts has not been loaded');\r\n            _defaultIndexMap =\r\n                _defaultIndexMap ||\r\n                    new IndexMap({ '.priority': fallbackObject }, { '.priority': PRIORITY_INDEX });\r\n            return _defaultIndexMap;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     *\r\n     * @param {!string} indexKey\r\n     * @return {?SortedMap.<NamedNode, Node>}\r\n     */\r\n    IndexMap.prototype.get = function (indexKey) {\r\n        var sortedMap = util.safeGet(this.indexes_, indexKey);\r\n        if (!sortedMap)\r\n            throw new Error('No index defined for ' + indexKey);\r\n        if (sortedMap === fallbackObject) {\r\n            // The index exists, but it falls back to just name comparison. Return null so that the calling code uses the\r\n            // regular child map\r\n            return null;\r\n        }\r\n        else {\r\n            return sortedMap;\r\n        }\r\n    };\r\n    /**\r\n     * @param {!Index} indexDefinition\r\n     * @return {boolean}\r\n     */\r\n    IndexMap.prototype.hasIndex = function (indexDefinition) {\r\n        return util.contains(this.indexSet_, indexDefinition.toString());\r\n    };\r\n    /**\r\n     * @param {!Index} indexDefinition\r\n     * @param {!SortedMap.<string, !Node>} existingChildren\r\n     * @return {!IndexMap}\r\n     */\r\n    IndexMap.prototype.addIndex = function (indexDefinition, existingChildren) {\r\n        util.assert(indexDefinition !== KEY_INDEX, \"KeyIndex always exists and isn't meant to be added to the IndexMap.\");\r\n        var childList = [];\r\n        var sawIndexedValue = false;\r\n        var iter = existingChildren.getIterator(NamedNode.Wrap);\r\n        var next = iter.getNext();\r\n        while (next) {\r\n            sawIndexedValue =\r\n                sawIndexedValue || indexDefinition.isDefinedOn(next.node);\r\n            childList.push(next);\r\n            next = iter.getNext();\r\n        }\r\n        var newIndex;\r\n        if (sawIndexedValue) {\r\n            newIndex = buildChildSet(childList, indexDefinition.getCompare());\r\n        }\r\n        else {\r\n            newIndex = fallbackObject;\r\n        }\r\n        var indexName = indexDefinition.toString();\r\n        var newIndexSet = util.clone(this.indexSet_);\r\n        newIndexSet[indexName] = indexDefinition;\r\n        var newIndexes = util.clone(this.indexes_);\r\n        newIndexes[indexName] = newIndex;\r\n        return new IndexMap(newIndexes, newIndexSet);\r\n    };\r\n    /**\r\n     * Ensure that this node is properly tracked in any indexes that we're maintaining\r\n     * @param {!NamedNode} namedNode\r\n     * @param {!SortedMap.<string, !Node>} existingChildren\r\n     * @return {!IndexMap}\r\n     */\r\n    IndexMap.prototype.addToIndexes = function (namedNode, existingChildren) {\r\n        var _this = this;\r\n        var newIndexes = util.map(this.indexes_, function (indexedChildren, indexName) {\r\n            var index = util.safeGet(_this.indexSet_, indexName);\r\n            util.assert(index, 'Missing index implementation for ' + indexName);\r\n            if (indexedChildren === fallbackObject) {\r\n                // Check to see if we need to index everything\r\n                if (index.isDefinedOn(namedNode.node)) {\r\n                    // We need to build this index\r\n                    var childList = [];\r\n                    var iter = existingChildren.getIterator(NamedNode.Wrap);\r\n                    var next = iter.getNext();\r\n                    while (next) {\r\n                        if (next.name != namedNode.name) {\r\n                            childList.push(next);\r\n                        }\r\n                        next = iter.getNext();\r\n                    }\r\n                    childList.push(namedNode);\r\n                    return buildChildSet(childList, index.getCompare());\r\n                }\r\n                else {\r\n                    // No change, this remains a fallback\r\n                    return fallbackObject;\r\n                }\r\n            }\r\n            else {\r\n                var existingSnap = existingChildren.get(namedNode.name);\r\n                var newChildren = indexedChildren;\r\n                if (existingSnap) {\r\n                    newChildren = newChildren.remove(new NamedNode(namedNode.name, existingSnap));\r\n                }\r\n                return newChildren.insert(namedNode, namedNode.node);\r\n            }\r\n        });\r\n        return new IndexMap(newIndexes, this.indexSet_);\r\n    };\r\n    /**\r\n     * Create a new IndexMap instance with the given value removed\r\n     * @param {!NamedNode} namedNode\r\n     * @param {!SortedMap.<string, !Node>} existingChildren\r\n     * @return {!IndexMap}\r\n     */\r\n    IndexMap.prototype.removeFromIndexes = function (namedNode, existingChildren) {\r\n        var newIndexes = util.map(this.indexes_, function (indexedChildren) {\r\n            if (indexedChildren === fallbackObject) {\r\n                // This is the fallback. Just return it, nothing to do in this case\r\n                return indexedChildren;\r\n            }\r\n            else {\r\n                var existingSnap = existingChildren.get(namedNode.name);\r\n                if (existingSnap) {\r\n                    return indexedChildren.remove(new NamedNode(namedNode.name, existingSnap));\r\n                }\r\n                else {\r\n                    // No record of this child\r\n                    return indexedChildren;\r\n                }\r\n            }\r\n        });\r\n        return new IndexMap(newIndexes, this.indexSet_);\r\n    };\r\n    return IndexMap;\r\n}());\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nfunction NAME_ONLY_COMPARATOR(left, right) {\r\n    return nameCompare(left.name, right.name);\r\n}\r\nfunction NAME_COMPARATOR(left, right) {\r\n    return nameCompare(left, right);\r\n}\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n// TODO: For memory savings, don't store priorityNode_ if it's empty.\r\nvar EMPTY_NODE;\r\n/**\r\n * ChildrenNode is a class for storing internal nodes in a DataSnapshot\r\n * (i.e. nodes with children).  It implements Node and stores the\r\n * list of children in the children property, sorted by child name.\r\n *\r\n * @constructor\r\n * @implements {Node}\r\n */\r\nvar ChildrenNode = /** @class */ (function () {\r\n    /**\r\n     *\r\n     * @param {!SortedMap.<string, !Node>} children_ List of children\r\n     * of this node..\r\n     * @param {?Node} priorityNode_ The priority of this node (as a snapshot node).\r\n     * @param {!IndexMap} indexMap_\r\n     */\r\n    function ChildrenNode(children_, priorityNode_, indexMap_) {\r\n        this.children_ = children_;\r\n        this.priorityNode_ = priorityNode_;\r\n        this.indexMap_ = indexMap_;\r\n        this.lazyHash_ = null;\r\n        /**\r\n         * Note: The only reason we allow null priority is for EMPTY_NODE, since we can't use\r\n         * EMPTY_NODE as the priority of EMPTY_NODE.  We might want to consider making EMPTY_NODE its own\r\n         * class instead of an empty ChildrenNode.\r\n         */\r\n        if (this.priorityNode_) {\r\n            validatePriorityNode(this.priorityNode_);\r\n        }\r\n        if (this.children_.isEmpty()) {\r\n            util.assert(!this.priorityNode_ || this.priorityNode_.isEmpty(), 'An empty node cannot have a priority');\r\n        }\r\n    }\r\n    Object.defineProperty(ChildrenNode, \"EMPTY_NODE\", {\r\n        get: function () {\r\n            return (EMPTY_NODE ||\r\n                (EMPTY_NODE = new ChildrenNode(new SortedMap(NAME_COMPARATOR), null, IndexMap.Default)));\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /** @inheritDoc */\r\n    ChildrenNode.prototype.isLeafNode = function () {\r\n        return false;\r\n    };\r\n    /** @inheritDoc */\r\n    ChildrenNode.prototype.getPriority = function () {\r\n        return this.priorityNode_ || EMPTY_NODE;\r\n    };\r\n    /** @inheritDoc */\r\n    ChildrenNode.prototype.updatePriority = function (newPriorityNode) {\r\n        if (this.children_.isEmpty()) {\r\n            // Don't allow priorities on empty nodes\r\n            return this;\r\n        }\r\n        else {\r\n            return new ChildrenNode(this.children_, newPriorityNode, this.indexMap_);\r\n        }\r\n    };\r\n    /** @inheritDoc */\r\n    ChildrenNode.prototype.getImmediateChild = function (childName) {\r\n        // Hack to treat priority as a regular child\r\n        if (childName === '.priority') {\r\n            return this.getPriority();\r\n        }\r\n        else {\r\n            var child = this.children_.get(childName);\r\n            return child === null ? EMPTY_NODE : child;\r\n        }\r\n    };\r\n    /** @inheritDoc */\r\n    ChildrenNode.prototype.getChild = function (path) {\r\n        var front = path.getFront();\r\n        if (front === null)\r\n            return this;\r\n        return this.getImmediateChild(front).getChild(path.popFront());\r\n    };\r\n    /** @inheritDoc */\r\n    ChildrenNode.prototype.hasChild = function (childName) {\r\n        return this.children_.get(childName) !== null;\r\n    };\r\n    /** @inheritDoc */\r\n    ChildrenNode.prototype.updateImmediateChild = function (childName, newChildNode) {\r\n        util.assert(newChildNode, 'We should always be passing snapshot nodes');\r\n        if (childName === '.priority') {\r\n            return this.updatePriority(newChildNode);\r\n        }\r\n        else {\r\n            var namedNode = new NamedNode(childName, newChildNode);\r\n            var newChildren = void 0, newIndexMap = void 0, newPriority = void 0;\r\n            if (newChildNode.isEmpty()) {\r\n                newChildren = this.children_.remove(childName);\r\n                newIndexMap = this.indexMap_.removeFromIndexes(namedNode, this.children_);\r\n            }\r\n            else {\r\n                newChildren = this.children_.insert(childName, newChildNode);\r\n                newIndexMap = this.indexMap_.addToIndexes(namedNode, this.children_);\r\n            }\r\n            newPriority = newChildren.isEmpty() ? EMPTY_NODE : this.priorityNode_;\r\n            return new ChildrenNode(newChildren, newPriority, newIndexMap);\r\n        }\r\n    };\r\n    /** @inheritDoc */\r\n    ChildrenNode.prototype.updateChild = function (path, newChildNode) {\r\n        var front = path.getFront();\r\n        if (front === null) {\r\n            return newChildNode;\r\n        }\r\n        else {\r\n            util.assert(path.getFront() !== '.priority' || path.getLength() === 1, '.priority must be the last token in a path');\r\n            var newImmediateChild = this.getImmediateChild(front).updateChild(path.popFront(), newChildNode);\r\n            return this.updateImmediateChild(front, newImmediateChild);\r\n        }\r\n    };\r\n    /** @inheritDoc */\r\n    ChildrenNode.prototype.isEmpty = function () {\r\n        return this.children_.isEmpty();\r\n    };\r\n    /** @inheritDoc */\r\n    ChildrenNode.prototype.numChildren = function () {\r\n        return this.children_.count();\r\n    };\r\n    /** @inheritDoc */\r\n    ChildrenNode.prototype.val = function (exportFormat) {\r\n        if (this.isEmpty())\r\n            return null;\r\n        var obj = {};\r\n        var numKeys = 0, maxKey = 0, allIntegerKeys = true;\r\n        this.forEachChild(PRIORITY_INDEX, function (key, childNode) {\r\n            obj[key] = childNode.val(exportFormat);\r\n            numKeys++;\r\n            if (allIntegerKeys && ChildrenNode.INTEGER_REGEXP_.test(key)) {\r\n                maxKey = Math.max(maxKey, Number(key));\r\n            }\r\n            else {\r\n                allIntegerKeys = false;\r\n            }\r\n        });\r\n        if (!exportFormat && allIntegerKeys && maxKey < 2 * numKeys) {\r\n            // convert to array.\r\n            var array = [];\r\n            for (var key in obj)\r\n                array[key] = obj[key];\r\n            return array;\r\n        }\r\n        else {\r\n            if (exportFormat && !this.getPriority().isEmpty()) {\r\n                obj['.priority'] = this.getPriority().val();\r\n            }\r\n            return obj;\r\n        }\r\n    };\r\n    /** @inheritDoc */\r\n    ChildrenNode.prototype.hash = function () {\r\n        if (this.lazyHash_ === null) {\r\n            var toHash_1 = '';\r\n            if (!this.getPriority().isEmpty())\r\n                toHash_1 +=\r\n                    'priority:' +\r\n                        priorityHashText(this.getPriority().val()) +\r\n                        ':';\r\n            this.forEachChild(PRIORITY_INDEX, function (key, childNode) {\r\n                var childHash = childNode.hash();\r\n                if (childHash !== '')\r\n                    toHash_1 += ':' + key + ':' + childHash;\r\n            });\r\n            this.lazyHash_ = toHash_1 === '' ? '' : sha1(toHash_1);\r\n        }\r\n        return this.lazyHash_;\r\n    };\r\n    /** @inheritDoc */\r\n    ChildrenNode.prototype.getPredecessorChildName = function (childName, childNode, index) {\r\n        var idx = this.resolveIndex_(index);\r\n        if (idx) {\r\n            var predecessor = idx.getPredecessorKey(new NamedNode(childName, childNode));\r\n            return predecessor ? predecessor.name : null;\r\n        }\r\n        else {\r\n            return this.children_.getPredecessorKey(childName);\r\n        }\r\n    };\r\n    /**\r\n     * @param {!Index} indexDefinition\r\n     * @return {?string}\r\n     */\r\n    ChildrenNode.prototype.getFirstChildName = function (indexDefinition) {\r\n        var idx = this.resolveIndex_(indexDefinition);\r\n        if (idx) {\r\n            var minKey = idx.minKey();\r\n            return minKey && minKey.name;\r\n        }\r\n        else {\r\n            return this.children_.minKey();\r\n        }\r\n    };\r\n    /**\r\n     * @param {!Index} indexDefinition\r\n     * @return {?NamedNode}\r\n     */\r\n    ChildrenNode.prototype.getFirstChild = function (indexDefinition) {\r\n        var minKey = this.getFirstChildName(indexDefinition);\r\n        if (minKey) {\r\n            return new NamedNode(minKey, this.children_.get(minKey));\r\n        }\r\n        else {\r\n            return null;\r\n        }\r\n    };\r\n    /**\r\n     * Given an index, return the key name of the largest value we have, according to that index\r\n     * @param {!Index} indexDefinition\r\n     * @return {?string}\r\n     */\r\n    ChildrenNode.prototype.getLastChildName = function (indexDefinition) {\r\n        var idx = this.resolveIndex_(indexDefinition);\r\n        if (idx) {\r\n            var maxKey = idx.maxKey();\r\n            return maxKey && maxKey.name;\r\n        }\r\n        else {\r\n            return this.children_.maxKey();\r\n        }\r\n    };\r\n    /**\r\n     * @param {!Index} indexDefinition\r\n     * @return {?NamedNode}\r\n     */\r\n    ChildrenNode.prototype.getLastChild = function (indexDefinition) {\r\n        var maxKey = this.getLastChildName(indexDefinition);\r\n        if (maxKey) {\r\n            return new NamedNode(maxKey, this.children_.get(maxKey));\r\n        }\r\n        else {\r\n            return null;\r\n        }\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    ChildrenNode.prototype.forEachChild = function (index, action) {\r\n        var idx = this.resolveIndex_(index);\r\n        if (idx) {\r\n            return idx.inorderTraversal(function (wrappedNode) {\r\n                return action(wrappedNode.name, wrappedNode.node);\r\n            });\r\n        }\r\n        else {\r\n            return this.children_.inorderTraversal(action);\r\n        }\r\n    };\r\n    /**\r\n     * @param {!Index} indexDefinition\r\n     * @return {SortedMapIterator}\r\n     */\r\n    ChildrenNode.prototype.getIterator = function (indexDefinition) {\r\n        return this.getIteratorFrom(indexDefinition.minPost(), indexDefinition);\r\n    };\r\n    /**\r\n     *\r\n     * @param {!NamedNode} startPost\r\n     * @param {!Index} indexDefinition\r\n     * @return {!SortedMapIterator}\r\n     */\r\n    ChildrenNode.prototype.getIteratorFrom = function (startPost, indexDefinition) {\r\n        var idx = this.resolveIndex_(indexDefinition);\r\n        if (idx) {\r\n            return idx.getIteratorFrom(startPost, function (key) { return key; });\r\n        }\r\n        else {\r\n            var iterator = this.children_.getIteratorFrom(startPost.name, NamedNode.Wrap);\r\n            var next = iterator.peek();\r\n            while (next != null && indexDefinition.compare(next, startPost) < 0) {\r\n                iterator.getNext();\r\n                next = iterator.peek();\r\n            }\r\n            return iterator;\r\n        }\r\n    };\r\n    /**\r\n     * @param {!Index} indexDefinition\r\n     * @return {!SortedMapIterator}\r\n     */\r\n    ChildrenNode.prototype.getReverseIterator = function (indexDefinition) {\r\n        return this.getReverseIteratorFrom(indexDefinition.maxPost(), indexDefinition);\r\n    };\r\n    /**\r\n     * @param {!NamedNode} endPost\r\n     * @param {!Index} indexDefinition\r\n     * @return {!SortedMapIterator}\r\n     */\r\n    ChildrenNode.prototype.getReverseIteratorFrom = function (endPost, indexDefinition) {\r\n        var idx = this.resolveIndex_(indexDefinition);\r\n        if (idx) {\r\n            return idx.getReverseIteratorFrom(endPost, function (key) {\r\n                return key;\r\n            });\r\n        }\r\n        else {\r\n            var iterator = this.children_.getReverseIteratorFrom(endPost.name, NamedNode.Wrap);\r\n            var next = iterator.peek();\r\n            while (next != null && indexDefinition.compare(next, endPost) > 0) {\r\n                iterator.getNext();\r\n                next = iterator.peek();\r\n            }\r\n            return iterator;\r\n        }\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    ChildrenNode.prototype.compareTo = function (other) {\r\n        if (this.isEmpty()) {\r\n            if (other.isEmpty()) {\r\n                return 0;\r\n            }\r\n            else {\r\n                return -1;\r\n            }\r\n        }\r\n        else if (other.isLeafNode() || other.isEmpty()) {\r\n            return 1;\r\n        }\r\n        else if (other === MAX_NODE$2) {\r\n            return -1;\r\n        }\r\n        else {\r\n            // Must be another node with children.\r\n            return 0;\r\n        }\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    ChildrenNode.prototype.withIndex = function (indexDefinition) {\r\n        if (indexDefinition === KEY_INDEX ||\r\n            this.indexMap_.hasIndex(indexDefinition)) {\r\n            return this;\r\n        }\r\n        else {\r\n            var newIndexMap = this.indexMap_.addIndex(indexDefinition, this.children_);\r\n            return new ChildrenNode(this.children_, this.priorityNode_, newIndexMap);\r\n        }\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    ChildrenNode.prototype.isIndexed = function (index) {\r\n        return index === KEY_INDEX || this.indexMap_.hasIndex(index);\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    ChildrenNode.prototype.equals = function (other) {\r\n        if (other === this) {\r\n            return true;\r\n        }\r\n        else if (other.isLeafNode()) {\r\n            return false;\r\n        }\r\n        else {\r\n            var otherChildrenNode = other;\r\n            if (!this.getPriority().equals(otherChildrenNode.getPriority())) {\r\n                return false;\r\n            }\r\n            else if (this.children_.count() === otherChildrenNode.children_.count()) {\r\n                var thisIter = this.getIterator(PRIORITY_INDEX);\r\n                var otherIter = otherChildrenNode.getIterator(PRIORITY_INDEX);\r\n                var thisCurrent = thisIter.getNext();\r\n                var otherCurrent = otherIter.getNext();\r\n                while (thisCurrent && otherCurrent) {\r\n                    if (thisCurrent.name !== otherCurrent.name ||\r\n                        !thisCurrent.node.equals(otherCurrent.node)) {\r\n                        return false;\r\n                    }\r\n                    thisCurrent = thisIter.getNext();\r\n                    otherCurrent = otherIter.getNext();\r\n                }\r\n                return thisCurrent === null && otherCurrent === null;\r\n            }\r\n            else {\r\n                return false;\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * Returns a SortedMap ordered by index, or null if the default (by-key) ordering can be used\r\n     * instead.\r\n     *\r\n     * @private\r\n     * @param {!Index} indexDefinition\r\n     * @return {?SortedMap.<NamedNode, Node>}\r\n     */\r\n    ChildrenNode.prototype.resolveIndex_ = function (indexDefinition) {\r\n        if (indexDefinition === KEY_INDEX) {\r\n            return null;\r\n        }\r\n        else {\r\n            return this.indexMap_.get(indexDefinition.toString());\r\n        }\r\n    };\r\n    /**\r\n     * @private\r\n     * @type {RegExp}\r\n     */\r\n    ChildrenNode.INTEGER_REGEXP_ = /^(0|[1-9]\\d*)$/;\r\n    return ChildrenNode;\r\n}());\r\n/**\r\n * @constructor\r\n * @extends {ChildrenNode}\r\n * @private\r\n */\r\nvar MaxNode = /** @class */ (function (_super) {\r\n    tslib_1.__extends(MaxNode, _super);\r\n    function MaxNode() {\r\n        return _super.call(this, new SortedMap(NAME_COMPARATOR), ChildrenNode.EMPTY_NODE, IndexMap.Default) || this;\r\n    }\r\n    MaxNode.prototype.compareTo = function (other) {\r\n        if (other === this) {\r\n            return 0;\r\n        }\r\n        else {\r\n            return 1;\r\n        }\r\n    };\r\n    MaxNode.prototype.equals = function (other) {\r\n        // Not that we every compare it, but MAX_NODE is only ever equal to itself\r\n        return other === this;\r\n    };\r\n    MaxNode.prototype.getPriority = function () {\r\n        return this;\r\n    };\r\n    MaxNode.prototype.getImmediateChild = function (childName) {\r\n        return ChildrenNode.EMPTY_NODE;\r\n    };\r\n    MaxNode.prototype.isEmpty = function () {\r\n        return false;\r\n    };\r\n    return MaxNode;\r\n}(ChildrenNode));\r\n/**\r\n * Marker that will sort higher than any other snapshot.\r\n * @type {!MAX_NODE}\r\n * @const\r\n */\r\nvar MAX_NODE$2 = new MaxNode();\r\nObject.defineProperties(NamedNode, {\r\n    MIN: {\r\n        value: new NamedNode(MIN_NAME, ChildrenNode.EMPTY_NODE)\r\n    },\r\n    MAX: {\r\n        value: new NamedNode(MAX_NAME, MAX_NODE$2)\r\n    }\r\n});\r\n/**\r\n * Reference Extensions\r\n */\r\nKeyIndex.__EMPTY_NODE = ChildrenNode.EMPTY_NODE;\r\nLeafNode.__childrenNodeConstructor = ChildrenNode;\r\nsetMaxNode(MAX_NODE$2);\r\nsetMaxNode$1(MAX_NODE$2);\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nvar USE_HINZE = true;\r\n/**\r\n * Constructs a snapshot node representing the passed JSON and returns it.\r\n * @param {*} json JSON to create a node for.\r\n * @param {?string|?number=} priority Optional priority to use.  This will be ignored if the\r\n * passed JSON contains a .priority property.\r\n * @return {!Node}\r\n */\r\nfunction nodeFromJSON$1(json, priority) {\r\n    if (priority === void 0) { priority = null; }\r\n    if (json === null) {\r\n        return ChildrenNode.EMPTY_NODE;\r\n    }\r\n    if (typeof json === 'object' && '.priority' in json) {\r\n        priority = json['.priority'];\r\n    }\r\n    util.assert(priority === null ||\r\n        typeof priority === 'string' ||\r\n        typeof priority === 'number' ||\r\n        (typeof priority === 'object' && '.sv' in priority), 'Invalid priority type found: ' + typeof priority);\r\n    if (typeof json === 'object' && '.value' in json && json['.value'] !== null) {\r\n        json = json['.value'];\r\n    }\r\n    // Valid leaf nodes include non-objects or server-value wrapper objects\r\n    if (typeof json !== 'object' || '.sv' in json) {\r\n        var jsonLeaf = json;\r\n        return new LeafNode(jsonLeaf, nodeFromJSON$1(priority));\r\n    }\r\n    if (!(json instanceof Array) && USE_HINZE) {\r\n        var children_1 = [];\r\n        var childrenHavePriority_1 = false;\r\n        var hinzeJsonObj_1 = json;\r\n        util.forEach(hinzeJsonObj_1, function (key, child) {\r\n            if (typeof key !== 'string' || key.substring(0, 1) !== '.') {\r\n                // Ignore metadata nodes\r\n                var childNode = nodeFromJSON$1(hinzeJsonObj_1[key]);\r\n                if (!childNode.isEmpty()) {\r\n                    childrenHavePriority_1 =\r\n                        childrenHavePriority_1 || !childNode.getPriority().isEmpty();\r\n                    children_1.push(new NamedNode(key, childNode));\r\n                }\r\n            }\r\n        });\r\n        if (children_1.length == 0) {\r\n            return ChildrenNode.EMPTY_NODE;\r\n        }\r\n        var childSet = buildChildSet(children_1, NAME_ONLY_COMPARATOR, function (namedNode) { return namedNode.name; }, NAME_COMPARATOR);\r\n        if (childrenHavePriority_1) {\r\n            var sortedChildSet = buildChildSet(children_1, PRIORITY_INDEX.getCompare());\r\n            return new ChildrenNode(childSet, nodeFromJSON$1(priority), new IndexMap({ '.priority': sortedChildSet }, { '.priority': PRIORITY_INDEX }));\r\n        }\r\n        else {\r\n            return new ChildrenNode(childSet, nodeFromJSON$1(priority), IndexMap.Default);\r\n        }\r\n    }\r\n    else {\r\n        var node_1 = ChildrenNode.EMPTY_NODE;\r\n        var jsonObj_1 = json;\r\n        util.forEach(jsonObj_1, function (key, childData) {\r\n            if (util.contains(jsonObj_1, key)) {\r\n                if (key.substring(0, 1) !== '.') {\r\n                    // ignore metadata nodes.\r\n                    var childNode = nodeFromJSON$1(childData);\r\n                    if (childNode.isLeafNode() || !childNode.isEmpty())\r\n                        node_1 = node_1.updateImmediateChild(key, childNode);\r\n                }\r\n            }\r\n        });\r\n        return node_1.updatePriority(nodeFromJSON$1(priority));\r\n    }\r\n}\r\nsetNodeFromJSON(nodeFromJSON$1);\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * @constructor\r\n * @extends {Index}\r\n * @private\r\n */\r\nvar ValueIndex = /** @class */ (function (_super) {\r\n    tslib_1.__extends(ValueIndex, _super);\r\n    function ValueIndex() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    ValueIndex.prototype.compare = function (a, b) {\r\n        var indexCmp = a.node.compareTo(b.node);\r\n        if (indexCmp === 0) {\r\n            return nameCompare(a.name, b.name);\r\n        }\r\n        else {\r\n            return indexCmp;\r\n        }\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    ValueIndex.prototype.isDefinedOn = function (node) {\r\n        return true;\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    ValueIndex.prototype.indexedValueChanged = function (oldNode, newNode) {\r\n        return !oldNode.equals(newNode);\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    ValueIndex.prototype.minPost = function () {\r\n        return NamedNode.MIN;\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    ValueIndex.prototype.maxPost = function () {\r\n        return NamedNode.MAX;\r\n    };\r\n    /**\r\n     * @param {*} indexValue\r\n     * @param {string} name\r\n     * @return {!NamedNode}\r\n     */\r\n    ValueIndex.prototype.makePost = function (indexValue, name) {\r\n        var valueNode = nodeFromJSON$1(indexValue);\r\n        return new NamedNode(name, valueNode);\r\n    };\r\n    /**\r\n     * @return {!string} String representation for inclusion in a query spec\r\n     */\r\n    ValueIndex.prototype.toString = function () {\r\n        return '.value';\r\n    };\r\n    return ValueIndex;\r\n}(Index));\r\nvar VALUE_INDEX = new ValueIndex();\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * @param {!Path} indexPath\r\n * @constructor\r\n * @extends {Index}\r\n */\r\nvar PathIndex = /** @class */ (function (_super) {\r\n    tslib_1.__extends(PathIndex, _super);\r\n    function PathIndex(indexPath_) {\r\n        var _this = _super.call(this) || this;\r\n        _this.indexPath_ = indexPath_;\r\n        util.assert(!indexPath_.isEmpty() && indexPath_.getFront() !== '.priority', \"Can't create PathIndex with empty path or .priority key\");\r\n        return _this;\r\n    }\r\n    /**\r\n     * @param {!Node} snap\r\n     * @return {!Node}\r\n     * @protected\r\n     */\r\n    PathIndex.prototype.extractChild = function (snap) {\r\n        return snap.getChild(this.indexPath_);\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    PathIndex.prototype.isDefinedOn = function (node) {\r\n        return !node.getChild(this.indexPath_).isEmpty();\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    PathIndex.prototype.compare = function (a, b) {\r\n        var aChild = this.extractChild(a.node);\r\n        var bChild = this.extractChild(b.node);\r\n        var indexCmp = aChild.compareTo(bChild);\r\n        if (indexCmp === 0) {\r\n            return nameCompare(a.name, b.name);\r\n        }\r\n        else {\r\n            return indexCmp;\r\n        }\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    PathIndex.prototype.makePost = function (indexValue, name) {\r\n        var valueNode = nodeFromJSON$1(indexValue);\r\n        var node = ChildrenNode.EMPTY_NODE.updateChild(this.indexPath_, valueNode);\r\n        return new NamedNode(name, node);\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    PathIndex.prototype.maxPost = function () {\r\n        var node = ChildrenNode.EMPTY_NODE.updateChild(this.indexPath_, MAX_NODE$2);\r\n        return new NamedNode(MAX_NAME, node);\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    PathIndex.prototype.toString = function () {\r\n        return this.indexPath_.slice().join('/');\r\n    };\r\n    return PathIndex;\r\n}(Index));\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Class representing a firebase data snapshot.  It wraps a SnapshotNode and\r\n * surfaces the public methods (val, forEach, etc.) we want to expose.\r\n */\r\nvar DataSnapshot = /** @class */ (function () {\r\n    /**\r\n     * @param {!Node} node_ A SnapshotNode to wrap.\r\n     * @param {!Reference} ref_ The ref of the location this snapshot came from.\r\n     * @param {!Index} index_ The iteration order for this snapshot\r\n     */\r\n    function DataSnapshot(node_, ref_, index_) {\r\n        this.node_ = node_;\r\n        this.ref_ = ref_;\r\n        this.index_ = index_;\r\n    }\r\n    /**\r\n     * Retrieves the snapshot contents as JSON.  Returns null if the snapshot is\r\n     * empty.\r\n     *\r\n     * @return {*} JSON representation of the DataSnapshot contents, or null if empty.\r\n     */\r\n    DataSnapshot.prototype.val = function () {\r\n        util.validateArgCount('DataSnapshot.val', 0, 0, arguments.length);\r\n        return this.node_.val();\r\n    };\r\n    /**\r\n     * Returns the snapshot contents as JSON, including priorities of node.  Suitable for exporting\r\n     * the entire node contents.\r\n     * @return {*} JSON representation of the DataSnapshot contents, or null if empty.\r\n     */\r\n    DataSnapshot.prototype.exportVal = function () {\r\n        util.validateArgCount('DataSnapshot.exportVal', 0, 0, arguments.length);\r\n        return this.node_.val(true);\r\n    };\r\n    // Do not create public documentation. This is intended to make JSON serialization work but is otherwise unnecessary\r\n    // for end-users\r\n    DataSnapshot.prototype.toJSON = function () {\r\n        // Optional spacer argument is unnecessary because we're depending on recursion rather than stringifying the content\r\n        util.validateArgCount('DataSnapshot.toJSON', 0, 1, arguments.length);\r\n        return this.exportVal();\r\n    };\r\n    /**\r\n     * Returns whether the snapshot contains a non-null value.\r\n     *\r\n     * @return {boolean} Whether the snapshot contains a non-null value, or is empty.\r\n     */\r\n    DataSnapshot.prototype.exists = function () {\r\n        util.validateArgCount('DataSnapshot.exists', 0, 0, arguments.length);\r\n        return !this.node_.isEmpty();\r\n    };\r\n    /**\r\n     * Returns a DataSnapshot of the specified child node's contents.\r\n     *\r\n     * @param {!string} childPathString Path to a child.\r\n     * @return {!DataSnapshot} DataSnapshot for child node.\r\n     */\r\n    DataSnapshot.prototype.child = function (childPathString) {\r\n        util.validateArgCount('DataSnapshot.child', 0, 1, arguments.length);\r\n        // Ensure the childPath is a string (can be a number)\r\n        childPathString = String(childPathString);\r\n        validatePathString('DataSnapshot.child', 1, childPathString, false);\r\n        var childPath = new Path(childPathString);\r\n        var childRef = this.ref_.child(childPath);\r\n        return new DataSnapshot(this.node_.getChild(childPath), childRef, PRIORITY_INDEX);\r\n    };\r\n    /**\r\n     * Returns whether the snapshot contains a child at the specified path.\r\n     *\r\n     * @param {!string} childPathString Path to a child.\r\n     * @return {boolean} Whether the child exists.\r\n     */\r\n    DataSnapshot.prototype.hasChild = function (childPathString) {\r\n        util.validateArgCount('DataSnapshot.hasChild', 1, 1, arguments.length);\r\n        validatePathString('DataSnapshot.hasChild', 1, childPathString, false);\r\n        var childPath = new Path(childPathString);\r\n        return !this.node_.getChild(childPath).isEmpty();\r\n    };\r\n    /**\r\n     * Returns the priority of the object, or null if no priority was set.\r\n     *\r\n     * @return {string|number|null} The priority.\r\n     */\r\n    DataSnapshot.prototype.getPriority = function () {\r\n        util.validateArgCount('DataSnapshot.getPriority', 0, 0, arguments.length);\r\n        // typecast here because we never return deferred values or internal priorities (MAX_PRIORITY)\r\n        return this.node_.getPriority().val();\r\n    };\r\n    /**\r\n     * Iterates through child nodes and calls the specified action for each one.\r\n     *\r\n     * @param {function(!DataSnapshot)} action Callback function to be called\r\n     * for each child.\r\n     * @return {boolean} True if forEach was canceled by action returning true for\r\n     * one of the child nodes.\r\n     */\r\n    DataSnapshot.prototype.forEach = function (action) {\r\n        var _this = this;\r\n        util.validateArgCount('DataSnapshot.forEach', 1, 1, arguments.length);\r\n        util.validateCallback('DataSnapshot.forEach', 1, action, false);\r\n        if (this.node_.isLeafNode())\r\n            return false;\r\n        var childrenNode = this.node_;\r\n        // Sanitize the return value to a boolean. ChildrenNode.forEachChild has a weird return type...\r\n        return !!childrenNode.forEachChild(this.index_, function (key, node) {\r\n            return action(new DataSnapshot(node, _this.ref_.child(key), PRIORITY_INDEX));\r\n        });\r\n    };\r\n    /**\r\n     * Returns whether this DataSnapshot has children.\r\n     * @return {boolean} True if the DataSnapshot contains 1 or more child nodes.\r\n     */\r\n    DataSnapshot.prototype.hasChildren = function () {\r\n        util.validateArgCount('DataSnapshot.hasChildren', 0, 0, arguments.length);\r\n        if (this.node_.isLeafNode())\r\n            return false;\r\n        else\r\n            return !this.node_.isEmpty();\r\n    };\r\n    Object.defineProperty(DataSnapshot.prototype, \"key\", {\r\n        get: function () {\r\n            return this.ref_.getKey();\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Returns the number of children for this DataSnapshot.\r\n     * @return {number} The number of children that this DataSnapshot contains.\r\n     */\r\n    DataSnapshot.prototype.numChildren = function () {\r\n        util.validateArgCount('DataSnapshot.numChildren', 0, 0, arguments.length);\r\n        return this.node_.numChildren();\r\n    };\r\n    /**\r\n     * @return {Reference} The Firebase reference for the location this snapshot's data came from.\r\n     */\r\n    DataSnapshot.prototype.getRef = function () {\r\n        util.validateArgCount('DataSnapshot.ref', 0, 0, arguments.length);\r\n        return this.ref_;\r\n    };\r\n    Object.defineProperty(DataSnapshot.prototype, \"ref\", {\r\n        get: function () {\r\n            return this.getRef();\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return DataSnapshot;\r\n}());\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Encapsulates the data needed to raise an event\r\n * @implements {Event}\r\n */\r\nvar DataEvent = /** @class */ (function () {\r\n    /**\r\n     * @param {!string} eventType One of: value, child_added, child_changed, child_moved, child_removed\r\n     * @param {!EventRegistration} eventRegistration The function to call to with the event data. User provided\r\n     * @param {!DataSnapshot} snapshot The data backing the event\r\n     * @param {?string=} prevName Optional, the name of the previous child for child_* events.\r\n     */\r\n    function DataEvent(eventType, eventRegistration, snapshot, prevName) {\r\n        this.eventType = eventType;\r\n        this.eventRegistration = eventRegistration;\r\n        this.snapshot = snapshot;\r\n        this.prevName = prevName;\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    DataEvent.prototype.getPath = function () {\r\n        var ref = this.snapshot.getRef();\r\n        if (this.eventType === 'value') {\r\n            return ref.path;\r\n        }\r\n        else {\r\n            return ref.getParent().path;\r\n        }\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    DataEvent.prototype.getEventType = function () {\r\n        return this.eventType;\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    DataEvent.prototype.getEventRunner = function () {\r\n        return this.eventRegistration.getEventRunner(this);\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    DataEvent.prototype.toString = function () {\r\n        return (this.getPath().toString() +\r\n            ':' +\r\n            this.eventType +\r\n            ':' +\r\n            util.stringify(this.snapshot.exportVal()));\r\n    };\r\n    return DataEvent;\r\n}());\r\nvar CancelEvent = /** @class */ (function () {\r\n    /**\r\n     * @param {EventRegistration} eventRegistration\r\n     * @param {Error} error\r\n     * @param {!Path} path\r\n     */\r\n    function CancelEvent(eventRegistration, error, path) {\r\n        this.eventRegistration = eventRegistration;\r\n        this.error = error;\r\n        this.path = path;\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    CancelEvent.prototype.getPath = function () {\r\n        return this.path;\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    CancelEvent.prototype.getEventType = function () {\r\n        return 'cancel';\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    CancelEvent.prototype.getEventRunner = function () {\r\n        return this.eventRegistration.getEventRunner(this);\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    CancelEvent.prototype.toString = function () {\r\n        return this.path.toString() + ':cancel';\r\n    };\r\n    return CancelEvent;\r\n}());\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Represents registration for 'value' events.\r\n */\r\nvar ValueEventRegistration = /** @class */ (function () {\r\n    /**\r\n     * @param {?function(!DataSnapshot)} callback_\r\n     * @param {?function(Error)} cancelCallback_\r\n     * @param {?Object} context_\r\n     */\r\n    function ValueEventRegistration(callback_, cancelCallback_, context_) {\r\n        this.callback_ = callback_;\r\n        this.cancelCallback_ = cancelCallback_;\r\n        this.context_ = context_;\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    ValueEventRegistration.prototype.respondsTo = function (eventType) {\r\n        return eventType === 'value';\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    ValueEventRegistration.prototype.createEvent = function (change, query) {\r\n        var index = query.getQueryParams().getIndex();\r\n        return new DataEvent('value', this, new DataSnapshot(change.snapshotNode, query.getRef(), index));\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    ValueEventRegistration.prototype.getEventRunner = function (eventData) {\r\n        var ctx = this.context_;\r\n        if (eventData.getEventType() === 'cancel') {\r\n            util.assert(this.cancelCallback_, 'Raising a cancel event on a listener with no cancel callback');\r\n            var cancelCB_1 = this.cancelCallback_;\r\n            return function () {\r\n                // We know that error exists, we checked above that this is a cancel event\r\n                cancelCB_1.call(ctx, eventData.error);\r\n            };\r\n        }\r\n        else {\r\n            var cb_1 = this.callback_;\r\n            return function () {\r\n                cb_1.call(ctx, eventData.snapshot);\r\n            };\r\n        }\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    ValueEventRegistration.prototype.createCancelEvent = function (error, path) {\r\n        if (this.cancelCallback_) {\r\n            return new CancelEvent(this, error, path);\r\n        }\r\n        else {\r\n            return null;\r\n        }\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    ValueEventRegistration.prototype.matches = function (other) {\r\n        if (!(other instanceof ValueEventRegistration)) {\r\n            return false;\r\n        }\r\n        else if (!other.callback_ || !this.callback_) {\r\n            // If no callback specified, we consider it to match any callback.\r\n            return true;\r\n        }\r\n        else {\r\n            return (other.callback_ === this.callback_ && other.context_ === this.context_);\r\n        }\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    ValueEventRegistration.prototype.hasAnyCallback = function () {\r\n        return this.callback_ !== null;\r\n    };\r\n    return ValueEventRegistration;\r\n}());\r\n/**\r\n * Represents the registration of 1 or more child_xxx events.\r\n *\r\n * Currently, it is always exactly 1 child_xxx event, but the idea is we might let you\r\n * register a group of callbacks together in the future.\r\n *\r\n * @constructor\r\n * @implements {EventRegistration}\r\n */\r\nvar ChildEventRegistration = /** @class */ (function () {\r\n    /**\r\n     * @param {?Object.<string, function(!DataSnapshot, ?string=)>} callbacks_\r\n     * @param {?function(Error)} cancelCallback_\r\n     * @param {Object=} context_\r\n     */\r\n    function ChildEventRegistration(callbacks_, cancelCallback_, context_) {\r\n        this.callbacks_ = callbacks_;\r\n        this.cancelCallback_ = cancelCallback_;\r\n        this.context_ = context_;\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    ChildEventRegistration.prototype.respondsTo = function (eventType) {\r\n        var eventToCheck = eventType === 'children_added' ? 'child_added' : eventType;\r\n        eventToCheck =\r\n            eventToCheck === 'children_removed' ? 'child_removed' : eventToCheck;\r\n        return util.contains(this.callbacks_, eventToCheck);\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    ChildEventRegistration.prototype.createCancelEvent = function (error, path) {\r\n        if (this.cancelCallback_) {\r\n            return new CancelEvent(this, error, path);\r\n        }\r\n        else {\r\n            return null;\r\n        }\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    ChildEventRegistration.prototype.createEvent = function (change, query) {\r\n        util.assert(change.childName != null, 'Child events should have a childName.');\r\n        var ref = query.getRef().child(/** @type {!string} */ (change.childName));\r\n        var index = query.getQueryParams().getIndex();\r\n        return new DataEvent(change.type, this, new DataSnapshot(change.snapshotNode, ref, index), change.prevName);\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    ChildEventRegistration.prototype.getEventRunner = function (eventData) {\r\n        var ctx = this.context_;\r\n        if (eventData.getEventType() === 'cancel') {\r\n            util.assert(this.cancelCallback_, 'Raising a cancel event on a listener with no cancel callback');\r\n            var cancelCB_2 = this.cancelCallback_;\r\n            return function () {\r\n                // We know that error exists, we checked above that this is a cancel event\r\n                cancelCB_2.call(ctx, eventData.error);\r\n            };\r\n        }\r\n        else {\r\n            var cb_2 = this.callbacks_[eventData.eventType];\r\n            return function () {\r\n                cb_2.call(ctx, eventData.snapshot, eventData.prevName);\r\n            };\r\n        }\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    ChildEventRegistration.prototype.matches = function (other) {\r\n        if (other instanceof ChildEventRegistration) {\r\n            if (!this.callbacks_ || !other.callbacks_) {\r\n                return true;\r\n            }\r\n            else if (this.context_ === other.context_) {\r\n                var otherCount = util.getCount(other.callbacks_);\r\n                var thisCount = util.getCount(this.callbacks_);\r\n                if (otherCount === thisCount) {\r\n                    // If count is 1, do an exact match on eventType, if either is defined but null, it's a match.\r\n                    //  If event types don't match, not a match\r\n                    // If count is not 1, exact match across all\r\n                    if (otherCount === 1) {\r\n                        var otherKey /** @type {!string} */ = util.getAnyKey(other.callbacks_);\r\n                        var thisKey /** @type {!string} */ = util.getAnyKey(this.callbacks_);\r\n                        return (thisKey === otherKey &&\r\n                            (!other.callbacks_[otherKey] ||\r\n                                !this.callbacks_[thisKey] ||\r\n                                other.callbacks_[otherKey] === this.callbacks_[thisKey]));\r\n                    }\r\n                    else {\r\n                        // Exact match on each key.\r\n                        return util.every(this.callbacks_, function (eventType, cb) { return other.callbacks_[eventType] === cb; });\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return false;\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    ChildEventRegistration.prototype.hasAnyCallback = function () {\r\n        return this.callbacks_ !== null;\r\n    };\r\n    return ChildEventRegistration;\r\n}());\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nvar __referenceConstructor;\r\n/**\r\n * A Query represents a filter to be applied to a firebase location.  This object purely represents the\r\n * query expression (and exposes our public API to build the query).  The actual query logic is in ViewBase.js.\r\n *\r\n * Since every Firebase reference is a query, Firebase inherits from this object.\r\n */\r\nvar Query = /** @class */ (function () {\r\n    function Query(repo, path, queryParams_, orderByCalled_) {\r\n        this.repo = repo;\r\n        this.path = path;\r\n        this.queryParams_ = queryParams_;\r\n        this.orderByCalled_ = orderByCalled_;\r\n    }\r\n    Object.defineProperty(Query, \"__referenceConstructor\", {\r\n        get: function () {\r\n            util.assert(__referenceConstructor, 'Reference.ts has not been loaded');\r\n            return __referenceConstructor;\r\n        },\r\n        set: function (val) {\r\n            __referenceConstructor = val;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Validates start/end values for queries.\r\n     * @param {!QueryParams} params\r\n     * @private\r\n     */\r\n    Query.validateQueryEndpoints_ = function (params) {\r\n        var startNode = null;\r\n        var endNode = null;\r\n        if (params.hasStart()) {\r\n            startNode = params.getIndexStartValue();\r\n        }\r\n        if (params.hasEnd()) {\r\n            endNode = params.getIndexEndValue();\r\n        }\r\n        if (params.getIndex() === KEY_INDEX) {\r\n            var tooManyArgsError = 'Query: When ordering by key, you may only pass one argument to ' +\r\n                'startAt(), endAt(), or equalTo().';\r\n            var wrongArgTypeError = 'Query: When ordering by key, the argument passed to startAt(), endAt(),' +\r\n                'or equalTo() must be a string.';\r\n            if (params.hasStart()) {\r\n                var startName = params.getIndexStartName();\r\n                if (startName != MIN_NAME) {\r\n                    throw new Error(tooManyArgsError);\r\n                }\r\n                else if (typeof startNode !== 'string') {\r\n                    throw new Error(wrongArgTypeError);\r\n                }\r\n            }\r\n            if (params.hasEnd()) {\r\n                var endName = params.getIndexEndName();\r\n                if (endName != MAX_NAME) {\r\n                    throw new Error(tooManyArgsError);\r\n                }\r\n                else if (typeof endNode !== 'string') {\r\n                    throw new Error(wrongArgTypeError);\r\n                }\r\n            }\r\n        }\r\n        else if (params.getIndex() === PRIORITY_INDEX) {\r\n            if ((startNode != null && !isValidPriority(startNode)) ||\r\n                (endNode != null && !isValidPriority(endNode))) {\r\n                throw new Error('Query: When ordering by priority, the first argument passed to startAt(), ' +\r\n                    'endAt(), or equalTo() must be a valid priority value (null, a number, or a string).');\r\n            }\r\n        }\r\n        else {\r\n            util.assert(params.getIndex() instanceof PathIndex ||\r\n                params.getIndex() === VALUE_INDEX, 'unknown index type.');\r\n            if ((startNode != null && typeof startNode === 'object') ||\r\n                (endNode != null && typeof endNode === 'object')) {\r\n                throw new Error('Query: First argument passed to startAt(), endAt(), or equalTo() cannot be ' +\r\n                    'an object.');\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * Validates that limit* has been called with the correct combination of parameters\r\n     * @param {!QueryParams} params\r\n     * @private\r\n     */\r\n    Query.validateLimit_ = function (params) {\r\n        if (params.hasStart() &&\r\n            params.hasEnd() &&\r\n            params.hasLimit() &&\r\n            !params.hasAnchoredLimit()) {\r\n            throw new Error(\"Query: Can't combine startAt(), endAt(), and limit(). Use limitToFirst() or limitToLast() instead.\");\r\n        }\r\n    };\r\n    /**\r\n     * Validates that no other order by call has been made\r\n     * @param {!string} fnName\r\n     * @private\r\n     */\r\n    Query.prototype.validateNoPreviousOrderByCall_ = function (fnName) {\r\n        if (this.orderByCalled_ === true) {\r\n            throw new Error(fnName + \": You can't combine multiple orderBy calls.\");\r\n        }\r\n    };\r\n    /**\r\n     * @return {!QueryParams}\r\n     */\r\n    Query.prototype.getQueryParams = function () {\r\n        return this.queryParams_;\r\n    };\r\n    /**\r\n     * @return {!Reference}\r\n     */\r\n    Query.prototype.getRef = function () {\r\n        util.validateArgCount('Query.ref', 0, 0, arguments.length);\r\n        // This is a slight hack. We cannot goog.require('fb.api.Firebase'), since Firebase requires fb.api.Query.\r\n        // However, we will always export 'Firebase' to the global namespace, so it's guaranteed to exist by the time this\r\n        // method gets called.\r\n        return new Query.__referenceConstructor(this.repo, this.path);\r\n    };\r\n    /**\r\n     * @param {!string} eventType\r\n     * @param {!function(DataSnapshot, string=)} callback\r\n     * @param {(function(Error)|Object)=} cancelCallbackOrContext\r\n     * @param {Object=} context\r\n     * @return {!function(DataSnapshot, string=)}\r\n     */\r\n    Query.prototype.on = function (eventType, callback, cancelCallbackOrContext, context) {\r\n        util.validateArgCount('Query.on', 2, 4, arguments.length);\r\n        validateEventType('Query.on', 1, eventType, false);\r\n        util.validateCallback('Query.on', 2, callback, false);\r\n        var ret = Query.getCancelAndContextArgs_('Query.on', cancelCallbackOrContext, context);\r\n        if (eventType === 'value') {\r\n            this.onValueEvent(callback, ret.cancel, ret.context);\r\n        }\r\n        else {\r\n            var callbacks = {};\r\n            callbacks[eventType] = callback;\r\n            this.onChildEvent(callbacks, ret.cancel, ret.context);\r\n        }\r\n        return callback;\r\n    };\r\n    /**\r\n     * @param {!function(!DataSnapshot)} callback\r\n     * @param {?function(Error)} cancelCallback\r\n     * @param {?Object} context\r\n     * @protected\r\n     */\r\n    Query.prototype.onValueEvent = function (callback, cancelCallback, context) {\r\n        var container = new ValueEventRegistration(callback, cancelCallback || null, context || null);\r\n        this.repo.addEventCallbackForQuery(this, container);\r\n    };\r\n    /**\r\n     * @param {!Object.<string, !function(!DataSnapshot, ?string)>} callbacks\r\n     * @param {?function(Error)} cancelCallback\r\n     * @param {?Object} context\r\n     * @protected\r\n     */\r\n    Query.prototype.onChildEvent = function (callbacks, cancelCallback, context) {\r\n        var container = new ChildEventRegistration(callbacks, cancelCallback, context);\r\n        this.repo.addEventCallbackForQuery(this, container);\r\n    };\r\n    /**\r\n     * @param {string=} eventType\r\n     * @param {(function(!DataSnapshot, ?string=))=} callback\r\n     * @param {Object=} context\r\n     */\r\n    Query.prototype.off = function (eventType, callback, context) {\r\n        util.validateArgCount('Query.off', 0, 3, arguments.length);\r\n        validateEventType('Query.off', 1, eventType, true);\r\n        util.validateCallback('Query.off', 2, callback, true);\r\n        util.validateContextObject('Query.off', 3, context, true);\r\n        var container = null;\r\n        var callbacks = null;\r\n        if (eventType === 'value') {\r\n            var valueCallback = callback || null;\r\n            container = new ValueEventRegistration(valueCallback, null, context || null);\r\n        }\r\n        else if (eventType) {\r\n            if (callback) {\r\n                callbacks = {};\r\n                callbacks[eventType] = callback;\r\n            }\r\n            container = new ChildEventRegistration(callbacks, null, context || null);\r\n        }\r\n        this.repo.removeEventCallbackForQuery(this, container);\r\n    };\r\n    /**\r\n     * Attaches a listener, waits for the first event, and then removes the listener\r\n     * @param {!string} eventType\r\n     * @param {!function(!DataSnapshot, string=)} userCallback\r\n     * @param cancelOrContext\r\n     * @param context\r\n     * @return {!firebase.Promise}\r\n     */\r\n    Query.prototype.once = function (eventType, userCallback, cancelOrContext, context) {\r\n        var _this = this;\r\n        util.validateArgCount('Query.once', 1, 4, arguments.length);\r\n        validateEventType('Query.once', 1, eventType, false);\r\n        util.validateCallback('Query.once', 2, userCallback, true);\r\n        var ret = Query.getCancelAndContextArgs_('Query.once', cancelOrContext, context);\r\n        // TODO: Implement this more efficiently (in particular, use 'get' wire protocol for 'value' event)\r\n        // TODO: consider actually wiring the callbacks into the promise. We cannot do this without a breaking change\r\n        // because the API currently expects callbacks will be called synchronously if the data is cached, but this is\r\n        // against the Promise specification.\r\n        var firstCall = true;\r\n        var deferred = new util.Deferred();\r\n        // A dummy error handler in case a user wasn't expecting promises\r\n        deferred.promise.catch(function () { });\r\n        var onceCallback = function (snapshot) {\r\n            // NOTE: Even though we unsubscribe, we may get called multiple times if a single action (e.g. set() with JSON)\r\n            // triggers multiple events (e.g. child_added or child_changed).\r\n            if (firstCall) {\r\n                firstCall = false;\r\n                _this.off(eventType, onceCallback);\r\n                if (userCallback) {\r\n                    userCallback.bind(ret.context)(snapshot);\r\n                }\r\n                deferred.resolve(snapshot);\r\n            }\r\n        };\r\n        this.on(eventType, onceCallback, \r\n        /*cancel=*/ function (err) {\r\n            _this.off(eventType, onceCallback);\r\n            if (ret.cancel)\r\n                ret.cancel.bind(ret.context)(err);\r\n            deferred.reject(err);\r\n        });\r\n        return deferred.promise;\r\n    };\r\n    /**\r\n     * Set a limit and anchor it to the start of the window.\r\n     * @param {!number} limit\r\n     * @return {!Query}\r\n     */\r\n    Query.prototype.limitToFirst = function (limit) {\r\n        util.validateArgCount('Query.limitToFirst', 1, 1, arguments.length);\r\n        if (typeof limit !== 'number' ||\r\n            Math.floor(limit) !== limit ||\r\n            limit <= 0) {\r\n            throw new Error('Query.limitToFirst: First argument must be a positive integer.');\r\n        }\r\n        if (this.queryParams_.hasLimit()) {\r\n            throw new Error('Query.limitToFirst: Limit was already set (by another call to limit, ' +\r\n                'limitToFirst, or limitToLast).');\r\n        }\r\n        return new Query(this.repo, this.path, this.queryParams_.limitToFirst(limit), this.orderByCalled_);\r\n    };\r\n    /**\r\n     * Set a limit and anchor it to the end of the window.\r\n     * @param {!number} limit\r\n     * @return {!Query}\r\n     */\r\n    Query.prototype.limitToLast = function (limit) {\r\n        util.validateArgCount('Query.limitToLast', 1, 1, arguments.length);\r\n        if (typeof limit !== 'number' ||\r\n            Math.floor(limit) !== limit ||\r\n            limit <= 0) {\r\n            throw new Error('Query.limitToLast: First argument must be a positive integer.');\r\n        }\r\n        if (this.queryParams_.hasLimit()) {\r\n            throw new Error('Query.limitToLast: Limit was already set (by another call to limit, ' +\r\n                'limitToFirst, or limitToLast).');\r\n        }\r\n        return new Query(this.repo, this.path, this.queryParams_.limitToLast(limit), this.orderByCalled_);\r\n    };\r\n    /**\r\n     * Given a child path, return a new query ordered by the specified grandchild path.\r\n     * @param {!string} path\r\n     * @return {!Query}\r\n     */\r\n    Query.prototype.orderByChild = function (path) {\r\n        util.validateArgCount('Query.orderByChild', 1, 1, arguments.length);\r\n        if (path === '$key') {\r\n            throw new Error('Query.orderByChild: \"$key\" is invalid.  Use Query.orderByKey() instead.');\r\n        }\r\n        else if (path === '$priority') {\r\n            throw new Error('Query.orderByChild: \"$priority\" is invalid.  Use Query.orderByPriority() instead.');\r\n        }\r\n        else if (path === '$value') {\r\n            throw new Error('Query.orderByChild: \"$value\" is invalid.  Use Query.orderByValue() instead.');\r\n        }\r\n        validatePathString('Query.orderByChild', 1, path, false);\r\n        this.validateNoPreviousOrderByCall_('Query.orderByChild');\r\n        var parsedPath = new Path(path);\r\n        if (parsedPath.isEmpty()) {\r\n            throw new Error('Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.');\r\n        }\r\n        var index = new PathIndex(parsedPath);\r\n        var newParams = this.queryParams_.orderBy(index);\r\n        Query.validateQueryEndpoints_(newParams);\r\n        return new Query(this.repo, this.path, newParams, /*orderByCalled=*/ true);\r\n    };\r\n    /**\r\n     * Return a new query ordered by the KeyIndex\r\n     * @return {!Query}\r\n     */\r\n    Query.prototype.orderByKey = function () {\r\n        util.validateArgCount('Query.orderByKey', 0, 0, arguments.length);\r\n        this.validateNoPreviousOrderByCall_('Query.orderByKey');\r\n        var newParams = this.queryParams_.orderBy(KEY_INDEX);\r\n        Query.validateQueryEndpoints_(newParams);\r\n        return new Query(this.repo, this.path, newParams, /*orderByCalled=*/ true);\r\n    };\r\n    /**\r\n     * Return a new query ordered by the PriorityIndex\r\n     * @return {!Query}\r\n     */\r\n    Query.prototype.orderByPriority = function () {\r\n        util.validateArgCount('Query.orderByPriority', 0, 0, arguments.length);\r\n        this.validateNoPreviousOrderByCall_('Query.orderByPriority');\r\n        var newParams = this.queryParams_.orderBy(PRIORITY_INDEX);\r\n        Query.validateQueryEndpoints_(newParams);\r\n        return new Query(this.repo, this.path, newParams, /*orderByCalled=*/ true);\r\n    };\r\n    /**\r\n     * Return a new query ordered by the ValueIndex\r\n     * @return {!Query}\r\n     */\r\n    Query.prototype.orderByValue = function () {\r\n        util.validateArgCount('Query.orderByValue', 0, 0, arguments.length);\r\n        this.validateNoPreviousOrderByCall_('Query.orderByValue');\r\n        var newParams = this.queryParams_.orderBy(VALUE_INDEX);\r\n        Query.validateQueryEndpoints_(newParams);\r\n        return new Query(this.repo, this.path, newParams, /*orderByCalled=*/ true);\r\n    };\r\n    /**\r\n     * @param {number|string|boolean|null} value\r\n     * @param {?string=} name\r\n     * @return {!Query}\r\n     */\r\n    Query.prototype.startAt = function (value, name) {\r\n        if (value === void 0) { value = null; }\r\n        util.validateArgCount('Query.startAt', 0, 2, arguments.length);\r\n        validateFirebaseDataArg('Query.startAt', 1, value, this.path, true);\r\n        validateKey('Query.startAt', 2, name, true);\r\n        var newParams = this.queryParams_.startAt(value, name);\r\n        Query.validateLimit_(newParams);\r\n        Query.validateQueryEndpoints_(newParams);\r\n        if (this.queryParams_.hasStart()) {\r\n            throw new Error('Query.startAt: Starting point was already set (by another call to startAt ' +\r\n                'or equalTo).');\r\n        }\r\n        // Calling with no params tells us to start at the beginning.\r\n        if (value === undefined) {\r\n            value = null;\r\n            name = null;\r\n        }\r\n        return new Query(this.repo, this.path, newParams, this.orderByCalled_);\r\n    };\r\n    /**\r\n     * @param {number|string|boolean|null} value\r\n     * @param {?string=} name\r\n     * @return {!Query}\r\n     */\r\n    Query.prototype.endAt = function (value, name) {\r\n        if (value === void 0) { value = null; }\r\n        util.validateArgCount('Query.endAt', 0, 2, arguments.length);\r\n        validateFirebaseDataArg('Query.endAt', 1, value, this.path, true);\r\n        validateKey('Query.endAt', 2, name, true);\r\n        var newParams = this.queryParams_.endAt(value, name);\r\n        Query.validateLimit_(newParams);\r\n        Query.validateQueryEndpoints_(newParams);\r\n        if (this.queryParams_.hasEnd()) {\r\n            throw new Error('Query.endAt: Ending point was already set (by another call to endAt or ' +\r\n                'equalTo).');\r\n        }\r\n        return new Query(this.repo, this.path, newParams, this.orderByCalled_);\r\n    };\r\n    /**\r\n     * Load the selection of children with exactly the specified value, and, optionally,\r\n     * the specified name.\r\n     * @param {number|string|boolean|null} value\r\n     * @param {string=} name\r\n     * @return {!Query}\r\n     */\r\n    Query.prototype.equalTo = function (value, name) {\r\n        util.validateArgCount('Query.equalTo', 1, 2, arguments.length);\r\n        validateFirebaseDataArg('Query.equalTo', 1, value, this.path, false);\r\n        validateKey('Query.equalTo', 2, name, true);\r\n        if (this.queryParams_.hasStart()) {\r\n            throw new Error('Query.equalTo: Starting point was already set (by another call to startAt or ' +\r\n                'equalTo).');\r\n        }\r\n        if (this.queryParams_.hasEnd()) {\r\n            throw new Error('Query.equalTo: Ending point was already set (by another call to endAt or ' +\r\n                'equalTo).');\r\n        }\r\n        return this.startAt(value, name).endAt(value, name);\r\n    };\r\n    /**\r\n     * @return {!string} URL for this location.\r\n     */\r\n    Query.prototype.toString = function () {\r\n        util.validateArgCount('Query.toString', 0, 0, arguments.length);\r\n        return this.repo.toString() + this.path.toUrlEncodedString();\r\n    };\r\n    // Do not create public documentation. This is intended to make JSON serialization work but is otherwise unnecessary\r\n    // for end-users.\r\n    Query.prototype.toJSON = function () {\r\n        // An optional spacer argument is unnecessary for a string.\r\n        util.validateArgCount('Query.toJSON', 0, 1, arguments.length);\r\n        return this.toString();\r\n    };\r\n    /**\r\n     * An object representation of the query parameters used by this Query.\r\n     * @return {!Object}\r\n     */\r\n    Query.prototype.queryObject = function () {\r\n        return this.queryParams_.getQueryObject();\r\n    };\r\n    /**\r\n     * @return {!string}\r\n     */\r\n    Query.prototype.queryIdentifier = function () {\r\n        var obj = this.queryObject();\r\n        var id = ObjectToUniqueKey(obj);\r\n        return id === '{}' ? 'default' : id;\r\n    };\r\n    /**\r\n     * Return true if this query and the provided query are equivalent; otherwise, return false.\r\n     * @param {Query} other\r\n     * @return {boolean}\r\n     */\r\n    Query.prototype.isEqual = function (other) {\r\n        util.validateArgCount('Query.isEqual', 1, 1, arguments.length);\r\n        if (!(other instanceof Query)) {\r\n            var error$$1 = 'Query.isEqual failed: First argument must be an instance of firebase.database.Query.';\r\n            throw new Error(error$$1);\r\n        }\r\n        var sameRepo = this.repo === other.repo;\r\n        var samePath = this.path.equals(other.path);\r\n        var sameQueryIdentifier = this.queryIdentifier() === other.queryIdentifier();\r\n        return sameRepo && samePath && sameQueryIdentifier;\r\n    };\r\n    /**\r\n     * Helper used by .on and .once to extract the context and or cancel arguments.\r\n     * @param {!string} fnName The function name (on or once)\r\n     * @param {(function(Error)|Object)=} cancelOrContext\r\n     * @param {Object=} context\r\n     * @return {{cancel: ?function(Error), context: ?Object}}\r\n     * @private\r\n     */\r\n    Query.getCancelAndContextArgs_ = function (fnName, cancelOrContext, context) {\r\n        var ret = { cancel: null, context: null };\r\n        if (cancelOrContext && context) {\r\n            ret.cancel = cancelOrContext;\r\n            util.validateCallback(fnName, 3, ret.cancel, true);\r\n            ret.context = context;\r\n            util.validateContextObject(fnName, 4, ret.context, true);\r\n        }\r\n        else if (cancelOrContext) {\r\n            // we have either a cancel callback or a context.\r\n            if (typeof cancelOrContext === 'object' && cancelOrContext !== null) {\r\n                // it's a context!\r\n                ret.context = cancelOrContext;\r\n            }\r\n            else if (typeof cancelOrContext === 'function') {\r\n                ret.cancel = cancelOrContext;\r\n            }\r\n            else {\r\n                throw new Error(util.errorPrefix(fnName, 3, true) +\r\n                    ' must either be a cancel callback or a context object.');\r\n            }\r\n        }\r\n        return ret;\r\n    };\r\n    Object.defineProperty(Query.prototype, \"ref\", {\r\n        get: function () {\r\n            return this.getRef();\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return Query;\r\n}());\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Implements a set with a count of elements.\r\n *\r\n * @template K, V\r\n */\r\nvar CountedSet = /** @class */ (function () {\r\n    function CountedSet() {\r\n        this.set = {};\r\n    }\r\n    /**\r\n     * @param {!K} item\r\n     * @param {V} val\r\n     */\r\n    CountedSet.prototype.add = function (item, val) {\r\n        this.set[item] = val !== null ? val : true;\r\n    };\r\n    /**\r\n     * @param {!K} key\r\n     * @return {boolean}\r\n     */\r\n    CountedSet.prototype.contains = function (key) {\r\n        return util.contains(this.set, key);\r\n    };\r\n    /**\r\n     * @param {!K} item\r\n     * @return {V}\r\n     */\r\n    CountedSet.prototype.get = function (item) {\r\n        return this.contains(item) ? this.set[item] : undefined;\r\n    };\r\n    /**\r\n     * @param {!K} item\r\n     */\r\n    CountedSet.prototype.remove = function (item) {\r\n        delete this.set[item];\r\n    };\r\n    /**\r\n     * Deletes everything in the set\r\n     */\r\n    CountedSet.prototype.clear = function () {\r\n        this.set = {};\r\n    };\r\n    /**\r\n     * True if there's nothing in the set\r\n     * @return {boolean}\r\n     */\r\n    CountedSet.prototype.isEmpty = function () {\r\n        return util.isEmpty(this.set);\r\n    };\r\n    /**\r\n     * @return {number} The number of items in the set\r\n     */\r\n    CountedSet.prototype.count = function () {\r\n        return util.getCount(this.set);\r\n    };\r\n    /**\r\n     * Run a function on each k,v pair in the set\r\n     * @param {function(K, V)} fn\r\n     */\r\n    CountedSet.prototype.each = function (fn) {\r\n        util.forEach(this.set, function (k, v) { return fn(k, v); });\r\n    };\r\n    /**\r\n     * Mostly for debugging\r\n     * @return {Array.<K>} The keys present in this CountedSet\r\n     */\r\n    CountedSet.prototype.keys = function () {\r\n        var keys = [];\r\n        util.forEach(this.set, function (k) {\r\n            keys.push(k);\r\n        });\r\n        return keys;\r\n    };\r\n    return CountedSet;\r\n}());\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Helper class to store a sparse set of snapshots.\r\n *\r\n * @constructor\r\n */\r\nvar SparseSnapshotTree = /** @class */ (function () {\r\n    function SparseSnapshotTree() {\r\n        /**\r\n         * @private\r\n         * @type {Node}\r\n         */\r\n        this.value_ = null;\r\n        /**\r\n         * @private\r\n         * @type {CountedSet}\r\n         */\r\n        this.children_ = null;\r\n    }\r\n    /**\r\n     * Gets the node stored at the given path if one exists.\r\n     *\r\n     * @param {!Path} path Path to look up snapshot for.\r\n     * @return {?Node} The retrieved node, or null.\r\n     */\r\n    SparseSnapshotTree.prototype.find = function (path) {\r\n        if (this.value_ != null) {\r\n            return this.value_.getChild(path);\r\n        }\r\n        else if (!path.isEmpty() && this.children_ != null) {\r\n            var childKey = path.getFront();\r\n            path = path.popFront();\r\n            if (this.children_.contains(childKey)) {\r\n                var childTree = this.children_.get(childKey);\r\n                return childTree.find(path);\r\n            }\r\n            else {\r\n                return null;\r\n            }\r\n        }\r\n        else {\r\n            return null;\r\n        }\r\n    };\r\n    /**\r\n     * Stores the given node at the specified path. If there is already a node\r\n     * at a shallower path, it merges the new data into that snapshot node.\r\n     *\r\n     * @param {!Path} path Path to look up snapshot for.\r\n     * @param {!Node} data The new data, or null.\r\n     */\r\n    SparseSnapshotTree.prototype.remember = function (path, data) {\r\n        if (path.isEmpty()) {\r\n            this.value_ = data;\r\n            this.children_ = null;\r\n        }\r\n        else if (this.value_ !== null) {\r\n            this.value_ = this.value_.updateChild(path, data);\r\n        }\r\n        else {\r\n            if (this.children_ == null) {\r\n                this.children_ = new CountedSet();\r\n            }\r\n            var childKey = path.getFront();\r\n            if (!this.children_.contains(childKey)) {\r\n                this.children_.add(childKey, new SparseSnapshotTree());\r\n            }\r\n            var child = this.children_.get(childKey);\r\n            path = path.popFront();\r\n            child.remember(path, data);\r\n        }\r\n    };\r\n    /**\r\n     * Purge the data at path from the cache.\r\n     *\r\n     * @param {!Path} path Path to look up snapshot for.\r\n     * @return {boolean} True if this node should now be removed.\r\n     */\r\n    SparseSnapshotTree.prototype.forget = function (path) {\r\n        if (path.isEmpty()) {\r\n            this.value_ = null;\r\n            this.children_ = null;\r\n            return true;\r\n        }\r\n        else {\r\n            if (this.value_ !== null) {\r\n                if (this.value_.isLeafNode()) {\r\n                    // We're trying to forget a node that doesn't exist\r\n                    return false;\r\n                }\r\n                else {\r\n                    var value = this.value_;\r\n                    this.value_ = null;\r\n                    var self_1 = this;\r\n                    value.forEachChild(PRIORITY_INDEX, function (key, tree) {\r\n                        self_1.remember(new Path(key), tree);\r\n                    });\r\n                    return this.forget(path);\r\n                }\r\n            }\r\n            else if (this.children_ !== null) {\r\n                var childKey = path.getFront();\r\n                path = path.popFront();\r\n                if (this.children_.contains(childKey)) {\r\n                    var safeToRemove = this.children_.get(childKey).forget(path);\r\n                    if (safeToRemove) {\r\n                        this.children_.remove(childKey);\r\n                    }\r\n                }\r\n                if (this.children_.isEmpty()) {\r\n                    this.children_ = null;\r\n                    return true;\r\n                }\r\n                else {\r\n                    return false;\r\n                }\r\n            }\r\n            else {\r\n                return true;\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * Recursively iterates through all of the stored tree and calls the\r\n     * callback on each one.\r\n     *\r\n     * @param {!Path} prefixPath Path to look up node for.\r\n     * @param {!Function} func The function to invoke for each tree.\r\n     */\r\n    SparseSnapshotTree.prototype.forEachTree = function (prefixPath, func) {\r\n        if (this.value_ !== null) {\r\n            func(prefixPath, this.value_);\r\n        }\r\n        else {\r\n            this.forEachChild(function (key, tree) {\r\n                var path = new Path(prefixPath.toString() + '/' + key);\r\n                tree.forEachTree(path, func);\r\n            });\r\n        }\r\n    };\r\n    /**\r\n     * Iterates through each immediate child and triggers the callback.\r\n     *\r\n     * @param {!Function} func The function to invoke for each child.\r\n     */\r\n    SparseSnapshotTree.prototype.forEachChild = function (func) {\r\n        if (this.children_ !== null) {\r\n            this.children_.each(function (key, tree) {\r\n                func(key, tree);\r\n            });\r\n        }\r\n    };\r\n    return SparseSnapshotTree;\r\n}());\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Generate placeholders for deferred values.\r\n * @param {?Object} values\r\n * @return {!Object}\r\n */\r\nvar generateWithValues = function (values) {\r\n    values = values || {};\r\n    values['timestamp'] = values['timestamp'] || new Date().getTime();\r\n    return values;\r\n};\r\n/**\r\n * Value to use when firing local events. When writing server values, fire\r\n * local events with an approximate value, otherwise return value as-is.\r\n * @param {(Object|string|number|boolean)} value\r\n * @param {!Object} serverValues\r\n * @return {!(string|number|boolean)}\r\n */\r\nvar resolveDeferredValue = function (value, serverValues) {\r\n    if (!value || typeof value !== 'object') {\r\n        return value;\r\n    }\r\n    else {\r\n        util.assert('.sv' in value, 'Unexpected leaf node or priority contents');\r\n        return serverValues[value['.sv']];\r\n    }\r\n};\r\n/**\r\n * Recursively replace all deferred values and priorities in the tree with the\r\n * specified generated replacement values.\r\n * @param {!SparseSnapshotTree} tree\r\n * @param {!Object} serverValues\r\n * @return {!SparseSnapshotTree}\r\n */\r\nvar resolveDeferredValueTree = function (tree, serverValues) {\r\n    var resolvedTree = new SparseSnapshotTree();\r\n    tree.forEachTree(new Path(''), function (path, node) {\r\n        resolvedTree.remember(path, resolveDeferredValueSnapshot(node, serverValues));\r\n    });\r\n    return resolvedTree;\r\n};\r\n/**\r\n * Recursively replace all deferred values and priorities in the node with the\r\n * specified generated replacement values.  If there are no server values in the node,\r\n * it'll be returned as-is.\r\n * @param {!Node} node\r\n * @param {!Object} serverValues\r\n * @return {!Node}\r\n */\r\nvar resolveDeferredValueSnapshot = function (node, serverValues) {\r\n    var rawPri = node.getPriority().val();\r\n    var priority = resolveDeferredValue(rawPri, serverValues);\r\n    var newNode;\r\n    if (node.isLeafNode()) {\r\n        var leafNode = node;\r\n        var value = resolveDeferredValue(leafNode.getValue(), serverValues);\r\n        if (value !== leafNode.getValue() ||\r\n            priority !== leafNode.getPriority().val()) {\r\n            return new LeafNode(value, nodeFromJSON$1(priority));\r\n        }\r\n        else {\r\n            return node;\r\n        }\r\n    }\r\n    else {\r\n        var childrenNode = node;\r\n        newNode = childrenNode;\r\n        if (priority !== childrenNode.getPriority().val()) {\r\n            newNode = newNode.updatePriority(new LeafNode(priority));\r\n        }\r\n        childrenNode.forEachChild(PRIORITY_INDEX, function (childName, childNode) {\r\n            var newChildNode = resolveDeferredValueSnapshot(childNode, serverValues);\r\n            if (newChildNode !== childNode) {\r\n                newNode = newNode.updateImmediateChild(childName, newChildNode);\r\n            }\r\n        });\r\n        return newNode;\r\n    }\r\n};\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n *\r\n * @enum\r\n */\r\nvar OperationType;\r\n(function (OperationType) {\r\n    OperationType[OperationType[\"OVERWRITE\"] = 0] = \"OVERWRITE\";\r\n    OperationType[OperationType[\"MERGE\"] = 1] = \"MERGE\";\r\n    OperationType[OperationType[\"ACK_USER_WRITE\"] = 2] = \"ACK_USER_WRITE\";\r\n    OperationType[OperationType[\"LISTEN_COMPLETE\"] = 3] = \"LISTEN_COMPLETE\";\r\n})(OperationType || (OperationType = {}));\r\n/**\r\n * @param {boolean} fromUser\r\n * @param {boolean} fromServer\r\n * @param {?string} queryId\r\n * @param {boolean} tagged\r\n * @constructor\r\n */\r\nvar OperationSource = /** @class */ (function () {\r\n    function OperationSource(fromUser, fromServer, queryId, tagged) {\r\n        this.fromUser = fromUser;\r\n        this.fromServer = fromServer;\r\n        this.queryId = queryId;\r\n        this.tagged = tagged;\r\n        util.assert(!tagged || fromServer, 'Tagged queries must be from server.');\r\n    }\r\n    /**\r\n     * @const\r\n     * @type {!OperationSource}\r\n     */\r\n    OperationSource.User = new OperationSource(\r\n    /*fromUser=*/ true, false, null, \r\n    /*tagged=*/ false);\r\n    /**\r\n     * @const\r\n     * @type {!OperationSource}\r\n     */\r\n    OperationSource.Server = new OperationSource(false, \r\n    /*fromServer=*/ true, null, \r\n    /*tagged=*/ false);\r\n    /**\r\n     * @param {string} queryId\r\n     * @return {!OperationSource}\r\n     */\r\n    OperationSource.forServerTaggedQuery = function (queryId) {\r\n        return new OperationSource(false, \r\n        /*fromServer=*/ true, queryId, \r\n        /*tagged=*/ true);\r\n    };\r\n    return OperationSource;\r\n}());\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nvar AckUserWrite = /** @class */ (function () {\r\n    /**\r\n     *\r\n     * @param {!Path} path\r\n     * @param {!ImmutableTree<!boolean>} affectedTree A tree containing true for each affected path. Affected paths can't overlap.\r\n     * @param {!boolean} revert\r\n     */\r\n    function AckUserWrite(\r\n    /**@inheritDoc */ path, \r\n    /**@inheritDoc */ affectedTree, \r\n    /**@inheritDoc */ revert) {\r\n        this.path = path;\r\n        this.affectedTree = affectedTree;\r\n        this.revert = revert;\r\n        /** @inheritDoc */\r\n        this.type = OperationType.ACK_USER_WRITE;\r\n        /** @inheritDoc */\r\n        this.source = OperationSource.User;\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    AckUserWrite.prototype.operationForChild = function (childName) {\r\n        if (!this.path.isEmpty()) {\r\n            util.assert(this.path.getFront() === childName, 'operationForChild called for unrelated child.');\r\n            return new AckUserWrite(this.path.popFront(), this.affectedTree, this.revert);\r\n        }\r\n        else if (this.affectedTree.value != null) {\r\n            util.assert(this.affectedTree.children.isEmpty(), 'affectedTree should not have overlapping affected paths.');\r\n            // All child locations are affected as well; just return same operation.\r\n            return this;\r\n        }\r\n        else {\r\n            var childTree = this.affectedTree.subtree(new Path(childName));\r\n            return new AckUserWrite(Path.Empty, childTree, this.revert);\r\n        }\r\n    };\r\n    return AckUserWrite;\r\n}());\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nvar emptyChildrenSingleton;\r\n/**\r\n * Singleton empty children collection.\r\n *\r\n * @const\r\n * @type {!SortedMap.<string, !ImmutableTree.<?>>}\r\n */\r\nvar EmptyChildren = function () {\r\n    if (!emptyChildrenSingleton) {\r\n        emptyChildrenSingleton = new SortedMap(stringCompare);\r\n    }\r\n    return emptyChildrenSingleton;\r\n};\r\n/**\r\n * A tree with immutable elements.\r\n */\r\nvar ImmutableTree = /** @class */ (function () {\r\n    /**\r\n     * @template T\r\n     * @param {?T} value\r\n     * @param {SortedMap.<string, !ImmutableTree.<T>>=} children\r\n     */\r\n    function ImmutableTree(value, children) {\r\n        if (children === void 0) { children = EmptyChildren(); }\r\n        this.value = value;\r\n        this.children = children;\r\n    }\r\n    /**\r\n     * @template T\r\n     * @param {!Object.<string, !T>} obj\r\n     * @return {!ImmutableTree.<!T>}\r\n     */\r\n    ImmutableTree.fromObject = function (obj) {\r\n        var tree = ImmutableTree.Empty;\r\n        util.forEach(obj, function (childPath, childSnap) {\r\n            tree = tree.set(new Path(childPath), childSnap);\r\n        });\r\n        return tree;\r\n    };\r\n    /**\r\n     * True if the value is empty and there are no children\r\n     * @return {boolean}\r\n     */\r\n    ImmutableTree.prototype.isEmpty = function () {\r\n        return this.value === null && this.children.isEmpty();\r\n    };\r\n    /**\r\n     * Given a path and predicate, return the first node and the path to that node\r\n     * where the predicate returns true.\r\n     *\r\n     * TODO Do a perf test -- If we're creating a bunch of {path: value:} objects\r\n     * on the way back out, it may be better to pass down a pathSoFar obj.\r\n     *\r\n     * @param {!Path} relativePath The remainder of the path\r\n     * @param {function(T):boolean} predicate The predicate to satisfy to return a\r\n     *   node\r\n     * @return {?{path:!Path, value:!T}}\r\n     */\r\n    ImmutableTree.prototype.findRootMostMatchingPathAndValue = function (relativePath, predicate) {\r\n        if (this.value != null && predicate(this.value)) {\r\n            return { path: Path.Empty, value: this.value };\r\n        }\r\n        else {\r\n            if (relativePath.isEmpty()) {\r\n                return null;\r\n            }\r\n            else {\r\n                var front = relativePath.getFront();\r\n                var child = this.children.get(front);\r\n                if (child !== null) {\r\n                    var childExistingPathAndValue = child.findRootMostMatchingPathAndValue(relativePath.popFront(), predicate);\r\n                    if (childExistingPathAndValue != null) {\r\n                        var fullPath = new Path(front).child(childExistingPathAndValue.path);\r\n                        return { path: fullPath, value: childExistingPathAndValue.value };\r\n                    }\r\n                    else {\r\n                        return null;\r\n                    }\r\n                }\r\n                else {\r\n                    return null;\r\n                }\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * Find, if it exists, the shortest subpath of the given path that points a defined\r\n     * value in the tree\r\n     * @param {!Path} relativePath\r\n     * @return {?{path: !Path, value: !T}}\r\n     */\r\n    ImmutableTree.prototype.findRootMostValueAndPath = function (relativePath) {\r\n        return this.findRootMostMatchingPathAndValue(relativePath, function () { return true; });\r\n    };\r\n    /**\r\n     * @param {!Path} relativePath\r\n     * @return {!ImmutableTree.<T>} The subtree at the given path\r\n     */\r\n    ImmutableTree.prototype.subtree = function (relativePath) {\r\n        if (relativePath.isEmpty()) {\r\n            return this;\r\n        }\r\n        else {\r\n            var front = relativePath.getFront();\r\n            var childTree = this.children.get(front);\r\n            if (childTree !== null) {\r\n                return childTree.subtree(relativePath.popFront());\r\n            }\r\n            else {\r\n                return ImmutableTree.Empty;\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * Sets a value at the specified path.\r\n     *\r\n     * @param {!Path} relativePath Path to set value at.\r\n     * @param {?T} toSet Value to set.\r\n     * @return {!ImmutableTree.<T>} Resulting tree.\r\n     */\r\n    ImmutableTree.prototype.set = function (relativePath, toSet) {\r\n        if (relativePath.isEmpty()) {\r\n            return new ImmutableTree(toSet, this.children);\r\n        }\r\n        else {\r\n            var front = relativePath.getFront();\r\n            var child = this.children.get(front) || ImmutableTree.Empty;\r\n            var newChild = child.set(relativePath.popFront(), toSet);\r\n            var newChildren = this.children.insert(front, newChild);\r\n            return new ImmutableTree(this.value, newChildren);\r\n        }\r\n    };\r\n    /**\r\n     * Removes the value at the specified path.\r\n     *\r\n     * @param {!Path} relativePath Path to value to remove.\r\n     * @return {!ImmutableTree.<T>} Resulting tree.\r\n     */\r\n    ImmutableTree.prototype.remove = function (relativePath) {\r\n        if (relativePath.isEmpty()) {\r\n            if (this.children.isEmpty()) {\r\n                return ImmutableTree.Empty;\r\n            }\r\n            else {\r\n                return new ImmutableTree(null, this.children);\r\n            }\r\n        }\r\n        else {\r\n            var front = relativePath.getFront();\r\n            var child = this.children.get(front);\r\n            if (child) {\r\n                var newChild = child.remove(relativePath.popFront());\r\n                var newChildren = void 0;\r\n                if (newChild.isEmpty()) {\r\n                    newChildren = this.children.remove(front);\r\n                }\r\n                else {\r\n                    newChildren = this.children.insert(front, newChild);\r\n                }\r\n                if (this.value === null && newChildren.isEmpty()) {\r\n                    return ImmutableTree.Empty;\r\n                }\r\n                else {\r\n                    return new ImmutableTree(this.value, newChildren);\r\n                }\r\n            }\r\n            else {\r\n                return this;\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * Gets a value from the tree.\r\n     *\r\n     * @param {!Path} relativePath Path to get value for.\r\n     * @return {?T} Value at path, or null.\r\n     */\r\n    ImmutableTree.prototype.get = function (relativePath) {\r\n        if (relativePath.isEmpty()) {\r\n            return this.value;\r\n        }\r\n        else {\r\n            var front = relativePath.getFront();\r\n            var child = this.children.get(front);\r\n            if (child) {\r\n                return child.get(relativePath.popFront());\r\n            }\r\n            else {\r\n                return null;\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * Replace the subtree at the specified path with the given new tree.\r\n     *\r\n     * @param {!Path} relativePath Path to replace subtree for.\r\n     * @param {!ImmutableTree} newTree New tree.\r\n     * @return {!ImmutableTree} Resulting tree.\r\n     */\r\n    ImmutableTree.prototype.setTree = function (relativePath, newTree) {\r\n        if (relativePath.isEmpty()) {\r\n            return newTree;\r\n        }\r\n        else {\r\n            var front = relativePath.getFront();\r\n            var child = this.children.get(front) || ImmutableTree.Empty;\r\n            var newChild = child.setTree(relativePath.popFront(), newTree);\r\n            var newChildren = void 0;\r\n            if (newChild.isEmpty()) {\r\n                newChildren = this.children.remove(front);\r\n            }\r\n            else {\r\n                newChildren = this.children.insert(front, newChild);\r\n            }\r\n            return new ImmutableTree(this.value, newChildren);\r\n        }\r\n    };\r\n    /**\r\n     * Performs a depth first fold on this tree. Transforms a tree into a single\r\n     * value, given a function that operates on the path to a node, an optional\r\n     * current value, and a map of child names to folded subtrees\r\n     * @template V\r\n     * @param {function(Path, ?T, Object.<string, V>):V} fn\r\n     * @return {V}\r\n     */\r\n    ImmutableTree.prototype.fold = function (fn) {\r\n        return this.fold_(Path.Empty, fn);\r\n    };\r\n    /**\r\n     * Recursive helper for public-facing fold() method\r\n     * @template V\r\n     * @param {!Path} pathSoFar\r\n     * @param {function(Path, ?T, Object.<string, V>):V} fn\r\n     * @return {V}\r\n     * @private\r\n     */\r\n    ImmutableTree.prototype.fold_ = function (pathSoFar, fn) {\r\n        var accum = {};\r\n        this.children.inorderTraversal(function (childKey, childTree) {\r\n            accum[childKey] = childTree.fold_(pathSoFar.child(childKey), fn);\r\n        });\r\n        return fn(pathSoFar, this.value, accum);\r\n    };\r\n    /**\r\n     * Find the first matching value on the given path. Return the result of applying f to it.\r\n     * @template V\r\n     * @param {!Path} path\r\n     * @param {!function(!Path, !T):?V} f\r\n     * @return {?V}\r\n     */\r\n    ImmutableTree.prototype.findOnPath = function (path, f) {\r\n        return this.findOnPath_(path, Path.Empty, f);\r\n    };\r\n    ImmutableTree.prototype.findOnPath_ = function (pathToFollow, pathSoFar, f) {\r\n        var result = this.value ? f(pathSoFar, this.value) : false;\r\n        if (result) {\r\n            return result;\r\n        }\r\n        else {\r\n            if (pathToFollow.isEmpty()) {\r\n                return null;\r\n            }\r\n            else {\r\n                var front = pathToFollow.getFront();\r\n                var nextChild = this.children.get(front);\r\n                if (nextChild) {\r\n                    return nextChild.findOnPath_(pathToFollow.popFront(), pathSoFar.child(front), f);\r\n                }\r\n                else {\r\n                    return null;\r\n                }\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     *\r\n     * @param {!Path} path\r\n     * @param {!function(!Path, !T)} f\r\n     * @returns {!ImmutableTree.<T>}\r\n     */\r\n    ImmutableTree.prototype.foreachOnPath = function (path, f) {\r\n        return this.foreachOnPath_(path, Path.Empty, f);\r\n    };\r\n    ImmutableTree.prototype.foreachOnPath_ = function (pathToFollow, currentRelativePath, f) {\r\n        if (pathToFollow.isEmpty()) {\r\n            return this;\r\n        }\r\n        else {\r\n            if (this.value) {\r\n                f(currentRelativePath, this.value);\r\n            }\r\n            var front = pathToFollow.getFront();\r\n            var nextChild = this.children.get(front);\r\n            if (nextChild) {\r\n                return nextChild.foreachOnPath_(pathToFollow.popFront(), currentRelativePath.child(front), f);\r\n            }\r\n            else {\r\n                return ImmutableTree.Empty;\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * Calls the given function for each node in the tree that has a value.\r\n     *\r\n     * @param {function(!Path, !T)} f A function to be called with\r\n     *   the path from the root of the tree to a node, and the value at that node.\r\n     *   Called in depth-first order.\r\n     */\r\n    ImmutableTree.prototype.foreach = function (f) {\r\n        this.foreach_(Path.Empty, f);\r\n    };\r\n    ImmutableTree.prototype.foreach_ = function (currentRelativePath, f) {\r\n        this.children.inorderTraversal(function (childName, childTree) {\r\n            childTree.foreach_(currentRelativePath.child(childName), f);\r\n        });\r\n        if (this.value) {\r\n            f(currentRelativePath, this.value);\r\n        }\r\n    };\r\n    /**\r\n     *\r\n     * @param {function(string, !T)} f\r\n     */\r\n    ImmutableTree.prototype.foreachChild = function (f) {\r\n        this.children.inorderTraversal(function (childName, childTree) {\r\n            if (childTree.value) {\r\n                f(childName, childTree.value);\r\n            }\r\n        });\r\n    };\r\n    ImmutableTree.Empty = new ImmutableTree(null);\r\n    return ImmutableTree;\r\n}());\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * @param {!OperationSource} source\r\n * @param {!Path} path\r\n * @constructor\r\n * @implements {Operation}\r\n */\r\nvar ListenComplete = /** @class */ (function () {\r\n    function ListenComplete(source, path) {\r\n        this.source = source;\r\n        this.path = path;\r\n        /** @inheritDoc */\r\n        this.type = OperationType.LISTEN_COMPLETE;\r\n    }\r\n    ListenComplete.prototype.operationForChild = function (childName) {\r\n        if (this.path.isEmpty()) {\r\n            return new ListenComplete(this.source, Path.Empty);\r\n        }\r\n        else {\r\n            return new ListenComplete(this.source, this.path.popFront());\r\n        }\r\n    };\r\n    return ListenComplete;\r\n}());\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * @param {!OperationSource} source\r\n * @param {!Path} path\r\n * @param {!Node} snap\r\n * @constructor\r\n * @implements {Operation}\r\n */\r\nvar Overwrite = /** @class */ (function () {\r\n    function Overwrite(source, path, snap) {\r\n        this.source = source;\r\n        this.path = path;\r\n        this.snap = snap;\r\n        /** @inheritDoc */\r\n        this.type = OperationType.OVERWRITE;\r\n    }\r\n    Overwrite.prototype.operationForChild = function (childName) {\r\n        if (this.path.isEmpty()) {\r\n            return new Overwrite(this.source, Path.Empty, this.snap.getImmediateChild(childName));\r\n        }\r\n        else {\r\n            return new Overwrite(this.source, this.path.popFront(), this.snap);\r\n        }\r\n    };\r\n    return Overwrite;\r\n}());\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * @param {!OperationSource} source\r\n * @param {!Path} path\r\n * @param {!ImmutableTree.<!Node>} children\r\n * @constructor\r\n * @implements {Operation}\r\n */\r\nvar Merge = /** @class */ (function () {\r\n    function Merge(\r\n    /**@inheritDoc */ source, \r\n    /**@inheritDoc */ path, \r\n    /**@inheritDoc */ children) {\r\n        this.source = source;\r\n        this.path = path;\r\n        this.children = children;\r\n        /** @inheritDoc */\r\n        this.type = OperationType.MERGE;\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    Merge.prototype.operationForChild = function (childName) {\r\n        if (this.path.isEmpty()) {\r\n            var childTree = this.children.subtree(new Path(childName));\r\n            if (childTree.isEmpty()) {\r\n                // This child is unaffected\r\n                return null;\r\n            }\r\n            else if (childTree.value) {\r\n                // We have a snapshot for the child in question.  This becomes an overwrite of the child.\r\n                return new Overwrite(this.source, Path.Empty, childTree.value);\r\n            }\r\n            else {\r\n                // This is a merge at a deeper level\r\n                return new Merge(this.source, Path.Empty, childTree);\r\n            }\r\n        }\r\n        else {\r\n            util.assert(this.path.getFront() === childName, \"Can't get a merge for a child not on the path of the operation\");\r\n            return new Merge(this.source, this.path.popFront(), this.children);\r\n        }\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    Merge.prototype.toString = function () {\r\n        return ('Operation(' +\r\n            this.path +\r\n            ': ' +\r\n            this.source.toString() +\r\n            ' merge: ' +\r\n            this.children.toString() +\r\n            ')');\r\n    };\r\n    return Merge;\r\n}());\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * A cache node only stores complete children. Additionally it holds a flag whether the node can be considered fully\r\n * initialized in the sense that we know at one point in time this represented a valid state of the world, e.g.\r\n * initialized with data from the server, or a complete overwrite by the client. The filtered flag also tracks\r\n * whether a node potentially had children removed due to a filter.\r\n */\r\nvar CacheNode = /** @class */ (function () {\r\n    /**\r\n     * @param {!Node} node_\r\n     * @param {boolean} fullyInitialized_\r\n     * @param {boolean} filtered_\r\n     */\r\n    function CacheNode(node_, fullyInitialized_, filtered_) {\r\n        this.node_ = node_;\r\n        this.fullyInitialized_ = fullyInitialized_;\r\n        this.filtered_ = filtered_;\r\n    }\r\n    /**\r\n     * Returns whether this node was fully initialized with either server data or a complete overwrite by the client\r\n     * @return {boolean}\r\n     */\r\n    CacheNode.prototype.isFullyInitialized = function () {\r\n        return this.fullyInitialized_;\r\n    };\r\n    /**\r\n     * Returns whether this node is potentially missing children due to a filter applied to the node\r\n     * @return {boolean}\r\n     */\r\n    CacheNode.prototype.isFiltered = function () {\r\n        return this.filtered_;\r\n    };\r\n    /**\r\n     * @param {!Path} path\r\n     * @return {boolean}\r\n     */\r\n    CacheNode.prototype.isCompleteForPath = function (path) {\r\n        if (path.isEmpty()) {\r\n            return this.isFullyInitialized() && !this.filtered_;\r\n        }\r\n        var childKey = path.getFront();\r\n        return this.isCompleteForChild(childKey);\r\n    };\r\n    /**\r\n     * @param {!string} key\r\n     * @return {boolean}\r\n     */\r\n    CacheNode.prototype.isCompleteForChild = function (key) {\r\n        return ((this.isFullyInitialized() && !this.filtered_) || this.node_.hasChild(key));\r\n    };\r\n    /**\r\n     * @return {!Node}\r\n     */\r\n    CacheNode.prototype.getNode = function () {\r\n        return this.node_;\r\n    };\r\n    return CacheNode;\r\n}());\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Stores the data we have cached for a view.\r\n *\r\n * serverSnap is the cached server data, eventSnap is the cached event data (server data plus any local writes).\r\n *\r\n * @constructor\r\n */\r\nvar ViewCache = /** @class */ (function () {\r\n    /**\r\n     *\r\n     * @param {!CacheNode} eventCache_\r\n     * @param {!CacheNode} serverCache_\r\n     */\r\n    function ViewCache(eventCache_, serverCache_) {\r\n        this.eventCache_ = eventCache_;\r\n        this.serverCache_ = serverCache_;\r\n    }\r\n    /**\r\n     * @param {!Node} eventSnap\r\n     * @param {boolean} complete\r\n     * @param {boolean} filtered\r\n     * @return {!ViewCache}\r\n     */\r\n    ViewCache.prototype.updateEventSnap = function (eventSnap, complete, filtered) {\r\n        return new ViewCache(new CacheNode(eventSnap, complete, filtered), this.serverCache_);\r\n    };\r\n    /**\r\n     * @param {!Node} serverSnap\r\n     * @param {boolean} complete\r\n     * @param {boolean} filtered\r\n     * @return {!ViewCache}\r\n     */\r\n    ViewCache.prototype.updateServerSnap = function (serverSnap, complete, filtered) {\r\n        return new ViewCache(this.eventCache_, new CacheNode(serverSnap, complete, filtered));\r\n    };\r\n    /**\r\n     * @return {!CacheNode}\r\n     */\r\n    ViewCache.prototype.getEventCache = function () {\r\n        return this.eventCache_;\r\n    };\r\n    /**\r\n     * @return {?Node}\r\n     */\r\n    ViewCache.prototype.getCompleteEventSnap = function () {\r\n        return this.eventCache_.isFullyInitialized()\r\n            ? this.eventCache_.getNode()\r\n            : null;\r\n    };\r\n    /**\r\n     * @return {!CacheNode}\r\n     */\r\n    ViewCache.prototype.getServerCache = function () {\r\n        return this.serverCache_;\r\n    };\r\n    /**\r\n     * @return {?Node}\r\n     */\r\n    ViewCache.prototype.getCompleteServerSnap = function () {\r\n        return this.serverCache_.isFullyInitialized()\r\n            ? this.serverCache_.getNode()\r\n            : null;\r\n    };\r\n    /**\r\n     * @const\r\n     * @type {ViewCache}\r\n     */\r\n    ViewCache.Empty = new ViewCache(new CacheNode(ChildrenNode.EMPTY_NODE, \r\n    /*fullyInitialized=*/ false, \r\n    /*filtered=*/ false), new CacheNode(ChildrenNode.EMPTY_NODE, \r\n    /*fullyInitialized=*/ false, \r\n    /*filtered=*/ false));\r\n    return ViewCache;\r\n}());\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * @constructor\r\n * @struct\r\n * @param {!string} type The event type\r\n * @param {!Node} snapshotNode The data\r\n * @param {string=} childName The name for this child, if it's a child event\r\n * @param {Node=} oldSnap Used for intermediate processing of child changed events\r\n * @param {string=} prevName The name for the previous child, if applicable\r\n */\r\nvar Change = /** @class */ (function () {\r\n    function Change(type, snapshotNode, childName, oldSnap, prevName) {\r\n        this.type = type;\r\n        this.snapshotNode = snapshotNode;\r\n        this.childName = childName;\r\n        this.oldSnap = oldSnap;\r\n        this.prevName = prevName;\r\n    }\r\n    /**\r\n     * @param {!Node} snapshot\r\n     * @return {!Change}\r\n     */\r\n    Change.valueChange = function (snapshot) {\r\n        return new Change(Change.VALUE, snapshot);\r\n    };\r\n    /**\r\n     * @param {string} childKey\r\n     * @param {!Node} snapshot\r\n     * @return {!Change}\r\n     */\r\n    Change.childAddedChange = function (childKey, snapshot) {\r\n        return new Change(Change.CHILD_ADDED, snapshot, childKey);\r\n    };\r\n    /**\r\n     * @param {string} childKey\r\n     * @param {!Node} snapshot\r\n     * @return {!Change}\r\n     */\r\n    Change.childRemovedChange = function (childKey, snapshot) {\r\n        return new Change(Change.CHILD_REMOVED, snapshot, childKey);\r\n    };\r\n    /**\r\n     * @param {string} childKey\r\n     * @param {!Node} newSnapshot\r\n     * @param {!Node} oldSnapshot\r\n     * @return {!Change}\r\n     */\r\n    Change.childChangedChange = function (childKey, newSnapshot, oldSnapshot) {\r\n        return new Change(Change.CHILD_CHANGED, newSnapshot, childKey, oldSnapshot);\r\n    };\r\n    /**\r\n     * @param {string} childKey\r\n     * @param {!Node} snapshot\r\n     * @return {!Change}\r\n     */\r\n    Change.childMovedChange = function (childKey, snapshot) {\r\n        return new Change(Change.CHILD_MOVED, snapshot, childKey);\r\n    };\r\n    //event types\r\n    /** Event type for a child added */\r\n    Change.CHILD_ADDED = 'child_added';\r\n    /** Event type for a child removed */\r\n    Change.CHILD_REMOVED = 'child_removed';\r\n    /** Event type for a child changed */\r\n    Change.CHILD_CHANGED = 'child_changed';\r\n    /** Event type for a child moved */\r\n    Change.CHILD_MOVED = 'child_moved';\r\n    /** Event type for a value change */\r\n    Change.VALUE = 'value';\r\n    return Change;\r\n}());\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Doesn't really filter nodes but applies an index to the node and keeps track of any changes\r\n *\r\n * @constructor\r\n * @implements {NodeFilter}\r\n * @param {!Index} index\r\n */\r\nvar IndexedFilter = /** @class */ (function () {\r\n    function IndexedFilter(index_) {\r\n        this.index_ = index_;\r\n    }\r\n    IndexedFilter.prototype.updateChild = function (snap, key, newChild, affectedPath, source, optChangeAccumulator) {\r\n        util.assert(snap.isIndexed(this.index_), 'A node must be indexed if only a child is updated');\r\n        var oldChild = snap.getImmediateChild(key);\r\n        // Check if anything actually changed.\r\n        if (oldChild.getChild(affectedPath).equals(newChild.getChild(affectedPath))) {\r\n            // There's an edge case where a child can enter or leave the view because affectedPath was set to null.\r\n            // In this case, affectedPath will appear null in both the old and new snapshots.  So we need\r\n            // to avoid treating these cases as \"nothing changed.\"\r\n            if (oldChild.isEmpty() == newChild.isEmpty()) {\r\n                // Nothing changed.\r\n                // This assert should be valid, but it's expensive (can dominate perf testing) so don't actually do it.\r\n                //assert(oldChild.equals(newChild), 'Old and new snapshots should be equal.');\r\n                return snap;\r\n            }\r\n        }\r\n        if (optChangeAccumulator != null) {\r\n            if (newChild.isEmpty()) {\r\n                if (snap.hasChild(key)) {\r\n                    optChangeAccumulator.trackChildChange(Change.childRemovedChange(key, oldChild));\r\n                }\r\n                else {\r\n                    util.assert(snap.isLeafNode(), 'A child remove without an old child only makes sense on a leaf node');\r\n                }\r\n            }\r\n            else if (oldChild.isEmpty()) {\r\n                optChangeAccumulator.trackChildChange(Change.childAddedChange(key, newChild));\r\n            }\r\n            else {\r\n                optChangeAccumulator.trackChildChange(Change.childChangedChange(key, newChild, oldChild));\r\n            }\r\n        }\r\n        if (snap.isLeafNode() && newChild.isEmpty()) {\r\n            return snap;\r\n        }\r\n        else {\r\n            // Make sure the node is indexed\r\n            return snap.updateImmediateChild(key, newChild).withIndex(this.index_);\r\n        }\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    IndexedFilter.prototype.updateFullNode = function (oldSnap, newSnap, optChangeAccumulator) {\r\n        if (optChangeAccumulator != null) {\r\n            if (!oldSnap.isLeafNode()) {\r\n                oldSnap.forEachChild(PRIORITY_INDEX, function (key, childNode) {\r\n                    if (!newSnap.hasChild(key)) {\r\n                        optChangeAccumulator.trackChildChange(Change.childRemovedChange(key, childNode));\r\n                    }\r\n                });\r\n            }\r\n            if (!newSnap.isLeafNode()) {\r\n                newSnap.forEachChild(PRIORITY_INDEX, function (key, childNode) {\r\n                    if (oldSnap.hasChild(key)) {\r\n                        var oldChild = oldSnap.getImmediateChild(key);\r\n                        if (!oldChild.equals(childNode)) {\r\n                            optChangeAccumulator.trackChildChange(Change.childChangedChange(key, childNode, oldChild));\r\n                        }\r\n                    }\r\n                    else {\r\n                        optChangeAccumulator.trackChildChange(Change.childAddedChange(key, childNode));\r\n                    }\r\n                });\r\n            }\r\n        }\r\n        return newSnap.withIndex(this.index_);\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    IndexedFilter.prototype.updatePriority = function (oldSnap, newPriority) {\r\n        if (oldSnap.isEmpty()) {\r\n            return ChildrenNode.EMPTY_NODE;\r\n        }\r\n        else {\r\n            return oldSnap.updatePriority(newPriority);\r\n        }\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    IndexedFilter.prototype.filtersNodes = function () {\r\n        return false;\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    IndexedFilter.prototype.getIndexedFilter = function () {\r\n        return this;\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    IndexedFilter.prototype.getIndex = function () {\r\n        return this.index_;\r\n    };\r\n    return IndexedFilter;\r\n}());\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * @constructor\r\n */\r\nvar ChildChangeAccumulator = /** @class */ (function () {\r\n    function ChildChangeAccumulator() {\r\n        this.changeMap_ = {};\r\n    }\r\n    /**\r\n     * @param {!Change} change\r\n     */\r\n    ChildChangeAccumulator.prototype.trackChildChange = function (change) {\r\n        var type = change.type;\r\n        var childKey /** @type {!string} */ = change.childName;\r\n        util.assert(type == Change.CHILD_ADDED ||\r\n            type == Change.CHILD_CHANGED ||\r\n            type == Change.CHILD_REMOVED, 'Only child changes supported for tracking');\r\n        util.assert(childKey !== '.priority', 'Only non-priority child changes can be tracked.');\r\n        var oldChange = util.safeGet(this.changeMap_, childKey);\r\n        if (oldChange) {\r\n            var oldType = oldChange.type;\r\n            if (type == Change.CHILD_ADDED && oldType == Change.CHILD_REMOVED) {\r\n                this.changeMap_[childKey] = Change.childChangedChange(childKey, change.snapshotNode, oldChange.snapshotNode);\r\n            }\r\n            else if (type == Change.CHILD_REMOVED &&\r\n                oldType == Change.CHILD_ADDED) {\r\n                delete this.changeMap_[childKey];\r\n            }\r\n            else if (type == Change.CHILD_REMOVED &&\r\n                oldType == Change.CHILD_CHANGED) {\r\n                this.changeMap_[childKey] = Change.childRemovedChange(childKey, oldChange.oldSnap);\r\n            }\r\n            else if (type == Change.CHILD_CHANGED &&\r\n                oldType == Change.CHILD_ADDED) {\r\n                this.changeMap_[childKey] = Change.childAddedChange(childKey, change.snapshotNode);\r\n            }\r\n            else if (type == Change.CHILD_CHANGED &&\r\n                oldType == Change.CHILD_CHANGED) {\r\n                this.changeMap_[childKey] = Change.childChangedChange(childKey, change.snapshotNode, oldChange.oldSnap);\r\n            }\r\n            else {\r\n                throw util.assertionError('Illegal combination of changes: ' +\r\n                    change +\r\n                    ' occurred after ' +\r\n                    oldChange);\r\n            }\r\n        }\r\n        else {\r\n            this.changeMap_[childKey] = change;\r\n        }\r\n    };\r\n    /**\r\n     * @return {!Array.<!Change>}\r\n     */\r\n    ChildChangeAccumulator.prototype.getChanges = function () {\r\n        return util.getValues(this.changeMap_);\r\n    };\r\n    return ChildChangeAccumulator;\r\n}());\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * An implementation of CompleteChildSource that never returns any additional children\r\n *\r\n * @private\r\n * @constructor\r\n * @implements CompleteChildSource\r\n */\r\nvar NoCompleteChildSource_ = /** @class */ (function () {\r\n    function NoCompleteChildSource_() {\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    NoCompleteChildSource_.prototype.getCompleteChild = function (childKey) {\r\n        return null;\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    NoCompleteChildSource_.prototype.getChildAfterChild = function (index, child, reverse) {\r\n        return null;\r\n    };\r\n    return NoCompleteChildSource_;\r\n}());\r\n/**\r\n * Singleton instance.\r\n * @const\r\n * @type {!CompleteChildSource}\r\n */\r\nvar NO_COMPLETE_CHILD_SOURCE = new NoCompleteChildSource_();\r\n/**\r\n * An implementation of CompleteChildSource that uses a WriteTree in addition to any other server data or\r\n * old event caches available to calculate complete children.\r\n *\r\n *\r\n * @implements CompleteChildSource\r\n */\r\nvar WriteTreeCompleteChildSource = /** @class */ (function () {\r\n    /**\r\n     * @param {!WriteTreeRef} writes_\r\n     * @param {!ViewCache} viewCache_\r\n     * @param {?Node} optCompleteServerCache_\r\n     */\r\n    function WriteTreeCompleteChildSource(writes_, viewCache_, optCompleteServerCache_) {\r\n        if (optCompleteServerCache_ === void 0) { optCompleteServerCache_ = null; }\r\n        this.writes_ = writes_;\r\n        this.viewCache_ = viewCache_;\r\n        this.optCompleteServerCache_ = optCompleteServerCache_;\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    WriteTreeCompleteChildSource.prototype.getCompleteChild = function (childKey) {\r\n        var node = this.viewCache_.getEventCache();\r\n        if (node.isCompleteForChild(childKey)) {\r\n            return node.getNode().getImmediateChild(childKey);\r\n        }\r\n        else {\r\n            var serverNode = this.optCompleteServerCache_ != null\r\n                ? new CacheNode(this.optCompleteServerCache_, true, false)\r\n                : this.viewCache_.getServerCache();\r\n            return this.writes_.calcCompleteChild(childKey, serverNode);\r\n        }\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    WriteTreeCompleteChildSource.prototype.getChildAfterChild = function (index, child, reverse) {\r\n        var completeServerData = this.optCompleteServerCache_ != null\r\n            ? this.optCompleteServerCache_\r\n            : this.viewCache_.getCompleteServerSnap();\r\n        var nodes = this.writes_.calcIndexedSlice(completeServerData, child, 1, reverse, index);\r\n        if (nodes.length === 0) {\r\n            return null;\r\n        }\r\n        else {\r\n            return nodes[0];\r\n        }\r\n    };\r\n    return WriteTreeCompleteChildSource;\r\n}());\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * @constructor\r\n * @struct\r\n */\r\nvar ProcessorResult = /** @class */ (function () {\r\n    /**\r\n     * @param {!ViewCache} viewCache\r\n     * @param {!Array.<!Change>} changes\r\n     */\r\n    function ProcessorResult(viewCache, changes) {\r\n        this.viewCache = viewCache;\r\n        this.changes = changes;\r\n    }\r\n    return ProcessorResult;\r\n}());\r\n/**\r\n * @constructor\r\n */\r\nvar ViewProcessor = /** @class */ (function () {\r\n    /**\r\n     * @param {!NodeFilter} filter_\r\n     */\r\n    function ViewProcessor(filter_) {\r\n        this.filter_ = filter_;\r\n    }\r\n    /**\r\n     * @param {!ViewCache} viewCache\r\n     */\r\n    ViewProcessor.prototype.assertIndexed = function (viewCache) {\r\n        util.assert(viewCache\r\n            .getEventCache()\r\n            .getNode()\r\n            .isIndexed(this.filter_.getIndex()), 'Event snap not indexed');\r\n        util.assert(viewCache\r\n            .getServerCache()\r\n            .getNode()\r\n            .isIndexed(this.filter_.getIndex()), 'Server snap not indexed');\r\n    };\r\n    /**\r\n     * @param {!ViewCache} oldViewCache\r\n     * @param {!Operation} operation\r\n     * @param {!WriteTreeRef} writesCache\r\n     * @param {?Node} completeCache\r\n     * @return {!ProcessorResult}\r\n     */\r\n    ViewProcessor.prototype.applyOperation = function (oldViewCache, operation, writesCache, completeCache) {\r\n        var accumulator = new ChildChangeAccumulator();\r\n        var newViewCache, filterServerNode;\r\n        if (operation.type === OperationType.OVERWRITE) {\r\n            var overwrite = operation;\r\n            if (overwrite.source.fromUser) {\r\n                newViewCache = this.applyUserOverwrite_(oldViewCache, overwrite.path, overwrite.snap, writesCache, completeCache, accumulator);\r\n            }\r\n            else {\r\n                util.assert(overwrite.source.fromServer, 'Unknown source.');\r\n                // We filter the node if it's a tagged update or the node has been previously filtered  and the\r\n                // update is not at the root in which case it is ok (and necessary) to mark the node unfiltered\r\n                // again\r\n                filterServerNode =\r\n                    overwrite.source.tagged ||\r\n                        (oldViewCache.getServerCache().isFiltered() &&\r\n                            !overwrite.path.isEmpty());\r\n                newViewCache = this.applyServerOverwrite_(oldViewCache, overwrite.path, overwrite.snap, writesCache, completeCache, filterServerNode, accumulator);\r\n            }\r\n        }\r\n        else if (operation.type === OperationType.MERGE) {\r\n            var merge = operation;\r\n            if (merge.source.fromUser) {\r\n                newViewCache = this.applyUserMerge_(oldViewCache, merge.path, merge.children, writesCache, completeCache, accumulator);\r\n            }\r\n            else {\r\n                util.assert(merge.source.fromServer, 'Unknown source.');\r\n                // We filter the node if it's a tagged update or the node has been previously filtered\r\n                filterServerNode =\r\n                    merge.source.tagged || oldViewCache.getServerCache().isFiltered();\r\n                newViewCache = this.applyServerMerge_(oldViewCache, merge.path, merge.children, writesCache, completeCache, filterServerNode, accumulator);\r\n            }\r\n        }\r\n        else if (operation.type === OperationType.ACK_USER_WRITE) {\r\n            var ackUserWrite = operation;\r\n            if (!ackUserWrite.revert) {\r\n                newViewCache = this.ackUserWrite_(oldViewCache, ackUserWrite.path, ackUserWrite.affectedTree, writesCache, completeCache, accumulator);\r\n            }\r\n            else {\r\n                newViewCache = this.revertUserWrite_(oldViewCache, ackUserWrite.path, writesCache, completeCache, accumulator);\r\n            }\r\n        }\r\n        else if (operation.type === OperationType.LISTEN_COMPLETE) {\r\n            newViewCache = this.listenComplete_(oldViewCache, operation.path, writesCache, accumulator);\r\n        }\r\n        else {\r\n            throw util.assertionError('Unknown operation type: ' + operation.type);\r\n        }\r\n        var changes = accumulator.getChanges();\r\n        ViewProcessor.maybeAddValueEvent_(oldViewCache, newViewCache, changes);\r\n        return new ProcessorResult(newViewCache, changes);\r\n    };\r\n    /**\r\n     * @param {!ViewCache} oldViewCache\r\n     * @param {!ViewCache} newViewCache\r\n     * @param {!Array.<!Change>} accumulator\r\n     * @private\r\n     */\r\n    ViewProcessor.maybeAddValueEvent_ = function (oldViewCache, newViewCache, accumulator) {\r\n        var eventSnap = newViewCache.getEventCache();\r\n        if (eventSnap.isFullyInitialized()) {\r\n            var isLeafOrEmpty = eventSnap.getNode().isLeafNode() || eventSnap.getNode().isEmpty();\r\n            var oldCompleteSnap = oldViewCache.getCompleteEventSnap();\r\n            if (accumulator.length > 0 ||\r\n                !oldViewCache.getEventCache().isFullyInitialized() ||\r\n                (isLeafOrEmpty &&\r\n                    !eventSnap\r\n                        .getNode()\r\n                        .equals(/** @type {!Node} */ (oldCompleteSnap))) ||\r\n                !eventSnap\r\n                    .getNode()\r\n                    .getPriority()\r\n                    .equals(oldCompleteSnap.getPriority())) {\r\n                accumulator.push(Change.valueChange(\r\n                /** @type {!Node} */ newViewCache.getCompleteEventSnap()));\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * @param {!ViewCache} viewCache\r\n     * @param {!Path} changePath\r\n     * @param {!WriteTreeRef} writesCache\r\n     * @param {!CompleteChildSource} source\r\n     * @param {!ChildChangeAccumulator} accumulator\r\n     * @return {!ViewCache}\r\n     * @private\r\n     */\r\n    ViewProcessor.prototype.generateEventCacheAfterServerEvent_ = function (viewCache, changePath, writesCache, source, accumulator) {\r\n        var oldEventSnap = viewCache.getEventCache();\r\n        if (writesCache.shadowingWrite(changePath) != null) {\r\n            // we have a shadowing write, ignore changes\r\n            return viewCache;\r\n        }\r\n        else {\r\n            var newEventCache = void 0, serverNode = void 0;\r\n            if (changePath.isEmpty()) {\r\n                // TODO: figure out how this plays with \"sliding ack windows\"\r\n                util.assert(viewCache.getServerCache().isFullyInitialized(), 'If change path is empty, we must have complete server data');\r\n                if (viewCache.getServerCache().isFiltered()) {\r\n                    // We need to special case this, because we need to only apply writes to complete children, or\r\n                    // we might end up raising events for incomplete children. If the server data is filtered deep\r\n                    // writes cannot be guaranteed to be complete\r\n                    var serverCache = viewCache.getCompleteServerSnap();\r\n                    var completeChildren = serverCache instanceof ChildrenNode\r\n                        ? serverCache\r\n                        : ChildrenNode.EMPTY_NODE;\r\n                    var completeEventChildren = writesCache.calcCompleteEventChildren(completeChildren);\r\n                    newEventCache = this.filter_.updateFullNode(viewCache.getEventCache().getNode(), completeEventChildren, accumulator);\r\n                }\r\n                else {\r\n                    var completeNode = writesCache.calcCompleteEventCache(viewCache.getCompleteServerSnap());\r\n                    newEventCache = this.filter_.updateFullNode(viewCache.getEventCache().getNode(), completeNode, accumulator);\r\n                }\r\n            }\r\n            else {\r\n                var childKey = changePath.getFront();\r\n                if (childKey == '.priority') {\r\n                    util.assert(changePath.getLength() == 1, \"Can't have a priority with additional path components\");\r\n                    var oldEventNode = oldEventSnap.getNode();\r\n                    serverNode = viewCache.getServerCache().getNode();\r\n                    // we might have overwrites for this priority\r\n                    var updatedPriority = writesCache.calcEventCacheAfterServerOverwrite(changePath, oldEventNode, serverNode);\r\n                    if (updatedPriority != null) {\r\n                        newEventCache = this.filter_.updatePriority(oldEventNode, updatedPriority);\r\n                    }\r\n                    else {\r\n                        // priority didn't change, keep old node\r\n                        newEventCache = oldEventSnap.getNode();\r\n                    }\r\n                }\r\n                else {\r\n                    var childChangePath = changePath.popFront();\r\n                    // update child\r\n                    var newEventChild = void 0;\r\n                    if (oldEventSnap.isCompleteForChild(childKey)) {\r\n                        serverNode = viewCache.getServerCache().getNode();\r\n                        var eventChildUpdate = writesCache.calcEventCacheAfterServerOverwrite(changePath, oldEventSnap.getNode(), serverNode);\r\n                        if (eventChildUpdate != null) {\r\n                            newEventChild = oldEventSnap\r\n                                .getNode()\r\n                                .getImmediateChild(childKey)\r\n                                .updateChild(childChangePath, eventChildUpdate);\r\n                        }\r\n                        else {\r\n                            // Nothing changed, just keep the old child\r\n                            newEventChild = oldEventSnap\r\n                                .getNode()\r\n                                .getImmediateChild(childKey);\r\n                        }\r\n                    }\r\n                    else {\r\n                        newEventChild = writesCache.calcCompleteChild(childKey, viewCache.getServerCache());\r\n                    }\r\n                    if (newEventChild != null) {\r\n                        newEventCache = this.filter_.updateChild(oldEventSnap.getNode(), childKey, newEventChild, childChangePath, source, accumulator);\r\n                    }\r\n                    else {\r\n                        // no complete child available or no change\r\n                        newEventCache = oldEventSnap.getNode();\r\n                    }\r\n                }\r\n            }\r\n            return viewCache.updateEventSnap(newEventCache, oldEventSnap.isFullyInitialized() || changePath.isEmpty(), this.filter_.filtersNodes());\r\n        }\r\n    };\r\n    /**\r\n     * @param {!ViewCache} oldViewCache\r\n     * @param {!Path} changePath\r\n     * @param {!Node} changedSnap\r\n     * @param {!WriteTreeRef} writesCache\r\n     * @param {?Node} completeCache\r\n     * @param {boolean} filterServerNode\r\n     * @param {!ChildChangeAccumulator} accumulator\r\n     * @return {!ViewCache}\r\n     * @private\r\n     */\r\n    ViewProcessor.prototype.applyServerOverwrite_ = function (oldViewCache, changePath, changedSnap, writesCache, completeCache, filterServerNode, accumulator) {\r\n        var oldServerSnap = oldViewCache.getServerCache();\r\n        var newServerCache;\r\n        var serverFilter = filterServerNode\r\n            ? this.filter_\r\n            : this.filter_.getIndexedFilter();\r\n        if (changePath.isEmpty()) {\r\n            newServerCache = serverFilter.updateFullNode(oldServerSnap.getNode(), changedSnap, null);\r\n        }\r\n        else if (serverFilter.filtersNodes() && !oldServerSnap.isFiltered()) {\r\n            // we want to filter the server node, but we didn't filter the server node yet, so simulate a full update\r\n            var newServerNode = oldServerSnap\r\n                .getNode()\r\n                .updateChild(changePath, changedSnap);\r\n            newServerCache = serverFilter.updateFullNode(oldServerSnap.getNode(), newServerNode, null);\r\n        }\r\n        else {\r\n            var childKey = changePath.getFront();\r\n            if (!oldServerSnap.isCompleteForPath(changePath) &&\r\n                changePath.getLength() > 1) {\r\n                // We don't update incomplete nodes with updates intended for other listeners\r\n                return oldViewCache;\r\n            }\r\n            var childChangePath = changePath.popFront();\r\n            var childNode = oldServerSnap.getNode().getImmediateChild(childKey);\r\n            var newChildNode = childNode.updateChild(childChangePath, changedSnap);\r\n            if (childKey == '.priority') {\r\n                newServerCache = serverFilter.updatePriority(oldServerSnap.getNode(), newChildNode);\r\n            }\r\n            else {\r\n                newServerCache = serverFilter.updateChild(oldServerSnap.getNode(), childKey, newChildNode, childChangePath, NO_COMPLETE_CHILD_SOURCE, null);\r\n            }\r\n        }\r\n        var newViewCache = oldViewCache.updateServerSnap(newServerCache, oldServerSnap.isFullyInitialized() || changePath.isEmpty(), serverFilter.filtersNodes());\r\n        var source = new WriteTreeCompleteChildSource(writesCache, newViewCache, completeCache);\r\n        return this.generateEventCacheAfterServerEvent_(newViewCache, changePath, writesCache, source, accumulator);\r\n    };\r\n    /**\r\n     * @param {!ViewCache} oldViewCache\r\n     * @param {!Path} changePath\r\n     * @param {!Node} changedSnap\r\n     * @param {!WriteTreeRef} writesCache\r\n     * @param {?Node} completeCache\r\n     * @param {!ChildChangeAccumulator} accumulator\r\n     * @return {!ViewCache}\r\n     * @private\r\n     */\r\n    ViewProcessor.prototype.applyUserOverwrite_ = function (oldViewCache, changePath, changedSnap, writesCache, completeCache, accumulator) {\r\n        var oldEventSnap = oldViewCache.getEventCache();\r\n        var newViewCache, newEventCache;\r\n        var source = new WriteTreeCompleteChildSource(writesCache, oldViewCache, completeCache);\r\n        if (changePath.isEmpty()) {\r\n            newEventCache = this.filter_.updateFullNode(oldViewCache.getEventCache().getNode(), changedSnap, accumulator);\r\n            newViewCache = oldViewCache.updateEventSnap(newEventCache, true, this.filter_.filtersNodes());\r\n        }\r\n        else {\r\n            var childKey = changePath.getFront();\r\n            if (childKey === '.priority') {\r\n                newEventCache = this.filter_.updatePriority(oldViewCache.getEventCache().getNode(), changedSnap);\r\n                newViewCache = oldViewCache.updateEventSnap(newEventCache, oldEventSnap.isFullyInitialized(), oldEventSnap.isFiltered());\r\n            }\r\n            else {\r\n                var childChangePath = changePath.popFront();\r\n                var oldChild = oldEventSnap.getNode().getImmediateChild(childKey);\r\n                var newChild = void 0;\r\n                if (childChangePath.isEmpty()) {\r\n                    // Child overwrite, we can replace the child\r\n                    newChild = changedSnap;\r\n                }\r\n                else {\r\n                    var childNode = source.getCompleteChild(childKey);\r\n                    if (childNode != null) {\r\n                        if (childChangePath.getBack() === '.priority' &&\r\n                            childNode.getChild(childChangePath.parent()).isEmpty()) {\r\n                            // This is a priority update on an empty node. If this node exists on the server, the\r\n                            // server will send down the priority in the update, so ignore for now\r\n                            newChild = childNode;\r\n                        }\r\n                        else {\r\n                            newChild = childNode.updateChild(childChangePath, changedSnap);\r\n                        }\r\n                    }\r\n                    else {\r\n                        // There is no complete child node available\r\n                        newChild = ChildrenNode.EMPTY_NODE;\r\n                    }\r\n                }\r\n                if (!oldChild.equals(newChild)) {\r\n                    var newEventSnap = this.filter_.updateChild(oldEventSnap.getNode(), childKey, newChild, childChangePath, source, accumulator);\r\n                    newViewCache = oldViewCache.updateEventSnap(newEventSnap, oldEventSnap.isFullyInitialized(), this.filter_.filtersNodes());\r\n                }\r\n                else {\r\n                    newViewCache = oldViewCache;\r\n                }\r\n            }\r\n        }\r\n        return newViewCache;\r\n    };\r\n    /**\r\n     * @param {!ViewCache} viewCache\r\n     * @param {string} childKey\r\n     * @return {boolean}\r\n     * @private\r\n     */\r\n    ViewProcessor.cacheHasChild_ = function (viewCache, childKey) {\r\n        return viewCache.getEventCache().isCompleteForChild(childKey);\r\n    };\r\n    /**\r\n     * @param {!ViewCache} viewCache\r\n     * @param {!Path} path\r\n     * @param {ImmutableTree.<!Node>} changedChildren\r\n     * @param {!WriteTreeRef} writesCache\r\n     * @param {?Node} serverCache\r\n     * @param {!ChildChangeAccumulator} accumulator\r\n     * @return {!ViewCache}\r\n     * @private\r\n     */\r\n    ViewProcessor.prototype.applyUserMerge_ = function (viewCache, path, changedChildren, writesCache, serverCache, accumulator) {\r\n        var _this = this;\r\n        // HACK: In the case of a limit query, there may be some changes that bump things out of the\r\n        // window leaving room for new items.  It's important we process these changes first, so we\r\n        // iterate the changes twice, first processing any that affect items currently in view.\r\n        // TODO: I consider an item \"in view\" if cacheHasChild is true, which checks both the server\r\n        // and event snap.  I'm not sure if this will result in edge cases when a child is in one but\r\n        // not the other.\r\n        var curViewCache = viewCache;\r\n        changedChildren.foreach(function (relativePath, childNode) {\r\n            var writePath = path.child(relativePath);\r\n            if (ViewProcessor.cacheHasChild_(viewCache, writePath.getFront())) {\r\n                curViewCache = _this.applyUserOverwrite_(curViewCache, writePath, childNode, writesCache, serverCache, accumulator);\r\n            }\r\n        });\r\n        changedChildren.foreach(function (relativePath, childNode) {\r\n            var writePath = path.child(relativePath);\r\n            if (!ViewProcessor.cacheHasChild_(viewCache, writePath.getFront())) {\r\n                curViewCache = _this.applyUserOverwrite_(curViewCache, writePath, childNode, writesCache, serverCache, accumulator);\r\n            }\r\n        });\r\n        return curViewCache;\r\n    };\r\n    /**\r\n     * @param {!Node} node\r\n     * @param {ImmutableTree.<!Node>} merge\r\n     * @return {!Node}\r\n     * @private\r\n     */\r\n    ViewProcessor.prototype.applyMerge_ = function (node, merge) {\r\n        merge.foreach(function (relativePath, childNode) {\r\n            node = node.updateChild(relativePath, childNode);\r\n        });\r\n        return node;\r\n    };\r\n    /**\r\n     * @param {!ViewCache} viewCache\r\n     * @param {!Path} path\r\n     * @param {!ImmutableTree.<!Node>} changedChildren\r\n     * @param {!WriteTreeRef} writesCache\r\n     * @param {?Node} serverCache\r\n     * @param {boolean} filterServerNode\r\n     * @param {!ChildChangeAccumulator} accumulator\r\n     * @return {!ViewCache}\r\n     * @private\r\n     */\r\n    ViewProcessor.prototype.applyServerMerge_ = function (viewCache, path, changedChildren, writesCache, serverCache, filterServerNode, accumulator) {\r\n        var _this = this;\r\n        // If we don't have a cache yet, this merge was intended for a previously listen in the same location. Ignore it and\r\n        // wait for the complete data update coming soon.\r\n        if (viewCache\r\n            .getServerCache()\r\n            .getNode()\r\n            .isEmpty() &&\r\n            !viewCache.getServerCache().isFullyInitialized()) {\r\n            return viewCache;\r\n        }\r\n        // HACK: In the case of a limit query, there may be some changes that bump things out of the\r\n        // window leaving room for new items.  It's important we process these changes first, so we\r\n        // iterate the changes twice, first processing any that affect items currently in view.\r\n        // TODO: I consider an item \"in view\" if cacheHasChild is true, which checks both the server\r\n        // and event snap.  I'm not sure if this will result in edge cases when a child is in one but\r\n        // not the other.\r\n        var curViewCache = viewCache;\r\n        var viewMergeTree;\r\n        if (path.isEmpty()) {\r\n            viewMergeTree = changedChildren;\r\n        }\r\n        else {\r\n            viewMergeTree = ImmutableTree.Empty.setTree(path, changedChildren);\r\n        }\r\n        var serverNode = viewCache.getServerCache().getNode();\r\n        viewMergeTree.children.inorderTraversal(function (childKey, childTree) {\r\n            if (serverNode.hasChild(childKey)) {\r\n                var serverChild = viewCache\r\n                    .getServerCache()\r\n                    .getNode()\r\n                    .getImmediateChild(childKey);\r\n                var newChild = _this.applyMerge_(serverChild, childTree);\r\n                curViewCache = _this.applyServerOverwrite_(curViewCache, new Path(childKey), newChild, writesCache, serverCache, filterServerNode, accumulator);\r\n            }\r\n        });\r\n        viewMergeTree.children.inorderTraversal(function (childKey, childMergeTree) {\r\n            var isUnknownDeepMerge = !viewCache.getServerCache().isCompleteForChild(childKey) &&\r\n                childMergeTree.value == null;\r\n            if (!serverNode.hasChild(childKey) && !isUnknownDeepMerge) {\r\n                var serverChild = viewCache\r\n                    .getServerCache()\r\n                    .getNode()\r\n                    .getImmediateChild(childKey);\r\n                var newChild = _this.applyMerge_(serverChild, childMergeTree);\r\n                curViewCache = _this.applyServerOverwrite_(curViewCache, new Path(childKey), newChild, writesCache, serverCache, filterServerNode, accumulator);\r\n            }\r\n        });\r\n        return curViewCache;\r\n    };\r\n    /**\r\n     * @param {!ViewCache} viewCache\r\n     * @param {!Path} ackPath\r\n     * @param {!ImmutableTree<!boolean>} affectedTree\r\n     * @param {!WriteTreeRef} writesCache\r\n     * @param {?Node} completeCache\r\n     * @param {!ChildChangeAccumulator} accumulator\r\n     * @return {!ViewCache}\r\n     * @private\r\n     */\r\n    ViewProcessor.prototype.ackUserWrite_ = function (viewCache, ackPath, affectedTree, writesCache, completeCache, accumulator) {\r\n        if (writesCache.shadowingWrite(ackPath) != null) {\r\n            return viewCache;\r\n        }\r\n        // Only filter server node if it is currently filtered\r\n        var filterServerNode = viewCache.getServerCache().isFiltered();\r\n        // Essentially we'll just get our existing server cache for the affected paths and re-apply it as a server update\r\n        // now that it won't be shadowed.\r\n        var serverCache = viewCache.getServerCache();\r\n        if (affectedTree.value != null) {\r\n            // This is an overwrite.\r\n            if ((ackPath.isEmpty() && serverCache.isFullyInitialized()) ||\r\n                serverCache.isCompleteForPath(ackPath)) {\r\n                return this.applyServerOverwrite_(viewCache, ackPath, serverCache.getNode().getChild(ackPath), writesCache, completeCache, filterServerNode, accumulator);\r\n            }\r\n            else if (ackPath.isEmpty()) {\r\n                // This is a goofy edge case where we are acking data at this location but don't have full data.  We\r\n                // should just re-apply whatever we have in our cache as a merge.\r\n                var changedChildren_1 = ImmutableTree.Empty;\r\n                serverCache.getNode().forEachChild(KEY_INDEX, function (name, node) {\r\n                    changedChildren_1 = changedChildren_1.set(new Path(name), node);\r\n                });\r\n                return this.applyServerMerge_(viewCache, ackPath, changedChildren_1, writesCache, completeCache, filterServerNode, accumulator);\r\n            }\r\n            else {\r\n                return viewCache;\r\n            }\r\n        }\r\n        else {\r\n            // This is a merge.\r\n            var changedChildren_2 = ImmutableTree.Empty;\r\n            affectedTree.foreach(function (mergePath, value) {\r\n                var serverCachePath = ackPath.child(mergePath);\r\n                if (serverCache.isCompleteForPath(serverCachePath)) {\r\n                    changedChildren_2 = changedChildren_2.set(mergePath, serverCache.getNode().getChild(serverCachePath));\r\n                }\r\n            });\r\n            return this.applyServerMerge_(viewCache, ackPath, changedChildren_2, writesCache, completeCache, filterServerNode, accumulator);\r\n        }\r\n    };\r\n    /**\r\n     * @param {!ViewCache} viewCache\r\n     * @param {!Path} path\r\n     * @param {!WriteTreeRef} writesCache\r\n     * @param {!ChildChangeAccumulator} accumulator\r\n     * @return {!ViewCache}\r\n     * @private\r\n     */\r\n    ViewProcessor.prototype.listenComplete_ = function (viewCache, path, writesCache, accumulator) {\r\n        var oldServerNode = viewCache.getServerCache();\r\n        var newViewCache = viewCache.updateServerSnap(oldServerNode.getNode(), oldServerNode.isFullyInitialized() || path.isEmpty(), oldServerNode.isFiltered());\r\n        return this.generateEventCacheAfterServerEvent_(newViewCache, path, writesCache, NO_COMPLETE_CHILD_SOURCE, accumulator);\r\n    };\r\n    /**\r\n     * @param {!ViewCache} viewCache\r\n     * @param {!Path} path\r\n     * @param {!WriteTreeRef} writesCache\r\n     * @param {?Node} completeServerCache\r\n     * @param {!ChildChangeAccumulator} accumulator\r\n     * @return {!ViewCache}\r\n     * @private\r\n     */\r\n    ViewProcessor.prototype.revertUserWrite_ = function (viewCache, path, writesCache, completeServerCache, accumulator) {\r\n        var complete;\r\n        if (writesCache.shadowingWrite(path) != null) {\r\n            return viewCache;\r\n        }\r\n        else {\r\n            var source = new WriteTreeCompleteChildSource(writesCache, viewCache, completeServerCache);\r\n            var oldEventCache = viewCache.getEventCache().getNode();\r\n            var newEventCache = void 0;\r\n            if (path.isEmpty() || path.getFront() === '.priority') {\r\n                var newNode = void 0;\r\n                if (viewCache.getServerCache().isFullyInitialized()) {\r\n                    newNode = writesCache.calcCompleteEventCache(viewCache.getCompleteServerSnap());\r\n                }\r\n                else {\r\n                    var serverChildren = viewCache.getServerCache().getNode();\r\n                    util.assert(serverChildren instanceof ChildrenNode, 'serverChildren would be complete if leaf node');\r\n                    newNode = writesCache.calcCompleteEventChildren(serverChildren);\r\n                }\r\n                newNode = newNode;\r\n                newEventCache = this.filter_.updateFullNode(oldEventCache, newNode, accumulator);\r\n            }\r\n            else {\r\n                var childKey = path.getFront();\r\n                var newChild = writesCache.calcCompleteChild(childKey, viewCache.getServerCache());\r\n                if (newChild == null &&\r\n                    viewCache.getServerCache().isCompleteForChild(childKey)) {\r\n                    newChild = oldEventCache.getImmediateChild(childKey);\r\n                }\r\n                if (newChild != null) {\r\n                    newEventCache = this.filter_.updateChild(oldEventCache, childKey, newChild, path.popFront(), source, accumulator);\r\n                }\r\n                else if (viewCache\r\n                    .getEventCache()\r\n                    .getNode()\r\n                    .hasChild(childKey)) {\r\n                    // No complete child available, delete the existing one, if any\r\n                    newEventCache = this.filter_.updateChild(oldEventCache, childKey, ChildrenNode.EMPTY_NODE, path.popFront(), source, accumulator);\r\n                }\r\n                else {\r\n                    newEventCache = oldEventCache;\r\n                }\r\n                if (newEventCache.isEmpty() &&\r\n                    viewCache.getServerCache().isFullyInitialized()) {\r\n                    // We might have reverted all child writes. Maybe the old event was a leaf node\r\n                    complete = writesCache.calcCompleteEventCache(viewCache.getCompleteServerSnap());\r\n                    if (complete.isLeafNode()) {\r\n                        newEventCache = this.filter_.updateFullNode(newEventCache, complete, accumulator);\r\n                    }\r\n                }\r\n            }\r\n            complete =\r\n                viewCache.getServerCache().isFullyInitialized() ||\r\n                    writesCache.shadowingWrite(Path.Empty) != null;\r\n            return viewCache.updateEventSnap(newEventCache, complete, this.filter_.filtersNodes());\r\n        }\r\n    };\r\n    return ViewProcessor;\r\n}());\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * An EventGenerator is used to convert \"raw\" changes (Change) as computed by the\r\n * CacheDiffer into actual events (Event) that can be raised.  See generateEventsForChanges()\r\n * for details.\r\n *\r\n * @constructor\r\n */\r\nvar EventGenerator = /** @class */ (function () {\r\n    /**\r\n     *\r\n     * @param {!Query} query_\r\n     */\r\n    function EventGenerator(query_) {\r\n        this.query_ = query_;\r\n        /**\r\n         * @private\r\n         * @type {!Index}\r\n         */\r\n        this.index_ = this.query_.getQueryParams().getIndex();\r\n    }\r\n    /**\r\n     * Given a set of raw changes (no moved events and prevName not specified yet), and a set of\r\n     * EventRegistrations that should be notified of these changes, generate the actual events to be raised.\r\n     *\r\n     * Notes:\r\n     *  - child_moved events will be synthesized at this time for any child_changed events that affect\r\n     *    our index.\r\n     *  - prevName will be calculated based on the index ordering.\r\n     *\r\n     * @param {!Array.<!Change>} changes\r\n     * @param {!Node} eventCache\r\n     * @param {!Array.<!EventRegistration>} eventRegistrations\r\n     * @return {!Array.<!Event>}\r\n     */\r\n    EventGenerator.prototype.generateEventsForChanges = function (changes, eventCache, eventRegistrations) {\r\n        var _this = this;\r\n        var events = [];\r\n        var moves = [];\r\n        changes.forEach(function (change) {\r\n            if (change.type === Change.CHILD_CHANGED &&\r\n                _this.index_.indexedValueChanged(change.oldSnap, change.snapshotNode)) {\r\n                moves.push(Change.childMovedChange(change.childName, change.snapshotNode));\r\n            }\r\n        });\r\n        this.generateEventsForType_(events, Change.CHILD_REMOVED, changes, eventRegistrations, eventCache);\r\n        this.generateEventsForType_(events, Change.CHILD_ADDED, changes, eventRegistrations, eventCache);\r\n        this.generateEventsForType_(events, Change.CHILD_MOVED, moves, eventRegistrations, eventCache);\r\n        this.generateEventsForType_(events, Change.CHILD_CHANGED, changes, eventRegistrations, eventCache);\r\n        this.generateEventsForType_(events, Change.VALUE, changes, eventRegistrations, eventCache);\r\n        return events;\r\n    };\r\n    /**\r\n     * Given changes of a single change type, generate the corresponding events.\r\n     *\r\n     * @param {!Array.<!Event>} events\r\n     * @param {!string} eventType\r\n     * @param {!Array.<!Change>} changes\r\n     * @param {!Array.<!EventRegistration>} registrations\r\n     * @param {!Node} eventCache\r\n     * @private\r\n     */\r\n    EventGenerator.prototype.generateEventsForType_ = function (events, eventType, changes, registrations, eventCache) {\r\n        var _this = this;\r\n        var filteredChanges = changes.filter(function (change) { return change.type === eventType; });\r\n        filteredChanges.sort(this.compareChanges_.bind(this));\r\n        filteredChanges.forEach(function (change) {\r\n            var materializedChange = _this.materializeSingleChange_(change, eventCache);\r\n            registrations.forEach(function (registration) {\r\n                if (registration.respondsTo(change.type)) {\r\n                    events.push(registration.createEvent(materializedChange, _this.query_));\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     * @param {!Change} change\r\n     * @param {!Node} eventCache\r\n     * @return {!Change}\r\n     * @private\r\n     */\r\n    EventGenerator.prototype.materializeSingleChange_ = function (change, eventCache) {\r\n        if (change.type === 'value' || change.type === 'child_removed') {\r\n            return change;\r\n        }\r\n        else {\r\n            change.prevName = eventCache.getPredecessorChildName(\r\n            /** @type {!string} */\r\n            change.childName, change.snapshotNode, this.index_);\r\n            return change;\r\n        }\r\n    };\r\n    /**\r\n     * @param {!Change} a\r\n     * @param {!Change} b\r\n     * @return {number}\r\n     * @private\r\n     */\r\n    EventGenerator.prototype.compareChanges_ = function (a, b) {\r\n        if (a.childName == null || b.childName == null) {\r\n            throw util.assertionError('Should only compare child_ events.');\r\n        }\r\n        var aWrapped = new NamedNode(a.childName, a.snapshotNode);\r\n        var bWrapped = new NamedNode(b.childName, b.snapshotNode);\r\n        return this.index_.compare(aWrapped, bWrapped);\r\n    };\r\n    return EventGenerator;\r\n}());\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * A view represents a specific location and query that has 1 or more event registrations.\r\n *\r\n * It does several things:\r\n *  - Maintains the list of event registrations for this location/query.\r\n *  - Maintains a cache of the data visible for this location/query.\r\n *  - Applies new operations (via applyOperation), updates the cache, and based on the event\r\n *    registrations returns the set of events to be raised.\r\n * @constructor\r\n */\r\nvar View = /** @class */ (function () {\r\n    /**\r\n     *\r\n     * @param {!Query} query_\r\n     * @param {!ViewCache} initialViewCache\r\n     */\r\n    function View(query_, initialViewCache) {\r\n        this.query_ = query_;\r\n        this.eventRegistrations_ = [];\r\n        var params = this.query_.getQueryParams();\r\n        var indexFilter = new IndexedFilter(params.getIndex());\r\n        var filter = params.getNodeFilter();\r\n        /**\r\n         * @type {ViewProcessor}\r\n         * @private\r\n         */\r\n        this.processor_ = new ViewProcessor(filter);\r\n        var initialServerCache = initialViewCache.getServerCache();\r\n        var initialEventCache = initialViewCache.getEventCache();\r\n        // Don't filter server node with other filter than index, wait for tagged listen\r\n        var serverSnap = indexFilter.updateFullNode(ChildrenNode.EMPTY_NODE, initialServerCache.getNode(), null);\r\n        var eventSnap = filter.updateFullNode(ChildrenNode.EMPTY_NODE, initialEventCache.getNode(), null);\r\n        var newServerCache = new CacheNode(serverSnap, initialServerCache.isFullyInitialized(), indexFilter.filtersNodes());\r\n        var newEventCache = new CacheNode(eventSnap, initialEventCache.isFullyInitialized(), filter.filtersNodes());\r\n        /**\r\n         * @type {!ViewCache}\r\n         * @private\r\n         */\r\n        this.viewCache_ = new ViewCache(newEventCache, newServerCache);\r\n        /**\r\n         * @type {!EventGenerator}\r\n         * @private\r\n         */\r\n        this.eventGenerator_ = new EventGenerator(this.query_);\r\n    }\r\n    /**\r\n     * @return {!Query}\r\n     */\r\n    View.prototype.getQuery = function () {\r\n        return this.query_;\r\n    };\r\n    /**\r\n     * @return {?Node}\r\n     */\r\n    View.prototype.getServerCache = function () {\r\n        return this.viewCache_.getServerCache().getNode();\r\n    };\r\n    /**\r\n     * @param {!Path} path\r\n     * @return {?Node}\r\n     */\r\n    View.prototype.getCompleteServerCache = function (path) {\r\n        var cache = this.viewCache_.getCompleteServerSnap();\r\n        if (cache) {\r\n            // If this isn't a \"loadsAllData\" view, then cache isn't actually a complete cache and\r\n            // we need to see if it contains the child we're interested in.\r\n            if (this.query_.getQueryParams().loadsAllData() ||\r\n                (!path.isEmpty() && !cache.getImmediateChild(path.getFront()).isEmpty())) {\r\n                return cache.getChild(path);\r\n            }\r\n        }\r\n        return null;\r\n    };\r\n    /**\r\n     * @return {boolean}\r\n     */\r\n    View.prototype.isEmpty = function () {\r\n        return this.eventRegistrations_.length === 0;\r\n    };\r\n    /**\r\n     * @param {!EventRegistration} eventRegistration\r\n     */\r\n    View.prototype.addEventRegistration = function (eventRegistration) {\r\n        this.eventRegistrations_.push(eventRegistration);\r\n    };\r\n    /**\r\n     * @param {?EventRegistration} eventRegistration If null, remove all callbacks.\r\n     * @param {Error=} cancelError If a cancelError is provided, appropriate cancel events will be returned.\r\n     * @return {!Array.<!Event>} Cancel events, if cancelError was provided.\r\n     */\r\n    View.prototype.removeEventRegistration = function (eventRegistration, cancelError) {\r\n        var cancelEvents = [];\r\n        if (cancelError) {\r\n            util.assert(eventRegistration == null, 'A cancel should cancel all event registrations.');\r\n            var path_1 = this.query_.path;\r\n            this.eventRegistrations_.forEach(function (registration) {\r\n                cancelError /** @type {!Error} */ = cancelError;\r\n                var maybeEvent = registration.createCancelEvent(cancelError, path_1);\r\n                if (maybeEvent) {\r\n                    cancelEvents.push(maybeEvent);\r\n                }\r\n            });\r\n        }\r\n        if (eventRegistration) {\r\n            var remaining = [];\r\n            for (var i = 0; i < this.eventRegistrations_.length; ++i) {\r\n                var existing = this.eventRegistrations_[i];\r\n                if (!existing.matches(eventRegistration)) {\r\n                    remaining.push(existing);\r\n                }\r\n                else if (eventRegistration.hasAnyCallback()) {\r\n                    // We're removing just this one\r\n                    remaining = remaining.concat(this.eventRegistrations_.slice(i + 1));\r\n                    break;\r\n                }\r\n            }\r\n            this.eventRegistrations_ = remaining;\r\n        }\r\n        else {\r\n            this.eventRegistrations_ = [];\r\n        }\r\n        return cancelEvents;\r\n    };\r\n    /**\r\n     * Applies the given Operation, updates our cache, and returns the appropriate events.\r\n     *\r\n     * @param {!Operation} operation\r\n     * @param {!WriteTreeRef} writesCache\r\n     * @param {?Node} completeServerCache\r\n     * @return {!Array.<!Event>}\r\n     */\r\n    View.prototype.applyOperation = function (operation, writesCache, completeServerCache) {\r\n        if (operation.type === OperationType.MERGE &&\r\n            operation.source.queryId !== null) {\r\n            util.assert(this.viewCache_.getCompleteServerSnap(), 'We should always have a full cache before handling merges');\r\n            util.assert(this.viewCache_.getCompleteEventSnap(), 'Missing event cache, even though we have a server cache');\r\n        }\r\n        var oldViewCache = this.viewCache_;\r\n        var result = this.processor_.applyOperation(oldViewCache, operation, writesCache, completeServerCache);\r\n        this.processor_.assertIndexed(result.viewCache);\r\n        util.assert(result.viewCache.getServerCache().isFullyInitialized() ||\r\n            !oldViewCache.getServerCache().isFullyInitialized(), 'Once a server snap is complete, it should never go back');\r\n        this.viewCache_ = result.viewCache;\r\n        return this.generateEventsForChanges_(result.changes, result.viewCache.getEventCache().getNode(), null);\r\n    };\r\n    /**\r\n     * @param {!EventRegistration} registration\r\n     * @return {!Array.<!Event>}\r\n     */\r\n    View.prototype.getInitialEvents = function (registration) {\r\n        var eventSnap = this.viewCache_.getEventCache();\r\n        var initialChanges = [];\r\n        if (!eventSnap.getNode().isLeafNode()) {\r\n            var eventNode = eventSnap.getNode();\r\n            eventNode.forEachChild(PRIORITY_INDEX, function (key, childNode) {\r\n                initialChanges.push(Change.childAddedChange(key, childNode));\r\n            });\r\n        }\r\n        if (eventSnap.isFullyInitialized()) {\r\n            initialChanges.push(Change.valueChange(eventSnap.getNode()));\r\n        }\r\n        return this.generateEventsForChanges_(initialChanges, eventSnap.getNode(), registration);\r\n    };\r\n    /**\r\n     * @private\r\n     * @param {!Array.<!Change>} changes\r\n     * @param {!Node} eventCache\r\n     * @param {EventRegistration=} eventRegistration\r\n     * @return {!Array.<!Event>}\r\n     */\r\n    View.prototype.generateEventsForChanges_ = function (changes, eventCache, eventRegistration) {\r\n        var registrations = eventRegistration\r\n            ? [eventRegistration]\r\n            : this.eventRegistrations_;\r\n        return this.eventGenerator_.generateEventsForChanges(changes, eventCache, registrations);\r\n    };\r\n    return View;\r\n}());\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nvar __referenceConstructor$1;\r\n/**\r\n * SyncPoint represents a single location in a SyncTree with 1 or more event registrations, meaning we need to\r\n * maintain 1 or more Views at this location to cache server data and raise appropriate events for server changes\r\n * and user writes (set, transaction, update).\r\n *\r\n * It's responsible for:\r\n *  - Maintaining the set of 1 or more views necessary at this location (a SyncPoint with 0 views should be removed).\r\n *  - Proxying user / server operations to the views as appropriate (i.e. applyServerOverwrite,\r\n *    applyUserOverwrite, etc.)\r\n */\r\nvar SyncPoint = /** @class */ (function () {\r\n    function SyncPoint() {\r\n        /**\r\n         * The Views being tracked at this location in the tree, stored as a map where the key is a\r\n         * queryId and the value is the View for that query.\r\n         *\r\n         * NOTE: This list will be quite small (usually 1, but perhaps 2 or 3; any more is an odd use case).\r\n         *\r\n         * @type {!Object.<!string, !View>}\r\n         * @private\r\n         */\r\n        this.views_ = {};\r\n    }\r\n    Object.defineProperty(SyncPoint, \"__referenceConstructor\", {\r\n        get: function () {\r\n            util.assert(__referenceConstructor$1, 'Reference.ts has not been loaded');\r\n            return __referenceConstructor$1;\r\n        },\r\n        set: function (val) {\r\n            util.assert(!__referenceConstructor$1, '__referenceConstructor has already been defined');\r\n            __referenceConstructor$1 = val;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * @return {boolean}\r\n     */\r\n    SyncPoint.prototype.isEmpty = function () {\r\n        return util.isEmpty(this.views_);\r\n    };\r\n    /**\r\n     *\r\n     * @param {!Operation} operation\r\n     * @param {!WriteTreeRef} writesCache\r\n     * @param {?Node} optCompleteServerCache\r\n     * @return {!Array.<!Event>}\r\n     */\r\n    SyncPoint.prototype.applyOperation = function (operation, writesCache, optCompleteServerCache) {\r\n        var queryId = operation.source.queryId;\r\n        if (queryId !== null) {\r\n            var view = util.safeGet(this.views_, queryId);\r\n            util.assert(view != null, 'SyncTree gave us an op for an invalid query.');\r\n            return view.applyOperation(operation, writesCache, optCompleteServerCache);\r\n        }\r\n        else {\r\n            var events_1 = [];\r\n            util.forEach(this.views_, function (key, view) {\r\n                events_1 = events_1.concat(view.applyOperation(operation, writesCache, optCompleteServerCache));\r\n            });\r\n            return events_1;\r\n        }\r\n    };\r\n    /**\r\n     * Add an event callback for the specified query.\r\n     *\r\n     * @param {!Query} query\r\n     * @param {!EventRegistration} eventRegistration\r\n     * @param {!WriteTreeRef} writesCache\r\n     * @param {?Node} serverCache Complete server cache, if we have it.\r\n     * @param {boolean} serverCacheComplete\r\n     * @return {!Array.<!Event>} Events to raise.\r\n     */\r\n    SyncPoint.prototype.addEventRegistration = function (query, eventRegistration, writesCache, serverCache, serverCacheComplete) {\r\n        var queryId = query.queryIdentifier();\r\n        var view = util.safeGet(this.views_, queryId);\r\n        if (!view) {\r\n            // TODO: make writesCache take flag for complete server node\r\n            var eventCache = writesCache.calcCompleteEventCache(serverCacheComplete ? serverCache : null);\r\n            var eventCacheComplete = false;\r\n            if (eventCache) {\r\n                eventCacheComplete = true;\r\n            }\r\n            else if (serverCache instanceof ChildrenNode) {\r\n                eventCache = writesCache.calcCompleteEventChildren(serverCache);\r\n                eventCacheComplete = false;\r\n            }\r\n            else {\r\n                eventCache = ChildrenNode.EMPTY_NODE;\r\n                eventCacheComplete = false;\r\n            }\r\n            var viewCache = new ViewCache(new CacheNode(\r\n            /** @type {!Node} */ (eventCache), eventCacheComplete, false), new CacheNode(\r\n            /** @type {!Node} */ (serverCache), serverCacheComplete, false));\r\n            view = new View(query, viewCache);\r\n            this.views_[queryId] = view;\r\n        }\r\n        // This is guaranteed to exist now, we just created anything that was missing\r\n        view.addEventRegistration(eventRegistration);\r\n        return view.getInitialEvents(eventRegistration);\r\n    };\r\n    /**\r\n     * Remove event callback(s).  Return cancelEvents if a cancelError is specified.\r\n     *\r\n     * If query is the default query, we'll check all views for the specified eventRegistration.\r\n     * If eventRegistration is null, we'll remove all callbacks for the specified view(s).\r\n     *\r\n     * @param {!Query} query\r\n     * @param {?EventRegistration} eventRegistration If null, remove all callbacks.\r\n     * @param {Error=} cancelError If a cancelError is provided, appropriate cancel events will be returned.\r\n     * @return {{removed:!Array.<!Query>, events:!Array.<!Event>}} removed queries and any cancel events\r\n     */\r\n    SyncPoint.prototype.removeEventRegistration = function (query, eventRegistration, cancelError) {\r\n        var queryId = query.queryIdentifier();\r\n        var removed = [];\r\n        var cancelEvents = [];\r\n        var hadCompleteView = this.hasCompleteView();\r\n        if (queryId === 'default') {\r\n            // When you do ref.off(...), we search all views for the registration to remove.\r\n            var self_1 = this;\r\n            util.forEach(this.views_, function (viewQueryId, view) {\r\n                cancelEvents = cancelEvents.concat(view.removeEventRegistration(eventRegistration, cancelError));\r\n                if (view.isEmpty()) {\r\n                    delete self_1.views_[viewQueryId];\r\n                    // We'll deal with complete views later.\r\n                    if (!view\r\n                        .getQuery()\r\n                        .getQueryParams()\r\n                        .loadsAllData()) {\r\n                        removed.push(view.getQuery());\r\n                    }\r\n                }\r\n            });\r\n        }\r\n        else {\r\n            // remove the callback from the specific view.\r\n            var view = util.safeGet(this.views_, queryId);\r\n            if (view) {\r\n                cancelEvents = cancelEvents.concat(view.removeEventRegistration(eventRegistration, cancelError));\r\n                if (view.isEmpty()) {\r\n                    delete this.views_[queryId];\r\n                    // We'll deal with complete views later.\r\n                    if (!view\r\n                        .getQuery()\r\n                        .getQueryParams()\r\n                        .loadsAllData()) {\r\n                        removed.push(view.getQuery());\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        if (hadCompleteView && !this.hasCompleteView()) {\r\n            // We removed our last complete view.\r\n            removed.push(new SyncPoint.__referenceConstructor(query.repo, query.path));\r\n        }\r\n        return { removed: removed, events: cancelEvents };\r\n    };\r\n    /**\r\n     * @return {!Array.<!View>}\r\n     */\r\n    SyncPoint.prototype.getQueryViews = function () {\r\n        var _this = this;\r\n        var values = Object.keys(this.views_).map(function (key) { return _this.views_[key]; });\r\n        return values.filter(function (view) {\r\n            return !view\r\n                .getQuery()\r\n                .getQueryParams()\r\n                .loadsAllData();\r\n        });\r\n    };\r\n    /**\r\n     *\r\n     * @param {!Path} path The path to the desired complete snapshot\r\n     * @return {?Node} A complete cache, if it exists\r\n     */\r\n    SyncPoint.prototype.getCompleteServerCache = function (path) {\r\n        var serverCache = null;\r\n        util.forEach(this.views_, function (key, view) {\r\n            serverCache = serverCache || view.getCompleteServerCache(path);\r\n        });\r\n        return serverCache;\r\n    };\r\n    /**\r\n     * @param {!Query} query\r\n     * @return {?View}\r\n     */\r\n    SyncPoint.prototype.viewForQuery = function (query) {\r\n        var params = query.getQueryParams();\r\n        if (params.loadsAllData()) {\r\n            return this.getCompleteView();\r\n        }\r\n        else {\r\n            var queryId = query.queryIdentifier();\r\n            return util.safeGet(this.views_, queryId);\r\n        }\r\n    };\r\n    /**\r\n     * @param {!Query} query\r\n     * @return {boolean}\r\n     */\r\n    SyncPoint.prototype.viewExistsForQuery = function (query) {\r\n        return this.viewForQuery(query) != null;\r\n    };\r\n    /**\r\n     * @return {boolean}\r\n     */\r\n    SyncPoint.prototype.hasCompleteView = function () {\r\n        return this.getCompleteView() != null;\r\n    };\r\n    /**\r\n     * @return {?View}\r\n     */\r\n    SyncPoint.prototype.getCompleteView = function () {\r\n        var completeView = util.findValue(this.views_, function (view) {\r\n            return view\r\n                .getQuery()\r\n                .getQueryParams()\r\n                .loadsAllData();\r\n        });\r\n        return completeView || null;\r\n    };\r\n    return SyncPoint;\r\n}());\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * This class holds a collection of writes that can be applied to nodes in unison. It abstracts away the logic with\r\n * dealing with priority writes and multiple nested writes. At any given path there is only allowed to be one write\r\n * modifying that path. Any write to an existing path or shadowing an existing path will modify that existing write\r\n * to reflect the write added.\r\n *\r\n * @constructor\r\n * @param {!ImmutableTree.<!Node>} writeTree\r\n */\r\nvar CompoundWrite = /** @class */ (function () {\r\n    function CompoundWrite(writeTree_) {\r\n        this.writeTree_ = writeTree_;\r\n    }\r\n    /**\r\n     * @param {!Path} path\r\n     * @param {!Node} node\r\n     * @return {!CompoundWrite}\r\n     */\r\n    CompoundWrite.prototype.addWrite = function (path, node) {\r\n        if (path.isEmpty()) {\r\n            return new CompoundWrite(new ImmutableTree(node));\r\n        }\r\n        else {\r\n            var rootmost = this.writeTree_.findRootMostValueAndPath(path);\r\n            if (rootmost != null) {\r\n                var rootMostPath = rootmost.path;\r\n                var value = rootmost.value;\r\n                var relativePath = Path.relativePath(rootMostPath, path);\r\n                value = value.updateChild(relativePath, node);\r\n                return new CompoundWrite(this.writeTree_.set(rootMostPath, value));\r\n            }\r\n            else {\r\n                var subtree = new ImmutableTree(node);\r\n                var newWriteTree = this.writeTree_.setTree(path, subtree);\r\n                return new CompoundWrite(newWriteTree);\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * @param {!Path} path\r\n     * @param {!Object.<string, !Node>} updates\r\n     * @return {!CompoundWrite}\r\n     */\r\n    CompoundWrite.prototype.addWrites = function (path, updates) {\r\n        var newWrite = this;\r\n        util.forEach(updates, function (childKey, node) {\r\n            newWrite = newWrite.addWrite(path.child(childKey), node);\r\n        });\r\n        return newWrite;\r\n    };\r\n    /**\r\n     * Will remove a write at the given path and deeper paths. This will <em>not</em> modify a write at a higher\r\n     * location, which must be removed by calling this method with that path.\r\n     *\r\n     * @param {!Path} path The path at which a write and all deeper writes should be removed\r\n     * @return {!CompoundWrite} The new CompoundWrite with the removed path\r\n     */\r\n    CompoundWrite.prototype.removeWrite = function (path) {\r\n        if (path.isEmpty()) {\r\n            return CompoundWrite.Empty;\r\n        }\r\n        else {\r\n            var newWriteTree = this.writeTree_.setTree(path, ImmutableTree.Empty);\r\n            return new CompoundWrite(newWriteTree);\r\n        }\r\n    };\r\n    /**\r\n     * Returns whether this CompoundWrite will fully overwrite a node at a given location and can therefore be\r\n     * considered \"complete\".\r\n     *\r\n     * @param {!Path} path The path to check for\r\n     * @return {boolean} Whether there is a complete write at that path\r\n     */\r\n    CompoundWrite.prototype.hasCompleteWrite = function (path) {\r\n        return this.getCompleteNode(path) != null;\r\n    };\r\n    /**\r\n     * Returns a node for a path if and only if the node is a \"complete\" overwrite at that path. This will not aggregate\r\n     * writes from deeper paths, but will return child nodes from a more shallow path.\r\n     *\r\n     * @param {!Path} path The path to get a complete write\r\n     * @return {?Node} The node if complete at that path, or null otherwise.\r\n     */\r\n    CompoundWrite.prototype.getCompleteNode = function (path) {\r\n        var rootmost = this.writeTree_.findRootMostValueAndPath(path);\r\n        if (rootmost != null) {\r\n            return this.writeTree_\r\n                .get(rootmost.path)\r\n                .getChild(Path.relativePath(rootmost.path, path));\r\n        }\r\n        else {\r\n            return null;\r\n        }\r\n    };\r\n    /**\r\n     * Returns all children that are guaranteed to be a complete overwrite.\r\n     *\r\n     * @return {!Array.<NamedNode>} A list of all complete children.\r\n     */\r\n    CompoundWrite.prototype.getCompleteChildren = function () {\r\n        var children = [];\r\n        var node = this.writeTree_.value;\r\n        if (node != null) {\r\n            // If it's a leaf node, it has no children; so nothing to do.\r\n            if (!node.isLeafNode()) {\r\n                node.forEachChild(PRIORITY_INDEX, function (childName, childNode) {\r\n                    children.push(new NamedNode(childName, childNode));\r\n                });\r\n            }\r\n        }\r\n        else {\r\n            this.writeTree_.children.inorderTraversal(function (childName, childTree) {\r\n                if (childTree.value != null) {\r\n                    children.push(new NamedNode(childName, childTree.value));\r\n                }\r\n            });\r\n        }\r\n        return children;\r\n    };\r\n    /**\r\n     * @param {!Path} path\r\n     * @return {!CompoundWrite}\r\n     */\r\n    CompoundWrite.prototype.childCompoundWrite = function (path) {\r\n        if (path.isEmpty()) {\r\n            return this;\r\n        }\r\n        else {\r\n            var shadowingNode = this.getCompleteNode(path);\r\n            if (shadowingNode != null) {\r\n                return new CompoundWrite(new ImmutableTree(shadowingNode));\r\n            }\r\n            else {\r\n                return new CompoundWrite(this.writeTree_.subtree(path));\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * Returns true if this CompoundWrite is empty and therefore does not modify any nodes.\r\n     * @return {boolean} Whether this CompoundWrite is empty\r\n     */\r\n    CompoundWrite.prototype.isEmpty = function () {\r\n        return this.writeTree_.isEmpty();\r\n    };\r\n    /**\r\n     * Applies this CompoundWrite to a node. The node is returned with all writes from this CompoundWrite applied to the\r\n     * node\r\n     * @param {!Node} node The node to apply this CompoundWrite to\r\n     * @return {!Node} The node with all writes applied\r\n     */\r\n    CompoundWrite.prototype.apply = function (node) {\r\n        return CompoundWrite.applySubtreeWrite_(Path.Empty, this.writeTree_, node);\r\n    };\r\n    /**\r\n     * @type {!CompoundWrite}\r\n     */\r\n    CompoundWrite.Empty = new CompoundWrite(new ImmutableTree(null));\r\n    /**\r\n     * @param {!Path} relativePath\r\n     * @param {!ImmutableTree.<!Node>} writeTree\r\n     * @param {!Node} node\r\n     * @return {!Node}\r\n     * @private\r\n     */\r\n    CompoundWrite.applySubtreeWrite_ = function (relativePath, writeTree, node) {\r\n        if (writeTree.value != null) {\r\n            // Since there a write is always a leaf, we're done here\r\n            return node.updateChild(relativePath, writeTree.value);\r\n        }\r\n        else {\r\n            var priorityWrite_1 = null;\r\n            writeTree.children.inorderTraversal(function (childKey, childTree) {\r\n                if (childKey === '.priority') {\r\n                    // Apply priorities at the end so we don't update priorities for either empty nodes or forget\r\n                    // to apply priorities to empty nodes that are later filled\r\n                    util.assert(childTree.value !== null, 'Priority writes must always be leaf nodes');\r\n                    priorityWrite_1 = childTree.value;\r\n                }\r\n                else {\r\n                    node = CompoundWrite.applySubtreeWrite_(relativePath.child(childKey), childTree, node);\r\n                }\r\n            });\r\n            // If there was a priority write, we only apply it if the node is not empty\r\n            if (!node.getChild(relativePath).isEmpty() && priorityWrite_1 !== null) {\r\n                node = node.updateChild(relativePath.child('.priority'), priorityWrite_1);\r\n            }\r\n            return node;\r\n        }\r\n    };\r\n    return CompoundWrite;\r\n}());\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * WriteTree tracks all pending user-initiated writes and has methods to calculate the result of merging them\r\n * with underlying server data (to create \"event cache\" data).  Pending writes are added with addOverwrite()\r\n * and addMerge(), and removed with removeWrite().\r\n *\r\n * @constructor\r\n */\r\nvar WriteTree = /** @class */ (function () {\r\n    function WriteTree() {\r\n        /**\r\n         * A tree tracking the result of applying all visible writes.  This does not include transactions with\r\n         * applyLocally=false or writes that are completely shadowed by other writes.\r\n         *\r\n         * @type {!CompoundWrite}\r\n         * @private\r\n         */\r\n        this.visibleWrites_ = CompoundWrite.Empty;\r\n        /**\r\n         * A list of all pending writes, regardless of visibility and shadowed-ness.  Used to calculate arbitrary\r\n         * sets of the changed data, such as hidden writes (from transactions) or changes with certain writes excluded (also\r\n         * used by transactions).\r\n         *\r\n         * @type {!Array.<!WriteRecord>}\r\n         * @private\r\n         */\r\n        this.allWrites_ = [];\r\n        this.lastWriteId_ = -1;\r\n    }\r\n    /**\r\n     * Create a new WriteTreeRef for the given path. For use with a new sync point at the given path.\r\n     *\r\n     * @param {!Path} path\r\n     * @return {!WriteTreeRef}\r\n     */\r\n    WriteTree.prototype.childWrites = function (path) {\r\n        return new WriteTreeRef(path, this);\r\n    };\r\n    /**\r\n     * Record a new overwrite from user code.\r\n     *\r\n     * @param {!Path} path\r\n     * @param {!Node} snap\r\n     * @param {!number} writeId\r\n     * @param {boolean=} visible This is set to false by some transactions. It should be excluded from event caches\r\n     */\r\n    WriteTree.prototype.addOverwrite = function (path, snap, writeId, visible) {\r\n        util.assert(writeId > this.lastWriteId_, 'Stacking an older write on top of newer ones');\r\n        if (visible === undefined) {\r\n            visible = true;\r\n        }\r\n        this.allWrites_.push({\r\n            path: path,\r\n            snap: snap,\r\n            writeId: writeId,\r\n            visible: visible\r\n        });\r\n        if (visible) {\r\n            this.visibleWrites_ = this.visibleWrites_.addWrite(path, snap);\r\n        }\r\n        this.lastWriteId_ = writeId;\r\n    };\r\n    /**\r\n     * Record a new merge from user code.\r\n     *\r\n     * @param {!Path} path\r\n     * @param {!Object.<string, !Node>} changedChildren\r\n     * @param {!number} writeId\r\n     */\r\n    WriteTree.prototype.addMerge = function (path, changedChildren, writeId) {\r\n        util.assert(writeId > this.lastWriteId_, 'Stacking an older merge on top of newer ones');\r\n        this.allWrites_.push({\r\n            path: path,\r\n            children: changedChildren,\r\n            writeId: writeId,\r\n            visible: true\r\n        });\r\n        this.visibleWrites_ = this.visibleWrites_.addWrites(path, changedChildren);\r\n        this.lastWriteId_ = writeId;\r\n    };\r\n    /**\r\n     * @param {!number} writeId\r\n     * @return {?WriteRecord}\r\n     */\r\n    WriteTree.prototype.getWrite = function (writeId) {\r\n        for (var i = 0; i < this.allWrites_.length; i++) {\r\n            var record = this.allWrites_[i];\r\n            if (record.writeId === writeId) {\r\n                return record;\r\n            }\r\n        }\r\n        return null;\r\n    };\r\n    /**\r\n     * Remove a write (either an overwrite or merge) that has been successfully acknowledge by the server. Recalculates\r\n     * the tree if necessary.  We return true if it may have been visible, meaning views need to reevaluate.\r\n     *\r\n     * @param {!number} writeId\r\n     * @return {boolean} true if the write may have been visible (meaning we'll need to reevaluate / raise\r\n     * events as a result).\r\n     */\r\n    WriteTree.prototype.removeWrite = function (writeId) {\r\n        // Note: disabling this check. It could be a transaction that preempted another transaction, and thus was applied\r\n        // out of order.\r\n        //const validClear = revert || this.allWrites_.length === 0 || writeId <= this.allWrites_[0].writeId;\r\n        //assert(validClear, \"Either we don't have this write, or it's the first one in the queue\");\r\n        var _this = this;\r\n        var idx = this.allWrites_.findIndex(function (s) {\r\n            return s.writeId === writeId;\r\n        });\r\n        util.assert(idx >= 0, 'removeWrite called with nonexistent writeId.');\r\n        var writeToRemove = this.allWrites_[idx];\r\n        this.allWrites_.splice(idx, 1);\r\n        var removedWriteWasVisible = writeToRemove.visible;\r\n        var removedWriteOverlapsWithOtherWrites = false;\r\n        var i = this.allWrites_.length - 1;\r\n        while (removedWriteWasVisible && i >= 0) {\r\n            var currentWrite = this.allWrites_[i];\r\n            if (currentWrite.visible) {\r\n                if (i >= idx &&\r\n                    this.recordContainsPath_(currentWrite, writeToRemove.path)) {\r\n                    // The removed write was completely shadowed by a subsequent write.\r\n                    removedWriteWasVisible = false;\r\n                }\r\n                else if (writeToRemove.path.contains(currentWrite.path)) {\r\n                    // Either we're covering some writes or they're covering part of us (depending on which came first).\r\n                    removedWriteOverlapsWithOtherWrites = true;\r\n                }\r\n            }\r\n            i--;\r\n        }\r\n        if (!removedWriteWasVisible) {\r\n            return false;\r\n        }\r\n        else if (removedWriteOverlapsWithOtherWrites) {\r\n            // There's some shadowing going on. Just rebuild the visible writes from scratch.\r\n            this.resetTree_();\r\n            return true;\r\n        }\r\n        else {\r\n            // There's no shadowing.  We can safely just remove the write(s) from visibleWrites.\r\n            if (writeToRemove.snap) {\r\n                this.visibleWrites_ = this.visibleWrites_.removeWrite(writeToRemove.path);\r\n            }\r\n            else {\r\n                var children = writeToRemove.children;\r\n                util.forEach(children, function (childName) {\r\n                    _this.visibleWrites_ = _this.visibleWrites_.removeWrite(writeToRemove.path.child(childName));\r\n                });\r\n            }\r\n            return true;\r\n        }\r\n    };\r\n    /**\r\n     * Return a complete snapshot for the given path if there's visible write data at that path, else null.\r\n     * No server data is considered.\r\n     *\r\n     * @param {!Path} path\r\n     * @return {?Node}\r\n     */\r\n    WriteTree.prototype.getCompleteWriteData = function (path) {\r\n        return this.visibleWrites_.getCompleteNode(path);\r\n    };\r\n    /**\r\n     * Given optional, underlying server data, and an optional set of constraints (exclude some sets, include hidden\r\n     * writes), attempt to calculate a complete snapshot for the given path\r\n     *\r\n     * @param {!Path} treePath\r\n     * @param {?Node} completeServerCache\r\n     * @param {Array.<number>=} writeIdsToExclude An optional set to be excluded\r\n     * @param {boolean=} includeHiddenWrites Defaults to false, whether or not to layer on writes with visible set to false\r\n     * @return {?Node}\r\n     */\r\n    WriteTree.prototype.calcCompleteEventCache = function (treePath, completeServerCache, writeIdsToExclude, includeHiddenWrites) {\r\n        if (!writeIdsToExclude && !includeHiddenWrites) {\r\n            var shadowingNode = this.visibleWrites_.getCompleteNode(treePath);\r\n            if (shadowingNode != null) {\r\n                return shadowingNode;\r\n            }\r\n            else {\r\n                var subMerge = this.visibleWrites_.childCompoundWrite(treePath);\r\n                if (subMerge.isEmpty()) {\r\n                    return completeServerCache;\r\n                }\r\n                else if (completeServerCache == null &&\r\n                    !subMerge.hasCompleteWrite(Path.Empty)) {\r\n                    // We wouldn't have a complete snapshot, since there's no underlying data and no complete shadow\r\n                    return null;\r\n                }\r\n                else {\r\n                    var layeredCache = completeServerCache || ChildrenNode.EMPTY_NODE;\r\n                    return subMerge.apply(layeredCache);\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            var merge = this.visibleWrites_.childCompoundWrite(treePath);\r\n            if (!includeHiddenWrites && merge.isEmpty()) {\r\n                return completeServerCache;\r\n            }\r\n            else {\r\n                // If the server cache is null, and we don't have a complete cache, we need to return null\r\n                if (!includeHiddenWrites &&\r\n                    completeServerCache == null &&\r\n                    !merge.hasCompleteWrite(Path.Empty)) {\r\n                    return null;\r\n                }\r\n                else {\r\n                    var filter = function (write) {\r\n                        return ((write.visible || includeHiddenWrites) &&\r\n                            (!writeIdsToExclude ||\r\n                                !~writeIdsToExclude.indexOf(write.writeId)) &&\r\n                            (write.path.contains(treePath) || treePath.contains(write.path)));\r\n                    };\r\n                    var mergeAtPath = WriteTree.layerTree_(this.allWrites_, filter, treePath);\r\n                    var layeredCache = completeServerCache || ChildrenNode.EMPTY_NODE;\r\n                    return mergeAtPath.apply(layeredCache);\r\n                }\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * With optional, underlying server data, attempt to return a children node of children that we have complete data for.\r\n     * Used when creating new views, to pre-fill their complete event children snapshot.\r\n     *\r\n     * @param {!Path} treePath\r\n     * @param {?ChildrenNode} completeServerChildren\r\n     * @return {!ChildrenNode}\r\n     */\r\n    WriteTree.prototype.calcCompleteEventChildren = function (treePath, completeServerChildren) {\r\n        var completeChildren = ChildrenNode.EMPTY_NODE;\r\n        var topLevelSet = this.visibleWrites_.getCompleteNode(treePath);\r\n        if (topLevelSet) {\r\n            if (!topLevelSet.isLeafNode()) {\r\n                // we're shadowing everything. Return the children.\r\n                topLevelSet.forEachChild(PRIORITY_INDEX, function (childName, childSnap) {\r\n                    completeChildren = completeChildren.updateImmediateChild(childName, childSnap);\r\n                });\r\n            }\r\n            return completeChildren;\r\n        }\r\n        else if (completeServerChildren) {\r\n            // Layer any children we have on top of this\r\n            // We know we don't have a top-level set, so just enumerate existing children\r\n            var merge_1 = this.visibleWrites_.childCompoundWrite(treePath);\r\n            completeServerChildren.forEachChild(PRIORITY_INDEX, function (childName, childNode) {\r\n                var node = merge_1\r\n                    .childCompoundWrite(new Path(childName))\r\n                    .apply(childNode);\r\n                completeChildren = completeChildren.updateImmediateChild(childName, node);\r\n            });\r\n            // Add any complete children we have from the set\r\n            merge_1.getCompleteChildren().forEach(function (namedNode) {\r\n                completeChildren = completeChildren.updateImmediateChild(namedNode.name, namedNode.node);\r\n            });\r\n            return completeChildren;\r\n        }\r\n        else {\r\n            // We don't have anything to layer on top of. Layer on any children we have\r\n            // Note that we can return an empty snap if we have a defined delete\r\n            var merge = this.visibleWrites_.childCompoundWrite(treePath);\r\n            merge.getCompleteChildren().forEach(function (namedNode) {\r\n                completeChildren = completeChildren.updateImmediateChild(namedNode.name, namedNode.node);\r\n            });\r\n            return completeChildren;\r\n        }\r\n    };\r\n    /**\r\n     * Given that the underlying server data has updated, determine what, if anything, needs to be\r\n     * applied to the event cache.\r\n     *\r\n     * Possibilities:\r\n     *\r\n     * 1. No writes are shadowing. Events should be raised, the snap to be applied comes from the server data\r\n     *\r\n     * 2. Some write is completely shadowing. No events to be raised\r\n     *\r\n     * 3. Is partially shadowed. Events\r\n     *\r\n     * Either existingEventSnap or existingServerSnap must exist\r\n     *\r\n     * @param {!Path} treePath\r\n     * @param {!Path} childPath\r\n     * @param {?Node} existingEventSnap\r\n     * @param {?Node} existingServerSnap\r\n     * @return {?Node}\r\n     */\r\n    WriteTree.prototype.calcEventCacheAfterServerOverwrite = function (treePath, childPath, existingEventSnap, existingServerSnap) {\r\n        util.assert(existingEventSnap || existingServerSnap, 'Either existingEventSnap or existingServerSnap must exist');\r\n        var path = treePath.child(childPath);\r\n        if (this.visibleWrites_.hasCompleteWrite(path)) {\r\n            // At this point we can probably guarantee that we're in case 2, meaning no events\r\n            // May need to check visibility while doing the findRootMostValueAndPath call\r\n            return null;\r\n        }\r\n        else {\r\n            // No complete shadowing. We're either partially shadowing or not shadowing at all.\r\n            var childMerge = this.visibleWrites_.childCompoundWrite(path);\r\n            if (childMerge.isEmpty()) {\r\n                // We're not shadowing at all. Case 1\r\n                return existingServerSnap.getChild(childPath);\r\n            }\r\n            else {\r\n                // This could be more efficient if the serverNode + updates doesn't change the eventSnap\r\n                // However this is tricky to find out, since user updates don't necessary change the server\r\n                // snap, e.g. priority updates on empty nodes, or deep deletes. Another special case is if the server\r\n                // adds nodes, but doesn't change any existing writes. It is therefore not enough to\r\n                // only check if the updates change the serverNode.\r\n                // Maybe check if the merge tree contains these special cases and only do a full overwrite in that case?\r\n                return childMerge.apply(existingServerSnap.getChild(childPath));\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * Returns a complete child for a given server snap after applying all user writes or null if there is no\r\n     * complete child for this ChildKey.\r\n     *\r\n     * @param {!Path} treePath\r\n     * @param {!string} childKey\r\n     * @param {!CacheNode} existingServerSnap\r\n     * @return {?Node}\r\n     */\r\n    WriteTree.prototype.calcCompleteChild = function (treePath, childKey, existingServerSnap) {\r\n        var path = treePath.child(childKey);\r\n        var shadowingNode = this.visibleWrites_.getCompleteNode(path);\r\n        if (shadowingNode != null) {\r\n            return shadowingNode;\r\n        }\r\n        else {\r\n            if (existingServerSnap.isCompleteForChild(childKey)) {\r\n                var childMerge = this.visibleWrites_.childCompoundWrite(path);\r\n                return childMerge.apply(existingServerSnap.getNode().getImmediateChild(childKey));\r\n            }\r\n            else {\r\n                return null;\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * Returns a node if there is a complete overwrite for this path. More specifically, if there is a write at\r\n     * a higher path, this will return the child of that write relative to the write and this path.\r\n     * Returns null if there is no write at this path.\r\n     *\r\n     * @param {!Path} path\r\n     * @return {?Node}\r\n     */\r\n    WriteTree.prototype.shadowingWrite = function (path) {\r\n        return this.visibleWrites_.getCompleteNode(path);\r\n    };\r\n    /**\r\n     * This method is used when processing child remove events on a query. If we can, we pull in children that were outside\r\n     * the window, but may now be in the window.\r\n     *\r\n     * @param {!Path} treePath\r\n     * @param {?Node} completeServerData\r\n     * @param {!NamedNode} startPost\r\n     * @param {!number} count\r\n     * @param {boolean} reverse\r\n     * @param {!Index} index\r\n     * @return {!Array.<!NamedNode>}\r\n     */\r\n    WriteTree.prototype.calcIndexedSlice = function (treePath, completeServerData, startPost, count, reverse, index) {\r\n        var toIterate;\r\n        var merge = this.visibleWrites_.childCompoundWrite(treePath);\r\n        var shadowingNode = merge.getCompleteNode(Path.Empty);\r\n        if (shadowingNode != null) {\r\n            toIterate = shadowingNode;\r\n        }\r\n        else if (completeServerData != null) {\r\n            toIterate = merge.apply(completeServerData);\r\n        }\r\n        else {\r\n            // no children to iterate on\r\n            return [];\r\n        }\r\n        toIterate = toIterate.withIndex(index);\r\n        if (!toIterate.isEmpty() && !toIterate.isLeafNode()) {\r\n            var nodes = [];\r\n            var cmp = index.getCompare();\r\n            var iter = reverse\r\n                ? toIterate.getReverseIteratorFrom(startPost, index)\r\n                : toIterate.getIteratorFrom(startPost, index);\r\n            var next = iter.getNext();\r\n            while (next && nodes.length < count) {\r\n                if (cmp(next, startPost) !== 0) {\r\n                    nodes.push(next);\r\n                }\r\n                next = iter.getNext();\r\n            }\r\n            return nodes;\r\n        }\r\n        else {\r\n            return [];\r\n        }\r\n    };\r\n    /**\r\n     * @param {!WriteRecord} writeRecord\r\n     * @param {!Path} path\r\n     * @return {boolean}\r\n     * @private\r\n     */\r\n    WriteTree.prototype.recordContainsPath_ = function (writeRecord, path) {\r\n        if (writeRecord.snap) {\r\n            return writeRecord.path.contains(path);\r\n        }\r\n        else {\r\n            // findKey can return undefined, so use !! to coerce to boolean\r\n            return !!util.findKey(writeRecord.children, function (childSnap, childName) {\r\n                return writeRecord.path.child(childName).contains(path);\r\n            });\r\n        }\r\n    };\r\n    /**\r\n     * Re-layer the writes and merges into a tree so we can efficiently calculate event snapshots\r\n     * @private\r\n     */\r\n    WriteTree.prototype.resetTree_ = function () {\r\n        this.visibleWrites_ = WriteTree.layerTree_(this.allWrites_, WriteTree.DefaultFilter_, Path.Empty);\r\n        if (this.allWrites_.length > 0) {\r\n            this.lastWriteId_ = this.allWrites_[this.allWrites_.length - 1].writeId;\r\n        }\r\n        else {\r\n            this.lastWriteId_ = -1;\r\n        }\r\n    };\r\n    /**\r\n     * The default filter used when constructing the tree. Keep everything that's visible.\r\n     *\r\n     * @param {!WriteRecord} write\r\n     * @return {boolean}\r\n     * @private\r\n     */\r\n    WriteTree.DefaultFilter_ = function (write) {\r\n        return write.visible;\r\n    };\r\n    /**\r\n     * Static method. Given an array of WriteRecords, a filter for which ones to include, and a path, construct the tree of\r\n     * event data at that path.\r\n     *\r\n     * @param {!Array.<!WriteRecord>} writes\r\n     * @param {!function(!WriteRecord):boolean} filter\r\n     * @param {!Path} treeRoot\r\n     * @return {!CompoundWrite}\r\n     * @private\r\n     */\r\n    WriteTree.layerTree_ = function (writes, filter, treeRoot) {\r\n        var compoundWrite = CompoundWrite.Empty;\r\n        for (var i = 0; i < writes.length; ++i) {\r\n            var write = writes[i];\r\n            // Theory, a later set will either:\r\n            // a) abort a relevant transaction, so no need to worry about excluding it from calculating that transaction\r\n            // b) not be relevant to a transaction (separate branch), so again will not affect the data for that transaction\r\n            if (filter(write)) {\r\n                var writePath = write.path;\r\n                var relativePath = void 0;\r\n                if (write.snap) {\r\n                    if (treeRoot.contains(writePath)) {\r\n                        relativePath = Path.relativePath(treeRoot, writePath);\r\n                        compoundWrite = compoundWrite.addWrite(relativePath, write.snap);\r\n                    }\r\n                    else if (writePath.contains(treeRoot)) {\r\n                        relativePath = Path.relativePath(writePath, treeRoot);\r\n                        compoundWrite = compoundWrite.addWrite(Path.Empty, write.snap.getChild(relativePath));\r\n                    }\r\n                    else {\r\n                        // There is no overlap between root path and write path, ignore write\r\n                    }\r\n                }\r\n                else if (write.children) {\r\n                    if (treeRoot.contains(writePath)) {\r\n                        relativePath = Path.relativePath(treeRoot, writePath);\r\n                        compoundWrite = compoundWrite.addWrites(relativePath, write.children);\r\n                    }\r\n                    else if (writePath.contains(treeRoot)) {\r\n                        relativePath = Path.relativePath(writePath, treeRoot);\r\n                        if (relativePath.isEmpty()) {\r\n                            compoundWrite = compoundWrite.addWrites(Path.Empty, write.children);\r\n                        }\r\n                        else {\r\n                            var child = util.safeGet(write.children, relativePath.getFront());\r\n                            if (child) {\r\n                                // There exists a child in this node that matches the root path\r\n                                var deepNode = child.getChild(relativePath.popFront());\r\n                                compoundWrite = compoundWrite.addWrite(Path.Empty, deepNode);\r\n                            }\r\n                        }\r\n                    }\r\n                    else {\r\n                        // There is no overlap between root path and write path, ignore write\r\n                    }\r\n                }\r\n                else {\r\n                    throw util.assertionError('WriteRecord should have .snap or .children');\r\n                }\r\n            }\r\n        }\r\n        return compoundWrite;\r\n    };\r\n    return WriteTree;\r\n}());\r\n/**\r\n * A WriteTreeRef wraps a WriteTree and a path, for convenient access to a particular subtree.  All of the methods\r\n * just proxy to the underlying WriteTree.\r\n *\r\n * @constructor\r\n */\r\nvar WriteTreeRef = /** @class */ (function () {\r\n    /**\r\n     * @param {!Path} path\r\n     * @param {!WriteTree} writeTree\r\n     */\r\n    function WriteTreeRef(path, writeTree) {\r\n        this.treePath_ = path;\r\n        this.writeTree_ = writeTree;\r\n    }\r\n    /**\r\n     * If possible, returns a complete event cache, using the underlying server data if possible. In addition, can be used\r\n     * to get a cache that includes hidden writes, and excludes arbitrary writes. Note that customizing the returned node\r\n     * can lead to a more expensive calculation.\r\n     *\r\n     * @param {?Node} completeServerCache\r\n     * @param {Array.<number>=} writeIdsToExclude Optional writes to exclude.\r\n     * @param {boolean=} includeHiddenWrites Defaults to false, whether or not to layer on writes with visible set to false\r\n     * @return {?Node}\r\n     */\r\n    WriteTreeRef.prototype.calcCompleteEventCache = function (completeServerCache, writeIdsToExclude, includeHiddenWrites) {\r\n        return this.writeTree_.calcCompleteEventCache(this.treePath_, completeServerCache, writeIdsToExclude, includeHiddenWrites);\r\n    };\r\n    /**\r\n     * If possible, returns a children node containing all of the complete children we have data for. The returned data is a\r\n     * mix of the given server data and write data.\r\n     *\r\n     * @param {?ChildrenNode} completeServerChildren\r\n     * @return {!ChildrenNode}\r\n     */\r\n    WriteTreeRef.prototype.calcCompleteEventChildren = function (completeServerChildren) {\r\n        return this.writeTree_.calcCompleteEventChildren(this.treePath_, completeServerChildren);\r\n    };\r\n    /**\r\n     * Given that either the underlying server data has updated or the outstanding writes have updated, determine what,\r\n     * if anything, needs to be applied to the event cache.\r\n     *\r\n     * Possibilities:\r\n     *\r\n     * 1. No writes are shadowing. Events should be raised, the snap to be applied comes from the server data\r\n     *\r\n     * 2. Some write is completely shadowing. No events to be raised\r\n     *\r\n     * 3. Is partially shadowed. Events should be raised\r\n     *\r\n     * Either existingEventSnap or existingServerSnap must exist, this is validated via an assert\r\n     *\r\n     * @param {!Path} path\r\n     * @param {?Node} existingEventSnap\r\n     * @param {?Node} existingServerSnap\r\n     * @return {?Node}\r\n     */\r\n    WriteTreeRef.prototype.calcEventCacheAfterServerOverwrite = function (path, existingEventSnap, existingServerSnap) {\r\n        return this.writeTree_.calcEventCacheAfterServerOverwrite(this.treePath_, path, existingEventSnap, existingServerSnap);\r\n    };\r\n    /**\r\n     * Returns a node if there is a complete overwrite for this path. More specifically, if there is a write at\r\n     * a higher path, this will return the child of that write relative to the write and this path.\r\n     * Returns null if there is no write at this path.\r\n     *\r\n     * @param {!Path} path\r\n     * @return {?Node}\r\n     */\r\n    WriteTreeRef.prototype.shadowingWrite = function (path) {\r\n        return this.writeTree_.shadowingWrite(this.treePath_.child(path));\r\n    };\r\n    /**\r\n     * This method is used when processing child remove events on a query. If we can, we pull in children that were outside\r\n     * the window, but may now be in the window\r\n     *\r\n     * @param {?Node} completeServerData\r\n     * @param {!NamedNode} startPost\r\n     * @param {!number} count\r\n     * @param {boolean} reverse\r\n     * @param {!Index} index\r\n     * @return {!Array.<!NamedNode>}\r\n     */\r\n    WriteTreeRef.prototype.calcIndexedSlice = function (completeServerData, startPost, count, reverse, index) {\r\n        return this.writeTree_.calcIndexedSlice(this.treePath_, completeServerData, startPost, count, reverse, index);\r\n    };\r\n    /**\r\n     * Returns a complete child for a given server snap after applying all user writes or null if there is no\r\n     * complete child for this ChildKey.\r\n     *\r\n     * @param {!string} childKey\r\n     * @param {!CacheNode} existingServerCache\r\n     * @return {?Node}\r\n     */\r\n    WriteTreeRef.prototype.calcCompleteChild = function (childKey, existingServerCache) {\r\n        return this.writeTree_.calcCompleteChild(this.treePath_, childKey, existingServerCache);\r\n    };\r\n    /**\r\n     * Return a WriteTreeRef for a child.\r\n     *\r\n     * @param {string} childName\r\n     * @return {!WriteTreeRef}\r\n     */\r\n    WriteTreeRef.prototype.child = function (childName) {\r\n        return new WriteTreeRef(this.treePath_.child(childName), this.writeTree_);\r\n    };\r\n    return WriteTreeRef;\r\n}());\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * SyncTree is the central class for managing event callback registration, data caching, views\r\n * (query processing), and event generation.  There are typically two SyncTree instances for\r\n * each Repo, one for the normal Firebase data, and one for the .info data.\r\n *\r\n * It has a number of responsibilities, including:\r\n *  - Tracking all user event callbacks (registered via addEventRegistration() and removeEventRegistration()).\r\n *  - Applying and caching data changes for user set(), transaction(), and update() calls\r\n *    (applyUserOverwrite(), applyUserMerge()).\r\n *  - Applying and caching data changes for server data changes (applyServerOverwrite(),\r\n *    applyServerMerge()).\r\n *  - Generating user-facing events for server and user changes (all of the apply* methods\r\n *    return the set of events that need to be raised as a result).\r\n *  - Maintaining the appropriate set of server listens to ensure we are always subscribed\r\n *    to the correct set of paths and queries to satisfy the current set of user event\r\n *    callbacks (listens are started/stopped using the provided listenProvider).\r\n *\r\n * NOTE: Although SyncTree tracks event callbacks and calculates events to raise, the actual\r\n * events are returned to the caller rather than raised synchronously.\r\n *\r\n * @constructor\r\n */\r\nvar SyncTree = /** @class */ (function () {\r\n    /**\r\n     * @param {!ListenProvider} listenProvider_ Used by SyncTree to start / stop listening\r\n     *   to server data.\r\n     */\r\n    function SyncTree(listenProvider_) {\r\n        this.listenProvider_ = listenProvider_;\r\n        /**\r\n         * Tree of SyncPoints.  There's a SyncPoint at any location that has 1 or more views.\r\n         * @type {!ImmutableTree.<!SyncPoint>}\r\n         * @private\r\n         */\r\n        this.syncPointTree_ = ImmutableTree.Empty;\r\n        /**\r\n         * A tree of all pending user writes (user-initiated set()'s, transaction()'s, update()'s, etc.).\r\n         * @type {!WriteTree}\r\n         * @private\r\n         */\r\n        this.pendingWriteTree_ = new WriteTree();\r\n        this.tagToQueryMap_ = {};\r\n        this.queryToTagMap_ = {};\r\n    }\r\n    /**\r\n     * Apply the data changes for a user-generated set() or transaction() call.\r\n     *\r\n     * @param {!Path} path\r\n     * @param {!Node} newData\r\n     * @param {number} writeId\r\n     * @param {boolean=} visible\r\n     * @return {!Array.<!Event>} Events to raise.\r\n     */\r\n    SyncTree.prototype.applyUserOverwrite = function (path, newData, writeId, visible) {\r\n        // Record pending write.\r\n        this.pendingWriteTree_.addOverwrite(path, newData, writeId, visible);\r\n        if (!visible) {\r\n            return [];\r\n        }\r\n        else {\r\n            return this.applyOperationToSyncPoints_(new Overwrite(OperationSource.User, path, newData));\r\n        }\r\n    };\r\n    /**\r\n     * Apply the data from a user-generated update() call\r\n     *\r\n     * @param {!Path} path\r\n     * @param {!Object.<string, !Node>} changedChildren\r\n     * @param {!number} writeId\r\n     * @return {!Array.<!Event>} Events to raise.\r\n     */\r\n    SyncTree.prototype.applyUserMerge = function (path, changedChildren, writeId) {\r\n        // Record pending merge.\r\n        this.pendingWriteTree_.addMerge(path, changedChildren, writeId);\r\n        var changeTree = ImmutableTree.fromObject(changedChildren);\r\n        return this.applyOperationToSyncPoints_(new Merge(OperationSource.User, path, changeTree));\r\n    };\r\n    /**\r\n     * Acknowledge a pending user write that was previously registered with applyUserOverwrite() or applyUserMerge().\r\n     *\r\n     * @param {!number} writeId\r\n     * @param {boolean=} revert True if the given write failed and needs to be reverted\r\n     * @return {!Array.<!Event>} Events to raise.\r\n     */\r\n    SyncTree.prototype.ackUserWrite = function (writeId, revert) {\r\n        if (revert === void 0) { revert = false; }\r\n        var write = this.pendingWriteTree_.getWrite(writeId);\r\n        var needToReevaluate = this.pendingWriteTree_.removeWrite(writeId);\r\n        if (!needToReevaluate) {\r\n            return [];\r\n        }\r\n        else {\r\n            var affectedTree_1 = ImmutableTree.Empty;\r\n            if (write.snap != null) {\r\n                // overwrite\r\n                affectedTree_1 = affectedTree_1.set(Path.Empty, true);\r\n            }\r\n            else {\r\n                util.forEach(write.children, function (pathString, node) {\r\n                    affectedTree_1 = affectedTree_1.set(new Path(pathString), node);\r\n                });\r\n            }\r\n            return this.applyOperationToSyncPoints_(new AckUserWrite(write.path, affectedTree_1, revert));\r\n        }\r\n    };\r\n    /**\r\n     * Apply new server data for the specified path..\r\n     *\r\n     * @param {!Path} path\r\n     * @param {!Node} newData\r\n     * @return {!Array.<!Event>} Events to raise.\r\n     */\r\n    SyncTree.prototype.applyServerOverwrite = function (path, newData) {\r\n        return this.applyOperationToSyncPoints_(new Overwrite(OperationSource.Server, path, newData));\r\n    };\r\n    /**\r\n     * Apply new server data to be merged in at the specified path.\r\n     *\r\n     * @param {!Path} path\r\n     * @param {!Object.<string, !Node>} changedChildren\r\n     * @return {!Array.<!Event>} Events to raise.\r\n     */\r\n    SyncTree.prototype.applyServerMerge = function (path, changedChildren) {\r\n        var changeTree = ImmutableTree.fromObject(changedChildren);\r\n        return this.applyOperationToSyncPoints_(new Merge(OperationSource.Server, path, changeTree));\r\n    };\r\n    /**\r\n     * Apply a listen complete for a query\r\n     *\r\n     * @param {!Path} path\r\n     * @return {!Array.<!Event>} Events to raise.\r\n     */\r\n    SyncTree.prototype.applyListenComplete = function (path) {\r\n        return this.applyOperationToSyncPoints_(new ListenComplete(OperationSource.Server, path));\r\n    };\r\n    /**\r\n     * Apply new server data for the specified tagged query.\r\n     *\r\n     * @param {!Path} path\r\n     * @param {!Node} snap\r\n     * @param {!number} tag\r\n     * @return {!Array.<!Event>} Events to raise.\r\n     */\r\n    SyncTree.prototype.applyTaggedQueryOverwrite = function (path, snap, tag) {\r\n        var queryKey = this.queryKeyForTag_(tag);\r\n        if (queryKey != null) {\r\n            var r = SyncTree.parseQueryKey_(queryKey);\r\n            var queryPath = r.path, queryId = r.queryId;\r\n            var relativePath = Path.relativePath(queryPath, path);\r\n            var op = new Overwrite(OperationSource.forServerTaggedQuery(queryId), relativePath, snap);\r\n            return this.applyTaggedOperation_(queryPath, op);\r\n        }\r\n        else {\r\n            // Query must have been removed already\r\n            return [];\r\n        }\r\n    };\r\n    /**\r\n     * Apply server data to be merged in for the specified tagged query.\r\n     *\r\n     * @param {!Path} path\r\n     * @param {!Object.<string, !Node>} changedChildren\r\n     * @param {!number} tag\r\n     * @return {!Array.<!Event>} Events to raise.\r\n     */\r\n    SyncTree.prototype.applyTaggedQueryMerge = function (path, changedChildren, tag) {\r\n        var queryKey = this.queryKeyForTag_(tag);\r\n        if (queryKey) {\r\n            var r = SyncTree.parseQueryKey_(queryKey);\r\n            var queryPath = r.path, queryId = r.queryId;\r\n            var relativePath = Path.relativePath(queryPath, path);\r\n            var changeTree = ImmutableTree.fromObject(changedChildren);\r\n            var op = new Merge(OperationSource.forServerTaggedQuery(queryId), relativePath, changeTree);\r\n            return this.applyTaggedOperation_(queryPath, op);\r\n        }\r\n        else {\r\n            // We've already removed the query. No big deal, ignore the update\r\n            return [];\r\n        }\r\n    };\r\n    /**\r\n     * Apply a listen complete for a tagged query\r\n     *\r\n     * @param {!Path} path\r\n     * @param {!number} tag\r\n     * @return {!Array.<!Event>} Events to raise.\r\n     */\r\n    SyncTree.prototype.applyTaggedListenComplete = function (path, tag) {\r\n        var queryKey = this.queryKeyForTag_(tag);\r\n        if (queryKey) {\r\n            var r = SyncTree.parseQueryKey_(queryKey);\r\n            var queryPath = r.path, queryId = r.queryId;\r\n            var relativePath = Path.relativePath(queryPath, path);\r\n            var op = new ListenComplete(OperationSource.forServerTaggedQuery(queryId), relativePath);\r\n            return this.applyTaggedOperation_(queryPath, op);\r\n        }\r\n        else {\r\n            // We've already removed the query. No big deal, ignore the update\r\n            return [];\r\n        }\r\n    };\r\n    /**\r\n     * Add an event callback for the specified query.\r\n     *\r\n     * @param {!Query} query\r\n     * @param {!EventRegistration} eventRegistration\r\n     * @return {!Array.<!Event>} Events to raise.\r\n     */\r\n    SyncTree.prototype.addEventRegistration = function (query, eventRegistration) {\r\n        var path = query.path;\r\n        var serverCache = null;\r\n        var foundAncestorDefaultView = false;\r\n        // Any covering writes will necessarily be at the root, so really all we need to find is the server cache.\r\n        // Consider optimizing this once there's a better understanding of what actual behavior will be.\r\n        this.syncPointTree_.foreachOnPath(path, function (pathToSyncPoint, sp) {\r\n            var relativePath = Path.relativePath(pathToSyncPoint, path);\r\n            serverCache = serverCache || sp.getCompleteServerCache(relativePath);\r\n            foundAncestorDefaultView =\r\n                foundAncestorDefaultView || sp.hasCompleteView();\r\n        });\r\n        var syncPoint = this.syncPointTree_.get(path);\r\n        if (!syncPoint) {\r\n            syncPoint = new SyncPoint();\r\n            this.syncPointTree_ = this.syncPointTree_.set(path, syncPoint);\r\n        }\r\n        else {\r\n            foundAncestorDefaultView =\r\n                foundAncestorDefaultView || syncPoint.hasCompleteView();\r\n            serverCache = serverCache || syncPoint.getCompleteServerCache(Path.Empty);\r\n        }\r\n        var serverCacheComplete;\r\n        if (serverCache != null) {\r\n            serverCacheComplete = true;\r\n        }\r\n        else {\r\n            serverCacheComplete = false;\r\n            serverCache = ChildrenNode.EMPTY_NODE;\r\n            var subtree = this.syncPointTree_.subtree(path);\r\n            subtree.foreachChild(function (childName, childSyncPoint) {\r\n                var completeCache = childSyncPoint.getCompleteServerCache(Path.Empty);\r\n                if (completeCache) {\r\n                    serverCache = serverCache.updateImmediateChild(childName, completeCache);\r\n                }\r\n            });\r\n        }\r\n        var viewAlreadyExists = syncPoint.viewExistsForQuery(query);\r\n        if (!viewAlreadyExists && !query.getQueryParams().loadsAllData()) {\r\n            // We need to track a tag for this query\r\n            var queryKey = SyncTree.makeQueryKey_(query);\r\n            util.assert(!(queryKey in this.queryToTagMap_), 'View does not exist, but we have a tag');\r\n            var tag = SyncTree.getNextQueryTag_();\r\n            this.queryToTagMap_[queryKey] = tag;\r\n            // Coerce to string to avoid sparse arrays.\r\n            this.tagToQueryMap_['_' + tag] = queryKey;\r\n        }\r\n        var writesCache = this.pendingWriteTree_.childWrites(path);\r\n        var events = syncPoint.addEventRegistration(query, eventRegistration, writesCache, serverCache, serverCacheComplete);\r\n        if (!viewAlreadyExists && !foundAncestorDefaultView) {\r\n            var view /** @type !View */ = syncPoint.viewForQuery(query);\r\n            events = events.concat(this.setupListener_(query, view));\r\n        }\r\n        return events;\r\n    };\r\n    /**\r\n     * Remove event callback(s).\r\n     *\r\n     * If query is the default query, we'll check all queries for the specified eventRegistration.\r\n     * If eventRegistration is null, we'll remove all callbacks for the specified query/queries.\r\n     *\r\n     * @param {!Query} query\r\n     * @param {?EventRegistration} eventRegistration If null, all callbacks are removed.\r\n     * @param {Error=} cancelError If a cancelError is provided, appropriate cancel events will be returned.\r\n     * @return {!Array.<!Event>} Cancel events, if cancelError was provided.\r\n     */\r\n    SyncTree.prototype.removeEventRegistration = function (query, eventRegistration, cancelError) {\r\n        var _this = this;\r\n        // Find the syncPoint first. Then deal with whether or not it has matching listeners\r\n        var path = query.path;\r\n        var maybeSyncPoint = this.syncPointTree_.get(path);\r\n        var cancelEvents = [];\r\n        // A removal on a default query affects all queries at that location. A removal on an indexed query, even one without\r\n        // other query constraints, does *not* affect all queries at that location. So this check must be for 'default', and\r\n        // not loadsAllData().\r\n        if (maybeSyncPoint &&\r\n            (query.queryIdentifier() === 'default' ||\r\n                maybeSyncPoint.viewExistsForQuery(query))) {\r\n            /**\r\n             * @type {{removed: !Array.<!Query>, events: !Array.<!Event>}}\r\n             */\r\n            var removedAndEvents = maybeSyncPoint.removeEventRegistration(query, eventRegistration, cancelError);\r\n            if (maybeSyncPoint.isEmpty()) {\r\n                this.syncPointTree_ = this.syncPointTree_.remove(path);\r\n            }\r\n            var removed = removedAndEvents.removed;\r\n            cancelEvents = removedAndEvents.events;\r\n            // We may have just removed one of many listeners and can short-circuit this whole process\r\n            // We may also not have removed a default listener, in which case all of the descendant listeners should already be\r\n            // properly set up.\r\n            //\r\n            // Since indexed queries can shadow if they don't have other query constraints, check for loadsAllData(), instead of\r\n            // queryId === 'default'\r\n            var removingDefault = -1 !==\r\n                removed.findIndex(function (query) {\r\n                    return query.getQueryParams().loadsAllData();\r\n                });\r\n            var covered = this.syncPointTree_.findOnPath(path, function (relativePath, parentSyncPoint) {\r\n                return parentSyncPoint.hasCompleteView();\r\n            });\r\n            if (removingDefault && !covered) {\r\n                var subtree = this.syncPointTree_.subtree(path);\r\n                // There are potentially child listeners. Determine what if any listens we need to send before executing the\r\n                // removal\r\n                if (!subtree.isEmpty()) {\r\n                    // We need to fold over our subtree and collect the listeners to send\r\n                    var newViews = this.collectDistinctViewsForSubTree_(subtree);\r\n                    // Ok, we've collected all the listens we need. Set them up.\r\n                    for (var i = 0; i < newViews.length; ++i) {\r\n                        var view = newViews[i], newQuery = view.getQuery();\r\n                        var listener = this.createListenerForView_(view);\r\n                        this.listenProvider_.startListening(SyncTree.queryForListening_(newQuery), this.tagForQuery_(newQuery), listener.hashFn, listener.onComplete);\r\n                    }\r\n                }\r\n                else {\r\n                    // There's nothing below us, so nothing we need to start listening on\r\n                }\r\n            }\r\n            // If we removed anything and we're not covered by a higher up listen, we need to stop listening on this query\r\n            // The above block has us covered in terms of making sure we're set up on listens lower in the tree.\r\n            // Also, note that if we have a cancelError, it's already been removed at the provider level.\r\n            if (!covered && removed.length > 0 && !cancelError) {\r\n                // If we removed a default, then we weren't listening on any of the other queries here. Just cancel the one\r\n                // default. Otherwise, we need to iterate through and cancel each individual query\r\n                if (removingDefault) {\r\n                    // We don't tag default listeners\r\n                    var defaultTag = null;\r\n                    this.listenProvider_.stopListening(SyncTree.queryForListening_(query), defaultTag);\r\n                }\r\n                else {\r\n                    removed.forEach(function (queryToRemove) {\r\n                        var tagToRemove = _this.queryToTagMap_[SyncTree.makeQueryKey_(queryToRemove)];\r\n                        _this.listenProvider_.stopListening(SyncTree.queryForListening_(queryToRemove), tagToRemove);\r\n                    });\r\n                }\r\n            }\r\n            // Now, clear all of the tags we're tracking for the removed listens\r\n            this.removeTags_(removed);\r\n        }\r\n        else {\r\n            // No-op, this listener must've been already removed\r\n        }\r\n        return cancelEvents;\r\n    };\r\n    /**\r\n     * Returns a complete cache, if we have one, of the data at a particular path. The location must have a listener above\r\n     * it, but as this is only used by transaction code, that should always be the case anyways.\r\n     *\r\n     * Note: this method will *include* hidden writes from transaction with applyLocally set to false.\r\n     * @param {!Path} path The path to the data we want\r\n     * @param {Array.<number>=} writeIdsToExclude A specific set to be excluded\r\n     * @return {?Node}\r\n     */\r\n    SyncTree.prototype.calcCompleteEventCache = function (path, writeIdsToExclude) {\r\n        var includeHiddenSets = true;\r\n        var writeTree = this.pendingWriteTree_;\r\n        var serverCache = this.syncPointTree_.findOnPath(path, function (pathSoFar, syncPoint) {\r\n            var relativePath = Path.relativePath(pathSoFar, path);\r\n            var serverCache = syncPoint.getCompleteServerCache(relativePath);\r\n            if (serverCache) {\r\n                return serverCache;\r\n            }\r\n        });\r\n        return writeTree.calcCompleteEventCache(path, serverCache, writeIdsToExclude, includeHiddenSets);\r\n    };\r\n    /**\r\n     * This collapses multiple unfiltered views into a single view, since we only need a single\r\n     * listener for them.\r\n     *\r\n     * @param {!ImmutableTree.<!SyncPoint>} subtree\r\n     * @return {!Array.<!View>}\r\n     * @private\r\n     */\r\n    SyncTree.prototype.collectDistinctViewsForSubTree_ = function (subtree) {\r\n        return subtree.fold(function (relativePath, maybeChildSyncPoint, childMap) {\r\n            if (maybeChildSyncPoint && maybeChildSyncPoint.hasCompleteView()) {\r\n                var completeView = maybeChildSyncPoint.getCompleteView();\r\n                return [completeView];\r\n            }\r\n            else {\r\n                // No complete view here, flatten any deeper listens into an array\r\n                var views_1 = [];\r\n                if (maybeChildSyncPoint) {\r\n                    views_1 = maybeChildSyncPoint.getQueryViews();\r\n                }\r\n                util.forEach(childMap, function (key, childViews) {\r\n                    views_1 = views_1.concat(childViews);\r\n                });\r\n                return views_1;\r\n            }\r\n        });\r\n    };\r\n    /**\r\n     * @param {!Array.<!Query>} queries\r\n     * @private\r\n     */\r\n    SyncTree.prototype.removeTags_ = function (queries) {\r\n        for (var j = 0; j < queries.length; ++j) {\r\n            var removedQuery = queries[j];\r\n            if (!removedQuery.getQueryParams().loadsAllData()) {\r\n                // We should have a tag for this\r\n                var removedQueryKey = SyncTree.makeQueryKey_(removedQuery);\r\n                var removedQueryTag = this.queryToTagMap_[removedQueryKey];\r\n                delete this.queryToTagMap_[removedQueryKey];\r\n                delete this.tagToQueryMap_['_' + removedQueryTag];\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * Normalizes a query to a query we send the server for listening\r\n     * @param {!Query} query\r\n     * @return {!Query} The normalized query\r\n     * @private\r\n     */\r\n    SyncTree.queryForListening_ = function (query) {\r\n        if (query.getQueryParams().loadsAllData() &&\r\n            !query.getQueryParams().isDefault()) {\r\n            // We treat queries that load all data as default queries\r\n            // Cast is necessary because ref() technically returns Firebase which is actually fb.api.Firebase which inherits\r\n            // from Query\r\n            return /** @type {!Query} */ query.getRef();\r\n        }\r\n        else {\r\n            return query;\r\n        }\r\n    };\r\n    /**\r\n     * For a given new listen, manage the de-duplication of outstanding subscriptions.\r\n     *\r\n     * @param {!Query} query\r\n     * @param {!View} view\r\n     * @return {!Array.<!Event>} This method can return events to support synchronous data sources\r\n     * @private\r\n     */\r\n    SyncTree.prototype.setupListener_ = function (query, view) {\r\n        var path = query.path;\r\n        var tag = this.tagForQuery_(query);\r\n        var listener = this.createListenerForView_(view);\r\n        var events = this.listenProvider_.startListening(SyncTree.queryForListening_(query), tag, listener.hashFn, listener.onComplete);\r\n        var subtree = this.syncPointTree_.subtree(path);\r\n        // The root of this subtree has our query. We're here because we definitely need to send a listen for that, but we\r\n        // may need to shadow other listens as well.\r\n        if (tag) {\r\n            util.assert(!subtree.value.hasCompleteView(), \"If we're adding a query, it shouldn't be shadowed\");\r\n        }\r\n        else {\r\n            // Shadow everything at or below this location, this is a default listener.\r\n            var queriesToStop = subtree.fold(function (relativePath, maybeChildSyncPoint, childMap) {\r\n                if (!relativePath.isEmpty() &&\r\n                    maybeChildSyncPoint &&\r\n                    maybeChildSyncPoint.hasCompleteView()) {\r\n                    return [maybeChildSyncPoint.getCompleteView().getQuery()];\r\n                }\r\n                else {\r\n                    // No default listener here, flatten any deeper queries into an array\r\n                    var queries_1 = [];\r\n                    if (maybeChildSyncPoint) {\r\n                        queries_1 = queries_1.concat(maybeChildSyncPoint.getQueryViews().map(function (view) { return view.getQuery(); }));\r\n                    }\r\n                    util.forEach(childMap, function (key, childQueries) {\r\n                        queries_1 = queries_1.concat(childQueries);\r\n                    });\r\n                    return queries_1;\r\n                }\r\n            });\r\n            for (var i = 0; i < queriesToStop.length; ++i) {\r\n                var queryToStop = queriesToStop[i];\r\n                this.listenProvider_.stopListening(SyncTree.queryForListening_(queryToStop), this.tagForQuery_(queryToStop));\r\n            }\r\n        }\r\n        return events;\r\n    };\r\n    /**\r\n     *\r\n     * @param {!View} view\r\n     * @return {{hashFn: function(), onComplete: function(!string, *)}}\r\n     * @private\r\n     */\r\n    SyncTree.prototype.createListenerForView_ = function (view) {\r\n        var _this = this;\r\n        var query = view.getQuery();\r\n        var tag = this.tagForQuery_(query);\r\n        return {\r\n            hashFn: function () {\r\n                var cache = view.getServerCache() || ChildrenNode.EMPTY_NODE;\r\n                return cache.hash();\r\n            },\r\n            onComplete: function (status) {\r\n                if (status === 'ok') {\r\n                    if (tag) {\r\n                        return _this.applyTaggedListenComplete(query.path, tag);\r\n                    }\r\n                    else {\r\n                        return _this.applyListenComplete(query.path);\r\n                    }\r\n                }\r\n                else {\r\n                    // If a listen failed, kill all of the listeners here, not just the one that triggered the error.\r\n                    // Note that this may need to be scoped to just this listener if we change permissions on filtered children\r\n                    var error$$1 = errorForServerCode(status, query);\r\n                    return _this.removeEventRegistration(query, \r\n                    /*eventRegistration*/ null, error$$1);\r\n                }\r\n            }\r\n        };\r\n    };\r\n    /**\r\n     * Given a query, computes a \"queryKey\" suitable for use in our queryToTagMap_.\r\n     * @private\r\n     * @param {!Query} query\r\n     * @return {string}\r\n     */\r\n    SyncTree.makeQueryKey_ = function (query) {\r\n        return query.path.toString() + '$' + query.queryIdentifier();\r\n    };\r\n    /**\r\n     * Given a queryKey (created by makeQueryKey), parse it back into a path and queryId.\r\n     * @private\r\n     * @param {!string} queryKey\r\n     * @return {{queryId: !string, path: !Path}}\r\n     */\r\n    SyncTree.parseQueryKey_ = function (queryKey) {\r\n        var splitIndex = queryKey.indexOf('$');\r\n        util.assert(splitIndex !== -1 && splitIndex < queryKey.length - 1, 'Bad queryKey.');\r\n        return {\r\n            queryId: queryKey.substr(splitIndex + 1),\r\n            path: new Path(queryKey.substr(0, splitIndex))\r\n        };\r\n    };\r\n    /**\r\n     * Return the query associated with the given tag, if we have one\r\n     * @param {!number} tag\r\n     * @return {?string}\r\n     * @private\r\n     */\r\n    SyncTree.prototype.queryKeyForTag_ = function (tag) {\r\n        return this.tagToQueryMap_['_' + tag];\r\n    };\r\n    /**\r\n     * Return the tag associated with the given query.\r\n     * @param {!Query} query\r\n     * @return {?number}\r\n     * @private\r\n     */\r\n    SyncTree.prototype.tagForQuery_ = function (query) {\r\n        var queryKey = SyncTree.makeQueryKey_(query);\r\n        return util.safeGet(this.queryToTagMap_, queryKey);\r\n    };\r\n    /**\r\n     * Static accessor for query tags.\r\n     * @return {number}\r\n     * @private\r\n     */\r\n    SyncTree.getNextQueryTag_ = function () {\r\n        return SyncTree.nextQueryTag_++;\r\n    };\r\n    /**\r\n     * A helper method to apply tagged operations\r\n     *\r\n     * @param {!Path} queryPath\r\n     * @param {!Operation} operation\r\n     * @return {!Array.<!Event>}\r\n     * @private\r\n     */\r\n    SyncTree.prototype.applyTaggedOperation_ = function (queryPath, operation) {\r\n        var syncPoint = this.syncPointTree_.get(queryPath);\r\n        util.assert(syncPoint, \"Missing sync point for query tag that we're tracking\");\r\n        var writesCache = this.pendingWriteTree_.childWrites(queryPath);\r\n        return syncPoint.applyOperation(operation, writesCache, \r\n        /*serverCache=*/ null);\r\n    };\r\n    /**\r\n     * A helper method that visits all descendant and ancestor SyncPoints, applying the operation.\r\n     *\r\n     * NOTES:\r\n     * - Descendant SyncPoints will be visited first (since we raise events depth-first).\r\n  \n     * - We call applyOperation() on each SyncPoint passing three things:\r\n     *   1. A version of the Operation that has been made relative to the SyncPoint location.\r\n     *   2. A WriteTreeRef of any writes we have cached at the SyncPoint location.\r\n     *   3. A snapshot Node with cached server data, if we have it.\r\n  \n     * - We concatenate all of the events returned by each SyncPoint and return the result.\r\n     *\r\n     * @param {!Operation} operation\r\n     * @return {!Array.<!Event>}\r\n     * @private\r\n     */\r\n    SyncTree.prototype.applyOperationToSyncPoints_ = function (operation) {\r\n        return this.applyOperationHelper_(operation, this.syncPointTree_, \r\n        /*serverCache=*/ null, this.pendingWriteTree_.childWrites(Path.Empty));\r\n    };\r\n    /**\r\n     * Recursive helper for applyOperationToSyncPoints_\r\n     *\r\n     * @private\r\n     * @param {!Operation} operation\r\n     * @param {ImmutableTree.<!SyncPoint>} syncPointTree\r\n     * @param {?Node} serverCache\r\n     * @param {!WriteTreeRef} writesCache\r\n     * @return {!Array.<!Event>}\r\n     */\r\n    SyncTree.prototype.applyOperationHelper_ = function (operation, syncPointTree, serverCache, writesCache) {\r\n        if (operation.path.isEmpty()) {\r\n            return this.applyOperationDescendantsHelper_(operation, syncPointTree, serverCache, writesCache);\r\n        }\r\n        else {\r\n            var syncPoint = syncPointTree.get(Path.Empty);\r\n            // If we don't have cached server data, see if we can get it from this SyncPoint.\r\n            if (serverCache == null && syncPoint != null) {\r\n                serverCache = syncPoint.getCompleteServerCache(Path.Empty);\r\n            }\r\n            var events = [];\r\n            var childName = operation.path.getFront();\r\n            var childOperation = operation.operationForChild(childName);\r\n            var childTree = syncPointTree.children.get(childName);\r\n            if (childTree && childOperation) {\r\n                var childServerCache = serverCache\r\n                    ? serverCache.getImmediateChild(childName)\r\n                    : null;\r\n                var childWritesCache = writesCache.child(childName);\r\n                events = events.concat(this.applyOperationHelper_(childOperation, childTree, childServerCache, childWritesCache));\r\n            }\r\n            if (syncPoint) {\r\n                events = events.concat(syncPoint.applyOperation(operation, writesCache, serverCache));\r\n            }\r\n            return events;\r\n        }\r\n    };\r\n    /**\r\n     * Recursive helper for applyOperationToSyncPoints_\r\n     *\r\n     * @private\r\n     * @param {!Operation} operation\r\n     * @param {ImmutableTree.<!SyncPoint>} syncPointTree\r\n     * @param {?Node} serverCache\r\n     * @param {!WriteTreeRef} writesCache\r\n     * @return {!Array.<!Event>}\r\n     */\r\n    SyncTree.prototype.applyOperationDescendantsHelper_ = function (operation, syncPointTree, serverCache, writesCache) {\r\n        var _this = this;\r\n        var syncPoint = syncPointTree.get(Path.Empty);\r\n        // If we don't have cached server data, see if we can get it from this SyncPoint.\r\n        if (serverCache == null && syncPoint != null) {\r\n            serverCache = syncPoint.getCompleteServerCache(Path.Empty);\r\n        }\r\n        var events = [];\r\n        syncPointTree.children.inorderTraversal(function (childName, childTree) {\r\n            var childServerCache = serverCache\r\n                ? serverCache.getImmediateChild(childName)\r\n                : null;\r\n            var childWritesCache = writesCache.child(childName);\r\n            var childOperation = operation.operationForChild(childName);\r\n            if (childOperation) {\r\n                events = events.concat(_this.applyOperationDescendantsHelper_(childOperation, childTree, childServerCache, childWritesCache));\r\n            }\r\n        });\r\n        if (syncPoint) {\r\n            events = events.concat(syncPoint.applyOperation(operation, writesCache, serverCache));\r\n        }\r\n        return events;\r\n    };\r\n    /**\r\n     * Static tracker for next query tag.\r\n     * @type {number}\r\n     * @private\r\n     */\r\n    SyncTree.nextQueryTag_ = 1;\r\n    return SyncTree;\r\n}());\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Mutable object which basically just stores a reference to the \"latest\" immutable snapshot.\r\n *\r\n * @constructor\r\n */\r\nvar SnapshotHolder = /** @class */ (function () {\r\n    function SnapshotHolder() {\r\n        this.rootNode_ = ChildrenNode.EMPTY_NODE;\r\n    }\r\n    SnapshotHolder.prototype.getNode = function (path) {\r\n        return this.rootNode_.getChild(path);\r\n    };\r\n    SnapshotHolder.prototype.updateSnapshot = function (path, newSnapshotNode) {\r\n        this.rootNode_ = this.rootNode_.updateChild(path, newSnapshotNode);\r\n    };\r\n    return SnapshotHolder;\r\n}());\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Abstraction around FirebaseApp's token fetching capabilities.\r\n */\r\nvar AuthTokenProvider = /** @class */ (function () {\r\n    /**\r\n     * @param {!FirebaseApp} app_\r\n     */\r\n    function AuthTokenProvider(app_) {\r\n        this.app_ = app_;\r\n    }\r\n    /**\r\n     * @param {boolean} forceRefresh\r\n     * @return {!Promise<FirebaseAuthTokenData>}\r\n     */\r\n    AuthTokenProvider.prototype.getToken = function (forceRefresh) {\r\n        return this.app_['INTERNAL']['getToken'](forceRefresh).then(null, \r\n        // .catch\r\n        function (error$$1) {\r\n            // TODO: Need to figure out all the cases this is raised and whether\r\n            // this makes sense.\r\n            if (error$$1 && error$$1.code === 'auth/token-not-initialized') {\r\n                log('Got auth/token-not-initialized error.  Treating as null token.');\r\n                return null;\r\n            }\r\n            else {\r\n                return Promise.reject(error$$1);\r\n            }\r\n        });\r\n    };\r\n    AuthTokenProvider.prototype.addTokenChangeListener = function (listener) {\r\n        // TODO: We might want to wrap the listener and call it with no args to\r\n        // avoid a leaky abstraction, but that makes removing the listener harder.\r\n        this.app_['INTERNAL']['addAuthTokenListener'](listener);\r\n    };\r\n    AuthTokenProvider.prototype.removeTokenChangeListener = function (listener) {\r\n        this.app_['INTERNAL']['removeAuthTokenListener'](listener);\r\n    };\r\n    AuthTokenProvider.prototype.notifyForInvalidToken = function () {\r\n        var errorMessage = 'Provided authentication credentials for the app named \"' +\r\n            this.app_.name +\r\n            '\" are invalid. This usually indicates your app was not ' +\r\n            'initialized correctly. ';\r\n        if ('credential' in this.app_.options) {\r\n            errorMessage +=\r\n                'Make sure the \"credential\" property provided to initializeApp() ' +\r\n                    'is authorized to access the specified \"databaseURL\" and is from the correct ' +\r\n                    'project.';\r\n        }\r\n        else if ('serviceAccount' in this.app_.options) {\r\n            errorMessage +=\r\n                'Make sure the \"serviceAccount\" property provided to initializeApp() ' +\r\n                    'is authorized to access the specified \"databaseURL\" and is from the correct ' +\r\n                    'project.';\r\n        }\r\n        else {\r\n            errorMessage +=\r\n                'Make sure the \"apiKey\" and \"databaseURL\" properties provided to ' +\r\n                    'initializeApp() match the values provided for your app at ' +\r\n                    'https://console.firebase.google.com/.';\r\n        }\r\n        warn(errorMessage);\r\n    };\r\n    return AuthTokenProvider;\r\n}());\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Tracks a collection of stats.\r\n *\r\n * @constructor\r\n */\r\nvar StatsCollection = /** @class */ (function () {\r\n    function StatsCollection() {\r\n        this.counters_ = {};\r\n    }\r\n    StatsCollection.prototype.incrementCounter = function (name, amount) {\r\n        if (amount === void 0) { amount = 1; }\r\n        if (!util.contains(this.counters_, name))\r\n            this.counters_[name] = 0;\r\n        this.counters_[name] += amount;\r\n    };\r\n    StatsCollection.prototype.get = function () {\r\n        return util.deepCopy(this.counters_);\r\n    };\r\n    return StatsCollection;\r\n}());\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nvar StatsManager = /** @class */ (function () {\r\n    function StatsManager() {\r\n    }\r\n    StatsManager.getCollection = function (repoInfo) {\r\n        var hashString = repoInfo.toString();\r\n        if (!this.collections_[hashString]) {\r\n            this.collections_[hashString] = new StatsCollection();\r\n        }\r\n        return this.collections_[hashString];\r\n    };\r\n    StatsManager.getOrCreateReporter = function (repoInfo, creatorFunction) {\r\n        var hashString = repoInfo.toString();\r\n        if (!this.reporters_[hashString]) {\r\n            this.reporters_[hashString] = creatorFunction();\r\n        }\r\n        return this.reporters_[hashString];\r\n    };\r\n    StatsManager.collections_ = {};\r\n    StatsManager.reporters_ = {};\r\n    return StatsManager;\r\n}());\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Returns the delta from the previous call to get stats.\r\n *\r\n * @param collection_ The collection to \"listen\" to.\r\n * @constructor\r\n */\r\nvar StatsListener = /** @class */ (function () {\r\n    function StatsListener(collection_) {\r\n        this.collection_ = collection_;\r\n        this.last_ = null;\r\n    }\r\n    StatsListener.prototype.get = function () {\r\n        var newStats = this.collection_.get();\r\n        var delta = util.clone(newStats);\r\n        if (this.last_) {\r\n            util.forEach(this.last_, function (stat, value) {\r\n                delta[stat] = delta[stat] - value;\r\n            });\r\n        }\r\n        this.last_ = newStats;\r\n        return delta;\r\n    };\r\n    return StatsListener;\r\n}());\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n// Assuming some apps may have a short amount of time on page, and a bulk of firebase operations probably\r\n// happen on page load, we try to report our first set of stats pretty quickly, but we wait at least 10\r\n// seconds to try to ensure the Firebase connection is established / settled.\r\nvar FIRST_STATS_MIN_TIME = 10 * 1000;\r\nvar FIRST_STATS_MAX_TIME = 30 * 1000;\r\n// We'll continue to report stats on average every 5 minutes.\r\nvar REPORT_STATS_INTERVAL = 5 * 60 * 1000;\r\n/**\r\n * @constructor\r\n */\r\nvar StatsReporter = /** @class */ (function () {\r\n    /**\r\n     * @param collection\r\n     * @param server_\r\n     */\r\n    function StatsReporter(collection, server_) {\r\n        this.server_ = server_;\r\n        this.statsToReport_ = {};\r\n        this.statsListener_ = new StatsListener(collection);\r\n        var timeout = FIRST_STATS_MIN_TIME +\r\n            (FIRST_STATS_MAX_TIME - FIRST_STATS_MIN_TIME) * Math.random();\r\n        setTimeoutNonBlocking(this.reportStats_.bind(this), Math.floor(timeout));\r\n    }\r\n    StatsReporter.prototype.includeStat = function (stat) {\r\n        this.statsToReport_[stat] = true;\r\n    };\r\n    StatsReporter.prototype.reportStats_ = function () {\r\n        var _this = this;\r\n        var stats = this.statsListener_.get();\r\n        var reportedStats = {};\r\n        var haveStatsToReport = false;\r\n        util.forEach(stats, function (stat, value) {\r\n            if (value > 0 && util.contains(_this.statsToReport_, stat)) {\r\n                reportedStats[stat] = value;\r\n                haveStatsToReport = true;\r\n            }\r\n        });\r\n        if (haveStatsToReport) {\r\n            this.server_.reportStats(reportedStats);\r\n        }\r\n        // queue our next run.\r\n        setTimeoutNonBlocking(this.reportStats_.bind(this), Math.floor(Math.random() * 2 * REPORT_STATS_INTERVAL));\r\n    };\r\n    return StatsReporter;\r\n}());\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * The event queue serves a few purposes:\r\n * 1. It ensures we maintain event order in the face of event callbacks doing operations that result in more\r\n *    events being queued.\r\n * 2. raiseQueuedEvents() handles being called reentrantly nicely.  That is, if in the course of raising events,\r\n *    raiseQueuedEvents() is called again, the \"inner\" call will pick up raising events where the \"outer\" call\r\n *    left off, ensuring that the events are still raised synchronously and in order.\r\n * 3. You can use raiseEventsAtPath and raiseEventsForChangedPath to ensure only relevant previously-queued\r\n *    events are raised synchronously.\r\n *\r\n * NOTE: This can all go away if/when we move to async events.\r\n *\r\n * @constructor\r\n */\r\nvar EventQueue = /** @class */ (function () {\r\n    function EventQueue() {\r\n        /**\r\n         * @private\r\n         * @type {!Array.<EventList>}\r\n         */\r\n        this.eventLists_ = [];\r\n        /**\r\n         * Tracks recursion depth of raiseQueuedEvents_, for debugging purposes.\r\n         * @private\r\n         * @type {!number}\r\n         */\r\n        this.recursionDepth_ = 0;\r\n    }\r\n    /**\r\n     * @param {!Array.<Event>} eventDataList The new events to queue.\r\n     */\r\n    EventQueue.prototype.queueEvents = function (eventDataList) {\r\n        // We group events by path, storing them in a single EventList, to make it easier to skip over them quickly.\r\n        var currList = null;\r\n        for (var i = 0; i < eventDataList.length; i++) {\r\n            var eventData = eventDataList[i];\r\n            var eventPath = eventData.getPath();\r\n            if (currList !== null && !eventPath.equals(currList.getPath())) {\r\n                this.eventLists_.push(currList);\r\n                currList = null;\r\n            }\r\n            if (currList === null) {\r\n                currList = new EventList(eventPath);\r\n            }\r\n            currList.add(eventData);\r\n        }\r\n        if (currList) {\r\n            this.eventLists_.push(currList);\r\n        }\r\n    };\r\n    /**\r\n     * Queues the specified events and synchronously raises all events (including previously queued ones)\r\n     * for the specified path.\r\n     *\r\n     * It is assumed that the new events are all for the specified path.\r\n     *\r\n     * @param {!Path} path The path to raise events for.\r\n     * @param {!Array.<Event>} eventDataList The new events to raise.\r\n     */\r\n    EventQueue.prototype.raiseEventsAtPath = function (path, eventDataList) {\r\n        this.queueEvents(eventDataList);\r\n        this.raiseQueuedEventsMatchingPredicate_(function (eventPath) {\r\n            return eventPath.equals(path);\r\n        });\r\n    };\r\n    /**\r\n     * Queues the specified events and synchronously raises all events (including previously queued ones) for\r\n     * locations related to the specified change path (i.e. all ancestors and descendants).\r\n     *\r\n     * It is assumed that the new events are all related (ancestor or descendant) to the specified path.\r\n     *\r\n     * @param {!Path} changedPath The path to raise events for.\r\n     * @param {!Array.<!Event>} eventDataList The events to raise\r\n     */\r\n    EventQueue.prototype.raiseEventsForChangedPath = function (changedPath, eventDataList) {\r\n        this.queueEvents(eventDataList);\r\n        this.raiseQueuedEventsMatchingPredicate_(function (eventPath) {\r\n            return eventPath.contains(changedPath) || changedPath.contains(eventPath);\r\n        });\r\n    };\r\n    /**\r\n     * @param {!function(!Path):boolean} predicate\r\n     * @private\r\n     */\r\n    EventQueue.prototype.raiseQueuedEventsMatchingPredicate_ = function (predicate) {\r\n        this.recursionDepth_++;\r\n        var sentAll = true;\r\n        for (var i = 0; i < this.eventLists_.length; i++) {\r\n            var eventList = this.eventLists_[i];\r\n            if (eventList) {\r\n                var eventPath = eventList.getPath();\r\n                if (predicate(eventPath)) {\r\n                    this.eventLists_[i].raise();\r\n                    this.eventLists_[i] = null;\r\n                }\r\n                else {\r\n                    sentAll = false;\r\n                }\r\n            }\r\n        }\r\n        if (sentAll) {\r\n            this.eventLists_ = [];\r\n        }\r\n        this.recursionDepth_--;\r\n    };\r\n    return EventQueue;\r\n}());\r\n/**\r\n * @param {!Path} path\r\n * @constructor\r\n */\r\nvar EventList = /** @class */ (function () {\r\n    function EventList(path_) {\r\n        this.path_ = path_;\r\n        /**\r\n         * @type {!Array.<Event>}\r\n         * @private\r\n         */\r\n        this.events_ = [];\r\n    }\r\n    /**\r\n     * @param {!Event} eventData\r\n     */\r\n    EventList.prototype.add = function (eventData) {\r\n        this.events_.push(eventData);\r\n    };\r\n    /**\r\n     * Iterates through the list and raises each event\r\n     */\r\n    EventList.prototype.raise = function () {\r\n        for (var i = 0; i < this.events_.length; i++) {\r\n            var eventData = this.events_[i];\r\n            if (eventData !== null) {\r\n                this.events_[i] = null;\r\n                var eventFn = eventData.getEventRunner();\r\n                if (logger$1) {\r\n                    log('event: ' + eventData.toString());\r\n                }\r\n                exceptionGuard(eventFn);\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * @return {!Path}\r\n     */\r\n    EventList.prototype.getPath = function () {\r\n        return this.path_;\r\n    };\r\n    return EventList;\r\n}());\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Base class to be used if you want to emit events. Call the constructor with\r\n * the set of allowed event names.\r\n */\r\nvar EventEmitter = /** @class */ (function () {\r\n    /**\r\n     * @param {!Array.<string>} allowedEvents_\r\n     */\r\n    function EventEmitter(allowedEvents_) {\r\n        this.allowedEvents_ = allowedEvents_;\r\n        this.listeners_ = {};\r\n        util.assert(Array.isArray(allowedEvents_) && allowedEvents_.length > 0, 'Requires a non-empty array');\r\n    }\r\n    /**\r\n     * To be called by derived classes to trigger events.\r\n     * @param {!string} eventType\r\n     * @param {...*} var_args\r\n     */\r\n    EventEmitter.prototype.trigger = function (eventType) {\r\n        var var_args = [];\r\n        for (var _i = 1; _i < arguments.length; _i++) {\r\n            var_args[_i - 1] = arguments[_i];\r\n        }\r\n        if (Array.isArray(this.listeners_[eventType])) {\r\n            // Clone the list, since callbacks could add/remove listeners.\r\n            var listeners = this.listeners_[eventType].slice();\r\n            for (var i = 0; i < listeners.length; i++) {\r\n                listeners[i].callback.apply(listeners[i].context, var_args);\r\n            }\r\n        }\r\n    };\r\n    EventEmitter.prototype.on = function (eventType, callback, context) {\r\n        this.validateEventType_(eventType);\r\n        this.listeners_[eventType] = this.listeners_[eventType] || [];\r\n        this.listeners_[eventType].push({ callback: callback, context: context });\r\n        var eventData = this.getInitialEvent(eventType);\r\n        if (eventData) {\r\n            callback.apply(context, eventData);\r\n        }\r\n    };\r\n    EventEmitter.prototype.off = function (eventType, callback, context) {\r\n        this.validateEventType_(eventType);\r\n        var listeners = this.listeners_[eventType] || [];\r\n        for (var i = 0; i < listeners.length; i++) {\r\n            if (listeners[i].callback === callback &&\r\n                (!context || context === listeners[i].context)) {\r\n                listeners.splice(i, 1);\r\n                return;\r\n            }\r\n        }\r\n    };\r\n    EventEmitter.prototype.validateEventType_ = function (eventType) {\r\n        util.assert(this.allowedEvents_.find(function (et) {\r\n            return et === eventType;\r\n        }), 'Unknown event: ' + eventType);\r\n    };\r\n    return EventEmitter;\r\n}());\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * @extends {EventEmitter}\r\n */\r\nvar VisibilityMonitor = /** @class */ (function (_super) {\r\n    tslib_1.__extends(VisibilityMonitor, _super);\r\n    function VisibilityMonitor() {\r\n        var _this = _super.call(this, ['visible']) || this;\r\n        var hidden;\r\n        var visibilityChange;\r\n        if (typeof document !== 'undefined' &&\r\n            typeof document.addEventListener !== 'undefined') {\r\n            if (typeof document['hidden'] !== 'undefined') {\r\n                // Opera 12.10 and Firefox 18 and later support\r\n                visibilityChange = 'visibilitychange';\r\n                hidden = 'hidden';\r\n            }\r\n            else if (typeof document['mozHidden'] !== 'undefined') {\r\n                visibilityChange = 'mozvisibilitychange';\r\n                hidden = 'mozHidden';\r\n            }\r\n            else if (typeof document['msHidden'] !== 'undefined') {\r\n                visibilityChange = 'msvisibilitychange';\r\n                hidden = 'msHidden';\r\n            }\r\n            else if (typeof document['webkitHidden'] !== 'undefined') {\r\n                visibilityChange = 'webkitvisibilitychange';\r\n                hidden = 'webkitHidden';\r\n            }\r\n        }\r\n        // Initially, we always assume we are visible. This ensures that in browsers\r\n        // without page visibility support or in cases where we are never visible\r\n        // (e.g. chrome extension), we act as if we are visible, i.e. don't delay\r\n        // reconnects\r\n        _this.visible_ = true;\r\n        if (visibilityChange) {\r\n            document.addEventListener(visibilityChange, function () {\r\n                var visible = !document[hidden];\r\n                if (visible !== _this.visible_) {\r\n                    _this.visible_ = visible;\r\n                    _this.trigger('visible', visible);\r\n                }\r\n            }, false);\r\n        }\r\n        return _this;\r\n    }\r\n    VisibilityMonitor.getInstance = function () {\r\n        return new VisibilityMonitor();\r\n    };\r\n    /**\r\n     * @param {!string} eventType\r\n     * @return {Array.<boolean>}\r\n     */\r\n    VisibilityMonitor.prototype.getInitialEvent = function (eventType) {\r\n        util.assert(eventType === 'visible', 'Unknown event type: ' + eventType);\r\n        return [this.visible_];\r\n    };\r\n    return VisibilityMonitor;\r\n}(EventEmitter));\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Monitors online state (as reported by window.online/offline events).\r\n *\r\n * The expectation is that this could have many false positives (thinks we are online\r\n * when we're not), but no false negatives.  So we can safely use it to determine when\r\n * we definitely cannot reach the internet.\r\n *\r\n * @extends {EventEmitter}\r\n */\r\nvar OnlineMonitor = /** @class */ (function (_super) {\r\n    tslib_1.__extends(OnlineMonitor, _super);\r\n    function OnlineMonitor() {\r\n        var _this = _super.call(this, ['online']) || this;\r\n        _this.online_ = true;\r\n        // We've had repeated complaints that Cordova apps can get stuck \"offline\", e.g.\r\n        // https://forum.ionicframework.com/t/firebase-connection-is-lost-and-never-come-back/43810\r\n        // It would seem that the 'online' event does not always fire consistently. So we disable it\r\n        // for Cordova.\r\n        if (typeof window !== 'undefined' &&\r\n            typeof window.addEventListener !== 'undefined' &&\r\n            !util.isMobileCordova()) {\r\n            window.addEventListener('online', function () {\r\n                if (!_this.online_) {\r\n                    _this.online_ = true;\r\n                    _this.trigger('online', true);\r\n                }\r\n            }, false);\r\n            window.addEventListener('offline', function () {\r\n                if (_this.online_) {\r\n                    _this.online_ = false;\r\n                    _this.trigger('online', false);\r\n                }\r\n            }, false);\r\n        }\r\n        return _this;\r\n    }\r\n    OnlineMonitor.getInstance = function () {\r\n        return new OnlineMonitor();\r\n    };\r\n    /**\r\n     * @param {!string} eventType\r\n     * @return {Array.<boolean>}\r\n     */\r\n    OnlineMonitor.prototype.getInitialEvent = function (eventType) {\r\n        util.assert(eventType === 'online', 'Unknown event type: ' + eventType);\r\n        return [this.online_];\r\n    };\r\n    /**\r\n     * @return {boolean}\r\n     */\r\n    OnlineMonitor.prototype.currentlyOnline = function () {\r\n        return this.online_;\r\n    };\r\n    return OnlineMonitor;\r\n}(EventEmitter));\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * This class ensures the packets from the server arrive in order\r\n * This class takes data from the server and ensures it gets passed into the callbacks in order.\r\n * @constructor\r\n */\r\nvar PacketReceiver = /** @class */ (function () {\r\n    /**\r\n     * @param onMessage_\r\n     */\r\n    function PacketReceiver(onMessage_) {\r\n        this.onMessage_ = onMessage_;\r\n        this.pendingResponses = [];\r\n        this.currentResponseNum = 0;\r\n        this.closeAfterResponse = -1;\r\n        this.onClose = null;\r\n    }\r\n    PacketReceiver.prototype.closeAfter = function (responseNum, callback) {\r\n        this.closeAfterResponse = responseNum;\r\n        this.onClose = callback;\r\n        if (this.closeAfterResponse < this.currentResponseNum) {\r\n            this.onClose();\r\n            this.onClose = null;\r\n        }\r\n    };\r\n    /**\r\n     * Each message from the server comes with a response number, and an array of data. The responseNumber\r\n     * allows us to ensure that we process them in the right order, since we can't be guaranteed that all\r\n     * browsers will respond in the same order as the requests we sent\r\n     * @param {number} requestNum\r\n     * @param {Array} data\r\n     */\r\n    PacketReceiver.prototype.handleResponse = function (requestNum, data) {\r\n        var _this = this;\r\n        this.pendingResponses[requestNum] = data;\r\n        var _loop_1 = function () {\r\n            var toProcess = this_1.pendingResponses[this_1.currentResponseNum];\r\n            delete this_1.pendingResponses[this_1.currentResponseNum];\r\n            var _loop_2 = function (i) {\r\n                if (toProcess[i]) {\r\n                    exceptionGuard(function () {\r\n                        _this.onMessage_(toProcess[i]);\r\n                    });\r\n                }\r\n            };\r\n            for (var i = 0; i < toProcess.length; ++i) {\r\n                _loop_2(i);\r\n            }\r\n            if (this_1.currentResponseNum === this_1.closeAfterResponse) {\r\n                if (this_1.onClose) {\r\n                    this_1.onClose();\r\n                    this_1.onClose = null;\r\n                }\r\n                return \"break\";\r\n            }\r\n            this_1.currentResponseNum++;\r\n        };\r\n        var this_1 = this;\r\n        while (this.pendingResponses[this.currentResponseNum]) {\r\n            var state_1 = _loop_1();\r\n            if (state_1 === \"break\")\r\n                break;\r\n        }\r\n    };\r\n    return PacketReceiver;\r\n}());\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n// URL query parameters associated with longpolling\r\nvar FIREBASE_LONGPOLL_START_PARAM = 'start';\r\nvar FIREBASE_LONGPOLL_CLOSE_COMMAND = 'close';\r\nvar FIREBASE_LONGPOLL_COMMAND_CB_NAME = 'pLPCommand';\r\nvar FIREBASE_LONGPOLL_DATA_CB_NAME = 'pRTLPCB';\r\nvar FIREBASE_LONGPOLL_ID_PARAM = 'id';\r\nvar FIREBASE_LONGPOLL_PW_PARAM = 'pw';\r\nvar FIREBASE_LONGPOLL_SERIAL_PARAM = 'ser';\r\nvar FIREBASE_LONGPOLL_CALLBACK_ID_PARAM = 'cb';\r\nvar FIREBASE_LONGPOLL_SEGMENT_NUM_PARAM = 'seg';\r\nvar FIREBASE_LONGPOLL_SEGMENTS_IN_PACKET = 'ts';\r\nvar FIREBASE_LONGPOLL_DATA_PARAM = 'd';\r\nvar FIREBASE_LONGPOLL_DISCONN_FRAME_PARAM = 'disconn';\r\nvar FIREBASE_LONGPOLL_DISCONN_FRAME_REQUEST_PARAM = 'dframe';\r\n//Data size constants.\r\n//TODO: Perf: the maximum length actually differs from browser to browser.\r\n// We should check what browser we're on and set accordingly.\r\nvar MAX_URL_DATA_SIZE = 1870;\r\nvar SEG_HEADER_SIZE = 30; //ie: &seg=8299234&ts=982389123&d=\r\nvar MAX_PAYLOAD_SIZE = MAX_URL_DATA_SIZE - SEG_HEADER_SIZE;\r\n/**\r\n * Keepalive period\r\n * send a fresh request at minimum every 25 seconds. Opera has a maximum request\r\n * length of 30 seconds that we can't exceed.\r\n * @const\r\n * @type {number}\r\n */\r\nvar KEEPALIVE_REQUEST_INTERVAL = 25000;\r\n/**\r\n * How long to wait before aborting a long-polling connection attempt.\r\n * @const\r\n * @type {number}\r\n */\r\nvar LP_CONNECT_TIMEOUT = 30000;\r\n/**\r\n * This class manages a single long-polling connection.\r\n *\r\n * @constructor\r\n * @implements {Transport}\r\n */\r\nvar BrowserPollConnection = /** @class */ (function () {\r\n    /**\r\n     * @param {string} connId An identifier for this connection, used for logging\r\n     * @param {RepoInfo} repoInfo The info for the endpoint to send data to.\r\n     * @param {string=} transportSessionId Optional transportSessionid if we are reconnecting for an existing\r\n     *                                         transport session\r\n     * @param {string=}  lastSessionId Optional lastSessionId if the PersistentConnection has already created a\r\n     *                                     connection previously\r\n     */\r\n    function BrowserPollConnection(connId, repoInfo, transportSessionId, lastSessionId) {\r\n        this.connId = connId;\r\n        this.repoInfo = repoInfo;\r\n        this.transportSessionId = transportSessionId;\r\n        this.lastSessionId = lastSessionId;\r\n        this.bytesSent = 0;\r\n        this.bytesReceived = 0;\r\n        this.everConnected_ = false;\r\n        this.log_ = logWrapper(connId);\r\n        this.stats_ = StatsManager.getCollection(repoInfo);\r\n        this.urlFn = function (params) {\r\n            return repoInfo.connectionURL(LONG_POLLING, params);\r\n        };\r\n    }\r\n    /**\r\n     *\r\n     * @param {function(Object)} onMessage Callback when messages arrive\r\n     * @param {function()} onDisconnect Callback with connection lost.\r\n     */\r\n    BrowserPollConnection.prototype.open = function (onMessage, onDisconnect) {\r\n        var _this = this;\r\n        this.curSegmentNum = 0;\r\n        this.onDisconnect_ = onDisconnect;\r\n        this.myPacketOrderer = new PacketReceiver(onMessage);\r\n        this.isClosed_ = false;\r\n        this.connectTimeoutTimer_ = setTimeout(function () {\r\n            _this.log_('Timed out trying to connect.');\r\n            // Make sure we clear the host cache\r\n            _this.onClosed_();\r\n            _this.connectTimeoutTimer_ = null;\r\n        }, Math.floor(LP_CONNECT_TIMEOUT));\r\n        // Ensure we delay the creation of the iframe until the DOM is loaded.\r\n        executeWhenDOMReady(function () {\r\n            if (_this.isClosed_)\r\n                return;\r\n            //Set up a callback that gets triggered once a connection is set up.\r\n            _this.scriptTagHolder = new FirebaseIFrameScriptHolder(function () {\r\n                var args = [];\r\n                for (var _i = 0; _i < arguments.length; _i++) {\r\n                    args[_i] = arguments[_i];\r\n                }\r\n                var command = args[0], arg1 = args[1], arg2 = args[2];\r\n                _this.incrementIncomingBytes_(args);\r\n                if (!_this.scriptTagHolder)\r\n                    return; // we closed the connection.\r\n                if (_this.connectTimeoutTimer_) {\r\n                    clearTimeout(_this.connectTimeoutTimer_);\r\n                    _this.connectTimeoutTimer_ = null;\r\n                }\r\n                _this.everConnected_ = true;\r\n                if (command == FIREBASE_LONGPOLL_START_PARAM) {\r\n                    _this.id = arg1;\r\n                    _this.password = arg2;\r\n                }\r\n                else if (command === FIREBASE_LONGPOLL_CLOSE_COMMAND) {\r\n                    // Don't clear the host cache. We got a response from the server, so we know it's reachable\r\n                    if (arg1) {\r\n                        // We aren't expecting any more data (other than what the server's already in the process of sending us\r\n                        // through our already open polls), so don't send any more.\r\n                        _this.scriptTagHolder.sendNewPolls = false;\r\n                        // arg1 in this case is the last response number sent by the server. We should try to receive\r\n                        // all of the responses up to this one before closing\r\n                        _this.myPacketOrderer.closeAfter(arg1, function () {\r\n                            _this.onClosed_();\r\n                        });\r\n                    }\r\n                    else {\r\n                        _this.onClosed_();\r\n                    }\r\n                }\r\n                else {\r\n                    throw new Error('Unrecognized command received: ' + command);\r\n                }\r\n            }, function () {\r\n                var args = [];\r\n                for (var _i = 0; _i < arguments.length; _i++) {\r\n                    args[_i] = arguments[_i];\r\n                }\r\n                var pN = args[0], data = args[1];\r\n                _this.incrementIncomingBytes_(args);\r\n                _this.myPacketOrderer.handleResponse(pN, data);\r\n            }, function () {\r\n                _this.onClosed_();\r\n            }, _this.urlFn);\r\n            //Send the initial request to connect. The serial number is simply to keep the browser from pulling previous results\r\n            //from cache.\r\n            var urlParams = {};\r\n            urlParams[FIREBASE_LONGPOLL_START_PARAM] = 't';\r\n            urlParams[FIREBASE_LONGPOLL_SERIAL_PARAM] = Math.floor(Math.random() * 100000000);\r\n            if (_this.scriptTagHolder.uniqueCallbackIdentifier)\r\n                urlParams[FIREBASE_LONGPOLL_CALLBACK_ID_PARAM] = _this.scriptTagHolder.uniqueCallbackIdentifier;\r\n            urlParams[VERSION_PARAM] = PROTOCOL_VERSION;\r\n            if (_this.transportSessionId) {\r\n                urlParams[TRANSPORT_SESSION_PARAM] = _this.transportSessionId;\r\n            }\r\n            if (_this.lastSessionId) {\r\n                urlParams[LAST_SESSION_PARAM] = _this.lastSessionId;\r\n            }\r\n            if (!util.isNodeSdk() &&\r\n                typeof location !== 'undefined' &&\r\n                location.href &&\r\n                location.href.indexOf(FORGE_DOMAIN) !== -1) {\r\n                urlParams[REFERER_PARAM] = FORGE_REF;\r\n            }\r\n            var connectURL = _this.urlFn(urlParams);\r\n            _this.log_('Connecting via long-poll to ' + connectURL);\r\n            _this.scriptTagHolder.addTag(connectURL, function () {\r\n                /* do nothing */\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     * Call this when a handshake has completed successfully and we want to consider the connection established\r\n     */\r\n    BrowserPollConnection.prototype.start = function () {\r\n        this.scriptTagHolder.startLongPoll(this.id, this.password);\r\n        this.addDisconnectPingFrame(this.id, this.password);\r\n    };\r\n    /**\r\n     * Forces long polling to be considered as a potential transport\r\n     */\r\n    BrowserPollConnection.forceAllow = function () {\r\n        BrowserPollConnection.forceAllow_ = true;\r\n    };\r\n    /**\r\n     * Forces longpolling to not be considered as a potential transport\r\n     */\r\n    BrowserPollConnection.forceDisallow = function () {\r\n        BrowserPollConnection.forceDisallow_ = true;\r\n    };\r\n    // Static method, use string literal so it can be accessed in a generic way\r\n    BrowserPollConnection.isAvailable = function () {\r\n        // NOTE: In React-Native there's normally no 'document', but if you debug a React-Native app in\r\n        // the Chrome debugger, 'document' is defined, but document.createElement is null (2015/06/08).\r\n        return (BrowserPollConnection.forceAllow_ ||\r\n            (!BrowserPollConnection.forceDisallow_ &&\r\n                typeof document !== 'undefined' &&\r\n                document.createElement != null &&\r\n                !isChromeExtensionContentScript() &&\r\n                !isWindowsStoreApp() &&\r\n                !util.isNodeSdk()));\r\n    };\r\n    /**\r\n     * No-op for polling\r\n     */\r\n    BrowserPollConnection.prototype.markConnectionHealthy = function () { };\r\n    /**\r\n     * Stops polling and cleans up the iframe\r\n     * @private\r\n     */\r\n    BrowserPollConnection.prototype.shutdown_ = function () {\r\n        this.isClosed_ = true;\r\n        if (this.scriptTagHolder) {\r\n            this.scriptTagHolder.close();\r\n            this.scriptTagHolder = null;\r\n        }\r\n        //remove the disconnect frame, which will trigger an XHR call to the server to tell it we're leaving.\r\n        if (this.myDisconnFrame) {\r\n            document.body.removeChild(this.myDisconnFrame);\r\n            this.myDisconnFrame = null;\r\n        }\r\n        if (this.connectTimeoutTimer_) {\r\n            clearTimeout(this.connectTimeoutTimer_);\r\n            this.connectTimeoutTimer_ = null;\r\n        }\r\n    };\r\n    /**\r\n     * Triggered when this transport is closed\r\n     * @private\r\n     */\r\n    BrowserPollConnection.prototype.onClosed_ = function () {\r\n        if (!this.isClosed_) {\r\n            this.log_('Longpoll is closing itself');\r\n            this.shutdown_();\r\n            if (this.onDisconnect_) {\r\n                this.onDisconnect_(this.everConnected_);\r\n                this.onDisconnect_ = null;\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * External-facing close handler. RealTime has requested we shut down. Kill our connection and tell the server\r\n     * that we've left.\r\n     */\r\n    BrowserPollConnection.prototype.close = function () {\r\n        if (!this.isClosed_) {\r\n            this.log_('Longpoll is being closed.');\r\n            this.shutdown_();\r\n        }\r\n    };\r\n    /**\r\n     * Send the JSON object down to the server. It will need to be stringified, base64 encoded, and then\r\n     * broken into chunks (since URLs have a small maximum length).\r\n     * @param {!Object} data The JSON data to transmit.\r\n     */\r\n    BrowserPollConnection.prototype.send = function (data) {\r\n        var dataStr = util.stringify(data);\r\n        this.bytesSent += dataStr.length;\r\n        this.stats_.incrementCounter('bytes_sent', dataStr.length);\r\n        //first, lets get the base64-encoded data\r\n        var base64data = util.base64Encode(dataStr);\r\n        //We can only fit a certain amount in each URL, so we need to split this request\r\n        //up into multiple pieces if it doesn't fit in one request.\r\n        var dataSegs = splitStringBySize(base64data, MAX_PAYLOAD_SIZE);\r\n        //Enqueue each segment for transmission. We assign each chunk a sequential ID and a total number\r\n        //of segments so that we can reassemble the packet on the server.\r\n        for (var i = 0; i < dataSegs.length; i++) {\r\n            this.scriptTagHolder.enqueueSegment(this.curSegmentNum, dataSegs.length, dataSegs[i]);\r\n            this.curSegmentNum++;\r\n        }\r\n    };\r\n    /**\r\n     * This is how we notify the server that we're leaving.\r\n     * We aren't able to send requests with DHTML on a window close event, but we can\r\n     * trigger XHR requests in some browsers (everything but Opera basically).\r\n     * @param {!string} id\r\n     * @param {!string} pw\r\n     */\r\n    BrowserPollConnection.prototype.addDisconnectPingFrame = function (id, pw) {\r\n        if (util.isNodeSdk())\r\n            return;\r\n        this.myDisconnFrame = document.createElement('iframe');\r\n        var urlParams = {};\r\n        urlParams[FIREBASE_LONGPOLL_DISCONN_FRAME_REQUEST_PARAM] = 't';\r\n        urlParams[FIREBASE_LONGPOLL_ID_PARAM] = id;\r\n        urlParams[FIREBASE_LONGPOLL_PW_PARAM] = pw;\r\n        this.myDisconnFrame.src = this.urlFn(urlParams);\r\n        this.myDisconnFrame.style.display = 'none';\r\n        document.body.appendChild(this.myDisconnFrame);\r\n    };\r\n    /**\r\n     * Used to track the bytes received by this client\r\n     * @param {*} args\r\n     * @private\r\n     */\r\n    BrowserPollConnection.prototype.incrementIncomingBytes_ = function (args) {\r\n        // TODO: This is an annoying perf hit just to track the number of incoming bytes.  Maybe it should be opt-in.\r\n        var bytesReceived = util.stringify(args).length;\r\n        this.bytesReceived += bytesReceived;\r\n        this.stats_.incrementCounter('bytes_received', bytesReceived);\r\n    };\r\n    return BrowserPollConnection;\r\n}());\r\n/*********************************************************************************************\r\n * A wrapper around an iframe that is used as a long-polling script holder.\r\n * @constructor\r\n *********************************************************************************************/\r\nvar FirebaseIFrameScriptHolder = /** @class */ (function () {\r\n    /**\r\n     * @param commandCB - The callback to be called when control commands are recevied from the server.\r\n     * @param onMessageCB - The callback to be triggered when responses arrive from the server.\r\n     * @param onDisconnect - The callback to be triggered when this tag holder is closed\r\n     * @param urlFn - A function that provides the URL of the endpoint to send data to.\r\n     */\r\n    function FirebaseIFrameScriptHolder(commandCB, onMessageCB, onDisconnect, urlFn) {\r\n        this.onDisconnect = onDisconnect;\r\n        this.urlFn = urlFn;\r\n        //We maintain a count of all of the outstanding requests, because if we have too many active at once it can cause\r\n        //problems in some browsers.\r\n        /**\r\n         * @type {CountedSet.<number, number>}\r\n         */\r\n        this.outstandingRequests = new CountedSet();\r\n        //A queue of the pending segments waiting for transmission to the server.\r\n        this.pendingSegs = [];\r\n        //A serial number. We use this for two things:\r\n        // 1) A way to ensure the browser doesn't cache responses to polls\r\n        // 2) A way to make the server aware when long-polls arrive in a different order than we started them. The\r\n        //    server needs to release both polls in this case or it will cause problems in Opera since Opera can only execute\r\n        //    JSONP code in the order it was added to the iframe.\r\n        this.currentSerial = Math.floor(Math.random() * 100000000);\r\n        // This gets set to false when we're \"closing down\" the connection (e.g. we're switching transports but there's still\r\n        // incoming data from the server that we're waiting for).\r\n        this.sendNewPolls = true;\r\n        if (!util.isNodeSdk()) {\r\n            //Each script holder registers a couple of uniquely named callbacks with the window. These are called from the\r\n            //iframes where we put the long-polling script tags. We have two callbacks:\r\n            //   1) Command Callback - Triggered for control issues, like starting a connection.\r\n            //   2) Message Callback - Triggered when new data arrives.\r\n            this.uniqueCallbackIdentifier = LUIDGenerator();\r\n            window[FIREBASE_LONGPOLL_COMMAND_CB_NAME + this.uniqueCallbackIdentifier] = commandCB;\r\n            window[FIREBASE_LONGPOLL_DATA_CB_NAME + this.uniqueCallbackIdentifier] = onMessageCB;\r\n            //Create an iframe for us to add script tags to.\r\n            this.myIFrame = FirebaseIFrameScriptHolder.createIFrame_();\r\n            // Set the iframe's contents.\r\n            var script = '';\r\n            // if we set a javascript url, it's IE and we need to set the document domain. The javascript url is sufficient\r\n            // for ie9, but ie8 needs to do it again in the document itself.\r\n            if (this.myIFrame.src &&\r\n                this.myIFrame.src.substr(0, 'javascript:'.length) === 'javascript:') {\r\n                var currentDomain = document.domain;\r\n                script = '<script>document.domain=\"' + currentDomain + '\";</script>';\r\n            }\r\n            var iframeContents = '<html><body>' + script + '</body></html>';\r\n            try {\r\n                this.myIFrame.doc.open();\r\n                this.myIFrame.doc.write(iframeContents);\r\n                this.myIFrame.doc.close();\r\n            }\r\n            catch (e) {\r\n                log('frame writing exception');\r\n                if (e.stack) {\r\n                    log(e.stack);\r\n                }\r\n                log(e);\r\n            }\r\n        }\r\n        else {\r\n            this.commandCB = commandCB;\r\n            this.onMessageCB = onMessageCB;\r\n        }\r\n    }\r\n    /**\r\n     * Each browser has its own funny way to handle iframes. Here we mush them all together into one object that I can\r\n     * actually use.\r\n     * @private\r\n     * @return {Element}\r\n     */\r\n    FirebaseIFrameScriptHolder.createIFrame_ = function () {\r\n        var iframe = document.createElement('iframe');\r\n        iframe.style.display = 'none';\r\n        // This is necessary in order to initialize the document inside the iframe\r\n        if (document.body) {\r\n            document.body.appendChild(iframe);\r\n            try {\r\n                // If document.domain has been modified in IE, this will throw an error, and we need to set the\r\n                // domain of the iframe's document manually. We can do this via a javascript: url as the src attribute\r\n                // Also note that we must do this *after* the iframe has been appended to the page. Otherwise it doesn't work.\r\n                var a = iframe.contentWindow.document;\r\n                if (!a) {\r\n                    // Apologies for the log-spam, I need to do something to keep closure from optimizing out the assignment above.\r\n                    log('No IE domain setting required');\r\n                }\r\n            }\r\n            catch (e) {\r\n                var domain = document.domain;\r\n                iframe.src =\r\n                    \"javascript:void((function(){document.open();document.domain='\" +\r\n                        domain +\r\n                        \"';document.close();})())\";\r\n            }\r\n        }\r\n        else {\r\n            // LongPollConnection attempts to delay initialization until the document is ready, so hopefully this\r\n            // never gets hit.\r\n            throw 'Document body has not initialized. Wait to initialize Firebase until after the document is ready.';\r\n        }\r\n        // Get the document of the iframe in a browser-specific way.\r\n        if (iframe.contentDocument) {\r\n            iframe.doc = iframe.contentDocument; // Firefox, Opera, Safari\r\n        }\r\n        else if (iframe.contentWindow) {\r\n            iframe.doc = iframe.contentWindow.document; // Internet Explorer\r\n        }\r\n        else if (iframe.document) {\r\n            iframe.doc = iframe.document; //others?\r\n        }\r\n        return iframe;\r\n    };\r\n    /**\r\n     * Cancel all outstanding queries and remove the frame.\r\n     */\r\n    FirebaseIFrameScriptHolder.prototype.close = function () {\r\n        var _this = this;\r\n        //Mark this iframe as dead, so no new requests are sent.\r\n        this.alive = false;\r\n        if (this.myIFrame) {\r\n            //We have to actually remove all of the html inside this iframe before removing it from the\r\n            //window, or IE will continue loading and executing the script tags we've already added, which\r\n            //can lead to some errors being thrown. Setting innerHTML seems to be the easiest way to do this.\r\n            this.myIFrame.doc.body.innerHTML = '';\r\n            setTimeout(function () {\r\n                if (_this.myIFrame !== null) {\r\n                    document.body.removeChild(_this.myIFrame);\r\n                    _this.myIFrame = null;\r\n                }\r\n            }, Math.floor(0));\r\n        }\r\n        if (util.isNodeSdk() && this.myID) {\r\n            var urlParams = {};\r\n            urlParams[FIREBASE_LONGPOLL_DISCONN_FRAME_PARAM] = 't';\r\n            urlParams[FIREBASE_LONGPOLL_ID_PARAM] = this.myID;\r\n            urlParams[FIREBASE_LONGPOLL_PW_PARAM] = this.myPW;\r\n            var theURL = this.urlFn(urlParams);\r\n            FirebaseIFrameScriptHolder.nodeRestRequest(theURL);\r\n        }\r\n        // Protect from being called recursively.\r\n        var onDisconnect = this.onDisconnect;\r\n        if (onDisconnect) {\r\n            this.onDisconnect = null;\r\n            onDisconnect();\r\n        }\r\n    };\r\n    /**\r\n     * Actually start the long-polling session by adding the first script tag(s) to the iframe.\r\n     * @param {!string} id - The ID of this connection\r\n     * @param {!string} pw - The password for this connection\r\n     */\r\n    FirebaseIFrameScriptHolder.prototype.startLongPoll = function (id, pw) {\r\n        this.myID = id;\r\n        this.myPW = pw;\r\n        this.alive = true;\r\n        //send the initial request. If there are requests queued, make sure that we transmit as many as we are currently able to.\r\n        while (this.newRequest_()) { }\r\n    };\r\n    /**\r\n     * This is called any time someone might want a script tag to be added. It adds a script tag when there aren't\r\n     * too many outstanding requests and we are still alive.\r\n     *\r\n     * If there are outstanding packet segments to send, it sends one. If there aren't, it sends a long-poll anyways if\r\n     * needed.\r\n     */\r\n    FirebaseIFrameScriptHolder.prototype.newRequest_ = function () {\r\n        // We keep one outstanding request open all the time to receive data, but if we need to send data\r\n        // (pendingSegs.length > 0) then we create a new request to send the data.  The server will automatically\r\n        // close the old request.\r\n        if (this.alive &&\r\n            this.sendNewPolls &&\r\n            this.outstandingRequests.count() < (this.pendingSegs.length > 0 ? 2 : 1)) {\r\n            //construct our url\r\n            this.currentSerial++;\r\n            var urlParams = {};\r\n            urlParams[FIREBASE_LONGPOLL_ID_PARAM] = this.myID;\r\n            urlParams[FIREBASE_LONGPOLL_PW_PARAM] = this.myPW;\r\n            urlParams[FIREBASE_LONGPOLL_SERIAL_PARAM] = this.currentSerial;\r\n            var theURL = this.urlFn(urlParams);\r\n            //Now add as much data as we can.\r\n            var curDataString = '';\r\n            var i = 0;\r\n            while (this.pendingSegs.length > 0) {\r\n                //first, lets see if the next segment will fit.\r\n                var nextSeg = this.pendingSegs[0];\r\n                if (nextSeg.d.length + SEG_HEADER_SIZE + curDataString.length <=\r\n                    MAX_URL_DATA_SIZE) {\r\n                    //great, the segment will fit. Lets append it.\r\n                    var theSeg = this.pendingSegs.shift();\r\n                    curDataString =\r\n                        curDataString +\r\n                            '&' +\r\n                            FIREBASE_LONGPOLL_SEGMENT_NUM_PARAM +\r\n                            i +\r\n                            '=' +\r\n                            theSeg.seg +\r\n                            '&' +\r\n                            FIREBASE_LONGPOLL_SEGMENTS_IN_PACKET +\r\n                            i +\r\n                            '=' +\r\n                            theSeg.ts +\r\n                            '&' +\r\n                            FIREBASE_LONGPOLL_DATA_PARAM +\r\n                            i +\r\n                            '=' +\r\n                            theSeg.d;\r\n                    i++;\r\n                }\r\n                else {\r\n                    break;\r\n                }\r\n            }\r\n            theURL = theURL + curDataString;\r\n            this.addLongPollTag_(theURL, this.currentSerial);\r\n            return true;\r\n        }\r\n        else {\r\n            return false;\r\n        }\r\n    };\r\n    /**\r\n     * Queue a packet for transmission to the server.\r\n     * @param segnum - A sequential id for this packet segment used for reassembly\r\n     * @param totalsegs - The total number of segments in this packet\r\n     * @param data - The data for this segment.\r\n     */\r\n    FirebaseIFrameScriptHolder.prototype.enqueueSegment = function (segnum, totalsegs, data) {\r\n        //add this to the queue of segments to send.\r\n        this.pendingSegs.push({ seg: segnum, ts: totalsegs, d: data });\r\n        //send the data immediately if there isn't already data being transmitted, unless\r\n        //startLongPoll hasn't been called yet.\r\n        if (this.alive) {\r\n            this.newRequest_();\r\n        }\r\n    };\r\n    /**\r\n     * Add a script tag for a regular long-poll request.\r\n     * @param {!string} url - The URL of the script tag.\r\n     * @param {!number} serial - The serial number of the request.\r\n     * @private\r\n     */\r\n    FirebaseIFrameScriptHolder.prototype.addLongPollTag_ = function (url, serial) {\r\n        var _this = this;\r\n        //remember that we sent this request.\r\n        this.outstandingRequests.add(serial, 1);\r\n        var doNewRequest = function () {\r\n            _this.outstandingRequests.remove(serial);\r\n            _this.newRequest_();\r\n        };\r\n        // If this request doesn't return on its own accord (by the server sending us some data), we'll\r\n        // create a new one after the KEEPALIVE interval to make sure we always keep a fresh request open.\r\n        var keepaliveTimeout = setTimeout(doNewRequest, Math.floor(KEEPALIVE_REQUEST_INTERVAL));\r\n        var readyStateCB = function () {\r\n            // Request completed.  Cancel the keepalive.\r\n            clearTimeout(keepaliveTimeout);\r\n            // Trigger a new request so we can continue receiving data.\r\n            doNewRequest();\r\n        };\r\n        this.addTag(url, readyStateCB);\r\n    };\r\n    /**\r\n     * Add an arbitrary script tag to the iframe.\r\n     * @param {!string} url - The URL for the script tag source.\r\n     * @param {!function()} loadCB - A callback to be triggered once the script has loaded.\r\n     */\r\n    FirebaseIFrameScriptHolder.prototype.addTag = function (url, loadCB) {\r\n        var _this = this;\r\n        if (util.isNodeSdk()) {\r\n            this.doNodeLongPoll(url, loadCB);\r\n        }\r\n        else {\r\n            setTimeout(function () {\r\n                try {\r\n                    // if we're already closed, don't add this poll\r\n                    if (!_this.sendNewPolls)\r\n                        return;\r\n                    var newScript_1 = _this.myIFrame.doc.createElement('script');\r\n                    newScript_1.type = 'text/javascript';\r\n                    newScript_1.async = true;\r\n                    newScript_1.src = url;\r\n                    newScript_1.onload = newScript_1.onreadystatechange = function () {\r\n                        var rstate = newScript_1.readyState;\r\n                        if (!rstate || rstate === 'loaded' || rstate === 'complete') {\r\n                            newScript_1.onload = newScript_1.onreadystatechange = null;\r\n                            if (newScript_1.parentNode) {\r\n                                newScript_1.parentNode.removeChild(newScript_1);\r\n                            }\r\n                            loadCB();\r\n                        }\r\n                    };\r\n                    newScript_1.onerror = function () {\r\n                        log('Long-poll script failed to load: ' + url);\r\n                        _this.sendNewPolls = false;\r\n                        _this.close();\r\n                    };\r\n                    _this.myIFrame.doc.body.appendChild(newScript_1);\r\n                }\r\n                catch (e) {\r\n                    // TODO: we should make this error visible somehow\r\n                }\r\n            }, Math.floor(1));\r\n        }\r\n    };\r\n    return FirebaseIFrameScriptHolder;\r\n}());\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nvar WEBSOCKET_MAX_FRAME_SIZE = 16384;\r\nvar WEBSOCKET_KEEPALIVE_INTERVAL = 45000;\r\nvar WebSocketImpl = null;\r\nif (typeof MozWebSocket !== 'undefined') {\r\n    WebSocketImpl = MozWebSocket;\r\n}\r\nelse if (typeof WebSocket !== 'undefined') {\r\n    WebSocketImpl = WebSocket;\r\n}\r\n/**\r\n * Create a new websocket connection with the given callbacks.\r\n * @constructor\r\n * @implements {Transport}\r\n */\r\nvar WebSocketConnection = /** @class */ (function () {\r\n    /**\r\n     * @param {string} connId identifier for this transport\r\n     * @param {RepoInfo} repoInfo The info for the websocket endpoint.\r\n     * @param {string=} transportSessionId Optional transportSessionId if this is connecting to an existing transport\r\n     *                                         session\r\n     * @param {string=} lastSessionId Optional lastSessionId if there was a previous connection\r\n     */\r\n    function WebSocketConnection(connId, repoInfo, transportSessionId, lastSessionId) {\r\n        this.connId = connId;\r\n        this.keepaliveTimer = null;\r\n        this.frames = null;\r\n        this.totalFrames = 0;\r\n        this.bytesSent = 0;\r\n        this.bytesReceived = 0;\r\n        this.log_ = logWrapper(this.connId);\r\n        this.stats_ = StatsManager.getCollection(repoInfo);\r\n        this.connURL = WebSocketConnection.connectionURL_(repoInfo, transportSessionId, lastSessionId);\r\n    }\r\n    /**\r\n     * @param {RepoInfo} repoInfo The info for the websocket endpoint.\r\n     * @param {string=} transportSessionId Optional transportSessionId if this is connecting to an existing transport\r\n     *                                         session\r\n     * @param {string=} lastSessionId Optional lastSessionId if there was a previous connection\r\n     * @return {string} connection url\r\n     * @private\r\n     */\r\n    WebSocketConnection.connectionURL_ = function (repoInfo, transportSessionId, lastSessionId) {\r\n        var urlParams = {};\r\n        urlParams[VERSION_PARAM] = PROTOCOL_VERSION;\r\n        if (!util.isNodeSdk() &&\r\n            typeof location !== 'undefined' &&\r\n            location.href &&\r\n            location.href.indexOf(FORGE_DOMAIN) !== -1) {\r\n            urlParams[REFERER_PARAM] = FORGE_REF;\r\n        }\r\n        if (transportSessionId) {\r\n            urlParams[TRANSPORT_SESSION_PARAM] = transportSessionId;\r\n        }\r\n        if (lastSessionId) {\r\n            urlParams[LAST_SESSION_PARAM] = lastSessionId;\r\n        }\r\n        return repoInfo.connectionURL(WEBSOCKET, urlParams);\r\n    };\r\n    /**\r\n     *\r\n     * @param onMessage Callback when messages arrive\r\n     * @param onDisconnect Callback with connection lost.\r\n     */\r\n    WebSocketConnection.prototype.open = function (onMessage, onDisconnect) {\r\n        var _this = this;\r\n        this.onDisconnect = onDisconnect;\r\n        this.onMessage = onMessage;\r\n        this.log_('Websocket connecting to ' + this.connURL);\r\n        this.everConnected_ = false;\r\n        // Assume failure until proven otherwise.\r\n        PersistentStorage.set('previous_websocket_failure', true);\r\n        try {\r\n            if (util.isNodeSdk()) {\r\n                var device = util.CONSTANTS.NODE_ADMIN ? 'AdminNode' : 'Node';\r\n                // UA Format: Firebase/<wire_protocol>/<sdk_version>/<platform>/<device>\r\n                var options = {\r\n                    headers: {\r\n                        'User-Agent': \"Firebase/\" + PROTOCOL_VERSION + \"/\" + firebase.SDK_VERSION + \"/\" + process.platform + \"/\" + device\r\n                    }\r\n                };\r\n                // Plumb appropriate http_proxy environment variable into faye-websocket if it exists.\r\n                var env = process['env'];\r\n                var proxy = this.connURL.indexOf('wss://') == 0\r\n                    ? env['HTTPS_PROXY'] || env['https_proxy']\r\n                    : env['HTTP_PROXY'] || env['http_proxy'];\r\n                if (proxy) {\r\n                    options['proxy'] = { origin: proxy };\r\n                }\r\n                this.mySock = new WebSocketImpl(this.connURL, [], options);\r\n            }\r\n            else {\r\n                this.mySock = new WebSocketImpl(this.connURL);\r\n            }\r\n        }\r\n        catch (e) {\r\n            this.log_('Error instantiating WebSocket.');\r\n            var error$$1 = e.message || e.data;\r\n            if (error$$1) {\r\n                this.log_(error$$1);\r\n            }\r\n            this.onClosed_();\r\n            return;\r\n        }\r\n        this.mySock.onopen = function () {\r\n            _this.log_('Websocket connected.');\r\n            _this.everConnected_ = true;\r\n        };\r\n        this.mySock.onclose = function () {\r\n            _this.log_('Websocket connection was disconnected.');\r\n            _this.mySock = null;\r\n            _this.onClosed_();\r\n        };\r\n        this.mySock.onmessage = function (m) {\r\n            _this.handleIncomingFrame(m);\r\n        };\r\n        this.mySock.onerror = function (e) {\r\n            _this.log_('WebSocket error.  Closing connection.');\r\n            var error$$1 = e.message || e.data;\r\n            if (error$$1) {\r\n                _this.log_(error$$1);\r\n            }\r\n            _this.onClosed_();\r\n        };\r\n    };\r\n    /**\r\n     * No-op for websockets, we don't need to do anything once the connection is confirmed as open\r\n     */\r\n    WebSocketConnection.prototype.start = function () { };\r\n    WebSocketConnection.forceDisallow = function () {\r\n        WebSocketConnection.forceDisallow_ = true;\r\n    };\r\n    WebSocketConnection.isAvailable = function () {\r\n        var isOldAndroid = false;\r\n        if (typeof navigator !== 'undefined' && navigator.userAgent) {\r\n            var oldAndroidRegex = /Android ([0-9]{0,}\\.[0-9]{0,})/;\r\n            var oldAndroidMatch = navigator.userAgent.match(oldAndroidRegex);\r\n            if (oldAndroidMatch && oldAndroidMatch.length > 1) {\r\n                if (parseFloat(oldAndroidMatch[1]) < 4.4) {\r\n                    isOldAndroid = true;\r\n                }\r\n            }\r\n        }\r\n        return (!isOldAndroid &&\r\n            WebSocketImpl !== null &&\r\n            !WebSocketConnection.forceDisallow_);\r\n    };\r\n    /**\r\n     * Returns true if we previously failed to connect with this transport.\r\n     * @return {boolean}\r\n     */\r\n    WebSocketConnection.previouslyFailed = function () {\r\n        // If our persistent storage is actually only in-memory storage,\r\n        // we default to assuming that it previously failed to be safe.\r\n        return (PersistentStorage.isInMemoryStorage ||\r\n            PersistentStorage.get('previous_websocket_failure') === true);\r\n    };\r\n    WebSocketConnection.prototype.markConnectionHealthy = function () {\r\n        PersistentStorage.remove('previous_websocket_failure');\r\n    };\r\n    WebSocketConnection.prototype.appendFrame_ = function (data) {\r\n        this.frames.push(data);\r\n        if (this.frames.length == this.totalFrames) {\r\n            var fullMess = this.frames.join('');\r\n            this.frames = null;\r\n            var jsonMess = util.jsonEval(fullMess);\r\n            //handle the message\r\n            this.onMessage(jsonMess);\r\n        }\r\n    };\r\n    /**\r\n     * @param {number} frameCount The number of frames we are expecting from the server\r\n     * @private\r\n     */\r\n    WebSocketConnection.prototype.handleNewFrameCount_ = function (frameCount) {\r\n        this.totalFrames = frameCount;\r\n        this.frames = [];\r\n    };\r\n    /**\r\n     * Attempts to parse a frame count out of some text. If it can't, assumes a value of 1\r\n     * @param {!String} data\r\n     * @return {?String} Any remaining data to be process, or null if there is none\r\n     * @private\r\n     */\r\n    WebSocketConnection.prototype.extractFrameCount_ = function (data) {\r\n        util.assert(this.frames === null, 'We already have a frame buffer');\r\n        // TODO: The server is only supposed to send up to 9999 frames (i.e. length <= 4), but that isn't being enforced\r\n        // currently.  So allowing larger frame counts (length <= 6).  See https://app.asana.com/0/search/8688598998380/8237608042508\r\n        if (data.length <= 6) {\r\n            var frameCount = Number(data);\r\n            if (!isNaN(frameCount)) {\r\n                this.handleNewFrameCount_(frameCount);\r\n                return null;\r\n            }\r\n        }\r\n        this.handleNewFrameCount_(1);\r\n        return data;\r\n    };\r\n    /**\r\n     * Process a websocket frame that has arrived from the server.\r\n     * @param mess The frame data\r\n     */\r\n    WebSocketConnection.prototype.handleIncomingFrame = function (mess) {\r\n        if (this.mySock === null)\r\n            return; // Chrome apparently delivers incoming packets even after we .close() the connection sometimes.\r\n        var data = mess['data'];\r\n        this.bytesReceived += data.length;\r\n        this.stats_.incrementCounter('bytes_received', data.length);\r\n        this.resetKeepAlive();\r\n        if (this.frames !== null) {\r\n            // we're buffering\r\n            this.appendFrame_(data);\r\n        }\r\n        else {\r\n            // try to parse out a frame count, otherwise, assume 1 and process it\r\n            var remainingData = this.extractFrameCount_(data);\r\n            if (remainingData !== null) {\r\n                this.appendFrame_(remainingData);\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * Send a message to the server\r\n     * @param {Object} data The JSON object to transmit\r\n     */\r\n    WebSocketConnection.prototype.send = function (data) {\r\n        this.resetKeepAlive();\r\n        var dataStr = util.stringify(data);\r\n        this.bytesSent += dataStr.length;\r\n        this.stats_.incrementCounter('bytes_sent', dataStr.length);\r\n        //We can only fit a certain amount in each websocket frame, so we need to split this request\r\n        //up into multiple pieces if it doesn't fit in one request.\r\n        var dataSegs = splitStringBySize(dataStr, WEBSOCKET_MAX_FRAME_SIZE);\r\n        //Send the length header\r\n        if (dataSegs.length > 1) {\r\n            this.sendString_(String(dataSegs.length));\r\n        }\r\n        //Send the actual data in segments.\r\n        for (var i = 0; i < dataSegs.length; i++) {\r\n            this.sendString_(dataSegs[i]);\r\n        }\r\n    };\r\n    WebSocketConnection.prototype.shutdown_ = function () {\r\n        this.isClosed_ = true;\r\n        if (this.keepaliveTimer) {\r\n            clearInterval(this.keepaliveTimer);\r\n            this.keepaliveTimer = null;\r\n        }\r\n        if (this.mySock) {\r\n            this.mySock.close();\r\n            this.mySock = null;\r\n        }\r\n    };\r\n    WebSocketConnection.prototype.onClosed_ = function () {\r\n        if (!this.isClosed_) {\r\n            this.log_('WebSocket is closing itself');\r\n            this.shutdown_();\r\n            // since this is an internal close, trigger the close listener\r\n            if (this.onDisconnect) {\r\n                this.onDisconnect(this.everConnected_);\r\n                this.onDisconnect = null;\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * External-facing close handler.\r\n     * Close the websocket and kill the connection.\r\n     */\r\n    WebSocketConnection.prototype.close = function () {\r\n        if (!this.isClosed_) {\r\n            this.log_('WebSocket is being closed');\r\n            this.shutdown_();\r\n        }\r\n    };\r\n    /**\r\n     * Kill the current keepalive timer and start a new one, to ensure that it always fires N seconds after\r\n     * the last activity.\r\n     */\r\n    WebSocketConnection.prototype.resetKeepAlive = function () {\r\n        var _this = this;\r\n        clearInterval(this.keepaliveTimer);\r\n        this.keepaliveTimer = setInterval(function () {\r\n            //If there has been no websocket activity for a while, send a no-op\r\n            if (_this.mySock) {\r\n                _this.sendString_('0');\r\n            }\r\n            _this.resetKeepAlive();\r\n        }, Math.floor(WEBSOCKET_KEEPALIVE_INTERVAL));\r\n    };\r\n    /**\r\n     * Send a string over the websocket.\r\n     *\r\n     * @param {string} str String to send.\r\n     * @private\r\n     */\r\n    WebSocketConnection.prototype.sendString_ = function (str) {\r\n        // Firefox seems to sometimes throw exceptions (NS_ERROR_UNEXPECTED) from websocket .send()\r\n        // calls for some unknown reason.  We treat these as an error and disconnect.\r\n        // See https://app.asana.com/0/58926111402292/68021340250410\r\n        try {\r\n            this.mySock.send(str);\r\n        }\r\n        catch (e) {\r\n            this.log_('Exception thrown from WebSocket.send():', e.message || e.data, 'Closing connection.');\r\n            setTimeout(this.onClosed_.bind(this), 0);\r\n        }\r\n    };\r\n    /**\r\n     * Number of response before we consider the connection \"healthy.\"\r\n     * @type {number}\r\n     */\r\n    WebSocketConnection.responsesRequiredToBeHealthy = 2;\r\n    /**\r\n     * Time to wait for the connection te become healthy before giving up.\r\n     * @type {number}\r\n     */\r\n    WebSocketConnection.healthyTimeout = 30000;\r\n    return WebSocketConnection;\r\n}());\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Currently simplistic, this class manages what transport a Connection should use at various stages of its\r\n * lifecycle.\r\n *\r\n * It starts with longpolling in a browser, and httppolling on node. It then upgrades to websockets if\r\n * they are available.\r\n * @constructor\r\n */\r\nvar TransportManager = /** @class */ (function () {\r\n    /**\r\n     * @param {!RepoInfo} repoInfo Metadata around the namespace we're connecting to\r\n     */\r\n    function TransportManager(repoInfo) {\r\n        this.initTransports_(repoInfo);\r\n    }\r\n    Object.defineProperty(TransportManager, \"ALL_TRANSPORTS\", {\r\n        /**\r\n         * @const\r\n         * @type {!Array.<function(new:Transport, string, RepoInfo, string=)>}\r\n         */\r\n        get: function () {\r\n            return [BrowserPollConnection, WebSocketConnection];\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * @param {!RepoInfo} repoInfo\r\n     * @private\r\n     */\r\n    TransportManager.prototype.initTransports_ = function (repoInfo) {\r\n        var isWebSocketsAvailable = WebSocketConnection && WebSocketConnection['isAvailable']();\r\n        var isSkipPollConnection = isWebSocketsAvailable && !WebSocketConnection.previouslyFailed();\r\n        if (repoInfo.webSocketOnly) {\r\n            if (!isWebSocketsAvailable)\r\n                warn(\"wss:// URL used, but browser isn't known to support websockets.  Trying anyway.\");\r\n            isSkipPollConnection = true;\r\n        }\r\n        if (isSkipPollConnection) {\r\n            this.transports_ = [WebSocketConnection];\r\n        }\r\n        else {\r\n            var transports_1 = (this.transports_ = []);\r\n            each(TransportManager.ALL_TRANSPORTS, function (i, transport) {\r\n                if (transport && transport['isAvailable']()) {\r\n                    transports_1.push(transport);\r\n                }\r\n            });\r\n        }\r\n    };\r\n    /**\r\n     * @return {function(new:Transport, !string, !RepoInfo, string=, string=)} The constructor for the\r\n     * initial transport to use\r\n     */\r\n    TransportManager.prototype.initialTransport = function () {\r\n        if (this.transports_.length > 0) {\r\n            return this.transports_[0];\r\n        }\r\n        else {\r\n            throw new Error('No transports available');\r\n        }\r\n    };\r\n    /**\r\n     * @return {?function(new:Transport, function(),function(), string=)} The constructor for the next\r\n     * transport, or null\r\n     */\r\n    TransportManager.prototype.upgradeTransport = function () {\r\n        if (this.transports_.length > 1) {\r\n            return this.transports_[1];\r\n        }\r\n        else {\r\n            return null;\r\n        }\r\n    };\r\n    return TransportManager;\r\n}());\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n// Abort upgrade attempt if it takes longer than 60s.\r\nvar UPGRADE_TIMEOUT = 60000;\r\n// For some transports (WebSockets), we need to \"validate\" the transport by exchanging a few requests and responses.\r\n// If we haven't sent enough requests within 5s, we'll start sending noop ping requests.\r\nvar DELAY_BEFORE_SENDING_EXTRA_REQUESTS = 5000;\r\n// If the initial data sent triggers a lot of bandwidth (i.e. it's a large put or a listen for a large amount of data)\r\n// then we may not be able to exchange our ping/pong requests within the healthy timeout.  So if we reach the timeout\r\n// but we've sent/received enough bytes, we don't cancel the connection.\r\nvar BYTES_SENT_HEALTHY_OVERRIDE = 10 * 1024;\r\nvar BYTES_RECEIVED_HEALTHY_OVERRIDE = 100 * 1024;\r\nvar MESSAGE_TYPE = 't';\r\nvar MESSAGE_DATA = 'd';\r\nvar CONTROL_SHUTDOWN = 's';\r\nvar CONTROL_RESET = 'r';\r\nvar CONTROL_ERROR = 'e';\r\nvar CONTROL_PONG = 'o';\r\nvar SWITCH_ACK = 'a';\r\nvar END_TRANSMISSION = 'n';\r\nvar PING = 'p';\r\nvar SERVER_HELLO = 'h';\r\n/**\r\n * Creates a new real-time connection to the server using whichever method works\r\n * best in the current browser.\r\n *\r\n * @constructor\r\n */\r\nvar Connection = /** @class */ (function () {\r\n    /**\r\n     * @param {!string} id - an id for this connection\r\n     * @param {!RepoInfo} repoInfo_ - the info for the endpoint to connect to\r\n     * @param {function(Object)} onMessage_ - the callback to be triggered when a server-push message arrives\r\n     * @param {function(number, string)} onReady_ - the callback to be triggered when this connection is ready to send messages.\r\n     * @param {function()} onDisconnect_ - the callback to be triggered when a connection was lost\r\n     * @param {function(string)} onKill_ - the callback to be triggered when this connection has permanently shut down.\r\n     * @param {string=} lastSessionId - last session id in persistent connection. is used to clean up old session in real-time server\r\n     */\r\n    function Connection(id, repoInfo_, onMessage_, onReady_, onDisconnect_, onKill_, lastSessionId) {\r\n        this.id = id;\r\n        this.repoInfo_ = repoInfo_;\r\n        this.onMessage_ = onMessage_;\r\n        this.onReady_ = onReady_;\r\n        this.onDisconnect_ = onDisconnect_;\r\n        this.onKill_ = onKill_;\r\n        this.lastSessionId = lastSessionId;\r\n        this.connectionCount = 0;\r\n        this.pendingDataMessages = [];\r\n        this.state_ = 0 /* CONNECTING */;\r\n        this.log_ = logWrapper('c:' + this.id + ':');\r\n        this.transportManager_ = new TransportManager(repoInfo_);\r\n        this.log_('Connection created');\r\n        this.start_();\r\n    }\r\n    /**\r\n     * Starts a connection attempt\r\n     * @private\r\n     */\r\n    Connection.prototype.start_ = function () {\r\n        var _this = this;\r\n        var conn = this.transportManager_.initialTransport();\r\n        this.conn_ = new conn(this.nextTransportId_(), this.repoInfo_, undefined, this.lastSessionId);\r\n        // For certain transports (WebSockets), we need to send and receive several messages back and forth before we\r\n        // can consider the transport healthy.\r\n        this.primaryResponsesRequired_ = conn['responsesRequiredToBeHealthy'] || 0;\r\n        var onMessageReceived = this.connReceiver_(this.conn_);\r\n        var onConnectionLost = this.disconnReceiver_(this.conn_);\r\n        this.tx_ = this.conn_;\r\n        this.rx_ = this.conn_;\r\n        this.secondaryConn_ = null;\r\n        this.isHealthy_ = false;\r\n        /*\r\n         * Firefox doesn't like when code from one iframe tries to create another iframe by way of the parent frame.\r\n         * This can occur in the case of a redirect, i.e. we guessed wrong on what server to connect to and received a reset.\r\n         * Somehow, setTimeout seems to make this ok. That doesn't make sense from a security perspective, since you should\r\n         * still have the context of your originating frame.\r\n         */\r\n        setTimeout(function () {\r\n            // this.conn_ gets set to null in some of the tests. Check to make sure it still exists before using it\r\n            _this.conn_ && _this.conn_.open(onMessageReceived, onConnectionLost);\r\n        }, Math.floor(0));\r\n        var healthyTimeout_ms = conn['healthyTimeout'] || 0;\r\n        if (healthyTimeout_ms > 0) {\r\n            this.healthyTimeout_ = setTimeoutNonBlocking(function () {\r\n                _this.healthyTimeout_ = null;\r\n                if (!_this.isHealthy_) {\r\n                    if (_this.conn_ &&\r\n                        _this.conn_.bytesReceived > BYTES_RECEIVED_HEALTHY_OVERRIDE) {\r\n                        _this.log_('Connection exceeded healthy timeout but has received ' +\r\n                            _this.conn_.bytesReceived +\r\n                            ' bytes.  Marking connection healthy.');\r\n                        _this.isHealthy_ = true;\r\n                        _this.conn_.markConnectionHealthy();\r\n                    }\r\n                    else if (_this.conn_ &&\r\n                        _this.conn_.bytesSent > BYTES_SENT_HEALTHY_OVERRIDE) {\r\n                        _this.log_('Connection exceeded healthy timeout but has sent ' +\r\n                            _this.conn_.bytesSent +\r\n                            ' bytes.  Leaving connection alive.');\r\n                        // NOTE: We don't want to mark it healthy, since we have no guarantee that the bytes have made it to\r\n                        // the server.\r\n                    }\r\n                    else {\r\n                        _this.log_('Closing unhealthy connection after timeout.');\r\n                        _this.close();\r\n                    }\r\n                }\r\n            }, Math.floor(healthyTimeout_ms));\r\n        }\r\n    };\r\n    /**\r\n     * @return {!string}\r\n     * @private\r\n     */\r\n    Connection.prototype.nextTransportId_ = function () {\r\n        return 'c:' + this.id + ':' + this.connectionCount++;\r\n    };\r\n    Connection.prototype.disconnReceiver_ = function (conn) {\r\n        var _this = this;\r\n        return function (everConnected) {\r\n            if (conn === _this.conn_) {\r\n                _this.onConnectionLost_(everConnected);\r\n            }\r\n            else if (conn === _this.secondaryConn_) {\r\n                _this.log_('Secondary connection lost.');\r\n                _this.onSecondaryConnectionLost_();\r\n            }\r\n            else {\r\n                _this.log_('closing an old connection');\r\n            }\r\n        };\r\n    };\r\n    Connection.prototype.connReceiver_ = function (conn) {\r\n        var _this = this;\r\n        return function (message) {\r\n            if (_this.state_ != 2 /* DISCONNECTED */) {\r\n                if (conn === _this.rx_) {\r\n                    _this.onPrimaryMessageReceived_(message);\r\n                }\r\n                else if (conn === _this.secondaryConn_) {\r\n                    _this.onSecondaryMessageReceived_(message);\r\n                }\r\n                else {\r\n                    _this.log_('message on old connection');\r\n                }\r\n            }\r\n        };\r\n    };\r\n    /**\r\n     *\r\n     * @param {Object} dataMsg An arbitrary data message to be sent to the server\r\n     */\r\n    Connection.prototype.sendRequest = function (dataMsg) {\r\n        // wrap in a data message envelope and send it on\r\n        var msg = { t: 'd', d: dataMsg };\r\n        this.sendData_(msg);\r\n    };\r\n    Connection.prototype.tryCleanupConnection = function () {\r\n        if (this.tx_ === this.secondaryConn_ && this.rx_ === this.secondaryConn_) {\r\n            this.log_('cleaning up and promoting a connection: ' + this.secondaryConn_.connId);\r\n            this.conn_ = this.secondaryConn_;\r\n            this.secondaryConn_ = null;\r\n            // the server will shutdown the old connection\r\n        }\r\n    };\r\n    Connection.prototype.onSecondaryControl_ = function (controlData) {\r\n        if (MESSAGE_TYPE in controlData) {\r\n            var cmd = controlData[MESSAGE_TYPE];\r\n            if (cmd === SWITCH_ACK) {\r\n                this.upgradeIfSecondaryHealthy_();\r\n            }\r\n            else if (cmd === CONTROL_RESET) {\r\n                // Most likely the session wasn't valid. Abandon the switch attempt\r\n                this.log_('Got a reset on secondary, closing it');\r\n                this.secondaryConn_.close();\r\n                // If we were already using this connection for something, than we need to fully close\r\n                if (this.tx_ === this.secondaryConn_ ||\r\n                    this.rx_ === this.secondaryConn_) {\r\n                    this.close();\r\n                }\r\n            }\r\n            else if (cmd === CONTROL_PONG) {\r\n                this.log_('got pong on secondary.');\r\n                this.secondaryResponsesRequired_--;\r\n                this.upgradeIfSecondaryHealthy_();\r\n            }\r\n        }\r\n    };\r\n    Connection.prototype.onSecondaryMessageReceived_ = function (parsedData) {\r\n        var layer = requireKey('t', parsedData);\r\n        var data = requireKey('d', parsedData);\r\n        if (layer == 'c') {\r\n            this.onSecondaryControl_(data);\r\n        }\r\n        else if (layer == 'd') {\r\n            // got a data message, but we're still second connection. Need to buffer it up\r\n            this.pendingDataMessages.push(data);\r\n        }\r\n        else {\r\n            throw new Error('Unknown protocol layer: ' + layer);\r\n        }\r\n    };\r\n    Connection.prototype.upgradeIfSecondaryHealthy_ = function () {\r\n        if (this.secondaryResponsesRequired_ <= 0) {\r\n            this.log_('Secondary connection is healthy.');\r\n            this.isHealthy_ = true;\r\n            this.secondaryConn_.markConnectionHealthy();\r\n            this.proceedWithUpgrade_();\r\n        }\r\n        else {\r\n            // Send a ping to make sure the connection is healthy.\r\n            this.log_('sending ping on secondary.');\r\n            this.secondaryConn_.send({ t: 'c', d: { t: PING, d: {} } });\r\n        }\r\n    };\r\n    Connection.prototype.proceedWithUpgrade_ = function () {\r\n        // tell this connection to consider itself open\r\n        this.secondaryConn_.start();\r\n        // send ack\r\n        this.log_('sending client ack on secondary');\r\n        this.secondaryConn_.send({ t: 'c', d: { t: SWITCH_ACK, d: {} } });\r\n        // send end packet on primary transport, switch to sending on this one\r\n        // can receive on this one, buffer responses until end received on primary transport\r\n        this.log_('Ending transmission on primary');\r\n        this.conn_.send({ t: 'c', d: { t: END_TRANSMISSION, d: {} } });\r\n        this.tx_ = this.secondaryConn_;\r\n        this.tryCleanupConnection();\r\n    };\r\n    Connection.prototype.onPrimaryMessageReceived_ = function (parsedData) {\r\n        // Must refer to parsedData properties in quotes, so closure doesn't touch them.\r\n        var layer = requireKey('t', parsedData);\r\n        var data = requireKey('d', parsedData);\r\n        if (layer == 'c') {\r\n            this.onControl_(data);\r\n        }\r\n        else if (layer == 'd') {\r\n            this.onDataMessage_(data);\r\n        }\r\n    };\r\n    Connection.prototype.onDataMessage_ = function (message) {\r\n        this.onPrimaryResponse_();\r\n        // We don't do anything with data messages, just kick them up a level\r\n        this.onMessage_(message);\r\n    };\r\n    Connection.prototype.onPrimaryResponse_ = function () {\r\n        if (!this.isHealthy_) {\r\n            this.primaryResponsesRequired_--;\r\n            if (this.primaryResponsesRequired_ <= 0) {\r\n                this.log_('Primary connection is healthy.');\r\n                this.isHealthy_ = true;\r\n                this.conn_.markConnectionHealthy();\r\n            }\r\n        }\r\n    };\r\n    Connection.prototype.onControl_ = function (controlData) {\r\n        var cmd = requireKey(MESSAGE_TYPE, controlData);\r\n        if (MESSAGE_DATA in controlData) {\r\n            var payload = controlData[MESSAGE_DATA];\r\n            if (cmd === SERVER_HELLO) {\r\n                this.onHandshake_(payload);\r\n            }\r\n            else if (cmd === END_TRANSMISSION) {\r\n                this.log_('recvd end transmission on primary');\r\n                this.rx_ = this.secondaryConn_;\r\n                for (var i = 0; i < this.pendingDataMessages.length; ++i) {\r\n                    this.onDataMessage_(this.pendingDataMessages[i]);\r\n                }\r\n                this.pendingDataMessages = [];\r\n                this.tryCleanupConnection();\r\n            }\r\n            else if (cmd === CONTROL_SHUTDOWN) {\r\n                // This was previously the 'onKill' callback passed to the lower-level connection\r\n                // payload in this case is the reason for the shutdown. Generally a human-readable error\r\n                this.onConnectionShutdown_(payload);\r\n            }\r\n            else if (cmd === CONTROL_RESET) {\r\n                // payload in this case is the host we should contact\r\n                this.onReset_(payload);\r\n            }\r\n            else if (cmd === CONTROL_ERROR) {\r\n                error('Server Error: ' + payload);\r\n            }\r\n            else if (cmd === CONTROL_PONG) {\r\n                this.log_('got pong on primary.');\r\n                this.onPrimaryResponse_();\r\n                this.sendPingOnPrimaryIfNecessary_();\r\n            }\r\n            else {\r\n                error('Unknown control packet command: ' + cmd);\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     *\r\n     * @param {Object} handshake The handshake data returned from the server\r\n     * @private\r\n     */\r\n    Connection.prototype.onHandshake_ = function (handshake) {\r\n        var timestamp = handshake.ts;\r\n        var version = handshake.v;\r\n        var host = handshake.h;\r\n        this.sessionId = handshake.s;\r\n        this.repoInfo_.updateHost(host);\r\n        // if we've already closed the connection, then don't bother trying to progress further\r\n        if (this.state_ == 0 /* CONNECTING */) {\r\n            this.conn_.start();\r\n            this.onConnectionEstablished_(this.conn_, timestamp);\r\n            if (PROTOCOL_VERSION !== version) {\r\n                warn('Protocol version mismatch detected');\r\n            }\r\n            // TODO: do we want to upgrade? when? maybe a delay?\r\n            this.tryStartUpgrade_();\r\n        }\r\n    };\r\n    Connection.prototype.tryStartUpgrade_ = function () {\r\n        var conn = this.transportManager_.upgradeTransport();\r\n        if (conn) {\r\n            this.startUpgrade_(conn);\r\n        }\r\n    };\r\n    Connection.prototype.startUpgrade_ = function (conn) {\r\n        var _this = this;\r\n        this.secondaryConn_ = new conn(this.nextTransportId_(), this.repoInfo_, this.sessionId);\r\n        // For certain transports (WebSockets), we need to send and receive several messages back and forth before we\r\n        // can consider the transport healthy.\r\n        this.secondaryResponsesRequired_ =\r\n            conn['responsesRequiredToBeHealthy'] || 0;\r\n        var onMessage = this.connReceiver_(this.secondaryConn_);\r\n        var onDisconnect = this.disconnReceiver_(this.secondaryConn_);\r\n        this.secondaryConn_.open(onMessage, onDisconnect);\r\n        // If we haven't successfully upgraded after UPGRADE_TIMEOUT, give up and kill the secondary.\r\n        setTimeoutNonBlocking(function () {\r\n            if (_this.secondaryConn_) {\r\n                _this.log_('Timed out trying to upgrade.');\r\n                _this.secondaryConn_.close();\r\n            }\r\n        }, Math.floor(UPGRADE_TIMEOUT));\r\n    };\r\n    Connection.prototype.onReset_ = function (host) {\r\n        this.log_('Reset packet received.  New host: ' + host);\r\n        this.repoInfo_.updateHost(host);\r\n        // TODO: if we're already \"connected\", we need to trigger a disconnect at the next layer up.\r\n        // We don't currently support resets after the connection has already been established\r\n        if (this.state_ === 1 /* CONNECTED */) {\r\n            this.close();\r\n        }\r\n        else {\r\n            // Close whatever connections we have open and start again.\r\n            this.closeConnections_();\r\n            this.start_();\r\n        }\r\n    };\r\n    Connection.prototype.onConnectionEstablished_ = function (conn, timestamp) {\r\n        var _this = this;\r\n        this.log_('Realtime connection established.');\r\n        this.conn_ = conn;\r\n        this.state_ = 1 /* CONNECTED */;\r\n        if (this.onReady_) {\r\n            this.onReady_(timestamp, this.sessionId);\r\n            this.onReady_ = null;\r\n        }\r\n        // If after 5 seconds we haven't sent enough requests to the server to get the connection healthy,\r\n        // send some pings.\r\n        if (this.primaryResponsesRequired_ === 0) {\r\n            this.log_('Primary connection is healthy.');\r\n            this.isHealthy_ = true;\r\n        }\r\n        else {\r\n            setTimeoutNonBlocking(function () {\r\n                _this.sendPingOnPrimaryIfNecessary_();\r\n            }, Math.floor(DELAY_BEFORE_SENDING_EXTRA_REQUESTS));\r\n        }\r\n    };\r\n    Connection.prototype.sendPingOnPrimaryIfNecessary_ = function () {\r\n        // If the connection isn't considered healthy yet, we'll send a noop ping packet request.\r\n        if (!this.isHealthy_ && this.state_ === 1 /* CONNECTED */) {\r\n            this.log_('sending ping on primary.');\r\n            this.sendData_({ t: 'c', d: { t: PING, d: {} } });\r\n        }\r\n    };\r\n    Connection.prototype.onSecondaryConnectionLost_ = function () {\r\n        var conn = this.secondaryConn_;\r\n        this.secondaryConn_ = null;\r\n        if (this.tx_ === conn || this.rx_ === conn) {\r\n            // we are relying on this connection already in some capacity. Therefore, a failure is real\r\n            this.close();\r\n        }\r\n    };\r\n    /**\r\n     *\r\n     * @param {boolean} everConnected Whether or not the connection ever reached a server. Used to determine if\r\n     * we should flush the host cache\r\n     * @private\r\n     */\r\n    Connection.prototype.onConnectionLost_ = function (everConnected) {\r\n        this.conn_ = null;\r\n        // NOTE: IF you're seeing a Firefox error for this line, I think it might be because it's getting\r\n        // called on window close and RealtimeState.CONNECTING is no longer defined.  Just a guess.\r\n        if (!everConnected && this.state_ === 0 /* CONNECTING */) {\r\n            this.log_('Realtime connection failed.');\r\n            // Since we failed to connect at all, clear any cached entry for this namespace in case the machine went away\r\n            if (this.repoInfo_.isCacheableHost()) {\r\n                PersistentStorage.remove('host:' + this.repoInfo_.host);\r\n                // reset the internal host to what we would show the user, i.e. <ns>.firebaseio.com\r\n                this.repoInfo_.internalHost = this.repoInfo_.host;\r\n            }\r\n        }\r\n        else if (this.state_ === 1 /* CONNECTED */) {\r\n            this.log_('Realtime connection lost.');\r\n        }\r\n        this.close();\r\n    };\r\n    /**\r\n     *\r\n     * @param {string} reason\r\n     * @private\r\n     */\r\n    Connection.prototype.onConnectionShutdown_ = function (reason) {\r\n        this.log_('Connection shutdown command received. Shutting down...');\r\n        if (this.onKill_) {\r\n            this.onKill_(reason);\r\n            this.onKill_ = null;\r\n        }\r\n        // We intentionally don't want to fire onDisconnect (kill is a different case),\r\n        // so clear the callback.\r\n        this.onDisconnect_ = null;\r\n        this.close();\r\n    };\r\n    Connection.prototype.sendData_ = function (data) {\r\n        if (this.state_ !== 1 /* CONNECTED */) {\r\n            throw 'Connection is not connected';\r\n        }\r\n        else {\r\n            this.tx_.send(data);\r\n        }\r\n    };\r\n    /**\r\n     * Cleans up this connection, calling the appropriate callbacks\r\n     */\r\n    Connection.prototype.close = function () {\r\n        if (this.state_ !== 2 /* DISCONNECTED */) {\r\n            this.log_('Closing realtime connection.');\r\n            this.state_ = 2 /* DISCONNECTED */;\r\n            this.closeConnections_();\r\n            if (this.onDisconnect_) {\r\n                this.onDisconnect_();\r\n                this.onDisconnect_ = null;\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     *\r\n     * @private\r\n     */\r\n    Connection.prototype.closeConnections_ = function () {\r\n        this.log_('Shutting down all connections');\r\n        if (this.conn_) {\r\n            this.conn_.close();\r\n            this.conn_ = null;\r\n        }\r\n        if (this.secondaryConn_) {\r\n            this.secondaryConn_.close();\r\n            this.secondaryConn_ = null;\r\n        }\r\n        if (this.healthyTimeout_) {\r\n            clearTimeout(this.healthyTimeout_);\r\n            this.healthyTimeout_ = null;\r\n        }\r\n    };\r\n    return Connection;\r\n}());\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Interface defining the set of actions that can be performed against the Firebase server\r\n * (basically corresponds to our wire protocol).\r\n *\r\n * @interface\r\n */\r\nvar ServerActions = /** @class */ (function () {\r\n    function ServerActions() {\r\n    }\r\n    /**\r\n     * @param {string} pathString\r\n     * @param {*} data\r\n     * @param {function(string, string)=} onComplete\r\n     * @param {string=} hash\r\n     */\r\n    ServerActions.prototype.put = function (pathString, data, onComplete, hash) { };\r\n    /**\r\n     * @param {string} pathString\r\n     * @param {*} data\r\n     * @param {function(string, ?string)} onComplete\r\n     * @param {string=} hash\r\n     */\r\n    ServerActions.prototype.merge = function (pathString, data, onComplete, hash) { };\r\n    /**\r\n     * Refreshes the auth token for the current connection.\r\n     * @param {string} token The authentication token\r\n     */\r\n    ServerActions.prototype.refreshAuthToken = function (token) { };\r\n    /**\r\n     * @param {string} pathString\r\n     * @param {*} data\r\n     * @param {function(string, string)=} onComplete\r\n     */\r\n    ServerActions.prototype.onDisconnectPut = function (pathString, data, onComplete) { };\r\n    /**\r\n     * @param {string} pathString\r\n     * @param {*} data\r\n     * @param {function(string, string)=} onComplete\r\n     */\r\n    ServerActions.prototype.onDisconnectMerge = function (pathString, data, onComplete) { };\r\n    /**\r\n     * @param {string} pathString\r\n     * @param {function(string, string)=} onComplete\r\n     */\r\n    ServerActions.prototype.onDisconnectCancel = function (pathString, onComplete) { };\r\n    /**\r\n     * @param {Object.<string, *>} stats\r\n     */\r\n    ServerActions.prototype.reportStats = function (stats) { };\r\n    return ServerActions;\r\n}());\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nvar RECONNECT_MIN_DELAY = 1000;\r\nvar RECONNECT_MAX_DELAY_DEFAULT = 60 * 5 * 1000; // 5 minutes in milliseconds (Case: 1858)\r\nvar RECONNECT_MAX_DELAY_FOR_ADMINS = 30 * 1000; // 30 seconds for admin clients (likely to be a backend server)\r\nvar RECONNECT_DELAY_MULTIPLIER = 1.3;\r\nvar RECONNECT_DELAY_RESET_TIMEOUT = 30000; // Reset delay back to MIN_DELAY after being connected for 30sec.\r\nvar SERVER_KILL_INTERRUPT_REASON = 'server_kill';\r\n// If auth fails repeatedly, we'll assume something is wrong and log a warning / back off.\r\nvar INVALID_AUTH_TOKEN_THRESHOLD = 3;\r\n/**\r\n * Firebase connection.  Abstracts wire protocol and handles reconnecting.\r\n *\r\n * NOTE: All JSON objects sent to the realtime connection must have property names enclosed\r\n * in quotes to make sure the closure compiler does not minify them.\r\n */\r\nvar PersistentConnection = /** @class */ (function (_super) {\r\n    tslib_1.__extends(PersistentConnection, _super);\r\n    /**\r\n     * @implements {ServerActions}\r\n     * @param {!RepoInfo} repoInfo_ Data about the namespace we are connecting to\r\n     * @param {function(string, *, boolean, ?number)} onDataUpdate_ A callback for new data from the server\r\n     * @param onConnectStatus_\r\n     * @param onServerInfoUpdate_\r\n     * @param authTokenProvider_\r\n     * @param authOverride_\r\n     */\r\n    function PersistentConnection(repoInfo_, onDataUpdate_, onConnectStatus_, onServerInfoUpdate_, authTokenProvider_, authOverride_) {\r\n        var _this = _super.call(this) || this;\r\n        _this.repoInfo_ = repoInfo_;\r\n        _this.onDataUpdate_ = onDataUpdate_;\r\n        _this.onConnectStatus_ = onConnectStatus_;\r\n        _this.onServerInfoUpdate_ = onServerInfoUpdate_;\r\n        _this.authTokenProvider_ = authTokenProvider_;\r\n        _this.authOverride_ = authOverride_;\r\n        // Used for diagnostic logging.\r\n        _this.id = PersistentConnection.nextPersistentConnectionId_++;\r\n        _this.log_ = logWrapper('p:' + _this.id + ':');\r\n        /** @private {Object} */\r\n        _this.interruptReasons_ = {};\r\n        _this.listens_ = {};\r\n        _this.outstandingPuts_ = [];\r\n        _this.outstandingPutCount_ = 0;\r\n        _this.onDisconnectRequestQueue_ = [];\r\n        _this.connected_ = false;\r\n        _this.reconnectDelay_ = RECONNECT_MIN_DELAY;\r\n        _this.maxReconnectDelay_ = RECONNECT_MAX_DELAY_DEFAULT;\r\n        _this.securityDebugCallback_ = null;\r\n        _this.lastSessionId = null;\r\n        /** @private {number|null} */\r\n        _this.establishConnectionTimer_ = null;\r\n        /** @private {boolean} */\r\n        _this.visible_ = false;\r\n        // Before we get connected, we keep a queue of pending messages to send.\r\n        _this.requestCBHash_ = {};\r\n        _this.requestNumber_ = 0;\r\n        /** @private {?{\r\n         *   sendRequest(Object),\r\n         *   close()\r\n         * }} */\r\n        _this.realtime_ = null;\r\n        /** @private {string|null} */\r\n        _this.authToken_ = null;\r\n        _this.forceTokenRefresh_ = false;\r\n        _this.invalidAuthTokenCount_ = 0;\r\n        _this.firstConnection_ = true;\r\n        _this.lastConnectionAttemptTime_ = null;\r\n        _this.lastConnectionEstablishedTime_ = null;\r\n        if (authOverride_ && !util.isNodeSdk()) {\r\n            throw new Error('Auth override specified in options, but not supported on non Node.js platforms');\r\n        }\r\n        _this.scheduleConnect_(0);\r\n        VisibilityMonitor.getInstance().on('visible', _this.onVisible_, _this);\r\n        if (repoInfo_.host.indexOf('fblocal') === -1) {\r\n            OnlineMonitor.getInstance().on('online', _this.onOnline_, _this);\r\n        }\r\n        return _this;\r\n    }\r\n    /**\r\n     * @param {!string} action\r\n     * @param {*} body\r\n     * @param {function(*)=} onResponse\r\n     * @protected\r\n     */\r\n    PersistentConnection.prototype.sendRequest = function (action, body, onResponse) {\r\n        var curReqNum = ++this.requestNumber_;\r\n        var msg = { r: curReqNum, a: action, b: body };\r\n        this.log_(util.stringify(msg));\r\n        util.assert(this.connected_, \"sendRequest call when we're not connected not allowed.\");\r\n        this.realtime_.sendRequest(msg);\r\n        if (onResponse) {\r\n            this.requestCBHash_[curReqNum] = onResponse;\r\n        }\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    PersistentConnection.prototype.listen = function (query, currentHashFn, tag, onComplete) {\r\n        var queryId = query.queryIdentifier();\r\n        var pathString = query.path.toString();\r\n        this.log_('Listen called for ' + pathString + ' ' + queryId);\r\n        this.listens_[pathString] = this.listens_[pathString] || {};\r\n        util.assert(query.getQueryParams().isDefault() ||\r\n            !query.getQueryParams().loadsAllData(), 'listen() called for non-default but complete query');\r\n        util.assert(!this.listens_[pathString][queryId], 'listen() called twice for same path/queryId.');\r\n        var listenSpec = {\r\n            onComplete: onComplete,\r\n            hashFn: currentHashFn,\r\n            query: query,\r\n            tag: tag\r\n        };\r\n        this.listens_[pathString][queryId] = listenSpec;\r\n        if (this.connected_) {\r\n            this.sendListen_(listenSpec);\r\n        }\r\n    };\r\n    /**\r\n     * @param {!{onComplete(),\r\n     *           hashFn():!string,\r\n     *           query: !Query,\r\n     *           tag: ?number}} listenSpec\r\n     * @private\r\n     */\r\n    PersistentConnection.prototype.sendListen_ = function (listenSpec) {\r\n        var _this = this;\r\n        var query = listenSpec.query;\r\n        var pathString = query.path.toString();\r\n        var queryId = query.queryIdentifier();\r\n        this.log_('Listen on ' + pathString + ' for ' + queryId);\r\n        var req = { /*path*/ p: pathString };\r\n        var action = 'q';\r\n        // Only bother to send query if it's non-default.\r\n        if (listenSpec.tag) {\r\n            req['q'] = query.queryObject();\r\n            req['t'] = listenSpec.tag;\r\n        }\r\n        req[ /*hash*/'h'] = listenSpec.hashFn();\r\n        this.sendRequest(action, req, function (message) {\r\n            var payload = message[ /*data*/'d'];\r\n            var status = message[ /*status*/'s'];\r\n            // print warnings in any case...\r\n            PersistentConnection.warnOnListenWarnings_(payload, query);\r\n            var currentListenSpec = _this.listens_[pathString] && _this.listens_[pathString][queryId];\r\n            // only trigger actions if the listen hasn't been removed and readded\r\n            if (currentListenSpec === listenSpec) {\r\n                _this.log_('listen response', message);\r\n                if (status !== 'ok') {\r\n                    _this.removeListen_(pathString, queryId);\r\n                }\r\n                if (listenSpec.onComplete) {\r\n                    listenSpec.onComplete(status, payload);\r\n                }\r\n            }\r\n        });\r\n    };\r\n    /**\r\n     * @param {*} payload\r\n     * @param {!Query} query\r\n     * @private\r\n     */\r\n    PersistentConnection.warnOnListenWarnings_ = function (payload, query) {\r\n        if (payload && typeof payload === 'object' && util.contains(payload, 'w')) {\r\n            var warnings = util.safeGet(payload, 'w');\r\n            if (Array.isArray(warnings) && ~warnings.indexOf('no_index')) {\r\n                var indexSpec = '\".indexOn\": \"' +\r\n                    query\r\n                        .getQueryParams()\r\n                        .getIndex()\r\n                        .toString() +\r\n                    '\"';\r\n                var indexPath = query.path.toString();\r\n                warn(\"Using an unspecified index. Your data will be downloaded and \" +\r\n                    (\"filtered on the client. Consider adding \" + indexSpec + \" at \") +\r\n                    (indexPath + \" to your security rules for better performance.\"));\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    PersistentConnection.prototype.refreshAuthToken = function (token) {\r\n        this.authToken_ = token;\r\n        this.log_('Auth token refreshed');\r\n        if (this.authToken_) {\r\n            this.tryAuth();\r\n        }\r\n        else {\r\n            //If we're connected we want to let the server know to unauthenticate us. If we're not connected, simply delete\r\n            //the credential so we dont become authenticated next time we connect.\r\n            if (this.connected_) {\r\n                this.sendRequest('unauth', {}, function () { });\r\n            }\r\n        }\r\n        this.reduceReconnectDelayIfAdminCredential_(token);\r\n    };\r\n    /**\r\n     * @param {!string} credential\r\n     * @private\r\n     */\r\n    PersistentConnection.prototype.reduceReconnectDelayIfAdminCredential_ = function (credential) {\r\n        // NOTE: This isn't intended to be bulletproof (a malicious developer can always just modify the client).\r\n        // Additionally, we don't bother resetting the max delay back to the default if auth fails / expires.\r\n        var isFirebaseSecret = credential && credential.length === 40;\r\n        if (isFirebaseSecret || util.isAdmin(credential)) {\r\n            this.log_('Admin auth credential detected.  Reducing max reconnect time.');\r\n            this.maxReconnectDelay_ = RECONNECT_MAX_DELAY_FOR_ADMINS;\r\n        }\r\n    };\r\n    /**\r\n     * Attempts to authenticate with the given credentials. If the authentication attempt fails, it's triggered like\r\n     * a auth revoked (the connection is closed).\r\n     */\r\n    PersistentConnection.prototype.tryAuth = function () {\r\n        var _this = this;\r\n        if (this.connected_ && this.authToken_) {\r\n            var token_1 = this.authToken_;\r\n            var authMethod = util.isValidFormat(token_1) ? 'auth' : 'gauth';\r\n            var requestData = { cred: token_1 };\r\n            if (this.authOverride_ === null) {\r\n                requestData['noauth'] = true;\r\n            }\r\n            else if (typeof this.authOverride_ === 'object') {\r\n                requestData['authvar'] = this.authOverride_;\r\n            }\r\n            this.sendRequest(authMethod, requestData, function (res) {\r\n                var status = res[ /*status*/'s'];\r\n                var data = res[ /*data*/'d'] || 'error';\r\n                if (_this.authToken_ === token_1) {\r\n                    if (status === 'ok') {\r\n                        _this.invalidAuthTokenCount_ = 0;\r\n                    }\r\n                    else {\r\n                        // Triggers reconnect and force refresh for auth token\r\n                        _this.onAuthRevoked_(status, data);\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    PersistentConnection.prototype.unlisten = function (query, tag) {\r\n        var pathString = query.path.toString();\r\n        var queryId = query.queryIdentifier();\r\n        this.log_('Unlisten called for ' + pathString + ' ' + queryId);\r\n        util.assert(query.getQueryParams().isDefault() ||\r\n            !query.getQueryParams().loadsAllData(), 'unlisten() called for non-default but complete query');\r\n        var listen = this.removeListen_(pathString, queryId);\r\n        if (listen && this.connected_) {\r\n            this.sendUnlisten_(pathString, queryId, query.queryObject(), tag);\r\n        }\r\n    };\r\n    PersistentConnection.prototype.sendUnlisten_ = function (pathString, queryId, queryObj, tag) {\r\n        this.log_('Unlisten on ' + pathString + ' for ' + queryId);\r\n        var req = { /*path*/ p: pathString };\r\n        var action = 'n';\r\n        // Only bother sending queryId if it's non-default.\r\n        if (tag) {\r\n            req['q'] = queryObj;\r\n            req['t'] = tag;\r\n        }\r\n        this.sendRequest(action, req);\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    PersistentConnection.prototype.onDisconnectPut = function (pathString, data, onComplete) {\r\n        if (this.connected_) {\r\n            this.sendOnDisconnect_('o', pathString, data, onComplete);\r\n        }\r\n        else {\r\n            this.onDisconnectRequestQueue_.push({\r\n                pathString: pathString,\r\n                action: 'o',\r\n                data: data,\r\n                onComplete: onComplete\r\n            });\r\n        }\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    PersistentConnection.prototype.onDisconnectMerge = function (pathString, data, onComplete) {\r\n        if (this.connected_) {\r\n            this.sendOnDisconnect_('om', pathString, data, onComplete);\r\n        }\r\n        else {\r\n            this.onDisconnectRequestQueue_.push({\r\n                pathString: pathString,\r\n                action: 'om',\r\n                data: data,\r\n                onComplete: onComplete\r\n            });\r\n        }\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    PersistentConnection.prototype.onDisconnectCancel = function (pathString, onComplete) {\r\n        if (this.connected_) {\r\n            this.sendOnDisconnect_('oc', pathString, null, onComplete);\r\n        }\r\n        else {\r\n            this.onDisconnectRequestQueue_.push({\r\n                pathString: pathString,\r\n                action: 'oc',\r\n                data: null,\r\n                onComplete: onComplete\r\n            });\r\n        }\r\n    };\r\n    PersistentConnection.prototype.sendOnDisconnect_ = function (action, pathString, data, onComplete) {\r\n        var request = { /*path*/ p: pathString, /*data*/ d: data };\r\n        this.log_('onDisconnect ' + action, request);\r\n        this.sendRequest(action, request, function (response) {\r\n            if (onComplete) {\r\n                setTimeout(function () {\r\n                    onComplete(response[ /*status*/'s'], response[ /* data */'d']);\r\n                }, Math.floor(0));\r\n            }\r\n        });\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    PersistentConnection.prototype.put = function (pathString, data, onComplete, hash) {\r\n        this.putInternal('p', pathString, data, onComplete, hash);\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    PersistentConnection.prototype.merge = function (pathString, data, onComplete, hash) {\r\n        this.putInternal('m', pathString, data, onComplete, hash);\r\n    };\r\n    PersistentConnection.prototype.putInternal = function (action, pathString, data, onComplete, hash) {\r\n        var request = {\r\n            /*path*/ p: pathString,\r\n            /*data*/ d: data\r\n        };\r\n        if (hash !== undefined)\r\n            request[ /*hash*/'h'] = hash;\r\n        // TODO: Only keep track of the most recent put for a given path?\r\n        this.outstandingPuts_.push({\r\n            action: action,\r\n            request: request,\r\n            onComplete: onComplete\r\n        });\r\n        this.outstandingPutCount_++;\r\n        var index = this.outstandingPuts_.length - 1;\r\n        if (this.connected_) {\r\n            this.sendPut_(index);\r\n        }\r\n        else {\r\n            this.log_('Buffering put: ' + pathString);\r\n        }\r\n    };\r\n    PersistentConnection.prototype.sendPut_ = function (index) {\r\n        var _this = this;\r\n        var action = this.outstandingPuts_[index].action;\r\n        var request = this.outstandingPuts_[index].request;\r\n        var onComplete = this.outstandingPuts_[index].onComplete;\r\n        this.outstandingPuts_[index].queued = this.connected_;\r\n        this.sendRequest(action, request, function (message) {\r\n            _this.log_(action + ' response', message);\r\n            delete _this.outstandingPuts_[index];\r\n            _this.outstandingPutCount_--;\r\n            // Clean up array occasionally.\r\n            if (_this.outstandingPutCount_ === 0) {\r\n                _this.outstandingPuts_ = [];\r\n            }\r\n            if (onComplete)\r\n                onComplete(message[ /*status*/'s'], message[ /* data */'d']);\r\n        });\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    PersistentConnection.prototype.reportStats = function (stats) {\r\n        var _this = this;\r\n        // If we're not connected, we just drop the stats.\r\n        if (this.connected_) {\r\n            var request = { /*counters*/ c: stats };\r\n            this.log_('reportStats', request);\r\n            this.sendRequest(/*stats*/ 's', request, function (result) {\r\n                var status = result[ /*status*/'s'];\r\n                if (status !== 'ok') {\r\n                    var errorReason = result[ /* data */'d'];\r\n                    _this.log_('reportStats', 'Error sending stats: ' + errorReason);\r\n                }\r\n            });\r\n        }\r\n    };\r\n    /**\r\n     * @param {*} message\r\n     * @private\r\n     */\r\n    PersistentConnection.prototype.onDataMessage_ = function (message) {\r\n        if ('r' in message) {\r\n            // this is a response\r\n            this.log_('from server: ' + util.stringify(message));\r\n            var reqNum = message['r'];\r\n            var onResponse = this.requestCBHash_[reqNum];\r\n            if (onResponse) {\r\n                delete this.requestCBHash_[reqNum];\r\n                onResponse(message[ /*body*/'b']);\r\n            }\r\n        }\r\n        else if ('error' in message) {\r\n            throw 'A server-side error has occurred: ' + message['error'];\r\n        }\r\n        else if ('a' in message) {\r\n            // a and b are action and body, respectively\r\n            this.onDataPush_(message['a'], message['b']);\r\n        }\r\n    };\r\n    PersistentConnection.prototype.onDataPush_ = function (action, body) {\r\n        this.log_('handleServerMessage', action, body);\r\n        if (action === 'd')\r\n            this.onDataUpdate_(body[ /*path*/'p'], body[ /*data*/'d'], \r\n            /*isMerge*/ false, body['t']);\r\n        else if (action === 'm')\r\n            this.onDataUpdate_(body[ /*path*/'p'], body[ /*data*/'d'], \r\n            /*isMerge=*/ true, body['t']);\r\n        else if (action === 'c')\r\n            this.onListenRevoked_(body[ /*path*/'p'], body[ /*query*/'q']);\r\n        else if (action === 'ac')\r\n            this.onAuthRevoked_(body[ /*status code*/'s'], body[ /* explanation */'d']);\r\n        else if (action === 'sd')\r\n            this.onSecurityDebugPacket_(body);\r\n        else\r\n            error('Unrecognized action received from server: ' +\r\n                util.stringify(action) +\r\n                '\\nAre you using the latest client?');\r\n    };\r\n    PersistentConnection.prototype.onReady_ = function (timestamp, sessionId) {\r\n        this.log_('connection ready');\r\n        this.connected_ = true;\r\n        this.lastConnectionEstablishedTime_ = new Date().getTime();\r\n        this.handleTimestamp_(timestamp);\r\n        this.lastSessionId = sessionId;\r\n        if (this.firstConnection_) {\r\n            this.sendConnectStats_();\r\n        }\r\n        this.restoreState_();\r\n        this.firstConnection_ = false;\r\n        this.onConnectStatus_(true);\r\n    };\r\n    PersistentConnection.prototype.scheduleConnect_ = function (timeout) {\r\n        var _this = this;\r\n        util.assert(!this.realtime_, \"Scheduling a connect when we're already connected/ing?\");\r\n        if (this.establishConnectionTimer_) {\r\n            clearTimeout(this.establishConnectionTimer_);\r\n        }\r\n        // NOTE: Even when timeout is 0, it's important to do a setTimeout to work around an infuriating \"Security Error\" in\r\n        // Firefox when trying to write to our long-polling iframe in some scenarios (e.g. Forge or our unit tests).\r\n        this.establishConnectionTimer_ = setTimeout(function () {\r\n            _this.establishConnectionTimer_ = null;\r\n            _this.establishConnection_();\r\n        }, Math.floor(timeout));\r\n    };\r\n    /**\r\n     * @param {boolean} visible\r\n     * @private\r\n     */\r\n    PersistentConnection.prototype.onVisible_ = function (visible) {\r\n        // NOTE: Tabbing away and back to a window will defeat our reconnect backoff, but I think that's fine.\r\n        if (visible &&\r\n            !this.visible_ &&\r\n            this.reconnectDelay_ === this.maxReconnectDelay_) {\r\n            this.log_('Window became visible.  Reducing delay.');\r\n            this.reconnectDelay_ = RECONNECT_MIN_DELAY;\r\n            if (!this.realtime_) {\r\n                this.scheduleConnect_(0);\r\n            }\r\n        }\r\n        this.visible_ = visible;\r\n    };\r\n    PersistentConnection.prototype.onOnline_ = function (online) {\r\n        if (online) {\r\n            this.log_('Browser went online.');\r\n            this.reconnectDelay_ = RECONNECT_MIN_DELAY;\r\n            if (!this.realtime_) {\r\n                this.scheduleConnect_(0);\r\n            }\r\n        }\r\n        else {\r\n            this.log_('Browser went offline.  Killing connection.');\r\n            if (this.realtime_) {\r\n                this.realtime_.close();\r\n            }\r\n        }\r\n    };\r\n    PersistentConnection.prototype.onRealtimeDisconnect_ = function () {\r\n        this.log_('data client disconnected');\r\n        this.connected_ = false;\r\n        this.realtime_ = null;\r\n        // Since we don't know if our sent transactions succeeded or not, we need to cancel them.\r\n        this.cancelSentTransactions_();\r\n        // Clear out the pending requests.\r\n        this.requestCBHash_ = {};\r\n        if (this.shouldReconnect_()) {\r\n            if (!this.visible_) {\r\n                this.log_(\"Window isn't visible.  Delaying reconnect.\");\r\n                this.reconnectDelay_ = this.maxReconnectDelay_;\r\n                this.lastConnectionAttemptTime_ = new Date().getTime();\r\n            }\r\n            else if (this.lastConnectionEstablishedTime_) {\r\n                // If we've been connected long enough, reset reconnect delay to minimum.\r\n                var timeSinceLastConnectSucceeded = new Date().getTime() - this.lastConnectionEstablishedTime_;\r\n                if (timeSinceLastConnectSucceeded > RECONNECT_DELAY_RESET_TIMEOUT)\r\n                    this.reconnectDelay_ = RECONNECT_MIN_DELAY;\r\n                this.lastConnectionEstablishedTime_ = null;\r\n            }\r\n            var timeSinceLastConnectAttempt = new Date().getTime() - this.lastConnectionAttemptTime_;\r\n            var reconnectDelay = Math.max(0, this.reconnectDelay_ - timeSinceLastConnectAttempt);\r\n            reconnectDelay = Math.random() * reconnectDelay;\r\n            this.log_('Trying to reconnect in ' + reconnectDelay + 'ms');\r\n            this.scheduleConnect_(reconnectDelay);\r\n            // Adjust reconnect delay for next time.\r\n            this.reconnectDelay_ = Math.min(this.maxReconnectDelay_, this.reconnectDelay_ * RECONNECT_DELAY_MULTIPLIER);\r\n        }\r\n        this.onConnectStatus_(false);\r\n    };\r\n    PersistentConnection.prototype.establishConnection_ = function () {\r\n        if (this.shouldReconnect_()) {\r\n            this.log_('Making a connection attempt');\r\n            this.lastConnectionAttemptTime_ = new Date().getTime();\r\n            this.lastConnectionEstablishedTime_ = null;\r\n            var onDataMessage_1 = this.onDataMessage_.bind(this);\r\n            var onReady_1 = this.onReady_.bind(this);\r\n            var onDisconnect_1 = this.onRealtimeDisconnect_.bind(this);\r\n            var connId_1 = this.id + ':' + PersistentConnection.nextConnectionId_++;\r\n            var self_1 = this;\r\n            var lastSessionId_1 = this.lastSessionId;\r\n            var canceled_1 = false;\r\n            var connection_1 = null;\r\n            var closeFn_1 = function () {\r\n                if (connection_1) {\r\n                    connection_1.close();\r\n                }\r\n                else {\r\n                    canceled_1 = true;\r\n                    onDisconnect_1();\r\n                }\r\n            };\r\n            var sendRequestFn = function (msg) {\r\n                util.assert(connection_1, \"sendRequest call when we're not connected not allowed.\");\r\n                connection_1.sendRequest(msg);\r\n            };\r\n            this.realtime_ = {\r\n                close: closeFn_1,\r\n                sendRequest: sendRequestFn\r\n            };\r\n            var forceRefresh = this.forceTokenRefresh_;\r\n            this.forceTokenRefresh_ = false;\r\n            // First fetch auth token, and establish connection after fetching the token was successful\r\n            this.authTokenProvider_\r\n                .getToken(forceRefresh)\r\n                .then(function (result) {\r\n                if (!canceled_1) {\r\n                    log('getToken() completed. Creating connection.');\r\n                    self_1.authToken_ = result && result.accessToken;\r\n                    connection_1 = new Connection(connId_1, self_1.repoInfo_, onDataMessage_1, onReady_1, onDisconnect_1, \r\n                    /* onKill= */ function (reason) {\r\n                        warn(reason + ' (' + self_1.repoInfo_.toString() + ')');\r\n                        self_1.interrupt(SERVER_KILL_INTERRUPT_REASON);\r\n                    }, lastSessionId_1);\r\n                }\r\n                else {\r\n                    log('getToken() completed but was canceled');\r\n                }\r\n            })\r\n                .then(null, function (error$$1) {\r\n                self_1.log_('Failed to get token: ' + error$$1);\r\n                if (!canceled_1) {\r\n                    if (util.CONSTANTS.NODE_ADMIN) {\r\n                        // This may be a critical error for the Admin Node.js SDK, so log a warning.\r\n                        // But getToken() may also just have temporarily failed, so we still want to\r\n                        // continue retrying.\r\n                        warn(error$$1);\r\n                    }\r\n                    closeFn_1();\r\n                }\r\n            });\r\n        }\r\n    };\r\n    /**\r\n     * @param {string} reason\r\n     */\r\n    PersistentConnection.prototype.interrupt = function (reason) {\r\n        log('Interrupting connection for reason: ' + reason);\r\n        this.interruptReasons_[reason] = true;\r\n        if (this.realtime_) {\r\n            this.realtime_.close();\r\n        }\r\n        else {\r\n            if (this.establishConnectionTimer_) {\r\n                clearTimeout(this.establishConnectionTimer_);\r\n                this.establishConnectionTimer_ = null;\r\n            }\r\n            if (this.connected_) {\r\n                this.onRealtimeDisconnect_();\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * @param {string} reason\r\n     */\r\n    PersistentConnection.prototype.resume = function (reason) {\r\n        log('Resuming connection for reason: ' + reason);\r\n        delete this.interruptReasons_[reason];\r\n        if (util.isEmpty(this.interruptReasons_)) {\r\n            this.reconnectDelay_ = RECONNECT_MIN_DELAY;\r\n            if (!this.realtime_) {\r\n                this.scheduleConnect_(0);\r\n            }\r\n        }\r\n    };\r\n    PersistentConnection.prototype.handleTimestamp_ = function (timestamp) {\r\n        var delta = timestamp - new Date().getTime();\r\n        this.onServerInfoUpdate_({ serverTimeOffset: delta });\r\n    };\r\n    PersistentConnection.prototype.cancelSentTransactions_ = function () {\r\n        for (var i = 0; i < this.outstandingPuts_.length; i++) {\r\n            var put = this.outstandingPuts_[i];\r\n            if (put && /*hash*/ 'h' in put.request && put.queued) {\r\n                if (put.onComplete)\r\n                    put.onComplete('disconnect');\r\n                delete this.outstandingPuts_[i];\r\n                this.outstandingPutCount_--;\r\n            }\r\n        }\r\n        // Clean up array occasionally.\r\n        if (this.outstandingPutCount_ === 0)\r\n            this.outstandingPuts_ = [];\r\n    };\r\n    /**\r\n     * @param {!string} pathString\r\n     * @param {Array.<*>=} query\r\n     * @private\r\n     */\r\n    PersistentConnection.prototype.onListenRevoked_ = function (pathString, query) {\r\n        // Remove the listen and manufacture a \"permission_denied\" error for the failed listen.\r\n        var queryId;\r\n        if (!query) {\r\n            queryId = 'default';\r\n        }\r\n        else {\r\n            queryId = query.map(function (q) { return ObjectToUniqueKey(q); }).join('$');\r\n        }\r\n        var listen = this.removeListen_(pathString, queryId);\r\n        if (listen && listen.onComplete)\r\n            listen.onComplete('permission_denied');\r\n    };\r\n    /**\r\n     * @param {!string} pathString\r\n     * @param {!string} queryId\r\n     * @return {{queries:Array.<Query>, onComplete:function(string)}}\r\n     * @private\r\n     */\r\n    PersistentConnection.prototype.removeListen_ = function (pathString, queryId) {\r\n        var normalizedPathString = new Path(pathString).toString(); // normalize path.\r\n        var listen;\r\n        if (this.listens_[normalizedPathString] !== undefined) {\r\n            listen = this.listens_[normalizedPathString][queryId];\r\n            delete this.listens_[normalizedPathString][queryId];\r\n            if (util.getCount(this.listens_[normalizedPathString]) === 0) {\r\n                delete this.listens_[normalizedPathString];\r\n            }\r\n        }\r\n        else {\r\n            // all listens for this path has already been removed\r\n            listen = undefined;\r\n        }\r\n        return listen;\r\n    };\r\n    PersistentConnection.prototype.onAuthRevoked_ = function (statusCode, explanation) {\r\n        log('Auth token revoked: ' + statusCode + '/' + explanation);\r\n        this.authToken_ = null;\r\n        this.forceTokenRefresh_ = true;\r\n        this.realtime_.close();\r\n        if (statusCode === 'invalid_token' || statusCode === 'permission_denied') {\r\n            // We'll wait a couple times before logging the warning / increasing the\r\n            // retry period since oauth tokens will report as \"invalid\" if they're\r\n            // just expired. Plus there may be transient issues that resolve themselves.\r\n            this.invalidAuthTokenCount_++;\r\n            if (this.invalidAuthTokenCount_ >= INVALID_AUTH_TOKEN_THRESHOLD) {\r\n                // Set a long reconnect delay because recovery is unlikely\r\n                this.reconnectDelay_ = RECONNECT_MAX_DELAY_FOR_ADMINS;\r\n                // Notify the auth token provider that the token is invalid, which will log\r\n                // a warning\r\n                this.authTokenProvider_.notifyForInvalidToken();\r\n            }\r\n        }\r\n    };\r\n    PersistentConnection.prototype.onSecurityDebugPacket_ = function (body) {\r\n        if (this.securityDebugCallback_) {\r\n            this.securityDebugCallback_(body);\r\n        }\r\n        else {\r\n            if ('msg' in body) {\r\n                console.log('FIREBASE: ' + body['msg'].replace('\\n', '\\nFIREBASE: '));\r\n            }\r\n        }\r\n    };\r\n    PersistentConnection.prototype.restoreState_ = function () {\r\n        var _this = this;\r\n        //Re-authenticate ourselves if we have a credential stored.\r\n        this.tryAuth();\r\n        // Puts depend on having received the corresponding data update from the server before they complete, so we must\r\n        // make sure to send listens before puts.\r\n        util.forEach(this.listens_, function (pathString, queries) {\r\n            util.forEach(queries, function (key, listenSpec) {\r\n                _this.sendListen_(listenSpec);\r\n            });\r\n        });\r\n        for (var i = 0; i < this.outstandingPuts_.length; i++) {\r\n            if (this.outstandingPuts_[i])\r\n                this.sendPut_(i);\r\n        }\r\n        while (this.onDisconnectRequestQueue_.length) {\r\n            var request = this.onDisconnectRequestQueue_.shift();\r\n            this.sendOnDisconnect_(request.action, request.pathString, request.data, request.onComplete);\r\n        }\r\n    };\r\n    /**\r\n     * Sends client stats for first connection\r\n     * @private\r\n     */\r\n    PersistentConnection.prototype.sendConnectStats_ = function () {\r\n        var stats = {};\r\n        var clientName = 'js';\r\n        if (util.CONSTANTS.NODE_ADMIN) {\r\n            clientName = 'admin_node';\r\n        }\r\n        else if (util.CONSTANTS.NODE_CLIENT) {\r\n            clientName = 'node';\r\n        }\r\n        stats['sdk.' + clientName + '.' + firebase.SDK_VERSION.replace(/\\./g, '-')] = 1;\r\n        if (util.isMobileCordova()) {\r\n            stats['framework.cordova'] = 1;\r\n        }\r\n        else if (util.isReactNative()) {\r\n            stats['framework.reactnative'] = 1;\r\n        }\r\n        this.reportStats(stats);\r\n    };\r\n    /**\r\n     * @return {boolean}\r\n     * @private\r\n     */\r\n    PersistentConnection.prototype.shouldReconnect_ = function () {\r\n        var online = OnlineMonitor.getInstance().currentlyOnline();\r\n        return util.isEmpty(this.interruptReasons_) && online;\r\n    };\r\n    /**\r\n     * @private\r\n     */\r\n    PersistentConnection.nextPersistentConnectionId_ = 0;\r\n    /**\r\n     * Counter for number of connections created. Mainly used for tagging in the logs\r\n     * @type {number}\r\n     * @private\r\n     */\r\n    PersistentConnection.nextConnectionId_ = 0;\r\n    return PersistentConnection;\r\n}(ServerActions));\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * An implementation of ServerActions that communicates with the server via REST requests.\r\n * This is mostly useful for compatibility with crawlers, where we don't want to spin up a full\r\n * persistent connection (using WebSockets or long-polling)\r\n */\r\nvar ReadonlyRestClient = /** @class */ (function (_super) {\r\n    tslib_1.__extends(ReadonlyRestClient, _super);\r\n    /**\r\n     * @param {!RepoInfo} repoInfo_ Data about the namespace we are connecting to\r\n     * @param {function(string, *, boolean, ?number)} onDataUpdate_ A callback for new data from the server\r\n     * @param {AuthTokenProvider} authTokenProvider_\r\n     * @implements {ServerActions}\r\n     */\r\n    function ReadonlyRestClient(repoInfo_, onDataUpdate_, authTokenProvider_) {\r\n        var _this = _super.call(this) || this;\r\n        _this.repoInfo_ = repoInfo_;\r\n        _this.onDataUpdate_ = onDataUpdate_;\r\n        _this.authTokenProvider_ = authTokenProvider_;\r\n        /** @private {function(...[*])} */\r\n        _this.log_ = logWrapper('p:rest:');\r\n        /**\r\n         * We don't actually need to track listens, except to prevent us calling an onComplete for a listen\r\n         * that's been removed. :-/\r\n         *\r\n         * @private {!Object.<string, !Object>}\r\n         */\r\n        _this.listens_ = {};\r\n        return _this;\r\n    }\r\n    ReadonlyRestClient.prototype.reportStats = function (stats) {\r\n        throw new Error('Method not implemented.');\r\n    };\r\n    /**\r\n     * @param {!Query} query\r\n     * @param {?number=} tag\r\n     * @return {string}\r\n     * @private\r\n     */\r\n    ReadonlyRestClient.getListenId_ = function (query, tag) {\r\n        if (tag !== undefined) {\r\n            return 'tag$' + tag;\r\n        }\r\n        else {\r\n            util.assert(query.getQueryParams().isDefault(), \"should have a tag if it's not a default query.\");\r\n            return query.path.toString();\r\n        }\r\n    };\r\n    /** @inheritDoc */\r\n    ReadonlyRestClient.prototype.listen = function (query, currentHashFn, tag, onComplete) {\r\n        var _this = this;\r\n        var pathString = query.path.toString();\r\n        this.log_('Listen called for ' + pathString + ' ' + query.queryIdentifier());\r\n        // Mark this listener so we can tell if it's removed.\r\n        var listenId = ReadonlyRestClient.getListenId_(query, tag);\r\n        var thisListen = {};\r\n        this.listens_[listenId] = thisListen;\r\n        var queryStringParamaters = query\r\n            .getQueryParams()\r\n            .toRestQueryStringParameters();\r\n        this.restRequest_(pathString + '.json', queryStringParamaters, function (error$$1, result) {\r\n            var data = result;\r\n            if (error$$1 === 404) {\r\n                data = null;\r\n                error$$1 = null;\r\n            }\r\n            if (error$$1 === null) {\r\n                _this.onDataUpdate_(pathString, data, /*isMerge=*/ false, tag);\r\n            }\r\n            if (util.safeGet(_this.listens_, listenId) === thisListen) {\r\n                var status_1;\r\n                if (!error$$1) {\r\n                    status_1 = 'ok';\r\n                }\r\n                else if (error$$1 == 401) {\r\n                    status_1 = 'permission_denied';\r\n                }\r\n                else {\r\n                    status_1 = 'rest_error:' + error$$1;\r\n                }\r\n                onComplete(status_1, null);\r\n            }\r\n        });\r\n    };\r\n    /** @inheritDoc */\r\n    ReadonlyRestClient.prototype.unlisten = function (query, tag) {\r\n        var listenId = ReadonlyRestClient.getListenId_(query, tag);\r\n        delete this.listens_[listenId];\r\n    };\r\n    /** @inheritDoc */\r\n    ReadonlyRestClient.prototype.refreshAuthToken = function (token) {\r\n        // no-op since we just always call getToken.\r\n    };\r\n    /**\r\n     * Performs a REST request to the given path, with the provided query string parameters,\r\n     * and any auth credentials we have.\r\n     *\r\n     * @param {!string} pathString\r\n     * @param {!Object.<string, *>} queryStringParameters\r\n     * @param {?function(?number, *=)} callback\r\n     * @private\r\n     */\r\n    ReadonlyRestClient.prototype.restRequest_ = function (pathString, queryStringParameters, callback) {\r\n        var _this = this;\r\n        if (queryStringParameters === void 0) { queryStringParameters = {}; }\r\n        queryStringParameters['format'] = 'export';\r\n        this.authTokenProvider_\r\n            .getToken(/*forceRefresh=*/ false)\r\n            .then(function (authTokenData) {\r\n            var authToken = authTokenData && authTokenData.accessToken;\r\n            if (authToken) {\r\n                queryStringParameters['auth'] = authToken;\r\n            }\r\n            var url = (_this.repoInfo_.secure ? 'https://' : 'http://') +\r\n                _this.repoInfo_.host +\r\n                pathString +\r\n                '?' +\r\n                util.querystring(queryStringParameters);\r\n            _this.log_('Sending REST request for ' + url);\r\n            var xhr = new XMLHttpRequest();\r\n            xhr.onreadystatechange = function () {\r\n                if (callback && xhr.readyState === 4) {\r\n                    _this.log_('REST Response for ' + url + ' received. status:', xhr.status, 'response:', xhr.responseText);\r\n                    var res = null;\r\n                    if (xhr.status >= 200 && xhr.status < 300) {\r\n                        try {\r\n                            res = util.jsonEval(xhr.responseText);\r\n                        }\r\n                        catch (e) {\r\n                            warn('Failed to parse JSON response for ' +\r\n                                url +\r\n                                ': ' +\r\n                                xhr.responseText);\r\n                        }\r\n                        callback(null, res);\r\n                    }\r\n                    else {\r\n                        // 401 and 404 are expected.\r\n                        if (xhr.status !== 401 && xhr.status !== 404) {\r\n                            warn('Got unsuccessful REST response for ' +\r\n                                url +\r\n                                ' Status: ' +\r\n                                xhr.status);\r\n                        }\r\n                        callback(xhr.status);\r\n                    }\r\n                    callback = null;\r\n                }\r\n            };\r\n            xhr.open('GET', url, /*asynchronous=*/ true);\r\n            xhr.send();\r\n        });\r\n    };\r\n    return ReadonlyRestClient;\r\n}(ServerActions));\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nvar INTERRUPT_REASON = 'repo_interrupt';\r\n/**\r\n * A connection to a single data repository.\r\n */\r\nvar Repo = /** @class */ (function () {\r\n    /**\r\n     * @param {!RepoInfo} repoInfo_\r\n     * @param {boolean} forceRestClient\r\n     * @param {!FirebaseApp} app\r\n     */\r\n    function Repo(repoInfo_, forceRestClient, app) {\r\n        var _this = this;\r\n        this.repoInfo_ = repoInfo_;\r\n        this.app = app;\r\n        this.dataUpdateCount = 0;\r\n        this.statsListener_ = null;\r\n        this.eventQueue_ = new EventQueue();\r\n        this.nextWriteId_ = 1;\r\n        this.interceptServerDataCallback_ = null;\r\n        // A list of data pieces and paths to be set when this client disconnects.\r\n        this.onDisconnect_ = new SparseSnapshotTree();\r\n        /**\r\n         * TODO: This should be @private but it's used by test_access.js and internal.js\r\n         * @type {?PersistentConnection}\r\n         */\r\n        this.persistentConnection_ = null;\r\n        /** @type {!AuthTokenProvider} */\r\n        var authTokenProvider = new AuthTokenProvider(app);\r\n        this.stats_ = StatsManager.getCollection(repoInfo_);\r\n        if (forceRestClient || beingCrawled()) {\r\n            this.server_ = new ReadonlyRestClient(this.repoInfo_, this.onDataUpdate_.bind(this), authTokenProvider);\r\n            // Minor hack: Fire onConnect immediately, since there's no actual connection.\r\n            setTimeout(this.onConnectStatus_.bind(this, true), 0);\r\n        }\r\n        else {\r\n            var authOverride = app.options['databaseAuthVariableOverride'];\r\n            // Validate authOverride\r\n            if (typeof authOverride !== 'undefined' && authOverride !== null) {\r\n                if (typeof authOverride !== 'object') {\r\n                    throw new Error('Only objects are supported for option databaseAuthVariableOverride');\r\n                }\r\n                try {\r\n                    util.stringify(authOverride);\r\n                }\r\n                catch (e) {\r\n                    throw new Error('Invalid authOverride provided: ' + e);\r\n                }\r\n            }\r\n            this.persistentConnection_ = new PersistentConnection(this.repoInfo_, this.onDataUpdate_.bind(this), this.onConnectStatus_.bind(this), this.onServerInfoUpdate_.bind(this), authTokenProvider, authOverride);\r\n            this.server_ = this.persistentConnection_;\r\n        }\r\n        authTokenProvider.addTokenChangeListener(function (token) {\r\n            _this.server_.refreshAuthToken(token);\r\n        });\r\n        // In the case of multiple Repos for the same repoInfo (i.e. there are multiple Firebase.Contexts being used),\r\n        // we only want to create one StatsReporter.  As such, we'll report stats over the first Repo created.\r\n        this.statsReporter_ = StatsManager.getOrCreateReporter(repoInfo_, function () { return new StatsReporter(_this.stats_, _this.server_); });\r\n        this.transactions_init_();\r\n        // Used for .info.\r\n        this.infoData_ = new SnapshotHolder();\r\n        this.infoSyncTree_ = new SyncTree({\r\n            startListening: function (query, tag, currentHashFn, onComplete) {\r\n                var infoEvents = [];\r\n                var node = _this.infoData_.getNode(query.path);\r\n                // This is possibly a hack, but we have different semantics for .info endpoints. We don't raise null events\r\n                // on initial data...\r\n                if (!node.isEmpty()) {\r\n                    infoEvents = _this.infoSyncTree_.applyServerOverwrite(query.path, node);\r\n                    setTimeout(function () {\r\n                        onComplete('ok');\r\n                    }, 0);\r\n                }\r\n                return infoEvents;\r\n            },\r\n            stopListening: function () { }\r\n        });\r\n        this.updateInfo_('connected', false);\r\n        this.serverSyncTree_ = new SyncTree({\r\n            startListening: function (query, tag, currentHashFn, onComplete) {\r\n                _this.server_.listen(query, currentHashFn, tag, function (status, data) {\r\n                    var events = onComplete(status, data);\r\n                    _this.eventQueue_.raiseEventsForChangedPath(query.path, events);\r\n                });\r\n                // No synchronous events for network-backed sync trees\r\n                return [];\r\n            },\r\n            stopListening: function (query, tag) {\r\n                _this.server_.unlisten(query, tag);\r\n            }\r\n        });\r\n    }\r\n    /**\r\n     * @return {string}  The URL corresponding to the root of this Firebase.\r\n     */\r\n    Repo.prototype.toString = function () {\r\n        return ((this.repoInfo_.secure ? 'https://' : 'http://') + this.repoInfo_.host);\r\n    };\r\n    /**\r\n     * @return {!string} The namespace represented by the repo.\r\n     */\r\n    Repo.prototype.name = function () {\r\n        return this.repoInfo_.namespace;\r\n    };\r\n    /**\r\n     * @return {!number} The time in milliseconds, taking the server offset into account if we have one.\r\n     */\r\n    Repo.prototype.serverTime = function () {\r\n        var offsetNode = this.infoData_.getNode(new Path('.info/serverTimeOffset'));\r\n        var offset = offsetNode.val() || 0;\r\n        return new Date().getTime() + offset;\r\n    };\r\n    /**\r\n     * Generate ServerValues using some variables from the repo object.\r\n     * @return {!Object}\r\n     */\r\n    Repo.prototype.generateServerValues = function () {\r\n        return generateWithValues({\r\n            timestamp: this.serverTime()\r\n        });\r\n    };\r\n    /**\r\n     * Called by realtime when we get new messages from the server.\r\n     *\r\n     * @private\r\n     * @param {string} pathString\r\n     * @param {*} data\r\n     * @param {boolean} isMerge\r\n     * @param {?number} tag\r\n     */\r\n    Repo.prototype.onDataUpdate_ = function (pathString, data, isMerge, tag) {\r\n        // For testing.\r\n        this.dataUpdateCount++;\r\n        var path = new Path(pathString);\r\n        data = this.interceptServerDataCallback_\r\n            ? this.interceptServerDataCallback_(pathString, data)\r\n            : data;\r\n        var events = [];\r\n        if (tag) {\r\n            if (isMerge) {\r\n                var taggedChildren = util.map(data, function (raw) {\r\n                    return nodeFromJSON$1(raw);\r\n                });\r\n                events = this.serverSyncTree_.applyTaggedQueryMerge(path, taggedChildren, tag);\r\n            }\r\n            else {\r\n                var taggedSnap = nodeFromJSON$1(data);\r\n                events = this.serverSyncTree_.applyTaggedQueryOverwrite(path, taggedSnap, tag);\r\n            }\r\n        }\r\n        else if (isMerge) {\r\n            var changedChildren = util.map(data, function (raw) {\r\n                return nodeFromJSON$1(raw);\r\n            });\r\n            events = this.serverSyncTree_.applyServerMerge(path, changedChildren);\r\n        }\r\n        else {\r\n            var snap = nodeFromJSON$1(data);\r\n            events = this.serverSyncTree_.applyServerOverwrite(path, snap);\r\n        }\r\n        var affectedPath = path;\r\n        if (events.length > 0) {\r\n            // Since we have a listener outstanding for each transaction, receiving any events\r\n            // is a proxy for some change having occurred.\r\n            affectedPath = this.rerunTransactions_(path);\r\n        }\r\n        this.eventQueue_.raiseEventsForChangedPath(affectedPath, events);\r\n    };\r\n    /**\r\n     * TODO: This should be @private but it's used by test_access.js and internal.js\r\n     * @param {?function(!string, *):*} callback\r\n     * @private\r\n     */\r\n    Repo.prototype.interceptServerData_ = function (callback) {\r\n        this.interceptServerDataCallback_ = callback;\r\n    };\r\n    /**\r\n     * @param {!boolean} connectStatus\r\n     * @private\r\n     */\r\n    Repo.prototype.onConnectStatus_ = function (connectStatus) {\r\n        this.updateInfo_('connected', connectStatus);\r\n        if (connectStatus === false) {\r\n            this.runOnDisconnectEvents_();\r\n        }\r\n    };\r\n    /**\r\n     * @param {!Object} updates\r\n     * @private\r\n     */\r\n    Repo.prototype.onServerInfoUpdate_ = function (updates) {\r\n        var _this = this;\r\n        each(updates, function (value, key) {\r\n            _this.updateInfo_(key, value);\r\n        });\r\n    };\r\n    /**\r\n     *\r\n     * @param {!string} pathString\r\n     * @param {*} value\r\n     * @private\r\n     */\r\n    Repo.prototype.updateInfo_ = function (pathString, value) {\r\n        var path = new Path('/.info/' + pathString);\r\n        var newNode = nodeFromJSON$1(value);\r\n        this.infoData_.updateSnapshot(path, newNode);\r\n        var events = this.infoSyncTree_.applyServerOverwrite(path, newNode);\r\n        this.eventQueue_.raiseEventsForChangedPath(path, events);\r\n    };\r\n    /**\r\n     * @return {!number}\r\n     * @private\r\n     */\r\n    Repo.prototype.getNextWriteId_ = function () {\r\n        return this.nextWriteId_++;\r\n    };\r\n    /**\r\n     * @param {!Path} path\r\n     * @param {*} newVal\r\n     * @param {number|string|null} newPriority\r\n     * @param {?function(?Error, *=)} onComplete\r\n     */\r\n    Repo.prototype.setWithPriority = function (path, newVal, newPriority, onComplete) {\r\n        var _this = this;\r\n        this.log_('set', {\r\n            path: path.toString(),\r\n            value: newVal,\r\n            priority: newPriority\r\n        });\r\n        // TODO: Optimize this behavior to either (a) store flag to skip resolving where possible and / or\r\n        // (b) store unresolved paths on JSON parse\r\n        var serverValues = this.generateServerValues();\r\n        var newNodeUnresolved = nodeFromJSON$1(newVal, newPriority);\r\n        var newNode = resolveDeferredValueSnapshot(newNodeUnresolved, serverValues);\r\n        var writeId = this.getNextWriteId_();\r\n        var events = this.serverSyncTree_.applyUserOverwrite(path, newNode, writeId, true);\r\n        this.eventQueue_.queueEvents(events);\r\n        this.server_.put(path.toString(), newNodeUnresolved.val(/*export=*/ true), function (status, errorReason) {\r\n            var success = status === 'ok';\r\n            if (!success) {\r\n                warn('set at ' + path + ' failed: ' + status);\r\n            }\r\n            var clearEvents = _this.serverSyncTree_.ackUserWrite(writeId, !success);\r\n            _this.eventQueue_.raiseEventsForChangedPath(path, clearEvents);\r\n            _this.callOnCompleteCallback(onComplete, status, errorReason);\r\n        });\r\n        var affectedPath = this.abortTransactions_(path);\r\n        this.rerunTransactions_(affectedPath);\r\n        // We queued the events above, so just flush the queue here\r\n        this.eventQueue_.raiseEventsForChangedPath(affectedPath, []);\r\n    };\r\n    /**\r\n     * @param {!Path} path\r\n     * @param {!Object} childrenToMerge\r\n     * @param {?function(?Error, *=)} onComplete\r\n     */\r\n    Repo.prototype.update = function (path, childrenToMerge, onComplete) {\r\n        var _this = this;\r\n        this.log_('update', { path: path.toString(), value: childrenToMerge });\r\n        // Start with our existing data and merge each child into it.\r\n        var empty = true;\r\n        var serverValues = this.generateServerValues();\r\n        var changedChildren = {};\r\n        util.forEach(childrenToMerge, function (changedKey, changedValue) {\r\n            empty = false;\r\n            var newNodeUnresolved = nodeFromJSON$1(changedValue);\r\n            changedChildren[changedKey] = resolveDeferredValueSnapshot(newNodeUnresolved, serverValues);\r\n        });\r\n        if (!empty) {\r\n            var writeId_1 = this.getNextWriteId_();\r\n            var events = this.serverSyncTree_.applyUserMerge(path, changedChildren, writeId_1);\r\n            this.eventQueue_.queueEvents(events);\r\n            this.server_.merge(path.toString(), childrenToMerge, function (status, errorReason) {\r\n                var success = status === 'ok';\r\n                if (!success) {\r\n                    warn('update at ' + path + ' failed: ' + status);\r\n                }\r\n                var clearEvents = _this.serverSyncTree_.ackUserWrite(writeId_1, !success);\r\n                var affectedPath = clearEvents.length > 0 ? _this.rerunTransactions_(path) : path;\r\n                _this.eventQueue_.raiseEventsForChangedPath(affectedPath, clearEvents);\r\n                _this.callOnCompleteCallback(onComplete, status, errorReason);\r\n            });\r\n            util.forEach(childrenToMerge, function (changedPath) {\r\n                var affectedPath = _this.abortTransactions_(path.child(changedPath));\r\n                _this.rerunTransactions_(affectedPath);\r\n            });\r\n            // We queued the events above, so just flush the queue here\r\n            this.eventQueue_.raiseEventsForChangedPath(path, []);\r\n        }\r\n        else {\r\n            log(\"update() called with empty data.  Don't do anything.\");\r\n            this.callOnCompleteCallback(onComplete, 'ok');\r\n        }\r\n    };\r\n    /**\r\n     * Applies all of the changes stored up in the onDisconnect_ tree.\r\n     * @private\r\n     */\r\n    Repo.prototype.runOnDisconnectEvents_ = function () {\r\n        var _this = this;\r\n        this.log_('onDisconnectEvents');\r\n        var serverValues = this.generateServerValues();\r\n        var resolvedOnDisconnectTree = resolveDeferredValueTree(this.onDisconnect_, serverValues);\r\n        var events = [];\r\n        resolvedOnDisconnectTree.forEachTree(Path.Empty, function (path, snap) {\r\n            events = events.concat(_this.serverSyncTree_.applyServerOverwrite(path, snap));\r\n            var affectedPath = _this.abortTransactions_(path);\r\n            _this.rerunTransactions_(affectedPath);\r\n        });\r\n        this.onDisconnect_ = new SparseSnapshotTree();\r\n        this.eventQueue_.raiseEventsForChangedPath(Path.Empty, events);\r\n    };\r\n    /**\r\n     * @param {!Path} path\r\n     * @param {?function(?Error, *=)} onComplete\r\n     */\r\n    Repo.prototype.onDisconnectCancel = function (path, onComplete) {\r\n        var _this = this;\r\n        this.server_.onDisconnectCancel(path.toString(), function (status, errorReason) {\r\n            if (status === 'ok') {\r\n                _this.onDisconnect_.forget(path);\r\n            }\r\n            _this.callOnCompleteCallback(onComplete, status, errorReason);\r\n        });\r\n    };\r\n    /**\r\n     * @param {!Path} path\r\n     * @param {*} value\r\n     * @param {?function(?Error, *=)} onComplete\r\n     */\r\n    Repo.prototype.onDisconnectSet = function (path, value, onComplete) {\r\n        var _this = this;\r\n        var newNode = nodeFromJSON$1(value);\r\n        this.server_.onDisconnectPut(path.toString(), newNode.val(/*export=*/ true), function (status, errorReason) {\r\n            if (status === 'ok') {\r\n                _this.onDisconnect_.remember(path, newNode);\r\n            }\r\n            _this.callOnCompleteCallback(onComplete, status, errorReason);\r\n        });\r\n    };\r\n    /**\r\n     * @param {!Path} path\r\n     * @param {*} value\r\n     * @param {*} priority\r\n     * @param {?function(?Error, *=)} onComplete\r\n     */\r\n    Repo.prototype.onDisconnectSetWithPriority = function (path, value, priority, onComplete) {\r\n        var _this = this;\r\n        var newNode = nodeFromJSON$1(value, priority);\r\n        this.server_.onDisconnectPut(path.toString(), newNode.val(/*export=*/ true), function (status, errorReason) {\r\n            if (status === 'ok') {\r\n                _this.onDisconnect_.remember(path, newNode);\r\n            }\r\n            _this.callOnCompleteCallback(onComplete, status, errorReason);\r\n        });\r\n    };\r\n    /**\r\n     * @param {!Path} path\r\n     * @param {*} childrenToMerge\r\n     * @param {?function(?Error, *=)} onComplete\r\n     */\r\n    Repo.prototype.onDisconnectUpdate = function (path, childrenToMerge, onComplete) {\r\n        var _this = this;\r\n        if (util.isEmpty(childrenToMerge)) {\r\n            log(\"onDisconnect().update() called with empty data.  Don't do anything.\");\r\n            this.callOnCompleteCallback(onComplete, 'ok');\r\n            return;\r\n        }\r\n        this.server_.onDisconnectMerge(path.toString(), childrenToMerge, function (status, errorReason) {\r\n            if (status === 'ok') {\r\n                util.forEach(childrenToMerge, function (childName, childNode) {\r\n                    var newChildNode = nodeFromJSON$1(childNode);\r\n                    _this.onDisconnect_.remember(path.child(childName), newChildNode);\r\n                });\r\n            }\r\n            _this.callOnCompleteCallback(onComplete, status, errorReason);\r\n        });\r\n    };\r\n    /**\r\n     * @param {!Query} query\r\n     * @param {!EventRegistration} eventRegistration\r\n     */\r\n    Repo.prototype.addEventCallbackForQuery = function (query, eventRegistration) {\r\n        var events;\r\n        if (query.path.getFront() === '.info') {\r\n            events = this.infoSyncTree_.addEventRegistration(query, eventRegistration);\r\n        }\r\n        else {\r\n            events = this.serverSyncTree_.addEventRegistration(query, eventRegistration);\r\n        }\r\n        this.eventQueue_.raiseEventsAtPath(query.path, events);\r\n    };\r\n    /**\r\n     * @param {!Query} query\r\n     * @param {?EventRegistration} eventRegistration\r\n     */\r\n    Repo.prototype.removeEventCallbackForQuery = function (query, eventRegistration) {\r\n        // These are guaranteed not to raise events, since we're not passing in a cancelError. However, we can future-proof\r\n        // a little bit by handling the return values anyways.\r\n        var events;\r\n        if (query.path.getFront() === '.info') {\r\n            events = this.infoSyncTree_.removeEventRegistration(query, eventRegistration);\r\n        }\r\n        else {\r\n            events = this.serverSyncTree_.removeEventRegistration(query, eventRegistration);\r\n        }\r\n        this.eventQueue_.raiseEventsAtPath(query.path, events);\r\n    };\r\n    Repo.prototype.interrupt = function () {\r\n        if (this.persistentConnection_) {\r\n            this.persistentConnection_.interrupt(INTERRUPT_REASON);\r\n        }\r\n    };\r\n    Repo.prototype.resume = function () {\r\n        if (this.persistentConnection_) {\r\n            this.persistentConnection_.resume(INTERRUPT_REASON);\r\n        }\r\n    };\r\n    Repo.prototype.stats = function (showDelta) {\r\n        if (showDelta === void 0) { showDelta = false; }\r\n        if (typeof console === 'undefined')\r\n            return;\r\n        var stats;\r\n        if (showDelta) {\r\n            if (!this.statsListener_)\r\n                this.statsListener_ = new StatsListener(this.stats_);\r\n            stats = this.statsListener_.get();\r\n        }\r\n        else {\r\n            stats = this.stats_.get();\r\n        }\r\n        var longestName = Object.keys(stats).reduce(function (previousValue, currentValue) {\r\n            return Math.max(currentValue.length, previousValue);\r\n        }, 0);\r\n        util.forEach(stats, function (stat, value) {\r\n            // pad stat names to be the same length (plus 2 extra spaces).\r\n            for (var i = stat.length; i < longestName + 2; i++)\r\n                stat += ' ';\r\n            console.log(stat + value);\r\n        });\r\n    };\r\n    Repo.prototype.statsIncrementCounter = function (metric) {\r\n        this.stats_.incrementCounter(metric);\r\n        this.statsReporter_.includeStat(metric);\r\n    };\r\n    /**\r\n     * @param {...*} var_args\r\n     * @private\r\n     */\r\n    Repo.prototype.log_ = function () {\r\n        var var_args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            var_args[_i] = arguments[_i];\r\n        }\r\n        var prefix = '';\r\n        if (this.persistentConnection_) {\r\n            prefix = this.persistentConnection_.id + ':';\r\n        }\r\n        log.apply(void 0, [prefix].concat(var_args));\r\n    };\r\n    /**\r\n     * @param {?function(?Error, *=)} callback\r\n     * @param {!string} status\r\n     * @param {?string=} errorReason\r\n     */\r\n    Repo.prototype.callOnCompleteCallback = function (callback, status, errorReason) {\r\n        if (callback) {\r\n            exceptionGuard(function () {\r\n                if (status == 'ok') {\r\n                    callback(null);\r\n                }\r\n                else {\r\n                    var code = (status || 'error').toUpperCase();\r\n                    var message = code;\r\n                    if (errorReason)\r\n                        message += ': ' + errorReason;\r\n                    var error$$1 = new Error(message);\r\n                    error$$1.code = code;\r\n                    callback(error$$1);\r\n                }\r\n            });\r\n        }\r\n    };\r\n    Object.defineProperty(Repo.prototype, \"database\", {\r\n        get: function () {\r\n            return this.__database || (this.__database = new Database(this));\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return Repo;\r\n}());\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Filters nodes by range and uses an IndexFilter to track any changes after filtering the node\r\n *\r\n * @constructor\r\n * @implements {NodeFilter}\r\n */\r\nvar RangedFilter = /** @class */ (function () {\r\n    /**\r\n     * @param {!QueryParams} params\r\n     */\r\n    function RangedFilter(params) {\r\n        this.indexedFilter_ = new IndexedFilter(params.getIndex());\r\n        this.index_ = params.getIndex();\r\n        this.startPost_ = RangedFilter.getStartPost_(params);\r\n        this.endPost_ = RangedFilter.getEndPost_(params);\r\n    }\r\n    /**\r\n     * @return {!NamedNode}\r\n     */\r\n    RangedFilter.prototype.getStartPost = function () {\r\n        return this.startPost_;\r\n    };\r\n    /**\r\n     * @return {!NamedNode}\r\n     */\r\n    RangedFilter.prototype.getEndPost = function () {\r\n        return this.endPost_;\r\n    };\r\n    /**\r\n     * @param {!NamedNode} node\r\n     * @return {boolean}\r\n     */\r\n    RangedFilter.prototype.matches = function (node) {\r\n        return (this.index_.compare(this.getStartPost(), node) <= 0 &&\r\n            this.index_.compare(node, this.getEndPost()) <= 0);\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    RangedFilter.prototype.updateChild = function (snap, key, newChild, affectedPath, source, optChangeAccumulator) {\r\n        if (!this.matches(new NamedNode(key, newChild))) {\r\n            newChild = ChildrenNode.EMPTY_NODE;\r\n        }\r\n        return this.indexedFilter_.updateChild(snap, key, newChild, affectedPath, source, optChangeAccumulator);\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    RangedFilter.prototype.updateFullNode = function (oldSnap, newSnap, optChangeAccumulator) {\r\n        if (newSnap.isLeafNode()) {\r\n            // Make sure we have a children node with the correct index, not a leaf node;\r\n            newSnap = ChildrenNode.EMPTY_NODE;\r\n        }\r\n        var filtered = newSnap.withIndex(this.index_);\r\n        // Don't support priorities on queries\r\n        filtered = filtered.updatePriority(ChildrenNode.EMPTY_NODE);\r\n        var self = this;\r\n        newSnap.forEachChild(PRIORITY_INDEX, function (key, childNode) {\r\n            if (!self.matches(new NamedNode(key, childNode))) {\r\n                filtered = filtered.updateImmediateChild(key, ChildrenNode.EMPTY_NODE);\r\n            }\r\n        });\r\n        return this.indexedFilter_.updateFullNode(oldSnap, filtered, optChangeAccumulator);\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    RangedFilter.prototype.updatePriority = function (oldSnap, newPriority) {\r\n        // Don't support priorities on queries\r\n        return oldSnap;\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    RangedFilter.prototype.filtersNodes = function () {\r\n        return true;\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    RangedFilter.prototype.getIndexedFilter = function () {\r\n        return this.indexedFilter_;\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    RangedFilter.prototype.getIndex = function () {\r\n        return this.index_;\r\n    };\r\n    /**\r\n     * @param {!QueryParams} params\r\n     * @return {!NamedNode}\r\n     * @private\r\n     */\r\n    RangedFilter.getStartPost_ = function (params) {\r\n        if (params.hasStart()) {\r\n            var startName = params.getIndexStartName();\r\n            return params.getIndex().makePost(params.getIndexStartValue(), startName);\r\n        }\r\n        else {\r\n            return params.getIndex().minPost();\r\n        }\r\n    };\r\n    /**\r\n     * @param {!QueryParams} params\r\n     * @return {!NamedNode}\r\n     * @private\r\n     */\r\n    RangedFilter.getEndPost_ = function (params) {\r\n        if (params.hasEnd()) {\r\n            var endName = params.getIndexEndName();\r\n            return params.getIndex().makePost(params.getIndexEndValue(), endName);\r\n        }\r\n        else {\r\n            return params.getIndex().maxPost();\r\n        }\r\n    };\r\n    return RangedFilter;\r\n}());\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Applies a limit and a range to a node and uses RangedFilter to do the heavy lifting where possible\r\n *\r\n * @constructor\r\n * @implements {NodeFilter}\r\n */\r\nvar LimitedFilter = /** @class */ (function () {\r\n    /**\r\n     * @param {!QueryParams} params\r\n     */\r\n    function LimitedFilter(params) {\r\n        this.rangedFilter_ = new RangedFilter(params);\r\n        this.index_ = params.getIndex();\r\n        this.limit_ = params.getLimit();\r\n        this.reverse_ = !params.isViewFromLeft();\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    LimitedFilter.prototype.updateChild = function (snap, key, newChild, affectedPath, source, optChangeAccumulator) {\r\n        if (!this.rangedFilter_.matches(new NamedNode(key, newChild))) {\r\n            newChild = ChildrenNode.EMPTY_NODE;\r\n        }\r\n        if (snap.getImmediateChild(key).equals(newChild)) {\r\n            // No change\r\n            return snap;\r\n        }\r\n        else if (snap.numChildren() < this.limit_) {\r\n            return this.rangedFilter_\r\n                .getIndexedFilter()\r\n                .updateChild(snap, key, newChild, affectedPath, source, optChangeAccumulator);\r\n        }\r\n        else {\r\n            return this.fullLimitUpdateChild_(snap, key, newChild, source, optChangeAccumulator);\r\n        }\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    LimitedFilter.prototype.updateFullNode = function (oldSnap, newSnap, optChangeAccumulator) {\r\n        var filtered;\r\n        if (newSnap.isLeafNode() || newSnap.isEmpty()) {\r\n            // Make sure we have a children node with the correct index, not a leaf node;\r\n            filtered = ChildrenNode.EMPTY_NODE.withIndex(this.index_);\r\n        }\r\n        else {\r\n            if (this.limit_ * 2 < newSnap.numChildren() &&\r\n                newSnap.isIndexed(this.index_)) {\r\n                // Easier to build up a snapshot, since what we're given has more than twice the elements we want\r\n                filtered = ChildrenNode.EMPTY_NODE.withIndex(this.index_);\r\n                // anchor to the startPost, endPost, or last element as appropriate\r\n                var iterator = void 0;\r\n                if (this.reverse_) {\r\n                    iterator = newSnap.getReverseIteratorFrom(this.rangedFilter_.getEndPost(), this.index_);\r\n                }\r\n                else {\r\n                    iterator = newSnap.getIteratorFrom(this.rangedFilter_.getStartPost(), this.index_);\r\n                }\r\n                var count = 0;\r\n                while (iterator.hasNext() && count < this.limit_) {\r\n                    var next = iterator.getNext();\r\n                    var inRange = void 0;\r\n                    if (this.reverse_) {\r\n                        inRange =\r\n                            this.index_.compare(this.rangedFilter_.getStartPost(), next) <= 0;\r\n                    }\r\n                    else {\r\n                        inRange =\r\n                            this.index_.compare(next, this.rangedFilter_.getEndPost()) <= 0;\r\n                    }\r\n                    if (inRange) {\r\n                        filtered = filtered.updateImmediateChild(next.name, next.node);\r\n                        count++;\r\n                    }\r\n                    else {\r\n                        // if we have reached the end post, we cannot keep adding elemments\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n            else {\r\n                // The snap contains less than twice the limit. Faster to delete from the snap than build up a new one\r\n                filtered = newSnap.withIndex(this.index_);\r\n                // Don't support priorities on queries\r\n                filtered = filtered.updatePriority(ChildrenNode.EMPTY_NODE);\r\n                var startPost = void 0;\r\n                var endPost = void 0;\r\n                var cmp = void 0;\r\n                var iterator = void 0;\r\n                if (this.reverse_) {\r\n                    iterator = filtered.getReverseIterator(this.index_);\r\n                    startPost = this.rangedFilter_.getEndPost();\r\n                    endPost = this.rangedFilter_.getStartPost();\r\n                    var indexCompare_1 = this.index_.getCompare();\r\n                    cmp = function (a, b) { return indexCompare_1(b, a); };\r\n                }\r\n                else {\r\n                    iterator = filtered.getIterator(this.index_);\r\n                    startPost = this.rangedFilter_.getStartPost();\r\n                    endPost = this.rangedFilter_.getEndPost();\r\n                    cmp = this.index_.getCompare();\r\n                }\r\n                var count = 0;\r\n                var foundStartPost = false;\r\n                while (iterator.hasNext()) {\r\n                    var next = iterator.getNext();\r\n                    if (!foundStartPost && cmp(startPost, next) <= 0) {\r\n                        // start adding\r\n                        foundStartPost = true;\r\n                    }\r\n                    var inRange = foundStartPost && count < this.limit_ && cmp(next, endPost) <= 0;\r\n                    if (inRange) {\r\n                        count++;\r\n                    }\r\n                    else {\r\n                        filtered = filtered.updateImmediateChild(next.name, ChildrenNode.EMPTY_NODE);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return this.rangedFilter_\r\n            .getIndexedFilter()\r\n            .updateFullNode(oldSnap, filtered, optChangeAccumulator);\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    LimitedFilter.prototype.updatePriority = function (oldSnap, newPriority) {\r\n        // Don't support priorities on queries\r\n        return oldSnap;\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    LimitedFilter.prototype.filtersNodes = function () {\r\n        return true;\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    LimitedFilter.prototype.getIndexedFilter = function () {\r\n        return this.rangedFilter_.getIndexedFilter();\r\n    };\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    LimitedFilter.prototype.getIndex = function () {\r\n        return this.index_;\r\n    };\r\n    /**\r\n     * @param {!Node} snap\r\n     * @param {string} childKey\r\n     * @param {!Node} childSnap\r\n     * @param {!CompleteChildSource} source\r\n     * @param {?ChildChangeAccumulator} changeAccumulator\r\n     * @return {!Node}\r\n     * @private\r\n     */\r\n    LimitedFilter.prototype.fullLimitUpdateChild_ = function (snap, childKey, childSnap, source, changeAccumulator) {\r\n        // TODO: rename all cache stuff etc to general snap terminology\r\n        var cmp;\r\n        if (this.reverse_) {\r\n            var indexCmp_1 = this.index_.getCompare();\r\n            cmp = function (a, b) { return indexCmp_1(b, a); };\r\n        }\r\n        else {\r\n            cmp = this.index_.getCompare();\r\n        }\r\n        var oldEventCache = snap;\r\n        util.assert(oldEventCache.numChildren() == this.limit_, '');\r\n        var newChildNamedNode = new NamedNode(childKey, childSnap);\r\n        var windowBoundary = this.reverse_\r\n            ? oldEventCache.getFirstChild(this.index_)\r\n            : oldEventCache.getLastChild(this.index_);\r\n        var inRange = this.rangedFilter_.matches(newChildNamedNode);\r\n        if (oldEventCache.hasChild(childKey)) {\r\n            var oldChildSnap = oldEventCache.getImmediateChild(childKey);\r\n            var nextChild = source.getChildAfterChild(this.index_, windowBoundary, this.reverse_);\r\n            while (nextChild != null &&\r\n                (nextChild.name == childKey || oldEventCache.hasChild(nextChild.name))) {\r\n                // There is a weird edge case where a node is updated as part of a merge in the write tree, but hasn't\r\n                // been applied to the limited filter yet. Ignore this next child which will be updated later in\r\n                // the limited filter...\r\n                nextChild = source.getChildAfterChild(this.index_, nextChild, this.reverse_);\r\n            }\r\n            var compareNext = nextChild == null ? 1 : cmp(nextChild, newChildNamedNode);\r\n            var remainsInWindow = inRange && !childSnap.isEmpty() && compareNext >= 0;\r\n            if (remainsInWindow) {\r\n                if (changeAccumulator != null) {\r\n                    changeAccumulator.trackChildChange(Change.childChangedChange(childKey, childSnap, oldChildSnap));\r\n                }\r\n                return oldEventCache.updateImmediateChild(childKey, childSnap);\r\n            }\r\n            else {\r\n                if (changeAccumulator != null) {\r\n                    changeAccumulator.trackChildChange(Change.childRemovedChange(childKey, oldChildSnap));\r\n                }\r\n                var newEventCache = oldEventCache.updateImmediateChild(childKey, ChildrenNode.EMPTY_NODE);\r\n                var nextChildInRange = nextChild != null && this.rangedFilter_.matches(nextChild);\r\n                if (nextChildInRange) {\r\n                    if (changeAccumulator != null) {\r\n                        changeAccumulator.trackChildChange(Change.childAddedChange(nextChild.name, nextChild.node));\r\n                    }\r\n                    return newEventCache.updateImmediateChild(nextChild.name, nextChild.node);\r\n                }\r\n                else {\r\n                    return newEventCache;\r\n                }\r\n            }\r\n        }\r\n        else if (childSnap.isEmpty()) {\r\n            // we're deleting a node, but it was not in the window, so ignore it\r\n            return snap;\r\n        }\r\n        else if (inRange) {\r\n            if (cmp(windowBoundary, newChildNamedNode) >= 0) {\r\n                if (changeAccumulator != null) {\r\n                    changeAccumulator.trackChildChange(Change.childRemovedChange(windowBoundary.name, windowBoundary.node));\r\n                    changeAccumulator.trackChildChange(Change.childAddedChange(childKey, childSnap));\r\n                }\r\n                return oldEventCache\r\n                    .updateImmediateChild(childKey, childSnap)\r\n                    .updateImmediateChild(windowBoundary.name, ChildrenNode.EMPTY_NODE);\r\n            }\r\n            else {\r\n                return snap;\r\n            }\r\n        }\r\n        else {\r\n            return snap;\r\n        }\r\n    };\r\n    return LimitedFilter;\r\n}());\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * This class is an immutable-from-the-public-api struct containing a set of query parameters defining a\r\n * range to be returned for a particular location. It is assumed that validation of parameters is done at the\r\n * user-facing API level, so it is not done here.\r\n * @constructor\r\n */\r\nvar QueryParams = /** @class */ (function () {\r\n    function QueryParams() {\r\n        this.limitSet_ = false;\r\n        this.startSet_ = false;\r\n        this.startNameSet_ = false;\r\n        this.endSet_ = false;\r\n        this.endNameSet_ = false;\r\n        this.limit_ = 0;\r\n        this.viewFrom_ = '';\r\n        this.indexStartValue_ = null;\r\n        this.indexStartName_ = '';\r\n        this.indexEndValue_ = null;\r\n        this.indexEndName_ = '';\r\n        this.index_ = PRIORITY_INDEX;\r\n    }\r\n    /**\r\n     * @return {boolean}\r\n     */\r\n    QueryParams.prototype.hasStart = function () {\r\n        return this.startSet_;\r\n    };\r\n    /**\r\n     * @return {boolean} True if it would return from left.\r\n     */\r\n    QueryParams.prototype.isViewFromLeft = function () {\r\n        if (this.viewFrom_ === '') {\r\n            // limit(), rather than limitToFirst or limitToLast was called.\r\n            // This means that only one of startSet_ and endSet_ is true. Use them\r\n            // to calculate which side of the view to anchor to. If neither is set,\r\n            // anchor to the end.\r\n            return this.startSet_;\r\n        }\r\n        else {\r\n            return (this.viewFrom_ === QueryParams.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT);\r\n        }\r\n    };\r\n    /**\r\n     * Only valid to call if hasStart() returns true\r\n     * @return {*}\r\n     */\r\n    QueryParams.prototype.getIndexStartValue = function () {\r\n        util.assert(this.startSet_, 'Only valid if start has been set');\r\n        return this.indexStartValue_;\r\n    };\r\n    /**\r\n     * Only valid to call if hasStart() returns true.\r\n     * Returns the starting key name for the range defined by these query parameters\r\n     * @return {!string}\r\n     */\r\n    QueryParams.prototype.getIndexStartName = function () {\r\n        util.assert(this.startSet_, 'Only valid if start has been set');\r\n        if (this.startNameSet_) {\r\n            return this.indexStartName_;\r\n        }\r\n        else {\r\n            return MIN_NAME;\r\n        }\r\n    };\r\n    /**\r\n     * @return {boolean}\r\n     */\r\n    QueryParams.prototype.hasEnd = function () {\r\n        return this.endSet_;\r\n    };\r\n    /**\r\n     * Only valid to call if hasEnd() returns true.\r\n     * @return {*}\r\n     */\r\n    QueryParams.prototype.getIndexEndValue = function () {\r\n        util.assert(this.endSet_, 'Only valid if end has been set');\r\n        return this.indexEndValue_;\r\n    };\r\n    /**\r\n     * Only valid to call if hasEnd() returns true.\r\n     * Returns the end key name for the range defined by these query parameters\r\n     * @return {!string}\r\n     */\r\n    QueryParams.prototype.getIndexEndName = function () {\r\n        util.assert(this.endSet_, 'Only valid if end has been set');\r\n        if (this.endNameSet_) {\r\n            return this.indexEndName_;\r\n        }\r\n        else {\r\n            return MAX_NAME;\r\n        }\r\n    };\r\n    /**\r\n     * @return {boolean}\r\n     */\r\n    QueryParams.prototype.hasLimit = function () {\r\n        return this.limitSet_;\r\n    };\r\n    /**\r\n     * @return {boolean} True if a limit has been set and it has been explicitly anchored\r\n     */\r\n    QueryParams.prototype.hasAnchoredLimit = function () {\r\n        return this.limitSet_ && this.viewFrom_ !== '';\r\n    };\r\n    /**\r\n     * Only valid to call if hasLimit() returns true\r\n     * @return {!number}\r\n     */\r\n    QueryParams.prototype.getLimit = function () {\r\n        util.assert(this.limitSet_, 'Only valid if limit has been set');\r\n        return this.limit_;\r\n    };\r\n    /**\r\n     * @return {!Index}\r\n     */\r\n    QueryParams.prototype.getIndex = function () {\r\n        return this.index_;\r\n    };\r\n    /**\r\n     * @return {!QueryParams}\r\n     * @private\r\n     */\r\n    QueryParams.prototype.copy_ = function () {\r\n        var copy = new QueryParams();\r\n        copy.limitSet_ = this.limitSet_;\r\n        copy.limit_ = this.limit_;\r\n        copy.startSet_ = this.startSet_;\r\n        copy.indexStartValue_ = this.indexStartValue_;\r\n        copy.startNameSet_ = this.startNameSet_;\r\n        copy.indexStartName_ = this.indexStartName_;\r\n        copy.endSet_ = this.endSet_;\r\n        copy.indexEndValue_ = this.indexEndValue_;\r\n        copy.endNameSet_ = this.endNameSet_;\r\n        copy.indexEndName_ = this.indexEndName_;\r\n        copy.index_ = this.index_;\r\n        copy.viewFrom_ = this.viewFrom_;\r\n        return copy;\r\n    };\r\n    /**\r\n     * @param {!number} newLimit\r\n     * @return {!QueryParams}\r\n     */\r\n    QueryParams.prototype.limit = function (newLimit) {\r\n        var newParams = this.copy_();\r\n        newParams.limitSet_ = true;\r\n        newParams.limit_ = newLimit;\r\n        newParams.viewFrom_ = '';\r\n        return newParams;\r\n    };\r\n    /**\r\n     * @param {!number} newLimit\r\n     * @return {!QueryParams}\r\n     */\r\n    QueryParams.prototype.limitToFirst = function (newLimit) {\r\n        var newParams = this.copy_();\r\n        newParams.limitSet_ = true;\r\n        newParams.limit_ = newLimit;\r\n        newParams.viewFrom_ = QueryParams.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT;\r\n        return newParams;\r\n    };\r\n    /**\r\n     * @param {!number} newLimit\r\n     * @return {!QueryParams}\r\n     */\r\n    QueryParams.prototype.limitToLast = function (newLimit) {\r\n        var newParams = this.copy_();\r\n        newParams.limitSet_ = true;\r\n        newParams.limit_ = newLimit;\r\n        newParams.viewFrom_ = QueryParams.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_RIGHT;\r\n        return newParams;\r\n    };\r\n    /**\r\n     * @param {*} indexValue\r\n     * @param {?string=} key\r\n     * @return {!QueryParams}\r\n     */\r\n    QueryParams.prototype.startAt = function (indexValue, key) {\r\n        var newParams = this.copy_();\r\n        newParams.startSet_ = true;\r\n        if (!(indexValue !== undefined)) {\r\n            indexValue = null;\r\n        }\r\n        newParams.indexStartValue_ = indexValue;\r\n        if (key != null) {\r\n            newParams.startNameSet_ = true;\r\n            newParams.indexStartName_ = key;\r\n        }\r\n        else {\r\n            newParams.startNameSet_ = false;\r\n            newParams.indexStartName_ = '';\r\n        }\r\n        return newParams;\r\n    };\r\n    /**\r\n     * @param {*} indexValue\r\n     * @param {?string=} key\r\n     * @return {!QueryParams}\r\n     */\r\n    QueryParams.prototype.endAt = function (indexValue, key) {\r\n        var newParams = this.copy_();\r\n        newParams.endSet_ = true;\r\n        if (!(indexValue !== undefined)) {\r\n            indexValue = null;\r\n        }\r\n        newParams.indexEndValue_ = indexValue;\r\n        if (key !== undefined) {\r\n            newParams.endNameSet_ = true;\r\n            newParams.indexEndName_ = key;\r\n        }\r\n        else {\r\n            newParams.endNameSet_ = false;\r\n            newParams.indexEndName_ = '';\r\n        }\r\n        return newParams;\r\n    };\r\n    /**\r\n     * @param {!Index} index\r\n     * @return {!QueryParams}\r\n     */\r\n    QueryParams.prototype.orderBy = function (index) {\r\n        var newParams = this.copy_();\r\n        newParams.index_ = index;\r\n        return newParams;\r\n    };\r\n    /**\r\n     * @return {!Object}\r\n     */\r\n    QueryParams.prototype.getQueryObject = function () {\r\n        var WIRE_PROTOCOL_CONSTANTS = QueryParams.WIRE_PROTOCOL_CONSTANTS_;\r\n        var obj = {};\r\n        if (this.startSet_) {\r\n            obj[WIRE_PROTOCOL_CONSTANTS.INDEX_START_VALUE] = this.indexStartValue_;\r\n            if (this.startNameSet_) {\r\n                obj[WIRE_PROTOCOL_CONSTANTS.INDEX_START_NAME] = this.indexStartName_;\r\n            }\r\n        }\r\n        if (this.endSet_) {\r\n            obj[WIRE_PROTOCOL_CONSTANTS.INDEX_END_VALUE] = this.indexEndValue_;\r\n            if (this.endNameSet_) {\r\n                obj[WIRE_PROTOCOL_CONSTANTS.INDEX_END_NAME] = this.indexEndName_;\r\n            }\r\n        }\r\n        if (this.limitSet_) {\r\n            obj[WIRE_PROTOCOL_CONSTANTS.LIMIT] = this.limit_;\r\n            var viewFrom = this.viewFrom_;\r\n            if (viewFrom === '') {\r\n                if (this.isViewFromLeft()) {\r\n                    viewFrom = WIRE_PROTOCOL_CONSTANTS.VIEW_FROM_LEFT;\r\n                }\r\n                else {\r\n                    viewFrom = WIRE_PROTOCOL_CONSTANTS.VIEW_FROM_RIGHT;\r\n                }\r\n            }\r\n            obj[WIRE_PROTOCOL_CONSTANTS.VIEW_FROM] = viewFrom;\r\n        }\r\n        // For now, priority index is the default, so we only specify if it's some other index\r\n        if (this.index_ !== PRIORITY_INDEX) {\r\n            obj[WIRE_PROTOCOL_CONSTANTS.INDEX] = this.index_.toString();\r\n        }\r\n        return obj;\r\n    };\r\n    /**\r\n     * @return {boolean}\r\n     */\r\n    QueryParams.prototype.loadsAllData = function () {\r\n        return !(this.startSet_ || this.endSet_ || this.limitSet_);\r\n    };\r\n    /**\r\n     * @return {boolean}\r\n     */\r\n    QueryParams.prototype.isDefault = function () {\r\n        return this.loadsAllData() && this.index_ == PRIORITY_INDEX;\r\n    };\r\n    /**\r\n     * @return {!NodeFilter}\r\n     */\r\n    QueryParams.prototype.getNodeFilter = function () {\r\n        if (this.loadsAllData()) {\r\n            return new IndexedFilter(this.getIndex());\r\n        }\r\n        else if (this.hasLimit()) {\r\n            return new LimitedFilter(this);\r\n        }\r\n        else {\r\n            return new RangedFilter(this);\r\n        }\r\n    };\r\n    /**\r\n     * Returns a set of REST query string parameters representing this query.\r\n     *\r\n     * @return {!Object.<string,*>} query string parameters\r\n     */\r\n    QueryParams.prototype.toRestQueryStringParameters = function () {\r\n        var REST_CONSTANTS = QueryParams.REST_QUERY_CONSTANTS_;\r\n        var qs = {};\r\n        if (this.isDefault()) {\r\n            return qs;\r\n        }\r\n        var orderBy;\r\n        if (this.index_ === PRIORITY_INDEX) {\r\n            orderBy = REST_CONSTANTS.PRIORITY_INDEX;\r\n        }\r\n        else if (this.index_ === VALUE_INDEX) {\r\n            orderBy = REST_CONSTANTS.VALUE_INDEX;\r\n        }\r\n        else if (this.index_ === KEY_INDEX) {\r\n            orderBy = REST_CONSTANTS.KEY_INDEX;\r\n        }\r\n        else {\r\n            util.assert(this.index_ instanceof PathIndex, 'Unrecognized index type!');\r\n            orderBy = this.index_.toString();\r\n        }\r\n        qs[REST_CONSTANTS.ORDER_BY] = util.stringify(orderBy);\r\n        if (this.startSet_) {\r\n            qs[REST_CONSTANTS.START_AT] = util.stringify(this.indexStartValue_);\r\n            if (this.startNameSet_) {\r\n                qs[REST_CONSTANTS.START_AT] += ',' + util.stringify(this.indexStartName_);\r\n            }\r\n        }\r\n        if (this.endSet_) {\r\n            qs[REST_CONSTANTS.END_AT] = util.stringify(this.indexEndValue_);\r\n            if (this.endNameSet_) {\r\n                qs[REST_CONSTANTS.END_AT] += ',' + util.stringify(this.indexEndName_);\r\n            }\r\n        }\r\n        if (this.limitSet_) {\r\n            if (this.isViewFromLeft()) {\r\n                qs[REST_CONSTANTS.LIMIT_TO_FIRST] = this.limit_;\r\n            }\r\n            else {\r\n                qs[REST_CONSTANTS.LIMIT_TO_LAST] = this.limit_;\r\n            }\r\n        }\r\n        return qs;\r\n    };\r\n    /**\r\n     * Wire Protocol Constants\r\n     * @const\r\n     * @enum {string}\r\n     * @private\r\n     */\r\n    QueryParams.WIRE_PROTOCOL_CONSTANTS_ = {\r\n        INDEX_START_VALUE: 'sp',\r\n        INDEX_START_NAME: 'sn',\r\n        INDEX_END_VALUE: 'ep',\r\n        INDEX_END_NAME: 'en',\r\n        LIMIT: 'l',\r\n        VIEW_FROM: 'vf',\r\n        VIEW_FROM_LEFT: 'l',\r\n        VIEW_FROM_RIGHT: 'r',\r\n        INDEX: 'i'\r\n    };\r\n    /**\r\n     * REST Query Constants\r\n     * @const\r\n     * @enum {string}\r\n     * @private\r\n     */\r\n    QueryParams.REST_QUERY_CONSTANTS_ = {\r\n        ORDER_BY: 'orderBy',\r\n        PRIORITY_INDEX: '$priority',\r\n        VALUE_INDEX: '$value',\r\n        KEY_INDEX: '$key',\r\n        START_AT: 'startAt',\r\n        END_AT: 'endAt',\r\n        LIMIT_TO_FIRST: 'limitToFirst',\r\n        LIMIT_TO_LAST: 'limitToLast'\r\n    };\r\n    /**\r\n     * Default, empty query parameters\r\n     * @type {!QueryParams}\r\n     * @const\r\n     */\r\n    QueryParams.DEFAULT = new QueryParams();\r\n    return QueryParams;\r\n}());\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nvar Reference = /** @class */ (function (_super) {\r\n    tslib_1.__extends(Reference, _super);\r\n    /**\r\n     * Call options:\r\n     *   new Reference(Repo, Path) or\r\n     *   new Reference(url: string, string|RepoManager)\r\n     *\r\n     * Externally - this is the firebase.database.Reference type.\r\n     *\r\n     * @param {!Repo} repo\r\n     * @param {(!Path)} path\r\n     * @extends {Query}\r\n     */\r\n    function Reference(repo, path) {\r\n        var _this = this;\r\n        if (!(repo instanceof Repo)) {\r\n            throw new Error('new Reference() no longer supported - use app.database().');\r\n        }\r\n        // call Query's constructor, passing in the repo and path.\r\n        _this = _super.call(this, repo, path, QueryParams.DEFAULT, false) || this;\r\n        return _this;\r\n    }\r\n    /** @return {?string} */\r\n    Reference.prototype.getKey = function () {\r\n        util.validateArgCount('Reference.key', 0, 0, arguments.length);\r\n        if (this.path.isEmpty())\r\n            return null;\r\n        else\r\n            return this.path.getBack();\r\n    };\r\n    /**\r\n     * @param {!(string|Path)} pathString\r\n     * @return {!Reference}\r\n     */\r\n    Reference.prototype.child = function (pathString) {\r\n        util.validateArgCount('Reference.child', 1, 1, arguments.length);\r\n        if (typeof pathString === 'number') {\r\n            pathString = String(pathString);\r\n        }\r\n        else if (!(pathString instanceof Path)) {\r\n            if (this.path.getFront() === null)\r\n                validateRootPathString('Reference.child', 1, pathString, false);\r\n            else\r\n                validatePathString('Reference.child', 1, pathString, false);\r\n        }\r\n        return new Reference(this.repo, this.path.child(pathString));\r\n    };\r\n    /** @return {?Reference} */\r\n    Reference.prototype.getParent = function () {\r\n        util.validateArgCount('Reference.parent', 0, 0, arguments.length);\r\n        var parentPath = this.path.parent();\r\n        return parentPath === null ? null : new Reference(this.repo, parentPath);\r\n    };\r\n    /** @return {!Reference} */\r\n    Reference.prototype.getRoot = function () {\r\n        util.validateArgCount('Reference.root', 0, 0, arguments.length);\r\n        var ref = this;\r\n        while (ref.getParent() !== null) {\r\n            ref = ref.getParent();\r\n        }\r\n        return ref;\r\n    };\r\n    /** @return {!Database} */\r\n    Reference.prototype.databaseProp = function () {\r\n        return this.repo.database;\r\n    };\r\n    /**\r\n     * @param {*} newVal\r\n     * @param {function(?Error)=} onComplete\r\n     * @return {!Promise}\r\n     */\r\n    Reference.prototype.set = function (newVal, onComplete) {\r\n        util.validateArgCount('Reference.set', 1, 2, arguments.length);\r\n        validateWritablePath('Reference.set', this.path);\r\n        validateFirebaseDataArg('Reference.set', 1, newVal, this.path, false);\r\n        util.validateCallback('Reference.set', 2, onComplete, true);\r\n        var deferred = new util.Deferred();\r\n        this.repo.setWithPriority(this.path, newVal, \r\n        /*priority=*/ null, deferred.wrapCallback(onComplete));\r\n        return deferred.promise;\r\n    };\r\n    /**\r\n     * @param {!Object} objectToMerge\r\n     * @param {function(?Error)=} onComplete\r\n     * @return {!Promise}\r\n     */\r\n    Reference.prototype.update = function (objectToMerge, onComplete) {\r\n        util.validateArgCount('Reference.update', 1, 2, arguments.length);\r\n        validateWritablePath('Reference.update', this.path);\r\n        if (Array.isArray(objectToMerge)) {\r\n            var newObjectToMerge = {};\r\n            for (var i = 0; i < objectToMerge.length; ++i) {\r\n                newObjectToMerge['' + i] = objectToMerge[i];\r\n            }\r\n            objectToMerge = newObjectToMerge;\r\n            warn('Passing an Array to Firebase.update() is deprecated. ' +\r\n                'Use set() if you want to overwrite the existing data, or ' +\r\n                'an Object with integer keys if you really do want to ' +\r\n                'only update some of the children.');\r\n        }\r\n        validateFirebaseMergeDataArg('Reference.update', 1, objectToMerge, this.path, false);\r\n        util.validateCallback('Reference.update', 2, onComplete, true);\r\n        var deferred = new util.Deferred();\r\n        this.repo.update(this.path, objectToMerge, deferred.wrapCallback(onComplete));\r\n        return deferred.promise;\r\n    };\r\n    /**\r\n     * @param {*} newVal\r\n     * @param {string|number|null} newPriority\r\n     * @param {function(?Error)=} onComplete\r\n     * @return {!Promise}\r\n     */\r\n    Reference.prototype.setWithPriority = function (newVal, newPriority, onComplete) {\r\n        util.validateArgCount('Reference.setWithPriority', 2, 3, arguments.length);\r\n        validateWritablePath('Reference.setWithPriority', this.path);\r\n        validateFirebaseDataArg('Reference.setWithPriority', 1, newVal, this.path, false);\r\n        validatePriority('Reference.setWithPriority', 2, newPriority, false);\r\n        util.validateCallback('Reference.setWithPriority', 3, onComplete, true);\r\n        if (this.getKey() === '.length' || this.getKey() === '.keys')\r\n            throw 'Reference.setWithPriority failed: ' +\r\n                this.getKey() +\r\n                ' is a read-only object.';\r\n        var deferred = new util.Deferred();\r\n        this.repo.setWithPriority(this.path, newVal, newPriority, deferred.wrapCallback(onComplete));\r\n        return deferred.promise;\r\n    };\r\n    /**\r\n     * @param {function(?Error)=} onComplete\r\n     * @return {!Promise}\r\n     */\r\n    Reference.prototype.remove = function (onComplete) {\r\n        util.validateArgCount('Reference.remove', 0, 1, arguments.length);\r\n        validateWritablePath('Reference.remove', this.path);\r\n        util.validateCallback('Reference.remove', 1, onComplete, true);\r\n        return this.set(null, onComplete);\r\n    };\r\n    /**\r\n     * @param {function(*):*} transactionUpdate\r\n     * @param {(function(?Error, boolean, ?DataSnapshot))=} onComplete\r\n     * @param {boolean=} applyLocally\r\n     * @return {!Promise}\r\n     */\r\n    Reference.prototype.transaction = function (transactionUpdate, onComplete, applyLocally) {\r\n        util.validateArgCount('Reference.transaction', 1, 3, arguments.length);\r\n        validateWritablePath('Reference.transaction', this.path);\r\n        util.validateCallback('Reference.transaction', 1, transactionUpdate, false);\r\n        util.validateCallback('Reference.transaction', 2, onComplete, true);\r\n        // NOTE: applyLocally is an internal-only option for now.  We need to decide if we want to keep it and how\r\n        // to expose it.\r\n        validateBoolean('Reference.transaction', 3, applyLocally, true);\r\n        if (this.getKey() === '.length' || this.getKey() === '.keys')\r\n            throw 'Reference.transaction failed: ' +\r\n                this.getKey() +\r\n                ' is a read-only object.';\r\n        if (applyLocally === undefined)\r\n            applyLocally = true;\r\n        var deferred = new util.Deferred();\r\n        if (typeof onComplete === 'function') {\r\n            deferred.promise.catch(function () { });\r\n        }\r\n        var promiseComplete = function (error$$1, committed, snapshot) {\r\n            if (error$$1) {\r\n                deferred.reject(error$$1);\r\n            }\r\n            else {\r\n                deferred.resolve(new TransactionResult(committed, snapshot));\r\n            }\r\n            if (typeof onComplete === 'function') {\r\n                onComplete(error$$1, committed, snapshot);\r\n            }\r\n        };\r\n        this.repo.startTransaction(this.path, transactionUpdate, promiseComplete, applyLocally);\r\n        return deferred.promise;\r\n    };\r\n    /**\r\n     * @param {string|number|null} priority\r\n     * @param {function(?Error)=} onComplete\r\n     * @return {!Promise}\r\n     */\r\n    Reference.prototype.setPriority = function (priority, onComplete) {\r\n        util.validateArgCount('Reference.setPriority', 1, 2, arguments.length);\r\n        validateWritablePath('Reference.setPriority', this.path);\r\n        validatePriority('Reference.setPriority', 1, priority, false);\r\n        util.validateCallback('Reference.setPriority', 2, onComplete, true);\r\n        var deferred = new util.Deferred();\r\n        this.repo.setWithPriority(this.path.child('.priority'), priority, null, deferred.wrapCallback(onComplete));\r\n        return deferred.promise;\r\n    };\r\n    /**\r\n     * @param {*=} value\r\n     * @param {function(?Error)=} onComplete\r\n     * @return {!Reference}\r\n     */\r\n    Reference.prototype.push = function (value, onComplete) {\r\n        util.validateArgCount('Reference.push', 0, 2, arguments.length);\r\n        validateWritablePath('Reference.push', this.path);\r\n        validateFirebaseDataArg('Reference.push', 1, value, this.path, true);\r\n        util.validateCallback('Reference.push', 2, onComplete, true);\r\n        var now = this.repo.serverTime();\r\n        var name = nextPushId(now);\r\n        // push() returns a ThennableReference whose promise is fulfilled with a regular Reference.\r\n        // We use child() to create handles to two different references. The first is turned into a\r\n        // ThennableReference below by adding then() and catch() methods and is used as the\r\n        // return value of push(). The second remains a regular Reference and is used as the fulfilled\r\n        // value of the first ThennableReference.\r\n        var thennablePushRef = this.child(name);\r\n        var pushRef = this.child(name);\r\n        var promise;\r\n        if (value != null) {\r\n            promise = thennablePushRef.set(value, onComplete).then(function () { return pushRef; });\r\n        }\r\n        else {\r\n            promise = Promise.resolve(pushRef);\r\n        }\r\n        thennablePushRef.then = promise.then.bind(promise);\r\n        thennablePushRef.catch = promise.then.bind(promise, undefined);\r\n        if (typeof onComplete === 'function') {\r\n            promise.catch(function () { });\r\n        }\r\n        return thennablePushRef;\r\n    };\r\n    /**\r\n     * @return {!OnDisconnect}\r\n     */\r\n    Reference.prototype.onDisconnect = function () {\r\n        validateWritablePath('Reference.onDisconnect', this.path);\r\n        return new OnDisconnect(this.repo, this.path);\r\n    };\r\n    Object.defineProperty(Reference.prototype, \"database\", {\r\n        get: function () {\r\n            return this.databaseProp();\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Reference.prototype, \"key\", {\r\n        get: function () {\r\n            return this.getKey();\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Reference.prototype, \"parent\", {\r\n        get: function () {\r\n            return this.getParent();\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Reference.prototype, \"root\", {\r\n        get: function () {\r\n            return this.getRoot();\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return Reference;\r\n}(Query));\r\n/**\r\n * Define reference constructor in various modules\r\n *\r\n * We are doing this here to avoid several circular\r\n * dependency issues\r\n */\r\nQuery.__referenceConstructor = Reference;\r\nSyncPoint.__referenceConstructor = Reference;\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Node in a Tree.\r\n */\r\nvar TreeNode = /** @class */ (function () {\r\n    function TreeNode() {\r\n        // TODO: Consider making accessors that create children and value lazily or\r\n        // separate Internal / Leaf 'types'.\r\n        this.children = {};\r\n        this.childCount = 0;\r\n        this.value = null;\r\n    }\r\n    return TreeNode;\r\n}());\r\n/**\r\n * A light-weight tree, traversable by path.  Nodes can have both values and children.\r\n * Nodes are not enumerated (by forEachChild) unless they have a value or non-empty\r\n * children.\r\n */\r\nvar Tree = /** @class */ (function () {\r\n    /**\r\n     * @template T\r\n     * @param {string=} name_ Optional name of the node.\r\n     * @param {Tree=} parent_ Optional parent node.\r\n     * @param {TreeNode=} node_ Optional node to wrap.\r\n     */\r\n    function Tree(name_, parent_, node_) {\r\n        if (name_ === void 0) { name_ = ''; }\r\n        if (parent_ === void 0) { parent_ = null; }\r\n        if (node_ === void 0) { node_ = new TreeNode(); }\r\n        this.name_ = name_;\r\n        this.parent_ = parent_;\r\n        this.node_ = node_;\r\n    }\r\n    /**\r\n     * Returns a sub-Tree for the given path.\r\n     *\r\n     * @param {!(string|Path)} pathObj Path to look up.\r\n     * @return {!Tree.<T>} Tree for path.\r\n     */\r\n    Tree.prototype.subTree = function (pathObj) {\r\n        // TODO: Require pathObj to be Path?\r\n        var path = pathObj instanceof Path ? pathObj : new Path(pathObj);\r\n        var child = this, next;\r\n        while ((next = path.getFront()) !== null) {\r\n            var childNode = util.safeGet(child.node_.children, next) || new TreeNode();\r\n            child = new Tree(next, child, childNode);\r\n            path = path.popFront();\r\n        }\r\n        return child;\r\n    };\r\n    /**\r\n     * Returns the data associated with this tree node.\r\n     *\r\n     * @return {?T} The data or null if no data exists.\r\n     */\r\n    Tree.prototype.getValue = function () {\r\n        return this.node_.value;\r\n    };\r\n    /**\r\n     * Sets data to this tree node.\r\n     *\r\n     * @param {!T} value Value to set.\r\n     */\r\n    Tree.prototype.setValue = function (value) {\r\n        util.assert(typeof value !== 'undefined', 'Cannot set value to undefined');\r\n        this.node_.value = value;\r\n        this.updateParents_();\r\n    };\r\n    /**\r\n     * Clears the contents of the tree node (its value and all children).\r\n     */\r\n    Tree.prototype.clear = function () {\r\n        this.node_.value = null;\r\n        this.node_.children = {};\r\n        this.node_.childCount = 0;\r\n        this.updateParents_();\r\n    };\r\n    /**\r\n     * @return {boolean} Whether the tree has any children.\r\n     */\r\n    Tree.prototype.hasChildren = function () {\r\n        return this.node_.childCount > 0;\r\n    };\r\n    /**\r\n     * @return {boolean} Whether the tree is empty (no value or children).\r\n     */\r\n    Tree.prototype.isEmpty = function () {\r\n        return this.getValue() === null && !this.hasChildren();\r\n    };\r\n    /**\r\n     * Calls action for each child of this tree node.\r\n     *\r\n     * @param {function(!Tree.<T>)} action Action to be called for each child.\r\n     */\r\n    Tree.prototype.forEachChild = function (action) {\r\n        var _this = this;\r\n        util.forEach(this.node_.children, function (child, childTree) {\r\n            action(new Tree(child, _this, childTree));\r\n        });\r\n    };\r\n    /**\r\n     * Does a depth-first traversal of this node's descendants, calling action for each one.\r\n     *\r\n     * @param {function(!Tree.<T>)} action Action to be called for each child.\r\n     * @param {boolean=} includeSelf Whether to call action on this node as well. Defaults to\r\n     *   false.\r\n     * @param {boolean=} childrenFirst Whether to call action on children before calling it on\r\n     *   parent.\r\n     */\r\n    Tree.prototype.forEachDescendant = function (action, includeSelf, childrenFirst) {\r\n        if (includeSelf && !childrenFirst)\r\n            action(this);\r\n        this.forEachChild(function (child) {\r\n            child.forEachDescendant(action, /*includeSelf=*/ true, childrenFirst);\r\n        });\r\n        if (includeSelf && childrenFirst)\r\n            action(this);\r\n    };\r\n    /**\r\n     * Calls action on each ancestor node.\r\n     *\r\n     * @param {function(!Tree.<T>)} action Action to be called on each parent; return\r\n     *   true to abort.\r\n     * @param {boolean=} includeSelf Whether to call action on this node as well.\r\n     * @return {boolean} true if the action callback returned true.\r\n     */\r\n    Tree.prototype.forEachAncestor = function (action, includeSelf) {\r\n        var node = includeSelf ? this : this.parent();\r\n        while (node !== null) {\r\n            if (action(node)) {\r\n                return true;\r\n            }\r\n            node = node.parent();\r\n        }\r\n        return false;\r\n    };\r\n    /**\r\n     * Does a depth-first traversal of this node's descendants.  When a descendant with a value\r\n     * is found, action is called on it and traversal does not continue inside the node.\r\n     * Action is *not* called on this node.\r\n     *\r\n     * @param {function(!Tree.<T>)} action Action to be called for each child.\r\n     */\r\n    Tree.prototype.forEachImmediateDescendantWithValue = function (action) {\r\n        this.forEachChild(function (child) {\r\n            if (child.getValue() !== null)\r\n                action(child);\r\n            else\r\n                child.forEachImmediateDescendantWithValue(action);\r\n        });\r\n    };\r\n    /**\r\n     * @return {!Path} The path of this tree node, as a Path.\r\n     */\r\n    Tree.prototype.path = function () {\r\n        return new Path(this.parent_ === null\r\n            ? this.name_\r\n            : this.parent_.path() + '/' + this.name_);\r\n    };\r\n    /**\r\n     * @return {string} The name of the tree node.\r\n     */\r\n    Tree.prototype.name = function () {\r\n        return this.name_;\r\n    };\r\n    /**\r\n     * @return {?Tree} The parent tree node, or null if this is the root of the tree.\r\n     */\r\n    Tree.prototype.parent = function () {\r\n        return this.parent_;\r\n    };\r\n    /**\r\n     * Adds or removes this child from its parent based on whether it's empty or not.\r\n     *\r\n     * @private\r\n     */\r\n    Tree.prototype.updateParents_ = function () {\r\n        if (this.parent_ !== null)\r\n            this.parent_.updateChild_(this.name_, this);\r\n    };\r\n    /**\r\n     * Adds or removes the passed child to this tree node, depending on whether it's empty.\r\n     *\r\n     * @param {string} childName The name of the child to update.\r\n     * @param {!Tree.<T>} child The child to update.\r\n     * @private\r\n     */\r\n    Tree.prototype.updateChild_ = function (childName, child) {\r\n        var childEmpty = child.isEmpty();\r\n        var childExists = util.contains(this.node_.children, childName);\r\n        if (childEmpty && childExists) {\r\n            delete this.node_.children[childName];\r\n            this.node_.childCount--;\r\n            this.updateParents_();\r\n        }\r\n        else if (!childEmpty && !childExists) {\r\n            this.node_.children[childName] = child.node_;\r\n            this.node_.childCount++;\r\n            this.updateParents_();\r\n        }\r\n    };\r\n    return Tree;\r\n}());\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n// TODO: This is pretty messy.  Ideally, a lot of this would move into FirebaseData, or a transaction-specific\r\n// component used by FirebaseData, but it has ties to user callbacks (transaction update and onComplete) as well\r\n// as the realtime connection (to send transactions to the server).  So that all needs to be decoupled first.\r\n// For now it's part of Repo, but in its own file.\r\n/**\r\n * @enum {number}\r\n */\r\nvar TransactionStatus;\r\n(function (TransactionStatus) {\r\n    // We've run the transaction and updated transactionResultData_ with the result, but it isn't currently sent to the\r\n    // server. A transaction will go from RUN -> SENT -> RUN if it comes back from the server as rejected due to\r\n    // mismatched hash.\r\n    TransactionStatus[TransactionStatus[\"RUN\"] = 0] = \"RUN\";\r\n    // We've run the transaction and sent it to the server and it's currently outstanding (hasn't come back as accepted\r\n    // or rejected yet).\r\n    TransactionStatus[TransactionStatus[\"SENT\"] = 1] = \"SENT\";\r\n    // Temporary state used to mark completed transactions (whether successful or aborted).  The transaction will be\r\n    // removed when we get a chance to prune completed ones.\r\n    TransactionStatus[TransactionStatus[\"COMPLETED\"] = 2] = \"COMPLETED\";\r\n    // Used when an already-sent transaction needs to be aborted (e.g. due to a conflicting set() call that was made).\r\n    // If it comes back as unsuccessful, we'll abort it.\r\n    TransactionStatus[TransactionStatus[\"SENT_NEEDS_ABORT\"] = 3] = \"SENT_NEEDS_ABORT\";\r\n    // Temporary state used to mark transactions that need to be aborted.\r\n    TransactionStatus[TransactionStatus[\"NEEDS_ABORT\"] = 4] = \"NEEDS_ABORT\";\r\n})(TransactionStatus || (TransactionStatus = {}));\r\n/**\r\n * If a transaction does not succeed after 25 retries, we abort it.  Among other things this ensure that if there's\r\n * ever a bug causing a mismatch between client / server hashes for some data, we won't retry indefinitely.\r\n * @type {number}\r\n * @const\r\n * @private\r\n */\r\nRepo.MAX_TRANSACTION_RETRIES_ = 25;\r\n/**\r\n * Setup the transaction data structures\r\n * @private\r\n */\r\nRepo.prototype.transactions_init_ = function () {\r\n    /**\r\n     * Stores queues of outstanding transactions for Firebase locations.\r\n     *\r\n     * @type {!Tree.<Array.<!Transaction>>}\r\n     * @private\r\n     */\r\n    this.transactionQueueTree_ = new Tree();\r\n};\r\n/**\r\n * Creates a new transaction, adds it to the transactions we're tracking, and sends it to the server if possible.\r\n *\r\n * @param {!Path} path Path at which to do transaction.\r\n * @param {function(*):*} transactionUpdate Update callback.\r\n * @param {?function(?Error, boolean, ?DataSnapshot)} onComplete Completion callback.\r\n * @param {boolean} applyLocally Whether or not to make intermediate results visible\r\n */\r\nRepo.prototype.startTransaction = function (path, transactionUpdate, onComplete, applyLocally) {\r\n    this.log_('transaction on ' + path);\r\n    // Add a watch to make sure we get server updates.\r\n    var valueCallback = function () { };\r\n    var watchRef = new Reference(this, path);\r\n    watchRef.on('value', valueCallback);\r\n    var unwatcher = function () {\r\n        watchRef.off('value', valueCallback);\r\n    };\r\n    // Initialize transaction.\r\n    var transaction = {\r\n        path: path,\r\n        update: transactionUpdate,\r\n        onComplete: onComplete,\r\n        // One of TransactionStatus enums.\r\n        status: null,\r\n        // Used when combining transactions at different locations to figure out which one goes first.\r\n        order: LUIDGenerator(),\r\n        // Whether to raise local events for this transaction.\r\n        applyLocally: applyLocally,\r\n        // Count of how many times we've retried the transaction.\r\n        retryCount: 0,\r\n        // Function to call to clean up our .on() listener.\r\n        unwatcher: unwatcher,\r\n        // Stores why a transaction was aborted.\r\n        abortReason: null,\r\n        currentWriteId: null,\r\n        currentInputSnapshot: null,\r\n        currentOutputSnapshotRaw: null,\r\n        currentOutputSnapshotResolved: null\r\n    };\r\n    // Run transaction initially.\r\n    var currentState = this.getLatestState_(path);\r\n    transaction.currentInputSnapshot = currentState;\r\n    var newVal = transaction.update(currentState.val());\r\n    if (newVal === undefined) {\r\n        // Abort transaction.\r\n        transaction.unwatcher();\r\n        transaction.currentOutputSnapshotRaw = null;\r\n        transaction.currentOutputSnapshotResolved = null;\r\n        if (transaction.onComplete) {\r\n            // We just set the input snapshot, so this cast should be safe\r\n            var snapshot = new DataSnapshot(transaction.currentInputSnapshot, new Reference(this, transaction.path), PRIORITY_INDEX);\r\n            transaction.onComplete(null, false, snapshot);\r\n        }\r\n    }\r\n    else {\r\n        validateFirebaseData('transaction failed: Data returned ', newVal, transaction.path);\r\n        // Mark as run and add to our queue.\r\n        transaction.status = TransactionStatus.RUN;\r\n        var queueNode = this.transactionQueueTree_.subTree(path);\r\n        var nodeQueue = queueNode.getValue() || [];\r\n        nodeQueue.push(transaction);\r\n        queueNode.setValue(nodeQueue);\r\n        // Update visibleData and raise events\r\n        // Note: We intentionally raise events after updating all of our transaction state, since the user could\r\n        // start new transactions from the event callbacks.\r\n        var priorityForNode = void 0;\r\n        if (typeof newVal === 'object' &&\r\n            newVal !== null &&\r\n            util.contains(newVal, '.priority')) {\r\n            priorityForNode = util.safeGet(newVal, '.priority');\r\n            util.assert(isValidPriority(priorityForNode), 'Invalid priority returned by transaction. ' +\r\n                'Priority must be a valid string, finite number, server value, or null.');\r\n        }\r\n        else {\r\n            var currentNode = this.serverSyncTree_.calcCompleteEventCache(path) ||\r\n                ChildrenNode.EMPTY_NODE;\r\n            priorityForNode = currentNode.getPriority().val();\r\n        }\r\n        priorityForNode /** @type {null|number|string} */ = priorityForNode;\r\n        var serverValues = this.generateServerValues();\r\n        var newNodeUnresolved = nodeFromJSON$1(newVal, priorityForNode);\r\n        var newNode = resolveDeferredValueSnapshot(newNodeUnresolved, serverValues);\r\n        transaction.currentOutputSnapshotRaw = newNodeUnresolved;\r\n        transaction.currentOutputSnapshotResolved = newNode;\r\n        transaction.currentWriteId = this.getNextWriteId_();\r\n        var events = this.serverSyncTree_.applyUserOverwrite(path, newNode, transaction.currentWriteId, transaction.applyLocally);\r\n        this.eventQueue_.raiseEventsForChangedPath(path, events);\r\n        this.sendReadyTransactions_();\r\n    }\r\n};\r\n/**\r\n * @param {!Path} path\r\n * @param {Array.<number>=} excludeSets A specific set to exclude\r\n * @return {Node}\r\n * @private\r\n */\r\nRepo.prototype.getLatestState_ = function (path, excludeSets) {\r\n    return (this.serverSyncTree_.calcCompleteEventCache(path, excludeSets) ||\r\n        ChildrenNode.EMPTY_NODE);\r\n};\r\n/**\r\n * Sends any already-run transactions that aren't waiting for outstanding transactions to\r\n * complete.\r\n *\r\n * Externally it's called with no arguments, but it calls itself recursively with a particular\r\n * transactionQueueTree node to recurse through the tree.\r\n *\r\n * @param {Tree.<Array.<Transaction>>=} node  transactionQueueTree node to start at.\r\n * @private\r\n */\r\nRepo.prototype.sendReadyTransactions_ = function (node) {\r\n    var _this = this;\r\n    if (node === void 0) { node = this.transactionQueueTree_; }\r\n    // Before recursing, make sure any completed transactions are removed.\r\n    if (!node) {\r\n        this.pruneCompletedTransactionsBelowNode_(node);\r\n    }\r\n    if (node.getValue() !== null) {\r\n        var queue = this.buildTransactionQueue_(node);\r\n        util.assert(queue.length > 0, 'Sending zero length transaction queue');\r\n        var allRun = queue.every(function (transaction) { return transaction.status === TransactionStatus.RUN; });\r\n        // If they're all run (and not sent), we can send them.  Else, we must wait.\r\n        if (allRun) {\r\n            this.sendTransactionQueue_(node.path(), queue);\r\n        }\r\n    }\r\n    else if (node.hasChildren()) {\r\n        node.forEachChild(function (childNode) {\r\n            _this.sendReadyTransactions_(childNode);\r\n        });\r\n    }\r\n};\r\n/**\r\n * Given a list of run transactions, send them to the server and then handle the result (success or failure).\r\n *\r\n * @param {!Path} path The location of the queue.\r\n * @param {!Array.<Transaction>} queue Queue of transactions under the specified location.\r\n * @private\r\n */\r\nRepo.prototype.sendTransactionQueue_ = function (path, queue) {\r\n    var _this = this;\r\n    // Mark transactions as sent and increment retry count!\r\n    var setsToIgnore = queue.map(function (txn) {\r\n        return txn.currentWriteId;\r\n    });\r\n    var latestState = this.getLatestState_(path, setsToIgnore);\r\n    var snapToSend = latestState;\r\n    var latestHash = latestState.hash();\r\n    for (var i = 0; i < queue.length; i++) {\r\n        var txn = queue[i];\r\n        util.assert(txn.status === TransactionStatus.RUN, 'tryToSendTransactionQueue_: items in queue should all be run.');\r\n        txn.status = TransactionStatus.SENT;\r\n        txn.retryCount++;\r\n        var relativePath = Path.relativePath(path, txn.path);\r\n        // If we've gotten to this point, the output snapshot must be defined.\r\n        snapToSend = snapToSend.updateChild(relativePath /**@type {!Node} */, txn.currentOutputSnapshotRaw);\r\n    }\r\n    var dataToSend = snapToSend.val(true);\r\n    var pathToSend = path;\r\n    // Send the put.\r\n    this.server_.put(pathToSend.toString(), dataToSend, function (status) {\r\n        _this.log_('transaction put response', {\r\n            path: pathToSend.toString(),\r\n            status: status\r\n        });\r\n        var events = [];\r\n        if (status === 'ok') {\r\n            // Queue up the callbacks and fire them after cleaning up all of our transaction state, since\r\n            // the callback could trigger more transactions or sets.\r\n            var callbacks = [];\r\n            for (var i = 0; i < queue.length; i++) {\r\n                queue[i].status = TransactionStatus.COMPLETED;\r\n                events = events.concat(_this.serverSyncTree_.ackUserWrite(queue[i].currentWriteId));\r\n                if (queue[i].onComplete) {\r\n                    // We never unset the output snapshot, and given that this transaction is complete, it should be set\r\n                    var node = queue[i].currentOutputSnapshotResolved;\r\n                    var ref = new Reference(_this, queue[i].path);\r\n                    var snapshot = new DataSnapshot(node, ref, PRIORITY_INDEX);\r\n                    callbacks.push(queue[i].onComplete.bind(null, null, true, snapshot));\r\n                }\r\n                queue[i].unwatcher();\r\n            }\r\n            // Now remove the completed transactions.\r\n            _this.pruneCompletedTransactionsBelowNode_(_this.transactionQueueTree_.subTree(path));\r\n            // There may be pending transactions that we can now send.\r\n            _this.sendReadyTransactions_();\r\n            _this.eventQueue_.raiseEventsForChangedPath(path, events);\r\n            // Finally, trigger onComplete callbacks.\r\n            for (var i = 0; i < callbacks.length; i++) {\r\n                exceptionGuard(callbacks[i]);\r\n            }\r\n        }\r\n        else {\r\n            // transactions are no longer sent.  Update their status appropriately.\r\n            if (status === 'datastale') {\r\n                for (var i = 0; i < queue.length; i++) {\r\n                    if (queue[i].status === TransactionStatus.SENT_NEEDS_ABORT)\r\n                        queue[i].status = TransactionStatus.NEEDS_ABORT;\r\n                    else\r\n                        queue[i].status = TransactionStatus.RUN;\r\n                }\r\n            }\r\n            else {\r\n                warn('transaction at ' + pathToSend.toString() + ' failed: ' + status);\r\n                for (var i = 0; i < queue.length; i++) {\r\n                    queue[i].status = TransactionStatus.NEEDS_ABORT;\r\n                    queue[i].abortReason = status;\r\n                }\r\n            }\r\n            _this.rerunTransactions_(path);\r\n        }\r\n    }, latestHash);\r\n};\r\n/**\r\n * Finds all transactions dependent on the data at changedPath and reruns them.\r\n *\r\n * Should be called any time cached data changes.\r\n *\r\n * Return the highest path that was affected by rerunning transactions.  This is the path at which events need to\r\n * be raised for.\r\n *\r\n * @param {!Path} changedPath The path in mergedData that changed.\r\n * @return {!Path} The rootmost path that was affected by rerunning transactions.\r\n * @private\r\n */\r\nRepo.prototype.rerunTransactions_ = function (changedPath) {\r\n    var rootMostTransactionNode = this.getAncestorTransactionNode_(changedPath);\r\n    var path = rootMostTransactionNode.path();\r\n    var queue = this.buildTransactionQueue_(rootMostTransactionNode);\r\n    this.rerunTransactionQueue_(queue, path);\r\n    return path;\r\n};\r\n/**\r\n * Does all the work of rerunning transactions (as well as cleans up aborted transactions and whatnot).\r\n *\r\n * @param {Array.<Transaction>} queue The queue of transactions to run.\r\n * @param {!Path} path The path the queue is for.\r\n * @private\r\n */\r\nRepo.prototype.rerunTransactionQueue_ = function (queue, path) {\r\n    if (queue.length === 0) {\r\n        return; // Nothing to do!\r\n    }\r\n    // Queue up the callbacks and fire them after cleaning up all of our transaction state, since\r\n    // the callback could trigger more transactions or sets.\r\n    var callbacks = [];\r\n    var events = [];\r\n    // Ignore all of the sets we're going to re-run.\r\n    var txnsToRerun = queue.filter(function (q) {\r\n        return q.status === TransactionStatus.RUN;\r\n    });\r\n    var setsToIgnore = txnsToRerun.map(function (q) {\r\n        return q.currentWriteId;\r\n    });\r\n    for (var i = 0; i < queue.length; i++) {\r\n        var transaction = queue[i];\r\n        var relativePath = Path.relativePath(path, transaction.path);\r\n        var abortTransaction = false, abortReason = void 0;\r\n        util.assert(relativePath !== null, 'rerunTransactionsUnderNode_: relativePath should not be null.');\r\n        if (transaction.status === TransactionStatus.NEEDS_ABORT) {\r\n            abortTransaction = true;\r\n            abortReason = transaction.abortReason;\r\n            events = events.concat(this.serverSyncTree_.ackUserWrite(transaction.currentWriteId, true));\r\n        }\r\n        else if (transaction.status === TransactionStatus.RUN) {\r\n            if (transaction.retryCount >= Repo.MAX_TRANSACTION_RETRIES_) {\r\n                abortTransaction = true;\r\n                abortReason = 'maxretry';\r\n                events = events.concat(this.serverSyncTree_.ackUserWrite(transaction.currentWriteId, true));\r\n            }\r\n            else {\r\n                // This code reruns a transaction\r\n                var currentNode = this.getLatestState_(transaction.path, setsToIgnore);\r\n                transaction.currentInputSnapshot = currentNode;\r\n                var newData = queue[i].update(currentNode.val());\r\n                if (newData !== undefined) {\r\n                    validateFirebaseData('transaction failed: Data returned ', newData, transaction.path);\r\n                    var newDataNode = nodeFromJSON$1(newData);\r\n                    var hasExplicitPriority = typeof newData === 'object' &&\r\n                        newData != null &&\r\n                        util.contains(newData, '.priority');\r\n                    if (!hasExplicitPriority) {\r\n                        // Keep the old priority if there wasn't a priority explicitly specified.\r\n                        newDataNode = newDataNode.updatePriority(currentNode.getPriority());\r\n                    }\r\n                    var oldWriteId = transaction.currentWriteId;\r\n                    var serverValues = this.generateServerValues();\r\n                    var newNodeResolved = resolveDeferredValueSnapshot(newDataNode, serverValues);\r\n                    transaction.currentOutputSnapshotRaw = newDataNode;\r\n                    transaction.currentOutputSnapshotResolved = newNodeResolved;\r\n                    transaction.currentWriteId = this.getNextWriteId_();\r\n                    // Mutates setsToIgnore in place\r\n                    setsToIgnore.splice(setsToIgnore.indexOf(oldWriteId), 1);\r\n                    events = events.concat(this.serverSyncTree_.applyUserOverwrite(transaction.path, newNodeResolved, transaction.currentWriteId, transaction.applyLocally));\r\n                    events = events.concat(this.serverSyncTree_.ackUserWrite(oldWriteId, true));\r\n                }\r\n                else {\r\n                    abortTransaction = true;\r\n                    abortReason = 'nodata';\r\n                    events = events.concat(this.serverSyncTree_.ackUserWrite(transaction.currentWriteId, true));\r\n                }\r\n            }\r\n        }\r\n        this.eventQueue_.raiseEventsForChangedPath(path, events);\r\n        events = [];\r\n        if (abortTransaction) {\r\n            // Abort.\r\n            queue[i].status = TransactionStatus.COMPLETED;\r\n            // Removing a listener can trigger pruning which can muck with mergedData/visibleData (as it prunes data).\r\n            // So defer the unwatcher until we're done.\r\n            (function (unwatcher) {\r\n                setTimeout(unwatcher, Math.floor(0));\r\n            })(queue[i].unwatcher);\r\n            if (queue[i].onComplete) {\r\n                if (abortReason === 'nodata') {\r\n                    var ref = new Reference(this, queue[i].path);\r\n                    // We set this field immediately, so it's safe to cast to an actual snapshot\r\n                    var lastInput /** @type {!Node} */ = queue[i].currentInputSnapshot;\r\n                    var snapshot = new DataSnapshot(lastInput, ref, PRIORITY_INDEX);\r\n                    callbacks.push(queue[i].onComplete.bind(null, null, false, snapshot));\r\n                }\r\n                else {\r\n                    callbacks.push(queue[i].onComplete.bind(null, new Error(abortReason), false, null));\r\n                }\r\n            }\r\n        }\r\n    }\r\n    // Clean up completed transactions.\r\n    this.pruneCompletedTransactionsBelowNode_(this.transactionQueueTree_);\r\n    // Now fire callbacks, now that we're in a good, known state.\r\n    for (var i = 0; i < callbacks.length; i++) {\r\n        exceptionGuard(callbacks[i]);\r\n    }\r\n    // Try to send the transaction result to the server.\r\n    this.sendReadyTransactions_();\r\n};\r\n/**\r\n * Returns the rootmost ancestor node of the specified path that has a pending transaction on it, or just returns\r\n * the node for the given path if there are no pending transactions on any ancestor.\r\n *\r\n * @param {!Path} path The location to start at.\r\n * @return {!Tree.<Array.<!Transaction>>} The rootmost node with a transaction.\r\n * @private\r\n */\r\nRepo.prototype.getAncestorTransactionNode_ = function (path) {\r\n    var front;\r\n    // Start at the root and walk deeper into the tree towards path until we find a node with pending transactions.\r\n    var transactionNode = this.transactionQueueTree_;\r\n    while ((front = path.getFront()) !== null &&\r\n        transactionNode.getValue() === null) {\r\n        transactionNode = transactionNode.subTree(front);\r\n        path = path.popFront();\r\n    }\r\n    return transactionNode;\r\n};\r\n/**\r\n * Builds the queue of all transactions at or below the specified transactionNode.\r\n *\r\n * @param {!Tree.<Array.<Transaction>>} transactionNode\r\n * @return {Array.<Transaction>} The generated queue.\r\n * @private\r\n */\r\nRepo.prototype.buildTransactionQueue_ = function (transactionNode) {\r\n    // Walk any child transaction queues and aggregate them into a single queue.\r\n    var transactionQueue = [];\r\n    this.aggregateTransactionQueuesForNode_(transactionNode, transactionQueue);\r\n    // Sort them by the order the transactions were created.\r\n    transactionQueue.sort(function (a, b) {\r\n        return a.order - b.order;\r\n    });\r\n    return transactionQueue;\r\n};\r\n/**\r\n * @param {!Tree.<Array.<Transaction>>} node\r\n * @param {Array.<Transaction>} queue\r\n * @private\r\n */\r\nRepo.prototype.aggregateTransactionQueuesForNode_ = function (node, queue) {\r\n    var _this = this;\r\n    var nodeQueue = node.getValue();\r\n    if (nodeQueue !== null) {\r\n        for (var i = 0; i < nodeQueue.length; i++) {\r\n            queue.push(nodeQueue[i]);\r\n        }\r\n    }\r\n    node.forEachChild(function (child) {\r\n        _this.aggregateTransactionQueuesForNode_(child, queue);\r\n    });\r\n};\r\n/**\r\n * Remove COMPLETED transactions at or below this node in the transactionQueueTree_.\r\n *\r\n * @param {!Tree.<Array.<!Transaction>>} node\r\n * @private\r\n */\r\nRepo.prototype.pruneCompletedTransactionsBelowNode_ = function (node) {\r\n    var _this = this;\r\n    var queue = node.getValue();\r\n    if (queue) {\r\n        var to = 0;\r\n        for (var from = 0; from < queue.length; from++) {\r\n            if (queue[from].status !== TransactionStatus.COMPLETED) {\r\n                queue[to] = queue[from];\r\n                to++;\r\n            }\r\n        }\r\n        queue.length = to;\r\n        node.setValue(queue.length > 0 ? queue : null);\r\n    }\r\n    node.forEachChild(function (childNode) {\r\n        _this.pruneCompletedTransactionsBelowNode_(childNode);\r\n    });\r\n};\r\n/**\r\n * Aborts all transactions on ancestors or descendants of the specified path.  Called when doing a set() or update()\r\n * since we consider them incompatible with transactions.\r\n *\r\n * @param {!Path} path Path for which we want to abort related transactions.\r\n * @return {!Path}\r\n * @private\r\n */\r\nRepo.prototype.abortTransactions_ = function (path) {\r\n    var _this = this;\r\n    var affectedPath = this.getAncestorTransactionNode_(path).path();\r\n    var transactionNode = this.transactionQueueTree_.subTree(path);\r\n    transactionNode.forEachAncestor(function (node) {\r\n        _this.abortTransactionsOnNode_(node);\r\n    });\r\n    this.abortTransactionsOnNode_(transactionNode);\r\n    transactionNode.forEachDescendant(function (node) {\r\n        _this.abortTransactionsOnNode_(node);\r\n    });\r\n    return affectedPath;\r\n};\r\n/**\r\n * Abort transactions stored in this transaction queue node.\r\n *\r\n * @param {!Tree.<Array.<Transaction>>} node Node to abort transactions for.\r\n * @private\r\n */\r\nRepo.prototype.abortTransactionsOnNode_ = function (node) {\r\n    var queue = node.getValue();\r\n    if (queue !== null) {\r\n        // Queue up the callbacks and fire them after cleaning up all of our transaction state, since\r\n        // the callback could trigger more transactions or sets.\r\n        var callbacks = [];\r\n        // Go through queue.  Any already-sent transactions must be marked for abort, while the unsent ones\r\n        // can be immediately aborted and removed.\r\n        var events = [];\r\n        var lastSent = -1;\r\n        for (var i = 0; i < queue.length; i++) {\r\n            if (queue[i].status === TransactionStatus.SENT_NEEDS_ABORT) {\r\n                // Already marked.  No action needed.\r\n            }\r\n            else if (queue[i].status === TransactionStatus.SENT) {\r\n                util.assert(lastSent === i - 1, 'All SENT items should be at beginning of queue.');\r\n                lastSent = i;\r\n                // Mark transaction for abort when it comes back.\r\n                queue[i].status = TransactionStatus.SENT_NEEDS_ABORT;\r\n                queue[i].abortReason = 'set';\r\n            }\r\n            else {\r\n                util.assert(queue[i].status === TransactionStatus.RUN, 'Unexpected transaction status in abort');\r\n                // We can abort it immediately.\r\n                queue[i].unwatcher();\r\n                events = events.concat(this.serverSyncTree_.ackUserWrite(queue[i].currentWriteId, true));\r\n                if (queue[i].onComplete) {\r\n                    var snapshot = null;\r\n                    callbacks.push(queue[i].onComplete.bind(null, new Error('set'), false, snapshot));\r\n                }\r\n            }\r\n        }\r\n        if (lastSent === -1) {\r\n            // We're not waiting for any sent transactions.  We can clear the queue.\r\n            node.setValue(null);\r\n        }\r\n        else {\r\n            // Remove the transactions we aborted.\r\n            queue.length = lastSent + 1;\r\n        }\r\n        // Now fire the callbacks.\r\n        this.eventQueue_.raiseEventsForChangedPath(node.path(), events);\r\n        for (var i = 0; i < callbacks.length; i++) {\r\n            exceptionGuard(callbacks[i]);\r\n        }\r\n    }\r\n};\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/** @const {string} */\r\nvar DATABASE_URL_OPTION = 'databaseURL';\r\nvar _staticInstance;\r\n/**\r\n * Creates and caches Repo instances.\r\n */\r\nvar RepoManager = /** @class */ (function () {\r\n    function RepoManager() {\r\n        /**\r\n         * @private {!Object.<string, Object<string, !fb.core.Repo>>}\r\n         */\r\n        this.repos_ = {};\r\n        /**\r\n         * If true, new Repos will be created to use ReadonlyRestClient (for testing purposes).\r\n         * @private {boolean}\r\n         */\r\n        this.useRestClient_ = false;\r\n    }\r\n    RepoManager.getInstance = function () {\r\n        if (!_staticInstance) {\r\n            _staticInstance = new RepoManager();\r\n        }\r\n        return _staticInstance;\r\n    };\r\n    // TODO(koss): Remove these functions unless used in tests?\r\n    RepoManager.prototype.interrupt = function () {\r\n        for (var appName in this.repos_) {\r\n            for (var dbUrl in this.repos_[appName]) {\r\n                this.repos_[appName][dbUrl].interrupt();\r\n            }\r\n        }\r\n    };\r\n    RepoManager.prototype.resume = function () {\r\n        for (var appName in this.repos_) {\r\n            for (var dbUrl in this.repos_[appName]) {\r\n                this.repos_[appName][dbUrl].resume();\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * This function should only ever be called to CREATE a new database instance.\r\n     *\r\n     * @param {!FirebaseApp} app\r\n     * @return {!Database}\r\n     */\r\n    RepoManager.prototype.databaseFromApp = function (app, url) {\r\n        var dbUrl = url || app.options[DATABASE_URL_OPTION];\r\n        if (dbUrl === undefined) {\r\n            fatal(\"Can't determine Firebase Database URL.  Be sure to include \" +\r\n                DATABASE_URL_OPTION +\r\n                ' option when calling firebase.initializeApp().');\r\n        }\r\n        var parsedUrl = parseRepoInfo(dbUrl);\r\n        var repoInfo = parsedUrl.repoInfo;\r\n        validateUrl('Invalid Firebase Database URL', 1, parsedUrl);\r\n        if (!parsedUrl.path.isEmpty()) {\r\n            fatal('Database URL must point to the root of a Firebase Database ' +\r\n                '(not including a child path).');\r\n        }\r\n        var repo = this.createRepo(repoInfo, app);\r\n        return repo.database;\r\n    };\r\n    /**\r\n     * Remove the repo and make sure it is disconnected.\r\n     *\r\n     * @param {!Repo} repo\r\n     */\r\n    RepoManager.prototype.deleteRepo = function (repo) {\r\n        var appRepos = util.safeGet(this.repos_, repo.app.name);\r\n        // This should never happen...\r\n        if (!appRepos || util.safeGet(appRepos, repo.repoInfo_.toURLString()) !== repo) {\r\n            fatal(\"Database \" + repo.app.name + \"(\" + repo.repoInfo_ + \") has already been deleted.\");\r\n        }\r\n        repo.interrupt();\r\n        delete appRepos[repo.repoInfo_.toURLString()];\r\n    };\r\n    /**\r\n     * Ensures a repo doesn't already exist and then creates one using the\r\n     * provided app.\r\n     *\r\n     * @param {!RepoInfo} repoInfo The metadata about the Repo\r\n     * @param {!FirebaseApp} app\r\n     * @return {!Repo} The Repo object for the specified server / repoName.\r\n     */\r\n    RepoManager.prototype.createRepo = function (repoInfo, app) {\r\n        var appRepos = util.safeGet(this.repos_, app.name);\r\n        if (!appRepos) {\r\n            appRepos = {};\r\n            this.repos_[app.name] = appRepos;\r\n        }\r\n        var repo = util.safeGet(appRepos, repoInfo.toURLString());\r\n        if (repo) {\r\n            fatal('Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.');\r\n        }\r\n        repo = new Repo(repoInfo, this.useRestClient_, app);\r\n        appRepos[repoInfo.toURLString()] = repo;\r\n        return repo;\r\n    };\r\n    /**\r\n     * Forces us to use ReadonlyRestClient instead of PersistentConnection for new Repos.\r\n     * @param {boolean} forceRestClient\r\n     */\r\n    RepoManager.prototype.forceRestClient = function (forceRestClient) {\r\n        this.useRestClient_ = forceRestClient;\r\n    };\r\n    return RepoManager;\r\n}());\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Class representing a firebase database.\r\n * @implements {FirebaseService}\r\n */\r\nvar Database = /** @class */ (function () {\r\n    /**\r\n     * The constructor should not be called by users of our public API.\r\n     * @param {!Repo} repo_\r\n     */\r\n    function Database(repo_) {\r\n        this.repo_ = repo_;\r\n        if (!(repo_ instanceof Repo)) {\r\n            fatal(\"Don't call new Database() directly - please use firebase.database().\");\r\n        }\r\n        /** @type {Reference} */\r\n        this.root_ = new Reference(repo_, Path.Empty);\r\n        this.INTERNAL = new DatabaseInternals(this);\r\n    }\r\n    Object.defineProperty(Database.prototype, \"app\", {\r\n        get: function () {\r\n            return this.repo_.app;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Database.prototype.ref = function (path) {\r\n        this.checkDeleted_('ref');\r\n        util.validateArgCount('database.ref', 0, 1, arguments.length);\r\n        if (path instanceof Reference) {\r\n            return this.refFromURL(path.toString());\r\n        }\r\n        return path !== undefined ? this.root_.child(path) : this.root_;\r\n    };\r\n    /**\r\n     * Returns a reference to the root or the path specified in url.\r\n     * We throw a exception if the url is not in the same domain as the\r\n     * current repo.\r\n     * @param {string} url\r\n     * @return {!Reference} Firebase reference.\r\n     */\r\n    Database.prototype.refFromURL = function (url) {\r\n        /** @const {string} */\r\n        var apiName = 'database.refFromURL';\r\n        this.checkDeleted_(apiName);\r\n        util.validateArgCount(apiName, 1, 1, arguments.length);\r\n        var parsedURL = parseRepoInfo(url);\r\n        validateUrl(apiName, 1, parsedURL);\r\n        var repoInfo = parsedURL.repoInfo;\r\n        if (repoInfo.host !== this.repo_.repoInfo_.host) {\r\n            fatal(apiName +\r\n                ': Host name does not match the current database: ' +\r\n                '(found ' +\r\n                repoInfo.host +\r\n                ' but expected ' +\r\n                this.repo_.repoInfo_.host +\r\n                ')');\r\n        }\r\n        return this.ref(parsedURL.path.toString());\r\n    };\r\n    /**\r\n     * @param {string} apiName\r\n     */\r\n    Database.prototype.checkDeleted_ = function (apiName) {\r\n        if (this.repo_ === null) {\r\n            fatal('Cannot call ' + apiName + ' on a deleted database.');\r\n        }\r\n    };\r\n    // Make individual repo go offline.\r\n    Database.prototype.goOffline = function () {\r\n        util.validateArgCount('database.goOffline', 0, 0, arguments.length);\r\n        this.checkDeleted_('goOffline');\r\n        this.repo_.interrupt();\r\n    };\r\n    Database.prototype.goOnline = function () {\r\n        util.validateArgCount('database.goOnline', 0, 0, arguments.length);\r\n        this.checkDeleted_('goOnline');\r\n        this.repo_.resume();\r\n    };\r\n    Database.ServerValue = {\r\n        TIMESTAMP: {\r\n            '.sv': 'timestamp'\r\n        }\r\n    };\r\n    return Database;\r\n}());\r\nvar DatabaseInternals = /** @class */ (function () {\r\n    /** @param {!Database} database */\r\n    function DatabaseInternals(database) {\r\n        this.database = database;\r\n    }\r\n    /** @return {Promise<void>} */\r\n    DatabaseInternals.prototype.delete = function () {\r\n        return tslib_1.__awaiter(this, void 0, void 0, function () {\r\n            return tslib_1.__generator(this, function (_a) {\r\n                this.database.checkDeleted_('delete');\r\n                RepoManager.getInstance().deleteRepo(this.database.repo_);\r\n                this.database.repo_ = null;\r\n                this.database.root_ = null;\r\n                this.database.INTERNAL = null;\r\n                this.database = null;\r\n                return [2 /*return*/];\r\n            });\r\n        });\r\n    };\r\n    return DatabaseInternals;\r\n}());\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * INTERNAL methods for internal-use only (tests, etc.).\r\n *\r\n * Customers shouldn't use these or else should be aware that they could break at any time.\r\n *\r\n * @const\r\n */\r\nvar forceLongPolling = function () {\r\n    WebSocketConnection.forceDisallow();\r\n    BrowserPollConnection.forceAllow();\r\n};\r\nvar forceWebSockets = function () {\r\n    BrowserPollConnection.forceDisallow();\r\n};\r\n/* Used by App Manager */\r\nvar isWebSocketsAvailable = function () {\r\n    return WebSocketConnection['isAvailable']();\r\n};\r\nvar setSecurityDebugCallback = function (ref, callback) {\r\n    ref.repo.persistentConnection_.securityDebugCallback_ = callback;\r\n};\r\nvar stats = function (ref, showDelta) {\r\n    ref.repo.stats(showDelta);\r\n};\r\nvar statsIncrementCounter = function (ref, metric) {\r\n    ref.repo.statsIncrementCounter(metric);\r\n};\r\nvar dataUpdateCount = function (ref) {\r\n    return ref.repo.dataUpdateCount;\r\n};\r\nvar interceptServerData = function (ref, callback) {\r\n    return ref.repo.interceptServerData_(callback);\r\n};\n\nvar INTERNAL = /*#__PURE__*/Object.freeze({\n  forceLongPolling: forceLongPolling,\n  forceWebSockets: forceWebSockets,\n  isWebSocketsAvailable: isWebSocketsAvailable,\n  setSecurityDebugCallback: setSecurityDebugCallback,\n  stats: stats,\n  statsIncrementCounter: statsIncrementCounter,\n  dataUpdateCount: dataUpdateCount,\n  interceptServerData: interceptServerData\n});\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nvar DataConnection = PersistentConnection;\r\n/**\r\n * @param {!string} pathString\r\n * @param {function(*)} onComplete\r\n */\r\nPersistentConnection.prototype.simpleListen = function (pathString, onComplete) {\r\n    this.sendRequest('q', { p: pathString }, onComplete);\r\n};\r\n/**\r\n * @param {*} data\r\n * @param {function(*)} onEcho\r\n */\r\nPersistentConnection.prototype.echo = function (data, onEcho) {\r\n    this.sendRequest('echo', { d: data }, onEcho);\r\n};\r\n// RealTimeConnection properties that we use in tests.\r\nvar RealTimeConnection = Connection;\r\n/**\r\n * @param {function(): string} newHash\r\n * @return {function()}\r\n */\r\nvar hijackHash = function (newHash) {\r\n    var oldPut = PersistentConnection.prototype.put;\r\n    PersistentConnection.prototype.put = function (pathString, data, opt_onComplete, opt_hash) {\r\n        if (opt_hash !== undefined) {\r\n            opt_hash = newHash();\r\n        }\r\n        oldPut.call(this, pathString, data, opt_onComplete, opt_hash);\r\n    };\r\n    return function () {\r\n        PersistentConnection.prototype.put = oldPut;\r\n    };\r\n};\r\n/**\r\n * @type {function(new:RepoInfo, !string, boolean, !string, boolean): undefined}\r\n */\r\nvar ConnectionTarget = RepoInfo;\r\n/**\r\n * @param {!Query} query\r\n * @return {!string}\r\n */\r\nvar queryIdentifier = function (query) {\r\n    return query.queryIdentifier();\r\n};\r\n/**\r\n * @param {!Query} firebaseRef\r\n * @return {!Object}\r\n */\r\nvar listens = function (firebaseRef) {\r\n    return firebaseRef.repo.persistentConnection_.listens_;\r\n};\r\n/**\r\n * Forces the RepoManager to create Repos that use ReadonlyRestClient instead of PersistentConnection.\r\n *\r\n * @param {boolean} forceRestClient\r\n */\r\nvar forceRestClient = function (forceRestClient) {\r\n    RepoManager.getInstance().forceRestClient(forceRestClient);\r\n};\n\nvar TEST_ACCESS = /*#__PURE__*/Object.freeze({\n  DataConnection: DataConnection,\n  RealTimeConnection: RealTimeConnection,\n  hijackHash: hijackHash,\n  ConnectionTarget: ConnectionTarget,\n  queryIdentifier: queryIdentifier,\n  listens: listens,\n  forceRestClient: forceRestClient\n});\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nvar ServerValue = Database.ServerValue;\r\nfunction registerDatabase(instance) {\r\n    // Register the Database Service with the 'firebase' namespace.\r\n    var namespace = instance.INTERNAL.registerService('database', function (app, unused, url) { return RepoManager.getInstance().databaseFromApp(app, url); }, \r\n    // firebase.database namespace properties\r\n    {\r\n        Reference: Reference,\r\n        Query: Query,\r\n        Database: Database,\r\n        enableLogging: enableLogging,\r\n        INTERNAL: INTERNAL,\r\n        ServerValue: ServerValue,\r\n        TEST_ACCESS: TEST_ACCESS\r\n    }, null, true);\r\n    if (util.isNodeSdk()) {\r\n        module.exports = namespace;\r\n    }\r\n}\r\nregisterDatabase(firebase);\n\nexports.registerDatabase = registerDatabase;\nexports.Database = Database;\nexports.Query = Query;\nexports.Reference = Reference;\nexports.enableLogging = enableLogging;\nexports.ServerValue = ServerValue;\nexports.DataSnapshot = DataSnapshot;\nexports.OnDisconnect = OnDisconnect;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/@firebase/database/dist/index.cjs.js\n// module id = 46\n// module chunks = 0","/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * A container for all of the Logger instances\r\n */\r\nvar instances = [];\r\n/**\r\n * The JS SDK supports 5 log levels and also allows a user the ability to\r\n * silence the logs altogether.\r\n *\r\n * The order is a follows:\r\n * DEBUG < VERBOSE < INFO < WARN < ERROR\r\n *\r\n * All of the log types above the current log level will be captured (i.e. if\r\n * you set the log level to `INFO`, errors will still be logged, but `DEBUG` and\r\n * `VERBOSE` logs will not)\r\n */\r\nvar LogLevel;\r\n(function (LogLevel) {\r\n    LogLevel[LogLevel[\"DEBUG\"] = 0] = \"DEBUG\";\r\n    LogLevel[LogLevel[\"VERBOSE\"] = 1] = \"VERBOSE\";\r\n    LogLevel[LogLevel[\"INFO\"] = 2] = \"INFO\";\r\n    LogLevel[LogLevel[\"WARN\"] = 3] = \"WARN\";\r\n    LogLevel[LogLevel[\"ERROR\"] = 4] = \"ERROR\";\r\n    LogLevel[LogLevel[\"SILENT\"] = 5] = \"SILENT\";\r\n})(LogLevel || (LogLevel = {}));\r\n/**\r\n * The default log level\r\n */\r\nvar defaultLogLevel = LogLevel.INFO;\r\n/**\r\n * The default log handler will forward DEBUG, VERBOSE, INFO, WARN, and ERROR\r\n * messages on to their corresponding console counterparts (if the log method\r\n * is supported by the current log level)\r\n */\r\nvar defaultLogHandler = function (instance, logType) {\r\n    var args = [];\r\n    for (var _i = 2; _i < arguments.length; _i++) {\r\n        args[_i - 2] = arguments[_i];\r\n    }\r\n    if (logType < instance.logLevel)\r\n        return;\r\n    var now = new Date().toISOString();\r\n    switch (logType) {\r\n        /**\r\n         * By default, `console.debug` is not displayed in the developer console (in\r\n         * chrome). To avoid forcing users to have to opt-in to these logs twice\r\n         * (i.e. once for firebase, and once in the console), we are sending `DEBUG`\r\n         * logs to the `console.log` function.\r\n         */\r\n        case LogLevel.DEBUG:\r\n            console.log.apply(console, [\"[\" + now + \"]  \" + instance.name + \":\"].concat(args));\r\n            break;\r\n        case LogLevel.VERBOSE:\r\n            console.log.apply(console, [\"[\" + now + \"]  \" + instance.name + \":\"].concat(args));\r\n            break;\r\n        case LogLevel.INFO:\r\n            console.info.apply(console, [\"[\" + now + \"]  \" + instance.name + \":\"].concat(args));\r\n            break;\r\n        case LogLevel.WARN:\r\n            console.warn.apply(console, [\"[\" + now + \"]  \" + instance.name + \":\"].concat(args));\r\n            break;\r\n        case LogLevel.ERROR:\r\n            console.error.apply(console, [\"[\" + now + \"]  \" + instance.name + \":\"].concat(args));\r\n            break;\r\n        default:\r\n            throw new Error(\"Attempted to log a message with an invalid logType (value: \" + logType + \")\");\r\n    }\r\n};\r\nvar Logger = /** @class */ (function () {\r\n    /**\r\n     * Gives you an instance of a Logger to capture messages according to\r\n     * Firebase's logging scheme.\r\n     *\r\n     * @param name The name that the logs will be associated with\r\n     */\r\n    function Logger(name) {\r\n        this.name = name;\r\n        /**\r\n         * The log level of the given Logger instance.\r\n         */\r\n        this._logLevel = defaultLogLevel;\r\n        /**\r\n         * The log handler for the Logger instance.\r\n         */\r\n        this._logHandler = defaultLogHandler;\r\n        /**\r\n         * Capture the current instance for later use\r\n         */\r\n        instances.push(this);\r\n    }\r\n    Object.defineProperty(Logger.prototype, \"logLevel\", {\r\n        get: function () {\r\n            return this._logLevel;\r\n        },\r\n        set: function (val) {\r\n            if (!(val in LogLevel)) {\r\n                throw new TypeError('Invalid value assigned to `logLevel`');\r\n            }\r\n            this._logLevel = val;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Logger.prototype, \"logHandler\", {\r\n        get: function () {\r\n            return this._logHandler;\r\n        },\r\n        set: function (val) {\r\n            if (typeof val !== 'function') {\r\n                throw new TypeError('Value assigned to `logHandler` must be a function');\r\n            }\r\n            this._logHandler = val;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * The functions below are all based on the `console` interface\r\n     */\r\n    Logger.prototype.debug = function () {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        this._logHandler.apply(this, [this, LogLevel.DEBUG].concat(args));\r\n    };\r\n    Logger.prototype.log = function () {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        this._logHandler.apply(this, [this, LogLevel.VERBOSE].concat(args));\r\n    };\r\n    Logger.prototype.info = function () {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        this._logHandler.apply(this, [this, LogLevel.INFO].concat(args));\r\n    };\r\n    Logger.prototype.warn = function () {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        this._logHandler.apply(this, [this, LogLevel.WARN].concat(args));\r\n    };\r\n    Logger.prototype.error = function () {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        this._logHandler.apply(this, [this, LogLevel.ERROR].concat(args));\r\n    };\r\n    return Logger;\r\n}());\n\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nfunction setLogLevel(level) {\r\n    instances.forEach(function (inst) {\r\n        inst.logLevel = level;\r\n    });\r\n}\n\nexport { setLogLevel, Logger, LogLevel };\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/@firebase/logger/dist/index.esm.js\n// module id = 47\n// module chunks = 0","// In production, we register a service worker to serve assets from local cache.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\n// cached resources are updated in the background.\n\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\n// This link also includes instructions on opting out of this behavior.\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport default function register() {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebookincubator/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Lets check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://goo.gl/SC7cgQ'\n          );\n        });\n      } else {\n        // Is not local host. Just register service worker\n        registerValidSW(swUrl);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the old content will have been purged and\n              // the fresh content will have been added to the cache.\n              // It's the perfect time to display a \"New content is\n              // available; please refresh.\" message in your web app.\n              console.log('New content is available; please refresh.');\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      if (\n        response.status === 404 ||\n        response.headers.get('content-type').indexOf('javascript') === -1\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/registerServiceWorker.js"],"sourceRoot":""}